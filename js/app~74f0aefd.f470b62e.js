(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~74f0aefd"],{"0298":function(e,t,i){},"0da5":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"续交记录",top:8,"modal-height":"80vh","body-style":{padding:0},okButtonProps:{class:{"jee-hidden":!0}},visible:e.visible,"z-index":e.zIndex,width:"1140px"},on:{cancel:e.handleCancel}},[i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"","table-height":"auto",tableColumn:e.tableColumn,"if-init-query":!1,data:e.loadData,footerMethod:e.footerMethod},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.showContinuedDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 续交明细")],1)]}}])})],1),i("ShowRenewalRecordDetail",{ref:"renewalRecordDetail",attrs:{zIndex:e.zIndex+1}})],1)},r=[],l=i("3ed7"),n=i("c695"),o=i.n(n),s=i("0fea"),u=i("8f22"),d={name:"ShowRenewalRecord",components:{ShowRenewalRecordDetail:u["default"]},props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{formatterAmount:l["g"],queryParam:{},modalFlag:1,loadData:function(t){return Object(s["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,url:{regionList:"deposit/firstDeposit/queryRenewalRecordByRegionId",bldList:"deposit/firstDeposit/queryRenewalRecordByBldId",cellList:"deposit/firstDeposit/queryRenewalRecordByCellId",houseList:"deposit/firstDeposit/queryRenewalRecordByHouseId"},regionColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],bldColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本幢金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"houseNum",title:"本幢户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],cellColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本单元金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"houseNum",title:"本单元户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],houseColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本屋金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}]}},computed:{tableUrl:function(){switch(this.modalFlag){case 1:return this.url.regionList;case 2:return this.url.bldList;case 3:return this.url.cellList;case 4:return this.url.houseList}},tableColumn:function(){switch(this.modalFlag){case 1:return this.regionColumns;case 2:return this.bldColumns;case 3:return this.cellColumns;case 4:return this.houseColumns}}},methods:{footerMethod:function(e){var t=e.columns,i=e.data,a=[t.map((function(e,t){return"bankCode_dictText"===e.property?"合计：":["drawNum"].includes(e.property)||["houseNum"].includes(e.property)?o.a.sum(i,e.property):["drawAmount"].includes(e.property)||["reAmount"].includes(e.property)?Object(l["g"])(o.a.sum(i,e.property)):null}))];return a},showContinuedDetail:function(e){this.$refs.renewalRecordDetail.initData(e,this.queryParam.id,this.modalFlag)},initData:function(e,t){var i=this;this.modalFlag=t,this.queryParam.id=2===t?e.pid:e.id,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){i.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}},c=d,h=(i("1fb8"),i("2877")),f=Object(h["a"])(c,a,r,!1,null,"0575d1a1",null);t["default"]=f.exports},"0ec2":function(e,t,i){},1276:function(e,t,i){"use strict";i("0ec2")},"1f8f":function(e,t,i){"use strict";i("8e22")},"1fb8":function(e,t,i){"use strict";i("4869")},"291c":function(e,t,i){"use strict";i("f590")},"30fa":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[i("div",{staticClass:"cardBody"},[i("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.fieldList,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery")},on:{ok:e.handleSuperQuery,reset:e.resetQuery},scopedSlots:e._u([{key:"regionName",fn:function(t){var a=t.row;return[i("a-input",{attrs:{placeholder:"请输入小区名称",disabled:e.regionNameDisabled},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"regionCode",fn:function(t){var a=t.row;return[i("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"bldId",fn:function(t){var a=t.row;return[i("a-select",{staticClass:"width-100",attrs:{disabled:e.bldIdDisabled,placeholder:"请选择自然幢"},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[i("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n              "+e._s(t.districtName?t.districtName+t.name:t.name)+"\n            ")])])})),1)]}},{key:"cellId",fn:function(t){var a=t.row;return[i("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("id",t)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[i("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"housePur",fn:function(t){var a=t.row;return[i("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},on:{select:function(t){return e.selectSearch(4===e.detailModalFlag?"houseUse":"housePur",t)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[i("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport()}}},[e._v("导出")]),1!==e.detailModalFlag?i("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0}])}),i("div",{staticClass:"tableDiv"},[i("v-table",{key:"vTable"+e.detailModalFlag,ref:"table",attrs:{"sort-config":{defaultSort:{field:"",order:""}},bordered:"",resizable:"","auto-resize":"",toolbar:!0,"show-overflow":"","table-height":"auto",tableColumn:e.detailTableColumn,footerMethod:e.footerMethod,"show-footer-overflow":!0,"if-init-query":!1,data:e.loadData,customColumns:{name:"CellRenewalStatisticsList"}},scopedSlots:e._u([{key:"name",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.handleDetailRegion(r)}}},[e._v(e._s(a))])]}},{key:"state",fn:function(t){t.text;var a=t.row;return["0"===a.state?i("a-badge",{attrs:{status:"success",text:"已交"}}):e._e(),"3"===a.state?i("a-badge",{attrs:{status:"warning",text:"待全额退款"}}):e._e(),"4"===a.state?i("a-badge",{attrs:{status:"warning",text:"待销户"}}):e._e(),"7"===a.state?i("a-badge",{attrs:{status:"warning",text:"待资金转账"}}):e._e()]}},{key:"busiNo",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.print(r)}}},[e._v(e._s(a))])]}},{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.showContinuedDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(e._s(e.operationColumnText))],1),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.showRenewalRecordInfo(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 续交记录")],1)]}}])})],1)],1),i("ContinuedDetail",{ref:"continuedDetailInfo"}),i("ShowRenewalRecord",{ref:"renewalRecordInfo"}),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{operateFlag:!1}})],1)},r=[],l=i("0a5e"),n=i("6fa9"),o=i("0fea"),s=i("0da5"),u=i("c695"),d=i.n(u),c=i("3ed7"),h=i("eccd"),f=i("2b0e"),m=i("fdce"),p={name:"CellRenewalStatistics",components:{ContinuedDetail:function(){return Promise.resolve().then(i.bind(null,"8c0b"))},HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))},MESSuperQuery:n["default"],ShowRenewalRecord:s["default"],JDDictSelectTag:h["default"],JDictRegionListSelect:m["default"]},mixins:[l["a"]],data:function(){var e=this;return{fileName:"CellRenewalStatistics",conHouseTotalNum:"",conAmountTotal:"",reHouseTotalNum:"",reAmountTotal:"",modelFlag:!0,detailModalFlag:1,operationColumnText:"",bldIdDisabled:!1,regionNameDisabled:!1,regionName:"",regionId:"",bldInfoOptions:[],cellInfoOptions:[],sortField:"",sortOrder:"",loadData:function(t){return Object(o["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(i){return e.sortField=t.sortField,e.sortOrder=t.sortOrder,4===e.detailModalFlag?(e.struAreaTotal=i.result.bigDecimalList[0],e.dueAmountTotal=i.result.bigDecimalList[1],e.balanceTotal=i.result.bigDecimalList[2],e.conAmountTotal=i.result.bigDecimalList[3],i.result.page):(e.conHouseNumTotal=i.result.bigDecimalList[0],e.conAmountTotal=i.result.bigDecimalList[1],e.reHouseNumTotal=i.result.bigDecimalList[2],e.reAmountTotal=i.result.bigDecimalList[3],i.result.regionVOIPage)}))},url:{detailRegionList:"/base/rRegionInfo/queryCellRenewalStatistics",detailBldList:"/base/rRegionInfo/queryBldRenewalStatistics",detailCellList:"/base/rRegionInfo/queryCellRenewalStatisticsByBldId",detailHouseList:"/deposit/firstDeposit/queryContinuedDetail",RegionExportXlsUrl:"/base/rRegionInfo/exportCellRenewalStatisticsXls",BldExportXlsUrl:"/base/rRegionInfo/exportBldRenewalStatisticsXls",CellExportXlsUrl:"/base/rRegionInfo/exportCellRenewalStatisticsXlsByBldId",HouseExportXlsUrl:"/deposit/firstDeposit/exportContinuedDetailXls",printDepOfHandOver:"deposit/bBusiDeal/printDepOfHandOver",batchPrintOfComAcc:"deposit/bBusiDeal/batchPrintOfComAcc",printDepOfSelfing:"deposit/bBusiDeal/printDepOfSelfing",queryReport:"/ureport2/ureport2Config/queryReport"},detailRegionQueryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailBldQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailCellQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailHouseQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailRegionColumns:[{field:"name",title:"小区名称",align:"left",slot:!0,minWidth:200,sort:!0,customSortField:"region.name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续交户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续交笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailBldColumns:[{field:"districtName",title:"分区名称",align:"center",headerAlign:"center",minWidth:120},{field:"name",title:"自然幢名称",align:"left",slot:!1,minWidth:200,sort:!0,customSortField:"name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续交户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续交笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailCellColumns:[{field:"name",title:"单元名称",align:"left",slot:!1,minWidth:200,sort:!0,customSortField:"name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续交户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续交笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续交金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailHouseColumns:[{field:"address",title:"房屋位置",align:"center",slot:!1,direction:"rtl",minWidth:160,sort:!0,customSortField:"house.address"},{field:"accCode",title:"房屋账号",align:"center",width:160,sort:!0,customSortField:"accCode"},{field:"struArea",title:"建筑面积(㎡)",align:"right",width:120,formatter:"area",sort:!0,customSortField:"struArea"},{field:"psnName",title:"业主姓名",align:"center",minWidth:100,sort:!0,customSortField:"psnName"},{field:"dueAmount",title:"初次应交金额（元）",align:"right",formatter:"amount",minWidth:150,sort:!0,customSortField:"dueAmount"},{field:"balance",title:"账户余额（元）",align:"right",formatter:"amount",minWidth:120,sort:!0,customSortField:"acc.balance"},{field:"conAmount",title:"待续交金额（元）",align:"right",formatter:"amount",minWidth:140,sort:!0,customSortField:"conAmount"},{field:"state",title:"账户状态",align:"center",slot:!0,width:120,sort:!0,customSortField:"acc.state"},{field:"busiNo",title:"续交申请编号",align:"center",slot:!0,width:150,sort:!0,customSortField:"dep.busiNo"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}]}},computed:{detailTableColumn:function(){switch(this.detailModalFlag){case 1:return this.operationColumnText="待续交明细",this.$set(this.detailRegionQueryObj[3],"val",this.queryParam.housePur),this.detailRegionColumns;case 2:return this.operationColumnText="待续交明细",this.$set(this.detailBldQueryObj[0],"val",this.regionName),this.$set(this.detailBldQueryObj[1],"val",this.queryParam.housePur),this.detailBldColumns;case 3:return this.operationColumnText="待续交明细",this.$set(this.detailCellQueryObj[0],"val",this.regionName),this.$set(this.detailCellQueryObj[1],"val",this.queryParam.bldId),this.$set(this.detailCellQueryObj[2],"val",this.queryParam.housePur),this.detailCellColumns;case 4:return this.operationColumnText="信息维护",this.$set(this.detailHouseQueryObj[0],"val",this.regionName),this.$set(this.detailHouseQueryObj[1],"val",this.queryParam.bldId),this.$set(this.detailHouseQueryObj[2],"val",this.queryParam.id),this.$set(this.detailHouseQueryObj[3],"val",this.queryParam.houseUse),this.detailHouseColumns}},tableUrl:function(){switch(this.detailModalFlag){case 1:return this.url.detailRegionList;case 2:return this.url.detailBldList;case 3:return this.url.detailCellList;case 4:return this.url.detailHouseList}},fieldList:function(){switch(this.detailModalFlag){case 1:return this.detailRegionQueryObj;case 2:return this.detailBldQueryObj;case 3:return this.detailCellQueryObj;case 4:return this.detailHouseQueryObj}},handleExportText:function(){switch(this.detailModalFlag){case 1:return"小区续交统计"+(new Date).getTime()+".xls";case 2:return"自然幢续交统计"+(new Date).getTime()+".xls";case 3:return"单元续交统计"+(new Date).getTime()+".xls";case 4:return"房屋续交统计"+(new Date).getTime()+".xls"}},handleExportUrl:function(){switch(this.detailModalFlag){case 1:return this.url.RegionExportXlsUrl;case 2:return this.url.BldExportXlsUrl;case 3:return this.url.CellExportXlsUrl;case 4:return this.url.HouseExportXlsUrl}}},methods:{handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},handleExport:function(){var e=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(t){var i="";t.forEach((function(e){e.includes("action")||(i=i+e+",")})),i=i.slice(0,-1);var a=void 0===e.sortField?"":e.sortField,r=void 0===e.sortOrder?"":e.sortOrder,l=e.handleExportUrl+"?exportXlsColumn="+i+"&sortField="+a+"&sortOrder="+r;Object(o["c"])(l,e.queryParam).then((function(t){if(t)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([t],{type:"application/vnd.ms-excel"}),e.handleExportText+".xls");else{var i=window.URL.createObjectURL(new Blob([t],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e.handleExportText+".xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else e.$message.warning("文件下载失败")}))}))},resetQuery:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"housePur",void 0),this.$set(this.queryParam,"houseUse",void 0),1===this.detailModalFlag&&(this.regionName=void 0),this.$refs.mesQuery.setQueryListVal([{field:"regionName",val:this.regionName},{field:"bldId",val:this.queryParam.bldId},{field:"cellId",val:this.queryParam.id}]),this.resetFooter(),this.queryPage()},resetFooter:function(){this.struAreaTotal=0,this.dueAmountTotal=0,this.balanceTotal=0,this.conAmountTotal=0,this.conHouseNumTotal=0,this.conAmountTotal=0,this.reHouseNumTotal=0,this.reAmountTotal=0,this.$refs.table.updateFooter()},footerMethod:function(e){var t=this,i=e.columns,a=e.data,r=[i.map((function(e,t){return"codeName"===e.property||"accCode"===e.property?"合计：":["conHouseNum","reHouseNum"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property),0):["conAmount","reAmount"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property)):"struArea"===e.property?Object(c["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property)):null})),i.map((function(e,i){return"codeName"===e.property||"accCode"===e.property?"总合计：":["conHouseNum","reHouseNum"].includes(e.property)?Object(c["g"])(t[e.property+"Total"],0):["conAmount","reAmount"].includes(e.property)?Object(c["g"])(t[e.property+"Total"]):"struArea"===e.property?Object(c["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(c["g"])(t[e.property+"Total"]):null}))];return r},showContinuedDetail:function(e){var t=this;this.detailModalFlag&&1===this.detailModalFlag&&this.$set(this.detailBldQueryObj[0],"val",e.regionName),4===this.detailModalFlag?(e.houseId=e.id,this.$refs.infoModal.initData(e)):(this.regionNameDisabled=!0,1===this.detailModalFlag?(this.regionId=e.id,this.regionName=e.name,this.detailBldColumns[0].hidden=!(e.isDistrict&&1===e.isDistrict)):3===this.detailModalFlag&&(this.bldIdDisabled=!0,null!==e.id&&(this.queryParam.id=e.id),this.queryParam.houseUse=this.queryParam.housePur,this.$set(this.queryParam,"housePur",void 0)),null!==e.pid&&(this.queryParam.bldId=e.pid),null!==e.code&&(this.queryParam.code=e.code),this.detailModalFlag=this.detailModalFlag+1,this.$nextTick((function(){t.resetFooter(),t.queryPage(),t.getBldInfo(),t.changeBld()})))},print:function(e){var t=[];t.push(e.busiNo),"02"===e.busiObject?"0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail||"0012"===e.busiTypeDetail?this.publicPrint("deposit_enterprise",t,this.url.printDepOfHandOver,e.state):this.publicPrint("deposit_publicAcc",t,this.url.batchPrintOfComAcc,e.state):"03"===e.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):this.publicPrint("deposit_owner",t,this.url.printDepOfSelfing,e.state)},publicPrint:function(e,t,i,a,r){var l=this;Object(o["e"])(this.url.queryReport,{formType:e}).then((function(e){if(e.success&&e.result&&e.result.formTypeName){var n=e.result.formTypeName,s=f["default"].ls.get("SOURCE_NAME");s&&""!==s||(s="master");var u=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+s+"db:"+n+"&_t="+e.result.reportHeaderButton+"&_n=交存通知单&busiNo="+t;i&&(4==a||r&&r.length>0)?Object(o["j"])(i,r&&r.length>0?r:t).then((function(e){e.success?(window.open(u),l.resetFooter(),l.queryPage()):window.open(u)})):window.open(u)}}))},showRenewalRecordInfo:function(e){this.$refs.renewalRecordInfo.initData(e,this.detailModalFlag)},back:function(){var e=this;if(this.modelFlag)if(this.detailModalFlag=this.detailModalFlag-1,3===this.detailModalFlag)this.bldIdDisabled=!1,this.queryParam.housePur=this.queryParam.houseUse,this.$set(this.queryParam,"houseUse",void 0);else if(1===this.detailModalFlag)return this.queryParam={},void this.$nextTick((function(){e.resetFooter(),e.$refs.mesQuery.manuallyQuery()}));this.$nextTick((function(){e.resetFooter(),e.queryPage(),e.getBldInfo(),e.changeBld()}))},selectSearch:function(e,t){this.queryParam[e]=t},getBldInfo:function(){var e=this;Object(o["e"])("/base/rBldInfo/list",{pid:this.regionId,current:1,size:-1,state:"0"}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))},changeBld:function(e){var t,i=this;t=void 0!==e?e:this.queryParam.bldId,Object(o["e"])("/base/rCellInfo/list",{pid:t}).then((function(e){0!==e.result.records.length?i.cellInfoOptions=e.result.records:i.cellInfoOptions=void 0}))},emptyCell:function(){this.$set(this.queryParam,"id",void 0)}}},b=p,g=(i("15e0"),i("9105"),i("2877")),y=Object(g["a"])(b,a,r,!1,null,"23260886",null);t["default"]=y.exports},3283:function(e,t,i){},"3f51":function(e,t,i){"use strict";i("3283")},4869:function(e,t,i){},"5ad9":function(e,t,i){e.exports=i.p+"4871b370a66844a1c0d9caa85b83d435.md"},"6aa83":function(e,t,i){},7765:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"续筹明细",top:8,"body-style":{padding:0},visible:e.visible,"z-index":e.zIndex,width:14==e.font?"1140px":"1250px",okButtonProps:{class:{"jee-hidden":!0}}},on:{cancel:e.handleCancel}},[i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",showPagination:!0,tableColumn:e.columns,"if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.handleHouseDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 信息维护")],1)]}}])})],1),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{index:e.zIndex+1,isDetail:!0}})],1)},r=[],l=i("2b0e"),n=i("9fb0"),o=i("0fea"),s=(i("3e8f"),i("2ef0"),{name:"ShowConFundrasingRecordDetail",components:{HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))}},props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{detailList:[],modalFlag:1,loadData:function(t){return Object(o["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,queryParam:{id:"",busiNo:""},url:{regionList:"/deposit/firstDeposit/queryRegionConFundrasingDetails",bldList:"/deposit/firstDeposit/queryBldConFundrasingDetails",cellList:"/deposit/firstDeposit/queryCellConFundrasingDetails",houseList:"/deposit/firstDeposit/queryHouseConFundrasingDetails"},columns:[{field:"address",title:"房屋位置",align:"center",slot:!1,direction:"rtl"},{field:"accCode",title:"房屋账户",align:"center"},{field:"struArea",title:"建筑面积（㎡）",align:"right",formatter:"area"},{field:"psnName",title:"业主姓名",align:"center"},{field:"dueAmount",title:"应续筹金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"实际续筹金额（元）",align:"right",formatter:"amount"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],font:l["default"].ls.get(n["w"])}},computed:{tableUrl:function(){switch(this.modalFlag){case 1:return this.url.regionList;case 2:return this.url.bldList;case 3:return this.url.cellList;case 4:return this.url.houseList}}},methods:{handleHouseDetail:function(e){e.houseId=e.id,this.$refs.infoModal.initData(e)},initData:function(e,t,i){var a=this;this.queryParam.id=t,this.modalFlag=i,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){a.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}}),u=s,d=(i("291c"),i("2877")),c=Object(d["a"])(u,a,r,!1,null,"fa486b78",null);t["default"]=c.exports},"868c":function(e,t,i){"use strict";i("0298")},"8bbb":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[i("div",{staticClass:"cardBody"},[i("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.fieldList,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery")},on:{ok:e.handleSuperQuery,reset:e.resetQuery},scopedSlots:e._u([{key:"regionName",fn:function(t){var a=t.row;return[i("a-input",{attrs:{placeholder:"请输入小区名称",disabled:e.regionNameDisabled},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"regionCode",fn:function(t){var a=t.row;return[i("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"bldId",fn:function(t){var a=t.row;return[i("a-select",{staticClass:"width-100",attrs:{disabled:e.bldIdDisabled,placeholder:"请选择自然幢"},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[i("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n              "+e._s(t.districtName?t.districtName+t.name:t.name)+"\n            ")])])})),1)]}},{key:"cellId",fn:function(t){var a=t.row;return[i("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("id",t)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[i("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"housePur",fn:function(t){var a=t.row;return[i("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},on:{select:function(t){return e.selectSearch(4===e.detailModalFlag?"houseUse":"housePur",t)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[i("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport()}}},[e._v("导出")]),1!==e.detailModalFlag?i("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0}])}),i("div",{staticClass:"tableDiv"},[i("v-table",{key:"vTable"+e.detailModalFlag,ref:"table",attrs:{"sort-config":{defaultSort:{field:"",order:""}},bordered:"",resizable:"","auto-resize":"",toolbar:!0,"show-overflow":"","table-height":"auto",tableColumn:e.detailTableColumn,footerMethod:e.footerMethod,"show-footer-overflow":!0,"if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"name",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.handleDetailRegion(r)}}},[e._v(e._s(a))])]}},{key:"state",fn:function(t){t.text;var a=t.row;return["0"===a.state?i("a-badge",{attrs:{status:"success",text:"已交"}}):e._e(),"3"===a.state?i("a-badge",{attrs:{status:"warning",text:"待全额退款"}}):e._e(),"4"===a.state?i("a-badge",{attrs:{status:"warning",text:"待销户"}}):e._e(),"7"===a.state?i("a-badge",{attrs:{status:"warning",text:"待资金转账"}}):e._e()]}},{key:"busiNo",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.print(r)}}},[e._v(e._s(a))])]}},{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.showConFundrasingDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(e._s(e.operationColumnText))],1),i("a-divider",{attrs:{type:"vertical"}}),i("a",{on:{click:function(t){return e.showConFundrasingRecordInfo(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 续筹记录")],1)]}}])})],1)],1),i("ConFundrasingDetail",{ref:"conFundrasingDetailInfo"}),i("ShowConFundrasingRecord",{ref:"conFundrasingRecordInfo"}),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{operateFlag:!1}})],1)},r=[],l=i("0a5e"),n=i("6fa9"),o=i("0fea"),s=i("e8bb"),u=i("c695"),d=i.n(u),c=i("3ed7"),h=i("eccd"),f=i("2b0e"),m=i("ca00"),p=i("fdce"),b={name:"CellConFundrasing",components:{ConFundrasingDetail:function(){return Promise.resolve().then(i.bind(null,"acaa"))},HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))},MESSuperQuery:n["default"],ShowConFundrasingRecord:s["default"],JDDictSelectTag:h["default"],JDictRegionListSelect:p["default"]},mixins:[l["a"]],data:function(){var e=this;return{fileName:"CellConFundrasing",conHouseTotalNum:"",conAmountTotal:"",reHouseTotalNum:"",reAmountTotal:"",modelFlag:!0,detailModalFlag:1,operationColumnText:"",bldIdDisabled:!1,regionNameDisabled:!1,regionName:"",regionId:"",bldInfoOptions:[],cellInfoOptions:[],sortField:"",sortOrder:"",loadData:function(t){return Object(o["e"])(e.tableUrl,Object.assign(t,e.getQueryParams(t))).then((function(i){return e.sortField=t.sortField,e.sortOrder=t.sortOrder,4===e.detailModalFlag?(e.struAreaTotal=i.result.bigDecimalList[0],e.dueAmountTotal=i.result.bigDecimalList[1],e.balanceTotal=i.result.bigDecimalList[2],e.conAmountTotal=i.result.bigDecimalList[3],i.result.page):(e.conHouseNumTotal=i.result.bigDecimalList[0],e.conAmountTotal=i.result.bigDecimalList[1],e.reHouseNumTotal=i.result.bigDecimalList[2],e.reAmountTotal=i.result.bigDecimalList[3],i.result.regionVOIPage)}))},url:{detailRegionList:"/base/rRegionInfo/queryCellCellConFundrasing",detailBldList:"/base/rRegionInfo/queryBldConFundrasing",detailCellList:"/base/rRegionInfo/queryCellConFundrasingByBldId",detailHouseList:"/deposit/firstDeposit/queryConFundrasingDetail",RegionExportXlsUrl:"/base/rRegionInfo/exportCellConFundrasingXls",BldExportXlsUrl:"/base/rRegionInfo/exportBldConFundrasingXls",CellExportXlsUrl:"/base/rRegionInfo/exportCellConFundrasingXlsByBldId",HouseExportXlsUrl:"/deposit/firstDeposit/exportConFundrasingDetailXls",printDepOfHandOver:"deposit/bBusiDeal/printDepOfHandOver",batchPrintOfComAcc:"deposit/bBusiDeal/batchPrintOfComAcc",printDepOfSelfing:"deposit/bBusiDeal/printDepOfSelfing",queryReport:"/ureport2/ureport2Config/queryReport"},detailRegionQueryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailBldQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailCellQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailHouseQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],detailRegionColumns:[{field:"name",title:"小区名称",align:"left",slot:!0,minWidth:200,sort:!0,customSortField:"region.name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续筹户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续筹笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailBldColumns:[{field:"districtName",title:"分区名称",align:"center",headerAlign:"center",minWidth:120},{field:"name",title:"自然幢名称",align:"left",slot:!1,minWidth:200,sort:!0,customSortField:"name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续筹户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续筹笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailCellColumns:[{field:"name",title:"单元名称",align:"left",slot:!1,minWidth:200,sort:!0,customSortField:"name"},{field:"sysOrgName",title:"主管单位",align:"center",width:120},{field:"codeName",title:"所属区县",align:"center",width:120},{field:"conHouseNum",title:"待续筹户数（户）",align:"right",width:150,sort:!0,customSortField:"conHouseNum"},{field:"conAmount",title:"待续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"conAmount"},{field:"reHouseNum",title:"已续筹笔数（笔）",align:"right",width:150,sort:!0,customSortField:"reHouseNum"},{field:"reAmount",title:"已续筹金额（元）",align:"right",formatter:"amount",width:150,sort:!0,customSortField:"reAmount"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}],detailHouseColumns:[{field:"address",title:"房屋位置",align:"center",slot:!1,direction:"rtl",minWidth:160,sort:!0,customSortField:"house.address"},{field:"accCode",title:"房屋账号",align:"center",width:160,sort:!0,customSortField:"accCode"},{field:"struArea",title:"建筑面积(㎡)",align:"right",width:120,formatter:"area",sort:!0,customSortField:"struArea"},{field:"psnName",title:"业主姓名",align:"center",minWidth:100,sort:!0,customSortField:"psnName"},{field:"dueAmount",title:"初次应交金额（元）",align:"right",formatter:"amount",minWidth:150,sort:!0,customSortField:"dueAmount"},{field:"balance",title:"账户余额（元）",align:"right",formatter:"amount",minWidth:120,sort:!0,customSortField:"acc.balance"},{field:"conAmount",title:"待续筹金额（元）",align:"right",formatter:"amount",minWidth:140,sort:!0,customSortField:"conAmount"},{field:"state",title:"账户状态",align:"center",slot:!0,width:120,sort:!0,customSortField:"acc.state"},{field:"busiNo",title:"续筹申请编号",align:"center",slot:!0,width:150,sort:!0,customSortField:"dep.busiNo"},{title:"操作",field:"action",align:"center",width:300,fixed:"right",slot:!0}]}},computed:{detailTableColumn:function(){switch(this.detailModalFlag){case 1:return this.operationColumnText="待续筹明细",this.$set(this.detailRegionQueryObj[3],"val",this.queryParam.housePur),this.detailRegionColumns;case 2:return this.operationColumnText="待续筹明细",this.$set(this.detailBldQueryObj[0],"val",this.regionName),this.$set(this.detailBldQueryObj[1],"val",this.queryParam.housePur),this.detailBldColumns;case 3:return this.operationColumnText="待续筹明细",this.$set(this.detailCellQueryObj[0],"val",this.regionName),this.$set(this.detailCellQueryObj[1],"val",this.queryParam.bldId),this.$set(this.detailCellQueryObj[2],"val",this.queryParam.housePur),this.detailCellColumns;case 4:return this.operationColumnText="信息维护",this.$set(this.detailHouseQueryObj[0],"val",this.regionName),this.$set(this.detailHouseQueryObj[1],"val",this.queryParam.bldId),this.$set(this.detailHouseQueryObj[2],"val",this.queryParam.id),this.$set(this.detailHouseQueryObj[3],"val",this.queryParam.houseUse),this.detailHouseColumns}},tableUrl:function(){switch(this.detailModalFlag){case 1:return this.url.detailRegionList;case 2:return this.url.detailBldList;case 3:return this.url.detailCellList;case 4:return this.url.detailHouseList}},fieldList:function(){switch(this.detailModalFlag){case 1:return this.detailRegionQueryObj;case 2:return this.detailBldQueryObj;case 3:return this.detailCellQueryObj;case 4:return this.detailHouseQueryObj}},handleExportText:function(){switch(this.detailModalFlag){case 1:return"小区续筹统计"+(new Date).getTime()+".xls";case 2:return"自然幢续筹统计"+(new Date).getTime()+".xls";case 3:return"单元续筹统计"+(new Date).getTime()+".xls";case 4:return"房屋续筹统计"+(new Date).getTime()+".xls"}},handleExportUrl:function(){switch(this.detailModalFlag){case 1:return this.url.RegionExportXlsUrl;case 2:return this.url.BldExportXlsUrl;case 3:return this.url.CellExportXlsUrl;case 4:return this.url.HouseExportXlsUrl}}},methods:{handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},getQueryParams:function(e){var t=Object.assign(e,this.queryParam);return t.busiTypeDetail="0012",Object(m["f"])(t)},handleExport:function(){var e=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(t){var i="";t.forEach((function(e){e.includes("action")||(i=i+e+",")})),i=i.slice(0,-1);var a=void 0===e.sortField?"":e.sortField,r=void 0===e.sortOrder?"":e.sortOrder,l=e.handleExportUrl+"?exportXlsColumn="+i+"&sortField="+a+"&sortOrder="+r;Object(o["c"])(l,e.queryParam).then((function(t){if(t)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([t],{type:"application/vnd.ms-excel"}),e.handleExportText+".xls");else{var i=window.URL.createObjectURL(new Blob([t],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e.handleExportText+".xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else e.$message.warning("文件下载失败")}))}))},resetQuery:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"housePur",void 0),this.$set(this.queryParam,"houseUse",void 0),1===this.detailModalFlag&&(this.regionName=void 0),this.$refs.mesQuery.setQueryListVal([{field:"regionName",val:this.regionName},{field:"bldId",val:this.queryParam.bldId},{field:"cellId",val:this.queryParam.id}]),this.queryPage()},footerMethod:function(e){var t=this,i=e.columns,a=e.data,r=[i.map((function(e,t){return"codeName"===e.property||"accCode"===e.property?"合计：":["conHouseNum","reHouseNum"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property),0):["conAmount","reAmount"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property)):"struArea"===e.property?Object(c["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(c["g"])(d.a.sum(a,e.property)):null})),i.map((function(e,i){return"codeName"===e.property||"accCode"===e.property?"总合计：":["conHouseNum","reHouseNum"].includes(e.property)?Object(c["g"])(t[e.property+"Total"],0):["conAmount","reAmount"].includes(e.property)?Object(c["g"])(t[e.property+"Total"]):"struArea"===e.property?Object(c["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(c["g"])(t[e.property+"Total"]):null}))];return r},showConFundrasingDetail:function(e){var t=this;this.detailModalFlag&&1===this.detailModalFlag&&this.$set(this.detailBldQueryObj[0],"val",e.regionName),4===this.detailModalFlag?(e.houseId=e.id,this.$refs.infoModal.initData(e)):(this.regionNameDisabled=!0,1===this.detailModalFlag?(this.regionId=e.id,this.regionName=e.name,this.detailBldColumns[0].hidden=!(e.isDistrict&&1===e.isDistrict)):3===this.detailModalFlag&&(this.bldIdDisabled=!0,null!==e.id&&(this.queryParam.id=e.id),this.queryParam.houseUse=this.queryParam.housePur,this.$set(this.queryParam,"housePur",void 0)),null!==e.pid&&(this.queryParam.bldId=e.pid),null!==e.code&&(this.queryParam.code=e.code),this.detailModalFlag=this.detailModalFlag+1,this.$nextTick((function(){t.queryPage(),t.getBldInfo(),t.changeBld()})))},print:function(e){var t=[];t.push(e.busiNo),"02"===e.busiObject?"0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail||"0012"===e.busiTypeDetail?this.publicPrint("deposit_enterprise",t,this.url.printDepOfHandOver,e.state):this.publicPrint("deposit_publicAcc",t,this.url.batchPrintOfComAcc,e.state):"03"===e.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):this.publicPrint("deposit_owner",t,this.url.printDepOfSelfing,e.state)},publicPrint:function(e,t,i,a,r){var l=this;Object(o["e"])(this.url.queryReport,{formType:e}).then((function(e){if(e.success&&e.result&&e.result.formTypeName){var n=e.result.formTypeName,s=f["default"].ls.get("SOURCE_NAME");s&&""!==s||(s="master");var u=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+s+"db:"+n+"&_t="+e.result.reportHeaderButton+"&_n=交存通知单&busiNo="+t;i&&(4==a||r&&r.length>0)?Object(o["j"])(i,r&&r.length>0?r:t).then((function(e){e.success?(window.open(u),l.queryPage()):window.open(u)})):window.open(u)}}))},showConFundrasingRecordInfo:function(e){this.$refs.conFundrasingRecordInfo.initData(e,this.detailModalFlag)},back:function(){var e=this;if(this.modelFlag)if(this.detailModalFlag=this.detailModalFlag-1,3===this.detailModalFlag)this.bldIdDisabled=!1,this.queryParam.housePur=this.queryParam.houseUse,this.$set(this.queryParam,"houseUse",void 0);else if(1===this.detailModalFlag)return this.queryParam={},void this.$nextTick((function(){e.$refs.mesQuery.manuallyQuery()}));this.$nextTick((function(){e.queryPage(),e.getBldInfo(),e.changeBld()}))},selectSearch:function(e,t){this.queryParam[e]=t},getBldInfo:function(){var e=this;Object(o["e"])("/base/rBldInfo/list",{pid:this.regionId,current:1,size:-1,state:"0"}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))},changeBld:function(e){var t,i=this;t=void 0!==e?e:this.queryParam.bldId,Object(o["e"])("/base/rCellInfo/list",{pid:t}).then((function(e){0!==e.result.records.length?i.cellInfoOptions=e.result.records:i.cellInfoOptions=void 0}))},emptyCell:function(){this.$set(this.queryParam,"id",void 0)}}},g=b,y=(i("6b79"),i("868c"),i("2877")),v=Object(y["a"])(g,a,r,!1,null,"e6d18d14",null);t["default"]=v.exports},"8c0b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"待续交明细",top:8,"body-style":{padding:0},visible:e.visible,zIndex:e.zIndex,width:"80vw","modal-height":"80vh",okButtonProps:{class:{"jee-hidden":!0}}},on:{cancel:e.handleCancel}},[i("div",{staticClass:"modalBody"},[i("m-e-s-super-query",{ref:"mesQuery",staticClass:"queryDiv",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"address",fn:function(t){var a=t.row;return[i("a-input",{staticClass:"width100",attrs:{placeholder:"请输入房屋位置"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"bld",fn:function(t){var a=t.row;return[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择自然幢"},on:{change:function(t,i){return e.getCell(a.val,i)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.name,"data-obj":t}},[i("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"cell",fn:function(t){var a=t.row;return[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择单元"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.name}},[i("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"extra",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[i("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("待续交明细")}}},[e._v("导出")])],1)]},proxy:!0}])}),i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"",footerMethod:e.footerMethod,"auto-resize":"","show-overflow":"",toolbar:!0,tableColumn:e.columns,"table-height":"auto","if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"state",fn:function(t){t.text;var a=t.row;return["0"===a.state?i("a-badge",{attrs:{status:"success",text:"已交"}}):e._e(),"3"===a.state?i("a-badge",{attrs:{status:"warning",text:"待全额退款"}}):e._e(),"4"===a.state?i("a-badge",{attrs:{status:"warning",text:"待销户"}}):e._e(),"7"===a.state?i("a-badge",{attrs:{status:"warning",text:"待资金转账"}}):e._e()]}},{key:"address",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.handleHouseDetail(r)}}},[e._v(e._s(a))])]}},{key:"busiNo",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.print(r)}}},[e._v(e._s(a))])]}}])})],1)],1),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{index:e.zIndex+1,operateFlag:!1}})],1)},r=[],l=i("0a5e"),n=i("0fea"),o=i("6fa9"),s=i("3ed7"),u=i("c695"),d=i.n(u),c=i("2b0e"),h={name:"ContinueDetail",components:{MESSuperQuery:o["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))}},mixins:[l["a"]],props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{fileName:"ContinuedDetail",dueAmountTotal:"",balanceTotal:"",conAmountTotal:"",struAreaTotal:"",queryParam:{},loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.struAreaTotal=t.result.bigDecimalList[0],e.dueAmountTotal=t.result.bigDecimalList[1],e.balanceTotal=t.result.bigDecimalList[2],e.conAmountTotal=t.result.bigDecimalList[3],t.result.page}))},visible:!1,bldInfoOptions:[],cellInfoOptions:[],url:{list:"deposit/firstDeposit/queryContinuedDetail",queryReport:"/ureport2/ureport2Config/queryReport",exportXlsUrl:"/deposit/firstDeposit/exportContinuedDetailXls"},queryObj:[{type:"input",value:"house.address",label:"房屋位置",queryType:"like",slotName:"address"},{type:"slot",value:"house.address",label:"自然幢",queryType:"like",slotName:"bld"},{type:"slot",value:"house.address",label:"单元",queryType:"like",slotName:"cell"}],columns:[{field:"address",title:"房屋位置",align:"center",slot:!0,direction:"rtl",minWidth:160},{field:"accCode",title:"房屋账号",align:"center",width:160},{field:"struArea",title:"建筑面积(㎡)",align:"right",width:120,formatter:"area"},{field:"psnName",title:"业主姓名",align:"center",minWidth:100},{field:"dueAmount",title:"初次应交金额（元）",align:"right",formatter:"amount",minWidth:150},{field:"balance",title:"账户余额（元）",align:"right",formatter:"amount",minWidth:120},{field:"conAmount",title:"待续交金额（元）",align:"right",formatter:"amount",minWidth:140},{field:"state",title:"账户状态",align:"center",slot:!0,width:120},{field:"busiNo",title:"续交申请编号",align:"center",slot:!0,width:150}]}},methods:{getBld:function(e){var t=this;Object(n["e"])("/base/rBldInfo/list",{pid:e}).then((function(e){0!==e.result.records.length?t.bldInfoOptions=e.result.records:t.bldInfoOptions=void 0}))},getCell:function(e,t){var i=this;Object(n["e"])("/base/rCellInfo/list",{pid:t.data.attrs["data-obj"].id}).then((function(e){0!==e.result.records.length?(i.cellInfoOptions=e.result.records,i.$set(i.queryParam,"cellId",void 0)):i.cellInfoOptions=void 0}))},footerMethod:function(e){var t=this,i=e.columns,a=e.data,r=[i.map((function(e,t){return"accCode"===e.property?"合计：":"struArea"===e.property?Object(s["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(s["g"])(d.a.sum(a,e.property)):null})),i.map((function(e,i){return"accCode"===e.property?"总合计：":"struArea"===e.property?Object(s["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(s["g"])(t[e.property+"Total"]):null}))];return r},handleExport:function(e){var t=this;Object(n["b"])(this.url.exportXlsUrl,Object.assign(this.queryParam,{size:50})).then((function(i){if(i)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([i],{type:"application/vnd.ms-excel"}),e+".xls");else{var a=window.URL.createObjectURL(new Blob([i],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.style.display="none",r.href=a,r.setAttribute("download",e+".xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}else t.$message.warning("文件下载失败")}))},print:function(e){var t=[];t.push(e.busiNo),"02"===e.busiObject?"0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail||"0012"===e.busiTypeDetail?this.publicPrint("deposit_enterprise",t,this.url.printDepOfHandOver,e.state):this.publicPrint("deposit_publicAcc",t,this.url.batchPrintOfComAcc,e.state):"03"===e.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):this.publicPrint("deposit_owner",t,this.url.printDepOfSelfing,e.state)},publicPrint:function(e,t,i,a,r){var l=this;Object(n["e"])(this.url.queryReport,{formType:e}).then((function(e){if(e.success&&e.result&&e.result.formTypeName){var o=e.result.formTypeName,s=c["default"].ls.get("SOURCE_NAME");s&&""!==s||(s="master");var u=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+s+"db:"+o+"&_t="+e.result.reportHeaderButton+"&_n=交存通知单&busiNo="+t;i&&(4==a||r&&r.length>0)?Object(n["j"])(i,r&&r.length>0?r:t).then((function(e){e.success?(window.open(u),l.queryPage()):window.open(u)})):window.open(u)}}))},handleHouseDetail:function(e){e.houseId=e.id,this.$refs.infoModal.initData(e)},initData:function(e){var t=this;this.queryParam.code=e.code,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){t.getBld(e.id),t.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}},f=h,m=(i("1f8f"),i("2877")),p=Object(m["a"])(f,a,r,!1,null,"6b9da714",null);t["default"]=p.exports},"8c15":function(e,t,i){"use strict";i("b7a3")},"8e22":function(e,t,i){},"8f22":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"续交明细",top:8,"body-style":{padding:0},visible:e.visible,"z-index":e.zIndex,width:14==e.font?"1140px":"1250px",okButtonProps:{class:{"jee-hidden":!0}}},on:{cancel:e.handleCancel}},[i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",showPagination:!0,tableColumn:e.columns,"if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.handleHouseDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 信息维护")],1)]}}])})],1),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{index:e.zIndex+1,isDetail:!0}})],1)},r=[],l=i("2b0e"),n=i("9fb0"),o=i("0fea"),s=(i("3e8f"),i("2ef0"),{name:"ShowRenewalRecordDetail",components:{HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))}},props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{detailList:[],modalFlag:1,loadData:function(t){return Object(o["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,queryParam:{id:"",busiNo:""},url:{regionList:"/deposit/firstDeposit/queryRegionRenewalRecordsDetails",bldList:"/deposit/firstDeposit/queryBldRenewalRecordsDetails",cellList:"/deposit/firstDeposit/queryCellRenewalRecordsDetails",houseList:"/deposit/firstDeposit/queryHouseRenewalRecordsDetails"},columns:[{field:"address",title:"房屋位置",align:"center",slot:!1,direction:"rtl"},{field:"accCode",title:"房屋账户",align:"center"},{field:"struArea",title:"建筑面积（㎡）",align:"right",formatter:"area"},{field:"psnName",title:"业主姓名",align:"center"},{field:"dueAmount",title:"应续交金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"实际续交金额（元）",align:"right",formatter:"amount"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],font:l["default"].ls.get(n["w"])}},computed:{tableUrl:function(){switch(this.modalFlag){case 1:return this.url.regionList;case 2:return this.url.bldList;case 3:return this.url.cellList;case 4:return this.url.houseList}}},methods:{handleHouseDetail:function(e){e.houseId=e.id,this.$refs.infoModal.initData(e)},initData:function(e,t,i){var a=this;this.queryParam.id=t,this.modalFlag=i,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){a.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}}),u=s,d=(i("c3d8"),i("2877")),c=Object(d["a"])(u,a,r,!1,null,"25a7d693",null);t["default"]=c.exports},9105:function(e,t,i){"use strict";i("6aa83")},"99e0":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"小区日志",top:8,"modal-height":"80vh","body-style":{padding:0},okButtonProps:{class:{"jee-hidden":!0}},visible:e.visible,"z-index":e.zIndex,width:"1140px"},on:{cancel:e.handleCancel}},[i("div",{staticClass:"queryDiv"},[i("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,"default-sys-org":!0,"default-query":!0,isInitQuery:!0,showModalQuery:!1,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"startDate",fn:function(t){t.row;return[i("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},model:{value:e.queryParam.startDate,callback:function(t){e.$set(e.queryParam,"startDate",t)},expression:"queryParam.startDate"}})]}},{key:"endDate",fn:function(t){t.row;return[i("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},model:{value:e.queryParam.endDate,callback:function(t){e.$set(e.queryParam,"endDate",t)},expression:"queryParam.endDate"}})]}}])})],1),i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","table-height":"auto","if-init-query":!1,tableColumn:e.columns,data:e.loadData,"show-pagination":!0},scopedSlots:e._u([{key:"busiType",fn:function(t){var a=t.row;return[i("span",["00"===a.busiType?i("span",[e._v("交存")]):e._e(),"10"===a.busiType?i("span",[e._v("退款")]):e._e(),"20"===a.busiType?i("span",[e._v("使用")]):e._e()])]}}])})],1)])},r=[],l=i("0fea"),n=i("5a0c"),o=i.n(n),s=i("6fa9"),u={name:"RegionTransactionDetails",components:{MESSuperQuery:s["default"]},props:{zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{fileName:"RegionTransactionDetails",description:"小区日志页面",queryParam:{},loadData:function(t){return Object(l["e"])(e.url.getRegionTransactionDetails,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,url:{getRegionTransactionDetails:"account/trdlog/getRegionTransactionDetails"},columns:[{field:"address",title:"业务描述",align:"center"},{field:"busiType",title:"业务类型",align:"center",slot:!0},{field:"bankName",title:"承办行",align:"center"},{field:"amount",title:"业务金额",align:"center",formatter:"amount"},{field:"totalNum",title:"总户数",align:"center"},{field:"trdDate",title:"记账日期",align:"center",formatter:function(e){var t=e.cellValue;return o()(t).format("YYYY-MM-DD")}}],queryObj:[{type:"slot",slotName:"startDate",value:"startDate",label:"记账开始日期"},{type:"slot",slotName:"endDate",value:"endDate",label:"记账结束日期"}]}},methods:{initData:function(e){this.queryParam.regionCode=e.code,this.visible=!0},handleCancel:function(){this.visible=!1,this.queryParam.startDate=void 0,this.queryParam.endDate=void 0},handleSuperQuery:function(){var e=this;this.$nextTick((function(){e.$refs.table.refresh()}))},searchReset:function(){this.queryParam.startDate=void 0,this.queryParam.endDate=void 0},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>o()(t).valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&o()(t).valueOf()>=e.valueOf()}}},d=u,c=(i("8c15"),i("2877")),h=Object(c["a"])(d,a,r,!1,null,"4d899896",null);t["default"]=h.exports},acaa:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"待续筹明细",top:8,"body-style":{padding:0},visible:e.visible,zIndex:e.zIndex,width:"80vw","modal-height":"80vh",okButtonProps:{class:{"jee-hidden":!0}}},on:{cancel:e.handleCancel}},[i("div",{staticClass:"modalBody"},[i("m-e-s-super-query",{ref:"mesQuery",staticClass:"queryDiv",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"address",fn:function(t){var a=t.row;return[i("a-input",{staticClass:"width100",attrs:{placeholder:"请输入房屋位置"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}})]}},{key:"bld",fn:function(t){var a=t.row;return[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择自然幢"},on:{change:function(t,i){return e.getCell(a.val,i)}},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.name,"data-obj":t}},[i("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"cell",fn:function(t){var a=t.row;return[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择单元"},model:{value:a.val,callback:function(t){e.$set(a,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.name}},[i("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"extra",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[i("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("待续筹明细")}}},[e._v("导出")])],1)]},proxy:!0}])}),i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"",footerMethod:e.footerMethod,"auto-resize":"","show-overflow":"",toolbar:!0,tableColumn:e.columns,"table-height":"auto","if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"state",fn:function(t){t.text;var a=t.row;return["0"===a.state?i("a-badge",{attrs:{status:"success",text:"已交"}}):e._e(),"3"===a.state?i("a-badge",{attrs:{status:"warning",text:"待全额退款"}}):e._e(),"4"===a.state?i("a-badge",{attrs:{status:"warning",text:"待销户"}}):e._e(),"7"===a.state?i("a-badge",{attrs:{status:"warning",text:"待资金转账"}}):e._e()]}},{key:"address",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.handleHouseDetail(r)}}},[e._v(e._s(a))])]}},{key:"busiNo",fn:function(t){var a=t.text,r=t.row;return[i("a",{on:{click:function(t){return e.print(r)}}},[e._v(e._s(a))])]}}])})],1)],1),i("HouseOwnerInfoModal",{ref:"infoModal",attrs:{index:e.zIndex+1,operateFlag:!1}})],1)},r=[],l=i("0a5e"),n=i("0fea"),o=i("6fa9"),s=i("3ed7"),u=i("c695"),d=i.n(u),c=i("2b0e"),h={name:"ConFundrasingDetail",components:{MESSuperQuery:o["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(i.bind(null,"c752"))}},mixins:[l["a"]],props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{fileName:"ConFundrasingDetail",dueAmountTotal:"",balanceTotal:"",conAmountTotal:"",struAreaTotal:"",queryParam:{},loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.struAreaTotal=t.result.bigDecimalList[0],e.dueAmountTotal=t.result.bigDecimalList[1],e.balanceTotal=t.result.bigDecimalList[2],e.conAmountTotal=t.result.bigDecimalList[3],t.result.page}))},visible:!1,bldInfoOptions:[],cellInfoOptions:[],url:{list:"deposit/firstDeposit/queryConFundrasingDetail",queryReport:"/ureport2/ureport2Config/queryReport",exportXlsUrl:"/deposit/firstDeposit/exportConFundrasingDetailXls"},queryObj:[{type:"input",value:"house.address",label:"房屋位置",queryType:"like",slotName:"address"},{type:"slot",value:"house.address",label:"自然幢",queryType:"like",slotName:"bld"},{type:"slot",value:"house.address",label:"单元",queryType:"like",slotName:"cell"}],columns:[{field:"address",title:"房屋位置",align:"center",slot:!0,direction:"rtl",minWidth:160},{field:"accCode",title:"房屋账号",align:"center",width:160},{field:"struArea",title:"建筑面积(㎡)",align:"right",width:120,formatter:"area"},{field:"psnName",title:"业主姓名",align:"center",minWidth:100},{field:"dueAmount",title:"初次应交金额（元）",align:"right",formatter:"amount",minWidth:150},{field:"balance",title:"账户余额（元）",align:"right",formatter:"amount",minWidth:120},{field:"conAmount",title:"待续筹金额（元）",align:"right",formatter:"amount",minWidth:140},{field:"state",title:"账户状态",align:"center",slot:!0,width:120},{field:"busiNo",title:"续筹申请编号",align:"center",slot:!0,width:150}]}},methods:{getBld:function(e){var t=this;Object(n["e"])("/base/rBldInfo/list",{pid:e}).then((function(e){0!==e.result.records.length?t.bldInfoOptions=e.result.records:t.bldInfoOptions=void 0}))},getCell:function(e,t){var i=this;Object(n["e"])("/base/rCellInfo/list",{pid:t.data.attrs["data-obj"].id}).then((function(e){0!==e.result.records.length?(i.cellInfoOptions=e.result.records,i.$set(i.queryParam,"cellId",void 0)):i.cellInfoOptions=void 0}))},footerMethod:function(e){var t=this,i=e.columns,a=e.data,r=[i.map((function(e,t){return"accCode"===e.property?"合计：":"struArea"===e.property?Object(s["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(s["g"])(d.a.sum(a,e.property)):null})),i.map((function(e,i){return"accCode"===e.property?"总合计：":"struArea"===e.property?Object(s["g"])(d.a.sum(a,e.property),3):["dueAmount","balance","conAmount"].includes(e.property)?Object(s["g"])(t[e.property+"Total"]):null}))];return r},handleExport:function(e){var t=this;Object(n["b"])(this.url.exportXlsUrl,Object.assign(this.queryParam,{size:50})).then((function(i){if(i)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([i],{type:"application/vnd.ms-excel"}),e+".xls");else{var a=window.URL.createObjectURL(new Blob([i],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.style.display="none",r.href=a,r.setAttribute("download",e+".xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}else t.$message.warning("文件下载失败")}))},print:function(e){var t=[];t.push(e.busiNo),"02"===e.busiObject?"0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail||"0012"===e.busiTypeDetail?this.publicPrint("deposit_enterprise",t,this.url.printDepOfHandOver,e.state):this.publicPrint("deposit_publicAcc",t,this.url.batchPrintOfComAcc,e.state):"03"===e.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):this.publicPrint("deposit_owner",t,this.url.printDepOfSelfing,e.state)},publicPrint:function(e,t,i,a,r){var l=this;Object(n["e"])(this.url.queryReport,{formType:e}).then((function(e){if(e.success&&e.result&&e.result.formTypeName){var o=e.result.formTypeName,s=c["default"].ls.get("SOURCE_NAME");s&&""!==s||(s="master");var u=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+s+"db:"+o+"&_t="+e.result.reportHeaderButton+"&_n=交存通知单&busiNo="+t;i&&(4==a||r&&r.length>0)?Object(n["j"])(i,r&&r.length>0?r:t).then((function(e){e.success?(window.open(u),l.queryPage()):window.open(u)})):window.open(u)}}))},handleHouseDetail:function(e){e.houseId=e.id,this.$refs.infoModal.initData(e)},initData:function(e){var t=this;this.queryParam.code=e.code,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){t.getBld(e.id),t.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}},f=h,m=(i("3f51"),i("2877")),p=Object(m["a"])(f,a,r,!1,null,"671ba7af",null);t["default"]=p.exports},b7a3:function(e,t,i){},b948:function(e,t,i){},c3d8:function(e,t,i){"use strict";i("b948")},e8bb:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{switchFullscreen:!0,title:"续筹记录",top:8,"modal-height":"80vh","body-style":{padding:0},okButtonProps:{class:{"jee-hidden":!0}},visible:e.visible,"z-index":e.zIndex,width:"1140px"},on:{cancel:e.handleCancel}},[i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"","table-height":"auto",tableColumn:e.tableColumn,"if-init-query":!1,data:e.loadData,footerMethod:e.footerMethod},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[i("a",{on:{click:function(t){return e.showContinuedDetail(a)}}},[i("a-icon",{attrs:{type:"file-text"}}),e._v(" 续筹明细")],1)]}}])})],1),i("ShowConFundrasingRecordDetail",{ref:"conFundrasingRecordDetail",attrs:{zIndex:e.zIndex+1}})],1)},r=[],l=i("3ed7"),n=i("c695"),o=i.n(n),s=i("0fea"),u=i("7765"),d={name:"ShowConFundrasingRecord",components:{ShowConFundrasingRecordDetail:u["default"]},props:{busiNo:{type:String,default:""},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{formatterAmount:l["g"],queryParam:{},modalFlag:1,loadData:function(t){return Object(s["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,url:{regionList:"deposit/firstDeposit/queryConFundrasingByRegionId",bldList:"deposit/firstDeposit/queryConFundrasingByBldId",cellList:"deposit/firstDeposit/queryConFundrasingByCellId",houseList:"deposit/firstDeposit/queryConFundrasingByHouseId"},regionColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],bldColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本幢金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"houseNum",title:"本幢户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],cellColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本单元金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"houseNum",title:"本单元户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}],houseColumns:[{field:"busiNo",title:"业务编号",align:"center"},{field:"bankCode_dictText",title:"承办银行",align:"center"},{field:"drawAmount",title:"总金额（元）",align:"right",formatter:"amount"},{field:"reAmount",title:"本屋金额（元）",align:"right",formatter:"amount"},{field:"drawNum",title:"总户数（户）",align:"right"},{field:"busiDate",title:"记账日期",align:"center"},{title:"操作",field:"action",align:"center",width:150,fixed:"center",slot:!0}]}},computed:{tableUrl:function(){switch(this.modalFlag){case 1:return this.url.regionList;case 2:return this.url.bldList;case 3:return this.url.cellList;case 4:return this.url.houseList}},tableColumn:function(){switch(this.modalFlag){case 1:return this.regionColumns;case 2:return this.bldColumns;case 3:return this.cellColumns;case 4:return this.houseColumns}}},methods:{footerMethod:function(e){var t=e.columns,i=e.data,a=[t.map((function(e,t){return"bankCode_dictText"===e.property?"合计：":["drawNum"].includes(e.property)||["houseNum"].includes(e.property)?o.a.sum(i,e.property):["drawAmount"].includes(e.property)||["reAmount"].includes(e.property)?Object(l["g"])(o.a.sum(i,e.property)):null}))];return a},showContinuedDetail:function(e){this.$refs.conFundrasingRecordDetail.initData(e,this.queryParam.id,this.modalFlag)},initData:function(e,t){var i=this;this.modalFlag=t,this.queryParam.id=2===t?e.pid:e.id,this.queryParam.busiNo=e.busiNo,this.visible=!0,this.$nextTick((function(){i.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}},c=d,h=(i("1276"),i("2877")),f=Object(h["a"])(c,a,r,!1,null,"2a15f56e",null);t["default"]=f.exports},f590:function(e,t,i){}}]);