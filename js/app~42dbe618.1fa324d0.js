(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~42dbe618"],{"0013":function(e,t,a){},"016f":function(e,t,a){"use strict";a("f67a")},"0224":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a-card",{staticClass:"top mainCard"},[a("div",{staticClass:"des"},[a("div",{staticClass:"des_box"},[a("div",{staticClass:"title"},[a("h3",[e._v("审计部报表")])]),a("div",{staticClass:"top_right"},[a("div",{staticClass:"current_menu"},[a("a-select",{staticClass:"width100",attrs:{placeholder:"请选择报表"},on:{change:e.changeUReport},model:{value:e.queryParam.checkUReport,callback:function(t){e.$set(e.queryParam,"checkUReport","string"===typeof t?t.trim():t)},expression:"queryParam.checkUReport"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("商品房收支情况表")]),a("a-select-option",{attrs:{value:"1"}},[e._v("期末余额比较")])],1)],1),a("div",{staticClass:"current_menu"},[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入小区编号"},model:{value:e.queryParam.regionNo,callback:function(t){e.$set(e.queryParam,"regionNo","string"===typeof t?t.trim():t)},expression:"queryParam.regionNo"}})],1),a("div",{staticClass:"current_menu"},[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入小区名称"},model:{value:e.queryParam.regionName,callback:function(t){e.$set(e.queryParam,"regionName","string"===typeof t?t.trim():t)},expression:"queryParam.regionName"}})],1),a("div",{staticClass:"current_menu"},[a("a-tree-select",{staticClass:"width100",attrs:{treeData:e.options,placeholder:"请选择主管单位"},on:{change:e.changeZone},model:{value:e.queryParam.zoneCode,callback:function(t){e.$set(e.queryParam,"zoneCode","string"===typeof t?t.trim():t)},expression:"queryParam.zoneCode"}})],1),e.dateFlag?e._e():a("div",{staticClass:"current_menu"},[a("a-month-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,valueFormat:"YYYY-MM",placeholder:"请选择开始月份"},model:{value:e.queryParam.startDate,callback:function(t){e.$set(e.queryParam,"startDate",t)},expression:"queryParam.startDate"}})],1),e.dateFlag?e._e():a("div",{staticClass:"current_menu"},[a("a-month-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,valueFormat:"YYYY-MM",placeholder:"请选择结束月份"},model:{value:e.queryParam.endDate,callback:function(t){e.$set(e.queryParam,"endDate",t)},expression:"queryParam.endDate"}})],1),e.dateFlag?a("div",{staticClass:"current_menu"},[a("el-date-picker",{staticClass:"width100",attrs:{type:"year",placeholder:"请选择年份"},model:{value:e.queryParam.year,callback:function(t){e.$set(e.queryParam,"year",t)},expression:"queryParam.year"}})],1):e._e(),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.handleSuperQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.iframeLoading,expression:"iframeLoading"}],staticClass:"des_iframe",attrs:{"element-loading-text":"报表加载中..."}},[e.isUrl?a("iframe",{ref:"iframe",attrs:{src:e.formUrl}}):e._e()])])])],1)},i=[],n=a("0fea"),o=a("5b0b"),l=a("c1df"),s=a.n(l),u=a("2b0e"),c={name:"auditDepartmentUReport",props:{},components:{QueryRangePicker:o["default"]},data:function(){return{isUrl:!1,dateFlag:!0,formUrl:"",type:"请选择",url:{queryReport:"/ureport2/ureport2Config/queryReport"},queryParam:{checkUReport:void 0,regionNo:"",regionName:"",startDate:void 0,endDate:void 0,year:void 0,zoneCode:void 0},pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"今年至今",onClick:function(e){var t=new Date,a=new Date((new Date).getFullYear(),0);e.$emit("pick",[a,t])}},{text:"最近六个月",onClick:function(e){var t=new Date,a=new Date;a.setMonth(a.getMonth()-6),e.$emit("pick",[a,t])}}]},options:[],zoneName:"",iframeLoading:!1}},created:function(){this.queryParam.checkUReport="0",this.initZone()},methods:{init:function(){var e=this;this.formUrl="",this.isUrl=!1;var t,a,r=this.queryParam.checkUReport,i=s()(this.queryParam.year).format("YYYY");"0"===r?(r="region_income_exp",t=i+"-01-01",a=i+"-12-31"):(r="balance_compare",t=s()(this.queryParam.startDate).endOf("month").format("YYYY-MM-DD"),a=s()(this.queryParam.endDate).endOf("month").format("YYYY-MM-DD"));var o=this.queryParam.regionNo,l=this.queryParam.regionName;this.iframeLoading=!0,Object(n["e"])(this.url.queryReport,{formType:r}).then((function(i){if(i.success&&i.result&&i.result.formTypeName){var n,s=i.result.formTypeName,c=u["default"].ls.get("SOURCE_NAME");c&&""!==c||(c="master"),n="region_income_exp"===r?_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+c+"db:"+s+"&_t="+i.result.reportHeaderButton+"&_n=商品房维修资金明细表&startDate="+t+"&endDate="+a+"&code="+o+"&name="+l+"&zoneCode="+e.queryParam.zoneCode+"&zoneName="+e.zoneName:_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+c+"db:"+s+"&_t="+i.result.reportHeaderButton+"&_n=期末余额比较&startDate="+t+"&endDate="+a+"&code="+o+"&name="+l+"&zoneCode="+e.queryParam.zoneCode,e.isUrl=!0,e.$nextTick((function(){var t=e.$refs.iframe;t.onload=function(t){e.iframeLoading=!1},t.onfail=function(t){e.iframeLoading=!1},e.formUrl=n}))}else e.iframeLoading=!1})).catch((function(){e.iframeLoading=!1}))},handleSuperQuery:function(){void 0===this.queryParam.zoneCode?this.$message.error("请选择主管单位"):"1"!==this.queryParam.checkUReport||this.queryParam.startDate&&this.queryParam.endDate?"0"!==this.queryParam.checkUReport||this.queryParam.year?this.init():this.$message.error("请输入查询年份"):this.$message.error("请输入查询月份")},searchReset:function(){this.queryParam.checkUReport="0",this.changeUReport(),this.queryParam.regionNo="",this.queryParam.regionName="",this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.queryParam.year=void 0,this.queryParam.zoneCode=void 0},changeUReport:function(){this.dateFlag="0"===this.queryParam.checkUReport},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},initZone:function(){var e=this;Object(n["e"])("/tenant/sysTenantInfo/tenantListByCode").then((function(t){t.success&&(e.options=t.result,1!==t.result.length||t.result[0].children||(e.queryParam.zoneCode=t.result[0].code))}))},changeZone:function(e,t){this.zoneName=t[0]}}},d=c,m=(a("3996"),a("2877")),f=Object(m["a"])(d,r,i,!1,null,"22034725",null);t["default"]=f.exports},"0727":function(e,t,a){e.exports=a.p+"8d9ee0252a3fefce345c0d2378f3e374.md"},"0a9e":function(e,t,a){"use strict";a("707d")},"0b70":function(e,t,a){},"0c74":function(e,t,a){},"12f9":function(e,t,a){},"1ac6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{"body-style":{padding:0,display:"flex",flexDirection:"column"},bordered:!1}},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{type:"queryList",fieldList:e.queryObj,saveCode:e.fileName},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"material",fn:function(t){var r=t.row;return[a("a-tree-select",{staticClass:"width-100",attrs:{placeholder:"请选择材料分类",replaceFields:{key:"code"},dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData},on:{select:e.changePart},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{icon:"left"},on:{click:e.back}},[e._v("返回")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd(e.materialType)}}},[e._v("新增")]),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"delete"}}),e._v("\n          删除\n        ")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作\n        "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{"table-height":"auto",tableColumn:e.columns,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row;return[a("get-table-action-buttons",[a("a",{attrs:{disabled:r.projId},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.deleteDetail(r)}}},[a("a",{attrs:{disabled:r.projId}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])],1)]}}])})],1),a("partPriceDetail-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("d8c9")),o=a("0fea"),l=a("0a5e"),s=a("c1df"),u=a.n(s),c=a("2d4c"),d=a("6fa9"),m=a("2007"),f={name:"PartPriceDetailList",mixins:[l["a"]],components:{JDictDeviceListSelect:m["default"],MESSuperQuery:d["default"],GetTableActionButtons:c["default"],PartPriceDetailModal:n["default"]},props:{materialType:{type:String,default:""},treeData:{type:Array,default:function(){return[]}}},data:function(){return{fileName:"PartPriceDetailList",description:"test管理页面",columns:[{title:"维修价格（元）",align:"right",width:220,formatter:"amount",field:"price"},{title:"品牌",align:"left",headerAlign:"left",width:280,field:"brand"},{title:"规格型号",align:"left",headerAlign:"left",width:280,field:"model"},{title:"维修时间",align:"center",width:210,field:"repairTime",formatter:function(e){var t=e.cellValue;return t?u()(t).format("YYYY-MM-DD"):""}},{title:"关联项目",align:"left",headerAlign:"left",field:"describe",minWidth:"130px",formatter:function(e){var t=e.cellValue;return t||"手工录入"}},{title:"操作",field:"action",align:"center",fixed:"right",width:240,slot:!0}],url:{list:"/use/partPriceDetail/list",delete:"/use/partPriceDetail/delete",deleteBatch:"/use/partPriceDetail/deleteBatch",exportXlsUrl:"use/partPriceDetail/exportXls",importExcelUrl:"use/partPriceDetail/importExcel"},queryObj:[{type:"slot",slotName:"material",value:"rpp.material_type",label:"部件信息",val:this.materialType,width:"400px"},{type:"date",value:"ppd.repair_time",label:"维修时间"}]}},created:function(){this.queryParam.materialType=this.materialType},methods:{loadData:function(e){return Object(o["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.result}))},back:function(){this.$emit("back")},handleAdd:function(e){this.$refs.modalForm.edit({materialType:e}),this.$refs.modalForm.title="新增",this.$refs.modalForm.disableSubmit=!1},handleEdit:function(e){e.materialType=this.materialType,this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑",this.$refs.modalForm.disableSubmit=!1},changePart:function(e){var t=this;this.queryParam.materialType=e,this.$nextTick((function(){t.$refs.mesSuperQuery.manuallyQuery()}))},deleteDetail:function(e){var t=this;Object(o["j"])(this.url.delete,e).then((function(e){e.success?t.$message.success(e.message):t.$message.error(e.message),t.queryPage()}))}}},h=f,p=(a("62ad"),a("2877")),g=Object(p["a"])(h,r,i,!1,null,"1d0bb330",null);t["default"]=g.exports},"1c49":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard"},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery"),resetQuery:!1,type:"queryList","is-expand":""},on:{ok:e.handleSuperQuery,reset:e.resetSuperQuery},scopedSlots:e._u([{key:"bankCode",fn:function(t){var r=t.row;return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择承办银行"},on:{change:e.handleChange},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bankInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.code}},[a("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"busiType",fn:function(t){var r=t.row;return[a("j-tree-dict",{attrs:{isHaveChild:!1,field:"code",placeholder:"请选择业务类别",parentCode:"business_type"},on:{change:e.handleChangeByBusiType},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"busiTypeDetail",fn:function(t){var r=t.row;return[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,dropdownStyle:{maxHeight:"400px",overflow:"auto"},treeData:e.busiTypeDetailList,placeholder:"请选择业务明细类型"},on:{change:e.handleChange},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"loanFlag",fn:function(t){var r=t.row;return[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,dropdownStyle:{maxHeight:"400px",overflow:"auto"},treeData:e.loanFlagList,placeholder:"请选择收支类别"},on:{change:e.handleChange},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"dateStart",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择开始日期"},on:{change:function(t){return e.dateChange(t,r,"minDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"dateEnd",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择结束日期",disabledDate:function(t){return e.disabledDate(t,"max")}},on:{change:function(t){return e.dateChange(t,r,"maxDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("收支明细统计")}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",toolbar:!0,"table-height":"auto",drop:!1,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,tableColumn:e.columns,"if-init-query":!1,"show-footer-overflow":!0,data:e.loadData,customColumns:{name:"transactionDetailList"}},scopedSlots:e._u([{key:"inAmount",fn:function(t){var r=t.text,i=t.row;return["1"===i.loanFlag?a("span",[e._v(e._s(e.formatterAmount(r)))]):e._e()]}},{key:"outAmount",fn:function(t){var r=t.text,i=t.row;return["2"===i.loanFlag?a("span",[e._v(e._s(e.formatterAmount(r)))]):e._e()]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.showBusiDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 业务明细")],1)]}}])})],1)],1),a("BusiDetailInfoModal",{ref:"busiDetailInfo"})],1)},i=[],n=a("0a5e"),o=a("6fa9"),l=a("0fea"),s=a("3ed7"),u=a("c1df"),c=a.n(u),d=a("ca00"),m={name:"transactionDetail",components:{BusiDetailInfoModal:function(){return Promise.resolve().then(a.bind(null,"d6fa"))},MESSuperQuery:o["default"]},mixins:[n["a"]],data:function(){var e=this;return{formatterAmount:s["g"],fileName:"TransactionDetailList",bankInfoOptions:[],busiTypeDetailList:[],outAmountTotal:"",inAmountTotal:"",loanFlagList:[{value:"",label:"全部"},{value:"1",label:"收入"},{value:"2",label:"支出"}],busiTypeDetailCode:"",sysOrgCodeData:[],loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},minDate:"",maxDate:"",url:{list:"/account/trdlog/queryTransactionDetail",listSum:"/account/trdlog/queryTransactionDetailSum",url_data:"/sys/category/loadTreeRoot",exportXlsUrl:"/account/trdlog/exportTransactionDetailXls"},queryObj:[{label:"主管单位",value:"log.sysOrgCode",type:"sysOrgSelect"},{type:"slot",value:"bank.code",label:"承办银行",slotName:"bankCode"},{type:"slot",value:"log.busiType",label:"业务类别",slotName:"busiType",onChange:!1},{type:"slot",value:"log.busiTypeDetail",label:"业务明细类别",slotName:"busiTypeDetail"},{type:"slot",value:"log.loanFlag",label:"收支",slotName:"loanFlag"},{label:"申请开始时间",value:"startDate",type:"slot",queryType:"ge",slotName:"dateStart"},{label:"申请结束时间",value:"endDate",type:"slot",queryType:"le",slotName:"dateEnd"}],columns:[{field:"sysOrgName",title:"主管单位",align:"center",minWidth:120},{field:"bankName",title:"承办银行",align:"center",minWidth:100},{field:"trdDate",title:"记账日期",align:"center",width:100},{type:"select",field:"busiNo",title:"业务编号",align:"center",options:[],width:150},{field:"busiType",title:"业务类别",align:"center",minWidth:110},{field:"busiTypeDetail",title:"业务明细类别",align:"center",minWidth:110},{title:"交易金额(元)",align:"right",headerAlign:"center",children:[{headerAlign:"center",title:"收入",align:"right",field:"inAmount",slot:!0,minWidth:120},{headerAlign:"center",title:"支出",align:"right",field:"outAmount",formatter:"amount",slot:!0,minWidth:120}]},{field:"tallyTypeName",title:"结算方式",align:"center",minWidth:100},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}]}},created:function(){this.bankInfoDict()},methods:{handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(a){var r="";a.forEach((function(e){e.includes("action")||(e.includes("tallyTypeName")?r+="tallyType,":r=r+e+",")})),r=r.slice(0,-1),Object(l["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+r,t.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))}))},dateChange:function(e,t,a){e?(this[a]=e.format("YYYY-MM-DD"),this.$set(t,"val",e.format("YYYY-MM-DD"))):this[a]=""},disabledDate:function(e,t){return"min"===t?c()(e).isAfter(this.maxDate):c()(e).isBefore(this.minDate)},footerSpanMethod:function(e){var t=["sysOrgName","bankName","trdDate","busiNo","busiType","busiTypeDetail"];return Object(n["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},resetSuperQuery:function(){this.busiTypeDetailList=[],this.$refs.mesQuery.manuallyQuery()},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=["sysOrgName","bankName","trdDate","busiNo","busiType","busiTypeDetail"],o=["inAmount","outAmount"];return Object(n["b"])({scope:{columns:a,data:r},spanCol:i,computedCol:o,isSpanSeq:!0,inPageComputer:void 0,inTotalComputer:function(e){return["inAmount","outAmount"].includes(e.property)?Object(s["g"])(t[e.property+"Total"]):null}})},showBusiDetail:function(e){this.$refs.busiDetailInfo.initData(e)},handleChange:function(){this.$refs.mesQuery.manuallyQuery()},handleChangeByBusiType:function(e){var t=this;if(this.$refs.mesQuery.resetField("log.busiTypeDetail"),""===e)return this.busiTypeDetailList=[],void this.$refs.mesQuery.manuallyQuery();Object(l["e"])(this.url.url_data,{pcode:e,async:!0}).then((function(a){if(a.success){t.busiTypeDetailList=[],t.busiTypeDetailList.push({code:"",title:"全部",value:""});var r=t;"20"==e?a.result.forEach((function(e){if("202F"==e.code||"2022"==e.code){var t={code:e.code,title:e.title,value:e.value};r.busiTypeDetailList.push(t)}})):a.result.forEach((function(e){if("0009"!=e.code){var t={code:e.code,title:e.title,value:e.value};r.busiTypeDetailList.push(t)}}))}}))},bankInfoDict:function(){var e=this;Object(l["e"])("/business/dBankCode/bankInfoStatistics").then((function(t){var a=e;t.result.forEach((function(e){var t={code:e.code,name:e.name,id:e.id};a.bankInfoOptions.push(t)}))}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(d["f"])(this.queryParam),this.queryPage(),this.getSummation())},getSummation:function(){var e=this;this.resetFooterData(),Object(l["e"])(this.url.listSum,this.queryParam).then((function(t){e.$set(e,"inAmountTotal",t.result.inamount),e.$set(e,"outAmountTotal",t.result.outamount)}))},resetFooterData:function(){this.$set(this,"inAmountTotal",0),this.$set(this,"outAmountTotal",0),this.$refs.table.updateFooter()}}},f=m,h=(a("7937"),a("a500"),a("2877")),p=Object(h["a"])(f,r,i,!1,null,"71ba704d",null);t["default"]=p.exports},"1cad":function(e,t,a){"use strict";a("b261")},"1cec":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{bordered:!1,"body-style":{height:"100%",paddingTop:"0px"}}},[a("a-tabs",{staticClass:"ant-modal-cust-warp tabsContent",on:{change:e.callback},scopedSlots:e._u([{key:"tabBarExtraContent",fn:function(){return[a("a-button",[e._v("待申请未验证")])]},proxy:!0}]),model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:"3",attrs:{tab:"待申请待验证","force-render":""}},[a("LimitVerifyList",{ref:"limitVerifyList"})],1),a("a-tab-pane",{key:"1",staticClass:"ant-modal-cust-warp",attrs:{tab:"待申请","force-render":""}},[a("pending-progress-list",{ref:"pendingApply"})],1),a("a-tab-pane",{key:"2",staticClass:"ant-modal-cust-warp",attrs:{tab:"已申请","force-render":""}},[a("applied-progress-list",{ref:"applied",attrs:{pageState:1}})],1)],1)],1)},i=[],n=a("5ede"),o=a("3ad7"),l=a("d9a4"),s=a("eff5"),u={name:"PayApplyTabPage",components:{LimitVerifyList:s["default"],AppliedProgressList:o["default"],PendingProgressList:n["default"]},mounted:function(){Object(l["a"])("banInitQuery")||(this.$refs.pendingApply.modalFormOk(),this.$refs.applied.modalFormOk())},data:function(){return{activeKey:"1"}},methods:{callback:function(e){1===e?this.$refs.pendingApply.modalFormOk():2===e?this.$refs.applied.modalFormOk():this.$refs.limitVerifyList.modalFormOk()}}},c=u,d=(a("3b3e"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"439196b4",null);t["default"]=m.exports},"1ff7":function(e,t,a){},"213b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{title:e.title,width:"1260px",height:"80vh",loading:e.modalLoading,"destroy-on-close":!0,footer:""},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",ifInitQuery:!1,"show-pagination":!0,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,stripe:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"header-align":"center"}})],1)])],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("6fa9"),s=a("3ed7"),u=a("c695"),c=a.n(u),d=a("0fea"),m={name:"MoneyModal",components:{MESSuperQuery:l["default"]},mixins:[o["a"],n["b"]],data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"MoneyModal",description:"统计分析的金额详情页面",modalFlag:!1,modalLoading:!1,regionList:[],title:"",columns:[{headerAlign:"center",title:"业务编号",align:"center",field:"busiNo",minWidth:100},{headerAlign:"center",title:"小区名称",align:"left",field:"name",minWidth:150},{headerAlign:"center",title:"房屋位置",align:"left",field:"address",direction:"rtl",minWidth:200},{headerAlign:"center",title:"业务类型",align:"center",field:"busiTypeDetail",width:100},{headerAlign:"center",title:"承办银行",align:"center",field:"bankName",minWidth:80},{headerAlign:"center",title:"金额(元)",align:"right",field:"amount",formatter:"amount",minWidth:100},{headerAlign:"center",title:"记账日期",align:"center",field:"trdDate",format:"yyyy-MM-dd",minWidth:60}],dictOptions:{},summation:{amount:0},parentParam:{code:"",startDate:void 0,endDate:void 0,flag:"",accStateList:""},loadData:function(t){return Object(d["e"])("/base/rRegionInfo/getAmountDetail",Object.assign(t,e.parentParam)).then((function(e){return e.result}))}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{hideAction:"true"},methods:{assign:function(e,t,a,r,i,n){var o=this;this.modalFlag=!0,this.parentParam.code=e,this.parentParam.startDate=t,this.parentParam.endDate=a,this.parentParam.flag=r,n&&0!==n.length?this.parentParam.accStateList=n.join(","):this.parentParam.accStateList=void 0,this.title=i,this.$nextTick((function(){o.getSummation()}))},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){return 0===t?"合计：":["amount"].includes(e.property)?Object(s["g"])(c.a.sum(r,e.property)):null})),a.map((function(e,a){return 0===a?"总合计：":["amount"].includes(e.property)?Object(s["g"])(t.summation.amount):null}))]},footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:6}:["busiNo","name","address","busiTypeDetail","bankName"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},getSummation:function(){var e=this;this.$nextTick((function(){e.queryPage()})),this.summation={amount:0},this.$refs.table.updateFooter(),Object(d["e"])("/base/rRegionInfo/getAmountDetailSum",Object.assign({current:1,size:-1},this.parentParam)).then((function(t){t&&t.success?e.summation=t.result:e.$message.warning(t.message),e.$refs.table.updateFooter()}))}}},f=m,h=(a("a69c"),a("eca1"),a("2877")),p=Object(h["a"])(f,r,i,!1,null,"86808cd2",null);t["default"]=p.exports},"24d7":function(e,t,a){"use strict";a("dbe5")},"27eb":function(e,t,a){},"2a2ed":function(e,t,a){"use strict";a("aa50")},"30b5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!0},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable"+e.modalFlag,ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!1,drop:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"if-init-query":!1,"header-align":"center"},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}},{key:"action",fn:function(t){var r=t.row;return[a("a",{on:{click:function(t){return e.bldDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v("自然幢")],1)]}}])})],1),a("bld-detail-modal",{ref:"bldDepositModal"})]],2)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("7078"),c=a("ca00"),d={name:"BankingStatistical",components:{MESSuperQuery:s["default"],BldDetailModal:u["default"]},mixins:[l["a"],o["b"]],created:function(){},data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"RegionDepositStatistical",description:"银行业务统计页面",modalFlag:!0,bldInfoOptions:[],cellInfoOptions:[],queryObj:[{label:"小区名称",value:"regionName",type:"input",queryType:"like"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"}],columns:[{headerAlign:"left",title:"小区名称",align:"left",field:"regionName",slot:!0},{title:"主管单位",align:"center",field:"sysOrgName"},{title:"所属区县",align:"center",field:"zoneName"},{headerAlign:"center",title:"银行数(家)",align:"right",field:"bankNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{title:"操作",field:"action",align:"center",fixed:"right",slot:!0}],summation:{bankNum:"0"},loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/rRegionInfo/bankingStatisticalList",queryZone:"/basics/sysZone/queryTreeList",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel"},dictOptions:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{},methods:{handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.queryPage()}))},bldDetail:function(e){this.$refs.bldDepositModal.assign(e.id)},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"sysOrgCode",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.queryPage()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(c["f"])(this.queryParam),this.queryPage())},handleExportXls:function(){var e=void 0===this.queryParam.regionName?"":this.queryParam.regionName,t=void 0===this.queryParam.zoneCode?"":this.queryParam.zoneCode,a=void 0===this.queryParam.sysOrgCode?"":this.queryParam.sysOrgCode,r=this.getSuperQueryItemByRef({refName:"mesQuery"}),i="/base/rRegionInfo/downloadBankingStatistical?regionName="+e+"&zoneCode="+t+"&sysOrgCode="+a+"&queryType=and&queryItems="+r;Object(n["d"])(i,"银行业务统计"+(new Date).getTime()+".xls")},handleChange:function(){this.$refs.mesQuery.manuallyQuery()}}},m=d,f=(a("5150"),a("ce74"),a("2877")),h=Object(f["a"])(m,r,i,!1,null,"63172898",null);t["default"]=h.exports},"32f1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),1==e.redioKey?a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",attrs:{checkbox:!0,"checkbox-config":e.checkboxConfig,"child-table-height":null,data:e.loadData,expand:!0,"expand-config":{lazy:!0,loadMethod:e.loadContentMethod},"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},reload:e.queryPage,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,stripe:!0,tableColumn:e.columns,tableColumnChild:e.columnsChild,toolbar:!0,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),bordered:"","header-align":"center","table-height":"auto"},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("a-space",{attrs:{size:6}},[a("a-radio-group",{staticClass:"radioButton",attrs:{"button-style":"solid"},on:{change:e.changeView},model:{value:e.redioKey,callback:function(t){e.redioKey=t},expression:"redioKey"}},[a("a-radio-button",{attrs:{value:1}},[e._v("申请模式")]),a("a-radio-button",{attrs:{value:2}},[e._v("进度模式")])],1),a("a-button",{on:{click:e.printApprovalForm}},[e._v(" 打印拨付审批表")]),e.selectedRows.length>1?a("a-dropdown",[a("a-button",{attrs:{icon:"ordered-list"},on:{click:e.payBatch}},[e._v(" 批量确认")])],1):e._e()],1)]},proxy:!0},{key:"reqNo",fn:function(t){var a=t.text,r=t.row;return[e._v(" 【"+e._s(a)+"】"+e._s(r.reqDescribe)+" ")]}},{key:"applyAction",fn:function(t){t.text;var r=t.row;return[a("div",[a("a",{attrs:{disabled:e.setDisabled(r)},on:{click:function(t){return e.pay(r)}}},[a("a-icon",{attrs:{type:"pay-circle"}}),e._v("\n            支付")],1),a("a-divider",{directives:[{name:"show",rawName:"v-show",value:!e.setDisabled(r),expression:"!setDisabled(row)"}],attrs:{type:"vertical"}}),a("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.setDisabled(r),expression:"!setDisabled(row)"}]},[a("a",{staticClass:"ant-dropdown-link"},[e._v("更多\n              "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.fundPayAppRevoke(r)}}},[a("a-icon",{attrs:{type:"reload"}}),e._v("\n                  拨付申请撤销")],1)]),a("a-menu-item",[a("a",{on:{click:function(t){return e.changeCorp(r)}}},[a("a-icon",{attrs:{type:"form"}}),e._v("\n                  变更收款户")],1)])],1)],1)],1)]}},{key:"progAction",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(r.projId)}}},[a("a-icon",{attrs:{type:"reconciliation"}}),e._v("\n          查看进度对应项目")],1)]}}],null,!1,1932245521)})],1):e._e(),2==e.redioKey?a("pay-comfirm-progr-list",{ref:"progress",attrs:{queryParam:e.queryParam},scopedSlots:e._u([{key:"tableButtons",fn:function(){return[a("a-radio-group",{staticClass:"radioButton",attrs:{"button-style":"solid"},on:{change:e.changeView},model:{value:e.redioKey,callback:function(t){e.redioKey=t},expression:"redioKey"}},[a("a-radio-button",{attrs:{value:1}},[e._v("申请模式")]),a("a-radio-button",{attrs:{value:2}},[e._v("进度模式")])],1)]},proxy:!0}],null,!1,219824399)}):e._e(),a("a-modal",{attrs:{title:"选择支付银行",bodyStyle:{height:"240px",textAligh:"center"}},on:{cancel:e.modalClose},model:{value:e.accVisible,callback:function(t){e.accVisible=t},expression:"accVisible"}},[a("template",{slot:"footer"},[a("a-button",{attrs:{icon:"close-circle"},on:{click:e.modalClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.printApprovalFormConfirm}},[e._v("确定")])],1),a("div",{staticStyle:{width:"100%"}},[a("a-form-model",{ref:"form",staticStyle:{width:"100%"},attrs:{layout:"horizontal"}},[a("a-form-model-item",{attrs:{prop:"bankCode",wrapperCol:"{:span:24}"}},[a("j-dict-bank-list-select",e._b({staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择支付银行"},on:{change:e.judgeBank},model:{value:e.bankCode,callback:function(t){e.bankCode=t},expression:"bankCode"}},"j-dict-bank-list-select",{dropdownMenuStyle:{maxHeight:"150px"}},!1))],1)],1)],1)],2),a("pay-conf-apply-modal",{ref:"payConfirm",attrs:{bank:e.bank,selectedRows:e.singleRow.length>0?e.singleRow:e.selectedRows},on:{close:e.close,ok:function(t){return e.modalFormOk(!0)}}}),a("appropriate-apply-modal",{ref:"startModal",attrs:{handleId:e.handleId,pageState:2},on:{close:e.queryPage,ok:function(t){return e.modalFormOk(!0)}}}),a("change-corp-modal",{ref:"changeCorp",attrs:{reqNo:e.reqNo},on:{reLoad:e.queryPage}}),a("view-proj-detil-modal",{ref:"projDetil"}),a("print-report-comp",{ref:"print"})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("3ed7"),c=a("6375"),d=a("02ac"),m=a("5a1b"),f=a("570a"),h=a("a04e"),p=a("e789"),g=a("5a0c"),y=a.n(g),b=a("11c7"),v=a("0789"),S=a("fdce"),D=a("3269"),q=a("da39"),w=a("ca00"),C=a("9bed");function A(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=P(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw n}}}}function P(e,t){if(e){if("string"==typeof e)return x(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}a("e9c4");var N={name:"PayComfirmApplyList",mixins:[l["a"],o["b"],q["FooterMethod"]],components:{JDictRegionListSelect:S["default"],ViewProjDetilModal:v["default"],ChangeCorpModal:b["default"],AppropriateApplyModal:p["default"],PayConfApplyModal:h["default"],PayComfirmProgrList:f["default"],PaymentAuditModal:m["default"],AllotListModal:d["default"],FundProgressModal:c["default"],MESSuperQuery:s["default"],PrintReportComp:C["default"],JDictBankListSelect:D["default"]},provide:function(){var e=this;return{projMainData:function(){return e.mainData}}},inject:["goToBePaid"],data:function(){var e=this;return{fileName:"PayComfirmApplyList",description:"拨付确认申请模式页面",applyGroups:[],bankCode:"",accVisible:!1,bankName:"",queryObj:[{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"req.reqNo",label:"申请编号",queryType:"like"},{type:"input",value:"reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"req.reqDate",maxDate:"req.reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"req.reqDate",minDate:"req.reqDate",label:"申请结束日期",queryType:"le"}],columns:[{title:"申请编号",align:"left",headerAlign:"left",field:"reqNo",slot:!0,minWidth:240},{title:"收款单位名",align:"left",headerAlign:"left",width:260,field:"name"},{title:"当前处理步骤",align:"center",field:"step",headerAlign:"center",width:110},{title:"总户数",align:"right",headerAlign:"right",field:"totalNum",width:80},{title:"总面积 (㎡)",align:"right",headerAlign:"right",width:98,field:"struArea",formatter:function(e){var t=e.cellValue;return Object(u["g"])(t,3)}},{title:"总金额 (元)",align:"right",headerAlign:"right",field:"amount",formatter:"amount",width:95},{title:"申请日期",align:"center",field:"reqDate",formatter:function(e){var t=e.cellValue;return y()(t).format("YYYY-MM-DD")},width:110},{title:"已确认进度数",align:"right",headerAlign:"right",field:"finishConf",width:110},{hidden:!1,title:"操作",field:"applyAction",align:"center",fixed:"right",width:147,slot:!0}],columnsChild:[{title:"项目描述",align:"left",field:"realAmount",formatter:function(e){var t=e.row;e.cellValue;return t["faDescribe"]?t["faDescribe"]+" 下 "+t["proDescribe"]+"子项目":t["proDescribe"]}},{title:"拨款描述",align:"left",field:"progressInfo"},{title:"小区名称",align:"left",field:"regionName"},{title:"项目费用类型",align:"center",field:"costType_dictText",width:120},{title:"拨款比例 (%)",align:"right",field:"ratio",formatter:"amount",width:120},{title:"预设拨款金额 (元)",align:"right",field:"preAmount",formatter:"amount",width:160},{title:"实际拨款金额 (元)",align:"right",field:"realAmount",formatter:"amount",width:160},{title:"是否为质保金",align:"center",field:"isMargin_dictText",width:120},{title:"状态",align:"center",field:"state_dictText",width:140},{hidden:!1,title:"操作",field:"progAction",align:"center",fixed:"right",width:147,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.payConfApplyList,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{payConfApplyList:"/use/fundProgress/payConfApplyList",queryBankCode:"/use/fundProgress/queryBankCode",progressList:"/use/fundProgress/progressList",queryProj:"/use/serviceProj/queryProj"},reqNo:"",fundProgress:{},redioKey:1,bank:[],handleId:"",corpMessage:"",mainData:"",singleRow:[]}},computed:{},methods:{modalFormOk:function(e){e?this.goToBePaid&&this.goToBePaid():this.queryPage()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(w["f"])(this.queryParam),1===this.redioKey?this.queryPage():this.$refs.progress.queryPage())},setDisabled:function(e){return e.finishConf==e.sumConf||4==e.state},queryPage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedRowKeys=[],this.selectedRows=[],1==this.redioKey?this.$refs.table.refresh(e):(this.$refs.progress.url.payConfProgrList="/use/fundProgress/payConfProgrList",this.$refs.progress.queryParam=this.queryParam,this.$refs.progress.$refs.table.refresh(e))},checkboxConfig:function(e){var t=e.row;return t.finishConf!=t.sumConf},loadContentMethod:function(e){var t=this,a=e.row;return this.fundProgress.reqNo=a.reqNo,new Promise((function(e){Object(n["e"])(t.url.progressList,Object.assign({},t.fundProgress,{size:-1})).then((function(t){t.success&&(a.detailList=t.result.records),e()}))}))},pay:function(e){var t=this,a=this;this.singleRow=[];var r=[e.reqNo];this.$store.commit("SET_PAGE_LOAD_STATE",{state:!0}),Object(n["j"])(a.url.queryBankCode,r).then((function(t){t.success&&t.result&&t.result.length>0?(a.singleRow.push(e),a.bank=t.result,a.$nextTick((function(){a.$refs.payConfirm.showModal(1)}))):a.$message.error(t.message)})).finally((function(){t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})}))},payBatch:function(){var e=this,t=new Map,a=this.selectedRows.filter((function(e){return!t.has(e.sysOrgCode)&&t.set(e.sysOrgCode,1)})).map((function(e){return e.sysOrgCode}));if(a.length>1)return this.$message.warning("请选择相同租户下的业务进行批量支付"),!1;var r,i=this,o=this.selectedRows[0].corpCode,l=A(this.selectedRows);try{for(l.s();!(r=l.n()).done;){var s=r.value;if(s.corpCode!=o)return void i.$message.warning("只有同一收款单位的记录才可以批量确认,请检查页面")}}catch(f){l.e(f)}finally{l.f()}var u,c=[],d=A(this.selectedRows);try{for(d.s();!(u=d.n()).done;){var m=u.value;c.push(m.reqNo)}}catch(f){d.e(f)}finally{d.f()}Object(n["j"])(this.url.queryBankCode,c).then((function(t){t.success&&t.result&&t.result.length>0?(i.bank=t.result,e.$nextTick((function(){e.$refs.payConfirm.showModal(2)}))):e.$message.error(t.message)}))},printApprovalForm:function(){if(this.selectedRows.length<1)return this.$message.warning("请勾选至少一条信息!");this.accVisible=!0},printApprovalFormConfirm:function(){if(!this.bankName)return this.$message.warning("请选择支付银行!");var e=this.selectedRows.map((function(e){return e.reqNo})).join(",");this.$refs.print.type="print",this.$refs.print.print("audit_disbursement",{reqNo:e,bankName:this.bankName}),this.modalClose()},modalClose:function(){this.$refs.form.resetFields(),this.bankCode="",this.bankName="",this.accVisible=!1},judgeBank:function(e,t){this.bankName=t.data.attrs.data.name},close:function(){this.singleRow=[]},fundPayAppRevoke:function(e){var t=this;this.handleId=e.id,this.$refs.startModal.visible=!0,this.$refs.startModal.title="拨付申请撤销-申请模式",this.$nextTick((function(){t.$refs.startModal.initForm()}))},changeView:function(){this.queryParam.queryItems=void 0,1==this.redioKey?this.queryObj=[{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"projNo",label:"项目编号",queryType:"like"},{type:"input",value:"reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"reqDate",maxDate:"reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"reqDate",minDate:"reqDate",label:"申请结束日期",queryType:"le"}]:(this.queryParam.busiNo="",this.queryObj=[{type:"slot",slotName:"regionCode",value:"proj.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"proj.code",label:"项目编号",queryType:"like"},{type:"input",value:"req.reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"req.reqDate",maxDate:"req.reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"req.reqDate",minDate:"req.reqDate",label:"申请结束日期",queryType:"le"}])},changeCorp:function(e){this.corpMessage=e,this.reqNo=e.reqNo,this.$refs.changeCorp.title="收款户变更",this.$refs.changeCorp.colCode=e.corpCode,this.$refs.changeCorp.open(e.corpCode)},goBusiReqPage:function(e){var t=this;Object(n["e"])(this.url.queryProj,{id:e}).then((function(e){if(!e.success)return t.$message.warn("项目异常，请稍后重试"),!1;t.mainData=e.result,t.$refs.projDetil.initData(),t.$refs.projDetil.mainData=t.mainData}))},footerMethod:function(e){var t=e.columns,a=e.data;return Object(l["b"])({scope:{columns:t,data:a},spanCol:["reqNo","name","step","totalNum","struArea"],computedCol:["amount"],isSpanSeq:!0})},footerSpanMethod:function(e){return Object(l["c"])({scope:e,spanCol:["reqNo","name","step","totalNum","struArea"],isSpanSeq:!0})}}},O=N,k=(a("1cad"),a("2877")),I=Object(k["a"])(O,r,i,!1,null,"a89fef0a",null);t["default"]=I.exports},3327:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{"default-query":!0,"default-sys-org":!0,fieldList:e.queryObj,isInitQuery:!0,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"startDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("startDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"endDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("endDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"download",type:"primary"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable",ref:"table",attrs:{checkbox:!1,data:e.loadData,drop:!1,expand:!1,"footer-cell-style":e.footerCellStyle,"footer-span-method":e.footerSpanMethod,footerMethod:e.footerMethod,"if-init-query":!1,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"show-footer-overflow":!0,stripe:!0,tableColumn:e.columns,toolbar:!0,bordered:"","header-align":"center","table-height":"auto"}})],1)],1)]],2)},i=[],n=(a("6eb7"),a("0fea")),o=a("3ed7"),l=a("ac0d"),s=a("0a5e"),u=a("eccd"),c=a("6fa9"),d=a("5b0b"),m=a("c695"),f=a.n(m),h=a("c1df"),p=a.n(h),g=a("cafb"),y=a("ca00"),b=a("5c96"),v={name:"RegionIncomeExp",components:{MESSuperQuery:c["default"],QueryRangePicker:d["default"],SysZoneSelect:g["default"],JDDictSelectTag:u["default"]},mixins:[s["a"],l["b"]],created:function(){this.getSummation()},data:function(){var e=this;return{fileName:"PublicIncomeByCorpList",description:"公房单位收支汇总页面",queryObj:[{label:"单位名称",value:"corpName",type:"input",queryType:"like"},{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"}],columns:[{headerAlign:"center",title:"单位名称",align:"left",field:"corpName",width:150,sort:!0,customSortField:"corpName"},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",width:110,sort:!0,customSortField:"beginBalance"},{title:"本期收入",align:"center",headerAlign:"center",sort:!0,children:[{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depAmount",minWidth:120,sort:!0,customSortField:"depAmount"},{headerAlign:"center",title:"增值收益(元)",align:"right",field:"valueAddedIncome",minWidth:120,sort:!0,customSortField:"valueAddedIncome"},{headerAlign:"center",title:"公共收益(元)",align:"right",field:"publicIncome",minWidth:120,sort:!0,customSortField:"publicIncome"},{headerAlign:"center",title:"退回资金(元)",align:"right",field:"returnFunds",minWidth:120,sort:!0,customSortField:"returnFunds"},{headerAlign:"center",title:"转入金额(元)",align:"right",field:"transferInAmount",minWidth:120,sort:!0,customSortField:"transferInAmount"}]},{title:"本期支出",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"退款金额(元)",align:"right",field:"returnAmount",minWidth:120,sort:!0,customSortField:"returnAmount"},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",minWidth:120,sort:!0,customSortField:"useAmount"},{headerAlign:"center",title:"转出金额(元)",align:"right",field:"transferOutAmount",minWidth:120,sort:!0,customSortField:"transferOutAmount"}]},{headerAlign:"center",title:"期末余额(元)",minWidth:120,align:"right",field:"endBalance",formatter:"amount",sort:!0,customSortField:"endBalance"}],loadData:function(t){return Object(n["e"])(e.url.listUrl,Object.assign(t,e.queryParam)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},url:{listUrl:"/base/rRegionInfo/publicIncomeListByCorp",listUrlSum:"/base/rRegionInfo/publicIncomeListSumByCorp"},summation:{beginBalanceSum:0,depAmountSum:0,valueAddedIncomeSum:0,publicIncomeSum:0,returnFundsSum:0,transferInAmountSum:0,returnAmountSum:0,useAmountSum:0,transferOutAmountSum:0,endBalanceSum:0,incomeSum:0,paymentSum:0,struAreaSum:0}}},methods:{selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.getSummation()}))},handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>p()(t).valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&p()(t).valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.cellInfoOptions=void 0,this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"houseUse",void 0),this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(y["f"])(this.queryParam),this.getSummation())},formatterAmount:function(e){return Object(o["g"])(e)},footerMethod:function(e){var t=this,a=this.getMethodColumnList(),r=function(e){return Object(o["g"])(t.summation[e.property])},i=function(e,t){return"struArea"===t.property?Object(o["g"])(f.a.sum(e,t.property),3):Object(o["g"])(f.a.sum(e,t.property))},n=[];return n=1===this.modalFlag?["regionName","sysOrgName","zoneName"]:2===this.modalFlag||3===this.modalFlag?["name"]:["address","accCode"],Object(s["b"])({scope:e,spanCol:n,computedCol:a,isSpanSeq:!0,inPageComputer:i,inTotalComputer:r})},getMethodColumnList:function(){var e=[],t=["beginBalance","depAmount","valueAddedIncome","publicIncome","returnFunds","transferInAmount","returnAmount","useAmount","transferOutAmount","endBalance"];return e=[].concat(t),e},footerSpanMethod:function(e){var t=["corpName"];return Object(s["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this.getSuperQueryItemByRef({refName:"mesQuery"}),t="/base/rRegionInfo/downloadPublicIncomeExpListByCorp?queryType=and&queryItems="+e;Object(n["d"])(t,"公房单位收支汇总"+(new Date).getTime()+".xls")},getSummation:function(){var e=this;this.queryPage();var t,a,r={beginBalanceSum:"0.00",depAmountSum:"0.00",valueAddedIncomeSum:"0.00",publicIncomeSum:"0.00",returnFundsSum:"0.00",transferInAmountSum:"0.00",returnAmountSum:"0.00",useAmountSum:"0.00",transferOutAmountSum:"0.00",endBalanceSum:"0.00"};this.$refs.table&&(a=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),t=b["Loading"].service({target:a,customClass:"tableFooterLoading"}),a.style.overflowX="hidden"),Object(n["e"])(this.url.listUrlSum,Object.assign({current:1,size:-1},this.queryParam)).then((function(t){t&&t.success?e.summation=t.result:e.summation=r,e.$refs.table.updateFooter()})).catch((function(){e.summation=r,e.$refs.table.updateFooter()})).finally((function(){a&&t&&(t.close(),a.style.overflowX="auto")})),this.queryPage()}}},S=v,D=(a("42c5"),a("bc44d"),a("2877")),q=Object(D["a"])(S,r,i,!1,null,"9f100ee0",null);t["default"]=q.exports},"358a9":function(e,t,a){},3788:function(e,t,a){},"37ce":function(e,t,a){"use strict";a("b6c3")},3996:function(e,t,a){"use strict";a("ec21")},"3ad7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:2==e.pageState?e.queryObjUncen:e.queryObjCen,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",attrs:{checkbox:2==e.pageState,"checkbox-config":e.checkMethod,"child-table-height":null,data:e.loadData,expand:!0,"expand-config":{lazy:!0,loadMethod:e.loadContentMethod},"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},reload:e.queryPage,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,stripe:!0,tableColumn:e.columns,tableColumnChild:e.columnsChild,toolbar:!0,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),bordered:"","header-align":"center",rowId:"","table-height":"auto"},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.selectedRows.length>1?a("a-dropdown",[a("a-button",{staticStyle:{"margin-right":"8px"},attrs:{icon:"ordered-list"},on:{click:e.censorBatch}},[e._v(" 批量审核")])],1):e._e()]},proxy:!0},{key:"reqNo",fn:function(t){t.text;var a=t.row;return[e._v(e._s(a.reqDescribe))]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.viewAllot(r)}}},[a("a-icon",{attrs:{type:"profile"}}),e._v("\n          查看分摊清册")],1),2==e.pageState&&r.isCurrentUserFlow?a("a-divider",{attrs:{type:"vertical"}}):e._e(),2==e.pageState&&r.isCurrentUserFlow?a("a",{on:{click:function(t){return e.oneCensor(r)}}},[a("a-icon",{attrs:{type:"file-sync"}}),e._v("\n          拨付审核")],1):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.onBusiSeeFile(r.projId)}}},[a("a-icon",{attrs:{type:"profile"}}),e._v("\n          图档")],1)]}},{key:"childAction",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(r.projId)}}},[a("a-icon",{attrs:{type:"profile"}}),e._v("\n          查看进度对应项目")],1)]}}])})],1),a("allot-list-modal",{ref:"allotModal",attrs:{reqNo:e.reqNo},on:{ok:e.modalFormOk}}),a("view-proj-detil-modal",{ref:"projDetil"}),a("payment-audit-modal",{ref:"auditModal",attrs:{auditMode:e.auditMode,rows:1==e.auditMode?e.singleRow:e.selectedRows,showType:"modal"},on:{close:e.close,ok:e.modalFormOk,reload:e.queryPage}}),a("j-modal",{attrs:{title:"图档信息",switchFullscreen:"",visible:e.onBusiVisible,width:"80%"},on:{cancel:e.onBusiModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.onBusiModalCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("\n        关闭\n      ")],1)]},proxy:!0}])},[a("draw-file-info",{ref:"drawFileInfo"})],1)],1)},i=[],n=a("3ed7"),o=a("c1df"),l=a.n(o),s=(a("6eb7"),a("0fea")),u=a("ac0d"),c=a("0a5e"),d=a("6fa9"),m=a("6375"),f=a("02ac"),h=a("5a1b"),p=a("6d5b"),g=a("0789"),y=a("fdce"),b=a("da39"),v=a("d748"),S=a("ca00"),D={name:"AppliedProgressList",mixins:[c["a"],u["b"],b["FooterMethod"]],components:{JDictRegionListSelect:y["default"],ViewProjDetilModal:g["default"],ShareDetailComp:p["default"],PaymentAuditModal:h["default"],AllotListModal:f["default"],FundProgressModal:m["default"],MESSuperQuery:d["default"],DrawFileInfo:v["default"]},props:["pageState"],provide:function(){var e=this;return{projMainData:function(){return e.mainData}}},data:function(){var e=this;return{onBusiVisible:!1,auditRange:"",fileName:"AppliedProgressList",description:"拨付申请审核申请展示共用组件",applyGroups:[],queryObjUncen:[{type:"input",value:"req.reqNo",label:"申请编号",queryType:"like"},{type:"slot",slotName:"regionCode",value:"bsp.region_code",label:"小区名称",queryType:"eq"},{type:"input",value:"reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"req.reqDate",maxDate:"req.reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"req.reqDate",minDate:"req.reqDate",label:"申请结束日期",queryType:"le"},{label:"审核范围",value:"auditRange",type:"select",val:"01",options:[{label:"全部",value:"00"},{label:"个人待审核",value:"01"}]}],queryObjCen:[{type:"input",value:"req.reqNo",label:"申请编号",queryType:"like"},{type:"slot",slotName:"regionCode",value:"bsp.region_code",label:"小区名称",queryType:"eq"},{type:"input",value:"reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"req.reqDate",maxDate:"req.reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"req.reqDate",minDate:"req.reqDate",label:"申请结束日期",queryType:"le"}],columns:[{title:"申请描述",align:"left",headerAlign:"left",field:"reqNo",minWidth:200,slot:!0},{title:"当前处理步骤",align:"left",headerAlign:"left",width:118,field:"step"},{title:"总户数",align:"right",headerAlign:"right",width:78,field:"totalNum"},{title:"总面积 (㎡)",align:"right",headerAlign:"right",width:108,field:"struArea",formatter:function(e){var t=e.cellValue;return Object(n["g"])(t,3)}},{title:"总金额 (元)",align:"right",headerAlign:"right",field:"amount",width:108,formatter:"amount"},{title:"收款户名",align:"left",headerAlign:"left",minWidth:160,field:"name"},{title:"申请日期",align:"center",field:"reqDate",width:148,formatter:function(e){var t=e.cellValue;return t?l()(t).format("YYYY-MM-DD"):""}},{hidden:!1,title:"操作",field:"action",align:"center",fixed:"right",width:300,slot:!0}],columnsChild:[{title:"项目描述",align:"left",field:"realAmount",formatter:function(e){var t=e.row;e.cellValue;return t["faDescribe"]?t["faDescribe"]+" 下 "+t["proDescribe"]+"子项目":t["proDescribe"]}},{title:"拨款描述",align:"center",field:"progressInfo"},{title:"小区名称",align:"left",field:"regionName"},{title:"项目费用类型",align:"center",field:"costType_dictText",width:120},{title:"拨款比例 (%)",align:"right",field:"ratio",formatter:"amount",width:120},{title:"预设拨款金额 (元)",align:"right",field:"preAmount",formatter:"amount",width:140},{title:"实际拨款金额 (元)",align:"right",field:"realAmount",formatter:"amount",width:140},{title:"是否为质保金",align:"center",field:"isMargin_dictText",width:120},{title:"状态",align:"center",field:"state_dictText",width:140},{hidden:!1,title:"操作",field:"childAction",align:"center",fixed:"right",width:170,slot:!0}],loadData:function(t){return Object(s["e"])(e.url.appliedProjList,Object.assign(t,{state:3==e.pageState?"0":2==e.pageState?"2":""},e.getQueryParams())).then((function(e){return e.result}))},url:{appliedProjList:"/use/fundProgress/appliedProjList",progressList:"/use/fundProgress/progressList",queryProj:"/use/serviceProj/queryProj"},reqNo:"",fundProgress:{},singleRow:[],auditMode:"2",mainData:{}}},methods:{handleSuperQuery:function(e,t){if(this.queryParam.queryType=e.queryType,e.queryItems){var a=e.queryItems.findIndex((function(e){return"auditRange"===e.field}));this.auditRange=e.queryItems[a]?e.queryItems[a].val:"00",a>-1&&e.queryItems.splice(a,1)}else this.auditRange="00";this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(S["f"])(this.queryParam),this.queryPage())},searchReset:function(){this.$refs.superQuery.setQueryListVal([{field:"auditRange",val:"00"}])},getQueryParams:function(){var e=Object.assign({},this.queryParam);return e.auditRange=this.auditRange,Object(S["f"])(e)},onBusiModalCancel:function(){this.onBusiVisible=!1},onBusiSeeFile:function(e){var t=this;Object(s["e"])(this.url.queryProj,{id:e}).then((function(e){if(!e.success)return t.$message.warn("项目异常，请稍后重试"),!1;t.mainData=e.result,t.onBusiVisible=!0,t.$nextTick((function(){t.$refs.drawFileInfo.initData()}))}))},checkMethod:function(e){var t=e.row;return 2==this.pageState&&t.isCurrentUserFlow},loadContentMethod:function(e){var t=this,a=e.row;return this.fundProgress.reqNo=a.reqNo,new Promise((function(e){Object(s["e"])(t.url.progressList,t.fundProgress).then((function(t){if(t.success){var r=t.result.records;a.detailList=r}e()}))}))},footerSpanMethod:function(e){return Object(c["c"])({scope:e,spanCol:["reqNo","step","totalNum","struArea"],isSpanSeq:!0})},footerMethod:function(e){var t=e.columns,a=e.data;return Object(c["b"])({scope:{columns:t,data:a},spanCol:["reqNo","step","totalNum","struArea"],computedCol:["amount"],isSpanSeq:!0})},viewAllot:function(e){this.reqNo=e.reqNo,this.$refs.allotModal.title=e.reqDescribe+"拨款分摊清册",this.$refs.allotModal.initData(e)},oneCensor:function(e){var t=this;this.auditMode="1",this.singleRow=[],Object(s["e"])("/act/taskinst/history/task/"+e.flowId).then((function(a){if(a.success){var r=a.result[a.result.length-1].formKey;t.singleRow.push(e),t.$refs.auditModal.title="拨付审核",t.$refs.auditModal.visible=!0,null!==r&&-1!==r.indexOf("break")&&t.$refs.auditModal.changeOption()}else t.$message.error("查询流程失败，请联系管理员")}))},censorBatch:function(){this.auditMode="2",this.$refs.auditModal.title="批量审核",this.$refs.auditModal.visible=!0,this.$refs.auditModal.changeOption()},close:function(){this.singleRow=[]},goBusiReqPage:function(e){var t=this;Object(s["e"])(this.url.queryProj,{id:e}).then((function(a){if(!a.success)return t.$message.warn("项目异常，请稍后重试"),!1;t.mainData=a.result,t.$refs.projDetil.initData(e),t.$refs.projDetil.mainData=a.result}))}}},q=D,w=(a("92e0"),a("2877")),C=Object(w["a"])(q,r,i,!1,null,"c5e2fd80",null);t["default"]=C.exports},"3b3e":function(e,t,a){"use strict";a("8774")},"3b62":function(e,t,a){"use strict";a("496d")},"3c459":function(e,t,a){"use strict";a("a089")},"3d2e":function(e,t,a){"use strict";a("6876")},"42c5":function(e,t,a){"use strict";a("7c5f")},"438a3":function(e,t,a){"use strict";a("3788")},"43ba":function(e,t,a){},4504:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{title:e.title,width:"150vh",height:"80vh",zIndex:e.zIndex,footer:""},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("div",{ref:"modalBody",staticClass:"modelContrain"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList",isInitQuery:!1},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"bldId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择自然幢"},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"cellId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("cellId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"underDeliveryState",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择状态"},on:{select:function(t){return e.selectSearch("underDeliveryState",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("足额")]),a("a-select-option",{attrs:{value:"1"}},[e._v("未足额")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未交")])],1)]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{loading:e.btnLoading,type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",ifInitQuery:!1,"show-pagination":!0,stripe:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,expand:!1,data:e.loadData,tableColumn:e.columns,"header-align":"center"},scopedSlots:e._u([{key:"address",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(i)}}},[e._v(e._s(r))])]}}])})],1)],1),a("house-owner-info-modal",{ref:"houseOwnerInfoModal",attrs:{index:e.zIndex+1}})],1)],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("6fa9"),s=a("9e62"),u=a("0fea"),c=a("3ed7"),d=a("c695"),m=a.n(d),f=a("2b0e"),h=a("9fb0"),p=a("ca00"),g={name:"HouseUnderDeliveryDetailModal",components:{MESSuperQuery:l["default"],floorViews:s["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(a.bind(null,"c752"))}},props:{zIndex:{type:Number,default:1e3}},mixins:[o["a"],n["b"]],data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"MoneyModal",description:"统计分析的金额详情页面",modalFlag:!1,regionList:[],title:"房屋明细",btnLoading:!1,queryParam:{address:"",psnName:"",bldId:void 0,cellId:void 0,underDeliveryState:void 0,id:null},queryObj:[{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"状态",value:"underDeliveryState",type:"slot",slotName:"underDeliveryState"}],bldInfoOptions:[],cellInfoOptions:[],columns:[{headerAlign:"center",title:"房屋位置",align:"left",field:"address",direction:"rtl",minWidth:150,slot:!0},{headerAlign:"center",title:"房屋账号",align:"center",field:"accCode",width:155},{headerAlign:"center",title:"交存面积（㎡）",align:"right",width:120,field:"struArea",formatter:"area"},{headerAlign:"center",title:"业主姓名",align:"center",field:"psnName"},{headerAlign:"center",title:"应交金额（元）",align:"right",width:120,field:"dueAmount",formatter:"amount"},{headerAlign:"center",title:"实交金额（元）",width:120,align:"right",field:"depAmount",formatter:"amount"},{headerAlign:"center",title:"欠交金额（元）",width:120,align:"right",field:"underDeliveryAmount",formatter:"amount"}],dictOptions:{},summation:{struAreaSum:0,dueAmountSum:0,depAmountSum:0,underDeliveryAmountSum:0},font:f["default"].ls.get(h["w"]),loadData:function(t){return Object(u["e"])("/base/rRegionInfo/getHouseDetail",Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{hideAction:"true"},methods:{selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.getSummation()}))},assign:function(e){var t=this;this.modalFlag=!0,this.queryParam.id=e,this.cellInfoOptions=void 0,this.getSummation(),this.$nextTick((function(){t.getBldInfo()}))},houseDetail:function(e){this.$refs.houseOwnerInfoModal.initData(e,!0,!0)},searchReset:function(){this.$set(this.queryParam,"address",""),this.$set(this.queryParam,"psnName",""),this.$set(this.queryParam,"underDeliveryState",void 0),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.cellInfoOptions=void 0},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,Object(p["f"])(this.queryParam),this.getSummation()},getBldInfo:function(){var e=this,t=this.queryParam.id;Object(u["e"])("/base/rBldInfo/list",{pid:t,current:1,size:-1}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))},changeBld:function(e,t){var a=this;Object(u["e"])("/base/rCellInfo/list",{pid:e}).then((function(e){0!==e.result.records.length?(a.cellInfoOptions=e.result.records,a.$refs.mesQuery.resetField("cellId")):a.cellInfoOptions=void 0}))},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){return 0===t?"合计：":"struArea"===e.property?Object(c["g"])(m.a.sum(r,e.property),3):["dueAmount","depAmount","underDeliveryAmount"].includes(e.property)?Object(c["g"])(m.a.sum(r,e.property)):null})),a.map((function(e,a){return 0===a?"总合计：":"struArea".includes(e.property)?Object(c["g"])(t.summation.struAreaSum,3):"dueAmount".includes(e.property)?Object(c["g"])(t.summation.dueAmountSum):"depAmount".includes(e.property)?Object(c["g"])(t.summation.depAmountSum):"underDeliveryAmount".includes(e.property)?Object(c["g"])(t.summation.underDeliveryAmountSum):null}))]},footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:3}:["address","accCode"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this,t=void 0===this.queryParam.id?"":this.queryParam.id,a=void 0===this.queryParam.bldId?"":this.queryParam.bldId,r=void 0===this.queryParam.cellId?"":this.queryParam.cellId,i=void 0===this.queryParam.address?"":this.queryParam.address,n=void 0===this.queryParam.psnName?"":this.queryParam.psnName,o=void 0===this.queryParam.underDeliveryState?"":this.queryParam.underDeliveryState,l="/base/rRegionInfo/downloadUnderDeliveryHouseDetail?id="+t+"&bldId="+a+"&cellId="+r+"&address="+i+"&psnName="+n+"&underDeliveryState="+o;this.btnLoading=!0,Object(u["d"])(l,"小区欠交房屋明细"+(new Date).getTime()+".xls").finally((function(){e.btnLoading=!1}))},getSummation:function(){var e=this;this.$nextTick((function(){e.$refs.table&&(e.$refs.table.localLoading=!0)})),Object(u["e"])("/base/rRegionInfo/getHouseDetail",Object.assign({current:1,size:-1},this.queryParam)).then((function(t){e.summation.struAreaSum=0,e.summation.dueAmountSum=0,e.summation.depAmountSum=0,e.summation.underDeliveryAmountSum=0,t.result.records.forEach((function(t){e.summation.struAreaSum+=Number(t.struArea),e.summation.dueAmountSum+=Number(t.dueAmount),e.summation.depAmountSum+=Number(t.depAmount),e.summation.underDeliveryAmountSum+=Number(t.underDeliveryAmount)})),e.queryPage()})).catch((function(){e.$refs.table.localLoading=!1}))},emptyCell:function(){this.$set(this.queryParam,"cellId",void 0)}}},y=g,b=(a("37ce"),a("881e"),a("2877")),v=Object(b["a"])(y,r,i,!1,null,"27de6790",null);t["default"]=v.exports},4660:function(e,t,a){"use strict";a("567a")},4921:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{switchFullscreen:!0,title:"小区明细","body-style":{padding:0},visible:e.visible,width:"1200px","modal-height":"80vh"},on:{ok:e.handleCancel,cancel:e.handleCancel}},[[a("a-card",{staticClass:"mainCard"},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("银行归集统计-小区")}}},[e._v("导出")])],1)]},proxy:!0}])},[[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入小区名称"},on:{pressEnter:e.queryPage},model:{value:e.queryParam.regionName,callback:function(t){e.$set(e.queryParam,"regionName","string"===typeof t?t.trim():t)},expression:"queryParam.regionName"}})]],2),a("div",{staticClass:"tableDiv"},[e.visible?a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"","table-height":"auto",footerMethod:e.footerMethod,tableColumn:e.columns,"if-init-query":!0,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 房屋明细")],1)]}}],null,!1,1936534987)}):e._e()],1)],1),a("HouseDetailModal",{ref:"houseDepositModal"})],1)]],2)},i=[],n=a("0a5e"),o=a("0fea"),l=a("c695"),s=a.n(l),u=a("6fa9"),c=a("e1fc"),d=a("3ed7"),m={name:"BankCollectionDetail",components:{HouseDetailModal:c["default"],MESSuperQuery:u["default"]},mixins:[n["a"]],data:function(){var e=this;return{fileName:"BankCollectionDetail",balanceTotal:"",houseNumTotal:"",housePaidNumTotal:"",depAmountTotal:"",endBalanceTotal:"",queryParam:{},loadData:function(t){return Object(o["e"])(e.url.queryBusiDetail,Object.assign(t,e.queryParam)).then((function(t){return e.balanceTotal=t.result.bigDecimalList[0],e.houseNumTotal=t.result.bigDecimalList[1],e.housePaidNumTotal=t.result.bigDecimalList[2],e.depAmountTotal=t.result.bigDecimalList[3],e.endBalanceTotal=t.result.bigDecimalList[4],t.result.spaccInfoVOIPage}))},visible:!1,url:{queryBusiDetail:"/account/trdlog/queryBankCollectionReg",exportXlsUrl:"/account/trdlog/exportBankCollectionRegStatisticsXls"},queryObj:[{type:"input",value:"region.name",label:"小区名称",queryType:"like"}],columns:[{field:"regionName",title:"小区名称",align:"center"},{field:"houseNum",title:"房屋备案户数",align:"right",formatter:function(e){var t=e.cellValue;return Object(d["g"])(t,0)}},{field:"housePaidNum",title:"房屋已交户数",align:"right",formatter:function(e){var t=e.cellValue;return Object(d["g"])(t,0)}},{field:"ratio",title:"归集率(%)",align:"right"},{title:"操作",field:"action",align:"center",width:100,fixed:"right",slot:!0}]}},created:function(){this.bankInfoDict()},methods:{footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=[a.map((function(e,t){return"regionName"===e.property?"合计：":["houseNum","housePaidNum"].includes(e.property)?Object(d["g"])(s.a.sum(r,e.property),0):["balance","depAmount","endBalance"].includes(e.property)?Object(d["g"])(s.a.sum(r,e.property)):null})),a.map((function(e,a){return"regionName"===e.property?"总合计：":["houseNum","housePaidNum"].includes(e.property)?Object(d["g"])(t[e.property+"Total"],0):["balance","depAmount","endBalance"].includes(e.property)?Object(d["g"])(t[e.property+"Total"]):null}))];return i},handleExport:function(e){var t=this;Object(o["b"])(this.url.exportXlsUrl,this.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))},handleDetail:function(e){e.id=e.houseId,this.$refs.infoModal.initData(e)},houseDetail:function(e){this.$refs.houseDepositModal.assignBank(e.id,e.bankCode),this.$refs.houseDepositModal.searchReset()},initData:function(e){var t=this;this.queryParam=e,"1"!==e.baseType&&(this.columns=[{field:"regionName",title:"小区名称",align:"center"},{field:"houseNum",title:"房屋备案户数",align:"right"},{field:"housePaidNum",title:"房屋已交户数",align:"right"},{field:"depAmount",title:"交存金额（元）",align:"right",formatter:"amount"},{field:"endBalance",title:"小区余额（元）",align:"right",formatter:"amount"},{field:"ratio",title:"归集率(%)",align:"right"},{title:"操作",field:"action",align:"center",width:100,fixed:"right",slot:!0}]),this.visible=!0,this.$nextTick((function(){t.$refs.table.refresh()}))},handleChange:function(){this.$refs.mesQuery.manuallyQuery()},bankInfoDict:function(){var e=this;Object(o["e"])("/business/dBankCode/bankInfoOptions").then((function(t){e.bankInfoOptions=t.result}))},handleCancel:function(){this.visible=!1}}},f=m,h=(a("0bc1"),a("3b62"),a("2877")),p=Object(h["a"])(f,r,i,!1,null,"40c13124",null);t["default"]=p.exports},"496d":function(e,t,a){},"4f22":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{"default-query":!0,"default-sys-org":!0,fieldList:e.queryObj,isInitQuery:!0,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"startDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("startDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"endDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("endDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"download",type:"primary"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable",ref:"table",attrs:{checkbox:!1,data:e.loadData,drop:!1,expand:!1,"footer-cell-style":e.footerCellStyle,"footer-span-method":e.footerSpanMethod,footerMethod:e.footerMethod,"if-init-query":!1,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"show-footer-overflow":!0,stripe:!0,tableColumn:e.columns,toolbar:!0,bordered:"","header-align":"center","table-height":"auto"},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}}])})],1)],1)]],2)},i=[],n=(a("6eb7"),a("0fea")),o=a("3ed7"),l=a("ac0d"),s=a("0a5e"),u=a("eccd"),c=a("6fa9"),d=a("5b0b"),m=a("c695"),f=a.n(m),h=a("c1df"),p=a.n(h),g=a("cafb"),y=a("ca00"),b=a("5c96"),v={name:"RegionIncomeExp",components:{MESSuperQuery:c["default"],QueryRangePicker:d["default"],SysZoneSelect:g["default"],JDDictSelectTag:u["default"]},mixins:[s["a"],l["b"]],created:function(){this.getSummation()},data:function(){var e=this;return{fileName:"PublicIncomeList",description:"公房小区收支汇总页面",queryObj:[{label:"小区名称",value:"regionName",type:"input",queryType:"like"},{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"}],columns:[{headerAlign:"center",title:"小区名称",align:"left",field:"regionName",width:150,slot:!0,sort:!0,customSortField:"regionName"},{headerAlign:"center",title:"主管单位",align:"center",field:"sysOrgName",width:100},{headerAlign:"center",title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",width:110,sort:!0,customSortField:"beginBalance"},{title:"本期收入",align:"center",headerAlign:"center",sort:!0,children:[{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depAmount",minWidth:120,sort:!0,customSortField:"depAmount"},{headerAlign:"center",title:"增值收益(元)",align:"right",field:"valueAddedIncome",minWidth:120,sort:!0,customSortField:"valueAddedIncome"},{headerAlign:"center",title:"公共收益(元)",align:"right",field:"publicIncome",minWidth:120,sort:!0,customSortField:"publicIncome"},{headerAlign:"center",title:"退回资金(元)",align:"right",field:"returnFunds",minWidth:120,sort:!0,customSortField:"returnFunds"},{headerAlign:"center",title:"转入金额(元)",align:"right",field:"transferInAmount",minWidth:120,sort:!0,customSortField:"transferInAmount"}]},{title:"本期支出",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"退款金额(元)",align:"right",field:"returnAmount",minWidth:120,sort:!0,customSortField:"returnAmount"},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",minWidth:120,sort:!0,customSortField:"useAmount"},{headerAlign:"center",title:"转出金额(元)",align:"right",field:"transferOutAmount",minWidth:120,sort:!0,customSortField:"transferOutAmount"}]},{headerAlign:"center",title:"期末余额(元)",minWidth:120,align:"right",field:"endBalance",formatter:"amount",sort:!0,customSortField:"endBalance"}],loadData:function(t){return Object(n["e"])(e.url.listUrl,Object.assign(t,e.queryParam)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},url:{listUrl:"/base/rRegionInfo/publicIncomeList",listUrlSum:"/base/rRegionInfo/publicIncomeListSum"},summation:{beginBalanceSum:0,depAmountSum:0,valueAddedIncomeSum:0,publicIncomeSum:0,returnFundsSum:0,transferInAmountSum:0,returnAmountSum:0,useAmountSum:0,transferOutAmountSum:0,endBalanceSum:0,incomeSum:0,paymentSum:0,struAreaSum:0}}},methods:{selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.getSummation()}))},handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>p()(t).valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&p()(t).valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.cellInfoOptions=void 0,this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"houseUse",void 0),this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(y["f"])(this.queryParam),this.getSummation())},formatterAmount:function(e){return Object(o["g"])(e)},footerMethod:function(e){var t=this,a=this.getMethodColumnList(),r=function(e){return Object(o["g"])(t.summation[e.property])},i=function(e,t){return"struArea"===t.property?Object(o["g"])(f.a.sum(e,t.property),3):Object(o["g"])(f.a.sum(e,t.property))},n=[];return n=1===this.modalFlag?["regionName","sysOrgName","zoneName"]:2===this.modalFlag||3===this.modalFlag?["name"]:["address","accCode"],Object(s["b"])({scope:e,spanCol:n,computedCol:a,isSpanSeq:!0,inPageComputer:i,inTotalComputer:r})},getMethodColumnList:function(){var e=[],t=["beginBalance","depAmount","valueAddedIncome","publicIncome","returnFunds","transferInAmount","returnAmount","useAmount","transferOutAmount","endBalance"];return e=[].concat(t),e},footerSpanMethod:function(e){var t=["regionName","sysOrgName","zoneName"];return Object(s["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this.getSuperQueryItemByRef({refName:"mesQuery"}),t="/base/rRegionInfo/downloadPublicIncomeExpList?queryType=and&queryItems="+e;Object(n["d"])(t,"公房小区收支汇总"+(new Date).getTime()+".xls")},getSummation:function(){var e=this;this.queryPage();var t,a,r={beginBalanceSum:"0.00",depAmountSum:"0.00",valueAddedIncomeSum:"0.00",publicIncomeSum:"0.00",returnFundsSum:"0.00",transferInAmountSum:"0.00",returnAmountSum:"0.00",useAmountSum:"0.00",transferOutAmountSum:"0.00",endBalanceSum:"0.00"};this.$refs.table&&(a=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),t=b["Loading"].service({target:a,customClass:"tableFooterLoading"}),a.style.overflowX="hidden"),Object(n["e"])(this.url.listUrlSum,Object.assign({current:1,size:-1},this.queryParam)).then((function(t){t&&t.success?e.summation=t.result:e.summation=r,e.$refs.table.updateFooter()})).catch((function(){e.summation=r,e.$refs.table.updateFooter()})).finally((function(){a&&t&&(t.close(),a.style.overflowX="auto")})),this.queryPage()}}},S=v,D=(a("f6b1"),a("8c06"),a("2877")),q=Object(D["a"])(S,r,i,!1,null,"31e01516",null);t["default"]=q.exports},5111:function(e,t,a){},5462:function(e,t,a){"use strict";a("d427")},"567a":function(e,t,a){},"570a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{"body-style":{height:"calc(100% - 67px)",padding:0},bordered:!1}},[a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","header-align":"center",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,reload:e.queryPage,"table-height":"auto",data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("a-space",{attrs:{size:6}},[e._t("tableButtons"),e.selectedRows.length>1?a("a-dropdown",[a("a-button",{attrs:{icon:"ordered-list"},on:{click:e.payBatch}},[e._v(" 批量确认 ")])],1):e._e()],2)]},proxy:!0},{key:"action",fn:function(t){t.text;var r=t.row;return[a("div",[a("a",{on:{click:function(t){return e.pay(r)}}},[a("a-icon",{attrs:{type:"pay-circle"}}),e._v(" 支付")],1)])]}}],null,!0)})],1),a("pay-conf-progr-modal",{ref:"payConfirm",attrs:{selectedRows:e.singleRow.length>0?e.singleRow:e.selectedRows,bank:e.bank},on:{queryPage:e.queryPage,ok:function(t){return e.modalFormOk(!0)},close:e.close}}),a("appropriate-apply-modal",{ref:"startModal",attrs:{pageState:2,handleId:e.handleId},on:{ok:function(t){return e.modalFormOk(!0)}}})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("6375"),c=a("02ac"),d=a("5a1b"),m=a("103a"),f=a("e789"),h={name:"PayComfirmProgrList",mixins:[l["a"],o["b"]],components:{AppropriateApplyModal:f["default"],PayConfProgrModal:m["default"],PaymentAuditModal:d["default"],AllotListModal:c["default"],FundProgressModal:u["default"],MESSuperQuery:s["default"]},props:{queryParam:{type:Object,default:function(){return{}}}},inject:["goToBePaid"],data:function(){var e=this;return{fileName:"PayComfirmProgrList",description:"拨付确认进度模式页面",applyGroups:[],queryObj:[{type:"slot",slotName:"regionCode",value:"proj.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"proj.code",label:"项目编号",queryType:"like"},{type:"input",value:"proj.describe",label:"项目名称",queryType:"like"},{type:"input",value:"reqDescribe",label:"申请描述信息",queryType:"like"},{type:"date",value:"req.reqDate",maxDate:"req.reqDate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"req.reqDate",minDate:"req.reqDate",label:"申请结束日期",queryType:"le"}],columns:[{title:"项目描述",align:"left",field:"realAmount",headerAlign:"left",formatter:function(e){var t=e.row;e.cellValue;return t["faDescribe"]?t["faDescribe"]+" 下 "+t["proDescribe"]+"子项目":t["proDescribe"]}},{title:"拨款描述",align:"left",headerAlign:"left",field:"progressInfo"},{title:"小区名称",align:"left",headerAlign:"left",field:"regionName"},{title:"项目费用类型",align:"left",headerAlign:"left",field:"costType_dictText",width:120},{title:"收款单位",align:"left",headerAlign:"left",field:"name"},{title:"拨款比例 (%)",align:"right",headerAlign:"right",field:"ratio",formatter:"amount",width:120},{title:"预设拨款金额 (元)",align:"right",headerAlign:"right",field:"preAmount",formatter:"amount",width:150},{title:"实际拨款金额 (元)",align:"right",field:"realAmount",headerAlign:"right",formatter:"amount",width:150},{title:"是否为质保金",align:"center",field:"isMargin_dictText",width:120},{title:"状态",align:"center",field:"state_dictText",width:110},{hidden:!1,title:"操作",field:"action",align:"center",fixed:"right",width:200,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.payConfProgrList,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{payConfProgrList:"/use/fundProgress/payConfProgrList",queryBankCode:"/use/fundProgress/queryBankCode"},reqNo:"",fundProgress:{},redioKey:"1",bank:[],handleId:"",singleRow:[]}},created:function(){},mounted:function(){},computed:{},methods:{modalFormOk:function(){this.goToBePaid&&this.goToBePaid()},pay:function(e){var t=this;Object(n["j"])(this.url.queryBankCode,[e.reqNo]).then((function(a){t.bank=a.result,t.singleRow.push(e),t.$nextTick((function(){t.$refs.payConfirm.showModal(1)}))}))},payBatch:function(){for(var e=this,t=this,a=this.selectedRows[0].chargeCorpCode,r=0;r<this.selectedRows.length;r++)if(this.selectedRows[r].chargeCorpCode!=a)return void t.$message.warning("只有同一收款单位的记录才可以批量确认,请检查页面");for(var i=[],o=0;o<this.selectedRows.length;o++)i.push(this.selectedRows[o].reqNo);Object(n["j"])(this.url.queryBankCode,i).then((function(a){t.bank=a.result,e.$nextTick((function(){e.$refs.payConfirm.showModal(2)}))}))},close:function(){this.singleRow=[]}}},p=h,g=(a("83c3"),a("2877")),y=Object(g["a"])(p,r,i,!1,null,"6dd9c8f2",null);t["default"]=y.exports},"592b":function(e,t,a){"use strict";a("8078")},"5c42":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择物业区域"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,"table-height":"auto",data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.addPlan}},[e._v("新建")]),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var r=t.row;return[a("get-table-action-buttons",[a("a",{on:{click:function(t){return e.goBusiReqPage(r)}}},[e._v("办理")]),"8"==r.state?a("a",{on:{click:function(t){return e.goBusiReqPagetest(r)}}},[e._v("审核")]):e._e(),a("a",{on:{click:function(t){return e.downAndCleanFreeze(r)}}},[e._v("办结并归还冻结金额")]),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(r.id)}}},[a("a",[e._v("删除")])])],1)]}},{key:"describe",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(i)}}},[e._v("【"+e._s(i.code)+"】"+e._s(r))])]}},{key:"state_dictText",fn:function(e){var t=e.row;return[a("ser-pro-model-state-comp",{attrs:{state:t.state}})]}}])})],1)],1),a("vxe-modal",{ref:"transferModal",attrs:{"show-zoom":"",resize:"",remember:"",fullscreen:"","z-index":1300,width:"80vw",height:"80vh"}},[a("transfer-table",{ref:"transfer",attrs:{"z-index":1301}}),a("div",{staticClass:"saveBtnDiv"},[a("a-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.startProj}},[e._v("保存")])],1)],1),a("add-proj-plan-modal",{ref:"addPlan",on:{ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("2bff"),c=a("0c8a"),d=a("96af"),m=a("cf9e"),f=a("2d4c"),h=a("c1df"),p=a.n(h),g=a("fdce"),y={name:"ProjPlanList",mixins:[l["a"],o["b"]],components:{JDictRegionListSelect:g["default"],GetTableActionButtons:f["default"],SerProModelStateComp:m["default"],TransferTable:d["default"],AddProjPlanModal:u["default"],MESSuperQuery:s["default"]},data:function(){var e=this;return{fileName:"ProjPlanList",description:"b_proj_plan管理页面",isLoading:!1,queryObj:[{type:"slot",slotName:"regionCode",value:"proj.regionCode",label:"小区编号",showInQueryList:this.sourceHidden},{type:"input",value:"proj.describe",label:"计划描述",queryType:"like"},{type:"select",value:"proj.state",label:"计划状态",options:[{label:"全部",value:""},{label:"新建计划",value:"9"},{label:"待审核",value:"8"},{label:"审核通过",value:"7"},{label:"全部完成",value:"0"},{label:"项目办结",value:"N"}]},{label:"行政区域",value:"rt.zoneCode",type:"tree",options:[]}],columns:[{title:"维修计划描述",field:"describe",slot:!0},{title:"小区名称",field:"communityName",width:130,align:"left",headerAlign:"left"},{title:"计划状态",align:"center",width:100,field:"state_dictText",slot:!0},{title:"计划总费用",align:"right",field:"countCost",formatter:"amount",width:120},{title:"单次最大费用",align:"right",field:"singleMaxCost",formatter:"amount",width:120},{title:"开始时间",align:"center",field:"startTime",width:120},{title:"结束时间",align:"center",field:"endTime",width:120},{title:"操作",field:"action",align:"center",fixed:"right",width:230,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/use/projPlan/list",delete:"/use/projPlan/delete",deleteBatch:"/use/projPlan/deleteBatch",getPlanForProj:"/use/projPlan/getPlanForProj",planUnfreezeBalance:"/use/projPlan/planUnfreezeBalance/"},dictOptions:{}}},created:function(){this.queryObj.map((function(e){"rt.zoneCode"===e.value&&Object(n["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){t.success&&(e.options=t.result,1!=t.result.length||null!=t.result[0].children&&0!=t.result[0].children.length||(e.val=t.result[0].key))}))}))},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{test:function(){var e=this;Object(n["j"])(this.url.getPlanForProj,this.selectedRowKeys).then((function(t){t.result&&e.$refs.transfer.initDate(t.result)})),this.$refs.transferModal.open()},initDictConfig:function(){},addPlan:function(){this.$refs.addPlan.add(),this.$refs.addPlan.title="新建计划",this.$refs.addPlan.disableSubmit=!1},goBusiReqPage:function(e){Object(c["goBusiPagePlan"])(e.flowId,e.id,"",e.sysOrgCode)},goBusiReqPagetest:function(e){Object(c["goBusiPagePlan"])(e.flowId,e.id,"f",e.sysOrgCode)},startProj:function(){},downAndCleanFreeze:function(e){var t=this;if(p()(new Date).isAfter(e.endTime)){var a=this.url.planUnfreezeBalance+e.id;Object(n["j"])(a).then((function(e){e.success?t.$message.success("已还原剩余冻结金额"):t.$message.error(e.message)}))}else this.$message.warning("此计划仍在有效期内 ")}}},b=y,v=(a("e0c0"),a("2877")),S=Object(v["a"])(b,r,i,!1,null,"edd3f12e",null);t["default"]=S.exports},"5e62":function(e,t,a){},"5ede":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.emptySearch},scopedSlots:e._u([{key:"selectState",fn:function(t){t.row;return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目状态"},model:{value:e.serviceProj.state,callback:function(t){e.$set(e.serviceProj,"state",t)},expression:"serviceProj.state"}},e._l(e.stateOptions,(function(t){return a("a-select-option",{key:t.state},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})),1)]}},{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区信息"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",attrs:{checkbox:!1,data:e.loadData,expand:!1,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,stripe:!0,tableColumn:e.porjColumns,toolbar:!0,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),bordered:"","header-align":"center","table-height":"auto"},scopedSlots:e._u([{key:"describe",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(i)}}},[e._v("【"+e._s(i.code)+"】"+e._s(r))])]}},{key:"state_dictText",fn:function(e){var t=e.row;return[a("ser-pro-model-state-comp",{attrs:{state:t.state}})]}},{key:"action",fn:function(t){var r=t.row;return[a("a",{on:{click:function(t){return e.oneApply(r)}}},[a("a-icon",{attrs:{type:"file-done"}}),e._v("\n          拨付申请")],1)]}}])})],1)],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("6375"),c=a("3ad7"),d=a("cf9e"),m=a("fdce"),f=a("0c8a"),h=a("da39"),p={name:"PendingProgressList",mixins:[l["a"],o["b"],h["FooterMethod"]],components:{JDictRegionListSelect:m["default"],SerProModelStateComp:d["default"],AppliedProgressList:c["default"],FundProgressModal:u["default"],MESSuperQuery:s["default"]},data:function(){var e=this;return{fileName:"PendingProgressList",description:"拨付申请页面",queryObj:[{type:"slot",value:"rr.code",label:"小区名称",slotName:"regionCode"},{type:"input",value:"describe",label:"维修项目描述",queryType:"like"},{type:"input",value:"bsp.code",label:"项目编码",queryType:"like"},{type:"date",value:"reqDate",maxDate:"reqDate",label:"申报开始日期",queryType:"ge"},{type:"date",value:"reqDate",minDate:"reqDate",label:"申报结束日期",queryType:"le"},{type:"slot",value:"state",label:"项目状态",slotName:"selectState"}],porjColumns:[{title:"维修项目描述",align:"left",headerAlign:"left",field:"describe",slot:!0},{title:"小区名称",align:"left",headerAlign:"left",field:"communityName"},{title:"预算总额 (元)",align:"right",headerAlign:"right",field:"budgetCost",formatter:"amount",width:110},{title:"申报日期",align:"center",field:"reqDate",format:"yyyy-MM-dd",width:100},{title:"项目类型",align:"center",headerAlign:"center",field:"baseType_dictText",width:80},{title:"项目状态",align:"center",field:"state_dictText",width:90,slot:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:230,slot:!0}],unitAreaMode:"1",projId:"",stateOptions:[{name:"已部分拨付",state:1},{name:"已验收项目",state:2},{name:"已过质保期",state:3}],serviceProj:{state:void 0},loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam,e.serviceProj)).then((function(e){return e.result}))},url:{list:"/use/fundProgress/projList",queryById:"/act/model/queryById"},dictOptions:{},applyState:"1"}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{emptySearch:function(){this.serviceProj.state=void 0},goBusiReqPage:function(e){Object(f["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},unitAreaModeChange:function(e){var t=this,a=e.target.value;setTimeout((function(){"1"===a?(t.queryParam.id="",t.queryPage()):(t.queryParam.id=1,t.queryPage())}),300)},selectState:function(e){this.serviceProj.state=e.state,this.$forceUpdate()},oneApply:function(e){Object(f["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},marginDown:function(e){Object(f["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},footerSpanMethod:function(e){return Object(l["c"])({scope:e,spanCol:["describe","communityName"],isSpanSeq:!0})},footerMethod:function(e){var t=e.columns,a=e.data;return Object(l["b"])({scope:{columns:t,data:a},spanCol:["describe","communityName"],computedCol:["budgetCost"],isSpanSeq:!0})}}},g=p,y=(a("3d2e"),a("2877")),b=Object(y["a"])(g,r,i,!1,null,"a97edaee",null);t["default"]=b.exports},"5f50":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"height-100"},[a("RegionIncomeExp",{ref:"deposit",attrs:{pageType:"psn","dict-code":"fund_type"}})],1)},i=[],n=a("6c7d"),o={name:"RegionIncomeExpPsn",components:{RegionIncomeExp:n["default"]},data:function(){return{description:"业主收支统计"}}},l=o,s=(a("62e5"),a("2877")),u=Object(s["a"])(l,r,i,!1,null,"739dbfa2",null);t["default"]=u.exports},6031:function(e,t,a){"use strict";a("27eb")},"62ad":function(e,t,a){"use strict";a("9315")},"62e5":function(e,t,a){"use strict";a("ab42")},6363:function(e,t,a){"use strict";a("e1bc")},"6707c":function(e,t,a){},6731:function(e,t,a){},6765:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery"),resetQuery:!1},on:{ok:e.handleSuperQuery,reset:e.resetDate},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"dateStart",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择申报开始日期",disabledDate:function(t){return e.disabledDate(t,"min")}},on:{change:function(t){return e.dateChange(t,r,"minDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"dateEnd",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择申报结束日期",disabledDate:function(t){return e.disabledDate(t,"max")}},on:{change:function(t){return e.dateChange(t,r,"maxDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("维修项目汇总")}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,expand:!1,data:e.loadData,tableColumn:e.columns,"show-footer-overflow":!0,"if-init-query":!1,drop:!1,customColumns:{name:"RegionSerProjList"}},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}},{key:"meetSum",fn:function(t){var r=t.text,i=t.row;return[i.meeProIds?a("div",[a("a",{on:{click:function(t){return e.showProDetail(i,"02")}}},[e._v(e._s(r))])]):e._e(),i.meeProIds?e._e():a("div",[e._v(e._s(r))])]}},{key:"geneSum",fn:function(t){var r=t.text,i=t.row;return[i.genProIds?a("div",[a("a",{on:{click:function(t){return e.showProDetail(i,"01")}}},[e._v(e._s(r))])]):e._e(),i.genProIds?e._e():a("div",[e._v(e._s(r))])]}},{key:"apprAccAmount",fn:function(t){var r=t.text,i=t.row;return[i.apprBusiNos?a("div",[a("a",{on:{click:function(t){return e.showApprDetail(i,"2")}}},[e._v(e._s(e.formatterAmount(r)))])]):e._e(),i.apprBusiNos?e._e():a("div",[e._v(e._s(e.formatterAmount(r)))])]}}])}),a("vxe-modal",{attrs:{"z-index":1e3,width:1200,"esc-closable":!0,title:"项目列表",height:"80vh","destroy-on-close":!0},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}},[a("servicebusi-new",{ref:"servicebusiNew",attrs:{regionCode:e.regionCode,baseType:e.baseType,initQuery:!1,sourceHidden:!1}})],1),a("j-modal",{attrs:{visible:e.showAppr,"z-index":e.zIndex,width:1300,"body-style":{padding:"10px 0"},modalHeight:"80vh",switchFullscreen:!0,title:"拨付列表"},on:{"update:visible":function(t){e.showAppr=t}}},[a("finish-comfirm-list",{ref:"finishComfirmList",staticClass:"finishConfirm",attrs:{"z-index":e.zIndex,regionCode:e.regionCode,pageState:e.pageState,sourceHidden:!0,initQuery:!1}})],1)],1)],1)])},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("c695"),c=a.n(u),d=a("4d42"),m=a("897d"),f=a("3ed7"),h=a("c1df"),p=a.n(h),g=a("5c96"),y=a("fdce"),b={name:"RegionSerProjList",mixins:[l["a"],o["b"]],components:{MESSuperQuery:s["default"],servicebusiNew:d["default"],JDictRegionListSelect:y["default"],FinishComfirmList:m["default"]},props:{zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{regionCode:"",baseType:"",pageState:"",showDetail:!1,showAppr:!1,meetSumTotal:"",geneSumTotal:"",couTotal:"",meetAmountTotal:"",geneAmountTotal:"",apprAccAmountTotal:"",apprCashAmountTotal:"",notApprAccAmountTotal:"",notApprCashAmountTotal:"",sumAreaTotal:"",paidCountTotal:"",unpaidCountTotal:"",fileName:"RegionSerProjList",description:"维修项目汇总",queryObj:[{label:"主管单位",value:"re.sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"re.zoneCode",type:"zoneSelect"},{label:"小区名称",value:"re.code",type:"slot",queryType:"in",slotName:"regionCode"},{type:"select",value:"pro.state",label:"项目状态",options:[{label:"全部",value:""},{label:"新建项目",value:"9"},{label:"审核通过",value:"7"},{label:"待审核",value:"8"},{label:"拨付申请",value:"2"},{label:"部分拨付",value:"1"},{label:"全部拨付",value:"0"},{label:"项目办结",value:"N"},{label:"已撤销",value:"X"},{label:"待撤销",value:"5"},{label:"待办结",value:"6"}]},{type:"select",value:"pro.baseType",label:"项目类型",options:[{label:"全部",value:""},{label:"一般",value:"01"},{label:"应急",value:"02"}]},{type:"select",value:"pro.appropriateType",label:"拨付类型",options:[{label:"全部",value:""},{label:"已拨付项目",value:"1"},{label:"未拨付项目",value:"2"}]},{label:"申请开始时间",value:"startDate",type:"slot",queryType:"ge",slotName:"dateStart"},{label:"申请结束时间",value:"endDate",type:"slot",queryType:"le",slotName:"dateEnd"}],columns:[{title:"小区名称",align:"left",headerAlign:"left",field:"regionName",minWidth:130,slot:!0,sort:!0,customSortField:"tt.regionName"},{title:"主管单位",align:"center",headerAlign:"center",field:"sysOrgName",minWidth:120},{title:"所属区县",align:"center",headerAlign:"center",field:"zoneName",minWidth:120},{title:"项目总数",headerAlign:"center",children:[{title:"应急项目",align:"right",headerAlign:"right",width:110,field:"meetSum",slot:!0,sort:!0,customSortField:"tt.meetSum"},{title:"应急资金(元)",align:"right",headerAlign:"right",width:110,formatter:"amount",field:"meetAmount",sort:!0,customSortField:"tt.meetAmount"},{title:"一般项目",align:"right",headerAlign:"right",width:110,field:"geneSum",slot:!0,sort:!0,customSortField:"tt.geneSum"},{title:"一般资金(元)",align:"right",headerAlign:"right",width:110,formatter:"amount",field:"geneAmount",sort:!0,customSortField:"tt.geneAmount"}]},{title:"已拨付",headerAlign:"center",children:[{title:"专户拨付(元)",align:"right",width:110,headerAlign:"right",formatter:"amount",field:"apprAccAmount",slot:!0,sort:!0,customSortField:"tt.apprAccAmount"},{title:"现金自付(元)",align:"right",width:110,headerAlign:"right",formatter:"amount",field:"apprCashAmount",sort:!0,customSortField:"tt.apprCashAmount"},{title:"已拨付项目数",align:"right",width:110,headerAlign:"right",field:"paidCount",sort:!0,customSortField:"tt.paidCount"}]},{title:"待拨付",headerAlign:"center",children:[{title:"专户拨付(元)",align:"right",width:110,headerAlign:"right",formatter:"amount",field:"notApprAccAmount",sort:!0,customSortField:"tt.notApprAccAmount"},{title:"现金自付(元)",align:"right",width:110,headerAlign:"right",formatter:"amount",field:"notApprCashAmount",sort:!0,customSortField:"tt.notApprCashAmount"},{title:"待拨付项目数",align:"right",width:110,headerAlign:"right",field:"unpaidCount",sort:!0,customSortField:"tt.unpaidCount"}]},{title:"分摊户数",align:"right",headerAlign:"right",field:"cou",width:100,sort:!0,customSortField:"tt.cou"},{title:"分摊面积(m²)",width:120,align:"right",headerAlign:"right",formatter:"area",field:"sumArea",sort:!0,customSortField:"tt.sumArea"}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/rtRegion/getServiceProjCollList",listSum:"/base/rtRegion/getServiceProjCollListSum",exportXlsUrl:"/base/rtRegion/exportServiceProjCollListXls"}}},created:function(){this.init()},methods:{formatterAmount:f["g"],handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(a){var r="";a.forEach((function(e){e.includes("action")||(r=r+e+",")})),r=r.slice(0,-1),Object(n["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+r,t.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))}))},handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},dateChange:function(e,t,a){e?(this[a]=e.format("YYYY-MM-DD"),this.$set(t,"val",e.format("YYYY-MM-DD"))):this[a]=""},disabledDate:function(e,t){return"min"===t?!!this.maxDate&&p()(e).isAfter(this.maxDate):!!this.minDate&&p()(e).isBefore(this.minDate)},init:function(){this.queryObj.map((function(e){"proj_state"===e.value&&Object(n["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){t.success&&(e.options=t.result,1!=t.result.length||null!=t.result[0].children&&0!=t.result[0].children.length||(e.val=t.result[0].key))}))}))},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=["regionName","sysOrgName","zoneName"],n=["meetSum","geneSum","cou","meetAmount","geneAmount","apprAccAmount","apprCashAmount","paidCount","notApprAccAmount","notApprCashAmount","unpaidCount","sumArea"];return Object(l["b"])({scope:{columns:a,data:r},spanCol:i,computedCol:n,isSpanSeq:!0,inPageComputer:function(e,t){return["meetSum","geneSum","cou","paidCount","unpaidCount"].includes(t.property)?Object(f["g"])(c.a.sum(e,t.property),0):["meetAmount","geneAmount","apprAccAmount","apprCashAmount","notApprAccAmount","notApprCashAmount"].includes(t.property)?Object(f["g"])(c.a.sum(e,t.property)):"sumArea"===t.property?Object(f["g"])(c.a.sum(e,t.property),3):null},inTotalComputer:function(e){return["meetSum","geneSum","cou","paidCount","unpaidCount"].includes(e.property)?Object(f["g"])(t[e.property+"Total"]||"0",0):["meetAmount","geneAmount","apprAccAmount","apprCashAmount","notApprAccAmount","notApprCashAmount"].includes(e.property)?Object(f["g"])(t[e.property+"Total"]):"sumArea"===e.property?Object(f["g"])(t[e.property+"Total"],3):null}})},footerSpanMethod:function(e){var t=["regionName","sysOrgName","zoneName"];return Object(l["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},showProDetail:function(e,t){var a=this;this.regionCode=e.regionCode,this.baseType=t,this.prorArr=[],this.showDetail=!1,e&&(this.showDetail=!0,this.$nextTick((function(){var e=a.$refs.mesSuperQuery.getQueryList(),t=e.find((function(e){return"pro.state"===e.field})),r=e.find((function(e){return"startDate"===e.field})),i=e.find((function(e){return"endDate"===e.field})),n={queryType:"and",queryItems:[]};t&&(a.$refs.servicebusiNew.queryObj[3].val=t.val,t.field="proj.state",n.queryItems.push(t),a.$refs.servicebusiNew.$refs.mesSuperQuery.$refs.listQuery.initData()),r&&(r.field="proj.req_date",n.queryItems.push(r)),i&&(i.field="proj.req_date",n.queryItems.push(i)),a.$refs.servicebusiNew.handleSuperQuery(n,!1)})))},showApprDetail:function(e,t){var a=this;this.regionCode=e.regionCode,this.pageState=t,this.showAppr=!1,e&&(this.showAppr=!0,this.$nextTick((function(){var t=a.$refs.mesSuperQuery.getQueryList(),r=t.find((function(e){return"startDate"===e.field})),i=t.find((function(e){return"endDate"===e.field})),n={queryType:"and",queryItems:[]},o=a.$refs.finishComfirmList.queryObj,l=o.findIndex((function(e){return"bsp.regionCode"===e.value}));l>=0&&o.splice(l,1),a.$refs.finishComfirmList.$refs.mesSuperQuery.$refs.listQuery.initData(),a.$refs.finishComfirmList.childTableAttrs={cellStyle:function(t){var a=t.row,r=t.column;if("regionName"===r.property&&a.regionName===e.regionName)return"color: #FF9933;"}},r&&(r.field="bsp.req_date",n.queryItems.push(r)),i&&(i.field="bsp.req_date",n.queryItems.push(i)),a.$refs.finishComfirmList.queryParam.regionSerProjFlag=!0,a.$refs.finishComfirmList.fundProgress.regionName=e.regionName,a.$refs.finishComfirmList.handleSuperQuery(n)})))},resetDate:function(){this.maxDate=void 0,this.minDate=void 0,this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():this.getSummation()},getSummation:function(){var e,t,a=this;this.queryPage(),this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=g["Loading"].service({target:t,customClass:"tableFooterLoading"}),t.style.overflowX="hidden"),this.setFooterData(),Object(n["e"])(this.url.listSum,this.queryParam).then((function(e){a.setFooterData(e.result)})).finally((function(){t&&e&&(e.close(),t.style.overflowX="auto")}))},setFooterData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$set(this,"meetSumTotal",e.meetSum||0),this.$set(this,"meetAmountTotal",e.meetAmount||0),this.$set(this,"geneSumTotal",e.geneSum||0),this.$set(this,"geneAmountTotal",e.geneAmount||0),this.$set(this,"apprAccAmountTotal",e.apprAccAmount||0),this.$set(this,"apprCashAmountTotal",e.apprCashAmount||0),this.$set(this,"paidCountTotal",e.paidCount||0),this.$set(this,"notApprAccAmountTotal",e.notApprAccAmount||0),this.$set(this,"notApprCashAmountTotal",e.notApprCashAmount||0),this.$set(this,"unpaidCountTotal",e.unpaidCount||0),this.$set(this,"couTotal",e.cou||0),this.$set(this,"sumAreaTotal",e.sumArea||0),this.$refs.table.updateFooter()}}},v=b,S=(a("930a"),a("2877")),D=Object(S["a"])(v,r,i,!1,null,"e4027626",null);t["default"]=D.exports},"67fa":function(e,t,a){},6876:function(e,t,a){},6927:function(e,t,a){"use strict";a("d398")},"6a5b":function(e,t,a){"use strict";a("7f71")},"6aba":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.fieldList,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery")},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.row;return[a("a-input",{attrs:{placeholder:"请输入小区名称",disabled:e.regionNameDisabled},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"bldId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{disabled:e.bldIdDisabled,placeholder:"请选择自然幢"},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.districtName?t.districtName+t.name:t.name)+"\n              ")])])})),1)]}},{key:"cellId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("cellId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"underDeliveryState",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择状态"},on:{select:function(t){return e.selectSearch("underDeliveryState",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("足额")]),a("a-select-option",{attrs:{value:"1"}},[e._v("未足额")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未交")])],1)]}},{key:"psnName",fn:function(t){t.row;return[a("a-input",{attrs:{placeholder:"请输入业主姓名"},model:{value:e.queryParam.psnName,callback:function(t){e.$set(e.queryParam,"psnName",t)},expression:"queryParam.psnName"}})]}},{key:"housePur",fn:function(t){var r=t.row;return[a("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},on:{select:function(t){return e.selectSearch("housePur",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")]),1!==e.modalFlag?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable"+e.modalFlag,ref:"table",attrs:{"sort-config":{defaultSort:{field:"",order:""}},"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,expand:!1,data:e.loadData,tableColumn:e.tableColumn,"if-init-query":!1,"show-footer-overflow":!0,"header-align":"center",customColumns:{name:"RegionUnderDeliveryList"}},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}},{key:"nextNodeNum",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(r))])]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(e._s(e.operationColumnText))],1)]}}])})],1)],1),a("region-deposit-modal",{ref:"regionDepositModal"}),a("house-under-delivery-detail-modal",{ref:"houseUnderDeliveryModal"}),a("house-owner-info-modal",{ref:"houseOwnerInfoModal"})]],2)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("e5d5"),c=a("4504"),d=a("3ed7"),m=a("c695"),f=a.n(m),h=a("ca00"),p=a("eccd"),g=a("5c96"),y=a("fdce"),b={name:"RegionUnderDelivery",components:{JDictRegionListSelect:y["default"],RegionDepositModal:u["default"],MESSuperQuery:s["default"],HouseUnderDeliveryDetailModal:c["default"],JDDictSelectTag:p["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(a.bind(null,"c752"))}},mixins:[l["a"],o["b"]],data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"RegionUnderDelivery",description:"小区欠交统计页面",modalFlag:1,operationColumnText:"",regionName:"",bldIdDisabled:!1,regionNameDisabled:!1,bldInfoOptions:[],cellInfoOptions:[],sortField:"",sortOrder:"",regionQueryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],bldQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],cellQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],houseQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"状态",value:"underDeliveryState",type:"slot",slotName:"underDeliveryState"},{label:"业主姓名",value:"psnName",type:"slot",slotName:"psnName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],regionColumns:[{headerAlign:"left",title:"小区名称",align:"left",field:"regionName",minWidth:230,slot:!0,sort:!0,customSortField:"regionName"},{title:"主管单位",align:"center",field:"sysOrgName",width:100},{title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"总户数（户）",align:"right",width:120,field:"houseNum",sort:!0,customSortField:"houseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存户数（户）",align:"right",width:150,field:"fullDepositHouseNum",sort:!0,customSortField:"fullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存金额（元）",align:"right",width:150,field:"fullDepositAmount",formatter:"amount",sort:!0,customSortField:"fullDepositAmount"},{headerAlign:"center",title:"未足额交存户数（户）",align:"right",width:170,field:"notFullDepositHouseNum",sort:!0,customSortField:"notFullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未足额交存金额（元）",align:"right",width:170,field:"notFullDepositAmount",formatter:"amount",sort:!0,customSortField:"notFullDepositAmount"},{headerAlign:"center",title:"未足额欠交金额（元）",align:"right",width:170,field:"notFullUnderDeliveryAmount",formatter:"amount",sort:!0,customSortField:"notFullUnderDeliveryAmount"},{headerAlign:"center",title:"未交户数（户）",align:"right",width:120,field:"notDepositHouseNum",sort:!0,customSortField:"notDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交金额（元）",align:"right",width:150,field:"notDepositAmount",formatter:"amount",sort:!0,customSortField:"notDepositAmount"},{title:"操作",field:"action",align:"center",width:130,fixed:"right",slot:!0}],bldColumns:[{title:"分区名称",headerAlign:"center",align:"center",field:"districtName",minWidth:120},{headerAlign:"left",title:"自然幢名称",align:"left",field:"bldName",minWidth:230,slot:!1,sort:!0,customSortField:"bldName"},{title:"主管单位",align:"center",field:"sysOrgName",width:100},{title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"总户数（户）",align:"right",width:120,field:"houseNum",sort:!0,customSortField:"houseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存户数（户）",align:"right",width:150,field:"fullDepositHouseNum",sort:!0,customSortField:"fullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存金额（元）",align:"right",width:150,field:"fullDepositAmount",formatter:"amount",sort:!0,customSortField:"fullDepositAmount"},{headerAlign:"center",title:"未足额交存户数（户）",align:"right",width:170,field:"notFullDepositHouseNum",sort:!0,customSortField:"notFullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未足额交存金额（元）",align:"right",width:170,field:"notFullDepositAmount",formatter:"amount",sort:!0,customSortField:"notFullDepositAmount"},{headerAlign:"center",title:"未足额欠交金额（元）",align:"right",width:170,field:"notFullUnderDeliveryAmount",formatter:"amount",sort:!0,customSortField:"notFullUnderDeliveryAmount"},{headerAlign:"center",title:"未交户数（户）",align:"right",width:120,field:"notDepositHouseNum",sort:!0,customSortField:"notDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交金额（元）",align:"right",width:150,field:"notDepositAmount",formatter:"amount",sort:!0,customSortField:"notDepositAmount"},{title:"操作",field:"action",align:"center",width:130,fixed:"right",slot:!0}],cellColumns:[{headerAlign:"left",title:"单元名称",align:"left",field:"bldName",minWidth:230,slot:!1,sort:!0,customSortField:"bldName"},{title:"主管单位",align:"center",field:"sysOrgName",width:100},{title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"总户数（户）",align:"right",width:120,field:"houseNum",sort:!0,customSortField:"houseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存户数（户）",align:"right",width:150,field:"fullDepositHouseNum",sort:!0,customSortField:"fullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"足额交存金额（元）",align:"right",width:150,field:"fullDepositAmount",formatter:"amount",sort:!0,customSortField:"fullDepositAmount"},{headerAlign:"center",title:"未足额交存户数（户）",align:"right",width:170,field:"notFullDepositHouseNum",sort:!0,customSortField:"notFullDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未足额交存金额（元）",align:"right",width:170,field:"notFullDepositAmount",formatter:"amount",sort:!0,customSortField:"notFullDepositAmount"},{headerAlign:"center",title:"未足额欠交金额（元）",align:"right",width:170,field:"notFullUnderDeliveryAmount",formatter:"amount",sort:!0,customSortField:"notFullUnderDeliveryAmount"},{headerAlign:"center",title:"未交户数（户）",align:"right",width:120,field:"notDepositHouseNum",sort:!0,customSortField:"notDepositHouseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交金额（元）",align:"right",width:150,field:"notDepositAmount",formatter:"amount",sort:!0,customSortField:"notDepositAmount"},{title:"操作",field:"action",align:"center",width:130,fixed:"right",slot:!0}],houseColumns:[{headerAlign:"center",title:"房屋位置",align:"left",field:"address",direction:"rtl",minWidth:150,slot:!1,sort:!0,customSortField:"address"},{headerAlign:"center",title:"房屋账号",align:"center",field:"accCode",width:155,sort:!0,customSortField:"accCode"},{headerAlign:"center",title:"交存面积（㎡）",align:"right",width:120,field:"struArea",formatter:"area",sort:!0,customSortField:"house.struArea"},{headerAlign:"center",title:"业主姓名",width:120,align:"center",field:"psnName",sort:!0,customSortField:"psnName"},{headerAlign:"center",title:"应交金额（元）",align:"right",width:120,field:"dueAmount",formatter:"amount",sort:!0,customSortField:"acc.dueAmount"},{headerAlign:"center",title:"实交金额（元）",width:120,align:"right",field:"depAmount",formatter:"amount",sort:!0,customSortField:"acc.depAmount"},{headerAlign:"center",title:"欠交金额（元）",width:120,align:"right",field:"underDeliveryAmount",formatter:"amount",sort:!0,customSortField:"underDeliveryAmount"},{title:"操作",field:"action",align:"center",width:130,fixed:"right",slot:!0}],summation:{houseNum:0,fullDepositHouseNum:0,notFullDepositHouseNum:0,notDepositHouseNum:0,fullDepositAmount:0,notFullDepositAmount:0,notFullUnderDeliveryAmount:0,notDepositAmount:0,struAreaSum:0,dueAmountSum:0,depAmountSum:0,underDeliveryAmountSum:0},loadData:function(t){return Object(n["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(a){return e.sortField=t.sortField,e.sortOrder=t.sortOrder,a.result}))},url:{list:"/base/rRegionInfo/regionUnderDelivery",listSum:"/base/rRegionInfo/regionUnderDeliverySum",bld:"/base/rRegionInfo/bldUnderDelivery",bldSum:"/base/rRegionInfo/bldUnderDeliverySum",cell:"/base/rRegionInfo/cellUnderDelivery",cellSum:"/base/rRegionInfo/cellUnderDeliverySum",house:"/base/rRegionInfo/getHouseDetail",houseSum:"/base/rRegionInfo/getHouseDetail",queryZone:"/basics/sysZone/queryTreeList",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel",handleExportRegion:"/base/rRegionInfo/downloadUnderDelivery",handleExportBld:"/base/rRegionInfo/downloadBldUnderDelivery",handleExportCell:"/base/rRegionInfo/downloadCellUnderDelivery",handleExportHouse:"/base/rRegionInfo/downloadUnderDeliveryHouseDetail"},dictOptions:{},zoneInfo:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},tableColumn:function(){switch(this.modalFlag){case 1:return this.operationColumnText="自然幢明细",this.$set(this.regionQueryObj[3],"val",this.queryParam.housePur),this.regionColumns;case 2:return this.operationColumnText="单元明细",this.$set(this.bldQueryObj[0],"val",this.regionName),this.$set(this.bldQueryObj[1],"val",this.queryParam.housePur),this.bldColumns;case 3:return this.operationColumnText="房屋明细",this.$set(this.cellQueryObj[0],"val",this.regionName),this.$set(this.cellQueryObj[1],"val",this.queryParam.bldId),this.$set(this.cellQueryObj[2],"val",this.queryParam.housePur),this.cellColumns;case 4:return this.operationColumnText="信息维护",this.$set(this.houseQueryObj[0],"val",this.regionName),this.$set(this.houseQueryObj[1],"val",this.queryParam.bldId),this.$set(this.houseQueryObj[2],"val",this.queryParam.cellId),this.$set(this.houseQueryObj[5],"val",this.queryParam.housePur),this.houseColumns}},tableUrl:function(){switch(this.modalFlag){case 1:return this.url.list;case 2:return this.url.bld;case 3:return this.url.cell;case 4:return this.url.house}},tableSumUrl:function(){switch(this.modalFlag){case 1:return this.url.listSum;case 2:return this.url.bldSum;case 3:return this.url.cellSum;case 4:return this.url.houseSum}},handleExportUrl:function(){switch(this.modalFlag){case 1:return this.url.handleExportRegion;case 2:return this.url.handleExportBld;case 3:return this.url.handleExportCell;case 4:return this.url.handleExportHouse}},handleExportText:function(){switch(this.modalFlag){case 1:return"小区欠交统计"+(new Date).getTime()+".xls";case 2:return"自然幢欠交统计"+(new Date).getTime()+".xls";case 3:return"单元欠交统计"+(new Date).getTime()+".xls";case 4:return"房屋欠交明细"+(new Date).getTime()+".xls"}},fieldList:function(){switch(this.modalFlag){case 1:return this.regionQueryObj;case 2:return this.bldQueryObj;case 3:return this.cellQueryObj;case 4:return this.houseQueryObj}}},provide:{hideAction:"true"},methods:{handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t}))},handleDetail:function(e){var t=this;Object(n["e"])("/base/rRegionInfo/getRegionDetail",{id:e.id}).then((function(e){t.$refs.regionDepositModal.assign(e.result)}))},houseDetail:function(e){var t=this;this.modalFlag&&1===this.modalFlag&&this.$set(this.bldQueryObj[0],"val",e.regionName),4===this.modalFlag?this.$refs.houseOwnerInfoModal.initData(e,!0,!0):(3===this.modalFlag?this.bldIdDisabled=!0:1===this.modalFlag&&(this.bldColumns[0].hidden=!(e.isDistrict&&1===e.isDistrict)),this.regionNameDisabled=!0,this.modalFlag=this.modalFlag+1,null!==e.id&&(this.queryParam.id=e.id),null!==e.bldId&&(this.queryParam.bldId=e.bldId),null!==e.cellId&&(this.queryParam.cellId=e.cellId),null!==e.regionName&&(this.regionName=e.regionName),this.$nextTick((function(){t.$refs.mesQuery.manuallyQuery(),t.getBldInfo(),t.changeBld()})))},changeBld:function(e){var t,a=this;t=void 0!=e?e:this.queryParam.bldId,Object(n["e"])("/base/rCellInfo/list",{pid:t}).then((function(e){0!==e.result.records.length?a.cellInfoOptions=e.result.records:a.cellInfoOptions=void 0}))},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"housePur",void 0),this.$set(this.queryParam,"underDeliveryState",void 0),1===this.modalFlag&&(this.regionName=void 0),this.getSummation(),this.$refs.mesQuery.setQueryListVal([{field:"regionName",val:this.regionName},{field:"bldId",val:this.queryParam.bldId},{field:"cellId",val:this.queryParam.cellId}])},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(h["f"])(this.queryParam),this.getSummation())},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=[],n=[];return 1===this.modalFlag?(i.push("regionName","sysOrgName","zoneName"),n.push("houseNum","fullDepositHouseNum","fullDepositAmount","notFullDepositHouseNum","notFullDepositAmount","notFullUnderDeliveryAmount","notDepositHouseNum","notDepositAmount")):2===this.modalFlag?(i.push("districtName","bldName","sysOrgName","zoneName"),n.push("houseNum","fullDepositHouseNum","fullDepositAmount","notFullDepositHouseNum","notFullDepositAmount","notFullUnderDeliveryAmount","notDepositHouseNum","notDepositAmount")):3===this.modalFlag?(i.push("bldName","sysOrgName","zoneName"),n.push("houseNum","fullDepositHouseNum","fullDepositAmount","notFullDepositHouseNum","notFullDepositAmount","notFullUnderDeliveryAmount","notDepositHouseNum","notDepositAmount")):(i.push("address","accCode"),n.push("struArea","dueAmount","depAmount","underDeliveryAmount")),Object(l["b"])({scope:{columns:a,data:r},spanCol:i,computedCol:n,isSpanSeq:!0,inPageComputer:function(e,t){if("struArea"===t.property)return Object(d["g"])(f.a.sum(e,t.property),3);if(["dueAmount","depAmount","underDeliveryAmount"].includes(t.property))return Object(d["g"])(f.a.sum(e,t.property));if(["houseNum","fullDepositHouseNum","notFullDepositHouseNum","notDepositHouseNum"].includes(t.property)){var a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(f.a.sum(e,t.property)).toLocaleString("zh-CN",a)}return["fullDepositAmount","notFullDepositAmount","notFullUnderDeliveryAmount","notDepositAmount"].includes(t.property)?Object(d["g"])(f.a.sum(e,t.property)):null},inTotalComputer:function(e){return["houseNum","fullDepositHouseNum","notFullDepositHouseNum","notDepositHouseNum"].includes(e.property)?Object(d["g"])(t.summation[e.property],0):["fullDepositAmount","notFullDepositAmount","notFullUnderDeliveryAmount","notDepositAmount"].includes(e.property)?Object(d["g"])(t.summation[e.property]):"struArea".includes(e.property)?Object(d["g"])(t.summation.struAreaSum,3):"dueAmount".includes(e.property)?Object(d["g"])(t.summation.dueAmountSum):"depAmount".includes(e.property)?Object(d["g"])(t.summation.depAmountSum):"underDeliveryAmount".includes(e.property)?Object(d["g"])(t.summation.underDeliveryAmountSum):void 0}})},footerSpanMethod:function(e){var t=[];return 1===this.modalFlag?t.push("regionName","sysOrgName","zoneName"):2===this.modalFlag?t.push("districtName","bldName","sysOrgName","zoneName"):3===this.modalFlag?t.push("bldName","sysOrgName","zoneName"):t.push("address","accCode"),Object(l["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(t){var a="";t.forEach((function(e){e.includes("action")||(a=a+e+",")})),a=a.slice(0,-1);var r=void 0===e.queryParam.regionName?"":e.queryParam.regionName,i=void 0===e.queryParam.zoneCode?"":e.queryParam.zoneCode,o=void 0===e.queryParam.sysOrgCode?"":e.queryParam.sysOrgCode,l=void 0===e.queryParam.id?"":e.queryParam.id,s=void 0===e.queryParam.bldId?"":e.queryParam.bldId,u=void 0===e.queryParam.cellId?"":e.queryParam.cellId,c=void 0===e.queryParam.housePur?"":e.queryParam.housePur,d=void 0===e.queryParam.psnName?"":e.queryParam.psnName,m=void 0===e.queryParam.underDeliveryState?"":e.queryParam.underDeliveryState,f=void 0===e.queryParam.underDeliveryState?"":e.queryParam.underDeliveryState,h=void 0===e.sortField?"":e.sortField,p=void 0===e.sortOrder?"":e.sortOrder,g=e.getSuperQueryItemByRef({refName:"mesQuery"}),y=e.handleExportUrl+"?regionName="+r+"&id="+l+"&bldId="+s+"&cellId="+u+"&housePur="+c+"&zoneCode="+i+"&sysOrgCode="+o+"&psnName="+d+"&underDeliveryState="+f+"&state="+m+"&queryType=and&queryItems="+g+"&sortField="+h+"&sortOrder="+p+"&exportXlsColumn="+a;Object(n["c"])(y,{},{isDownload:!0,fileName:e.handleExportText})}))},getSummation:function(){var e,t,a=this;this.queryPage(),this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=g["Loading"].service({target:t,customClass:"tableFooterLoading"}),t.style.overflowX="hidden"),this.resetFooter(),Object(n["e"])(this.tableSumUrl,Object.assign({current:1,size:-1},this.queryParam)).then((function(e){if(e&&e.success){if(!e.result)return void a.resetFooter();4===a.modalFlag?(a.summation.struAreaSum=0,a.summation.dueAmountSum=0,a.summation.depAmountSum=0,a.summation.underDeliveryAmountSum=0,e.result.records.forEach((function(e){a.summation.struAreaSum+=Number(e.struArea),a.summation.dueAmountSum+=Number(e.dueAmount),a.summation.depAmountSum+=Number(e.depAmount),a.summation.underDeliveryAmountSum+=Number(e.underDeliveryAmount)}))):a.summation=e.result}else a.$message.warning(e.message);a.$refs.table.updateFooter()})).finally((function(){t&&e&&(e.close(),t.style.overflowX="auto")}))},resetFooter:function(){this.summation={houseNum:0,fullDepositHouseNum:0,notFullDepositHouseNum:0,notDepositHouseNum:0,fullDepositAmount:0,notFullDepositAmount:0,notFullUnderDeliveryAmount:0,notDepositAmount:0,struAreaSum:0,dueAmountSum:0,depAmountSum:0,underDeliveryAmountSum:0},this.$refs.table.updateFooter()},emptyCell:function(){this.$set(this.queryParam,"cellId",void 0)},back:function(){var e=this;this.$set(this.queryParam,"underDeliveryState",void 0),this.$set(this.queryParam,"psnName",void 0),this.modalFlag=this.modalFlag-1,1===this.modalFlag&&(this.searchReset(),this.regionNameDisabled=!1),3===this.modalFlag&&(this.bldIdDisabled=!1),this.$nextTick((function(){e.getBldInfo(),e.changeBld(),e.$refs.mesQuery.manuallyQuery()}))},getBldInfo:function(){var e=this,t=this.queryParam.id;Object(n["e"])("/base/rBldInfo/list",{pid:t,current:1,size:-1,state:"0"}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))}}},v=b,S=(a("856d"),a("a65e"),a("2877")),D=Object(S["a"])(v,r,i,!1,null,"713f0e45",null);t["default"]=D.exports},"6b40":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.fieldList,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery")},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.row;return[a("a-input",{attrs:{placeholder:"请输入小区名称",disabled:e.regionNameDisabled},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"startDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("startDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"endDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("endDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"bldId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{disabled:e.bldIdDisabled,placeholder:"请选择自然幢"},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.districtName?t.districtName+t.name:t.name)+"\n              ")])])})),1)]}},{key:"cellId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("cellId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"state",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择状态"},on:{select:function(t){return e.selectSearch("state",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},[a("a-select-option",{attrs:{value:"9"}},[e._v("新建")]),a("a-select-option",{attrs:{value:"1"}},[e._v("未交")]),a("a-select-option",{attrs:{value:"0"}},[e._v("已交")]),a("a-select-option",{attrs:{value:"3"}},[e._v("待全额退款")]),a("a-select-option",{attrs:{value:"4"}},[e._v("待销户")]),a("a-select-option",{attrs:{value:"5"}},[e._v("已注销")]),a("a-select-option",{attrs:{value:"7"}},[e._v("待资金转账")])],1)]}},{key:"psnName",fn:function(t){t.row;return[a("a-input",{attrs:{placeholder:"请输入业主姓名"},model:{value:e.queryParam.psnName,callback:function(t){e.$set(e.queryParam,"psnName",t)},expression:"queryParam.psnName"}})]}},{key:"housePur",fn:function(t){var r=t.row;return[a("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},on:{select:function(t){return e.selectSearch("housePur",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"accState",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{mode:"multiple",placeholder:"请选择账户状态","max-tag-count":3},on:{change:function(t){return e.accStateChange(t,r)}},model:{value:e.accStateList,callback:function(t){e.accStateList=t},expression:"accStateList"}},e._l(e.accStateOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value,disabled:t.disabled}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1)]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")]),1!==e.modalFlag?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable"+e.modalFlag,ref:"table",attrs:{"sort-config":{defaultSort:{field:"",order:""}},"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!1,drop:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,data:e.loadData,tableColumn:e.tableColumn,"show-footer-overflow":!0,"if-init-query":!1,"header-align":"center",customColumns:{name:"RegionDepositStatisticalList"}},scopedSlots:e._u([{key:"state",fn:function(t){t.text;var r=t.row;return["9"===r.state?a("span",[e._v("新建")]):e._e(),"1"===r.state?a("span",[e._v("未交")]):e._e(),"0"===r.state?a("span",[e._v("已交")]):e._e(),"3"===r.state?a("span",[e._v("待全额退款")]):e._e(),"4"===r.state?a("span",[e._v("待销户")]):e._e(),"5"===r.state?a("span",[e._v("已注销")]):e._e(),"7"===r.state?a("span",[e._v("待资金转账")]):e._e()]}},{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}},{key:"nextNodeNum",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(r))])]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(e._s(e.operationColumnText))],1)]}}])})],1)],1),a("region-deposit-modal",{ref:"regionDepositModal",attrs:{"z-index":1e3}}),a("house-detail-modal",{ref:"houseDepositModal"}),a("house-owner-info-modal",{ref:"houseOwnerInfoModal"})]],2)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("e5d5"),c=a("e1fc"),d=a("c1df"),m=a.n(d),f=a("3ed7"),h=a("c695"),p=a.n(h),g=a("ca00"),y=a("eccd"),b=a("5c96"),v=a("fdce"),S={name:"RegionDepositStatistical",components:{RegionDepositModal:u["default"],MESSuperQuery:s["default"],HouseDetailModal:c["default"],JDictRegionListSelect:v["default"],JDDictSelectTag:y["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(a.bind(null,"c752"))}},mixins:[l["a"],o["b"]],created:function(){},data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"RegionDepositStatistical",description:"小区交存统计页面",modalFlag:1,operationColumnText:"",regionName:"",regionNameDisabled:!1,bldIdDisabled:!1,bldInfoOptions:[],cellInfoOptions:[],sortField:"",sortOrder:"",accStateOptions:[{value:"all",disabled:!1,label:"全部"},{value:"9",disabled:!1,label:"新建"},{value:"1",disabled:!1,label:"未交"},{value:"0",disabled:!1,label:"已交"},{value:"3",disabled:!1,label:"待全额退款"},{value:"4",disabled:!1,label:"待销户"},{value:"5",disabled:!1,label:"已注销"},{value:"7",disabled:!1,label:"待资金转账"}],accStateList:[],regionQueryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode"},{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],bldQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],cellQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],houseQueryObj:[{label:"小区名称",value:"regionName",type:"slot",slotName:"regionName"},{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"状态",value:"state",type:"slot",slotName:"state"},{label:"业主姓名",value:"psnName",type:"slot",slotName:"psnName"},{label:"房屋用途",value:"housePur",type:"slot",slotName:"housePur"}],regionColumns:[{headerAlign:"left",title:"小区名称",align:"left",field:"regionName",width:150,slot:!0,sort:!0,customSortField:"regionName"},{title:"主管单位",align:"center",field:"sysOrgName",width:90},{title:"所属区县",align:"center",field:"zoneName",width:90},{headerAlign:"center",title:"备案日期",align:"center",field:"recDate",width:95,sort:!0,customSortField:"recDate",formatter:function(e){var t=e.cellValue;return t?m()(t).format("YYYY-MM-DD"):""}},{headerAlign:"center",title:"自然幢数(栋)",align:"right",field:"nextNodeNum",width:105,slot:!1,sort:!0,customSortField:"nextNodeNum"},{title:"交存户数",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交户数(户)",align:"right",width:110,field:"paidHouseNums",sort:!0,customSortField:"paidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交户数(户)",align:"right",width:110,field:"unPaidHouseNums",sort:!0,customSortField:"unPaidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"houseNumsRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存面积",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交面积(m²)",align:"right",width:110,field:"paidArea",formatter:"area",sort:!0,customSortField:"paidArea"},{headerAlign:"center",title:"未交面积(m²)",align:"right",width:110,field:"unPaidArea",formatter:"area",sort:!0,customSortField:"unPaidArea"},{headerAlign:"center",title:"交存率(%)",width:110,align:"right",field:"areaRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存金额",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交金额(元)",align:"right",width:110,field:"paidMoney",formatter:"amount",sort:!0,customSortField:"paidMoney"},{headerAlign:"center",title:"未交金额(元)",align:"right",width:110,field:"unPaidMoney",formatter:"amount",sort:!0,customSortField:"unPaidMoney"},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"moneyRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],bldColumns:[{title:"分区名称",headerAlign:"center",align:"center",field:"districtName",minWidth:120},{headerAlign:"left",title:"自然幢名称",align:"left",field:"bldName",width:150,sort:!0,customSortField:"bldName"},{title:"主管单位",align:"center",field:"sysOrgName",width:90},{title:"所属区县",align:"center",field:"zoneName",width:90},{headerAlign:"center",title:"备案日期",align:"center",field:"recDate",width:95,sort:!0,customSortField:"recDate",formatter:function(e){var t=e.cellValue;return t?m()(t).format("YYYY-MM-DD"):""}},{headerAlign:"center",title:"单元数",align:"right",field:"nextNodeNum",width:105,sort:!0,customSortField:"nextNodeNum"},{title:"交存户数",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交户数(户)",align:"right",width:110,field:"paidHouseNums",sort:!0,customSortField:"paidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交户数(户)",align:"right",width:110,field:"unPaidHouseNums",sort:!0,customSortField:"unPaidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"houseNumsRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存面积",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交面积(m²)",align:"right",width:110,field:"paidArea",formatter:"area",sort:!0,customSortField:"paidArea"},{headerAlign:"center",title:"未交面积(m²)",align:"right",width:110,field:"unPaidArea",formatter:"area",sort:!0,customSortField:"unPaidArea"},{headerAlign:"center",title:"交存率(%)",width:110,align:"right",field:"areaRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存金额",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交金额(元)",align:"right",width:110,field:"paidMoney",formatter:"amount",sort:!0,customSortField:"paidMoney"},{headerAlign:"center",title:"未交金额(元)",align:"right",width:110,field:"unPaidMoney",formatter:"amount",sort:!0,customSortField:"unPaidMoney"},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"moneyRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],cellColumns:[{headerAlign:"left",title:"单元名称",align:"left",field:"bldName",width:150,sort:!0,customSortField:"bldName"},{title:"主管单位",align:"center",field:"sysOrgName",width:90},{title:"所属区县",align:"center",field:"zoneName",width:90},{headerAlign:"center",title:"备案日期",align:"center",field:"recDate",width:95,sort:!0,customSortField:"recDate",formatter:function(e){var t=e.cellValue;return t?m()(t).format("YYYY-MM-DD"):""}},{headerAlign:"center",title:"房屋数",align:"right",field:"nextNodeNum",width:105,sort:!0,customSortField:"nextNodeNum"},{title:"交存户数",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交户数(户)",align:"right",width:110,field:"paidHouseNums",sort:!0,customSortField:"paidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交户数(户)",align:"right",width:110,field:"unPaidHouseNums",sort:!0,customSortField:"unPaidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"houseNumsRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存面积",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交面积(m²)",align:"right",width:110,field:"paidArea",formatter:"area",sort:!0,customSortField:"paidArea"},{headerAlign:"center",title:"未交面积(m²)",align:"right",width:110,field:"unPaidArea",formatter:"area",sort:!0,customSortField:"unPaidArea"},{headerAlign:"center",title:"交存率(%)",width:110,align:"right",field:"areaRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存金额",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交金额(元)",align:"right",width:110,field:"paidMoney",formatter:"amount",sort:!0,customSortField:"paidMoney"},{headerAlign:"center",title:"未交金额(元)",align:"right",width:110,field:"unPaidMoney",formatter:"amount",sort:!0,customSortField:"unPaidMoney"},{headerAlign:"center",title:"交存率(%)",align:"right",width:110,field:"moneyRate",formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],houseColumns:[{headerAlign:"center",title:"房屋位置",align:"left",field:"address",minWidth:150,direction:"rtl",slot:!1,sort:!0,customSortField:"house.address"},{headerAlign:"center",title:"房屋账号",align:"right",field:"accCode",width:155,sort:!0,customSortField:"accCode"},{headerAlign:"center",title:"建筑面积（㎡）",align:"right",width:120,field:"struArea",formatter:"area",sort:!0,customSortField:"house.struArea"},{headerAlign:"center",title:"业主姓名",width:120,align:"center",field:"psnName",sort:!0,customSortField:"psnName"},{headerAlign:"center",title:"应交金额（元）",align:"right",width:120,field:"dueAmount",formatter:"amount",sort:!0,customSortField:"acc.dueAmount"},{headerAlign:"center",title:"实交金额（元）",align:"right",width:120,field:"depAmount",formatter:"amount",sort:!0,customSortField:"acc.depAmount"},{headerAlign:"center",title:"账户余额（元）",align:"right",width:120,field:"balance",formatter:"amount",sort:!0,customSortField:"acc.balance"},{headerAlign:"center",title:"冻结金额（元）",align:"right",field:"balanceFrozen",width:120,formatter:"amount",sort:!0,customSortField:"acc.balanceFrozen"},{headerAlign:"center",title:"账户状态",align:"center",field:"state",width:130,slot:!0,sort:!0,customSortField:"acc.state"},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],summation:{nextNodeNum:"0",paidHouseNums:"0",unPaidHouseNums:"0",paidArea:"0.000",unPaidArea:"0.000",paidMoney:"0.00",unPaidMoney:"0.00",struArea:0,dueAmount:0,depAmount:0,balance:0,balanceFrozen:0},loadData:function(t){return Object(n["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(a){return e.sortField=t.sortField,e.sortOrder=t.sortOrder,a.result}))},url:{list:"/base/rRegionInfo/regionDepositStatisticalList",listSum:"/base/rRegionInfo/regionDepositStatisticalListSum",bld:"/base/rRegionInfo/getRegionDetail",bldSum:"/base/rRegionInfo/getRegionDetailSum",cell:"/base/rRegionInfo/getCellDetail",cellSum:"/base/rRegionInfo/getCellDetailSum",house:"/base/rRegionInfo/getHouseDetail",houseSum:"/base/rRegionInfo/getHouseDetailSum",queryZone:"/basics/sysZone/queryTreeList",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel",handleExportRegion:"/base/rRegionInfo/downloadRegionDepositStatistical",handleExportBld:"/base/rRegionInfo/downloadBldDepositStatistical",handleExportCell:"/base/rRegionInfo/downloadCellDepositStatistical",handleExportHouse:"/base/rRegionInfo/downloadHouseDetail"},dictOptions:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},tableColumn:function(){switch(this.modalFlag){case 1:return this.operationColumnText="自然幢明细",this.$set(this.regionQueryObj[3],"val",this.queryParam.housePur),this.regionColumns;case 2:return this.operationColumnText="单元明细",this.$set(this.bldQueryObj[0],"val",this.regionName),this.$set(this.bldQueryObj[1],"val",this.queryParam.housePur),this.bldColumns;case 3:return this.operationColumnText="房屋明细",this.$set(this.cellQueryObj[0],"val",this.regionName),this.$set(this.cellQueryObj[1],"val",this.queryParam.bldId),this.$set(this.cellQueryObj[2],"val",this.queryParam.housePur),this.cellColumns;case 4:return this.operationColumnText="信息维护",this.$set(this.houseQueryObj[0],"val",this.regionName),this.$set(this.houseQueryObj[1],"val",this.queryParam.bldId),this.$set(this.houseQueryObj[2],"val",this.queryParam.cellId),this.$set(this.houseQueryObj[5],"val",this.queryParam.housePur),this.houseColumns}},tableUrl:function(){switch(this.modalFlag){case 1:return this.url.list;case 2:return this.url.bld;case 3:return this.url.cell;case 4:return this.url.house}},tableSumUrl:function(){switch(this.modalFlag){case 1:return this.url.listSum;case 2:return this.url.bldSum;case 3:return this.url.cellSum;case 4:return this.url.houseSum}},handleExportUrl:function(){switch(this.modalFlag){case 1:return this.url.handleExportRegion;case 2:return this.url.handleExportBld;case 3:return this.url.handleExportCell;case 4:return this.url.handleExportHouse}},handleExportText:function(){switch(this.modalFlag){case 1:return"小区交存统计"+(new Date).getTime()+".xls";case 2:return"自然幢交存统计"+(new Date).getTime()+".xls";case 3:return"单元交存统计"+(new Date).getTime()+".xls";case 4:return"房屋交存明细"+(new Date).getTime()+".xls"}},fieldList:function(){switch(this.modalFlag){case 1:return this.regionQueryObj;case 2:return this.bldQueryObj;case 3:return this.cellQueryObj;case 4:return this.houseQueryObj}}},provide:{hideAction:"true"},methods:{handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},selectSearch:function(e,t){this.queryParam[e]=t},handleDetail:function(e){this.$refs.regionDepositModal.assign(e.id)},houseDetail:function(e){var t=this;this.modalFlag&&1===this.modalFlag&&this.$set(this.bldQueryObj[0],"val",e.regionName),4===this.modalFlag?this.$refs.houseOwnerInfoModal.initData(e,!0,!0):(3===this.modalFlag?this.bldIdDisabled=!0:1===this.modalFlag&&(this.bldColumns[0].hidden=!(e.isDistrict&&1===e.isDistrict)),this.regionNameDisabled=!0,this.modalFlag=this.modalFlag+1,null!==e.id&&(this.queryParam.id=e.id),null!==e.bldId&&(this.queryParam.bldId=e.bldId),null!==e.cellId&&(this.queryParam.cellId=e.cellId),null!==e.regionName&&(this.regionName=e.regionName),this.$nextTick((function(){t.$refs.mesQuery.manuallyQuery(),t.getBldInfo(),t.changeBld()})))},changeBld:function(e){var t,a=this;t=void 0!==e?e:this.queryParam.bldId,Object(n["e"])("/base/rCellInfo/list",{pid:t}).then((function(e){0!==e.result.records.length?a.cellInfoOptions=e.result.records:a.cellInfoOptions=void 0}))},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"housePur",void 0),this.$set(this.queryParam,"state",void 0),this.$set(this.queryParam,"accStateList",void 0),this.$set(this,"accStateList",void 0),this.accStateOptions.forEach((function(e){e.disabled=!1})),1===this.modalFlag&&(this.regionName=void 0),this.getSummation(),this.$refs.mesQuery.setQueryListVal([{field:"regionName",val:this.regionName},{field:"bldId",val:this.queryParam.bldId},{field:"cellId",val:this.queryParam.cellId}])},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.accStateList&&0!==this.accStateList.length?this.queryParam.accStateList=this.accStateList.join(","):this.queryParam.accStateList=void 0,this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(g["f"])(this.queryParam),this.getSummation())},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=[],n=[];return 1===this.modalFlag?(i.push("regionName","sysOrgName","zoneName","recDate"),n.push("nextNodeNum","paidHouseNums","unPaidHouseNums","paidArea","unPaidArea","paidMoney","unPaidMoney")):2===this.modalFlag?(i.push("districtName","bldName","sysOrgName","zoneName","recDate"),n.push("nextNodeNum","paidHouseNums","unPaidHouseNums","paidArea","unPaidArea","paidMoney","unPaidMoney")):3===this.modalFlag?(i.push("bldName","sysOrgName","zoneName","recDate"),n.push("nextNodeNum","paidHouseNums","unPaidHouseNums","paidArea","unPaidArea","paidMoney","unPaidMoney")):(i.push("address","accCode"),n.push("struArea","dueAmount","depAmount","balance","balanceFrozen")),Object(l["b"])({scope:{columns:a,data:r},spanCol:i,computedCol:n,isSpanSeq:!0,inPageComputer:function(e,t){return["nextNodeNum","paidHouseNums","unPaidHouseNums"].includes(t.property)?Object(f["g"])(p.a.sum(e,t.property),0):["paidMoney","unPaidMoney","struArea","dueAmount","depAmount","balance","balanceFrozen"].includes(t.property)?Object(f["g"])(p.a.sum(e,t.property)):["paidArea","unPaidArea"].includes(t.property)?Object(f["g"])(p.a.sum(e,t.property),3):void 0},inTotalComputer:function(e){return["nextNodeNum","paidHouseNums","unPaidHouseNums"].includes(e.property)?Object(f["g"])(t.summation[e.property],0):["paidArea","unPaidArea"].includes(e.property)?Object(f["g"])(t.summation[e.property],3):["paidMoney","unPaidMoney"].includes(e.property)||["struArea","dueAmount","depAmount","balance","balanceFrozen"].includes(e.property)?Object(f["g"])(t.summation[e.property]):void 0}})},footerSpanMethod:function(e){var t=[];return 1===this.modalFlag?t.push("regionName","sysOrgName","zoneName","recDate"):2===this.modalFlag?t.push("districtName","bldName","sysOrgName","zoneName","recDate"):3===this.modalFlag?t.push("bldName","sysOrgName","zoneName","recDate"):t.push("address","accCode"),Object(l["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(t){var a="";t.forEach((function(e){e.includes("action")||(a=a+e+",")})),a=a.slice(0,-1);var r=void 0===e.queryParam.regionName?"":e.queryParam.regionName,i=void 0===e.queryParam.zoneCode?"":e.queryParam.zoneCode,o=void 0===e.queryParam.sysOrgCode?"":e.queryParam.sysOrgCode,l=void 0===e.queryParam.id?"":e.queryParam.id,s=void 0===e.queryParam.bldId?"":e.queryParam.bldId,u=void 0===e.queryParam.cellId?"":e.queryParam.cellId,c=void 0===e.queryParam.housePur?"":e.queryParam.housePur,d=void 0===e.queryParam.state?"":e.queryParam.state,m=void 0===e.queryParam.psnName?"":e.queryParam.psnName,f=void 0===e.queryParam.address?"":e.queryParam.address,h=void 0===e.sortField?"":e.sortField,p=void 0===e.sortOrder?"":e.sortOrder,g=e.getSuperQueryItemByRef({refName:"mesQuery"}),y=e.handleExportUrl+"?regionName="+r+"&id="+l+"&bldId="+s+"&cellId="+u+"&housePur="+c+"&zoneCode="+i+"&sysOrgCode="+o+"&queryType=and&queryItems="+g+"&state="+d+"&psnName="+m+"&address="+f+"&sortField="+h+"&sortOrder="+p+"&exportXlsColumn="+a;void 0!==e.queryParam.accStateList&&(y=y+"&accStateList="+e.queryParam.accStateList),Object(n["c"])(y,{},{isDownload:!0,fileName:e.handleExportText})}))},getSummation:function(){var e,t,a=this;this.queryPage(),this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=b["Loading"].service({target:t,customClass:"tableFooterLoading"}),t.style.overflowX="hidden"),this.resetFooter(),Object(n["e"])(this.tableSumUrl,Object.assign(this.queryParam)).then((function(e){e&&e.success?(a.summation=e.result,a.$refs.table.updateFooter()):a.$message.warning(e.message)})).finally((function(){t&&e&&(e.close(),t.style.overflowX="auto")}))},resetFooter:function(){this.summation={nextNodeNum:"0",paidHouseNums:"0",unPaidHouseNums:"0",paidArea:"0.00",unPaidArea:"0.00",paidMoney:"0.00",unPaidMoney:"0.00",struArea:0,dueAmount:0,depAmount:0,balance:0,balanceFrozen:0},this.$refs.table.updateFooter()},emptyCell:function(){this.$set(this.queryParam,"cellId",void 0)},back:function(){var e=this;this.$set(this.queryParam,"state",void 0),this.$set(this.queryParam,"psnName",void 0),this.modalFlag=this.modalFlag-1,1===this.modalFlag?(this.queryParam={},this.$set(this,"accStateList",void 0),this.accStateOptions.forEach((function(e){e.disabled=!1})),this.$nextTick((function(){e.$refs.mesQuery.manuallyQuery()})),this.regionNameDisabled=!1):this.$nextTick((function(){e.getBldInfo(),e.changeBld(),e.$refs.mesQuery.manuallyQuery()})),3===this.modalFlag&&(this.bldIdDisabled=!1)},getBldInfo:function(){var e=this,t=this.queryParam.id;Object(n["e"])("/base/rBldInfo/list",{pid:t,current:1,size:-1,state:"0"}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))},accStateChange:function(e,t){var a=this;t.val=e,e&&e.length>0&&"all"===e[e.length-1]?this.accStateOptions.filter((function(e){return"all"!==e.value})).forEach((function(t){t.disabled=!0,a.accStateList=[e[e.length-1]]})):this.accStateOptions.forEach((function(e){e.disabled=!1}))}}},D=S,q=(a("0d61"),a("cb36"),a("2877")),w=Object(q["a"])(D,r,i,!1,null,"a965cc74",null);t["default"]=w.exports},"6bac":function(e,t,a){e.exports=a.p+"4538a1c0b4499f20c20de0262ff529fb.md"},"6c7d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"region"===e.modalState?a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{"default-query":!1,"default-sys-org":!0,fieldList:e.currentQueryObj,isInitQuery:!0,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"startDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},on:{change:function(e){return r.val=e}},model:{value:e.queryParam.startDate,callback:function(t){e.$set(e.queryParam,"startDate",t)},expression:"queryParam.startDate"}})]}},{key:"endDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},on:{change:function(e){return r.val=e}},model:{value:e.queryParam.endDate,callback:function(t){e.$set(e.queryParam,"endDate",t)},expression:"queryParam.endDate"}})]}},{key:"bldId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width100",attrs:{placeholder:"请选择自然幢"},on:{change:e.changeBld,select:function(t){return e.selectSearch("bldId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id},on:{click:e.emptyCell}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"cellId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("cellId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"houseUse",fn:function(t){var r=t.row;return[a("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},on:{change:function(e){return r.val=e},select:function(t){return e.selectSearch("housePur",t)}},model:{value:e.queryParam.housePur,callback:function(t){e.$set(e.queryParam,"housePur",t)},expression:"queryParam.housePur"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"download",type:"primary"},on:{click:function(t){return e.handleExportXls(e.modalFlag)}}},[e._v("导出")]),1!=e.modalFlag?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e(),1==e.modalFlag&&"psn"!=e.pageType&&e.showShieldButton?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"close-circle"},on:{click:e.shieldRegion}},[e._v("屏蔽小区")]):e._e(),1==e.modalFlag&&"psn"!=e.pageType&&e.showShieldButton?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"minus-circle"},on:{click:e.unShieldRegion}},[e._v("取消屏蔽")]):e._e()],1)]},proxy:!0},{key:"busiType",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{mode:"multiple",placeholder:"请选择业务类型"},on:{change:function(t){return e.busiTypeChange(t,r)}},model:{value:e.busiType,callback:function(t){e.busiType=t},expression:"busiType"}},e._l(e.busiTypeOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value,disabled:t.disabled}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1)]}},{key:"accState",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{mode:"multiple",placeholder:"请选择账户状态","max-tag-count":3},on:{change:function(t){return e.accStateChange(t,r)}},model:{value:e.accStateList,callback:function(t){e.accStateList=t},expression:"accStateList"}},e._l(e.accStateOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value,disabled:t.disabled}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1)]}}],null,!1,1482008272)}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable"+e.modalFlag+e.tableKey,ref:"table",attrs:{checkbox:e.showShieldButton&&"1"==e.modalFlag&&"psn"!=e.pageType,data:e.loadData,drop:!1,expand:!1,"footer-cell-style":e.footerCellStyle,"footer-span-method":e.footerSpanMethod,footerMethod:e.footerMethod,"if-init-query":!1,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"show-footer-overflow":!0,stripe:!0,tableColumn:e.tableColumn,toolbar:!0,bordered:"","header-align":"center","table-height":"auto",customColumns:{name:"RegionIncomeExpList"}},scopedSlots:e._u([{key:"regionName",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetailRegion(i)}}},[e._v(e._s(r))])]}},{key:"depAmount",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(1,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"valueAddedIncome",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(2,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"publicIncome",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(3,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"returnFunds",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(4,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"transferInAmount",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(5,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"returnAmount",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(6,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"useAmount",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(7,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"transferOutAmount",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(8,i)}}},[e._v(e._s(e.formatterAmount(r)))])]}},{key:"address",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.houseInfoDetail(i)}}},[e._v(e._s(r))])]}},{key:"action",fn:function(t){var r=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" "+e._s(e.IncomeExpenseDetails))],1),1===e.modalFlag?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.modalFlag?a("a",{on:{click:function(t){return e.houseInfoPublicity(r)}}},[e._v("信息公示")]):e._e(),1===e.modalFlag?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1===e.modalFlag?a("a",{on:{click:function(t){return e.regionTransactionDetails(r)}}},[e._v("小区日志")]):e._e()]}}],null,!1,2031579313)})],1)],1),a("money-modal",{ref:"moneyModalForm"}),a("HouseOwnerInfoModal",{ref:"infoModal",attrs:{tag:"tjfx"}})],a("RegionTransactionDetails",{ref:"RegionTransactionDetails"}),a("j-modal",{attrs:{title:"已屏蔽小区",visible:e.showShieldRegionVisible,maskClosable:!0,width:900,closable:!0,switchFullscreen:"","modal-height":"80vh","body-style":{padding:"12px"}},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"spinBody"},[a("div",{staticStyle:{"margin-top":"10px",flex:"1",height:"auto"}},[a("v-table",{ref:"table1",attrs:{"row-config":{height:80},toolbar:!1,bordered:"","table-height":"500",stripe:!0,checkbox:!0,"if-init-query":!0,expand:!1,data:e.loadHouseData,tableColumn:e.shieldRegioncolumns,"select-all-event":e.selectAllEventShield,selectChangeEvent:e.selectChangeEventShield}})],1)])])],2):"publicity"===e.modalState?a("publicity-list",{attrs:{"region-id":e.regionId,isDistrict:e.isDistrict},on:{back:e.back}}):a("div")},i=[],n=a("0fea"),o=a("3ed7"),l=a("ac0d"),s=a("0a5e"),u=a("eccd"),c=a("6fa9"),d=a("213b"),m=a("c752"),f=a("5b0b"),h=a("c695"),p=a.n(h),g=a("c1df"),y=a.n(g),b=a("ca00"),v=a("bda3"),S=a("5c96"),D=a("99e0"),q=a("d8a5"),w=a("fdce"),C=a("9fb0"),A=a("2b0e"),P={name:"RegionIncomeExp",components:{RegionTransactionDetails:D["default"],PublicityList:v["default"],MoneyModal:d["default"],MESSuperQuery:c["default"],HouseOwnerInfoModal:m["default"],QueryRangePicker:f["default"],JDDictSelectTag:u["default"],JDictRegionListSelect:w["default"]},mixins:[s["a"],l["b"]],props:{pageType:{type:String,default:"all"}},created:function(){var e=this,t=A["default"].ls.get(C["J"]);t.roleCode&&t.roleCode.indexOf("regionPsnQuery")>-1&&(this.showShieldButton=!0),this.queryParam.pageType=this.pageType,this.getQueryObj(),this.initShowAdvances(),this.$nextTick((function(){e.hasEnablePageConfigByKey("banInitQuery")||e.$refs.mesQuery.manuallyQuery()}))},data:function(){var e=this;return{showAdvances:!1,tableKey:0,showShieldButton:!1,selectedShieldRowKeys:[],busiTypeOptions:[{value:"disabled",disabled:!1,label:"不启用"},{value:"all",disabled:!1,label:"全部"},{value:"00",disabled:!1,label:"交存"},{value:"20",disabled:!1,label:"支用"},{value:"10",disabled:!1,label:"退款"},{value:"40",disabled:!1,label:"增值收益"},{value:"0011",disabled:!1,label:"预收款"}],busiType:[],accStateOptions:[{value:"all",disabled:!1,label:"全部"},{value:"9",disabled:!1,label:"新建"},{value:"1",disabled:!1,label:"未交"},{value:"0",disabled:!1,label:"已交"},{value:"3",disabled:!1,label:"待全额退款"},{value:"4",disabled:!1,label:"待销户"},{value:"5",disabled:!1,label:"已注销"},{value:"7",disabled:!1,label:"待资金转账"}],accStateList:[],regionId:"",current:"0",showVerify:!0,fileName:"RegionIncomeExp",description:"小区收支汇总页面",modalFlag:1,modalState:"region",initQueryFlag:!1,bldID:null,cellID:null,regionID:null,IncomeExpenseDetails:null,bldInfoOptions:[],cellInfoOptions:[],isDistrict:!1,selectedRowKeys:[],showShieldRegionVisible:!1,shieldRegionList:[],queryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode"},{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{label:"房屋用途",value:"houseUse",type:"slot",slotName:"houseUse"},{label:"业务类型",value:"busiType",type:"slot",slotName:"busiType"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],bldQueryObj:[{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"房屋用途",value:"houseUse",type:"slot",slotName:"houseUse"},{label:"业务类型",value:"busiType",type:"slot",slotName:"busiType"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],cellQueryObj:[{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"房屋用途",value:"houseUse",type:"slot",slotName:"houseUse"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],houseQueryObj:[{label:"房屋位置",value:"address",type:"input",queryType:"like"},{label:"业主姓名",value:"psnName",type:"input",queryType:"like"},{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"房屋用途",value:"houseUse",type:"slot",slotName:"houseUse"},{label:"房屋状态",value:"accState",type:"slot",slotName:"accState"}],columns:[{headerAlign:"center",title:"小区名称",align:"left",field:"regionName",width:150,slot:!0,sort:!0,customSortField:"region.name"},{headerAlign:"center",title:"主管单位",align:"center",field:"sysOrgName",width:100},{headerAlign:"center",title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",width:110,sort:!0,customSortField:"beginBalance"},{title:"本期收入",align:"center",headerAlign:"center",sort:!0,children:[{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depAmount",slot:!0,minWidth:120,sort:!0,customSortField:"depAmount"},{headerAlign:"center",title:"增值收益(元)",align:"right",field:"valueAddedIncome",slot:!0,minWidth:120,sort:!0,customSortField:"valueAddedIncome"},{headerAlign:"center",title:"公共收益(元)",align:"right",field:"publicIncome",slot:!0,minWidth:120,sort:!0,customSortField:"publicIncome"},{headerAlign:"center",title:"退回资金(元)",align:"right",field:"returnFunds",slot:!0,minWidth:120,sort:!0,customSortField:"returnFunds"},{headerAlign:"center",title:"转入金额(元)",align:"right",field:"transferInAmount",slot:!0,minWidth:120,sort:!0,customSortField:"transferInAmount"}]},{title:"本期支出",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"退款金额(元)",align:"right",field:"returnAmount",slot:!0,minWidth:120,sort:!0,customSortField:"returnAmount"},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",slot:!0,minWidth:120,sort:!0,customSortField:"useAmount"},{headerAlign:"center",title:"转出金额(元)",align:"right",field:"transferOutAmount",slot:!0,minWidth:120,sort:!0,customSortField:"transferOutAmount"}]},{title:"预收款",align:"center",headerAlign:"center",hidden:!this.showAdvances,children:[{headerAlign:"center",title:"收入(元)",align:"right",field:"advancesInAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"advancesInAmount"},{headerAlign:"center",title:"支出(元)",align:"right",field:"advancesOutAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"advancesOutAmount"},{headerAlign:"center",title:"余额(元)",align:"right",field:"advancesBalance",formatter:"amount",minWidth:120,sort:!0,customSortField:"advancesBalance"}]},{headerAlign:"center",title:"期末余额(元)",minWidth:120,align:"right",field:"endBalance",formatter:"amount",sort:!0,customSortField:"endBalance"},{title:"操作",field:"action",align:"center",width:280,fixed:"right",slot:!0}],bldColumns:[{title:"分区名称",headerAlign:"center",align:"center",field:"districtName",minWidth:120},{headerAlign:"center",title:"楼栋名称",align:"center",field:"name",minWidth:200,sort:!0,customSortField:"name"},{headerAlign:"center",title:"承办银行",align:"center",field:"bankName",minWidth:110},{headerAlign:"center",title:"建筑总面积(m²)",align:"right",field:"struArea",formatter:function(e){var t=e.cellValue;return Object(o["g"])(t,3)},minWidth:150,sort:!0,customSortField:"stru_area"},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",width:110,sort:!0,customSortField:"beginBalance"},{title:"本期收入",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"depAmount"},{headerAlign:"center",title:"增值收益(元)",align:"right",field:"valueAddedIncome",formatter:"amount",minWidth:120,sort:!0,customSortField:"valueAddedIncome"},{headerAlign:"center",title:"公共收益(元)",align:"right",field:"publicIncome",formatter:"amount",minWidth:120,sort:!0,customSortField:"publicIncome"},{headerAlign:"center",title:"退回资金(元)",align:"right",field:"returnFunds",formatter:"amount",minWidth:120,sort:!0,customSortField:"returnFunds"},{headerAlign:"center",title:"转入金额(元)",align:"right",field:"transferInAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"transferInAmount"}]},{title:"本期支出",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"退款金额(元)",align:"right",field:"returnAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"returnAmount"},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"useAmount"},{headerAlign:"center",title:"转出金额(元)",align:"right",field:"transferOutAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"transferOutAmount"}]},{headerAlign:"center",title:"期末余额(元)",minWidth:120,align:"right",field:"endBalance",formatter:"amount",sort:!0,customSortField:"endBalance"},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],cellColumns:[{headerAlign:"center",title:"单元名称",align:"center",field:"name",minWidth:200,slot:"true",sort:!0,customSortField:"name"},{headerAlign:"center",title:"建筑总面积(m²)",align:"center",field:"struArea",formatter:function(e){var t=e.cellValue;return Object(o["g"])(t,3)},minWidth:150,sort:!0,customSortField:"stru_area"},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",width:110,sort:!0,customSortField:"beginBalance"},{title:"本期收入",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"depAmount"},{headerAlign:"center",title:"增值收益(元)",align:"right",field:"valueAddedIncome",formatter:"amount",minWidth:120,sort:!0,customSortField:"valueAddedIncome"},{headerAlign:"center",title:"公共收益(元)",align:"right",field:"publicIncome",formatter:"amount",minWidth:120,sort:!0,customSortField:"publicIncome"},{headerAlign:"center",title:"退回资金(元)",align:"right",field:"returnFunds",formatter:"amount",minWidth:120,sort:!0,customSortField:"returnFunds"},{headerAlign:"center",title:"转入金额(元)",align:"right",field:"transferInAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"transferInAmount"}]},{title:"本期支出",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"退款金额(元)",align:"right",field:"returnAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"returnAmount"},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"useAmount"},{headerAlign:"center",title:"转出金额(元)",align:"right",field:"transferOutAmount",formatter:"amount",minWidth:120,sort:!0,customSortField:"transferOutAmount"}]},{headerAlign:"center",title:"期末余额(元)",minWidth:120,align:"right",field:"endBalance",formatter:"amount",sort:!0,customSortField:"endBalance"},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],houseColumns:[{headerAlign:"center",title:"房屋位置名称",align:"left",field:"address",minWidth:300,slot:!0},{headerAlign:"center",title:"房屋账号",align:"center",field:"accCode",minWidth:150,sort:!0,customSortField:"acc.code"},{headerAlign:"center",title:"建筑面积(m²)",align:"center",field:"struArea",width:120,formatter:function(e){var t=e.cellValue;return Object(o["g"])(t,3)},sort:!0,customSortField:"house.stru_area"},{headerAlign:"center",title:"业主姓名",align:"center",field:"psnName",minWidth:100},{headerAlign:"center",title:"期初余额(元)",align:"right",field:"beginBalance",formatter:"amount",minWidth:100,sort:!0,customSortField:"beginBalance"},{headerAlign:"center",title:"本期收入(元)",align:"right",field:"income",formatter:"amount",minWidth:100,sort:!0,customSortField:"income"},{headerAlign:"center",title:"本期支出(元)",align:"right",field:"payment",formatter:"amount",minWidth:100,sort:!0,customSortField:"payment"},{headerAlign:"center",title:"期末余额(元)",align:"right",field:"endBalance",formatter:"amount",minWidth:100,sort:!0,customSortField:"endBalance"}],shieldRegioncolumns:[{headerAlign:"center",title:"小区名称",align:"center",field:"regionName",width:"20%"},{headerAlign:"center",title:"小区地址",align:"center",field:"address",width:"30%"}],loadData:function(t){return Object(n["e"])(e.tableUrl,Object.assign(t,e.queryParam)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},loadHouseData:function(e){return Object(n["e"])("/base/rRegionInfo/queryShieldRegion",Object.assign(e,{})).then((function(e){return e.result}))},url:{listUrl:"/base/rRegionInfo/regionIncomeExpList",blgListUrl:"/base/rBldInfo/getBldIncomeDetail",cellListUrl:"/base/rCellInfo/getCellIncomeDetail",houseListUrl:"/base/rHouseInfo/getHouseIncomeDetail",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel",regionSum:"/base/rRegionInfo/regionIncomeExpListSum",bldSum:"/base/rBldInfo/getBldIncomeDetailToOneSum",cellSum:"/base/rCellInfo/getCellIncomeDetailToOneSum",houseSum:"/base/rHouseInfo/getHouseIncomeDetailToOneSum"},dictOptions:{},summation:{beginBalanceSum:0,depAmountSum:0,valueAddedIncomeSum:0,publicIncomeSum:0,returnFundsSum:0,transferInAmountSum:0,returnAmountSum:0,useAmountSum:0,transferOutAmountSum:0,endBalanceSum:0,incomeSum:0,paymentSum:0,struAreaSum:0},currentQueryObj:[]}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},tableColumn:function(){return 1===this.modalFlag?this.columns:2===this.modalFlag?this.bldColumns:3===this.modalFlag?this.cellColumns:4===this.modalFlag?this.houseColumns:void 0},tableUrl:function(){return 1===this.modalFlag?this.url.listUrl:2===this.modalFlag?this.url.blgListUrl:3===this.modalFlag?this.url.cellListUrl:4===this.modalFlag?this.url.houseListUrl:void 0},tableSumUrl:function(){return 1===this.modalFlag?this.url.regionSum:2===this.modalFlag?this.url.bldSum:3===this.modalFlag?this.url.cellSum:this.url.houseSum}},provide:{hideAction:"true"},methods:{initShowAdvances:function(){var e=this;Object(q["e"])("is_advances_deposit").then((function(t){e.showAdvances="1"==t;var a=e.columns.find((function(e){return"预收款"===e.title}));a&&(a.hidden="1"!=t,e.$refs.table.tableKey++)}))},busiTypeChange:function(e,t){var a=this;t.val=e,e&&e.length>0&&"disabled"===e[e.length-1]?this.busiTypeOptions.filter((function(e){return"disabled"!==e.value})).forEach((function(t){t.disabled=!0,a.busiType=[e[e.length-1]]})):e&&e.length>0&&"all"===e[e.length-1]?this.busiTypeOptions.filter((function(e){return"all"!==e.value})).forEach((function(t){t.disabled=!0,a.busiType=[e[e.length-1]]})):e&&e.length>0&&"0011"===e[e.length-1]?this.busiTypeOptions.filter((function(e){return"0011"!==e.value})).forEach((function(t){t.disabled=!0,a.busiType=[e[e.length-1]]})):this.busiTypeOptions.forEach((function(e){e.disabled=!1}))},accStateChange:function(e,t){var a=this;t.val=e,e&&e.length>0&&"all"===e[e.length-1]?this.accStateOptions.filter((function(e){return"all"!==e.value})).forEach((function(t){t.disabled=!0,a.accStateList=[e[e.length-1]]})):this.accStateOptions.forEach((function(e){e.disabled=!1}))},selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t}))},getQueryObj:function(){var e={1:{detail:"小区收支明细",queryObj:this.queryObj,index:5},2:{detail:"楼栋收支明细",queryObj:this.bldQueryObj,index:2},3:{detail:"单元收支明细",queryObj:this.cellQueryObj,index:2},4:{detail:"房屋收支明细",queryObj:this.houseQueryObj,index:4}},t=e[this.modalFlag],a=t.detail,r=t.queryObj,i=t.index;this.IncomeExpenseDetails=a;var n=JSON.parse(JSON.stringify(r));n[i]["val"]=this.queryParam.housePur,this.$set(this,"currentQueryObj",n)},back:function(){var e=this;"publicity"===this.modalState?this.modalState="region":(this.modalFlag=this.modalFlag-1,this.getQueryObj(),this.initQueryFlag=!0,this.cellInfoOptions=void 0,this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"psnName",""),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.$set(this.queryParam,"address",""),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),3===this.modalFlag&&(this.queryParam.regionId=this.bldID),2===this.modalFlag&&(this.queryParam.regionId=this.regionID),1===this.modalFlag&&(this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this,"busiType",void 0),this.$set(this,"accStateList",void 0),this.$set(this.queryParam,"houseUse",void 0),this.busiTypeOptions.forEach((function(e){e.disabled=!1})),this.accStateOptions.forEach((function(e){e.disabled=!1})))),this.$nextTick((function(){e.$refs.mesQuery.manuallyQuery()}))},houseInfoPublicity:function(e){this.modalState="publicity",this.regionId=e.id,this.isDistrict=!(!e.isDistrict||1!==e.isDistrict)},regionTransactionDetails:function(e){this.$refs.RegionTransactionDetails.initData(e)},handleDetailRegion:function(e){var t={regionId:e.id,regionName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},handleDetail:function(e,t){this.$refs.moneyModalForm.assign(t.code,this.queryParam.startDate,this.queryParam.endDate,e,t.regionName,this.accStateList)},houseDetail:function(e){var t=this;if(this.cellInfoOptions=void 0,this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.$set(this.queryParam,"address",""),this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.modalFlag=this.modalFlag+1,this.getQueryObj(),2===this.modalFlag){var a=e.id,r=e.regionCode;this.queryParam.regionId=a,this.queryParam.regionCode=r,this.regionID=a,this.isDistrict=!(!e.isDistrict||1!==e.isDistrict),this.bldColumns[0].hidden=!this.isDistrict}if(3===this.modalFlag){var i=e.id,n=e.bldCode;this.queryParam.regionId=i,this.queryParam.bldCode=n,this.bldID=i,this.$set(this,"busiType",void 0)}if(4===this.modalFlag){var o=e.id;this.queryParam.regionId=o}this.$nextTick((function(){t.$refs.table.$refs.xTable.refreshColumn(),t.$refs.mesQuery.manuallyQuery()}))},changeBld:function(e){var t=this;Object(n["e"])("/base/rCellInfo/list",{pid:e}).then((function(e){0!==e.result.records.length?(t.cellInfoOptions=e.result.records,t.$refs.mesQuery.resetField("cellId")):t.cellInfoOptions=void 0}))},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>y()(t).valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&y()(t).valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"bldId",void 0),this.$set(this.queryParam,"cellId",void 0),this.cellInfoOptions=void 0,this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.$set(this.queryParam,"houseUse",void 0),this.$set(this.queryParam,"busiType",void 0),this.$set(this.queryParam,"accStateList",void 0),this.$set(this.queryParam,"housePur",void 0),this.$set(this,"busiType",void 0),this.$set(this,"accStateList",void 0),this.busiTypeOptions.forEach((function(e){e.disabled=!1})),this.accStateOptions.forEach((function(e){e.disabled=!1})),this.queryPage(),this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(b["f"])(this.queryParam),this.queryPage(),this.getSummation())},houseInfoDetail:function(e){e.id=e.houseId,this.$refs.infoModal.initData(e,!0,!0)},formatterAmount:function(e){return Object(o["g"])(e)},footerMethod:function(e){var t=this,a=this.getMethodColumnList(),r=function(e){return"struArea"===e.property?Object(o["g"])(t.summation[[1,2].includes(t.modalFlag)?"struArea":"struAreaS"],3):Object(o["g"])(t.summation[e.property])},i=function(e,t){return"struArea"===t.property?Object(o["g"])(p.a.sum(e,t.property),3):Object(o["g"])(p.a.sum(e,t.property))},n=[];return n=1===this.modalFlag?["regionName","sysOrgName","zoneName"]:2===this.modalFlag?["districtName","name","bankName"]:3===this.modalFlag?["name"]:["address","accCode"],Object(s["b"])({scope:e,spanCol:n,computedCol:a,isSpanSeq:!0,inPageComputer:i,inTotalComputer:r})},shieldRegion:function(){var e=this;this.selectedRowKeys&&this.selectedRowKeys.length>0?this.$confirm({title:"确认屏蔽",content:"确定要屏蔽选中的小区吗？",onOk:function(){Object(n["e"])("/base/rRegionInfo/shieldRegion",{regionId:e.selectedRowKeys.join(",")}).then((function(t){t&&"200"==t.code?(e.$message.success("屏蔽成功"),e.searchReset()):e.$message.error("屏蔽失败")})).catch((function(t){e.$message.error("请求出错："+t.message)}))},onCancel:function(){e.$message.info("已取消屏蔽操作")}}):this.$message.error("请选择要屏蔽的小区")},unShieldRegion:function(){var e=this;Object(n["e"])("/base/rRegionInfo/queryShieldRegion",{}).then((function(t){t&&"200"==t.code&&(e.shieldRegionList=t.result.records,e.showShieldRegionVisible=!0)}))},handleCancel:function(){this.close()},close:function(){this.showShieldRegionVisible=!1},handleOk:function(){var e=this;this.selectedShieldRowKeys&&this.selectedShieldRowKeys.length>0?(Object(n["e"])("/base/rRegionInfo/unShieldRegion",{regionId:this.selectedShieldRowKeys.join(",")}).then((function(t){t&&"200"==t.code&&(e.$message.success("取消屏蔽成功"),e.searchReset())})),this.close()):this.$message.error("请选择要取消屏蔽的小区")},selectChangeEventShield:function(e){var t=e.records;this.selectedShieldRowKeys=t.map((function(e){return e.id}))},selectAllEventShield:function(e){e.checked;var t=e.records;this.selectedShieldRowKeys=t.map((function(e){return e.id}))},getMethodColumnList:function(){var e=[],t=["beginBalance","depAmount","valueAddedIncome","publicIncome","returnFunds","transferInAmount","returnAmount","useAmount","transferOutAmount","endBalance","advancesInAmount","advancesOutAmount","advancesBalance"];switch(this.modalFlag){case 1:e=[].concat(t);break;case 2:e=["struArea"].concat(t);break;case 3:e=["struArea"].concat(t);break;default:e=["struArea","beginBalance","income","payment","endBalance"]}return e},footerSpanMethod:function(e){var t=[];return t=1===this.modalFlag?["regionName","sysOrgName","zoneName"]:2===this.modalFlag?["districtName","name","bankName"]:3===this.modalFlag?["name"]:["address","accCode"],Object(s["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(a){var r,i="";a.forEach((function(e){e.includes("action")||(i=i+e+",")})),i=i.slice(0,-1);var o=void 0===t.queryParam.startDate?"1900-01-01":t.queryParam.startDate,l=void 0===t.queryParam.endDate?y()((new Date).getTime()).format("YYYY-MM-DD"):t.queryParam.endDate,s=void 0===t.queryParam.zoneCode?"":t.queryParam.zoneCode,u=void 0===t.queryParam.sysOrgCode?"":t.queryParam.sysOrgCode,c=void 0===t.queryParam.address||null===t.queryParam.address?"":t.queryParam.address,d=void 0===t.queryParam.bldId?"":t.queryParam.bldId,m=void 0===t.queryParam.cellId?"":t.queryParam.cellId,f=void 0===t.queryParam.psnName||null===t.queryParam.psnName?"":t.queryParam.psnName,h=void 0===t.queryParam.regionId?"":t.queryParam.regionId,p=void 0===t.queryParam.regionCode||null===t.queryParam.regionCode?"":t.queryParam.regionCode,g=void 0===t.queryParam.bldCode||null===t.queryParam.bldCode?"":t.queryParam.bldCode,b=void 0===t.queryParam.housePur?"":t.queryParam.housePur,v=t.getSuperQueryItemByRef({refName:"mesQuery"});1===e?(r="/base/rRegionInfo/downloadRegionIncomeExpList?pageType="+t.pageType+"&queryType=and&queryItems="+v+"&exportXlsColumn="+i,Object(n["c"])(r,{},{isDownload:!0,fileName:"小区收支汇总"+(new Date).getTime()+".xls"})):2===e?(r="/base/rBldInfo/downloadBldIncomeDetail?address="+c+"&bldId="+d+"&startDate="+o+"&endDate="+l+"&regionId="+h+"&queryType=and&queryItems="+v+"&regionCode="+p+"&exportXlsColumn="+i,Object(n["c"])(r,{},{isDownload:!0,fileName:"自然幢收支明细"+(new Date).getTime()+".xls"})):3===e?(r="/base/rCellInfo/downloadCellIncomeDetail?address="+c+"&bldId="+d+"&cellId="+m+"&startDate="+o+"&endDate="+l+"&regionId="+h+"&queryType=and&queryItems="+v+"&bldCode="+g+"&exportXlsColumn="+i,Object(n["c"])(r,{},{isDownload:!0,fileName:"单元收支明细"+(new Date).getTime()+".xls"})):4===e&&(r="/base/rHouseInfo/downloadHouseIncomeDetail?address="+c+"&bldId="+d+"&cellId="+m+"&psnName="+f+"&startDate="+o+"&endDate="+l+"&regionId="+h+"&sysOrgCode="+u+"&zoneCode="+s+"&housePur="+b+"&queryType=and&queryItems="+v+"&exportXlsColumn="+i,Object(n["c"])(r,{},{isDownload:!0,fileName:"房屋收支明细"+(new Date).getTime()+".xls"}))}))},getSummation:function(){var e,t,a=this;this.setFooterData(),this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=S["Loading"].service({target:t,customClass:"tableFooterLoading"}),t.style.overflowX="hidden"),Object(n["e"])(this.tableSumUrl,Object.assign({current:1,size:-1},this.queryParam)).then((function(e){e&&e.success&&a.setFooterData(e.result||{beginBalanceSum:0,depAmountSum:0,valueAddedIncomeSum:0,publicIncomeSum:0,returnFundsSum:0,transferInAmountSum:0,returnAmountSum:0,useAmountSum:0,transferOutAmountSum:0,endBalanceSum:0,incomeSum:0,paymentSum:0,struAreaSum:0})})).catch((function(){})).finally((function(){t&&e&&(e.close(),t.style.overflowX="auto")}))},setFooterData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$set(this,"summation",e),this.$refs.table.updateFooter()},emptyCell:function(){this.$set(this.queryParam,"cellId",void 0)}}},x=P,N=(a("33ec"),a("5462"),a("2877")),O=Object(N["a"])(x,r,i,!1,null,"1eef3a20",null);t["default"]=O.exports},"6d39":function(e,t,a){"use strict";a("c881")},7078:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{"z-index":e.zIndex,title:e.title,"destroy-on-close":!0,width:"80vw",height:"80vh",footer:""},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("div",{ref:"modalBody",staticClass:"modelContrain"},[a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",ifInitQuery:!1,"show-pagination":!0,stripe:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,expand:!1,data:e.loadData,tableColumn:e.columns,"header-align":"center"}})],1)])])],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("6fa9"),s=a("9e62"),u=a("0fea"),c=a("3ed7"),d=a("c695"),m=a.n(d),f={name:"MoneyModal",components:{MESSuperQuery:l["default"],floorViews:s["default"]},props:{zIndex:{type:Number,default:1e3}},mixins:[o["a"],n["b"]],data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"BldDetailModal",description:"统计分析的自然幢详情页面",modalFlag:!1,regionList:[],title:"自然幢明细",isDisabled:!1,btnLoading:!1,regionId:null,columns:[{headerAlign:"center",title:"自然幢名称",align:"right",field:"bldName"},{headerAlign:"center",title:"银行名称",align:"center",field:"bankName"},{headerAlign:"center",title:"单元数(个)",align:"right",field:"cellNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"户数(户)",align:"right",field:"houseNum",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"已交户数(户)",align:"right",field:"paidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交户数(户)",align:"right",field:"unPaidHouseNums",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"已交金额(元)",align:"right",field:"paidMoney",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交金额(元)",align:"right",field:"unPaidMoney",formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};return Number(t).toLocaleString("zh-CN",a)}}],dictOptions:{},summation:{cellNum:"0",houseNum:"0",paidHouseNums:"0",unPaidHouseNums:"0",paidMoney:"0.00",unPaidMoney:"0.00"},loadData:function(t){return Object(u["e"])(e.url.list,Object.assign(t,{id:e.regionId})).then((function(e){return e.result}))},url:{list:"/base/rRegionInfo/bankingBldDetailList",listSum:"/base/rRegionInfo/bankingBldDetailListSum",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel"}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{hideAction:"true"},methods:{assign:function(e){this.modalFlag=!0,this.regionId=e,this.getSummation()},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){if(0===t)return"合计：";if(["cellNum","houseNum","paidHouseNums","unPaidHouseNums"].includes(e.property)){var a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(m.a.sum(r,e.property)).toLocaleString("zh-CN",a)}return["paidMoney","unPaidMoney"].includes(e.property)?Object(c["g"])(m.a.sum(r,e.property)):null})),a.map((function(e,a){return 0===a?"总合计：":"cellNum".includes(e.property)?Object(c["g"])(t.summation.cellNum,0):"houseNum".includes(e.property)?Object(c["g"])(t.summation.houseNum,0):"paidHouseNums".includes(e.property)?Object(c["g"])(t.summation.paidHouseNums,0):"unPaidHouseNums".includes(e.property)?Object(c["g"])(t.summation.unPaidHouseNums,0):"paidMoney".includes(e.property)?Object(c["g"])(t.summation.paidMoney):"unPaidMoney".includes(e.property)?Object(c["g"])(t.summation.unPaidMoney):null}))]},footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:3}:["bldName","bankName"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this,t=void 0===this.regionId?"":this.regionId,a="/base/rRegionInfo/downloadHouseDetail?regionId="+t;this.btnLoading=!0,Object(u["d"])(a,"小区交存房屋明细"+(new Date).getTime()+".xls").finally((function(){e.btnLoading=!1}))},getSummation:function(){var e=this;this.$nextTick((function(){e.queryPage()})),Object(u["e"])(this.url.listSum,Object.assign({current:1,size:-1},{id:this.regionId})).then((function(t){t&&t.success?e.summation=t.result:(e.$message.warning(t.message),e.summation={cellNum:"0",houseNum:"0",paidHouseNums:"0",unPaidHouseNums:"0",paidMoney:"0.00",unPaidMoney:"0.00"}),e.$refs.table.updateFooter()}))}}},h=f,p=(a("fdda"),a("438a3"),a("2877")),g=Object(p["a"])(h,r,i,!1,null,"cc051844",null);t["default"]=g.exports},"707d":function(e,t,a){},"75df":function(e,t,a){},"76f5":function(e,t,a){"use strict";a("9abf")},"78aa":function(e,t,a){},"79e9":function(e,t,a){},"7c5f":function(e,t,a){},"7f71":function(e,t,a){},8078:function(e,t,a){},8379:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard"},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList",isInitQuery:!1,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery")},on:{ok:e.handleSuperQuery,reset:e.resetQuery},scopedSlots:e._u([{key:"bankCode",fn:function(t){var r=t.row;return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择承办银行"},on:{change:e.handleChange},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bankInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.code}},[a("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"dateStart",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择开始日期"},on:{change:function(t){return e.dateChange(t,r,"minDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"dateEnd",fn:function(t){var r=t.row;return[a("a-date-picker",{attrs:{placeholder:"请选择结束日期",disabledDate:function(t){return e.disabledDate(t,"max")}},on:{change:function(t){return e.dateChange(t,r,"maxDate")}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("收支汇总统计")}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"","table-height":"auto",tableColumn:e.columns,toolbar:!0,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,"show-footer-overflow":!0,"if-init-query":!1,data:e.loadData,customColumns:{name:"transactionSummaryList"}}})],1)],1)])},i=[],n=a("0a5e"),o=a("6fa9"),l=a("0fea"),s=a("3ed7"),u=a("c1df"),c=a.n(u),d={name:"transactionSummary",components:{MESSuperQuery:o["default"]},mixins:[n["a"]],data:function(){var e=this;return{fileName:"TransactionSummaryList",bankInfoOptions:[],minDate:"",maxDate:"",beginBalanceTotal:"",depositAmountTotal:"",rateAmountTotal:"",otherIncomeAmountTotal:"",refundAmountTotal:"",useAmountTotal:"",otherExpendAmountTotal:"",finalBalanceTotal:"",bankBalanceTotal:"",useReturnAmountTotal:"",loadData:function(t){return e.resetFooterData(),Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.beginBalanceTotal=t.result.bigDecimalList[0],e.depositAmountTotal=t.result.bigDecimalList[1],e.rateAmountTotal=t.result.bigDecimalList[2],e.otherIncomeAmountTotal=t.result.bigDecimalList[3],e.refundAmountTotal=t.result.bigDecimalList[4],e.useAmountTotal=t.result.bigDecimalList[5],e.otherExpendAmountTotal=t.result.bigDecimalList[6],e.finalBalanceTotal=t.result.bigDecimalList[7],e.bankBalanceTotal=t.result.bigDecimalList[8],e.useReturnAmountTotal=t.result.bigDecimalList[9],t.result.page}))},url:{list:"/account/trdlog/queryTransactionSummary",exportXlsUrl:"/account/trdlog/exportTransactionSummaryXls"},queryObj:[{label:"主管单位",value:"spa.sysOrgCode",type:"sysOrgSelect"},{type:"slot",value:"bank.code",label:"承办银行",slotName:"bankCode"},{label:"申请开始时间",value:"startDate",type:"slot",queryType:"ge",slotName:"dateStart"},{label:"申请结束时间",value:"endDate",type:"slot",queryType:"le",slotName:"dateEnd"}],columns:[{field:"sysOrgName",title:"主管单位",align:"center",minWidth:120},{field:"bankName",title:"承办银行",align:"center",minWidth:120},{field:"spaCode",title:"专户账号",align:"center",minWidth:160},{field:"beginBalance",title:"期初余额(元)",align:"right",formatter:"amount",minWidth:120},{title:"本期收入",headerAlign:"center",children:[{title:"交存(元)",align:"right",width:120,headerAlign:"center",formatter:"amount",field:"depositAmount"},{title:"结息(元)",align:"right",width:110,headerAlign:"center",formatter:"amount",field:"rateAmount"},{title:"支用返还(元)",align:"right",width:110,headerAlign:"center",formatter:"amount",field:"useReturnAmount"}]},{field:"otherIncomeAmount",title:"其他收入(元)",headerAlign:"center",align:"right",formatter:"amount",minWidth:120},{title:"本期支出",headerAlign:"center",children:[{title:"退款(元)",align:"right",width:110,headerAlign:"center",formatter:"amount",field:"refundAmount"},{title:"支用(元)",align:"right",width:110,headerAlign:"center",formatter:"amount",field:"useAmount"}]},{field:"otherExpendAmount",title:"其他支出(元)",align:"right",formatter:"amount",width:120},{field:"finalBalance",title:"期末余额(元)",align:"right",formatter:"amount",minWidth:120},{field:"bankBalance",title:"银行余额(元)",align:"right",formatter:"amount",minWidth:120}]}},created:function(){this.bankInfoDict()},methods:{resetFooterData:function(){this.beginBalanceTotal=0,this.depositAmountTotal=0,this.rateAmountTotal=0,this.otherIncomeAmountTotal=0,this.refundAmountTotal=0,this.useAmountTotal=0,this.otherExpendAmountTotal=0,this.finalBalanceTotal=0,this.bankBalanceTotal=0,this.useReturnAmountTotal=0,this.$refs.table.updateFooter()},handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(a){var r="";a.forEach((function(e){r=r+e+","})),r=r.slice(0,-1),Object(l["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+r,t.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))}))},dateChange:function(e,t,a){e?(this[a]=e.format("YYYY-MM-DD"),this.$set(t,"val",e.format("YYYY-MM-DD"))):this[a]=""},disabledDate:function(e,t){return"min"===t?!!this.maxDate&&c()(e).isAfter(this.maxDate):!!this.minDate&&c()(e).isBefore(this.minDate)},handleChange:function(){this.$refs.mesQuery.manuallyQuery()},footerSpanMethod:function(e){var t=["sysOrgName","bankName","spaCode"];return Object(n["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerMethod:function(e){var t=this,a=["sysOrgName","bankName","spaCode"],r=["beginBalance","depositAmount","rateAmount","otherIncomeAmount","refundAmount","useAmount","otherExpendAmount","finalBalance","bankBalance","useReturnAmount"],i=function(e){return Object(s["g"])(t[e.property+"Total"])};return Object(n["b"])({scope:e,spanCol:a,computedCol:r,isSpanSeq:!0,inPageComputer:void 0,inTotalComputer:i})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},resetQuery:function(){this.queryParam={current:1,size:50},this.queryPage()},bankInfoDict:function(){var e=this;Object(l["e"])("/business/dBankCode/bankInfoStatistics").then((function(t){var a=e;t.result.forEach((function(e){var t={name:e.name,code:e.code,id:e.id};a.bankInfoOptions.push(t)}))}))}}},m=d,f=(a("f0ea"),a("fce5"),a("2877")),h=Object(f["a"])(m,r,i,!1,null,"7c946881",null);t["default"]=h.exports},"83c3":function(e,t,a){"use strict";a("0c74")},"871f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,"default-query":!0,"default-sys-org":!0,isInitQuery:!0,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"startDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("startDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"endDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("endDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable",ref:"table",attrs:{checkbox:!1,data:e.loadData,drop:!1,expand:!1,"footer-cell-style":e.footerCellStyle,"footer-span-method":e.footerSpanMethod,footerMethod:e.footerMethod,"if-init-query":!1,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"show-footer-overflow":!0,stripe:!0,tableColumn:e.columns,toolbar:!0,bordered:"","header-align":"center","table-height":"auto"}})],1)],1)]],2)},i=[],n=a("0fea"),o=a("3ed7"),l=a("ac0d"),s=a("0a5e"),u=a("eccd"),c=a("6fa9"),d=a("5b0b"),m=a("c695"),f=a.n(m),h=a("c1df"),p=a.n(h),g=a("ca00"),y=a("5c96"),b={name:"RegionCountyExp",components:{MESSuperQuery:c["default"],QueryRangePicker:d["default"],JDDictSelectTag:u["default"]},mixins:[s["a"],l["b"]],created:function(){this.getSummation()},data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"RegionCountyExp",description:"各区县资金统计",initQueryFlag:!1,queryObj:[{label:"开始日期",value:"startDate",type:"slot",slotName:"startDate",queryType:"ge"},{label:"结束日期",value:"endDate",type:"slot",slotName:"endDate",queryType:"le"},{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"}],columns:[{headerAlign:"center",title:"主管单位",align:"center",field:"sysOrgName",width:150},{headerAlign:"center",title:"所属区县",align:"center",field:"zoneName",width:100},{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depositAmount",formatter:"amount",minWidth:120},{headerAlign:"center",title:"使用金额(元)",minWidth:120,align:"right",field:"useAmount",formatter:"amount"},{headerAlign:"center",title:"退款金额(元)",minWidth:120,align:"right",field:"refundAmount",formatter:"amount"},{headerAlign:"center",title:"存款(元)",minWidth:120,align:"right",field:"totalAmount",formatter:"amount"}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},url:{list:"/base/rRegionInfo/queryRegionCountyExp",listSum:"/base/rRegionInfo/queryRegionCountyExpSum"},dictOptions:{},summation:{depositAmount:0,refundAmount:0,useAmount:0,totalAmount:0}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.$refs.mesQuery.manuallyQuery()}))},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>p()(t).valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&p()(t).valueOf()>=e.valueOf()},searchReset:function(){this.$set(this.queryParam,"zoneCode",void 0),this.$set(this.queryParam,"startDate",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"queryType",void 0),this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(g["f"])(this.queryParam),this.getSummation())},formatterAmount:function(e){return Object(o["g"])(e)},footerMethod:function(e){var t=this,a=this.getMethodColumnList(),r=function(e){return Object(o["g"])(t.summation[e.property])},i=function(e,t){return Object(o["g"])(f.a.sum(e,t.property))},n=[];return Object(s["b"])({scope:e,spanCol:n,computedCol:a,isSpanSeq:!0,inPageComputer:i,inTotalComputer:r})},getMethodColumnList:function(){var e=["depositAmount","refundAmount","useAmount","totalAmount"];return e},footerSpanMethod:function(e){var t=["sysOrgName","zoneName"];return Object(s["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},getSummation:function(){var e=this;this.queryPage();var t,a,r={depositAmount:"0.00",refundAmount:"0.00",useAmount:"0.00",totalAmount:"0.00"};this.$refs.table&&(a=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),t=y["Loading"].service({target:a,customClass:"tableFooterLoading"}),a.style.overflowX="hidden"),Object(n["e"])(this.url.listSum,Object.assign({current:1,size:-1},this.queryParam)).then((function(t){t&&t.success?e.summation=t.result:e.summation=r,e.$refs.table.updateFooter()})).catch((function(){e.summation=r,e.$refs.table.updateFooter()})).finally((function(){a&&t&&(t.close(),a.style.overflowX="auto")}))}}},v=b,S=(a("bb64"),a("8cde"),a("2877")),D=Object(S["a"])(v,r,i,!1,null,"62e8ae8f",null);t["default"]=D.exports},8774:function(e,t,a){},"87df":function(e,t,a){"use strict";a("75df")},"881e":function(e,t,a){"use strict";a("f3df")},"891d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{bordered:!1,"body-style":{height:"100%",paddingTop:"0px"}}},[a("a-tabs",{staticClass:"ant-modal-cust-warp tabsContent",on:{change:e.callback},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:"1",staticClass:"ant-modal-cust-warp",attrs:{tab:"待确认","force-render":""}},[a("pay-comfirm-apply-list",{ref:"toBeConfirm"})],1),a("a-tab-pane",{key:"2",staticClass:"ant-modal-cust-warp",attrs:{tab:"待支付","force-render":""}},[a("finish-comfirm-list",{key:"confirmed",ref:"confirmed",attrs:{pageState:1}})],1),a("a-tab-pane",{key:"3",staticClass:"ant-modal-cust-warp",attrs:{tab:"已支付","force-render":""}},[a("finish-comfirm-list",{key:"finishPay",ref:"finishPay",attrs:{pageState:2}})],1),a("a-tab-pane",{key:"4",staticClass:"ant-modal-cust-warp",attrs:{tab:"退回待记账","force-render":""}},[a("finish-comfirm-list",{key:"return",ref:"toBeAccounted",attrs:{pageState:3}})],1),a("a-tab-pane",{key:"5",staticClass:"ant-modal-cust-warp",attrs:{tab:"退回已记账","force-render":""}},[a("finish-comfirm-list",{key:"overReturn",ref:"overReturn",attrs:{sourceHidden:!0,pageState:4}})],1)],1)],1)},i=[],n=a("2dc7"),o=a("32f1"),l=a("897d"),s=a("d9a4"),u={name:"ConfirmTabPage",components:{FinishComfirmList:l["default"],PayComfirmApplyList:o["default"],ConfirmPayTabPage:n["default"]},mounted:function(){Object(s["a"])("banInitQuery")||(this.$refs.toBeConfirm.modalFormOk(),this.$refs.confirmed.modalFormOk(),this.$refs.finishPay.modalFormOk())},provide:function(){return{goToBePaid:this.goToBePaid}},data:function(){return{activeKey:"1"}},methods:{goToBePaid:function(){this.activeKey="2",this.$refs.confirmed.modalFormOk()},callback:function(e){"1"===e?this.$refs.toBeConfirm.modalFormOk(!1):"2"===e?this.$refs.confirmed.modalFormOk():"3"===e?this.$refs.finishPay.modalFormOk():"4"===e?this.$refs.toBeAccounted.modalFormOk():this.$refs.overReturn.modalFormOk()}}},c=u,d=(a("6d39"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"ea5a2a6c",null);t["default"]=m.exports},"897d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp finishConfirm",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:function(){return e.chooseRegionName=""}},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区"},on:{change:e.regionChangeHandle},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",staticClass:"tableCont",attrs:{checkbox:2!==e.pageState&&!this.sourceHidden,"child-table-height":null,data:e.loadData,expand:!0,"expand-config":{lazy:!0,loadMethod:e.loadContentMethod},"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},reload:e.queryPage,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"sort-config":{defaultSort:{field:"deal.valid_date",order:"asc"}},stripe:!0,tableColumn:e.columns,tableColumnChild:e.columnsChild,toolbar:!0,childTableAttrs:e.childTableAttrs,childTableMaxHeight:400,ifInitQuery:e.initQuery&&!e.hasEnablePageConfigByKey("banInitQuery"),bordered:"","header-align":"center","table-height":"auto"},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.selectedRows.length>1&&e.showAccount?a("a-dropdown",[a("a-button",{attrs:{icon:"ordered-list"},on:{click:e.tallyBatch}},[e._v(" 批量记账")])],1):e._e()]},proxy:!0},{key:"action",fn:function(t){t.text;var r=t.row;return[1==e.pageState?a("div",[a("get-table-action-buttons",[e.showAccount?a("a",{on:{click:function(t){return e.tally(r)}}},[a("a-icon",{attrs:{type:"printer"}}),e._v("\n              记账\n            ")],1):e._e(),a("a",{on:{click:function(t){return e.revokeConf(r)}}},[a("a-icon",{attrs:{type:"rollback"}}),e._v("\n              撤销\n            ")],1),a("a",{on:{click:function(t){return e.viewAllot(r)}}},[a("a-icon",{attrs:{type:"printer"}}),e._v("\n              打印支付凭证\n            ")],1),a("a",{on:{click:function(t){return e.viewAllotList(r)}}},[a("a-icon",{attrs:{type:"profile"}}),e._v("\n              查看分摊清册\n            ")],1)])],1):e._e(),2==e.pageState?a("div",[a("get-table-action-buttons",[e.hasEnablePageConfigByKey("hideReturnFundsBtn")?e._e():[a("a",{on:{click:function(t){return e.returnFunds(r)}}},[a("a-icon",{attrs:{type:"double-left"}}),e._v("\n                资金退回\n              ")],1)],a("a",{on:{click:function(t){return e.viewAllotList(r)}}},[e._v("\n              查看分摊清册\n            ")])],2)],1):e._e(),3==e.pageState?a("div",[a("get-table-action-buttons",[a("a",{on:{click:function(t){return e.tally(r)}}},[a("a-icon",{attrs:{type:"printer"}}),e._v("\n              记账\n            ")],1)])],1):e._e()]}},{key:"progAction",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(r.projId)}}},[a("a-icon",{attrs:{type:"profile"}}),e._v("\n          查看进度对应项目")],1)]}}])})],1),a("a-modal",{ref:"date",attrs:{okButtonProps:{props:{loading:e.loading}}},on:{cancel:function(t){e.accVisible=!0},ok:e.dealOk},model:{value:e.accVisible,callback:function(t){e.accVisible=t},expression:"accVisible"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在记账中。。。"}},[a("a-form",{ref:"dateForm",attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"记账日期",prop:"dealDate"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["dealDate",{rules:[{required:!0,message:"请选择日期"}],initialValue:e.dealDate}],expression:"['dealDate', { rules: [{ required: true, message: '请选择日期' }], initialValue: dealDate }]"}],attrs:{placeholder:"请选择记账日期",valueFormat:"YYYY-MM-DD"},on:{change:e.dealDateChange}})],1)],1)],1)]),a("print-report-comp",{ref:"print"}),a("view-proj-detil-modal",{ref:"projDetil",attrs:{zIndex:e.zIndex+1}}),a("allot-list-modal",{ref:"allotModal",on:{ok:e.modalFormOk}}),a("appropriate-apply-modal",{ref:"startModal",attrs:{bank:e.bankCode,handleId:e.handleId,pageState:4},on:{close:e.queryPage,ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("6375"),c=a("02ac"),d=a("5a1b"),m=a("570a"),f=a("9bed"),h=a("0789"),p=a("2d4c"),g=a("5a0c"),y=a.n(g),b=a("e789"),v=a("ca00"),S=a("4ec3"),D=a("fdce"),q=a("2b0e"),w=a("9fb0"),C={name:"FinishComfirmList",mixins:[l["a"],o["b"]],components:{AppropriateApplyModal:b["default"],GetTableActionButtons:p["default"],ViewProjDetilModal:h["default"],PrintReportComp:f["default"],PayComfirmProgrList:m["default"],PaymentAuditModal:d["default"],AllotListModal:c["default"],FundProgressModal:u["default"],MESSuperQuery:s["default"],JDictRegionListSelect:D["default"]},props:{pageState:{type:[String,Number],default:""},sourceHidden:{type:Boolean,default:!1},regionCode:{type:String,default:""},zIndex:{type:Number,default:1e3},initQuery:{type:Boolean,default:!0}},provide:function(){var e=this;return{projMainData:function(){return e.mainData}}},watch:{sourceHidden:{handler:function(e){var t=this,a=this.columns.find((function(e){return"操作"===e.title}));a&&(a.hidden=e),this.$nextTick((function(){t.$refs.table.$refs.xTable.refreshColumn()}))},immediate:!0}},data:function(){var e=this;return{showAccount:!0,form:this.$form.createForm(this),fileName:"FinishComfirmList",description:"拨付确认已确认,已支付页面",loading:!1,dealDate:y()(new Date).format("YYYY-MM-DD"),isShow:!1,accVisible:!1,parmas:[],fundProgress:{},mainData:{},bankCode:"",handleId:"",queryObj:[{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"bsp.describe",label:"项目名称",queryType:"like"},{type:"input",value:"deal.busiNo",label:"业务编号",queryType:"like"},{type:"input",value:"deal.colaccName",label:"收款户名",queryType:"like"},{type:"input",value:"deal.colaccCode",label:"收款账号",queryType:"like"},{type:"input",value:"bank.name",label:"付款银行",queryType:"like"}],columns:[{title:"业务编号",align:"center",field:"busiNo",width:170,sort:!0,customSortField:"deal.busiNo"},{title:"收款户名",align:"left",headerAlign:"left",field:"colaccName",minWidth:80},{title:"收款账号",align:"left",headerAlign:"left",field:"colaccCode",minWidth:80,sort:!0,customSortField:"deal.colaccCode"},{title:"付款银行",align:"left",headerAlign:"left",field:"bankName",minWidth:80},{title:"账户支付总额 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"totalAmount",width:140,sort:!0,customSortField:"deal.totalAmount"},{title:"总笔数",align:"right",headerAlign:"right",width:70,field:"totalNum",sort:!0,customSortField:"deal.totalNum"},{title:"状态",align:"left",headerAlign:"left",width:110,field:"state_dictText"},{title:"有效期",align:"center",width:110,field:"validDate",sort:!0,customSortField:"deal.validDate"},{title:"记账日期",align:"center",width:110,hidden:2!=this.pageState,field:"busiDate",sort:!0,customSortField:"deal.busiDate"},{hidden:!1,title:"操作",field:"action",align:"center",fixed:"right",width:240,slot:!0}],columnsChild:[{title:"小区名称",align:"left",width:200,field:"regionName"},{title:"项目描述",align:"left",field:"realAmount",minWidth:220,formatter:function(e){var t=e.row;e.cellValue;return t["faDescribe"]?t["faDescribe"]+" 下 "+t["proDescribe"]+"子项目":t["proDescribe"]}},{title:"拨款描述",align:"left",width:220,field:"progressInfo"},{title:"项目费用类型",align:"center",field:"costType_dictText",width:120},{title:"拨款比例 (%)",align:"right",field:"ratio",formatter:"amount",width:120},{title:"预设拨款金额 (元)",align:"right",field:"preAmount",formatter:"amount",width:this.isWidth()},{title:"实际拨款金额 (元)",align:"right",field:"realAmount",formatter:"amount",width:this.isWidth()},{title:"是否为质保金",align:"center",field:"isMargin_dictText",width:120},{title:"状态",align:"center",field:"state_dictText",width:140},{title:"操作",field:"progAction",align:"center",fixed:"right",width:210,slot:!0}],chooseRegionName:"",childTableAttrs:{cellStyle:function(t){var a=t.row,r=(t.rowIndex,t.column);t.columnIndex;if("regionName"===r.property&&a.regionName===e.chooseRegionName)return"color: rgb(255, 153, 51)"}},url:{finishConifList:"/use/fundProgress/finishConifList",revokeConf:"/use/fundProgress/revokeConf/",paymentTally:"/use/fundProgress/paymentTally/",queryProj:"/use/serviceProj/queryProj",progressList:"/use/fundProgress/progressList"}}},created:function(){var e=this;2==this.pageState&&this.setPaidQuery(),Object(S["l"])("payment_is_account").then((function(t){e.showAccount="0"!=t.result}))},computed:{busiDeal:function(){return{flag:this.pageState}}},methods:{regionChangeHandle:function(e,t){this.chooseRegionName=t.name},isWidth:function(){return 18==q["default"].ls.get(w["w"])?160:140},loadData:function(e){return Object(n["e"])(this.url.finishConifList,Object.assign(e,this.queryParam,this.busiDeal)).then((function(e){return e.result}))},handleSuperQuery:function(e,t){this.regionCode&&(e.queryItems||(e.queryItems=[]),e.queryItems.push({field:"bsp.region_code",rule:"eq",val:this.regionCode})),this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,this.queryParam.filterBack=""!=this.regionCode,t?this.$refs.table.clearTableData():(Object(v["f"])(this.queryParam),this.queryPage())},viewAllot:function(e){this.$refs.print.print("proj_fund_report",{busiNo:e.busiNo})},setPaidQuery:function(){this.queryObj=[{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称",queryType:"like"},{type:"input",value:"deal.busiNo",label:"业务编号",queryType:"like"},{type:"input",value:"deal.colaccName",label:"收款户名",queryType:"like"},{type:"input",value:"deal.colaccCode",label:"收款账号",queryType:"like"},{type:"input",value:"bank.name",label:"付款银行",queryType:"like"},{type:"date",value:"deal.busiDate",maxDate:"deal.busiDate",label:"记账开始日期",queryType:"ge"},{type:"date",value:"deal.busiDate",minDate:"deal.busiDate",label:"记账结束日期",queryType:"le"}]},close:function(){this.selectedRows=[]},revokeConf:function(e){var t=this,a=this.url.revokeConf+e.id;Object(n["j"])(a).then((function(e){e.success?(t.$message.success(e.message),t.queryPage(),t.close()):(t.$message.error(e.message),t.close())}))},tally:function(e){this.accVisible=!0,this.parmas=[e]},tallyBatch:function(){this.accVisible=!0,this.parmas=this.selectedRows},returnFunds:function(e){var t=this;this.handleId=null,this.fundProgress.busiNo=e.busiNo,Object(n["e"])(this.url.progressList,this.fundProgress).then((function(a){if(a.success){var r=a.result.records.filter((function(e){return 0==e.state}));t.handleId=r.map((function(e){return e.id})).join(","),t.handleId?(t.bankCode=e.bankCode,t.$refs.startModal.visible=!0,t.$refs.startModal.title="资金退回申请",t.$nextTick((function(){t.$refs.startModal.initForm()}))):t.$message.info("当前已无可退回资金，或已发起退回流程")}}))},loadContentMethod:function(e){var t=this,a=e.row;3==this.pageState||4==this.pageState?this.fundProgress.returnBusiNo=a.busiNo:this.fundProgress.busiNo=a.busiNo;var r={reqNo:this.fundProgress.reqNo,projId:this.fundProgress.projId,busiNo:this.fundProgress.busiNo,returnBusiNo:this.fundProgress.returnBusiNo,regionName:this.fundProgress.regionName};return new Promise((function(e){Object(n["e"])(t.url.progressList,Object.assign({},r,{size:-1})).then((function(t){t.success&&(a.detailList=t.result.records),e()}))}))},goBusiReqPage:function(e){var t=this;Object(n["e"])(this.url.queryProj,{id:e}).then((function(e){if(!e.success)return t.$message.warn("项目异常，请稍后重试"),!1;t.mainData=e.result,t.$refs.projDetil.initData(),t.$refs.projDetil.mainData=t.mainData}))},viewAllotList:function(e){this.reqNo=e.reqNo,this.$refs.allotModal.title=e.reqDescribe?e.reqDescribe:"业务编号"+e.busiNo+" 拨款分摊清册",this.$refs.allotModal.initData({reqNo:e.reqNo,projId:e.projId,busiNo:e.busiNo,returnBusiNo:e.returnBusiNo,regionName:e.regionName})},dealDateChange:function(e){this.dealDate=e},dealOk:function(){var e=this;this.form.validateFields((function(t){if(!t){Object(n["e"])("/deposit/bBusiDeal/updateRecDate",{dealId:e.parmas.map((function(e){return e.id})).join(",")});var a=e.url.paymentTally+e.dealDate;e.loading=!0,Object(n["j"])(a,e.parmas).then((function(t){t.result.success?(e.$message.success(t.result.message),e.accVisible=!1,e.queryPage()):(e.$message.error(t.result.message),e.accVisible=!1)})).finally((function(){e.loading=!1}))}}))},footerMethod:function(e){var t=e.columns,a=e.data;return Object(l["b"])({scope:{columns:t,data:a},spanCol:["busiNo","colaccName","colaccCode","bankName"],computedCol:["totalAmount"],isSpanSeq:!0})},footerSpanMethod:function(e){return Object(l["c"])({scope:e,spanCol:["busiNo","colaccName","colaccCode","bankName"],isSpanSeq:!0})}}},A=C,P=(a("9b9e"),a("2877")),x=Object(P["a"])(A,r,i,!1,null,"269c4ea5",null);t["default"]=x.exports},"8b0d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{staticClass:"cardBody"},[e.showFlag?[a("m-e-s-super-query",{staticClass:"queryItem",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"part",fn:function(t){var r=t.row;return[a("a-tree-select",{staticClass:"width-100",attrs:{showSearch:!0,treeNodeFilterProp:"title",placeholder:"请选择材料分类",searchPlaceholder:"可输入材料分类和材料名称",replaceFields:{key:"code"},dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}],null,!1,3723372614)}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"header-align":"center",expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery")},scopedSlots:e._u([{key:"name",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(e.getMaterialName(a.materialType))+"\n            ")]}},{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.addDetail}},[e._v("新增")]),a("a-button",{attrs:{icon:"login",type:"primary"},on:{click:e.sync}},[e._v("同步")])],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.toDetail(r)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v("\n                 详情\n              ")],1)]}}],null,!1,1902761472)})],1)]:[a("part-price-detail-list",{attrs:{treeData:e.treeData,materialType:e.materialType},on:{back:e.back}})]],2),a("partPriceDetail-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("34bd"),c=a("2007"),d=a("1ac6"),m=a("d8c9");function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=h(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw n}}}}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var g={name:"PartPriceList",mixins:[l["a"],o["b"]],components:{PartPriceDetailModal:m["default"],PartPriceDetailList:d["default"],JDictDeviceListSelect:c["default"],PartPriceModal:u["default"],MESSuperQuery:s["default"]},computed:{CMaterialList:function(){var e=[];function t(a){var r,i=f(a);try{for(i.s();!(r=i.n()).done;){var n=r.value;n.children&&n.children.length>0?t(n.children):e.push(n)}}catch(o){i.e(o)}finally{i.f()}}return t(this.materialTree),e}},data:function(){var e=this;return{fileName:"PartPriceList",description:"维修设备价格库信息管理页面",queryObj:[{type:"slot",slotName:"part",value:"price.partId",label:"请选择部件信息",width:"450px"}],columns:[{title:"材料分类名称",align:"left",headerAlign:"left",field:"name",slot:!0},{title:"材料分类编号",align:"center",headerAlign:"center",field:"materialType",width:140},{title:"最高单价 (元)",align:"right",headerAlign:"right",field:"highPrice",width:150,formatter:"amount"},{title:"最低单价 (元)",align:"right",headerAlign:"right",field:"lowPrice",width:150,formatter:"amount"},{title:"平均单价 (元)",align:"right",headerAlign:"right",field:"avePrice",width:150,formatter:"amount"},{title:"备注",align:"left",headerAlign:"left",width:260,field:"remark"},{title:"操作",field:"action",align:"center",fixed:"right",width:147,slot:!0}],materialParentArr:[],materialTreeToArr:[],loadData:function(t){return new Promise((function(a){Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){e.materialTreeToArr&&e.materialTreeToArr.length>0?a(t.result):e.initMaterialTree().then((function(){a(t.result)}))}))}))},url:{list:"/use/partPrice/list",syncFormProj:"/use/partPriceDetail/syncFormProj",delete:"/use/partPrice/delete",deleteBatch:"/use/partPrice/deleteBatch",exportXlsUrl:"/use/partPrice/exportXls",importExcelUrl:"use/partPrice/importExcel",loadTreeRoot:"/sys/category/loadTreeRoot"},dictOptions:{},materialType:"",showFlag:!0,treeData:[]}},created:function(){},methods:{toDetail:function(e){var t=this;this.materialType=e.materialType,this.$nextTick((function(){t.showFlag=!1}))},back:function(){var e=this;this.$nextTick((function(){e.queryParam={},e.showFlag=!0}))},sync:function(){var e=this;Object(n["j"])(this.url.syncFormProj).then((function(t){t.success?(e.$message.success(t.message),e.queryPage()):e.$message.error(t.message)}))},addDetail:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增",this.$refs.modalForm.disableSubmit=!1},initMaterialTree:function(){var e=this;return new Promise((function(t){e.materialTreeToArr=[],Object(n["e"])(e.url.loadTreeRoot,{async:!1,pcode:"material_type"}).then((function(a){if(a&&a.success&&a.result.length>0){e.treeData=a.result,e.setNodeProtype(e.treeData);var r=function(t){var a,i=f(t);try{for(i.s();!(a=i.n()).done;){var n=a.value;n.children&&n.children.length>0?(r(n.children),e.materialParentArr.push(n)):e.materialTreeToArr.push(n)}}catch(o){i.e(o)}finally{i.f()}};r(a.result)}t()})).catch((function(){t()}))}))},getMaterialName:function(e){var t=this.materialTreeToArr.find((function(t){return t.code===e})),a=this.materialParentArr.find((function(e){return e.key===t.parentId}));return t?a.title+" -- "+t.title:""},setNodeProtype:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length>0?(e.selectable=!1,t.setNodeProtype(e.children)):e.selectable=!0}))}}},y=g,b=(a("2fe9"),a("c4b7"),a("2877")),v=Object(b["a"])(y,r,i,!1,null,"0065bc9d",null);t["default"]=v.exports},"8c06":function(e,t,a){"use strict";a("acca")},"8cde":function(e,t,a){"use strict";a("0013")},"8cfc":function(e,t,a){"use strict";a("6707c")},"8fc2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard"},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery"),type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"bankCode",fn:function(t){var r=t.row;return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择承办银行"},on:{change:e.handleChange},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bankInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.code}},[a("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("银行归集统计")}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",footerMethod:e.footerMethod,"footer-cell-style":e.footerCellStyle,tableColumn:e.columns,"table-height":"auto","if-init-query":!1,"show-footer-overflow":!0,data:e.loadData,customColumns:{name:"BankCollectionStatisticsList"}},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.showBusiDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 归集明细")],1),e.showRegFlag?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.showRegFlag?a("a",{on:{click:function(t){return e.showRegDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 定期明细")],1):e._e()]}}])})],1)],1),a("BankCollectionDetail",{ref:"bankCollectionDetail"}),a("RegDetailList",{ref:"RegDetailList"})],1)},i=[],n=a("0a5e"),o=a("6fa9"),l=a("0fea"),s=a("3ed7"),u=a("c695"),c=a.n(u),d=a("d8a5"),m={name:"BankCollectionStatistics",components:{BankCollectionDetail:function(){return Promise.resolve().then(a.bind(null,"4921"))},RegDetailList:function(){return Promise.resolve().then(a.bind(null,"d1b6"))},MESSuperQuery:o["default"]},mixins:[n["a"]],data:function(){var e=this;return{fileName:"TransactionDetailList",balanceTotal:"",houseNumTotal:"",showRegFlag:!1,housePaidNumTotal:"",bankInfoOptions:[],loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.balanceTotal=t.result.bigDecimalList[0],e.houseNumTotal=t.result.bigDecimalList[1],e.housePaidNumTotal=t.result.bigDecimalList[2],e.curBalanceTotal=t.result.bigDecimalList[3],e.regBalanceTotal=t.result.bigDecimalList[4],t.result.spaccInfoVOIPage}))},url:{list:"/account/trdlog/queryBankCollectionStatistics",exportXlsUrl:"/account/trdlog/exportBankCollectionStatisticsXls"},queryObj:[{label:"主管单位",value:"sp.sysOrgCode",type:"sysOrgSelect"},{type:"slot",value:"dbc.code",label:"承办银行",slotName:"bankCode"}],columns:[{field:"sysOrgName",title:"主管单位",align:"center",minWidth:100},{field:"bankName",title:"承办银行",align:"center"},{field:"spaName",title:"专户名称",align:"center"},{field:"bankCode",title:"专户账号",align:"center"},{field:"balance",title:"存款余额(元)",align:"right",formatter:"amount"},{field:"curBalance",title:"活期余额(元)",align:"right",formatter:"amount"},{field:"regBalance",title:"定期余额(元)",align:"right",formatter:"amount"},{field:"houseNum",title:"房屋备案户数",align:"right",formatter:function(e){var t=e.cellValue;return Object(s["g"])(t,0)}},{field:"housePaidNum",title:"房屋已交户数",align:"right",formatter:function(e){var t=e.cellValue;return Object(s["g"])(t,0)}},{field:"ratio",title:"归集率(%)",align:"right"},{title:"操作",field:"action",align:"center",width:200,fixed:"right",slot:!0}]}},created:function(){var e=this;this.bankInfoDict(),Object(d["e"])("show_reg_flag").then((function(t){t&&"1"==t&&(e.showRegFlag=!0)}))},methods:{footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=[a.map((function(e,t){return"bankCode"===e.property?"合计：":["houseNum","housePaidNum"].includes(e.property)?Object(s["g"])(c.a.sum(r,e.property),0):["balance","curBalance","regBalance"].includes(e.property)?Object(s["g"])(c.a.sum(r,e.property)):null})),a.map((function(e,a){return"bankCode"===e.property?"总合计：":["houseNum","housePaidNum"].includes(e.property)?Object(s["g"])(t[e.property+"Total"],0):["balance","curBalance","regBalance"].includes(e.property)?Object(s["g"])(t[e.property+"Total"]):null}))];return i},handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(a){var r="";a.forEach((function(e){e.includes("action")||(e.includes("bankCode")?r+="spaCode,":e.includes("balance")?r+="balanceExp,":e.includes("curBalance")?r+="curBalanceExp,":e.includes("regBalance")?r+="regBalanceExp,":r=r+e+",")})),r=r.slice(0,-1),Object(l["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+r,t.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))}))},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},showBusiDetail:function(e){e.regionno=e.regionNo,this.$refs.bankCollectionDetail.initData(e)},showRegDetail:function(e){this.$refs.RegDetailList.$set(this.$refs.RegDetailList.queryObj[0],"val",e.spaCode),this.$refs.RegDetailList.initData(e)},handleChange:function(){this.$refs.mesQuery.manuallyQuery()},bankInfoDict:function(){var e=this;Object(l["e"])("/business/dBankCode/bankInfoStatistics").then((function(t){e.bankInfoOptions=t.result}))}}},f=m,h=(a("1635"),a("a638"),a("2877")),p=Object(h["a"])(f,r,i,!1,null,"21dfbb2f",null);t["default"]=p.exports},"911c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",display:"flex",flexDirection:"column"},bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择物业区域"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{checkbox:!1,data:e.loadData,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"page-size":50,"row-config":{height:120},stripe:!0,"table-height":"auto",tableColumn:e.columns,toolbar:!0,"tree-config":{children:"children"},bordered:"",resizable:""},scopedSlots:e._u([{key:"code",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(r)}}},[e._v("【"+e._s(r.code)+"】"+e._s(r.describe))])]}},{key:"baseType",fn:function(t){var r=t.text;return["01"==r?a("span",[e._v(" 一般")]):e._e(),"02"==r?a("span",[e._v("应急")]):e._e(),"03"==r?a("span",[e._v("计划")]):e._e(),"04"==r?a("span",[e._v("保险")]):e._e()]}},{key:"completionFlag",fn:function(t){var r=t.text;return[a("div",["1"===r?[a("a-badge",{attrs:{status:"success",text:"审核通过"}})]:"2"===r?[a("a-badge",{attrs:{status:"processing",text:"待竣工审核"}})]:e._e()],2)]}},{key:"action",fn:function(t){var r=t.row;return[a("get-table-action-buttons",["1"==r.isCurrentUserFlow&&"2"==r.completionFlag?a("a",{on:{click:function(t){return e.handleAudit(r)}}},[a("a-icon",{attrs:{type:"setting"}}),e._v("\n            审核\n          ")],1):e._e()])]}}])})],1)],1)},i=[],n=a("0a5e"),o=a("d8a5"),l=a("0c8a"),s=a("0fea"),u=a("c695"),c=a.n(u),d=a("6fa9"),m=a("2d4c"),f=a("cf9e"),h=a("fdce"),p={name:"CompletionAcceptanceAuditList",components:{MESSuperQuery:d["default"],GetTableActionButtons:m["default"],SerProModelStateComp:f["default"],JDictRegionListSelect:h["default"]},mixins:[n["a"]],data:function(){var e=this;return{description:"竣工验收审核列表",fileName:"CompletionAcceptanceAuditList",showType:"queryList",queryObj:[{type:"input",value:"bsp.describe",label:"维修项目",queryType:"like"},{type:"input",value:"bsp.code",label:"项目编号",queryType:"like"},{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称"},{label:"维修类型",value:"bsp.base_type",type:"select",options:[{label:"全部",value:""},{label:"一般",value:"01"},{label:"应急",value:"02"},{label:"计划",value:"03"},{label:"保险",value:"04"}]},{label:"竣工状态",value:"bsp.completionFlag",type:"select",options:[{label:"全部",value:""},{label:"待审核",value:"2"},{label:"审核通过",value:"1"}]}],columns:[{title:"维修项目",headerAlign:"left",align:"left",field:"code",treeNode:!0,slot:!0},{title:"小区名称",align:"left",headerAlign:"left",width:200,field:"communityName"},{title:"申报预算 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"budgetCost",width:120},{title:"申报日期",align:"center",field:"reqDate",width:100},{title:"类型",align:"center",headerAlign:"center",field:"baseType",slot:!0,width:60},{title:"竣工状态",align:"center",headerAlign:"center",field:"completionFlag",slot:!0,width:120},{title:"操作",field:"action",align:"center",fixed:"right",width:80,slot:!0}],loadData:function(t){return Object(s["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/use/serviceProj/getAcceptanceList",costList:"/use/serviceCost/getProAndCost",queryById:"/act/model/queryById"},dictOptions:{}}},created:function(){this.initDictConfig()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{initDictConfig:function(){this.queryObj.map((function(e){"t1.base_type"===e.value&&Object(o["g"])("project_type").then((function(t){e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var a={label:t.text,value:t.value};e.options.push(a)}))}))}))},handleAudit:function(e){Object(l["goBusiPage"])(e.flowId,e.id,"c",e.sysOrgCode,e.baseType,!1)},footerMethod:function(e){var t=e.columns,a=e.data;return[t.map((function(e,t){if(0===t)return"总计：";if(["budgetCost"].includes(e.property)){var r={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};return Number(c.a.sum(a,e.property)).toLocaleString("zh-CN",r)}}))]},footerSpanMethod:function(e){e._rowIndex;var t=e._columnIndex;return 0===t?{colspan:3}:1===t||2===t?{colspan:0}:void 0},goBusiReqPage:function(e){var t=e.id;e.pid&&(t=e.pid),Object(l["goBusiPage"])(e.flowId,t,"1",e.sysOrgCode,e.baseType)}}},g=p,y=(a("abc3"),a("2877")),b=Object(y["a"])(g,r,i,!1,null,"f7dd5de0",null);t["default"]=b.exports},"92e0":function(e,t,a){"use strict";a("f2d8")},"930a":function(e,t,a){"use strict";a("6731")},9315:function(e,t,a){},"9abf":function(e,t,a){},"9b9e":function(e,t,a){"use strict";a("78aa")},"9bbf":function(e,t,a){},a089:function(e,t,a){},a213:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{title:"办件量详情",width:"1200px",height:"85vh","z-index":1e3,position:{top:9,left:"center"}},on:{close:e.handleCancel},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[[a("a-row",{staticClass:"rowContent",attrs:{gutter:10,type:"flex"}},[a("a-col",{staticStyle:{flex:"1",width:"0"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10,type:"flex"}},[a("a-col",{attrs:{lg:4,md:4,sm:24,xl:4,xxl:4}},[a("a-form-item",[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务类型"},model:{value:e.queryParam.businessType,callback:function(t){e.$set(e.queryParam,"businessType",t)},expression:"queryParam.businessType"}},[a("a-select-option",{attrs:{value:"70"}},[e._v("备案")]),a("a-select-option",{attrs:{value:"00"}},[e._v("交存")]),a("a-select-option",{attrs:{value:"10"}},[e._v("退款")]),a("a-select-option",{attrs:{value:"20"}},[e._v("使用")]),a("a-select-option",{attrs:{value:"11"}},[e._v("过户")]),a("a-select-option",{attrs:{value:"50"}},[e._v("变更")])],1)],1)],1),a("a-col",{attrs:{lg:4,md:4,sm:24,xl:4,xxl:4}},[a("a-form-item",[a("a-input",{attrs:{placeholder:"请输入业务摘要"},model:{value:e.queryParam.summary,callback:function(t){e.$set(e.queryParam,"summary",t)},expression:"queryParam.summary"}})],1)],1),a("a-col",{attrs:{lg:4,md:4,sm:24,xl:4}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden","margin-top":"-2px"}},[a("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.handleSuperQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1)])],1),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"","table-height":"auto",tableColumn:e.columns,"if-init-query":!1,data:e.loadData,toolbar:!0,print:!0,isExport:!0},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v("查看详情")],1)]}}])})],1)],a("task-deal-modal",{ref:"taskDealModal",attrs:{"z-index":1001,"flow-id":e.businessKey,"task-primary-key":e.taskId,pageName:e.pageUrl,editUrl:e.editUrl,innerpage:e.innerpage,internalUrl:e.internalUrl},on:{ok:e.modalFormOk}})],2)],1),e.busiTypeDetail||e.dictCode?a("com-acc-info-modal",{ref:"detail",attrs:{"dict-code":e.dictCode,"busi-type-detail":e.busiTypeDetail}}):e._e(),a("j-modal",e._b({attrs:{switchFullscreen:!0,title:"房屋交易明细",top:8,"body-style":{padding:0},visible:e.visible,width:"1100px"},on:{cancel:e.handleCancel0}},"j-modal",e.bindAttr,!1),[a("template",{slot:"footer"},[a("div",{staticStyle:{"text-align":"center"}},[a("a-button",{on:{click:e.handleCancel0}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            取消\n          ")],1)],1)]),a("deposit-business-details",{ref:"tradIngRecord"})],2)],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("da39"),s=a("0c8a"),u=a("0fea"),c=a("211e"),d=a("6858"),m=a("4130");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function c(e,t,a,r){var n=t&&t.prototype instanceof v?t:v,o=Object.create(n.prototype),l=new j(r||[]);return i(o,"_invoke",{value:N(e,a,l)}),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",g="executing",y="completed",b={};function v(){}function S(){}function D(){}var q={};u(q,o,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(T([])));C&&C!==a&&r.call(C,o)&&(q=C);var A=D.prototype=v.prototype=Object.create(q);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(i,n,o,l){var s=d(e[i],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==f(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,l)}))}l(s.arg)}var n;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){a(e,r,t,i)}))}return n=n?n.then(i,i):i()}})}function N(t,a,r){var i=m;return function(n,o){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===n)throw o;return{value:e,done:!0}}for(r.method=n,r.arg=o;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=d(t,a,r);if("normal"===u.type){if(i=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function O(t,a){var r=a.method,i=t.iterator[r];if(i===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,O(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var n=d(i,t.iterator,a.arg);if("throw"===n.type)return a.method="throw",a.arg=n.arg,a.delegate=null,b;var o=n.arg;return o?o.done?(a[t.resultName]=o.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,b):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var a=t[o];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function a(){for(;++i<t.length;)if(r.call(t,i))return a.value=t[i],a.done=!1,a;return a.value=e,a.done=!0,a};return n.next=n}}throw new TypeError(f(t)+" is not iterable")}return S.prototype=D,i(A,"constructor",{value:D,configurable:!0}),i(D,"constructor",{value:S,configurable:!0}),S.displayName=u(D,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,D):(e.__proto__=D,u(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},P(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,a,r,i,n){void 0===n&&(n=Promise);var o=new x(c(e,a,r,i),n);return t.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(A),u(A,s,"Generator"),u(A,o,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function i(r,i){return l.type="throw",l.arg=t,a.next=r,i&&(a.method="next",a.arg=e),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),I(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var i=r.arg;I(a)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:T(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function p(e,t,a,r,i,n,o){try{var l=e[n](o),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function o(e){p(n,r,i,o,l,"next",e)}function l(e){p(n,r,i,o,l,"throw",e)}o(void 0)}))}}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return(t=S(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e){var t=D(e,"string");return"symbol"==f(t)?t:t+""}function D(e,t){if("object"!=f(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var q={name:"ApprovalDetailModal",components:{TaskDealModal:c["default"],ComAccInfoModal:d["default"],DepositBusinessDetails:m["default"]},mixins:[o["a"],n["b"],l["FooterMethod"]],props:{initQuery:{type:Boolean,default:!0},zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{current:"0",modalFlag:!1,fileName:"ApprovalDetailModal",description:"办件量汇总页面",columns:[{title:"业务种类",align:"center",width:160,field:"businessType",formatter:function(e){var t=e.cellValue;return"70"===t?"备案":"00"===t?"交存":"10"===t?"退款":"20"===t?"使用":"11"===t?"过户":"50"===t?"变更":void 0}},{title:"办理日期",align:"center",width:130,field:"approvalDate",formatter:function(e){var t=e.cellValue;if(t)return t}},{title:"业务描述",headerAlign:"center",align:"left",minWidth:600,field:"summary"},{title:"操作",align:"center",fixed:"right",width:140,slot:!0,field:"action"}],tablePage:{total:0,currentPage:1,pageSize:10,align:"right",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},dataSource:[],querySource:[],useProcessKey:"",businessKey:"",taskId:"",pageUrl:"",editUrl:"",innerpage:"",internalUrl:"",dictCode:"",busiTypeDetail:"",visible:!1,filingProcessKey:"b_busi_req.project_filing",url:{list:"/statistics/analysis/queryApprovalList",getVariables:"/statistics/analysis/getVariables",queryApprovalDetail:"/statistics/analysis/queryApprovalDetail"},loadData:function(t){return Object(u["e"])(e.url.queryApprovalDetail,Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},computed:{bindAttr:function(){return b({zIndex:1100},this.$attrs)}},created:function(){},methods:{assign:function(e,t){var a=this;this.modalFlag=!0,this.queryParam=t,this.queryParam.username=e.username,this.$nextTick((function(){a.$refs.table.refresh()}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=a},handleQuery:function(){var e=this;this.tablePage.currentPage=1;var t=this.dataSource.filter((function(t){return(e.businessType===t.businessType||void 0===e.businessType)&&(!(!t.summary.includes(e.summary)&&""!==e.summary)||void 0)}));this.querySource=t,this.tablePage.total=t.length},handleCancel:function(){this.queryParam={}},getUseProcessKey:function(e){var t=this;return Object(u["e"])("/sys/dDict/getParamByCode/".concat("process_key","/",e)).then((function(e){t.useProcessKey=e.result}))},handleDetail:function(){var e=g(h().mark((function e(t){var a=this;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"00"===t.businessType?"0008"===t.businessTypeDetail||"0007"===t.businessTypeDetail||"0004"===t.businessTypeDetail?(this.busiTypeDetail=t.businessTypeDetail,"0008"===t.businessTypeDetail?this.dictCode="shared_facilities_disposal":"0007"===t.businessTypeDetail?this.dictCode="fund_type":this.dictCode="",this.$nextTick((function(){a.$refs.detail.disabled=!0,a.$refs.detail.isChoose=!0,a.$refs.detail.initComDepositData(t.businessId)}))):(this.visible=!0,this.$nextTick((function(){a.$refs.tradIngRecord.showByBusiNo(t.businessId)}))):Object(u["e"])(this.url.getVariables,{pId:t.pid}).then(function(){var e=g(h().mark((function e(r){var i,n;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.useProcessKey&&""!==a.useProcessKey||!t.tenantId){e.next=3;break}return e.next=3,a.getUseProcessKey(t.tenantId);case 3:return a.businessKey=t.businessKey,i="",n="",e.next=8,Object(u["e"])("/sys/dDict/getParamByCode/".concat("process_key_insure","/",t.tenantId)).then((function(e){i=e.result}));case 8:return e.next=10,Object(u["e"])("/sys/dDict/getParamByCode/".concat("process_key","/",t.tenantId)).then((function(e){n=e.result}));case 10:-1!==i.indexOf(a.useProcessKey)&&-1!==n.indexOf(a.useProcessKey)&&a.useProcessKey?Object(s["goBusiPage"])(a.businessKey,t.tableId,"",t.tenantId):a.filingProcessKey&&-1!==a.businessKey.indexOf(a.filingProcessKey)?Object(s["goBusiPage"])(a.businessKey,r.projId,"e",t.tenantId):(a.taskId=t.id,a.editUrl=t.editUrl,a.internalUrl=t.internalUrl,null!=t.editUrl&&""!==t.editUrl&&void 0!==t.editUrl&&-1!==t.editUrl.indexOf("innerpage")?(a.innerpage=t.editUrl.split(":")[1],a.pageUrl=t.url):(a.innerpage=t.url.split(":")[1],a.pageUrl=t.url),a.$refs.taskDealModal.width="90%",a.$refs.taskDealModal.onlyView=!0,t.variables=r,"10"===t.businessType?Object(u["e"])("/base/rtRegion/queryRegionByReqId",{reqId:t.tableId}).then((function(e){e.success?t.busiId=e.result.id:t.busiId=null,a.$refs.taskDealModal.initData(t.busiId?t.busiId:t.variables.busiId,(t.startUserId?t.startUserId+"·":"")+t.title,t,"done")})):a.$refs.taskDealModal.initData(t.busiId?t.busiId:t.businessId,(t.startUserId?t.startUserId+"·":"")+t.title,t,"done"),a.$refs.taskDealModal.disableSubmit=!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel0:function(){this.visible=!1},searchReset:function(){var e=this;this.queryParam.businessType=void 0,this.queryParam.summary=void 0,this.$nextTick((function(){e.$refs.table.refresh()}))}}},w=q,C=(a("ef40"),a("b60f"),a("2877")),A=Object(C["a"])(w,r,i,!1,null,"290899f8",null);t["default"]=A.exports},a49d:function(e,t,a){},a500:function(e,t,a){"use strict";a("43ba")},a638:function(e,t,a){"use strict";a("1ff7")},a65e:function(e,t,a){"use strict";a("e1cf")},a69c:function(e,t,a){"use strict";a("9bbf")},aa50:function(e,t,a){},ab42:function(e,t,a){},abc3:function(e,t,a){"use strict";a("358a9")},acca:function(e,t,a){},b261:function(e,t,a){},b2d0:function(e,t,a){},b60f:function(e,t,a){"use strict";a("d337")},b628:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{loading:e.modalLoadingFlag,title:e.title,width:"1200px",height:"80vh"},on:{close:e.handleCancel},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[a("div",{staticClass:"cardBody"},[a("div",{ref:"chart",staticClass:"chart"})])])],1)],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("c1df"),l=a.n(o),s=a("0fea"),u={name:"ApprovalGraphModal",components:{},mounted:function(){this.init()},watch:{modalFlag:function(e){var t=this;e&&this.chart&&this.$nextTick((function(){t.chart.resize()}))}},mixins:[n["b"]],props:{},data:function(){return{title:"办件量曲线图",current:"0",modalFlag:!1,modalLoadingFlag:!0,fileName:"ApprovalGraphModal",description:"办件量汇总页面",timeRange:[{label:"近5年",value:0},{label:"近10年",value:1}],toCity:[{label:"市",value:0},{label:"区",value:1}],chart:null,countData:[],amountData:[],xAxis:[],resizeObserver:null,XY:{xAxis:{data:[]},series:[{name:"备案",type:"line",stack:"Total",data:[]},{name:"交存",type:"line",stack:"Total",data:[]},{name:"退款",type:"line",stack:"Total",data:[]},{name:"使用",type:"line",stack:"Total",data:[]},{name:"过户",type:"line",stack:"Total",data:[]},{name:"变更",type:"line",stack:"Total",data:[]}]},url:{queryApprovalDetail:"/statistics/analysis/queryApprovalDetail"}}},computed:{},created:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{assign:function(e,t){var a,r=this;this.modalFlag=!0,t.current=1,t.size=-1,t.username=e.username,t.startDate&&t.endDate?(this.title="办件量曲线图",a=this.getChooseTime(t.startDate,t.endDate)):(this.title="办件量曲线图（未选择起止时间段查询，显示当前周数据）",a=this.getThisWeek(),t.startDate=new Date(a[1]),t.endDate=new Date(a[a.length-1])),Object(s["e"])(this.url.queryApprovalDetail,t).then((function(e){var t=r.getResultArray(a,e.result.records);r.init(a,t),r.modalLoadingFlag=!1}))},handleCancel:function(){this.modalLoadingFlag=!0},init:function(e,t){this.initChart(e,t)},initChart:function(e,t){this.chart&&(this.chart.dispose(),this.chart=null),this.chart=this.$echarts.init(this.$refs.chart);var a={title:{text:"办件量"},tooltip:{trigger:"axis"},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{data:["备案","交存","退款","使用","过户","变更"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",min:0,minInterval:1},series:[]};this.chart.setOption(a),this.updateChart(e,t)},updateChart:function(e,t){try{var a=["备案","交存","退款","使用","过户","变更"],r=[];a.forEach((function(e,a){r.push({name:e,type:"line",data:t[a]})})),this.XY.xAxis.data=e,this.XY.series=r,this.chart.setOption(this.XY),this.chart.resize()}catch(i){}},getThisWeek:function(){var e=new Date;e.setDate(e.getDate()-6);for(var t,a=[],r=1,i=0;i<7;i++){var n=e.getMonth()+1;n>=1&&n<=9&&(n="0"+n);var o=e.getDate();o>=1&&o<=9&&(o="0"+o),t=e.getFullYear()+"-"+n+"-"+o,a.push(t),e.setDate(e.getDate()+r)}return a},getChooseTime:function(e,t){for(var a,r=new Date(e),i=l()(t).diff(l()(e),"day"),n=[],o=1,s=0;s<i+1;s++){var u=r.getMonth()+1;u>=1&&u<=9&&(u="0"+u);var c=r.getDate();c>=1&&c<=9&&(c="0"+c),a=r.getFullYear()+"-"+u+"-"+c,n.push(a),r.setDate(r.getDate()+o)}return n},getResultArray:function(e,t){for(var a=[],r=[],i=[],n=[],o=[],l=[],s=[],u=0;u<e.length;u++){for(var c=0,d=0,m=0,f=0,h=0,p=0,g=0;g<t.length;g++)e[u]===t[g].approvalDate&&("70"===t[g].businessType?c++:"00"===t[g].businessType?d++:"10"===t[g].businessType&&["1012","1014","1013","1018"].includes(t[g].businessTypeDetail)?m++:"20"===t[g].businessType?f++:"11"===t[g].businessType&&"1011"===t[g].businessTypeDetail?h++:"50"===t[g].businessType&&p++);a.push(c),r.push(d),i.push(m),n.push(f),o.push(h),l.push(p)}return s=[a,r,i,n,o,l],s}}},c=u,d=(a("2a2ed"),a("f1d7"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"0851ec5e",null);t["default"]=m.exports},b6c3:function(e,t,a){},bade:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[a("div",{staticClass:"cardBody"},[a("a-row",{staticClass:"rowContent",attrs:{gutter:10,type:"flex"}},[a("a-col",{staticStyle:{flex:"1",width:"0"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24,type:"flex"}},[a("a-col",{attrs:{span:4}},[a("a-form-item",[a("sys-zone-select",{attrs:{width:"100%","show-sys-org-all":"","hide-zone":""},on:{change:e.selectZone},model:{value:e.zoneInfo,callback:function(t){e.zoneInfo=t},expression:"zoneInfo"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"请选择操作员",options:e.userList,filterOption:e.filterOption},on:{search:e.fetchUser},scopedSlots:e._u([e.fetching?{key:"notFoundContent",fn:function(){return[a("a-spin",{attrs:{size:"small"}})]},proxy:!0}:null],null,!0),model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledStartDate,format:"YYYY-MM-DD",placeholder:"请选择开始日期"},model:{value:e.queryParam.startDate,callback:function(t){e.$set(e.queryParam,"startDate",t)},expression:"queryParam.startDate"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",[a("a-date-picker",{staticClass:"width100",attrs:{"disabled-date":e.disabledEndDate,format:"YYYY-MM-DD",placeholder:"请选择结束日期"},model:{value:e.queryParam.endDate,callback:function(t){e.$set(e.queryParam,"endDate",t)},expression:"queryParam.endDate"}})],1)],1),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden","margin-top":"-2px"}},[a("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.handleSuperQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")]),a("a-button",{attrs:{loading:e.confirmLoading,type:"primary"},on:{click:function(t){return e.handleExport("办件量统计表")}}},[a("a-icon",{attrs:{type:"export"}}),e._v("\n                    导出\n                  ")],1),a("a-button",{attrs:{icon:"printer",type:"primary"},on:{click:function(t){return e.handlePrinter()}}},[e._v("打印")])],1)])],1)],1)],1)])],1),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"header-align":"center","table-height":"auto",expand:!1,data:e.loadData,"if-init-query":!1,tableColumn:e.columns,"show-footer-overflow":!0,print:!0,isExport:!0,customColumns:{name:"ApprovalUReportList"}},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 办件详情")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleGraph(r)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 曲线图")],1)]}}])})],1),a("approval-detail-modal",{ref:"approvalDetailModal",attrs:{zIndex:1e3}}),a("approval-graph-modal",{ref:"approvalGraphModal"})],1)])},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("a213"),u=a("b628"),c=a("c695"),d=a.n(c),m=a("6603"),f=a("cafb"),h=a("ca00"),p={name:"ApprovalUReport",components:{ApprovalDetailModal:s["default"],ApprovalGraphModal:u["default"],AutoSelect:m["default"],SysZoneSelect:f["default"]},mixins:[l["a"],o["b"]],data:function(){var e=this;return{current:"0",fileName:"ApprovalUReport",description:"办件量汇总页面",columns:[{title:"操作员",align:"left",minWidth:450,field:"realName"},{title:"备案量（个）",align:"right",width:130,field:"records",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"交存量（个）",align:"right",width:130,field:"deposit",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"退款量（个）",align:"right",width:130,field:"refund",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"使用量（个）",align:"right",width:130,field:"employ",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"过户量（个）",align:"right",width:130,field:"transfer",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"变更量（个）",align:"right",width:130,field:"alteration",formatter:function(e){var t=e.cellValue;return t||"0"}},{title:"操作",field:"action",align:"center",fixed:"right",width:300,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.queryApprovalNum,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},userList:[],url:{list:"/statistics/analysis/queryApprovalList",queryApprovalNum:"/statistics/analysis/queryApprovalNum",queryApprovalSum:"/statistics/analysis/queryApprovalSum",exportXlsUrl:"/statistics/analysis/exportXls",searchUserList:"/sys/user/queryNameByOrgCode",getUserList:"/sys/user/list"},confirmLoading:!1,zoneInfo:{},totalSum:{},fetching:!1}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){this.getUserList()},methods:{fetchUser:function(e){this.fetching=!0,e&&""!==e?this.searchUserList(e):this.getUserList()},searchUserList:function(e){var t=this;Object(n["e"])(this.url.searchUserList,{sysOrgCode:this.queryParam.sysOrgCode,username:e}).then((function(e){e.success&&e.result&&(t.userList=e.result.map((function(e){return{label:e.realname,value:e.username}})),t.fetching=!1)}))},getUserList:function(){var e=this;Object(n["e"])(this.url.getUserList,{pageNo:1,pageSize:100}).then((function(t){t.success&&t.result&&(e.userList=t.result.records.map((function(e){return{label:e.realname,value:e.username}})),e.fetching=!1)}))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},selectZone:function(e){this.queryParam.sysOrgCode=e.sysOrgValue,this.getSummation()},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=["realName"];return Object(l["b"])({scope:{columns:a,data:r},spanCol:i,computedCol:["records","deposit","refund","employ","transfer","alteration","quantity","totalNum"],isSpanSeq:!0,inPageComputer:function(e,t){if(["records","deposit","refund","employ","transfer","alteration"].includes(t.property)){var a={style:"decimal",currency:"CNY"};return["quantity","totalNum"].includes(t.property)?Number(d.a.sum(e,t.property)):Number(d.a.sum(e,t.property)).toLocaleString("zh-CN",a)}},inTotalComputer:function(e){if(["records","deposit","refund","employ","transfer","alteration"].includes(e.property)){var a={style:"decimal",currency:"CNY"};return r.length>0?"records"===e.property?void 0===t.totalSum.records?0:Number(t.totalSum.records).toLocaleString("zh-CN",a):"deposit"===e.property?void 0===t.totalSum.deposit?0:Number(t.totalSum.deposit).toLocaleString("zh-CN",a):"refund"===e.property?void 0===t.totalSum.refund?0:Number(t.totalSum.refund).toLocaleString("zh-CN",a):"employ"===e.property?void 0===t.totalSum.employ?0:Number(t.totalSum.employ).toLocaleString("zh-CN",a):"transfer"===e.property?void 0===t.totalSum.transfer?0:Number(t.totalSum.transfer).toLocaleString("zh-CN",a):"alteration"===e.property?void 0===t.totalSum.alteration?0:Number(t.totalSum.alteration).toLocaleString("zh-CN",a):0:0}}})},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},footerSpanMethod:function(e){return Object(l["c"])({scope:e,spanCol:["realName"],isSpanSeq:!0})},handleDetail:function(e){this.$refs.approvalDetailModal.assign(e,JSON.parse(JSON.stringify(this.queryParam)))},handleGraph:function(e){this.$refs.approvalGraphModal.assign(e,JSON.parse(JSON.stringify(this.queryParam)))},handleChange:function(e,t){t&&(this.queryParam.username=e,this.handleSuperQuery(this.queryParam,!1))},handleQuery:function(){this.handleSuperQuery(this.queryParam,!1)},handleExport:function(e){var t=this;this.confirmLoading=!0,Object(n["c"])(this.url.exportXlsUrl,this.queryParam).then((function(a){if(t.confirmLoading=!1,a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))},handlePrinter:function(){this.$refs.table.$refs.xTable.print({columnFilterMethod:function(e){if("action"!==e.property)return!0}})},searchReset:function(){this.queryParam.username=void 0,this.$set(this.queryParam,"startDate",""),this.$set(this.queryParam,"endDate",""),this.getUserList(),this.getSummation()},getSummation:function(){var e=this;this.queryPage(),Object(n["e"])(this.url.queryApprovalSum,this.queryParam).then((function(t){e.$set(e,"totalSum",t.result||{})}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(h["f"])(this.queryParam),this.getSummation())}}},g=p,y=(a("6a5b"),a("76f5"),a("2877")),b=Object(y["a"])(g,r,i,!1,null,"63b16931",null);t["default"]=b.exports},bc44d:function(e,t,a){"use strict";a("c930")},bda3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{"body-style":{height:"100%",padding:"24px"},bordered:!1}},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{"default-query":!0,"default-sys-org":!0,fieldList:e.publicity,isInitQuery:!1,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"trdDate",fn:function(t){var r=t.row;return[a("a-date-picker",{staticClass:"width100",attrs:{format:"YYYY-MM-DD",placeholder:"请选择公示日期",valueFormat:"YYYY-MM-DD"},on:{change:function(t){return e.selectSearch("endDate",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"houseUse",fn:function(t){var r=t.row;return[a("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"download",type:"primary"},on:{click:e.handleExportXls}},[e._v("导出")]),a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]),a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"alert"},on:{click:e.publicityPrint}},[e._v("信息公示")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"vTable",ref:"table",attrs:{checkbox:!1,data:e.loadData,drop:!1,expand:!1,"footer-cell-style":e.footerCellStyle,"footer-span-method":e.footerSpanMethod,footerMethod:e.footerMethod,"if-init-query":!1,"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,"show-footer-overflow":!0,stripe:!0,tableColumn:e.publicityColumns,toolbar:!0,bordered:"","header-align":"center","table-height":"auto"}})],1)],1),a("print-report-comp",{ref:"print",attrs:{zIndex:e.zIndex}})],1)},i=[],n=a("6fa9"),o=a("eccd"),l=a("9bed"),s=a("ca00"),u=a("0a5e"),c=a("0fea"),d=a("5c11"),m=a("3ed7"),f=a("c695"),h=a.n(f),p={name:"PublicityList",components:{PrintReportComp:l["default"],JDDictSelectTag:o["default"],MESSuperQuery:n["default"]},mixins:[u["a"]],props:{zIndex:{type:Number,default:void 0},regionId:{type:String,default:""},isDistrict:{type:Boolean,default:!1}},computed:{},data:function(){var e=this;return{publicity:[{label:"公示日期",value:"trd.trdDate",type:"slot",slotName:"trdDate",queryType:"le"},{label:"房屋位置",value:"house.address",type:"input",queryType:"like"},{label:"房屋用途",value:"house.houseUse",type:"slot",slotName:"houseUse"},{label:"业主姓名",value:"tem.psnName",type:"input",queryType:"like"}],fileName:"PublicityList",loadData:function(t){return e.queryParam.flag="1",e.queryParam.id=e.regionId,Object(c["e"])(e.url.queryHouseInfoPublicity,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},publicityColumns:[{headerAlign:"center",title:"小区名称",align:"left",field:"regionName",minWidth:100},{title:"分区名称",headerAlign:"center",align:"center",field:"districtName",minWidth:120,hidden:!this.isDistrict},{headerAlign:"center",title:"自然幢名称",align:"center",field:"bldName",minWidth:100},{headerAlign:"center",title:"业主姓名",align:"center",field:"psnName",width:120},{headerAlign:"center",title:"房屋位置",align:"right",field:"address",minWidth:300},{headerAlign:"center",title:"房屋用途",align:"right",field:"housePur_dictText",minWidth:100},{headerAlign:"center",title:"交存金额(元)",align:"right",field:"depositAmount",formatter:"amount",minWidth:100},{headerAlign:"center",title:"退款金额(元)",align:"right",field:"refundAmount",formatter:"amount",minWidth:100},{headerAlign:"center",title:"使用金额(元)",align:"right",field:"useAmount",formatter:"amount",minWidth:100},{headerAlign:"center",title:"利息(元)",align:"right",field:"rateAmount",formatter:"amount",minWidth:100},{headerAlign:"center",title:"余额(元)",align:"right",field:"balance",formatter:"amount",minWidth:100}],summation:{struArea:"0.000",depositAmount:"0.00",rateAmount:"0.00",refundAmount:"0.00",useAmount:"0.00",balance:"0.00"},printParams:{},url:{queryHouseInfoPublicity:"/base/rRegionInfo/queryHouseInfoPublicity",publicitySum:"/base/rRegionInfo/queryHouseInfoPublicitySum"}}},methods:{handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(s["f"])(this.queryParam),this.getSummation())},searchReset:function(){this.$set(this.queryParam,"regionName",void 0),this.$set(this.queryParam,"endDate",void 0),this.$set(this.queryParam,"address",void 0),this.cellInfoOptions=void 0,this.$set(this.queryParam,"psnName",void 0),this.$set(this.queryParam,"queryItems",void 0),this.$set(this.queryParam,"houseUse",void 0),this.getSummation()},selectSearch:function(e,t){this.queryParam[e]=t,this.getSummation()},publicityPrint:function(){this.$refs.print.type="print",this.$refs.print.print("region_info_publicity",{pubDate:this.queryParam.endDate?this.queryParam.endDate:Object(d["h"])(),regionName:this.printParams.regionName,sysOrgCode:this.printParams.sysOrgCode,depositNum:this.printParams.depositNum,notDepositNum:this.printParams.notDepositNum,depositAmountTotal:this.printParams.depositAmountTotal,refundAmountTotal:this.printParams.refundAmountTotal,rateAmountTotal:this.printParams.rateAmountTotal,balanceAmountTotal:this.printParams.balanceAmountTotal,useAmountTotal:this.printParams.useAmountTotal})},getSummation:function(){var e=this;this.queryParam.id=this.regionId,this.queryParam.flag="1",this.queryPage();var t={struAreaSum:"0.000",depositAmount:"0.000",rateAmount:"0.000",refundAmount:"0.000",useAmount:"0.000",balance:"0.000"};Object(c["e"])(this.url.publicitySum,Object.assign({current:1,size:-1},this.queryParam)).then((function(a){a&&a.success?(e.summation=a.result,e.printParams.regionName=a.result.regionName,e.printParams.sysOrgCode=a.result.sysOrgCode,e.printParams.depositNum=a.result.depositNum,e.printParams.notDepositNum=a.result.notDepositNum,e.printParams.depositAmountTotal=a.result.depositAmount,e.printParams.refundAmountTotal=a.result.refundAmount,e.printParams.rateAmountTotal=a.result.rateAmount,e.printParams.balanceAmountTotal=a.result.balance,e.printParams.useAmountTotal=a.result.useAmount):e.summation=t,e.$refs.table.updateFooter()})).catch((function(){e.summation=t,e.$refs.table.updateFooter()}))},handleExportXls:function(){var e,t=void 0===this.queryParam.id?"":this.queryParam.id,a=void 0===this.queryParam.flag?"":this.queryParam.flag,r=this.getSuperQueryItemByRef({refName:"mesQuery"});e="/base/rRegionInfo/downloadPublicityExpList?id="+t+"&flag="+a+"&queryItems="+r,Object(c["d"])(e,"小区信息公示"+(new Date).getTime()+".xls")},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},footerSpanMethod:function(e){return"seq"===e.column.type?this.isDistrict?{rowspan:1,colspan:7}:{rowspan:1,colspan:6}:["regionName","districtName","bldName","psnName","housePur_dictText","address"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){return 0===t?"合计：":["depositAmount","rateAmount","refundAmount","useAmount","balance"].includes(e.property)?Object(m["g"])(h.a.sum(r,e.property)):["struArea"].includes(e.property)?Object(m["g"])(h.a.sum(r,e.property),3):null})),a.map((function(e,a){return 0===a?"总合计：":"struArea".includes(e.property)?Object(m["g"])(t.summation.struArea,3):"depositAmount".includes(e.property)?Object(m["g"])(t.summation.depositAmount,2):"rateAmount".includes(e.property)?Object(m["g"])(t.summation.rateAmount,2):"refundAmount".includes(e.property)?Object(m["g"])(t.summation.refundAmount,2):"useAmount".includes(e.property)?Object(m["g"])(t.summation.useAmount,2):"balance".includes(e.property)?Object(m["g"])(t.summation.balance,2):null}))]},back:function(){this.$emit("back")}}},g=p,y=(a("040f"),a("592b"),a("2877")),b=Object(y["a"])(g,r,i,!1,null,"016068ec",null);t["default"]=b.exports},c4b7:function(e,t,a){"use strict";a("0b70")},c53b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{staticClass:"cardBody"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{"default-query":!1,"default-sys-org":!0,fieldList:e.queryObj,isInitQuery:!0,saveCode:"PublicRevenueStatistical",type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{multiple:"true",placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"download",type:"primary"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableBox"},[a("v-table",{ref:"table",attrs:{data:e.loadData,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},footerMethod:e.footerMethod,"table-column":e.tableColumns,"table-height":"auto",customColumns:{name:"PublicRevenueStatisticalList"}},scopedSlots:e._u([{key:"publicIncomeCount",fn:function(t){var r=t.row;return[r.publicIncomeCount&&0!=r.publicIncomeCount?a("a",{on:{click:function(t){return e.showPublicIncomeCount(r)}}},[e._v(e._s(r.publicIncomeCount))]):a("span",[e._v("0")])]}}])})],1)],1),a("vxe-modal",{attrs:{position:{top:"8px"},height:"80vh",minWidth:"1300px",title:"公共收益明细",width:"90vw"},model:{value:e.detailVisible,callback:function(t){e.detailVisible=t},expression:"detailVisible"}},[a("div",{staticClass:"detailModalBody"},[a("div",{staticClass:"tableBox"},[e.detailVisible?a("v-table",{ref:"detailTable",attrs:{data:e.loadDetailData,"footer-span-method":e.footerDetailSpanMethod,footerCellStyle:{textAlign:"right"},footerMethod:e.footerDetailMethod,"if-init-query":!1,"table-column":e.detailColumns,"table-height":"auto"},scopedSlots:e._u([{key:"state",fn:function(t){var r=t.row;return["0"===r.state?a("span",[e._v("已交")]):"1"===r.state?a("span",[e._v("未交")]):"3"===r.state?a("span",[e._v("待全额退款")]):"4"===r.state?a("span",[e._v("待销户")]):"5"===r.state?a("span",[e._v("已注销")]):"7"===r.state?a("span",[e._v("待资金转账")]):"9"===r.state?a("span",[e._v("新建")]):e._e()]}}],null,!1,4274213299)}):e._e()],1)])])],1)},i=[],n=a("0fea"),o=a("6fa9"),l=a("0a5e"),s=a("3ed7"),u=a("eccd"),c=a("fdce"),d=a("5a0c"),m=a.n(d),f=a("c695"),h=a.n(f),p={name:"PublicRevenueStatistical",components:{JDDictSelectTag:u["default"],JDictRegionListSelect:c["default"],MESSuperQuery:o["default"]},mixins:[l["a"]],data:function(){var e=this;return{queryObj:[{label:"小区名称",value:"regionCode",type:"slot",queryType:"in",slotName:"regionCode",width:"500px"}],busiTypeOptions:[{value:"disabled",disabled:!1,label:"不启用"},{value:"all",disabled:!1,label:"全部"},{value:"00",disabled:!1,label:"交存"},{value:"20",disabled:!1,label:"支用"},{value:"10",disabled:!1,label:"退款"},{value:"40",disabled:!1,label:"增值收益"},{value:"0011",disabled:!1,label:"预收款"}],accStateOptions:[{value:"all",disabled:!1,label:"全部"},{value:"9",disabled:!1,label:"新建"},{value:"1",disabled:!1,label:"未交"},{value:"0",disabled:!1,label:"已交"},{value:"3",disabled:!1,label:"待全额退款"},{value:"4",disabled:!1,label:"待销户"},{value:"5",disabled:!1,label:"已注销"},{value:"7",disabled:!1,label:"待资金转账"}],tableColumns:[{title:"小区名称",field:"regionName",width:180},{title:"资金账号",field:"accCode",width:180},{title:"账户类型",field:"baseTypeName",width:110,align:"center"},{title:"总面积",field:"struArea",width:110,align:"right",formatter:function(e){var t=e.cellValue;return Object(s["g"])(t,3)}},{title:"详细地址",field:"address",minWidth:200},{title:"承办行",field:"bankName",width:120},{title:"收缴金额",field:"publicIncome",width:120,align:"right",formatter:"amount"},{title:"收缴笔数",field:"publicIncomeCount",width:80,align:"right",slot:!0},{title:"分配金额",field:"distAmount",width:120,align:"right",formatter:"amount"},{title:"分配次数",field:"distCount",width:80,align:"right",formatter:function(e){var t=e.cellValue;return t||0}}],loadData:function(t){return e.getFooterTotalData(),Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},footerTotalData:{},detailParams:{},loadDetailData:function(t){return Object(n["e"])(e.url.detailList,Object.assign(t,e.detailParams)).then((function(t){if(t.success)return t.result;e.$message.error(t.message)}))},detailFooterTotalData:{},detailVisible:!1,detailColumns:[{title:"业务编号",field:"busiNo",width:150},{title:"资金描述",field:"describe",minWidth:200},{title:"交存金额",field:"amount",align:"right",width:110,formatter:"amount"},{title:"交款日期",field:"trdDate",width:100,align:"center",formatter:function(e){var t=e.cellValue;return t?m()(t).format("YYYY-MM-DD"):""}},{title:"交款人",field:"reqName",width:220},{title:"联系方式",field:"reqPhone",width:120},{title:"资金来源",field:"fundTypeName",width:200},{title:"交存状态",field:"state",width:90,slot:!0,align:"center"}],url:{list:"/base/rRegionInfo/publicBenefitsExpList",listSum:"/base/rRegionInfo/publicBenefitsExpListSum",detailList:"/base/rRegionInfo/getBenefitsDetail",detailListSum:"/base/rRegionInfo/getBenefitsDetailSum"}}},methods:{showPublicIncomeCount:function(e){var t=this;this.detailVisible=!0,this.detailParams.regionCode=e.regionCode,this.$nextTick((function(){t.getFooterTotalData(!0),t.$refs.detailTable.refresh()}))},footerMethod:function(e){var t=this,a=e.columns,r=e.data,i=["distCount","distAmount","publicIncomeCount","publicIncome"],n=["regionName","accCode","baseTypeName","bankName","address","struArea"];return Object(l["b"])({scope:{columns:a,data:r},computedCol:i,spanCol:n,isSpanSeq:!0,inPageComputer:function(e,t){return["distAmount","publicIncome"].includes(t.property)?Object(s["g"])(h.a.sum(e,t.property)):["struArea"].includes(t.property)?Object(s["g"])(h.a.sum(e,t.property),3):h.a.sum(e,t.property)},inTotalComputer:function(e){return["distAmount","publicIncome"].includes(e.property)?Object(s["g"])(t.footerTotalData[e.property]):["struArea"].includes(e.property)?Object(s["g"])(t.footerTotalData[e.property],3):t.footerTotalData[e.property]}})},footerSpanMethod:function(e){var t=["regionName","accCode","baseTypeName","bankName","address","struArea"];return Object(l["c"])({scope:e,spanCol:t,isSpanSeq:!0})},footerDetailMethod:function(e){var t=this,a=e.columns,r=e.data,i=["amount"],n=["busiNo","describe"];return Object(l["b"])({scope:{columns:a,data:r},computedCol:i,spanCol:n,isSpanSeq:!0,inPageComputer:function(e,t){return Object(s["g"])(h.a.sum(e,t.property))},inTotalComputer:function(e){return Object(s["g"])(t.detailFooterTotalData[e.property])}})},footerDetailSpanMethod:function(e){var t=["busiNo","describe"];return Object(l["c"])({scope:e,spanCol:t,isSpanSeq:!0})},getFooterTotalData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.detailFooterTotalData={},Object(n["e"])(this.url.detailListSum,this.detailParams).then((function(t){t.success&&(e.detailFooterTotalData=t.result||{}),e.$refs.detailTable&&e.$refs.detailTable.updateFooter()}))):(this.footerTotalData={},Object(n["e"])(this.url.listSum,this.queryParam).then((function(t){t.success&&(e.footerTotalData=t.result||{}),e.$refs.table&&e.$refs.table.updateFooter()})))},handleExportXls:function(){var e=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(t){var a,r="";t.forEach((function(e){e.includes("action")||(r=r+e+",")})),r=r.slice(0,-1);var i=e.getSuperQueryItemByRef({refName:"mesQuery"});a="/base/rRegionInfo/downloadPublicBenefitsExpList?pageType="+e.pageType+"&queryType=and&queryItems="+i+"&exportXlsColumn="+r,Object(n["c"])(a,{},{isDownload:!0,fileName:"公共收益统计"+(new Date).getTime()+".xls"})}))}}},g=p,y=(a("a60a"),a("3c459"),a("2877")),b=Object(y["a"])(g,r,i,!1,null,"37348174",null);t["default"]=b.exports},c881:function(e,t,a){},c930:function(e,t,a){},cb36:function(e,t,a){"use strict";a("79e9")},cddc:function(e,t,a){},ce74:function(e,t,a){"use strict";a("a49d")},d337:function(e,t,a){},d398:function(e,t,a){},d427:function(e,t,a){},d6fa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-modal",{attrs:{height:"80vh",title:"业务明细","body-style":{padding:0},"z-index":999,width:"1140px","show-footer":!0},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{on:{click:e.handleCancel}},[e._v("关闭")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"modalBody"},[a("div",{staticClass:"spanDiv"},[a("span",[e._v("承办银行："+e._s(this.queryParam.bankName))]),a("span",[e._v("记账日期："+e._s(this.queryParam.trdDate))]),a("span",[e._v("业务编号："+e._s(this.queryParam.busiNo))])]),a("div",{staticClass:"tableDiv"},[e.visible?a("v-table",{ref:"table",attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,"table-height":"auto",tableColumn:e.columns,"if-init-query":!1,data:e.loadData},scopedSlots:e._u([{key:"houseAddress",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(r))])]}}],null,!1,484682188)}):e._e()],1)]),a("HouseOwnerInfoModal",{ref:"infoModal",attrs:{isDetail:!0}})],1)},i=[],n=a("0fea"),o=a("c695"),l=a.n(o),s=a("3ed7"),u={name:"BusiDetailInfoModal",components:{HouseOwnerInfoModal:function(){return Promise.resolve().then(a.bind(null,"c752"))}},data:function(){var e=this;return{queryParam:{},loadData:function(t){return Object(n["e"])(e.url.queryBusiDetail,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},visible:!1,url:{queryBusiDetail:"deposit/firstDeposit/queryBusiDetail"},columns:[{field:"houseAddress",title:"房屋位置",align:"center",slot:!0},{field:"accCode",title:"房屋账号",align:"center"},{field:"struArea",title:"建筑面积(m²)",align:"center",formatter:"area"},{field:"ownerName",title:"业主姓名",align:"center"},{field:"amount",title:"交易金额(元)",align:"right",formatter:"amount"}]}},methods:{footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:3}:["houseAddress","accCode"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},footerMethod:function(e){var t=e.columns,a=e.data,r=[t.map((function(e,t){return 0===t?"合计：":["amount","struArea"].includes(e.property)?Object(s["g"])(l.a.sum(a,e.property)):null}))];return r},handleDetail:function(e){e.id=e.houseId,this.$refs.infoModal.initData(e)},initData:function(e){var t=this;this.queryParam=e,"1"!==e.baseType?this.columns=[{field:"houseAddress",title:"账户名称",align:"center"},{field:"accCode",title:"资金账号",align:"center"},{field:"baseType_dictText",title:"账户类型",align:"center"},{field:"amount",title:"交易金额(元)",align:"right",formatter:"amount"}]:this.columns=[{field:"houseAddress",title:"房屋位置",align:"center",slot:!0},{field:"accCode",title:"房屋账号",align:"center"},{field:"struArea",title:"建筑面积(m²)",align:"center",formatter:"area"},{field:"ownerName",title:"业主姓名",align:"center"},{field:"amount",title:"交易金额(元)",align:"right",formatter:"amount"}],this.visible=!0,this.$nextTick((function(){t.$refs.table.refresh()}))},handleCancel:function(){this.visible=!1}}},c=u,d=(a("6927"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"3513e590",null);t["default"]=m.exports},dbe5:function(e,t,a){},e0c0:function(e,t,a){"use strict";a("5111")},e1bc:function(e,t,a){},e1cf:function(e,t,a){},e1fc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{"z-index":e.zIndex,title:e.title,"destroy-on-close":!0,width:"80vw",height:"80vh",footer:"",loading:e.modalLoading},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("div",{ref:"modalBody",staticClass:"modelContrain"},[a("m-e-s-super-query",{ref:"mesQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList",isInitQuery:!1},on:{ok:e.handleSuperQuery,reset:e.searchReset},scopedSlots:e._u([{key:"bldId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择自然幢",disabled:e.isDisabled},on:{select:function(t){return e.selectSearch("bldId",t)},change:e.changeBld},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.bldInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id,"data-prop":t},on:{click:e.emptyCell}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"cellId",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},on:{select:function(t){return e.selectSearch("cellId",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},e._l(e.cellInfoOptions,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])])})),1)]}},{key:"state",fn:function(t){var r=t.row;return[a("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择状态"},on:{select:function(t){return e.selectSearch("state",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}},[a("a-select-option",{attrs:{value:"9"}},[e._v("新建")]),a("a-select-option",{attrs:{value:"1"}},[e._v("未交")]),a("a-select-option",{attrs:{value:"0"}},[e._v("已交")]),a("a-select-option",{attrs:{value:"3"}},[e._v("待全额退款")]),a("a-select-option",{attrs:{value:"4"}},[e._v("待销户")]),a("a-select-option",{attrs:{value:"5"}},[e._v("已注销")]),a("a-select-option",{attrs:{value:"7"}},[e._v("待资金转账")])],1)]}},{key:"address",fn:function(t){var r=t.row;return[a("a-input",{attrs:{placeholder:"请输入房屋位置"},on:{change:function(t){return e.inputAssign("address",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"psnName",fn:function(t){var r=t.row;return[a("a-input",{attrs:{placeholder:"请输入业主姓名"},on:{change:function(t){return e.inputAssign("psnName",t)}},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}},{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{loading:e.btnLoading,type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls()}}},[e._v("导出")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",ifInitQuery:!1,"show-pagination":!0,stripe:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,expand:!1,data:e.loadData,"show-loading":!1,loading:e.modalLoading,tableColumn:e.columns,"header-align":"center"},on:{"update:loading":function(t){e.modalLoading=t}},scopedSlots:e._u([{key:"state",fn:function(t){t.text;var r=t.row;return["9"===r.state?a("span",[e._v("新建")]):e._e(),"1"===r.state?a("span",[e._v("未交")]):e._e(),"0"===r.state?a("span",[e._v("已交")]):e._e(),"3"===r.state?a("span",[e._v("待全额退款")]):e._e(),"4"===r.state?a("span",[e._v("待销户")]):e._e(),"5"===r.state?a("span",[e._v("已注销")]):e._e(),"7"===r.state?a("span",[e._v("待资金转账")]):e._e()]}},{key:"address",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(i)}}},[e._v(e._s(r))])]}}])})],1)],1),a("house-owner-info-modal",{ref:"houseOwnerInfoModal",attrs:{index:e.zIndex+1}})],1)],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("6fa9"),s=a("9e62"),u=a("0fea"),c=a("3ed7"),d=a("c695"),m=a.n(d),f=a("ca00"),h={name:"MoneyModal",components:{MESSuperQuery:l["default"],floorViews:s["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(a.bind(null,"c752"))}},props:{zIndex:{type:Number,default:1e3}},mixins:[o["a"],n["b"]],data:function(){var e=this;return{modalLoading:!1,current:"0",showVerify:!0,fileName:"MoneyModal",description:"统计分析的金额详情页面",modalFlag:!1,regionList:[],title:"房屋明细",isDisabled:!1,btnLoading:!1,queryParam:{bldId:void 0,cellId:void 0,state:void 0,psnName:void 0,address:void 0,id:null},queryObj:[{label:"自然幢",value:"bldId",type:"slot",slotName:"bldId"},{label:"单元",value:"cellId",type:"slot",slotName:"cellId"},{label:"状态",value:"state",type:"slot",slotName:"state"},{label:"房屋位置",value:"address",type:"slot",slotName:"address"},{label:"业主姓名",value:"psnName",type:"slot",slotName:"psnName"}],bldInfoOptions:[],cellInfoOptions:[],columns:[{headerAlign:"center",title:"房屋位置",align:"left",field:"address",minWidth:150,direction:"rtl",slot:!0},{headerAlign:"center",title:"房屋账号",align:"right",field:"accCode",width:155},{headerAlign:"center",title:"建筑面积（㎡）",align:"right",width:120,field:"struArea",formatter:"area"},{headerAlign:"center",title:"业主姓名",width:120,align:"center",field:"psnName"},{headerAlign:"center",title:"应交金额（元）",align:"right",width:120,field:"dueAmount",formatter:"amount"},{headerAlign:"center",title:"实交金额（元）",align:"right",width:120,field:"depAmount",formatter:"amount"},{headerAlign:"center",title:"账户余额（元）",align:"right",width:120,field:"balance",formatter:"amount"},{headerAlign:"center",title:"冻结金额（元）",align:"right",field:"balanceFrozen",width:120,formatter:"amount"},{headerAlign:"center",title:"账户状态",align:"center",field:"state",width:130,slot:!0}],dictOptions:{},summation:{struAreaSum:0,dueAmountSum:0,depAmountSum:0,balanceSum:0,balanceFrozenSum:0},loadData:function(t){return Object(u["e"])("/base/rRegionInfo/getHouseDetail",Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{hideAction:"true"},methods:{selectSearch:function(e,t){var a=this;this.$nextTick((function(){a.queryParam[e]=t,a.getSummation()}))},assign:function(e,t){var a=this;this.modalFlag=!0,this.queryParam.id=e,this.queryParam.bldId=t,this.getSummation(),t&&(this.isDisabled=!0,this.$set(this.queryObj[0],"val",t),this.changeBld(t)),this.$nextTick((function(){a.getBldInfo()}))},inputAssign:function(e,t){this.queryParam[e]=t.target.value},assignBank:function(e,t){var a=this;this.modalFlag=!0,this.queryParam.id=e,this.queryParam.bankCode=t,this.$nextTick((function(){a.$refs.table.refresh(),a.getBldInfo(),a.getSummation()}))},houseDetail:function(e){this.$refs.houseOwnerInfoModal.initData(e,!0,!0)},searchReset:function(){var e=this;this.isDisabled||(this.$set(this.queryParam,"bldId",void 0),this.cellInfoOptions=void 0),this.$set(this.queryParam,"cellId",void 0),this.$set(this.queryParam,"state",void 0),this.$set(this.queryParam,"address",void 0),this.$set(this.queryParam,"psnName",void 0),this.$nextTick((function(){e.summation={},e.$refs.table.updateFooter()}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(f["f"])(this.queryParam),this.getSummation())},getBldInfo:function(){var e=this,t=this.queryParam.id;Object(u["e"])("/base/rBldInfo/list",{pid:t,current:1,size:-1}).then((function(t){0!==t.result.records.length?e.bldInfoOptions=t.result.records:e.bldInfoOptions=void 0}))},changeBld:function(e,t){var a=this;this.$nextTick((function(){a.$refs.mesQuery.resetField("cellId")})),Object(u["e"])("/base/rCellInfo/list",{pid:e}).then((function(e){0!==e.result.records.length?a.cellInfoOptions=e.result.records:a.cellInfoOptions=void 0}))},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){return 0===t?"合计：":["struArea","dueAmount","depAmount","balance","balanceFrozen"].includes(e.property)?Object(c["g"])(m.a.sum(r,e.property)):null})),a.map((function(e,a){return 0===a?"总合计：":"struArea".includes(e.property)?Object(c["g"])(t.summation.struAreaSum):"dueAmount".includes(e.property)?Object(c["g"])(t.summation.dueAmountSum):"depAmount".includes(e.property)?Object(c["g"])(t.summation.depAmountSum):"balance".includes(e.property)?Object(c["g"])(t.summation.balanceSum):"balanceFrozen".includes(e.property)?Object(c["g"])(t.summation.balanceFrozenSum):null}))]},footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:3}:["address","accCode"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},handleExportXls:function(){var e=this,t=void 0===this.queryParam.id?"":this.queryParam.id,a=void 0===this.queryParam.bldId?"":this.queryParam.bldId,r=void 0===this.queryParam.cellId?"":this.queryParam.cellId,i=void 0===this.queryParam.state?"":this.queryParam.state,n=void 0===this.queryParam.psnName?"":this.queryParam.psnName,o=void 0===this.queryParam.address?"":this.queryParam.address,l=void 0===this.queryParam.bankCode?"":this.queryParam.bankCode,s="/base/rRegionInfo/downloadHouseDetail?id="+t+"&bldId="+a+"&cellId="+r+"&state="+i+"&psnName="+n+"&address="+o+"&bankCode="+l;this.btnLoading=!0,Object(u["d"])(s,"小区交存房屋明细"+(new Date).getTime()+".xls").finally((function(){e.btnLoading=!1}))},getSummation:function(){var e=this;this.$nextTick((function(){e.$refs.table&&(e.$refs.table.localLoading=!0,e.queryPage(),e.summation={},e.$refs.table.updateFooter()),Object(u["e"])("/base/rRegionInfo/getHouseDetail",Object.assign({current:1,size:-1},e.queryParam)).then((function(t){e.summation.struAreaSum=0,e.summation.dueAmountSum=0,e.summation.depAmountSum=0,e.summation.balanceSum=0,e.summation.balanceFrozenSum=0,t.result.records.forEach((function(t){e.summation.struAreaSum=Object(c["c"])(e.summation.struAreaSum,t.struArea),e.summation.dueAmountSum=Object(c["c"])(e.summation.dueAmountSum,t.dueAmount),e.summation.depAmountSum=Object(c["c"])(e.summation.depAmountSum,t.depAmount),e.summation.balanceSum=Object(c["c"])(e.summation.balanceSum,t.balance),e.summation.balanceFrozenSum=Object(c["c"])(e.summation.balanceFrozenSum,t.balanceFrozen)})),e.summation.struAreaSum=e.summation.struAreaSum,e.summation.dueAmountSum=e.summation.dueAmountSum,e.summation.depAmountSum=e.summation.depAmountSum,e.summation.balanceSum=e.summation.balanceSum,e.summation.balanceFrozenSum=e.summation.balanceFrozenSum,e.$refs.table.updateFooter()})).catch((function(){e.$refs.table.localLoading=!1}))}))},emptyCell:function(){this.$set(this.queryParam,"cellId",void 0)}}},p=h,g=(a("4660"),a("87df"),a("2877")),y=Object(g["a"])(p,r,i,!1,null,"7450f2ee",null);t["default"]=y.exports},e2df:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("a-card",{staticClass:"top mainCard"},[a("div",{staticClass:"des"},[a("div",{staticClass:"des_box"},[a("div",{staticClass:"title"},[a("h3",[e._v("住建部报表")])]),a("div",{staticClass:"top_right"},[a("p",{staticStyle:{margin:"4px 0 0 0"}},[e._v("主管单位:")]),e._v(" \n          "),a("div",{staticClass:"current_menu_sysOrg"},[a("a-tree-select",{staticStyle:{width:"200px"},attrs:{treeData:e.treeDataList},on:{change:e.chooseTreeData},model:{value:e.sysOrgCode,callback:function(t){e.sysOrgCode=t},expression:"sysOrgCode"}})],1),a("div",{staticClass:"current_menu"},[a("p",[e._v("当前报表:")]),e._v(" \n            "),a("j-d-dict-select-tag",{attrs:{dictCode:"housing_ministry",placeholder:"请选择报表类型"},on:{change:e.dictChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.iframeLoading,expression:"iframeLoading"}],staticClass:"des_iframe",attrs:{"element-loading-text":"报表加载中..."}},[e.isUrl?a("iframe",{ref:"iframe",attrs:{src:e.formUrl}}):e._e()])])])],1)},i=[],n=a("d9a4"),o=a("0fea"),l=a("eccd"),s=a("4ec3"),u=a("2b0e"),c=a("9fb0"),d={name:"HousingMinistryUReport",props:{},data:function(){return{isUrl:!1,formUrl:"",type:"请选择",url:{queryReport:"/ureport2/ureport2Config/queryReport",sysOrgCodeList:"/tenant/sysTenantInfo/tenantListByCode"},treeDataList:[],sysOrgCode:u["default"].ls.get(c["C"]),iframeLoading:!1}},components:{JDDictSelectTag:l["default"]},created:function(){Object(n["a"])("banInitQuery")||this.init(null),this.initZone()},methods:{init:function(e){var t=this;if(this.formUrl="",this.isUrl=!1,!e){var a=Object(s["C"])("housing_ministry");a&&a.length>0&&(this.type=a[0].value,e=this.type)}this.iframeLoading=!0,Object(o["e"])(this.url.queryReport,{formType:e}).then((function(e){if(e.success&&e.result&&e.result.formTypeName){var a=e.result.formTypeName,r=u["default"].ls.get("SOURCE_NAME");r&&""!==r||(r="master");var i=null===t.sysOrgCode?u["default"].ls.get("Login_Userinfo").sysOrgCode:t.sysOrgCode,n=i.substring(0,2),o=i.substring(2,4),l=i.substring(4,6),s=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+r+"db:"+a+"&_t="+e.result.reportHeaderButton+"&_n=凭证打印&sysCode="+i+"&province="+n+"&city="+o+"&district="+l;t.isUrl=!0,t.$nextTick((function(){var e=t.$refs.iframe;e.onload=function(){t.iframeLoading=!1},e.onfailed=function(){t.iframeLoading=!1},t.formUrl=s}))}else t.iframeLoading=!1})).catch((function(){t.iframeLoading=!1}))},dictChange:function(){this.init(this.type)},chooseTreeData:function(e){this.sysOrgCode=e,this.init(this.type,this.sysOrgCode)},initZone:function(){var e=this;Object(o["e"])(this.url.sysOrgCodeList).then((function(t){t.success&&(e.treeDataList=t.result)}))}}},m=d,f=(a("6031"),a("2877")),h=Object(f["a"])(m,r,i,!1,null,"c9c10b18",null);t["default"]=h.exports},e2ed:function(e,t,a){},e5d5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{title:e.title,width:"1200px",height:"80vh","destroy-on-close":!0,"z-index":e.zIndex,footer:""},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",ifInitQuery:!1,"show-pagination":!0,footerMethod:e.footerMethod,"footer-span-method":e.footerSpanMethod,"footer-cell-style":e.footerCellStyle,stripe:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"header-align":"center"},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.houseDetail(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 房屋明细")],1)]}}])})],1),a("house-detail-modal",{ref:"houseDepositModal",attrs:{"z-index":(e.zIndex||1300)+1}})],1)],1)},i=[],n=(a("6eb7"),a("ac0d")),o=a("0a5e"),l=a("6fa9"),s=a("9e62"),u=a("c1df"),c=a.n(u),d=a("0fea"),m=a("e1fc"),f=a("3ed7"),h=a("c695"),p=a.n(h),g={name:"MoneyModal",components:{MESSuperQuery:l["default"],floorViews:s["default"],HouseDetailModal:m["default"]},props:{zIndex:{type:Number,default:void 0}},mixins:[o["a"],n["b"]],data:function(){var e=this;return{current:"0",showVerify:!0,fileName:"MoneyModal",description:"统计分析的金额详情页面",modalFlag:!1,regionList:[],title:"自然幢明细",columns:[{headerAlign:"center",title:"自然幢名称",align:"center",field:"bldName",width:95},{headerAlign:"center",title:"备案日期",align:"center",field:"recDate",width:105,formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}},{title:"交存户数",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交户数(户)",align:"center",field:"paidHouseNums",width:105,formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"未交户数(户)",align:"center",field:"unPaidHouseNums",width:105,formatter:function(e){var t=e.cellValue,a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(t).toLocaleString("zh-CN",a)}},{headerAlign:"center",title:"交存率(%)",align:"center",field:"houseNumsRate",width:95,formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存面积",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交面积(m²)",align:"center",field:"paidArea",width:110,formatter:"amount"},{headerAlign:"center",title:"未交面积(m²)",align:"center",field:"unPaidArea",width:110,formatter:"amount"},{headerAlign:"center",title:"交存率(%)",align:"center",field:"areaRate",width:95,formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"交存金额",align:"center",headerAlign:"center",children:[{headerAlign:"center",title:"已交金额(元)",align:"center",field:"paidMoney",width:105,formatter:"amount"},{headerAlign:"center",title:"未交金额(元)",align:"center",field:"unPaidMoney",width:105,formatter:"amount"},{headerAlign:"center",title:"交存率(%)",align:"center",field:"moneyRate",width:95,formatter:function(e){var t=e.cellValue;return t.replace("%","")}}]},{title:"操作",field:"action",align:"center",width:150,fixed:"right",slot:!0}],dictOptions:{},parentParam:{id:null},summation:{nextNodeNumSum:0,paidHouseNumsSum:0,unPaidHouseNumsSum:0,paidAreaSum:0,unPaidAreaSum:0,paidMoneySum:0,unPaidMoneySum:0},loadData:function(t){return Object(d["e"])("/base/rRegionInfo/getRegionDetail",Object.assign(t,e.parentParam)).then((function(e){return e.result}))}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},provide:{hideAction:"true"},methods:{assign:function(e){this.modalFlag=!0,this.parentParam.id=e,this.getSummation()},houseDetail:function(e){this.$refs.houseDepositModal.searchReset(),this.$refs.houseDepositModal.assign(e.id,e.bldId)},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,t){if(0===t)return"合计：";if(["nextNodeNum","paidHouseNums","unPaidHouseNums"].includes(e.property)){var a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};return Number(p.a.sum(r,e.property)).toLocaleString("zh-CN",a)}return["paidArea","unPaidArea","paidMoney","unPaidMoney"].includes(e.property)?Object(f["g"])(p.a.sum(r,e.property)):null})),a.map((function(e,a){return 0===a?"总合计：":"nextNodeNum".includes(e.property)?t.summation.nextNodeNumSum:"paidHouseNums".includes(e.property)?t.summation.paidHouseNumsSum:"unPaidHouseNums".includes(e.property)?t.summation.unPaidHouseNumsSum:"paidArea".includes(e.property)?t.summation.paidAreaSum:"unPaidArea".includes(e.property)?t.summation.unPaidAreaSum:"paidMoney".includes(e.property)?t.summation.paidMoneySum:"unPaidMoney".includes(e.property)?t.summation.unPaidMoneySum:null}))]},footerSpanMethod:function(e){return"seq"===e.column.type?{rowspan:1,colspan:3}:["bldName","recDate"].includes(e.column.property)?{rowspan:1,colspan:0}:void 0},footerCellStyle:function(e){if("seq"===e.column.type)return"text-align: right"},getSummation:function(){var e=this;this.$nextTick((function(){e.$refs.table&&(e.$refs.table.localLoading=!0)})),Object(d["e"])("/base/rRegionInfo/getRegionDetail",Object.assign({current:1,size:-1},this.parentParam)).then((function(t){e.summation.nextNodeNumSum=0,e.summation.paidHouseNumsSum=0,e.summation.unPaidHouseNumsSum=0,e.summation.paidAreaSum=0,e.summation.unPaidAreaSum=0,e.summation.paidMoneySum=0,e.summation.unPaidMoneySum=0,t.result.records.forEach((function(t){e.summation.nextNodeNumSum+=Number(t.nextNodeNum),e.summation.paidHouseNumsSum+=Number(t.paidHouseNums),e.summation.unPaidHouseNumsSum+=Number(t.unPaidHouseNums),e.summation.paidAreaSum+=Number(t.paidArea),e.summation.unPaidAreaSum+=Number(t.unPaidArea),e.summation.paidMoneySum+=Number(t.paidMoney),e.summation.unPaidMoneySum+=Number(t.unPaidMoney)}));var a={style:"decimal",currency:"CNY",minimumFractionDigits:0,maximumFractionDigits:0};e.summation.nextNodeNumSum=Number(e.summation.nextNodeNumSum).toLocaleString("zh-CN",a),e.summation.paidHouseNumsSum=Number(e.summation.paidHouseNumsSum).toLocaleString("zh-CN",a),e.summation.unPaidHouseNumsSum=Number(e.summation.unPaidHouseNumsSum).toLocaleString("zh-CN",a),e.summation.paidAreaSum=Object(f["g"])(e.summation.paidAreaSum),e.summation.unPaidAreaSum=Object(f["g"])(e.summation.unPaidAreaSum),e.summation.paidMoneySum=Object(f["g"])(e.summation.paidMoneySum),e.summation.unPaidMoneySum=Object(f["g"])(e.summation.unPaidMoneySum),e.queryPage()})).catch((function(){e.$nextTick((function(){e.$refs.table&&(e.$refs.table.localLoading=!1)}))}))}}},y=g,b=(a("6363"),a("8cfc"),a("2877")),v=Object(b["a"])(y,r,i,!1,null,"1855e041",null);t["default"]=v.exports},e803:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.currentQueryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"extra",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[1===e.modalFlag?a("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0}])}),a("div",[a("v-table",{key:e.tableKey,ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,expand:!1,data:e.loadData,tableColumn:e.tableColumn},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.regionHangInfo(r)}}},[e._v(e._s(e.IncomeExpenseDetails))])]}}])}),a("a-modal",{attrs:{title:e.title,width:1200,visible:e.houseViewFlag,switchFullscreen:"",cancelText:"关闭"},on:{cancel:e.handleCancel}},[a("span",{staticStyle:{display:"flex","align-items":"center"}},[a("a-input",{staticStyle:{width:"400px","margin-right":"15px"},attrs:{placeholder:"通过项目名称查询"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),a("a-button",{attrs:{icon:"search",type:"primary"},on:{click:e.fetchData}},[e._v("查询")])],1),a("a-table",{ref:"table",attrs:{columns:e.houseColumns,"data-source":e.dataSource,rowKey:"progressId",pagination:!1}}),a("a-pagination",{attrs:{total:e.pagination.total,showTotal:e.pagination.showTotal,pageSize:e.pagination.pageSize,pageSizeOptions:e.pagination.pageSizeOptions,showSizeChanger:"",showQuickJumper:""},on:{"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)},change:e.fetchData,showSizeChange:e.fetchData},model:{value:e.pagination.current,callback:function(t){e.$set(e.pagination,"current",t)},expression:"pagination.current"}})],1)],1)],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u={name:"BServiceProjHangList",mixins:[l["a"],o["b"]],components:{MESSuperQuery:s["default"]},data:function(){var e=this;return{fileName:"BServiceProjHangList",description:"b_service_proj_hang管理页面",modalFlag:0,IncomeExpenseDetails:null,currentQueryObj:{},clearFlag:!1,regionCode:"",tableKey:0,title:"房屋挂账明细",houseId:"",houseViewFlag:!1,dataSource:[],searchText:"",queryObj:[{label:"小区名称",value:"region.name",type:"input",queryType:"like"},{label:"挂账户账号",value:"bsph.hangAccCode",type:"input",queryType:"like"}],queryObjRegion:[{label:"房屋地址",value:"house.address",type:"input",queryType:"like"}],columns:[{title:"小区名称",align:"center",field:"regionName"},{title:"挂账户账号",align:"center",field:"hangAccCode",width:250},{title:"总挂账金额",align:"right",field:"amount",width:150},{title:"挂账房屋数",align:"right",field:"houseNum",width:150},{hidden:!1,title:"操作",field:"action",align:"center",fixed:"right",width:217,slot:!0}],regionColumns:[{title:"房屋地址",align:"left",field:"address"},{title:"房屋账户",align:"center",field:"accCode",width:250},{title:"挂账金额",align:"right",field:"amount",width:150},{title:"挂账次数",align:"right",field:"houseNum",width:150},{hidden:!1,title:"操作",field:"action",align:"center",fixed:"right",width:217,slot:!0}],houseColumns:[{title:"项目名称",align:"center",dataIndex:"projName"},{title:"进度描述",align:"center",dataIndex:"progressInfo"},{title:"挂账金额",align:"right",dataIndex:"amount",width:217},{title:"挂账时间",align:"center",dataIndex:"hangOnDate",width:217}],loadData:function(t){return Object(n["e"])(e.tableUrl(),Object.assign(t,e.queryParam,{regionCode:e.regionCode})).then((function(e){return e.result}))},pagination:{total:0,pageSize:10,pageSizeOptions:["10","20","50"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},current:1},url:{list:"/serviceProjHang/bServiceProjHang/list",getHouseByRegionCode:"/serviceProjHang/bServiceProjHang/getHouseByRegionCode",getHangByHouseId:"/serviceProjHang/bServiceProjHang/getHangByHouseId"},dictOptions:{}}},created:function(){this.getQueryObj()},computed:{tableColumn:function(){return 0===this.tableKey?this.columns:1===this.tableKey?this.regionColumns:void 0}},methods:{initDictConfig:function(){},handleCancel:function(){this.houseViewFlag=!1,this.searchText="",this.close()},back:function(){this.modalFlag=0,this.tableKey=0,this.regionCode="",this.clearFlag=!0,this.getQueryObj()},getQueryObj:function(){var e={0:{detail:"小区挂账明细",queryObj:this.queryObj},1:{detail:"房屋挂账明细",queryObj:this.queryObjRegion}},t=e[this.modalFlag],a=t.detail,r=t.queryObj;this.IncomeExpenseDetails=a,this.clearFlag&&(this.queryParam={},this.clearFlag=!1);var i=JSON.parse(JSON.stringify(r));this.$set(this,"currentQueryObj",i)},regionHangInfo:function(e){1===this.modalFlag?(this.houseViewFlag=!0,this.houseId=e.houseId,this.fetchData()):(this.modalFlag=1,this.tableKey=1,this.regionCode=e.regionCode,this.clearFlag=!0,this.getQueryObj())},fetchData:function(){var e=this;Object(n["e"])(this.url.getHangByHouseId,{pageNo:this.pagination.current,pageSize:this.pagination.pageSize,projName:this.searchText,houseId:this.houseId}).then((function(t){t.success&&(e.dataSource=t.result.records,e.dataSource&&(e.pagination.total=t.result.total))}))},tableUrl:function(){return 0===this.modalFlag?this.url.list:1===this.modalFlag?this.url.getHouseByRegionCode:void 0}}},c=u,d=(a("24d7"),a("2877")),m=Object(d["a"])(c,r,i,!1,null,"a6e1d70c",null);t["default"]=m.exports},ec21:function(e,t,a){},eca1:function(e,t,a){"use strict";a("b2d0")},ed53:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",display:"flex",flexDirection:"column"}}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticStyle:{flex:"1",height:"0"}},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,data:e.loadData,checkbox:!1,"table-height":"auto","page-size":50,tableColumn:e.columns,selectChangeEvent:e.selectChangeEvent,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"select-all-event":e.selectAllEvent,resizable:"","tree-config":{children:"children"},ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),customColumns:{name:"ProcessSuperVisionList"}},scopedSlots:e._u([{key:"code",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(i,{page:"ProcessSuperVisionList"})}}},[e._v("【"+e._s(r)+"】"+e._s(i.describe))])]}},{key:"baseType",fn:function(t){var r=t.text;return["01"==r?a("span",[e._v(" 一般")]):e._e(),"02"==r?a("span",[e._v("应急")]):e._e(),"03"==r?a("span",[e._v("计划")]):e._e(),"04"==r?a("span",[e._v("保险")]):e._e()]}},{key:"state",fn:function(e){var t=e.text;return[a("ser-pro-model-state-comp",{attrs:{state:t}})]}},{key:"action",fn:function(t){var r=t.row;return[a("get-table-action-buttons",[e.checkShow(r)&&e.WhetherThePermissionPasses("supervice:third,supervice:all")?a("a",{on:{click:function(t){return e.handleSurvsion(r)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 现场勘察")],1):e._e(),"04"!=r.baseType&&!r.pid&&e.WhetherThePermissionPasses("supervice:third,supervice:all")?a("a",{on:{click:function(t){return e.handleShowSurvsion(r)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 现场勘察记录")],1):e._e(),e.checkShow(r)&&e.WhetherThePermissionPasses("supervice:third,supervice:all")?a("a",{on:{click:function(t){return e.handleDownload(r)}}},[a("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1):e._e(),"1"!=r.state&&"7"!=r.state||"0"!=r.completionFlag||!e.tenantid?e._e():a("a",{on:{click:function(t){return e.handleProCompleted(r)}}},[a("a-icon",{attrs:{type:"setting"}}),e._v(" 项目办结")],1)])]}}])})],1),a("field-site-upload",{ref:"fieldSiteUpload",attrs:{disabled:!1}}),a("ser-pro-complete-modal",{ref:"spcm",on:{ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("0a5e")),o=a("6fa9"),l=a("d2d8"),s=a("be8c"),u=a("2d4c"),c=a("cb3d"),d=a("fdce"),m=a("cf9e"),f=(a("da39"),{name:"ProcessSuperVisionList",mixins:[n["a"],l["ProcessSuperVisionList"]],components:{SerProModelStateComp:m["default"],JDictRegionListSelect:d["default"],FieldSiteUpload:s["default"],MESSuperQuery:o["default"],GetTableActionButtons:u["default"],SerProCompleteModal:c["default"]},data:function(){return{fileName:"ProcessSuperVisionList",description:"ProcessSuperVisionList维修项目监督列表"}}}),h=f,p=(a("0a9e"),a("2877")),g=Object(p["a"])(h,r,i,!1,null,"3f329d72",null);t["default"]=g.exports},ef40:function(e,t,a){"use strict";a("e2ed")},eff5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"ant-modal-cust-warp",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.emptySearch},scopedSlots:e._u([{key:"selectState",fn:function(t){t.row;return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目状态"},model:{value:e.serviceProj.state,callback:function(t){e.$set(e.serviceProj,"state",t)},expression:"serviceProj.state"}},e._l(e.stateOptions,(function(t){return a("a-select-option",{key:t.state},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})),1)]}},{key:"regionCode",fn:function(t){var r=t.row;return[a("j-dict-region-list-select",{attrs:{placeholder:"请选择小区信息"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"vTableDiv"},[a("v-table",{ref:"table",attrs:{checkbox:!1,data:e.loadData,expand:!1,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),"row-config":{height:120},"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,stripe:!0,tableColumn:e.porjColumns,toolbar:!0,bordered:"","header-align":"center","table-height":"auto"},scopedSlots:e._u([{key:"describe",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.goBusiReqPage(i)}}},[e._v("【"+e._s(i.code)+"】"+e._s(r))])]}},{key:"state_dictText",fn:function(e){var t=e.row;return[a("ser-pro-model-state-comp",{attrs:{state:t.state}})]}},{key:"action",fn:function(t){t.row;return[a("get-table-action-buttons",[a("a",{on:{click:e.openLimitVerifyModal}},[e._v("额度验证")])])]}}])})],1),a("limit-verify-modal")],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("6fa9"),l=a("0a5e"),s=a("ac0d"),u=a("da39"),c=a("fdce"),d=a("2d4c"),m=a("3ad7"),f=a("ecd4"),h=a("cf9e"),p=a("0c8a"),g=a("6375"),y={name:"LimitVerifyList",mixins:[l["a"],s["b"],u["FooterMethod"]],components:{GetTableActionButtons:d["default"],JDictRegionListSelect:c["default"],SerProModelStateComp:h["default"],AppliedProgressList:m["default"],FundProgressModal:g["default"],MESSuperQuery:o["default"],LimitVerifyModal:f["default"]},data:function(){var e=this;return{fileName:"PendingProgressList",description:"拨付申请页面",queryObj:[{type:"slot",value:"rr.code",label:"小区名称",slotName:"regionCode"},{type:"input",value:"describe",label:"维修项目描述",queryType:"like"},{type:"input",value:"bsp.code",label:"项目编码",queryType:"like"},{type:"date",value:"reqDate",maxDate:"reqDate",label:"申报开始日期",queryType:"ge"},{type:"date",value:"reqDate",minDate:"reqDate",label:"申报结束日期",queryType:"le"},{type:"slot",value:"state",label:"项目状态",slotName:"selectState"}],porjColumns:[{title:"维修项目描述",align:"left",headerAlign:"left",field:"describe",slot:!0},{title:"小区名称",align:"left",headerAlign:"left",field:"communityName"},{title:"预算总额 (元)",align:"right",headerAlign:"right",field:"budgetCost",formatter:"amount",width:110},{title:"申报日期",align:"center",field:"reqDate",format:"yyyy-MM-dd",width:100},{title:"项目类型",align:"center",headerAlign:"center",field:"baseType_dictText",width:80},{title:"项目状态",align:"center",field:"state_dictText",width:90,slot:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:230,slot:!0}],unitAreaMode:"1",projId:"",stateOptions:[{name:"已部分拨付",state:1},{name:"已验收项目",state:2},{name:"已过质保期",state:3}],serviceProj:{state:void 0},loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam,e.serviceProj)).then((function(e){return e.result}))},url:{list:"/use/fundProgress/queryQuotaExamineList",queryById:"/act/model/queryById"},dictOptions:{},applyState:"1"}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{openLimitVerifyModal:function(){},emptySearch:function(){this.serviceProj.state=void 0},goBusiReqPage:function(e){Object(p["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},unitAreaModeChange:function(e){var t=this,a=e.target.value;setTimeout((function(){"1"===a?(t.queryParam.id="",t.queryPage()):(t.queryParam.id=1,t.queryPage())}),300)},selectState:function(e){this.serviceProj.state=e.state,this.$forceUpdate()},oneApply:function(e){Object(p["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},marginDown:function(e){Object(p["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},footerSpanMethod:function(e){return Object(l["c"])({scope:e,spanCol:["describe","communityName"],isSpanSeq:!0})},footerMethod:function(e){var t=e.columns,a=e.data;return Object(l["b"])({scope:{columns:t,data:a},spanCol:["describe","communityName"],computedCol:["budgetCost"],isSpanSeq:!0})}}},b=y,v=(a("016f"),a("2877")),S=Object(v["a"])(b,r,i,!1,null,"84124ea0",null);t["default"]=S.exports},f1d7:function(e,t,a){"use strict";a("67fa")},f2d8:function(e,t,a){},f3df:function(e,t,a){},f67a:function(e,t,a){},f6b1:function(e,t,a){"use strict";a("12f9")},fce5:function(e,t,a){"use strict";a("cddc")},fdda:function(e,t,a){"use strict";a("5e62")},fe86:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"height-100",attrs:{bordered:!1,"body-style":{height:"100%"}}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery}}),a("div",{staticClass:"v-table-height"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,reload:e.queryPage,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto","if-init-query":!e.hasEnablePageConfigByKey("banInitQuery")},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.handleAdd}},[e._v("新建")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.checkDeleteBatch}},[e._v(" 批量删除")]),a("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("录入数据导出")}}},[e._v("导出")])],1)]},proxy:!0},{key:"coverNo",fn:function(t){var r=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(r))])]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.checkDelete(r.id)}}},[a("a",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])]}}])})],1),a("data-enter-model",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},i=[],n=(a("6eb7"),a("0fea")),o=a("ac0d"),l=a("0a5e"),s=a("6fa9"),u=a("d2c7"),c=a("c1df"),d=a.n(c),m=a("eccd"),f={name:"CoverList",mixins:[l["a"],o["b"]],components:{DataEnterModel:u["default"],MESSuperQuery:s["default"],JDDictSelectTag:m["default"]},data:function(){var e=this;return{fileName:"DataEnterList",description:"管理页面",queryObj:[{label:"旗县名称",value:"ade.countyCode",type:"tree",options:[]},{label:"统计开始日期",value:"ade.statisticsDate",type:"date",queryType:"ge"},{label:"统计结束日期",value:"ade.statisticsDate",type:"date",queryType:"le"}],columns:[{title:"旗县名称",align:"center",field:"countyName",headerAlign:"center",width:120},{title:"统计日期",align:"center",field:"statisticsDate",customRender:function(e,t,a){if(""!==e)return d()(e).format("YYYY-MM-DD")},sorter:!0,width:100},{title:"缴存金额",align:"right",headerAlign:"center",field:"depositAmount",formatter:function(e){var t=e.cellValue;return t?t.toFixed(2):"0.00"},width:100},{title:"本年度缴存金额",align:"right",headerAlign:"center",field:"depositAnnualAmount",formatter:function(e){var t=e.cellValue;return t?t.toFixed(2):"0.00"},width:120},{title:"支用金额",align:"right",headerAlign:"center",field:"disburseAmount",formatter:function(e){var t=e.cellValue;return t?t.toFixed(2):"0.00"},width:100},{title:"本年度支用金额",align:"right",headerAlign:"center",field:"disburseAnnualAmount",formatter:function(e){var t=e.cellValue;return t?t.toFixed(2):"0.00"},width:120},{title:"资金存量金额",align:"right",headerAlign:"center",field:"stockAmount",formatter:function(e){var t=e.cellValue;return t?t.toFixed(2):"0.00"},width:120},{title:"归集小区数量",align:"right",headerAlign:"center",field:"imputationRegionCount",width:120},{title:"创建时间",align:"center",field:"createTime",customRender:function(e,t,a){if(""!==e)return d()(e).format("YYYY-MM-DD")},sorter:!0,width:100},{title:"操作",field:"action",align:"center",fixed:"right",width:147,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/statistics/dataEnter/list",delete:"/statistics/dataEnter/delete",deleteBatch:"/statistics/dataEnter/deleteBatch",exportXlsUrl:"/statistics/dataEnter/exportDataEnterXls"},dictOptions:{}}},created:function(){this.queryObj.map((function(e){"ade.countyCode"===e.value&&Object(n["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){t.success&&(e.options=t.result,1!=t.result.length||null!=t.result[0].children&&0!=t.result[0].children.length||(e.val=t.result[0].key))}))}))},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{checkDelete:function(e){this.handleDelete(e)},handleExport:function(e){var t=this;Object(n["b"])(this.url.exportXlsUrl+"?exportXlsColumn=",this.queryParam).then((function(a){if(a)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([a],{type:"application/vnd.ms-excel"}),e+".xls");else{var r=window.URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),i=document.createElement("a");i.style.display="none",i.href=r,i.setAttribute("download",e+".xls"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}else t.$message.warning("文件下载失败")}))},checkDeleteBatch:function(){this.batchDel()},handleEdit:function(e){this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑",this.$refs.modalForm.disableSubmit=!1},handleAdd:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="新增",this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.isDisabled=!1},handleDetail:function(e){this.$refs.modalForm.edit(e),this.$refs.modalForm.title="详情",this.$refs.modalForm.disableSubmit=!0}}},h=f,p=(a("7b95"),a("2877")),g=Object(p["a"])(h,r,i,!1,null,"eff92a6a",null);t["default"]=g.exports}}]);