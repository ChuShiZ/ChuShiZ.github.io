(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~76ebc7dc"],{"0c8a":function(e,t,r){"use strict";r.r(t),r.d(t,"goBusiPage",(function(){return y})),r.d(t,"goBusiPagePlan",(function(){return m})),r.d(t,"getBaseTypeText",(function(){return g}));var n=r("0fea"),i=r("a18c"),o=r("bc3a"),a=r.n(o),s=r("2b0e");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=h(e,"string");return"symbol"==l(t)?t:t+""}function h(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var p={url:{queryById:"/act/model/queryById"}};function y(e,t,r,o,l){var u,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};!l&&e?l=-1!==e.indexOf("b_busi_req.insurance_process")?"04":null:l||e||(l="05"),u="04"!=l?"process_key":"process_key_insure",Object(n["e"])("/sys/dDict/getParamByCode/".concat(u,"/").concat(o)).then((function(n){var u={params:{key:n.result},headers:{"X-Access-Token":s["default"].ls.get("Access-Token"),"tenant-id":o,sourceName:s["default"].ls.get("SOURCE_NAME"),redisIndex:s["default"].ls.get("REDIS_INDEX")}};a.a.get(window._CONFIG["domianURL"]+p.url.queryById,u).then((function(n){if(!n.data.success)return s["default"].prototype.$message.warning("申报流程异常，请稍后重试"),!1;var a=c({busiKey:e,id:t,baseType:l,modelId:n.data.result.id,sysOrgCode:o,showOnlyThis:d,temp:(new Date).getTime()},h);f&&(a.from=f),r&&(a.key=r),i["a"].push({path:"/components/page/projModal",query:a})}))}))}function m(e,t,r,o){var l="process_key_plan_start";Object(n["e"])("/sys/dDict/getParamByCode/".concat(l,"/").concat(o)).then((function(n){var l={params:{key:n.result},headers:{"X-Access-Token":s["default"].ls.get("Access-Token"),"tenant-id":o,sourceName:s["default"].ls.get("SOURCE_NAME"),redisIndex:s["default"].ls.get("REDIS_INDEX")}};a.a.get(window._CONFIG["domianURL"]+p.url.queryById,l).then((function(n){if(!n.data.success)return s["default"].prototype.$message.warning("申报流程异常，请稍后重试"),!1;var a={busiKey:e,id:t,modelId:n.data.result.id,sysOrgCode:o,planFlag:!0,temp:(new Date).getTime()};r&&(a.key=r),i["a"].push({path:"/components/page/projModal",query:a})}))}))}function g(e){switch(e){case"01":return"一般维修项目";case"02":return"应急维修项目";case"03":return"计划维修项目";case"04":return"保险维修项目";case"05":return"公房维修项目";default:return""}}},3911:function(e,t,r){},"4d42":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{staticClass:"mainCard",attrs:{"body-style":{display:"flex",flexDirection:"column"},bordered:!1}},[r("m-e-s-super-query",{key:e.defaultKey,ref:"mesSuperQuery",attrs:{type:"queryList",fieldList:e.queryObj,saveCode:e.fileName,defaultQuery:!e.hasEnablePageConfigByKey("banInitQuery")&&e.initQuery},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"baseType",fn:function(t){var n=t.row;return[r("j-d-dict-select-tag",{staticClass:"width-100",attrs:{dictCode:"project_type",placeholder:"请选择项目类型"},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}},{key:"regionCode",fn:function(t){var n=t.row;return[r("j-dict-region-list-select",{attrs:{placeholder:"请选择物业区域"},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}}])}),r("div",{staticClass:"tableDiv"},[r("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!1,checkbox:!e.isDetail&&e.sourceHidden,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"checkbox-config":function(e){var t=e.row;return!t.parentId},treeConfig:{lazy:!0,children:"children",hasChild:"hasChild",loadMethod:e.loadChildrenMethod},"header-align":"center","table-height":"auto",expand:!1,data:e.loadData,"if-init-query":!1,tableColumn:e.columns,customColumns:{name:"servicebusiNewList"}},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.isDetail?e._e():r("div",{staticClass:"vxetable-operator"},[e.sourceHidden?r("a-button",{directives:[{name:"has",rawName:"v-has",value:"projList:all",expression:"'projList:all'"}],attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.addProj()}}},[e._v("新建")]):e._e(),e.selectedRowKeys.length>0?r("a-dropdown",[r("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[r("a-menu-item",{key:"1",on:{click:e.delBatch}},[r("a-icon",{attrs:{type:"delete"}}),e._v("\n                  删除\n                ")],1)],1),r("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作\n                "),r("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1)]},proxy:!0},{key:"describe",fn:function(t){var n=t.text,i=t.row;return[i.parentId||e.isOnlyDrawFile?r("span",[e._v("【"+e._s(i.code)+"】"+e._s(n))]):r("a",{on:{click:function(t){return e.goBusiReqPage(i)}}},[e._v("【"+e._s(i.code)+"】"+e._s(n))])]}},{key:"state_dictText",fn:function(e){var t=e.row;return[r("ser-pro-model-state-comp",{attrs:{state:t.state}})]}},{key:"action",fn:function(t){var n=t.row;return[n.parentId?e._e():[e.isOnlyDrawFile?[r("a",{on:{click:function(t){return e.previewDrawFile(n)}}},[e._v("图档管理")])]:[e.isDetail?r("a",{on:{click:function(t){e.handleHis(n)&&e.WhetherThePermissionPasses("projList:all")}}},[r("a-icon",{attrs:{type:"ordered-list"}}),e._v(" 流程跟踪")],1):r("get-table-action-buttons",[e.WhetherThePermissionPasses("projList:all,projList:deal")?r("a",{on:{click:function(t){return e.goBusiReqPage(n)}}},[r("a-icon",{attrs:{type:"highlight"}}),e._v(" 办理")],1):e._e(),9!=n.state&&"N"!=n.state&&"X"!=n.state&&e.WhetherThePermissionPasses("projList:all")?r("a",{on:{click:function(t){return e.printProjReport(n)}}},[r("a-icon",{attrs:{type:"file-text"}}),e._v(" 打印项目申请书")],1):e._e(),e.WhetherThePermissionPasses("projList:all,projList:track")?r("a",{on:{click:function(t){return e.handleHis(n)}}},[r("a-icon",{attrs:{type:"ordered-list"}}),e._v(" 流程跟踪")],1):e._e(),e.WhetherThePermissionPasses("projList:all")?r("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.deleteProj(n)}}},[r("a",{attrs:{disabled:n.disabledRemove}},[r("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]):e._e()],1)]]]}}])})],1),r("history-modal",{ref:"HistoryModal"}),r("contract-info-comp",{ref:"contract"}),r("create-pro-modal",{ref:"createProModal",on:{ok:e.queryPage}}),r("print-report-comp",{ref:"report"})],1)},i=[],o=r("eccd"),a=(r("6eb7"),r("c76c")),s=r("6b02"),l=r("fdce"),u=r("0a5e"),c=r("ac0d"),d=r("6fa9"),f=r("0fea"),h=r("c1df"),p=r.n(h),y=r("4da9"),m=r("cf9e"),g=r("0c8a"),v=r("9bed"),b=r("da39"),w=r("2d4c"),P=r("ca00"),j=r("2b0e"),x=r("9fb0"),O=r("fdcf"),L={name:"servicebusiNew",components:{GetTableActionButtons:w["default"],PrintReportComp:v["default"],SerProModelStateComp:m["default"],CreateProModal:y["default"],MESSuperQuery:d["default"],ContractInfoComp:s["default"],HistoryModal:a["default"],JDDictSelectTag:o["default"],JDictRegionListSelect:l["default"]},mixins:[u["a"],c["b"],b["FooterMethod"]],props:{initQuery:{type:Boolean,default:!0},regionCode:{type:String,default:""},baseType:{type:String,default:""},proArr:{type:Array,default:function(){return[]}},sourceHidden:{type:Boolean,default:!0},isDetail:{type:Boolean,default:!1},isOnlyDrawFile:{type:Boolean,default:!1}},data:function(){return{IsMenu:!0,fileName:"ServicebusiNew",description:"b_service_proj管理页面",queryObj:[{type:"slot",slotName:"regionCode",value:"proj.regionCode",label:"小区编号",showInQueryList:this.sourceHidden},{type:"input",value:"proj.describe",label:"维修项目",queryType:"like"},{type:"slot",value:"proj.baseType",label:"项目类型",slotName:"baseType",showInQueryList:this.sourceHidden},{type:"select",value:"proj.state",label:"项目状态",options:[{label:"全部",value:""},{label:"新建项目",value:"9"},{label:"审核通过",value:"7"},{label:"待审核",value:"8"},{label:"拨付申请",value:"2"},{label:"部分拨付",value:"1"},{label:"全部拨付",value:"0"},{label:"项目办结",value:"N"},{label:"已撤销",value:"X"},{label:"待撤销",value:"5"},{label:"待办结",value:"6"}]},{type:"input",value:"proj.code",label:"维修项目编号",queryType:"like"},{label:"所属区县",value:"rt.zoneCode",type:"zoneSelect"}],columns:[{title:"维修项目",align:"left",headerAlign:"left",field:"describe",minWidth:"200px",treeNode:!0,slot:!0},{title:"维修小区名称",align:"left",headerAlign:"left",width:130,field:"communityName"},{title:"项目类型",align:"center",width:80,field:"baseType_dictText"},{title:"项目状态",align:"center",width:100,field:"state_dictText",slot:!0,sort:!0,customSortField:"proj.state"},{title:"预算总额 (元)",align:"right",width:120,formatter:"amount",field:"budgetCost",sort:!0,customSortField:"proj.budget_cost"},{title:"决算金额 (元)",align:"right",width:120,formatter:"amount",field:"contractCost",hidden:this.sourceHidden},{title:"审核金额 (元)",align:"right",width:120,formatter:"amount",field:"finalCost",hidden:this.sourceHidden},{title:"申报日期",align:"center",width:110,field:"reqDate",sort:!0,customSortField:"proj.req_date",formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""}},{title:"操作",field:"action",align:"center",fixed:"right",width:this.isOnlyDrawFile?120:240,slot:!0,hidden:!this.sourceHidden||this.isDetail}],url:{list:"/use/serviceProj/list",delete:"/use/serviceProj/delete",deleteBatch:"/use/serviceProj/delete",exportXlsUrl:"/use/serviceProj/exportXls",importExcelUrl:"/use/serviceProj/importExcel",queryById:"/act/model/queryById",getChild:"/use/serviceProj/getChild"},defaultKey:"defaultKey"}},created:function(){},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{WhetherThePermissionPasses:O["a"],loadData:function(e){return"02"!=j["default"].ls.get(x["e"]).baseType&&"04"!=j["default"].ls.get(x["e"]).baseType&&(this.queryParam.corpCode=j["default"].ls.get(x["e"]).code),Object(f["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.success&&e.result&&e.result.records&&(e.result.records||[]).forEach((function(e){"1"===e.isHasChild?e.hasChild=!0:e.hasChild=!1})),e.result}))},loadChildrenMethod:function(e){var t=e.row;return Object(f["e"])(this.url.getChild,{id:t.id}).then((function(e){return e.success&&e.result?(e.result.forEach((function(e){e.parentId=t.id,e.baseType_dictText=t.baseType_dictText,e.communityName=t.communityName})),t.children=e.result,e.result):[]}))},handleSuperQuery:function(e,t){this.regionCode&&(e.queryItems||(e.queryItems=[]),e.queryItems.push({field:"proj.region_code",rule:"eq",val:this.regionCode},{field:"proj.baseType",rule:"eq",val:this.baseType})),this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(P["f"])(this.queryParam),this.queryPage())},handleHis:function(e){this.$refs.HistoryModal.initData(e)},printProjReport:function(e){this.$refs.report.type="print",0==e.isHasChild?this.$refs.report.print("proj_report",{id:e.id}):this.$refs.report.print("proj_report_hasChild",{id:e.id})},goBusiReqPage:function(e){Object(g["goBusiPage"])(e.flowId,e.id,"",e.sysOrgCode,e.baseType)},previewDrawFile:function(e){Object(g["goBusiPage"])(e.flowId,e.id,"d",e.sysOrgCode,e.baseType,!0)},goDetail:function(e){Object(g["goBusiPage"])(e,2)},deleteProj:function(e){var t=this;"9"==e.state?(this.$set(e,"disabledRemove",!0),Object(f["a"])(this.url.delete,{id:e.id}).then((function(e){e.success?(t.$message.success(e.result),t.queryPage()):t.$message.error(e.message)})).finally((function(){t.$set(e,"disabledRemove",!1)}))):this.$message.warning("非新建项目不可删除")},delBatch:function(){var e=this;this.$confirm({title:"确认删除",content:"是否删除选中数据?",okText:"确认",cancelText:"取消",onOk:function(){var t=!0;if(e.selectedRows.find((function(r){if("9"!=r.state)return e.$message.warning("非新建项目不可删除,请重新选择"),t=!1,!0})),t){var r=e.selectedRowKeys.join(",");Object(f["a"])(e.url.delete,{id:r}).then((function(t){t.success?(e.$message.success(t.result),e.queryPage()):e.$message.error(t.message)}))}}})},addProj:function(){this.$refs.createProModal.open()},showContract:function(){this.$refs.contract.initData()},showByPortrait:function(e){this.queryObj=[{type:"input",value:"proj.describe",label:"维修项目",queryType:"like"},{type:"slot",value:"proj.baseType",label:"项目类型",slotName:"baseType"},{type:"input",value:"proj.code",label:"维修项目编号",queryType:"like"}],this.defaultKey="showByPortrait",this.queryParam.regionCode=e.code,this.queryPage()},footerSpanMethod:function(e){return Object(u["c"])({scope:e,spanCol:["describe","communityName","baseType_dictText","state_dictText"],isSpanSeq:!0})},footerMethod:function(e){var t=e.columns,r=e.data;return Object(u["b"])({scope:{columns:t,data:r},spanCol:["describe","communityName","baseType_dictText","state_dictText"],computedCol:["budgetCost","contractCost","finalCost"],isSpanSeq:!0})}}},S=L,T=(r("6ce5"),r("2877")),C=Object(T["a"])(S,n,i,!1,null,"62e30cc5",null);t["default"]=C.exports},"6ce5":function(e,t,r){"use strict";r("3911")},7745:function(e,t,r){"use strict";r.r(t),r.d(t,"UploadFile",(function(){return m})),r.d(t,"ElectronMainDownload",(function(){return g}));var n=r("4a6a"),i=r("2b0e"),o=r("b775");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=f(e,"string");return"symbol"==a(t)?t:t+""}function f(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),s=new q(n||[]);return i(a,"_invoke",{value:C(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function b(){}function w(){}function P(){}var j={};c(j,s,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(N([])));O&&O!==r&&n.call(O,s)&&(j=O);var L=P.prototype=b.prototype=Object.create(j);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(i,o,s,l){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,l)}))}l(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,r,n){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=I(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var u=f(t,r,n);if("normal"===u.type){if(i=n.done?g:y,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=P,i(L,"constructor",{value:P,configurable:!0}),i(P,"constructor",{value:w,configurable:!0}),w.displayName=c(P,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,P):(e.__proto__=P,c(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new T(d(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),c(L,u,"Generator"),c(L,s,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))}}var m={data:function(){return{showList:[],fileList:[],previewNum:0,previewFileList:[],previewVisible:!1}},methods:{onBeforeUploadImage:function(e){var t=this;return new Promise(function(){var r=y(h().mark((function r(i,o){return h().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.tip="正在进行前置处理",t.fileLoading=!0,"application/pdf"!==e.type){r.next=6;break}i(e),r.next=12;break;case 6:if(""!==e.type&&("image/bmp"===e.type||"image/JPG"===e.type||"image/png"===e.type||"image/PNG"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type||"image/JPEG"===e.type)){r.next=10;break}i(e),r.next=12;break;case 10:return r.next=12,n["a"].imgCompression(e).then((function(e){var r=e.size<10485760;r?i(e):(t.$message.warning("图片大小不能超过10MB"),t.fileLoading=!1,o("图片大小不能超过10MB"))}));case 12:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},uploadFile:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData;this.tip="正在上传文件",this.showList||(this.showList=[]);var n={uid:e.file.uid,name:e.file.name,status:"uploading",percent:0};"typeUpload"!==this.showType?this.$set(this.showList,0,n):this.showList.push(n),r.append("file",e.file);var a={headers:{"Content-Type":"multipart/form-data",sourceName:i["default"].ls.get("SOURCE_NAME"),redisIndex:i["default"].ls.get("REDIS_INDEX"),"X-Access-Token":i["default"].ls.get("Access-Token")}},s=this,l={percent:1};if(e.onProgress)var u=setInterval((function(){l.percent<95?(l.percent+=2,e.onProgress(l),s.$forceUpdate()):clearInterval(u)}),100);"scanner"!==this.uploadType&&(this.pageNum=0),o["b"].post(this.url.fileUploadImg,r,a).then((function(r){if(r.success){var n={file:{status:"done",response:r,uid:e.file.uid}};t.handleChangeImage(n),e.onSuccess&&e.onSuccess(r)}else{var i={file:{status:"error",response:r,uid:e.file.uid}};t.handleChangeImage(i),e.onError&&e.onError(r)}})).catch((function(r){var n={file:{status:"error",response:r,uid:e.file.uid}};t.handleChangeImage(n),e.onError&&e.onError(r),t.$forceUpdate()}))},handleChangeImage:function(e){var t=this,r=e.file;if("done"===r.status)if(r.response&&r.response.success){var n={};n.id=e.file.response.result.id,n.filePath=e.file.response.result.filePath,n.fileName=e.file.response.result.originalName,n.thumPath=e.file.response.result.thumPath,this.fileList.push(n),this.buildShowList(e)}else t.$message.error(r.response.message?r.response.message:"上传失败");else"error"===r.status&&this.buildShowList(e)},buildShowList:function(e){var t=[];if(e&&"error"===e.file.status){for(var r=0;r<this.showList.length;r++)if(this.showList[r].uid===e.file.uid){var n={};n.uid=e.file.uid,n.name="上传失败",n.status="error",this.$set(this.showList,r,n);break}}else if(e&&e.file.uid){for(var i=e.file.response.result,o=0;o<this.showList.length;o++)if(this.showList[o].uid===e.file.uid){var a={};a.uid=i.id,a.name=i.originalName||i.fileName,this.isThumbnail?a.url=this.getFileThumbUrlTypeImgByName(i.thumPath||i.filePath):a.url=this.getFileThumbUrlTypeImgByName(i.filePath),a.originalImage=this.buildPath(i.filePath),a.pdfUrl=i.filePdfPath,this.$set(this.showList,o,a);break}}else{this.showList=[];for(var s=0;s<this.fileList.length;s++){var l={};l.uid=this.fileList[s].id,l.name=this.fileList[s].originalName||this.fileList[s].fileName,this.isThumbnail?l.url=this.getFileThumbUrlTypeImgByName(this.fileList[s].thumPath||this.fileList[s].filePath):l.url=this.getFileThumbUrlTypeImgByName(this.fileList[s].filePath),l.originalImage=this.buildPath(this.fileList[s].filePath),t.push(l)}for(var u=0;u<t.length;u++)this.$set(this.showList,u,t[u])}this.$emit("change",this.fileList)},getFileThumbUrlTypeImgByName:function(e){var t="";t=e&&-1!==e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length):"file";try{r("d109")("./"+t+".png")}catch(n){t="file"}return this.isExistThumbnail(e)?this.buildPath(e):r("d109")("./"+t+".png")},isExistThumbnail:function(e){var t=e.toLowerCase();return t.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".bmp")||e.endsWith(".JPG")||e.endsWith(".PNG")||e.endsWith(".GIF")||e.endsWith(".gif")||e.endsWith(".jpeg")},buildPath:function(e){return e&&-1!==e.indexOf("http")?e:window._CONFIG["staticDomainURL"]+"/"+e},handlePreview:function(){var e=y(h().mark((function e(t){var r,n,i;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.checkCanPreview(t)){e.next=2;break}return e.abrupt("return",!1);case 2:for(n in this.previewFileList={fileList:this.fileList,showList:this.showList},r=t.response?t.response.result.id:t.uid,this.showList)i=this.showList[n].response?this.showList[n].response.result.id:this.showList[n].uid,r===i&&(this.previewNum=n);this.previewVisible=!0;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkCanPreview:function(e){var t=["jpg","JPG","jpeg","gif","GIF","JPEG","png","PNG","bmp","BMP","pdf","doc","docx","xls","xlsx","mp4"],r="";r=e.response?this.buildPath(e.response.result.filePath):e.originalImage||e.filePath||e.url;var n=r.substring(r.lastIndexOf(".")+1,r.length).toLowerCase();return!!this.findInList(t,n)||(this.$message.info("此类型文件暂不支持预览,将为您下载"),setTimeout((function(){var e=document.createElement("a");e.href=r,e.target="_blank",e.style.display="none",e.click()}),1e3),!1)},findInList:function(e,t){if(!e||0===e.length)return!1;for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}}},g=function(){function e(t){s(this,e),c(this,"file",null),this.file=t}return u(e,[{key:"electronDownloadFile",value:function(){var e=y(h().mark((function e(t,r,n,i,o){var a,s,l,u,c,d,f,p;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(window.myAPI){e.next=4;break}return e.abrupt("return");case 4:return a=function(e){var t=e.remainderTime,r=e.progress,n=e.speedStr;i&&i({remainderTime:t,progress:r,speedStr:n})},s=this.uploadDownFileProgressFn(a),l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(i){!1===e&&(o("progress",0),window.myAPI.downloadFile(t,r,n)),window.myAPI.watchDownloadFileState((function(e,t,r){if(n===r.fingerPrint)switch(o("downloadState",t),t){case"progressing":s(r);break;case"pause":i(!1);break;case"cancelled":i(!1);break;case"interrupted":i(!1);break;case"completed":i(!0);break;default:i(!1);break}}))}))},e.next=9,window.myAPI.getDownloadFileState(n,t,"obj");case 9:u=e.sent,c=u.state,e.t0=c,e.next="progressing"===e.t0?14:"completed"===e.t0?16:"cancelled"===e.t0?43:"interrupted"===e.t0?44:47;break;case 14:return window.myAPI.setDownloadFileState("pause",n,t),e.abrupt("return",!1);case 16:return e.next=18,window.myAPI.getDownloadFileSavepath(n);case 18:if(d=e.sent,d){e.next=24;break}return this.$Jnotification.error({title:"操作失败",message:"文件不存在，正在重新下载！",offset:100}),e.next=23,l();case 23:return e.abrupt("return",e.sent);case 24:return e.next=26,window.myAPI.fsExists(d);case 26:if(f=e.sent,f){e.next=34;break}return window.myAPI.setDownloadFileState("cancel",n,t),e.next=31,l();case 31:return e.abrupt("return",e.sent);case 34:return e.next=36,window.myAPI.openDir(d,!0);case 36:if(p=e.sent,p){e.next=42;break}return this.$Jnotification.error({title:"操作失败",message:"文件不存在，正在重新下载！",offset:100}),e.next=41,l();case 41:return e.abrupt("return",e.sent);case 42:return e.abrupt("return",!1);case 43:return e.abrupt("return",!1);case 44:return e.next=46,l(!0);case 46:return e.abrupt("return",e.sent);case 47:return e.next=49,l();case 49:return e.abrupt("return",e.sent);case 50:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,o){return e.apply(this,arguments)}return t}()},{key:"uploadDownFileProgressFn",value:function(e){var t=0,r=0;return function(n){if(n.total&&n.loaded){if(0==t)return t=(new Date).getTime(),void(r=n.loaded);var i=(new Date).getTime(),o=(i-t)/1e3,a=n.loaded-r;t=i,r=n.loaded;var s=parseInt(a/o),l=parseInt(s),u="b/s";s/1024>1&&(s=parseInt(s/1024),u="k/s"),s/1024>1&&(s=parseInt(s/1024),u="M/s");var c=l?Math.ceil((n.total-n.loaded)/l):0;(c<0||!c)&&(c=0),c=parseInt(c);var d=parseInt(n.loaded/n.total*100);isNaN(s)&&(s=0);var f=s+u;e&&e({remainderTime:c,progress:d,speedStr:f})}}}},{key:"onDownloadFile",value:function(){var e=y(h().mark((function e(t,r,n){var o;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.electronDownloadFile(this.file.filePath,this.file.originalName,this.file.id,r,n);case 2:return o=e.sent,o&&i["default"].set(t,"progress",100),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()}])}()},bef8:function(e,t,r){"use strict";r.r(t),r.d(t,"ServiceProList",(function(){return l}));var n=r("0fea"),i=(r("c695"),r("d8a5")),o=r("0c8a"),a=r("0a5e"),s=r("ca00"),l={data:function(){var e=this;return{description:"ServiceProList维修项目审核列表",fileName:"ServiceProList",auditRange:"",showType:"queryList",queryObj:[{type:"input",value:"bsp.describe",label:"维修项目",queryType:"like"},{type:"input",value:"bsp.code",label:"项目编号",queryType:"like"},{type:"slot",slotName:"regionCode",value:"bsp.regionCode",label:"小区名称"},{label:"维修类型",value:"bsp.base_type",type:"select",options:[{label:"全部",value:""},{label:"一般",value:"01"},{label:"应急",value:"02"},{label:"计划",value:"03"},{label:"保险",value:"04"}]},{label:"项目状态",value:"bsp.state",type:"select",options:[{label:"全部",value:""},{label:"待审核",value:"8"},{label:"审核通过",value:"7"},{label:"待撤销",value:"5"}]},{label:"审核范围",value:"auditRange",type:"select",val:"01",options:[{label:"全部",value:"00"},{label:"个人待审核",value:"01"}]}],columns:[{title:"维修项目",headerAlign:"left",align:"left",field:"code",treeNode:!0,slot:!0},{title:"小区名称",align:"center",headerAlign:"center",width:140,field:"communityName"},{title:"申报预算 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"budgetCost",width:110},{title:"申报日期",align:"center",field:"reqDate",width:100},{title:"类型",align:"center",headerAlign:"center",field:"baseType",slot:!0,width:60},{title:"状态",align:"left",headerAlign:"center",field:"state",slot:!0,width:120},{title:"操作",field:"action",align:"center",fixed:"right",width:350,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.getQueryParams())).then((function(e){return e.result}))},url:{list:"/use/serviceProj/getServiceProList",costList:"/use/serviceCost/getProAndCost",queryById:"/act/model/queryById"},dictOptions:{}}},created:function(){this.initDictConfig()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{initDictConfig:function(){this.queryObj.map((function(e){"t1.base_type"===e.value&&Object(i["g"])("project_type").then((function(t){e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var r={label:t.text,value:t.value};e.options.push(r)}))}))}))},handleAudit:function(e){Object(o["goBusiPage"])(e.flowId,e.id,"e",e.sysOrgCode,e.baseType)},checkboxConfig:function(e){var t=e.row;return!t.pid&&"1"==t.isCurrentUserFlow&&"8"==t.state},handleBpSurvsion:function(e){var t=Object.assign({},{projId:e.id});this.$refs.fieldSiteUpload.title=e.describe,this.$refs.fieldSiteUpload.add(t)},footerMethod:function(e){var t=e.columns,r=e.data;return Object(a["b"])({scope:{columns:t,data:r},spanCol:["code","communityName"],computedCol:["budgetCost"],isSpanSeq:!0})},footerSpanMethod:function(e){return Object(a["c"])({scope:e,spanCol:["code","communityName"],isSpanSeq:!0})},handleMaintFun:function(e){Object(o["goBusiPage"])(e.flowId,e.id,"b",e.sysOrgCode,e.baseType)},searchReset:function(){this.$refs.superQuery.setQueryListVal([{field:"auditRange",val:"00"}])},getQueryParams:function(){var e=Object.assign({},this.queryParam);return e.auditRange=this.auditRange,Object(s["f"])(e)},handleRollback:function(e){var t=e.describe+"_项目审核撤销",r=Object.assign({},{projNo:e.code,id:e.reqId,reqDescribe:t,reqNo:e.reqNo,extId:e.id});this.$refs.prbm.title=t,this.$refs.prbm.initViews(r)},handleSuperQuery:function(e,t){if(this.queryParam.queryType=e.queryType,e.queryItems){var r=e.queryItems.find((function(e){return"auditRange"===e.field}));this.auditRange=r?r.val:"00",e.queryItems.splice(e.queryItems.indexOf(r),1)}else this.auditRange="00";this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(s["f"])(this.queryParam),this.queryPage())},goBusiReqPage:function(e){var t=e.id;e.pid&&(t=e.pid),Object(o["goBusiPage"])(e.flowId,t,"1",e.sysOrgCode,e.baseType)}}}},d2d8:function(e,t,r){"use strict";r.r(t),r.d(t,"ProcessSuperVisionList",(function(){return p}));var n=r("0fea"),i=r("d8a5"),o=r("0c8a"),a=r("2b0e"),s=r("9fb0"),l=r("fdcf"),u=r("0a5e");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),s=new q(n||[]);return i(a,"_invoke",{value:C(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function b(){}function w(){}function P(){}var j={};u(j,a,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(N([])));O&&O!==r&&n.call(O,a)&&(j=O);var L=P.prototype=b.prototype=Object.create(j);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,r,n){var i=p;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=I(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:y,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=P,i(L,"constructor",{value:P,configurable:!0}),i(P,"constructor",{value:w,configurable:!0}),w.displayName=u(P,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,P):(e.__proto__=P,u(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new T(f(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(L),u(L,l,"Generator"),u(L,a,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))}}var p={data:function(){var e=this;return{description:"ProcessSuperVisionList维修项目过程监督列表",fileName:"ProcessSuperVisionList",showType:"queryList",mainData:{},tenantid:"",queryObj:[{type:"input",value:"bsp.describe",label:"维修项目",queryType:"like"},{type:"input",value:"bsp.code",label:"项目编号",queryType:"like"},{type:"slot",slotName:"regionCode",value:"rr.code",label:"小区名称",queryType:"like"},{label:"维修类型",value:"bsp.base_type",type:"select",options:[]}],columns:[{title:"维修项目",align:"left",field:"code",treeNode:!0,minWidth:320,slot:!0},{title:"小区名称",align:"left",headerAlign:"left",minWidth:140,field:"communityName"},{title:"申报预算 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"budgetCost",width:110},{title:"申报日期",align:"center",field:"reqDate",width:100},{title:"类型",align:"center",headerAlign:"center",field:"baseType",slot:!0,width:60},{title:"状态",align:"left",headerAlign:"center",field:"state",slot:!0,width:96},{title:"操作",field:"action",align:"center",fixed:"right",width:330,slot:!0}],loadData:function(t){return Object(n["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/use/serviceProj/getSerProViList",withdrawalUrl:"/use/serviceProj/withdrawalSerPro",transferredSerPro:"/use/serviceProj/transferredSerPro",downloadFile:"/sys/common/downloadMultiFileToMinIO",queryById:"/act/model/queryById",checkWarrState:"/use/serviceProj/checkWarrState/",getSupByProjId:"/use/processSupervision/getSupByProjId",checkUndoneProg:"/use/serviceProj/checkUndoneProg/"},dictOptions:{}}},provide:function(){var e=this;return{projMainData:function(){return e.mainData}}},created:function(){this.initDictConfig(),"02"!=a["default"].ls.get(s["e"]).baseType&&"04"!=a["default"].ls.get(s["e"]).baseType&&(this.queryParam.corpCode=a["default"].ls.get(s["e"]).code),this.tenantid=a["default"].ls.get(s["C"])},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{WhetherThePermissionPasses:l["a"],goBusiReqPage:function(e,t){var r=e.id;e.pid&&(r=e.pid),Object(o["goBusiPage"])(e.flowId,r,"04"===e.baseType?"":"a",e.sysOrgCode,void 0,void 0,void 0,t)},initDictConfig:function(){this.queryObj.map((function(e){"bsp.base_type"===e.value&&Object(i["g"])("project_type").then((function(t){e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var r={label:t.text,value:t.value};e.options.push(r)}))}))}))},handleSurvsion:function(e){var t=Object.assign({},{projId:e.id});this.$refs.fieldSiteUpload.title=e.describe,this.$refs.fieldSiteUpload.add(t)},handleShowSurvsion:function(e){var t=e.id;e.pid&&(t=e.pid),Object(o["goBusiPage"])(e.flowId,t,"a",e.sysOrgCode,void 0,!0)},handleComple:function(e){Object(o["goBusiPage"])(e.flowId,e.id,"c",e.sysOrgCode)},checkShow:function(e){return"04"!=e.baseType&&(e.pid||!e.children||0==e.children.length)},handleWithdrawalSerPo:function(){var e=h(d().mark((function e(t){var r,i;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkProjState(t);case 2:if(!e.sent){e.next=8;break}r=t.id,i=this,this.$confirm({title:"确定撤回["+t.describe+"]吗?",onOk:function(){Object(n["j"])(i.url.withdrawalUrl+"/"+r).then((function(e){e.success?(i.queryPage(),i.$message.success(e.message)):i.$message.warning(e.message)}))},onCancel:function(){}}),e.next=9;break;case 8:this.$message.info("项目已有在途进度或尾款拨付完成，无法进行竣工验收撤回");case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleProCompleted:function(e){var t=this;Object(n["j"])(this.url.checkUndoneProg+e.id).then((function(r){r.result?(t.$refs.spcm.title=e.describe+"_办结申请",t.$refs.spcm.initViews(e)):t.$message.info("当项目已有子项目发起办结、项目未确认进度或已有在途进度时，无法进行项目办结")}))},handleDownload:function(e){var t=this;Object(n["e"])(this.url.getSupByProjId,{projId:e.id}).then((function(r){if(r.success&&r.result)if(r.result.length>0){var i=t.url.downloadFile+"/"+e.id;Object(n["d"])(i,e.describe+".zip").then((function(e){}))}else t.$message.warning("未查询到勘察附件，无法下载")}))},checkProjState:function(){var e=h(d().mark((function e(t){var r;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.url.checkWarrState+t.id,e.next=3,Object(n["e"])(r).then((function(e){if(e.success)return e.result}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),footerSpanMethod:function(e){return Object(u["c"])({scope:e,spanCol:["code","communityName"],isSpanSeq:!0})},footerMethod:function(e){var t=e.columns,r=e.data;return Object(u["b"])({scope:{columns:t,data:r},spanCol:["code","communityName"],computedCol:["budgetCost"],isSpanSeq:!0})}}}},da39:function(e,t,r){"use strict";r.r(t),r.d(t,"FooterMethod",(function(){return i}));var n=r("e9c4"),i={data:function(){return{}},created:function(){},computed:{},methods:{footerMethod:function(e){var t=e.columns,r=e.data;return[t.map((function(e,t){if(0===t)return"总计：";if(["budgetCost","amount","struArea","totalAmount","allotArea","availBalance","realAmount","insureCost","totalNum","cost","originalCost","quantity","totalPrice","mendAmount","dueAmount","balance","balanceFrozen","construction.cost","accAmount","cashAmount","d","construction.oldCost","contractCost","preAmount","finalCost","preInvIncome","holdSum","actualSum","restAmount"].includes(e.property)){var i={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2},o={style:"decimal",currency:"CNY",minimumFractionDigits:3,maximumFractionDigits:3};return["quantity","totalNum"].includes(e.property)?Number(n(r,e.property)):["struArea","allotArea"].includes(e.property)?Number(n(r,e.property)).toLocaleString("zh-CN",o):Number(n(r,e.property)).toLocaleString("zh-CN",i)}}))]},updateFooterEvent:function(){var e=this.$refs.xTable;e.updateFooter()}}}},fc92:function(e,t,r){"use strict";r.r(t),r.d(t,"ServiceProjBusiList",(function(){return d}));var n=r("0a5e"),i=r("ac0d"),o=r("6fa9"),a=r("0fea"),s=r("5a0c"),l=r.n(s),u=r("c76c"),c=r("0c8a"),d={mixins:[n["a"],i["b"]],components:{MESSuperQuery:o["default"],HistoryModal:u["default"]},data:function(){var e=this;return{fileName:"ServiceProjBusiList",description:"b_service_proj管理页面",queryObj:[{type:"slot",slotName:"regionCode",value:"proj.regionCode",label:"小区编号"},{type:"input",value:"proj.describe",label:"维修项目",queryType:"like"},{type:"slot",value:"proj.baseType",label:"项目类型",slotName:"baseType"},{type:"input",value:"proj.code",label:"维修项目编号"}],columns:[{title:"维修项目",align:"left",headerAlign:"left",field:"describe",slot:!0},{title:"维修项目编号",align:"center",headerAlign:"center",width:180,field:"code",slot:!0},{title:"项目类型",align:"left",headerAlign:"left",width:100,field:"baseType_dictText"},{title:"项目状态",align:"left",headerAlign:"left",width:250,field:"state_dictText"},{title:"预算总额 (元)",align:"right",headerAlign:"right",width:130,formatter:"amount",field:"budgetCost"},{title:"申报日期",align:"center",width:120,field:"reqDate",sort:!0,formatter:function(e){var t=e.cellValue;return t?l()(t).format("YYYY-MM-DD"):""}},{title:"操作",field:"action",align:"center",fixed:"right",width:250,slot:!0}],loadData:function(t){return Object(a["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/use/serviceProj/list",delete:"/use/serviceProj/delete",deleteBatch:"/use/serviceProj/deleteBatch",exportXlsUrl:"/use/serviceProj/exportXls",importExcelUrl:"/use/serviceProj/importExcel",queryById:"/act/model/queryById"}}},created:function(){},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{handleHis:function(e){this.$refs.HistoryModal.initData(e)},goBusiReqPage:function(e,t){Object(c["goBusiPage"])(t,e)},showContract:function(){this.$refs.contract.initData()}}}}}]);