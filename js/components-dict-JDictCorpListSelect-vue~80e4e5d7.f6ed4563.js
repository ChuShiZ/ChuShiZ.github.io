(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["components-dict-JDictCorpListSelect-vue~80e4e5d7"],{d89cf:function(e,t,n){"use strict";n("e1a89")},e1a89:function(e,t,n){},e3be3:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-select",{ref:"selectPerson",staticStyle:{width:"100%!important"},attrs:{disabled:e.disabled,"show-search":"",allowClear:"",placeholder:"请选择购买单位","option-filter-prop":"children"},on:{change:e.handleChange,select:e.handleSelect,focus:e.personFocus,blur:e.personBlur,search:e.personEnter,popupScroll:e.appendData},model:{value:e.corpCode,callback:function(t){e.corpCode=t},expression:"corpCode"}},[e.loading?n("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):e._e(),e._l(e.corpList,(function(t){return n("a-select-option",{key:t.code,attrs:{value:t.code,dataObj:t}},[(e.showIcon,[e._v("\n      "+e._s(t.name)+"\n    ")])],2)}))],2)},r=[],s=n("0fea"),a={name:"JDictCorpListSelect",props:{value:{type:String,default:""},showIcon:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},model:{prop:"value",event:"change.value"},watch:{value:{immediate:!0,handler:function(e){this.corpCode=e||void 0,this.bankQuery.code=e,e&&this.getCorpList()}}},data:function(){return{corpList:[],personScrollTimer:null,corpCode:"",bankQuery:{column:"createTime",order:"desc",field:"id,name,realname",current:1,size:20},loading:!1,url:{list:"/base/rCorpInfo/corpList"}}},methods:{handleChange:function(e,t){this.$emit("change.value",e),this.$emit("change",e,t.data.attrs.dataObj)},handleSelect:function(e,t){this.$emit("select",e,t.data.attrs.dataObj)},personFocus:function(){this.corpList=[],this.bankQuery.current=1,this.bankQuery.name="",this.bankQuery.code="",this.getCorpList()},personBlur:function(){},appendData:function(e){var t=this;this.personScrollTimer&&clearTimeout(this.personScrollTimer),this.personScrollTimer=setTimeout((function(){e.target.scrollHeight-e.target.scrollTop<=300&&t.getCorpList()}),1e3)},personEnter:function(e){this.corpList=[],this.bankQuery.current=1,this.bankQuery.name=e,this.getCorpList()},getCorpList:function(){var e=this;this.loading=!0,Object(s["e"])(this.url.list,this.bankQuery).then((function(t){t.success&&(e.corpList=e.corpList.concat(t.result.records),e.bankQuery.current++,e.loading=!1),510===t.code&&e.$message.warning(t.message),e.loading=!1,e.$forceUpdate()}))}}},i=a,c=(n("d89cf"),n("2877")),l=Object(c["a"])(i,o,r,!1,null,"99bf699e",null);t["default"]=l.exports}}]);