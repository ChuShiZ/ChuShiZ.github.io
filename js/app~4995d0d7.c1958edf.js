(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~4995d0d7"],{"03f6":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",e._b({attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}}},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1),a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("确定")],1)]},proxy:!0}])},"j-modal",e.$attrs,!1),[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow",disabled:e.disabled}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e._v("\n          设施设备类型")]),a("a-col",{attrs:{span:8}},[a("a-input",{attrs:{hidden:"",placeholder:"请选择设施设备类型"},model:{value:e.model.regUtilityId,callback:function(t){e.$set(e.model,"regUtilityId",t)},expression:"model.regUtilityId"}}),a("a-input",{attrs:{disabled:!0},model:{value:e.model.utilityName,callback:function(t){e.$set(e.model,"utilityName",t)},expression:"model.utilityName"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("维保人")]),a("a-col",{attrs:{span:8,"data-prop":"maintainer"}},[a("a-input",{attrs:{placeholder:"请输入维保人",maxLength:100},model:{value:e.model.maintainer,callback:function(t){e.$set(e.model,"maintainer",t)},expression:"model.maintainer"}})],1),a("a-col",{staticStyle:{"padding-right":"5px"},attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("维保人联系电话")]),a("a-col",{attrs:{span:8,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:"请输入维保人联系电话",maxLength:20},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("维保日期")]),a("a-col",{attrs:{span:8,"data-prop":"maintainTime"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择维保日期"},model:{value:e.model.maintainTime,callback:function(t){e.$set(e.model,"maintainTime",t)},expression:"model.maintainTime"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("维保记录")]),a("a-col",{attrs:{span:20,"data-prop":"maintainRecord"}},[a("a-textarea",{attrs:{rows:4,placeholder:"请输入维保记录",maxLength:1e3},model:{value:e.model.maintainRecord,callback:function(t){e.$set(e.model,"maintainRecord",t)},expression:"model.maintainRecord"}})],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"70",busiTypeDetail:"7008",busiNo:e.model.id},on:{change:e.getFileList}})],1)],1)},n=[],i=a("0fea"),l=a("9fbd");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return t};var e,t={},a=Object.prototype,o=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function p(e,t,a,o){var i=t&&t.prototype instanceof y?t:y,l=Object.create(i.prototype),s=new j(o||[]);return n(l,"_invoke",{value:D(e,a,s)}),l}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",b="executing",g="completed",v={};function y(){}function w(){}function C(){}var x={};u(x,l,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(N([])));k&&k!==a&&o.call(k,l)&&(x=k);var I=C.prototype=y.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function a(n,i,l,r){var c=f(e[n],e,i);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==s(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,l,r)}),(function(e){a("throw",e,l,r)})):t.resolve(u).then((function(e){d.value=e,l(d)}),(function(e){return a("throw",e,l,r)}))}r(c.arg)}var i;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){a(e,o,t,n)}))}return i=i?i.then(n,n):n()}})}function D(t,a,o){var n=m;return function(i,l){if(n===b)throw Error("Generator is already running");if(n===g){if("throw"===i)throw l;return{value:e,done:!0}}for(o.method=i,o.arg=l;;){var s=o.delegate;if(s){var r=R(s,o);if(r){if(r===v)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===m)throw n=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=b;var c=f(t,a,o);if("normal"===c.type){if(n=o.done?g:h,c.arg===v)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n=g,o.method="throw",o.arg=c.arg)}}}function R(t,a){var o=a.method,n=t.iterator[o];if(n===e)return a.delegate=null,"throw"===o&&t.iterator.return&&(a.method="return",a.arg=e,R(t,a),"throw"===a.method)||"return"!==o&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var i=f(n,t.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,v;var l=i.arg;return l?l.done?(a[t.resultName]=l.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,v):l:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function N(t){if(t||""===t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function a(){for(;++n<t.length;)if(o.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,n(I,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,a,o,n,i){void 0===i&&(i=Promise);var l=new S(p(e,a,o,n),i);return t.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},T(I),u(I,d,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var o in t)a.push(o);return a.reverse(),function e(){for(;a.length;){var o=a.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var a in this)"t"===a.charAt(0)&&o.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(o,n){return s.type="throw",s.arg=t,a.next=o,n&&(a.method="next",a.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],s=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var r=o.call(l,"catchLoc"),c=o.call(l,"finallyLoc");if(r&&c){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(r){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),L(a),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var o=a.completion;if("throw"===o.type){var n=o.arg;L(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,o){return this.delegate={iterator:N(t),resultName:a,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,a,o,n,i,l){try{var s=e[i](l),r=s.value}catch(e){return void a(e)}s.done?t(r):Promise.resolve(r).then(o,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(o,n){var i=e.apply(t,a);function l(e){c(i,o,n,l,s,"next",e)}function s(e){c(i,o,n,l,s,"throw",e)}l(void 0)}))}}var u={name:"MaintainInfoModal",components:{TypeAttachmentUpload:l["default"]},props:["sysOrgCode","regUtilityId","utilityName"],data:function(){var e=function(e,t){return new Promise((function(e){t?Object(i["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){t.success?e():e(t.result)})):e("请输入维保人联系电话！")}))};return{title:"",width:950,visible:!1,disableSubmit:!1,disabled:!1,model:{sysOrgCode:this.sysOrgCode,regUtilityId:this.regUtilityId,utilityName:this.utilityName},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:15}},confirmLoading:!1,validatorRules:{regUtilityId:[{required:!0,message:"请选择设施设备类型！",trigger:"change"}],maintainTime:[{required:!0,message:"请选择维保时间！",trigger:"change"}],maintainer:[{required:!0,message:"请输入维保人！",trigger:"blur"}],phone:[{validator:e,type:"Promise"}],maintainRecord:[{required:!0,message:"请输入维保记录！",trigger:"blur"}]},url:{add:"/base/maintainInfo/add",edit:"/base/maintainInfo/edit",queryById:"/base/maintainInfo/queryById"},fileIdList:[]}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{add:function(){this.edit(this.modelDefault)},edit:function(e){var t=this;this.model=Object.assign({},e),this.$nextTick((function(){t.$refs.fileupload.initData()})),this.visible=!0},handleOk:function(){var e=d(r().mark((function e(){var t,a,o,n=this;return r().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.valida();case 3:if(!e.sent){e.next=12;break}if(this.$refs.fileupload.checkData()){e.next=6;break}return e.abrupt("return",!1);case 6:t.confirmLoading=!0,a="",o="",this.model.id?(a+=this.url.edit,o="put"):(a+=this.url.add,o="post"),this.model.fileIdList=this.fileIdList,Object(i["i"])(a,this.model,o).then((function(e){e.success?(t.$message.success(e.message),n.visible=!1,t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},valida:function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validaRowMsgPro(this.$refs.formOwnRow);case 2:return t=e.sent,e.abrupt("return",t.valida);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},p=u,f=(a("67c9"),a("2877")),m=Object(f["a"])(p,o,n,!1,null,"0d2e138e",null);t["default"]=m.exports},"0a57":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-modal",{attrs:{title:e.title,width:e.width,height:"80vh","destroy-on-close":"",switchFullscreen:"","show-footer":""},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{directives:[{name:"print",rawName:"v-print",value:{id:"RegionUtilityCodeInfo",clickMounted:e.clickMounted,closeCallback:e.closeCallback,extraCss:".modalBody: {height: auto}"},expression:"{ id: 'RegionUtilityCodeInfo', clickMounted, closeCallback, extraCss: '.modalBody: {height: auto}' }"}],attrs:{type:"primary"}},[e._v("打印")]),a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmLoading,expression:"confirmLoading"}],staticClass:"modalBody",attrs:{id:"RegionUtilityCodeInfo"}},[e._l(e.records,(function(t){return[a("div",{key:t.id,staticClass:"infoItem"},[a("j-form-container",{attrs:{disabled:e.disabled}},[a("a-row",{staticClass:"maintainInfo"},[a("a-col",{attrs:{span:4}},[e._v("安装位置")]),a("a-col",{attrs:{span:20}},[e._v("\n              "+e._s(t.instPlaceName)+"\n            ")]),a("a-col",{attrs:{span:4}},[e._v("设备名称")]),a("a-col",{attrs:{span:20}},[e._v("\n              "+e._s(t.describe)+"\n            ")])],1)],1),a("div",{ref:"qrCodePage",refInFor:!0,staticClass:"uploadQrcode",attrs:{title:"扫码上传"}},[a("div",{ref:"registerQrcode"+t.id,refInFor:!0})])],1)]}))],2)])},n=[],i=a("0fea"),l=a("9fb0"),s=a("2b0e"),r={name:"RegionUtilityCode",data:function(){return{disabled:!1,title:"设备二维码",width:1e3,visible:!1,model:{},records:[],confirmLoading:!1,url:{queryById:"/base/regionUtility/queryById"}}},computed:{},methods:{show:function(e){var t=this;this.records=e,this.visible=!0,this.$nextTick((function(){e.forEach((function(e){t.initQrCode(e.id)}))}))},initQrCode:function(e){var t=this.$refs["registerQrcode"+e][0];t.innerHTML="";var a=window.location.origin+"/serviceRecordsPhone?id=".concat(e,"&&sourceName=").concat(s["default"].ls.get(l["A"]));new QRCode(t,{text:a,errorCorrectionLevel:"L",width:110,height:110})},getRegionUtiltyInfo:function(e){var t=this;Object(i["e"])(this.url.queryById,{id:e}).then((function(a){a.success?(t.model=Object.assign({},a.result),t.visible=!0,t.$nextTick((function(){t.initQrCode(e)}))):t.model=null}))},handleCancel:function(){this.close()},printInfo:function(){},clickMounted:function(e){},closeCallback:function(e){},close:function(){this.visible=!1}}},c=r,d=(a("aaa4"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"2f9e02c0",null);t["default"]=u.exports},"0db4":function(e,t,a){},"147c9":function(e,t,a){"use strict";a("e759f")},"1f974":function(e,t,a){},24216:function(e,t,a){"use strict";a("2ee1")},"25da":function(e,t,a){},"2c86":function(e,t,a){},"2ee1":function(e,t,a){},3079:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{staticClass:"height-165",attrs:{form:e.form}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"required"},[e._v("未分配令牌")])]),a("a-col",{attrs:{span:20}},[a("a-form-item",{staticStyle:{width:"80%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},label:"未分配令牌"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["selectTokens",{rules:[{required:!0,message:"请选择令牌！",type:"array"}]}],expression:"['selectTokens', { rules: [{ required: true, message: '请选择令牌！', type: 'array' }] }]"}],attrs:{mode:"multiple",placeholder:"请选择令牌",allowClear:"",showSearch:"",filterOption:e.filterOption,dropdownMenuStyle:{maxHeight:"100px"}},model:{value:e.selectTokens,callback:function(t){e.selectTokens=t},expression:"selectTokens"}},e._l(e.tokenList,(function(t,o){return a("a-select-option",{key:o,attrs:{value:t.id}},[e._v("\n              "+e._s(t.tokenNo)+"\n            ")])})),1)],1)],1)],1)],1)],1)},n=[],i=a("0fea"),l={name:"TokenHandleModal",data:function(){return{title:"操作",width:800,visible:!1,confirmLoading:!1,url:{getTokenList:"/sys/otpStorage/getTokenList",handleToken:"/sys/otpStorage/handleToken"},fromDeptCode:"",toDeptCode:"",selectTokens:[],tokenList:[],form:this.$form.createForm(this)}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},edit:function(e,t){var a=this;this.fromDeptCode=e,this.toDeptCode=t,Object(i["e"])(this.url.getTokenList,{corpCode:e,state:"0"}).then((function(e){a.tokenList=e.result})),this.visible=!0},close:function(){this.fromDeptCode="",this.toDeptCode="",this.selectTokens=[],this.tokenList=[],this.confirmLoading=!1,this.visible=!1},handleOk:function(){var e=this;this.form.validateFields((function(t){if(!t){var a=e;a.confirmLoading=!0;var o={};o.toDeptCode=e.toDeptCode,o.selectTokens=e.selectTokens.join(","),Object(i["j"])(e.url.handleToken,o).then((function(t){t.success?(a.$message.success(e.title+"成功!"),a.$emit("ok")):a.$message.warning(e.title+"失败!")})).finally((function(){a.close()}))}}))},handleCancel:function(){this.close()}}},s=l,r=(a("8e61"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,"1b023926",null);t["default"]=c.exports},"30f7":function(e,t,a){"use strict";a("d8db")},"3b60":function(e,t,a){},"3fc1":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-modal",{attrs:{title:"业主信息变更",width:1200,visible:e.visible,confirmLoading:e.confirmLoading&&e.isShowLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更"},on:{ok:e.toChange,cancel:e.close}},[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}])},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C"},on:{change:e.getFileList}})],1),e.checkSign?[e.checkSignDisabled?e._e():a("owner-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,disabled:!1},on:{update:e.updateModel}}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}],null,!1,3707583208)},[a("j-form-container",[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?[]:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo"},[e.checkSignDisabled?a("a-col",{attrs:{span:4,xxl:4,xl:6}},[e._v("变更人")]):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:6,xxl:6,xl:6}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"变更人"}},[a("a-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.changePerson,callback:function(t){e.$set(e.model,"changePerson",t)},expression:"model.changePerson"}})],1)],1):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:4,xxl:4,xl:6}},[e._v("变更日期")]):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:10,xxl:10,xl:6}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"变更日期"}},[a("a-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.changeTime,callback:function(t){e.$set(e.model,"changeTime",t)},expression:"model.changeTime"}})],1)],1):e._e(),a("a-col",{staticStyle:{"min-height":"80px"},attrs:{span:4,xxl:4,xl:6}},[e.checkSignDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因\n              ")]),a("a-col",{staticStyle:{"min-height":"80px"},attrs:{span:20,xxl:20,xl:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150,disabled:e.checkSignDisabled},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1)],1),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n              变更详情\n            ")])])]},proxy:!0}],null,!1,91766437)},[a("v-table",{ref:"table",attrs:{tableHeight:200,"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"show-pagination":!1},scopedSlots:e._u([{key:"state",fn:function(e){var t=e.text;e.row;return[a("a-badge",0===t?{attrs:{status:"success",text:"已完成"}}:2===t?{attrs:{status:"processing",text:"待变更"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"operType",fn:function(t){var o=t.text;t.row;return[1===o?a("span",[e._v("新增")]):2===o?a("span",[e._v("修改")]):3===o?a("span",[e._v("删除")]):e._e()]}},{key:"actionExpand",fn:function(t){t.text;var o=t.row;return[a("a-table",{attrs:{size:"middle",bordered:"",columns:e.childColumns,dataSource:o.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.wordNameStr)+"\n              ")])}},{key:"oldInfoStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.oldInfoStr?o.oldInfoStr:o.oldInfo?o.oldInfo:"无")+"\n              ")])}},{key:"newInfoStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.newInfoStr?o.newInfoStr:o.newInfo?o.newInfo:"无")+"\n              ")])}}],null,!0)})]}}],null,!1,2578353878)})],1)],1),e.checkSignDisabled?e._e():a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C"},on:{change:e.getFileList}}),e.checkSignDisabled?a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C",busiNo:e.model.reqNo,"is-detail":!0},on:{change:e.getFileList}}):e._e()]:e._e()],2)},n=[],i=a("cd3d"),l=a("0fea"),s=a("9fbd"),r=a("ba05"),c=a("0792"),d=a("c1df"),u=a.n(d),p=a("0a5e"),f={name:"OwnerInfoChangeModal",components:{OwnerBaseInfoComp:i["default"],TypeAttachmentUpload:s["default"],ChangeRecordModal:r["default"]},mixins:[p["a"]],props:{isShowLoading:{type:Boolean,default:!0}},watch:{confirmLoading:function(e){this.$emit(e?"startLoading":"stopLoading")}},data:function(){var e=this;return{visible:!1,model:{},labelCol:{span:6},wrapperCol:{span:18},confirmLoading:!1,validatorRules:{floorNo:[{required:!0,message:"请输入楼层"}],code:[{required:!0,message:"请输入房屋号"}],address:[{required:!0,message:"请输入房屋位置"}],struArea:[{required:!0,message:"请输入房屋面积"}],houseUse:[{required:!0,message:"请输入房屋用途"}],houseAttr:[{required:!0,message:"请输入房屋性质"}],bankCode:[{required:!0,message:"请输入承办银行"}],depMode:[{required:!0,message:"请输入交存模式"}],psnName:[{required:!0,message:"请输入业主姓名"}],certType:[{required:!0,message:"请输入证件类型"}],certNo:[{required:!0,message:"请输入证件号码"},{validator:this.validateCard}],phone:[{required:!1,message:""},{validator:c["b"]}],changeReason:[{required:!0,message:"请填写变更原因"},{max:150,message:"变更原因长度不能超过50位！"}]},url:{toChange:"/base/rHouseInfo/toChange",queryOwnerChangeByReqId:"/base/rHouseInfo/queryOwnerChangeByReqId",list:"/common/bChange/pageListByObj"},columns:[{title:"申请编号",headerAlign:"center",align:"center",field:"reqNo",width:"170px",type:"input"},{title:"状态",align:"center",field:"state",width:"120px",type:"input",slot:!0},{title:"变更类别",align:"center",field:"operType",width:"120px",type:"input",slot:!0},{title:"变更原因",headerAlign:"center",align:"left",field:"reason",type:"input",className:"noPreLine",showOverflow:!1},{title:"变更人",align:"center",field:"createBy_dictText",width:"120px",type:"input"},{title:"变更日期",align:"center",field:"createTime",width:"120px",type:"input",formatter:function(e){var t=e.cellValue;return t?u()(t).format("YYYY-MM-DD"):""}},{title:"详情",align:"center",field:"action",width:"80px",type:"expand",slot:!0}],childColumns:[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"变更项",align:"center",dataIndex:"wordNameStr",scopedSlots:{customRender:"wordNameStr"}},{title:"原信息",align:"center",dataIndex:"oldInfoStr",scopedSlots:{customRender:"oldInfoStr"}},{title:"新信息",align:"center",dataIndex:"newInfoStr",scopedSlots:{customRender:"newInfoStr"}}],activeKey:["1"],fileIdList:[],checkSign:!1,checkSignDisabled:!0,disabled:!1,reqId:"",loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result.records}))}}},methods:{validateCard:function(e,t,a){""!==t&&void 0!==t||a(),1==this.model.certType?c["a"].IDCard.test(t)?a():a(c["a"].IDCardMsg):a()},validatePrice:function(e,t,a){"01"==this.model.depMode?t&&0!=t&&""!=t&&void 0!=t?a():a("房屋售价不允许为0"):a()},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},updateModel:function(e){this.model=e},close:function(){this.$emit("close"),this.checkSign=!1,this.$refs.baseInfoComp.visibleCheck=!1,this.visible=!1},change:function(e){var t=this;this.visible=!0,this.model=Object.assign({},e);var a={changeNo:e.id};this.$nextTick((function(){t.checkSign&&(t.$refs.fileupload.initData(),t.$refs.table.localParams=a,t.$refs.table.loadData())}))},initData:function(e){var t=this;this.reqId=e;var a=this;Object(l["e"])(this.url.queryOwnerChangeByReqId,{reqId:e}).then((function(o){o.result&&(a.model=o.result.baseInfoMap,a.model.changeTime=u()(a.model.changeTime).format("YYYY-MM-DD"),a.checkSign=!0,Object(l["e"])("/common/bBusiReq/queryById",{id:e}).then((function(e){if(e.success){a.$set(a.model,"reqNo",e.result.reqNo);var o={reqNo:e.result.reqNo};a.$nextTick((function(){t.$refs.table.localParams=o,t.$refs.table.loadData(),a.$refs.fileupload.initData()}))}})))}))},toChange:function(){var e=this;if(e.$refs.baseInfoComp.$refs.hic.checkData()){var t=e.$refs.baseInfoComp.getHouseInfo();e.model=Object.assign(e.model,t),e.$refs.baseInfoComp.$refs.ownerBatchComp.checkData().then((function(){e.model.psnInfoList=[],e.model.psnInfoList=e.model.psnInfoList.concat(e.$refs.baseInfoComp.$refs.ownerBatchComp.list);var t=e.model.psnInfoList;if(t.length>1)for(var a=0;a<t.length;a++)for(var o=a+1;o<t.length;o++)if(t[a].psnName===t[o].psnName&&t[a].certType===t[o].certType&&t[a].certNo===t[o].certNo)return void e.$message.error("不允许添加相同的业主！");if(!e.$refs.fileupload.checkData())return!1;e.$refs.form.validate((function(t){t&&(e.confirmLoading=!0,e.model.fileIdList=e.fileIdList,Object(l["j"])(e.url.toChange,e.model).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()})))}))}))}}}},m=f,h=(a("c15a"),a("2877")),b=Object(h["a"])(m,o,n,!1,null,"0d0d6ff1",null);t["default"]=b.exports},"48a1":function(e,t,a){"use strict";a("5c66")},"4a2d":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("j-modal",{attrs:{title:"归属地变更",width:800,visible:t.visible,confirmLoading:t.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更","modal-height":"60vh"},on:{cancel:t.handleCancel,ok:t.handleOk}},[o("a-spin",{ref:"spinRef",attrs:{spinning:t.confirmLoading}},[o("a-form-model",{ref:"form",attrs:{rules:t.validatorRules,model:t.model}},[o("a-row",{staticClass:"houseInfo"},[o("a-col",{attrs:{span:6}},[o("span",{staticClass:"requiredText"},[t._v("*")]),t._v("变更归属地")]),o("a-col",{attrs:{span:18}},[o("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"zoneCode",label:"变更归属地"}},[o("a-tree-select",{staticStyle:{width:"100%"},attrs:{"get-popup-container":function(){return e.$refs.spinRef.$el},"show-search":"",filterTreeNode:t.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:t.zoneList,placeholder:"请选择所属区县"},model:{value:t.model.zoneCode,callback:function(e){t.$set(t.model,"zoneCode",e)},expression:"model.zoneCode"}})],1)],1),o("a-col",{attrs:{span:6}},[o("span",{staticClass:"requiredText"},[t._v("*")]),t._v("变更原因")]),o("a-col",{attrs:{span:18}},[o("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[o("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150},model:{value:t.model.changeReason,callback:function(e){t.$set(t.model,"changeReason",e)},expression:"model.changeReason"}})],1)],1)],1)],1),o("type-attachment-upload",{ref:"fileupload",attrs:{"header-style":{padding:"12px 0"},"body-style":{padding:"4px 0 16px"},busiType:"50",busiTypeDetail:"505F"},on:{change:t.getFileList}})],1)],1)},n=[],i=a("165b"),l=a("0fea"),s=a("9fbd");function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=Array(t);a<t;a++)o[a]=e[a];return o}var u={name:"RegionBatchChangePlaceModal",components:{TypeAttachmentUpload:s["default"]},mixins:[i["BatchChange"]],data:function(){return{validatorRules:{zoneCode:[{required:!0,message:"请选择所属区县!"}],changeReason:[{required:!0,message:"请填写变更原因!"}]},zoneList:[]}},created:function(){this.initData()},methods:{filter:function(e,t){return t.data.props.title.includes(e)},initData:function(){var e=this;Object(l["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){if(t.success){var a=[];e.handleList(a,t.result),e.zoneList=a}}))},handleList:function(e,t){var a,o=this,n=r(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.children&&i.children.length>0?o.handleList(e,i.children):e.push(i)}}catch(l){n.e(l)}finally{n.f()}}}},p=u,f=(a("5d27"),a("2877")),m=Object(f["a"])(p,o,n,!1,null,"033c8286",null);t["default"]=m.exports},"4b96":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"code",label:"账户编号"}},[a("a-input",{attrs:{placeholder:"请输入账户编号 生成规则：8位单位编号+6位日期+1位校验位",disabled:""},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"sysOrgCode",label:"主管单位"}},[a("a-input",{attrs:{placeholder:"请输入主管单位",disabled:""},model:{value:e.model.sysOrgCode,callback:function(t){e.$set(e.model,"sysOrgCode",t)},expression:"model.sysOrgCode"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"baseCorpName",label:"单位名称"}},[a("a-input",{attrs:{placeholder:"请输入关联ID关联ID：单位ID",disabled:""},model:{value:e.model.baseCorpName,callback:function(t){e.$set(e.model,"baseCorpName",t)},expression:"model.baseCorpName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"statusName",label:"账户状态"}},[a("a-input",{attrs:{placeholder:"请输入账户状态 9_新建（待开户）0_正常 4_待销户 5_已注销",disabled:""},model:{value:e.model.state_dictText,callback:function(t){e.$set(e.model,"state_dictText",t)},expression:"model.state_dictText"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"balance",label:"账户余额"}},[a("a-input",{attrs:{placeholder:"请输入账户余额",disabled:""},model:{value:e.model.balance,callback:function(t){e.$set(e.model,"balance",t)},expression:"model.balance"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankName",label:"承办银行"}},[a("a-input",{attrs:{placeholder:"请输入承办银行",disabled:""},model:{value:e.model.bankName,callback:function(t){e.$set(e.model,"bankName",t)},expression:"model.bankName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"settleName",label:"是否计息"}},[a("a-input",{attrs:{placeholder:"请输入是否计息 默认1 0_否 1_是",disabled:""},model:{value:e.model.settleName,callback:function(t){e.$set(e.model,"settleName",t)},expression:"model.settleName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"lastSetDate",label:"上次结息日期"}},[a("a-input",{attrs:{placeholder:"请输入上次结息日期 账务记账更新YYYY-MM-DD",disabled:""},model:{value:e.model.lastSetDate,callback:function(t){e.$set(e.model,"lastSetDate",t)},expression:"model.lastSetDate"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"lastSetBal",label:"上次结息余额"}},[a("a-input",{attrs:{placeholder:"请输入上次结息余额 结息完成后按此金额生成新年度结转额 账务记账更新",disabled:""},model:{value:e.model.lastSetBal,callback:function(t){e.$set(e.model,"lastSetBal",t)},expression:"model.lastSetBal"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"openDate",label:"开户日期"}},[a("a-input",{attrs:{placeholder:"请输入开户日期",disabled:""},model:{value:e.model.openDate,callback:function(t){e.$set(e.model,"openDate",t)},expression:"model.openDate"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"oper",label:"开户操作员"}},[a("a-input",{attrs:{placeholder:"请输入开户操作员",disabled:""},model:{value:e.model.oper,callback:function(t){e.$set(e.model,"oper",t)},expression:"model.oper"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"hisFlag",label:"历史标志"}},[a("a-input",{attrs:{placeholder:"请输入历史标志 0_否(默认) 1_是",disabled:""},model:{value:e.model.hisFlag,callback:function(t){e.$set(e.model,"hisFlag",t)},expression:"model.hisFlag"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"remark",label:"备注"}},[a("a-input",{attrs:{placeholder:"请输入备注",disabled:""},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1)],1)},n=[],i=a("0fea"),l=(a("c1df"),{name:"RAccSaleInfoModal",data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{code:[{required:!0,message:"请输入账户编号 生成规则：8位单位编号+6位日期+1位校验位!"}]},url:{add:"/base/rAccSaleInfo/add",edit:"/base/rAccSaleInfo/edit"}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.clearValidate()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var o="",n="";e.model.id?(o+=e.url.edit,n="put"):(o+=e.url.add,n="post"),Object(i["i"])(o,e.model,n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()}}}),s=l,r=a("2877"),c=Object(r["a"])(s,o,n,!1,null,"239ad466",null);t["default"]=c.exports},"4bb4":function(e,t,a){},5108:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{staticStyle:{height:"100%",overflow:"auto"},attrs:{title:e.title,width:"68%",visible:e.visible},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("div",{staticStyle:{"margin-bottom":"135px"}},[a("vxe-grid",{ref:"table",attrs:{border:"",size:"middle",columns:e.columns,data:e.dataSource,pagination:!1,loading:e.loading,"edit-config":{trigger:"click",mode:"cell",showStatus:!0},"edit-rules":e.rules},scopedSlots:e._u([{key:"bankCode",fn:function(t){var o=t.row,n=t.column;return[a("div",[a("j-dict-bank-list-select",e._b({staticStyle:{width:"80%"},attrs:{"show-icon":"",placeholder:"请选择承办银行"},on:{select:function(t){return e.$refs.table.updateStatus({row:o,column:n})}},model:{value:o.bankCode,callback:function(t){e.$set(o,"bankCode",t)},expression:"row.bankCode"}},"j-dict-bank-list-select",{dropdownMenuStyle:{height:"158px"}},!1))],1)]}},{key:"settleFlag",fn:function(t){var o=t.row,n=t.column;return[a("div",[a("a-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择是否参与结息"},on:{select:function(t){return e.$refs.table.updateStatus({row:o,column:n})},change:function(t){return e.handleChange(o,"settleFlag",n)}},model:{value:o.settleFlag,callback:function(t){e.$set(o,"settleFlag",t)},expression:"row.settleFlag"}},[a("a-select-option",{attrs:{value:1}},[e._v("是")]),a("a-select-option",{attrs:{value:0}},[e._v("否")])],1)],1)]}}])})],1)])},n=[],i=a("b65a"),l=a("4349"),s=a("8c6e"),r=a("0d34"),c=a("efa9"),d=a("3269"),u={name:"RegionInfoOpenAccBatch",mixins:[i["a"],c["RegionInfoOpenAccBatch"]],components:{JDictBankListSelect:d["default"],JThirdAppButton:r["default"],JInput:l["default"],JSuperQuery:s["default"]}},p=u,f=(a("5ffd"),a("2877")),m=Object(f["a"])(p,o,n,!1,null,"c261ac9c",null);t["default"]=m.exports},5674:function(e,t,a){},"5c66":function(e,t,a){},"5d27":function(e,t,a){"use strict";a("4bb4")},"5d71":function(e,t,a){},"5ffd":function(e,t,a){"use strict";a("a931")},"65c1":function(e,t,a){},"67c9":function(e,t,a){"use strict";a("fafd")},"684a":function(e,t,a){},"6cc3":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-drawer",{attrs:{title:e.title,maskClosable:!0,width:e.drawerWidth,placement:"right",closable:!0,visible:e.visible},on:{close:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n                基本信息\n              ")])])]},proxy:!0}])},[a("a-descriptions",{attrs:{column:2}},[a("a-descriptions-item",{attrs:{label:"物业区域名称"}},[e._v(e._s(e.model.name))]),a("a-descriptions-item",{attrs:{label:"所属区县"}},[e._v(e._s(e.model.zoneCode_dictText))]),a("a-descriptions-item",{attrs:{label:"地址"}},[e._v(e._s(e.model.address))]),a("a-descriptions-item",{attrs:{label:"承办银行"}},[e._v(e._s(e.model.bankName))]),a("a-descriptions-item",{attrs:{label:"自然幢数"}},[e._v(e._s(e.model.nextNodeNum))]),a("a-descriptions-item",{attrs:{label:"开发日期"}},[e._v(e._s(e.model.buildDate))]),a("a-descriptions-item",{attrs:{label:"占地面积"}},[e._v(e._s(e.formatterAmount(e.model.useArea,3)))]),a("a-descriptions-item",{attrs:{label:"建筑面积"}},[e._v(e._s(e.formatterAmount(e.model.struArea,3)))]),a("a-descriptions-item",{attrs:{label:"开发单位"}},[e._v(e._s(e.model.developName))]),a("a-descriptions-item",{attrs:{label:"物业服务企业"}},[e._v(e._s(e.model.environName))]),e.showStreet?a("a-descriptions-item",{attrs:{label:"街道办事处"}},[e._v(e._s(e.model.communityName))]):e._e(),a("a-descriptions-item",{attrs:{label:"社区居委会"}},[e._v(e._s(e.model.streetName))]),a("a-descriptions-item",{attrs:{label:"业主委员会"}},[e._v(e._s(e.model.ownersName))]),a("a-descriptions-item",{attrs:{label:"备注说明",span:2}},[e._v(e._s(e.model.remark))])],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"70",busiTypeDetail:"7001",busiNo:e.model.id,isDetail:!0},on:{change:e.getFileList}})],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-button",{staticStyle:{"margin-right":".8rem"},attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.showRecordModal}},[e._v("备案")])],1)],1),a("a-modal",{attrs:{visible:e.visibleRepulse,title:e.repulseTitle,okText:"确认","cancel-text":"取消"},on:{cancel:e.handleRepulseCancel,ok:e.handleRepulseOk}},[a("a-form",{attrs:{layout:"vertical"}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),a("a-form-item",{attrs:{label:"打回原因"}},[a("a-textarea",{attrs:{placeholder:"请输入打回原因",rows:4},model:{value:e.repulseReason,callback:function(t){e.repulseReason=t},expression:"repulseReason"}})],1)],1)],1),a("a-modal",{attrs:{title:"备案",visible:e.visibleRecord,"confirm-loading":e.confirmLoading},on:{ok:function(t){return e.saveAndEdit("0")},cancel:e.handleRecordCancel}},[a("p",[e._v(e._s(e.ModalText))])])],1)},n=[],i=a("a625"),l=a("9fbd"),s=a("3ed7"),r={name:"RRegionInfoModal",methods:{formatterAmount:s["g"]},components:{TypeAttachmentUpload:l["default"]},mixins:[i["RegionInfoModal"]]},c=r,d=(a("ca97"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"121f84ca",null);t["default"]=u.exports},"6e8e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{centered:"",title:e.title,width:1e3,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:10}},[a("a-form-item",{attrs:{label:"证件号码"}},[a("a-input",{attrs:{placeholder:"请输入证件号码"},model:{value:e.queryParam.certNo,callback:function(t){e.$set(e.queryParam,"certNo",t)},expression:"queryParam.certNo"}})],1)],1),a("a-col",{attrs:{span:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",[a("a-form-model",{ref:"form",attrs:{slot:"detail",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("姓名")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name"}},[a("a-input",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("性别")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"sex"}},[a("a-select",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.sex,callback:function(t){e.$set(e.model,"sex",t)},expression:"model.sex"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("男")]),a("a-select-option",{attrs:{value:"1"}},[e._v("女")])],1)],1)],1),a("a-col",{attrs:{span:4}},[e._v("证件类型")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"certType"}},[a("j-d-dict-select-tag",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",dictCode:"cert_type",disabled:""},on:{change:e.resetCertNo},model:{value:e.model.certType,callback:function(t){e.$set(e.model,"certType",t)},expression:"model.certType"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("证件号码")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"certNo"}},[a("a-input",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.certNo,callback:function(t){e.$set(e.model,"certNo",t)},expression:"model.certNo"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("政治面貌")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"polity"}},[a("j-d-dict-select-tag",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",dictCode:"polity",disabled:""},model:{value:e.model.polity,callback:function(t){e.$set(e.model,"polity",t)},expression:"model.polity"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("联系号码")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"phone"}},[a("a-input",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("出生日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"birthday"}},[a("j-date",{staticClass:"width_200",staticStyle:{width:"100%"},attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.birthday,callback:function(t){e.$set(e.model,"birthday",t)},expression:"model.birthday"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("住址")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"address"}},[a("a-input",{staticClass:"width_200",attrs:{placeholder:"请输入身份证号后点击搜索",disabled:""},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("职务")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"headship"}},[a("j-d-dict-select-tag",{staticClass:"width_200",attrs:{placeholder:"请选择职务",dictCode:"industry_committee_position"},model:{value:e.model.headship,callback:function(t){e.$set(e.model,"headship",t)},expression:"model.headship"}})],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("任职日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width_200",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"officeDate"}},[a("j-date",{staticClass:"width_200",staticStyle:{width:"100%"},attrs:{placeholder:"请选择任职日期"},model:{value:e.model.officeDate,callback:function(t){e.$set(e.model,"officeDate",t)},expression:"model.officeDate"}})],1)],1)],1)],1)],1)])],1)},n=[],i=a("c51a"),l=a("eccd"),s={name:"RtOwnerPsnModal",components:{JDDictSelectTag:l["default"]},mixins:[i["OwnerPsnModal"]],methods:{resetCertNo:function(){this.$set(this.model,"certNo",""),this.$refs.form.clearValidate("certNo")}}},r=s,c=(a("147c9"),a("2877")),d=Object(c["a"])(r,o,n,!1,null,"1ac2c50c",null);t["default"]=d.exports},"6eb9":function(e,t,a){"use strict";a("0db4")},"777c":function(e,t,a){},"7dcb":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,visible:e.visible,maskClosable:!0,confirmLoading:e.confirmLoading,width:e.modelWidth,zIndex:e.zIndex,closable:!0,switchFullscreen:""},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{staticStyle:{"margin-right":"550px",width:"127px",height:"40px"},attrs:{type:"danger",loading:e.loading},on:{click:e.handleCancel}},[a("i",{staticClass:"el-icon-circle-close"}),e._v("关闭\n    ")])]},proxy:!0}])},[e.houseInfoShow?e._e():[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("div",[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!1,bordered:"",stripe:!0,expand:!1,"page-size":10,height:400,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"loanFlag",fn:function(t){var o=t.row;return["1"==o.loanFlag?a("span",[e._v("收入")]):e._e(),"2"==o.loanFlag?a("span",[e._v("支出")]):e._e()]}}],null,!1,1641298076)})],1)])]],2)},n=[],i=a("4dab"),l={name:"TradingRecordTrans",components:{},mixins:[i["TradingRecordTrans"]],props:{disabled:{type:Boolean,default:!1,required:!1},zIndex:{type:Number}}},s=l,r=a("2877"),c=Object(r["a"])(s,o,n,!1,null,"60c6e724",null);t["default"]=c.exports},8466:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-drawer",{staticStyle:{height:"100%"},attrs:{title:e.title,maskClosable:!0,width:e.drawerWidth,placement:"right",closable:!0,visible:e.visible,"body-style":{overflow:"auto",paddingBottom:"53px",height:"calc(100% - 55px)"}},on:{close:e.handleCancel}},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("region-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,labelCol:e.labelCol,wrapperCol:e.wrapperCol,checkChange:e.checkChange,disabled:!1},on:{update:e.updateModel}}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}])},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-row",{staticClass:"houseInfo changeInfo",attrs:{type:"flex"}},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"5058"},on:{change:e.getFileList}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmLoading,expression:"confirmLoading"}],staticClass:"drawer-bootom-button"},[a("a-button",{attrs:{type:"primary",icon:"check"},on:{click:function(t){return e.toChange()}}},[e._v("确认变更")])],1)],1),e.checkSign?[a("region-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,labelCol:e.labelCol,wrapperCol:e.wrapperCol,disabled:!0},on:{update:e.updateModel}}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}],null,!1,3707583208)},[a("j-form-container",{attrs:{disabled:!0}},[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?[]:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("变更人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"变更人"}},[a("a-input",{attrs:{placeholder:"",disabled:e.disabled},model:{value:e.model.changePerson,callback:function(t){e.$set(e.model,"changePerson",t)},expression:"model.changePerson"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("变更日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"变更日期"}},[a("a-input",{attrs:{placeholder:"",disabled:e.disabled},model:{value:e.model.changeTime,callback:function(t){e.$set(e.model,"changeTime",t)},expression:"model.changeTime"}})],1)],1),a("a-col",{staticStyle:{height:"80px"},attrs:{span:4}},[e._v("变更原因")]),a("a-col",{staticStyle:{height:"80px"},attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150,disabled:e.disabled},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"5058",busiNo:e.model.reqNo,"is-detail":!0},on:{change:e.getFileList}})]:e._e()],2)},n=[],i=a("a625"),l=a("e5e6"),s=a("9fbd"),r={name:"RegionInfoChangeModal",components:{RegionBaseInfoComp:l["default"],TypeAttachmentUpload:s["default"]},mixins:[i["RegionInfoModal"]],provide:function(){var e=this;return{getContainer:function(){return e.$refs.spinRef.$el}}}},c=r,d=(a("c2c7"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"1742c600",null);t["default"]=u.exports},"84d5":function(e,t,a){"use strict";a("1f974")},"880f":function(e,t,a){},"88cd":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":!0}}},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1)]},proxy:!0}])},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{attrs:{disabled:e.disabled,border:!1}},[a("a-row",{staticClass:"maintainInfo"},[a("a-col",{attrs:{span:4}},[e._v("设施设备类型")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.utilityName)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("维保人")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.maintainer)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("维保人联系电话")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.phone)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("维保时间")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.maintainTime)+"\n        ")]),a("a-col",{staticClass:"height-108",attrs:{span:4}},[e._v("维保记录")]),a("a-col",{staticClass:"height-108",attrs:{span:20}},[e._v("\n          "+e._s(e.model.maintainRecord)+"\n        ")])],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"70",busiTypeDetail:"7006",busiNo:e.model.id,isDetail:!0},on:{change:e.getFileList}})],1)],1)],1)],1)],1)},n=[],i=a("0fea"),l=a("9fbd"),s={name:"MaintainInfoDetail",components:{TypeAttachmentUpload:l["default"]},data:function(){return{title:"",width:800,visible:!1,disableSubmit:!1,disabled:!1,model:{},confirmLoading:!1,url:{queryById:"/base/maintainInfo/queryById"},fileIdList:[]}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{show:function(e){this.getMaintainInfo(e.id),this.visible=!0},getMaintainInfo:function(e){var t=this;Object(i["e"])(this.url.queryById,{id:e}).then((function(e){e.success?(t.model=Object.assign({},e.result),t.$nextTick((function(){t.$refs.fileupload.initData()}))):t.model=null}))},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},r=s,c=(a("30f7"),a("2877")),d=Object(c["a"])(r,o,n,!1,null,"2dc61cd5",null);t["default"]=d.exports},"8a2a":function(e,t,a){"use strict";a("c999")},"8e61":function(e,t,a){"use strict";a("e481")},"8fc8":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"shortOperaModalContentBody"},[o("content-view",{attrs:{title:"账户交易"},scopedSlots:e._u([{key:"extra",fn:function(){return[o("div",{staticClass:"collapseExtraButton",on:{click:function(t){return e.printTable("tradeGridRef","账户交易记录")}}})]},proxy:!0}])},[o("vxe-grid",{ref:"tradeGridRef",attrs:{columns:e.TradeColumns,data:e.TradeData,"print-config":{modes:["current","selected","all"]},"max-height":"300","auto-resize":"","show-overflow":"",resizable:"",border:""},scopedSlots:e._u([{key:"toLoanSign",fn:function(e,t){var a=e.row;return["1"==a.loanFlag?o("a-badge",{attrs:{color:"orange",text:"收入"}}):o("a-badge",{attrs:{color:"#8bcc00",text:"支出"}})]}}])})],1),o("content-view",{attrs:{title:"在途业务"}},[o("vxe-grid",{attrs:{columns:e.operateColumns,data:e.operateData,"max-height":"300","auto-resize":"","show-overflow":"",resizable:"",border:""},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row;t.column,t.$rowIndex;return[o("a-space",["20"===a.busiType?o("a",{on:{click:function(t){return e.onBusiSeeFile(a.bserviceProjId)}}},[e._v("图档")]):e._e(),"20"!==a.busiType?o("a",{on:{click:function(t){return e.seeFile(a)}}},[e._v("图档")]):e._e(),"00"!==a.busiType&&null!==a.reqId?o("a",{on:{click:function(t){return e.operateDetails(a)}}},[e._v("详情")]):e._e(),a.reqId?o("a",{on:{click:function(t){return e.payAuditHistory(a)}}},[e._v("审批记录")]):e._e()])]}}])})],1),o("content-view",{attrs:{title:"变更记录"},scopedSlots:e._u([{key:"extra",fn:function(){return[o("div",{staticClass:"collapseExtraButton",on:{click:function(t){return e.printTable("modifyGridRef","变更记录")}}})]},proxy:!0}])},[o("vxe-grid",{ref:"modifyGridRef",attrs:{columns:e.modifyColumns,data:e.modifyData,"max-height":"300",resizable:"","auto-resize":"","show-overflow":"",border:""},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row;t.column,t.$rowIndex;return[o("a-space",[a.flowId?o("a",{on:{click:function(t){return e.seeFile(a)}}},[e._v("图档")]):e._e(),o("a",{on:{click:function(t){return e.changeRecord(a)}}},[e._v("变更记录")]),a.flowId?o("a",{on:{click:function(t){return e.workFlowHistory(a)}}},[e._v("审批记录")]):e._e()])]}},{key:"changeState",fn:function(t){var a=t.row;return[o("span",["0"==a.changeState?o("span",[e._v("已变更完成")]):e._e(),"2"==a.changeState?o("span",[e._v("待变更")]):e._e(),"5"==a.changeState?o("span",[e._v("已撤销")]):e._e(),"9"==a.changeState?o("span",[e._v("新建")]):e._e()])]}}])})],1)],1),o("j-modal",{attrs:{title:"图档信息",switchFullscreen:"",visible:e.onBusiVisible,width:"80%",zIndex:e.zIndex},on:{cancel:e.onBusiModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[o("a-button",{attrs:{type:""},on:{click:e.onBusiModalCancel}},[o("a-icon",{attrs:{type:"close-circle"}}),e._v("\n\t\t\t\t\t关闭\n\t\t\t\t")],1)]},proxy:!0}])},[o("draw-file-info",{ref:"drawFileInfo"})],1),o("j-modal",{attrs:{title:"图档信息",switchFullscreen:"",visible:e.fileVisible,width:"40%",zIndex:e.zIndex},on:{cancel:e.fileModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[o("a-button",{attrs:{type:""},on:{click:e.fileModalCancel}},[o("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[o("type-attachment-upload",{ref:"typeFile",attrs:{"busi-no":e.busiNo,"busi-type":e.busiType,"busi-type-detail":e.busiTypeDetail,"is-detail":!0,"is-show-header":!1},on:{fileTypeIsNull:function(t){e.showFileType=!1}}})],1),o("j-modal",{attrs:{title:"流程图",switchFullscreen:"",visible:e.processVisible,width:"40%",zIndex:e.zIndex},on:{cancel:e.processModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[o("a-button",{attrs:{type:""},on:{click:e.processModalCancel}},[o("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[o("div",[o("img",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{src:e.imageUrl,alt:""},on:{click:function(t){return e.handlePreview1(t,e.imageUrl,0)}}})])]),o(a("791b").default,{ref:"refund",tag:"component",attrs:{"req-id":e.reqId}}),o("view-proj-detil-modal",{ref:"projDetil",attrs:{zIndex:e.zIndex}}),o("pay-audit-history-model",{ref:"payHistory",attrs:{zIndex:e.zIndex}}),o("change-record-modal",{ref:"changeRecord",attrs:{zIndex:e.zIndex}}),o("j-modal",{attrs:{title:"审批历史",switchFullscreen:"",visible:e.workFlowHistoryVisible,width:"60%",zIndex:e.zIndex},on:{cancel:e.workFlowHistoryModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[o("a-button",{attrs:{type:""},on:{click:e.workFlowHistoryModalCancel}},[o("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[o("div",[o("work-flow-history",{ref:"workFlowHistory"})],1)]),o("trading-record-vue",{ref:"tradingRecord"}),o("j-modal",{attrs:{title:"账户资金转账(一对多)",switchFullscreen:"",visible:e.transferVisible,width:"60%",zIndex:e.zIndex},on:{cancel:e.transferModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[o("a-button",{attrs:{type:""},on:{click:e.transferModalCancel}},[o("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[o("div",[o("acc-transfer-audit-comp",{ref:"accTransferAuditComp"})],1)])],1)},n=[],i=a("dc9a"),l=a("0fea"),s=a("c1df"),r=a.n(s),c=a("c695"),d=a.n(c),u=a("92d2"),p=a("0789"),f=a("6530"),m=a("ba05"),h=a("c7b6"),b=a("9fbd"),g=a("78ac"),v=a("8c5b"),y=a("7dcb"),w=a("d748"),C=a("7f8f"),x={name:"TradingRecordTable",mixins:[v["TradingRecord"]],components:{ContentView:i["default"],TypeAttachmentUpload:b["default"],JModal:g["default"],OwnerInfoTable:u["default"],TradingRecordTable:T,ViewProjDetilModal:p["default"],PayAuditHistoryModel:f["default"],ChangeRecordModal:m["default"],WorkFlowHistory:h["default"],TradingRecordVue:y["default"],DrawFileInfo:w["default"],AccTransferAuditComp:C["default"]},props:{disabled:{type:Boolean,default:!1,required:!1},zIndex:{type:Number,default:1001}},provide:function(){var e=this;return{projMainData:function(){return e.mainData}}},data:function(){return{TradeColumns:[{title:"序号",type:"seq",width:60,align:"center"},{title:"交易日期",field:"trdDate",align:"center",width:100,formatter:function(e){var t=e.cellValue;return t?r()(t).format("YYYY-MM-DD"):""}},{title:"业务编号",field:"busiNo",align:"center",width:180},{title:"承办银行",field:"bankName",align:"center",width:100},{title:"业务类别",field:"busiTypeDetailText",align:"center",width:120},{title:"业务描述",field:"describe",align:"center"},{title:"收支标识",field:"loanFlag",align:"center",slots:{default:"toLoanSign"},width:80},{title:"发生额(元)",field:"amount",headerAlign:"center",align:"right",width:100,formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{title:"账户余额(元)",field:"balance",headerAlign:"center",align:"right",width:120,formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}],TradeData:[],loading:!1,operateColumns:[{title:"序号",type:"seq",width:80,align:"center"},{title:"申请日期",field:"trdDate",align:"center",formatter:function(e){var t=e.cellValue;return t?r()(t).format("YYYY-MM-DD"):""}},{title:"申请编号",field:"busiNo",align:"center"},{title:"业务类别",field:"busiTypeDetailText",align:"center",formatter:function(e){return!e.row.busiTypeDetailText&&e.row.bserviceProjId?"维修项目预分摊":e.row.busiTypeDetailText}},{title:"业务描述",field:"describe",align:"center"},{title:"发生额(元)",field:"amount",headerAlign:"center",align:"right",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{title:"操作",field:"action",align:"center",width:"200",slots:{default:"action"}}],operateData:[],modifyColumns:[{title:"序号",align:"center",width:80,type:"seq"},{title:"变更日期",field:"changeDate",align:"center",formatter:function(e){var t=e.cellValue;return t?r()(t).format("YYYY-MM-DD"):""}},{title:"申请编号",field:"reqNo",align:"center"},{title:"业务类型",field:"busiTypeDetailText",align:"center"},{title:"变更原因",field:"reason"},{title:"变更状态",field:"changeState",align:"center",slots:{default:"changeState"}},{title:"操作",field:"reqDate",align:"center",slots:{default:"action"}}],modifyData:[],fileVisible:!1,onBusiVisible:!1,processVisible:!1,workFlowHistoryVisible:!1,transferVisible:!1,busiNo:"",busiType:"",busiTypeDetail:"",imageUrl:"",visible:!1,reqId:"",mainData:{},url:{queryProj:"/use/serviceProj/queryProj"}}},methods:{footerMethod:function(e){var t=e.columns,a=e.data;return[t.map((function(e,t){return 0===t?"总计":["amount"].includes(e.property)?d.a.sum(a,e.property):null}))]},initData:function(e){this.TradeData=e.trdlog.records,this.modifyData=e.change.records,this.operateData=e.operateList,this.$emit("stopLoading")},seeFile:function(e){var t=this;this.fileVisible=!0,this.busiNo="00"!==e.busiType?e.busiNo:e.houseId,"50"!==e.busiType&&"1011"!==e.busiTypeDetail||this.busiNo||(this.busiNo=e.reqNo),this.busiType=e.busiType,this.busiTypeDetail=e.busiTypeDetail,this.$nextTick((function(){t.$refs.typeFile.initData()}))},seeProcess:function(e){var t=this;this.processVisible=!0,Object(l["e"])("/handle/getPic/"+e,{}).then((function(e){t.imageUrl="data:image/png;base64,"+e}))},handlePreview1:function(e,t,a){},fileModalCancel:function(){this.fileVisible=!1},onBusiModalCancel:function(){this.onBusiVisible=!1},processModalCancel:function(){this.processVisible=!1},workFlowHistoryModalCancel:function(){this.workFlowHistoryVisible=!1},transferModalCancel:function(){this.transferVisible=!1},printTable:function(e,t){this.$refs[e].print({sheetName:t})},operateDetails:function(e){var t=this,a=e.busiType;"00"===a?(this.visible=!0,this.$nextTick((function(){t.showByBusiNo(e.busiNo)}))):"10"===a?"1011"===e.busiTypeDetail?this.$nextTick((function(){t.$refs.changeRecord.title="过户详情",t.$refs.changeRecord.init(e.houseId,null,null,null,e.busiNo)})):(this.$refs.refund.visible=!0,this.$refs.refund.isProcess=!0,this.$refs.refund.disableSubmit=!0,this.$refs.refund.title=e.busiTypeDetailText,this.$nextTick((function(){t.reqId=e.reqId,t.$refs.refund.rreqId=e.busiNo,t.$refs.refund.rreqNo=e.busiNo,t.$refs.refund.refundType=e.busiTypeDetail,"1018"===e.busiTypeDetail?(e.tableId=e.reqId,t.$refs.refund.initData(e.houseId,e)):t.$refs.refund.initData(e.houseId,e.busiNo)}))):"20"===a?this.$nextTick((function(){var a=t;a.loading=!0,Object(l["e"])(t.url.queryProj,{id:e.bserviceProjId}).then((function(t){if(!t.success)return a.$message.warn("项目异常，请稍后重试"),!1;a.$refs.projDetil.initData(e.bserviceProjId),a.$refs.projDetil.mainData=t.result})).finally((function(){a.loading=!1}))})):"50"===a?this.$nextTick((function(){t.$refs.changeRecord.init(e.houseId,null,null,null,e.busiNo)})):"60"===a&&(this.transferVisible=!0,this.$nextTick((function(){e.tableId=e.reqId,t.$refs.accTransferAuditComp.initData(null,e)})))},handleCancel:function(){this.visible=!1},payAuditHistory:function(e){this.$refs.payHistory.show(e.flowId),this.$refs.payHistory.visible=!0,this.$refs.payHistory.title=e.busiTypeDetailText+"审批记录"},onBusiSeeFile:function(e){var t=this;Object(l["e"])(this.url.queryProj,{id:e}).then((function(e){if(!e.success)return t.$message.warn("项目异常，请稍后重试"),!1;t.mainData=e.result,t.onBusiVisible=!0,t.$nextTick((function(){t.$refs.drawFileInfo.initData()}))}))},changeRecord:function(e){this.$refs.changeRecord.init(e.changeNo,null,null,null,e.reqNo)},workFlowHistory:function(e){var t=this;this.workFlowHistoryVisible=!0,this.$nextTick((function(){t.$refs.workFlowHistory.getHistory(e.businessKey)}))}}},_=x,k=(a("aa83"),a("48a1"),a("2877")),I=Object(k["a"])(_,o,n,!1,null,"0b472122",null),T=t["default"]=I.exports},9047:function(e,t,a){"use strict";a("5674")},"908a":function(e,t,a){},9252:function(e,t,a){"use strict";a("5d71")},9695:function(e,t,a){},a596:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isTask?a("div",[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("region-info-detail-comp",{ref:"baseInfoComp",attrs:{zIndex:e.zIndex,operate:e.operate,bankRequired:e.bankRequired,model:e.model,"is-task":e.isTask}}),a("type-attachment-upload",{ref:"fileupload",attrs:{zIndex:e.zIndex+1,busiType:"70",busiTypeDetail:"7001",busiNo:e.model.id,isDetail:!0,headerStyle:{borderBottom:"1px solid #d9d9d9",backgroundColor:"#fafafa"}},on:{change:e.getFileList}})],1)],1):a("a-drawer",{ref:"regionInfoDrawer",staticStyle:{height:"100%",overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:e.drawerWidth,placement:"right",closable:!0,visible:e.visible,"z-index":e.zIndex,"body-style":{paddingBottom:"60px",height:"calc(100% - 55px)",overflow:"auto"}},on:{close:e.handleCancel}},[a("div",[a("a-tabs",{on:{change:e.checkModel}},[a("a-tab-pane",{key:"baseInfo",attrs:{tab:"基本信息"}}),a("a-tab-pane",{key:"uploadFile",attrs:{tab:"附件上传"}})],1)],1),a("div",{staticClass:"scroll",staticStyle:{width:"100%","overflow-y":"auto",height:"80vh"}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("region-info-detail-comp",{attrs:{zIndex:e.zIndex,operate:e.operate,bankRequired:e.bankRequired,isExamine:e.isExamine,model:e.model}}),a("a-collapse",{attrs:{expandIconPosition:"right",id:"uploadFile"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"7",scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",[e._v(" 附件上传 ")])])]},proxy:!0}],null,!1,2520375007)},[a("type-attachment-upload",{ref:"fileupload",attrs:{"z-index":e.zIndex+1,isShowHeader:!1,busiType:"70",busiTypeDetail:"7001",busiNo:e.model.id,isDetail:!0},on:{change:e.getFileList}})],1)],1)],1)],1),a("div",{staticClass:"drawer-bootom-button"},[e.isExamine?[a("a-button",{staticStyle:{"margin-right":"0.8rem"},attrs:{type:"primary",icon:"database",loading:e.confirmLoading},on:{click:e.examineRecord}},[e._v("同意")]),a("a-button",{attrs:{loading:e.confirmLoading,icon:"rollback"},on:{click:e.showBackModal}},[e._v("不同意")])]:a("a-button",{attrs:{type:"primary",icon:"close-circle"},on:{click:e.handleCancel}},[e._v("关闭")])],2),a("a-modal",{attrs:{visible:e.visibleBack,title:e.backTitle,confirmLoading:e.confirmLoading,zIndex:e.zIndex+1,okText:"确认","cancel-text":"取消",okButtonProps:{props:{icon:"check"}},cancelButtonProps:{props:{icon:"close"}}},on:{cancel:e.handleBackCancel,ok:e.handleBackOk}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"backForm",attrs:{model:e.backModel,layout:"vertical",rules:e.backValidatorRules}},[a("a-form-model-item",{attrs:{label:"审批意见",prop:"backResult"}},[a("a-textarea",{attrs:{placeholder:"请输入审批意见",rows:4,maxLength:300},model:{value:e.backModel.backResult,callback:function(t){e.$set(e.backModel,"backResult",t)},expression:"backModel.backResult"}})],1)],1)],1)],1)],1)],1)},n=[],i=a("a625"),l=a("9fbd"),s=a("2003");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return(t=p(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e){var t=f(e,"string");return"symbol"==r(t)?t:t+""}function f(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var m={name:"RegionInfoDetail",props:{operate:{type:String,default:"do"},zIndex:{type:Number,default:1e3}},computed:{bindAttr:function(){var e=d({},this.$attrs);return e}},data:function(){return{}},components:{TypeAttachmentUpload:l["default"],RegionInfoDetailComp:s["default"]},mixins:[i["RegionInfoModal"]]},h=m,b=(a("84d5"),a("2877")),g=Object(b["a"])(h,o,n,!1,null,"d9c6727c",null);t["default"]=g.exports},a931:function(e,t,a){},aa00:function(e,t,a){"use strict";a("9695")},aa83:function(e,t,a){"use strict";a("684a")},aaa4:function(e,t,a){"use strict";a("777c")},bc44:function(e,t,a){"use strict";a("65c1")},bd6c:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isProcess?a("div",[a("j-form-container",{attrs:{disabled:"do"!==e.operate}},[a("a-form-model",{ref:"form",staticClass:"compactForm",attrs:{slot:"detail",layout:"vertical",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("小区名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name"}},[e._v("\n            "+e._s(e.model.name)+"\n          ")])],1),a("a-col",{attrs:{span:4}},[e._v("小区地址")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"address"}},[e._v("\n            "+e._s(e.model.address)+"\n          ")])],1),a("a-col",{attrs:{span:4}},[e.isAdmin&&"do"===e.operate?a("span",{staticClass:"requiredText"},[e._v("*")]):e._e(),e._v("承办银行")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankCode","data-prop":"bankCode"}},[e.regionId?a("j-dict-bank-list-select",e._b({attrs:{"read-only":!e.isAdmin,"region-id":e.regionId,"show-icon":"",placeholder:"请选择承办银行"},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}},"j-dict-bank-list-select",{dropdownMenuStyle:{height:"158px"}},!1)):e._e()],1)],1),a("a-col",{attrs:{span:4}},["do"===e.operate?a("span",{staticClass:"requiredText"},[e._v("*")]):e._e(),e._v("是否参与结息")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"settleFlag"}},[a("a-radio-group",{staticStyle:{width:"100%"},model:{value:e.model.settleFlag,callback:function(t){e.$set(e.model,"settleFlag",t)},expression:"model.settleFlag"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:"0"}},[e._v(" 否 ")])],1)],1)],1)],1)],1)],1)],1):a("vxe-modal",{attrs:{title:e.title,width:"900px",height:"300px","show-footer":""},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{loading:e.confirmLoading,icon:"close-circle"},on:{click:e.handleCancel}},[e._v("取消")]),a("a-button",{attrs:{loading:e.confirmLoading,type:"primary",icon:"check"},on:{click:e.handleSubmit}},[e._v("确定")])]},proxy:!0}],null,!1,599459753),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("j-form-container",{attrs:{disabled:e.formDisabled}},[a("a-form-model",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmLoading,expression:"confirmLoading"}],ref:"form",staticClass:"compactForm",attrs:{slot:"detail",layout:"vertical",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("小区名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name"}},[e._v("\n            "+e._s(e.model.name)+"\n          ")])],1),a("a-col",{attrs:{span:4}},[e._v("小区地址")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"address"}},[e._v("\n            "+e._s(e.model.address)+"\n          ")])],1),a("a-col",{attrs:{span:4}},[e.isAdmin?a("span",{staticClass:"requiredText"},[e._v("*")]):e._e(),e._v("承办银行")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankCode","data-prop":"bankCode"}},[e.visible?a("j-dict-bank-list-select",e._b({attrs:{"read-only":!e.isAdmin,"region-id":e.regionId,"show-icon":"",placeholder:"请选择承办银行"},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}},"j-dict-bank-list-select",{dropdownMenuStyle:{height:"158px"}},!1)):e._e()],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("是否参与结息")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"settleFlag"}},[a("a-radio-group",{staticStyle:{width:"100%"},model:{value:e.model.settleFlag,callback:function(t){e.$set(e.model,"settleFlag",t)},expression:"model.settleFlag"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:"0"}},[e._v(" 否 ")])],1)],1)],1)],1)],1)],1)],1)},n=[],i=a("6e09"),l=a("3269"),s={name:"RegionInfoOpenAcc",components:{JDictBankListSelect:l["default"]},mixins:[i["RegionInfoOpenAcc"]]},r=s,c=(a("e851"),a("9252"),a("2877")),d=Object(c["a"])(r,o,n,!1,null,"37556800",null);t["default"]=d.exports},c15a:function(e,t,a){"use strict";a("2c86")},c2c7:function(e,t,a){"use strict";a("908a")},c999:function(e,t,a){},ca97:function(e,t,a){"use strict";a("880f")},cb2a:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:"承办银行变更",width:800,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更","modal-height":"60vh"},on:{cancel:e.handleCancel,ok:e.handleOkBank}},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{rules:e.validatorRules,model:e.model}},[a("a-row",{staticClass:"houseInfo"},[e.showBank?a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("更改前银行")]):e._e(),e.showBank?a("a-col",{attrs:{span:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"bankCodeNow",label:"起始银行"}},[a("j-dict-bank-list-select",{attrs:{"get-popup-container":e.getContainer,"show-icon":"",placeholder:"请选择起始银行",customParams:{regionId:e.regionId},initQuery:!1,"is-detail":e.disabled},model:{value:e.model.bankCodeNow,callback:function(t){e.$set(e.model,"bankCodeNow",t)},expression:"model.bankCodeNow"}})],1)],1):e._e(),e.showBank?a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("目的银行")]):e._e(),e.showBank?a("a-col",{attrs:{span:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"bankCode",label:"变更目的银行"}},[a("j-dict-bank-list-select",{attrs:{"get-popup-container":e.getContainer,"show-icon":"",placeholder:"请选择目的银行",initQuery:!1,"is-detail":e.disabled},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1)],1):e._e(),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因")]),a("a-col",{attrs:{span:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{"header-style":{padding:"12px 0"},"body-style":{padding:"4px 0 16px"},busiType:"50",busiTypeDetail:"5059"},on:{change:e.getFileList}})],1)],1)},n=[],i=a("165b"),l=a("0fea"),s=a("9fbd"),r=a("3269"),c=(a("9fb0"),{name:"RegionBatchChangePlaceModal",components:{JDictBankListSelect:r["default"],TypeAttachmentUpload:s["default"]},mixins:[i["BatchChange"]],data:function(){return{validatorRules:{bankCodeNow:[{required:!0,message:"请选择起始银行!"}],bankCode:[{required:!0,message:"请选择目的银行!"}],changeReason:[{required:!0,message:"请填写变更原因!"}]},showBank:!1,disabled:!1,bankInfoOptions:[],bankInfoNowOptions:[],regionId:""}},created:function(){this.initData()},inject:{getContainer:{default:function(){return function(){return document.body}}}},methods:{initData:function(){var e=this;Object(l["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.showBank=!0)}))},init:function(e,t){this.visible=!0,this.selectedInfos=e,this.baseType=t,this.regionId=this.selectedInfos[0].id}}}),d=c,u=(a("ff86"),a("2877")),p=Object(u["a"])(d,o,n,!1,null,"67e1ab1e",null);t["default"]=p.exports},d7aa:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":!0}},destroyOnClose:""},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1)]},proxy:!0}])},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{attrs:{disabled:e.disabled}},[a("a-row",{staticClass:"maintainInfo"},[a("a-col",{attrs:{span:4}},[e._v("设施设备类型")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.utilityName)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("安装位置")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.instPlaceName)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("设备名称")]),a("a-col",{attrs:{span:20}},[e._v("\n          "+e._s(e.model.describe)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("品牌")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.brand)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("保修期")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.expireDate)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("规格型号")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.model)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("制造商")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.makeCorp)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("生产日期")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.produceDate)+"\n        ")]),a("a-col",{attrs:{span:4}},[e._v("安装日期")]),a("a-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.model.instDate)+"\n        ")])],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"70",busiTypeDetail:"7006",busiNo:e.model.id,isDetail:!0},on:{change:e.getFileList}})],1)],1)],1)],1)],1)},n=[],i=a("0fea"),l=a("9fbd"),s={name:"RegionUtilityDetail",components:{TypeAttachmentUpload:l["default"]},data:function(){return{treeData:[],disabled:!1,title:"",width:1e3,visible:!1,model:{},confirmLoading:!1,url:{queryById:"/base/regionUtility/queryById"},fileIdList:[]}},computed:{},methods:{show:function(e){this.getRegionUtiltyInfo(e.id),this.visible=!0},getRegionUtiltyInfo:function(e){var t=this;Object(i["e"])(this.url.queryById,{id:e}).then((function(e){e.success?(t.model=Object.assign({},e.result),t.$nextTick((function(){t.$refs.fileupload.initData()}))):t.model=null}))},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},handleCancel:function(){this.close()},close:function(){this.model={},this.$emit("close"),this.visible=!1}}},r=s,c=(a("bc44"),a("2877")),d=Object(c["a"])(r,o,n,!1,null,"217573be",null);t["default"]=d.exports},d89c:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}}},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1),a("a-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("确定")],1)]},proxy:!0}])},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow",disabled:e.disabled}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("设施设备类型")]),a("a-col",{attrs:{span:8,"data-prop":"utilityId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"get-popup-container":function(){return e.$refs.spinRef.$el},dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.utilityList,placeholder:"请选择设施设备类型"},on:{select:e.selectType},model:{value:e.model.utilityId,callback:function(t){e.$set(e.model,"utilityId",t)},expression:"model.utilityId"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("安装位置")]),a("a-col",{attrs:{span:8,"data-prop":"treeValue"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"get-popup-container":function(){return e.$refs.spinRef.$el},labelInValue:"","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择安装位置",treeData:e.treeData,expandedKeys:e.iExpandedKeys},on:{select:e.selectTree},model:{value:e.model.treeValue,callback:function(t){e.$set(e.model,"treeValue",t)},expression:"model.treeValue"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("设备名称")]),a("a-col",{attrs:{span:20,"data-prop":"describe"}},[a("a-input",{attrs:{placeholder:"请输入设备名称",maxLength:150},model:{value:e.model.describe,callback:function(t){e.$set(e.model,"describe",t)},expression:"model.describe"}})],1),a("a-col",{attrs:{span:4}},["电梯"==e.selectTitle?a("span",{staticClass:"requiredText"},[e._v("*")]):e._e(),e._v("品牌")]),a("a-col",{attrs:{span:8,"data-prop":"brand"}},[a("a-input",{attrs:{placeholder:"请输入品牌",maxLength:150},model:{value:e.model.brand,callback:function(t){e.$set(e.model,"brand",t)},expression:"model.brand"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("保修期")]),a("a-col",{attrs:{span:8,"data-prop":"expireDate"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择保修期",minDate:e.minEdexpireDate},on:{change:e.expireDateChange},model:{value:e.model.expireDate,callback:function(t){e.$set(e.model,"expireDate",t)},expression:"model.expireDate"}})],1),a("a-col",{attrs:{span:4}},["电梯"==e.selectTitle?a("span",{staticClass:"requiredText"},[e._v("*")]):e._e(),e._v("规格型号")]),a("a-col",{attrs:{span:8,"data-prop":"model"}},[a("a-input",{attrs:{placeholder:"请输入规格型号",maxLength:150},model:{value:e.model.model,callback:function(t){e.$set(e.model,"model",t)},expression:"model.model"}})],1),a("a-col",{attrs:{span:4}},[e._v("制造商")]),a("a-col",{attrs:{span:8,"data-prop":"makeCorp"}},[a("a-input",{attrs:{placeholder:"请输入制造商",maxLength:150},model:{value:e.model.makeCorp,callback:function(t){e.$set(e.model,"makeCorp",t)},expression:"model.makeCorp"}})],1),a("a-col",{attrs:{span:4}},[e._v("生产日期")]),a("a-col",{attrs:{span:8,"data-prop":"produceDate"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择生产日期",maxDate:e.maxProduceDate},on:{change:e.produceDateChange},model:{value:e.model.produceDate,callback:function(t){e.$set(e.model,"produceDate",t)},expression:"model.produceDate"}})],1),a("a-col",{attrs:{span:4}},[e._v("安装日期")]),a("a-col",{attrs:{span:8,"data-prop":"instDate"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择安装日期",maxDate:e.maxInstDate,minDate:e.minInstDate},on:{change:e.instDateChange},model:{value:e.model.instDate,callback:function(t){e.$set(e.model,"instDate",t)},expression:"model.instDate"}})],1)],1)],1),a("type-attachment-upload",{ref:"fileUpload",attrs:{"header-style":{padding:"12px 0"},"body-style":{padding:"4px 0 16px"},busiType:"70",busiTypeDetail:"7006",busiNo:e.model.id},on:{change:e.getFileList}})],1)],1)},n=[],i=a("0fea"),l=a("9fbd"),s=a("b098");function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=Array(t);a<t;a++)o[a]=e[a];return o}var u={name:"RegionUtilityModal",components:{TypeAttachmentUpload:l["default"],JTreeSelect:s["default"]},data:function(){return{treeData:[],disabled:!1,title:"",width:1e3,visible:!1,disableSubmit:!1,regionCode:"",model:{treeValue:null,utilityId:""},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}},confirmLoading:!1,validatorRules:{utilityId:[{required:!0,message:"请选择设施设备类型！",trigger:"change"}],treeValue:[{required:!0,message:"请选择安装位置！",trigger:"change"}],describe:[{required:!0,message:"请输入设备名称！",trigger:"blur"}],brand:[{validator:this.validateBrand}],model:[{validator:this.validateModel}],expireDate:[{required:!0,message:"请选择厂商保修期！",trigger:"change"}]},url:{add:"/base/regionUtility/add",edit:"/base/regionUtility/edit",queryById:"/base/regionUtility/queryById",getRegionTree:"/base/rtRegion/queryRegionTreeByCode",getUtilityTree:"/business/utility/getTree"},fileIdList:[],defaultTitle:"",defaultValue:"",utilityList:[],maxProduceDate:void 0,maxInstDate:void 0,minInstDate:void 0,minEdexpireDate:void 0,defaultMap:{},iExpandedKeys:[],selectTitle:""}},computed:{},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model)),this.initTree()},methods:{selectType:function(e,t){this.selectTitle=t.dataRef.title,this.$refs.form.clearValidate(["brand","model"])},validateBrand:function(e,t,a){t?a():"电梯"===this.selectTitle?a("请输入品牌"):a()},validateModel:function(e,t,a){t?a():"电梯"===this.selectTitle?a("请输入规格型号"):a()},produceDateChange:function(e){this.maxProduceDate=e,this.minInstDate=e,this.minEdexpireDate=this.maxInstDate},instDateChange:function(e){this.maxProduceDate=e,this.minEdexpireDate=e},expireDateChange:function(e){this.maxInstDate=e,this.maxProduceDate=this.maxInstDate},selectTree:function(e){this.defaultTitle="",this.defaultMap.regionId="",this.defaultMap.bldId="",this.defaultMap.cellId="",this.setTitle(e.value,e.label)},setTitle:function(e,t){var a=this;this.getSelectedItem(e,t,this.treeData),this.defaultTitle=this.defaultTitle.substring(1).split("-").reverse().join("-"),this.$nextTick((function(){a.model.treeValue={label:a.defaultTitle,value:e},a.$forceUpdate()}))},getSelectedItem:function(e,t,a){for(var o=this,n=0;n<a.length;n++){if(a[n].value===e){o.defaultTitle+="-"+a[n].title,"1"===a[n].baseType?o.defaultMap.regionId=a[n].value:"2"===a[n].baseType?o.defaultMap.bldId=a[n].value:"3"===a[n].baseType&&(o.defaultMap.cellId=a[n].value),o.getSelectedItem(a[n].parentValue,a[n].parentTitle,o.treeData);break}a[n].children instanceof Object&&o.getSelectedItem(e,t,a[n].children)}},add:function(e,t){this.defaultMap=t,this.regionCode=e,this.edit(null)},edit:function(e){var t=this;this.model=Object.assign({},e),null!=e&&(this.regionCode=this.model.regionCode,this.defaultMap.regionId=e.regionId,this.defaultMap.bldId=e.bldId,this.defaultMap.cellId=e.cellId),this.getRegionTree(e),null!=e&&(this.model.treeValue={label:this.model.instPlaceName,value:this.defaultMap.cellId?this.defaultMap.cellId:this.defaultMap.bldId?this.defaultMap.bldId:this.defaultMap.regionId?this.defaultMap.regionId:""}),this.$nextTick((function(){t.$refs.fileUpload.initData()})),this.visible=!0,this.handleElevator(this.utilityList)},getRegionTree:function(e){if(this.regionCode){var t=this;Object(i["e"])(this.url.getRegionTree,{code:this.regionCode}).then((function(a){function o(e){e.forEach((function(e){2===e.isDistrict&&(e.selectable=!1),e.children&&e.children.length>0&&o(e.children)}))}t.treeData=a,o(t.treeData),t.setThisExpandedKeys(t.treeData),null==e&&(t.model.treeValue={label:t.defaultMap.defaultName,value:t.defaultMap.cellId?t.defaultMap.cellId:t.defaultMap.bldId?t.defaultMap.bldId:t.defaultMap.regionId?t.defaultMap.regionId:""})}))}},setThisExpandedKeys:function(e){if(e.children&&e.children.length>0){this.iExpandedKeys.push(e.key);var t,a=r(e.children);try{for(a.s();!(t=a.n()).done;){var o=t.value;this.setThisExpandedKeys(o)}}catch(n){a.e(n)}finally{a.f()}}},handleCopy:function(e){var t=this;this.model=Object.assign({},e),this.regionCode=this.model.regionCode,this.getRegionTree(e),this.$nextTick((function(){t.$refs.fileUpload.initData()})),this.model.id="",this.visible=!0,this.model.treeValue={label:this.model.instPlaceName,value:this.model.instPlaceIds},this.handleElevator(this.utilityList)},handleElevator:function(e){var t,a=r(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("电梯"===o.utilityName&&this.model.utilityId==o.id)return void(this.selectTitle=o.utilityName);o.children&&o.children.length>0&&this.handleElevator(o.children)}}catch(n){a.e(n)}finally{a.f()}},submitForm:function(){var e=this;if(this.valida()){if(!this.$refs.fileUpload.checkData())return!1;this.model.regionCode=this.regionCode,this.model.regionId=this.defaultMap.regionId,this.model.bldId=this.defaultMap.bldId,this.model.cellId=this.defaultMap.cellId;var t=this;t.confirmLoading=!0;var a="",o="";this.model.id?(a+=this.url.edit,o="put"):(a+=this.url.add,o="post"),this.model.fileIdList=this.fileIdList,Object(i["i"])(a,this.model,o).then((function(a){a.success?(t.$message.success(a.message),t.$emit("ok"),e.visible=!1):t.$message.error(a.message)})).finally((function(){t.confirmLoading=!1}))}},valida:function(){var e=this.$refs.form.validaRowMsg(this.$refs.formOwnRow);return e.valida},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},initTree:function(){var e=this;this.utilityList=[],this.loading=!0,Object(i["e"])(this.url.getUtilityTree).then((function(t){if(t.success&&t.result){var a,o=r(t.result);try{for(o.s();!(a=o.n()).done;){var n=a.value,i=n;e.utilityList.push(i)}}catch(l){o.e(l)}finally{o.f()}}}))},handleCancel:function(){this.close()},close:function(){this.selectTitle="",this.$emit("close"),this.visible=!1}}},p=u,f=(a("aa00"),a("2877")),m=Object(f["a"])(p,o,n,!1,null,"0cc311bc",null);t["default"]=m.exports},d8db:function(e,t,a){},db44:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:"1"==e.baseType?"小区合并":"自然幢合并",width:400,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更","modal-height":"20vh"},on:{cancel:e.handleCancel,ok:e.handleOkRegionMerge}},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{rules:e.validatorRules,model:e.model}},[a("a-row",{staticClass:"houseInfo"},["1"==e.baseType?a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("主小区")]):e._e(),"2"==e.baseType?a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("主自然幢")]):e._e(),a("a-col",{attrs:{span:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"regionCode",label:"主"+e.baseType=="1"?"小区":"自然幢"}},[a("a-select",{staticClass:"check_select",attrs:{placeholder:"请选择主"+e.baseType=="1"?"小区":"自然幢"},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}},e._l(e.selectedInfos,(function(t){return a("a-select-option",{key:t.id,attrs:{typeObj:t}},[a("span",[e._v("\n                  "+e._s(t.name)+"\n                ")])])})),1)],1)],1)],1)],1)],1)],1)},n=[],i=a("165b"),l=a("0fea"),s={name:"RegionMerge",mixins:[i["BatchChange"]],data:function(){return{validatorRules:{id:[{required:!0,message:"请选择合并到的主位置!"}]},id:"",url:{regionMerge:"/base/rtRegion/regionMerge"}}},created:function(){},inject:{getContainer:{default:function(){return function(){return document.body}}}},methods:{handleCancel:function(){this.model={},this.id="",this.confirmLoading=!1,this.visible=!1},init:function(e,t){this.visible=!0,this.selectedInfos=e,this.baseType=t},handleOkRegionMerge:function(){var e=this,t={};t.baseType=this.baseType,t.selectedInfos=this.selectedInfos,t.id=this.id,e.confirmLoading=!0,Object(l["j"])(this.url.regionMerge,t).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):(e.$message.error(t.message),e.$emit("ok"))})).finally((function(){e.confirmLoading=!1,e.handleCancel()}))}}},r=s,c=(a("24216"),a("2877")),d=Object(c["a"])(r,o,n,!1,null,"6d8ee159",null);t["default"]=d.exports},e481:function(e,t,a){},e759f:function(e,t,a){},e851:function(e,t,a){"use strict";a("3b60")},eb7b:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-modal",{attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.confirmLoading&&e.isShowLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更"},on:{ok:e.toChange,cancel:e.close}},[a("owner-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,disabled:!1},on:{update:e.updateModel}}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}])},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C"},on:{change:e.getFileList}})],1),e.checkSign?[e.checkSignDisabled?a("owner-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,disabled:!0},on:{update:e.updateModel}}):e._e(),e.checkSignDisabled?e._e():a("owner-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,disabled:!1},on:{update:e.updateModel}}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}],null,!1,3707583208)},[a("j-form-container",[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?[]:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo"},[e.checkSignDisabled?a("a-col",{attrs:{span:4,xxl:4,xl:6}},[e._v("变更人")]):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:6,xxl:6,xl:6}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"变更人"}},[a("a-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.changePerson,callback:function(t){e.$set(e.model,"changePerson",t)},expression:"model.changePerson"}})],1)],1):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:4,xxl:4,xl:6}},[e._v("变更日期")]):e._e(),e.checkSignDisabled?a("a-col",{attrs:{span:10,xxl:10,xl:6}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"变更日期"}},[a("a-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.changeTime,callback:function(t){e.$set(e.model,"changeTime",t)},expression:"model.changeTime"}})],1)],1):e._e(),a("a-col",{staticStyle:{"min-height":"80px"},attrs:{span:4,xxl:4,xl:6}},[e.checkSignDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("变更原因\n              ")]),a("a-col",{staticStyle:{"min-height":"80px"},attrs:{span:20,xxl:20,xl:18}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,placeholder:"请输入变更原因",maxLength:150,disabled:e.checkSignDisabled},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1)],1),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n              变更详情\n            ")])])]},proxy:!0}],null,!1,91766437)},[a("v-table",{ref:"table",attrs:{tableHeight:200,"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"show-pagination":!1},scopedSlots:e._u([{key:"state",fn:function(e){var t=e.text;e.row;return[a("a-badge",0===t?{attrs:{status:"success",text:"已完成"}}:2===t?{attrs:{status:"processing",text:"待变更"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"operType",fn:function(t){var o=t.text;t.row;return[1===o?a("span",[e._v("新增")]):2===o?a("span",[e._v("修改")]):3===o?a("span",[e._v("删除")]):e._e()]}},{key:"actionExpand",fn:function(t){t.text;var o=t.row;return[a("a-table",{attrs:{size:"middle",bordered:"",columns:e.childColumns,dataSource:o.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.wordNameStr)+"\n              ")])}},{key:"oldInfoStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.oldInfoStr?o.oldInfoStr:o.oldInfo?o.oldInfo:"无")+"\n              ")])}},{key:"newInfoStr",fn:function(t,o){return a("span",{},[e._v("\n                "+e._s(o.newInfoStr?o.newInfoStr:o.newInfo?o.newInfo:"无")+"\n              ")])}}],null,!0)})]}}],null,!1,2578353878)})],1)],1),e.checkSignDisabled?e._e():a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C"},on:{change:e.getFileList}}),e.checkSignDisabled?a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C",busiNo:e.model.reqNo,"is-detail":!0},on:{change:e.getFileList}}):e._e()]:e._e()],2)},n=[],i=a("cd3d"),l=a("0fea"),s=a("9fbd"),r=a("ba05"),c=a("0792"),d=a("c1df"),u=a.n(d),p=a("0a5e"),f={name:"OwnerInfoChangeModal",components:{OwnerBaseInfoComp:i["default"],TypeAttachmentUpload:s["default"],ChangeRecordModal:r["default"]},mixins:[p["a"]],props:{isShowLoading:{type:Boolean,default:!0}},watch:{confirmLoading:function(e){this.$emit(e?"startLoading":"stopLoading")}},data:function(){var e=this;return{visible:!1,model:{},labelCol:{span:6},wrapperCol:{span:18},confirmLoading:!1,validatorRules:{floorNo:[{required:!0,message:"请输入楼层"}],code:[{required:!0,message:"请输入房屋号"}],address:[{required:!0,message:"请输入房屋位置"}],struArea:[{required:!0,message:"请输入房屋面积"}],houseUse:[{required:!0,message:"请输入房屋用途"}],houseAttr:[{required:!0,message:"请输入房屋性质"}],bankCode:[{required:!0,message:"请输入承办银行"}],depMode:[{required:!0,message:"请输入交存模式"}],psnName:[{required:!0,message:"请输入业主姓名"}],certType:[{required:!0,message:"请输入证件类型"}],certNo:[{required:!0,message:"请输入证件号码"},{validator:this.validateCard}],phone:[{required:!1,message:""},{validator:c["b"]}],changeReason:[{required:!0,message:"请填写变更原因"},{max:150,message:"变更原因长度不能超过50位！"}]},url:{toChange:"/base/rHouseInfo/toChange",queryOwnerChangeByReqId:"/base/rHouseInfo/queryOwnerChangeByReqId",list:"/common/bChange/pageListByObj"},columns:[{title:"申请编号",headerAlign:"center",align:"center",field:"reqNo",width:"170px",type:"input"},{title:"状态",align:"center",field:"state",width:"120px",type:"input",slot:!0},{title:"变更类别",align:"center",field:"operType",width:"120px",type:"input",slot:!0},{title:"变更原因",headerAlign:"center",align:"left",field:"reason",type:"input",className:"noPreLine",showOverflow:!1},{title:"变更人",align:"center",field:"createBy_dictText",width:"120px",type:"input"},{title:"变更日期",align:"center",field:"createTime",width:"120px",type:"input",formatter:function(e){var t=e.cellValue;return t?u()(t).format("YYYY-MM-DD"):""}},{title:"详情",align:"center",field:"action",width:"80px",type:"expand",slot:!0}],childColumns:[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"变更项",align:"center",dataIndex:"wordNameStr",scopedSlots:{customRender:"wordNameStr"}},{title:"原信息",align:"center",dataIndex:"oldInfoStr",scopedSlots:{customRender:"oldInfoStr"}},{title:"新信息",align:"center",dataIndex:"newInfoStr",scopedSlots:{customRender:"newInfoStr"}}],activeKey:["1"],fileIdList:[],checkSign:!1,checkSignDisabled:!0,disabled:!1,title:"业主信息变更",reqId:"",loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result.records}))}}},methods:{validateCard:function(e,t,a){""!==t&&void 0!==t||a(),1==this.model.certType?c["a"].IDCard.test(t)?a():a(c["a"].IDCardMsg):a()},validatePrice:function(e,t,a){"01"==this.model.depMode?t&&0!=t&&""!=t&&void 0!=t?a():a("房屋售价不允许为0"):a()},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},updateModel:function(e){this.model=e},close:function(){this.$emit("close"),this.checkSign=!1,this.$refs.baseInfoComp.visibleCheck=!1,this.visible=!1},change:function(e){var t=this;this.visible=!0,this.model=Object.assign({},e);var a={changeNo:e.id};this.$nextTick((function(){t.$refs.fileupload.initData(),t.checkSign&&(t.$refs.table.localParams=a,t.$refs.table.loadData())}))},initData:function(e){var t=this;this.reqId=e;var a=this;Object(l["e"])(this.url.queryOwnerChangeByReqId,{reqId:e}).then((function(o){o.result&&(a.model=o.result.baseInfoMap,a.model.changeTime=u()(a.model.changeTime).format("YYYY-MM-DD"),a.checkSign=!0,Object(l["e"])("/common/bBusiReq/queryById",{id:e}).then((function(e){if(e.success){a.$set(a.model,"reqNo",e.result.reqNo);var o={reqNo:e.result.reqNo};a.$nextTick((function(){t.$refs.table.localParams=o,t.$refs.table.loadData(),a.$refs.fileupload.initData()}))}})))}))},toChange:function(){var e=this;if(e.$refs.baseInfoComp.$refs.hic.checkData()){var t=e.$refs.baseInfoComp.getHouseInfo();e.model=Object.assign(e.model,t),e.$refs.baseInfoComp.$refs.ownerBatchComp.checkData().then((function(){e.model.psnInfoList=[],e.model.psnInfoList=e.model.psnInfoList.concat(e.$refs.baseInfoComp.$refs.ownerBatchComp.list);var t=e.model.psnInfoList;if(t.length>1)for(var a=0;a<t.length;a++)for(var o=a+1;o<t.length;o++)if(t[a].psnName===t[o].psnName&&t[a].certType===t[o].certType&&t[a].certNo===t[o].certNo)return void e.$message.error("不允许添加相同的业主！");if(!e.$refs.fileupload.checkData())return!1;e.$refs.form.validate((function(t){t&&(e.confirmLoading=!0,e.model.fileIdList=e.fileIdList,Object(l["j"])(e.url.toChange,e.model).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()})))}))}))}}}},m=f,h=(a("9047"),a("2877")),b=Object(h["a"])(m,o,n,!1,null,"8524edbe",null);t["default"]=b.exports},eb87:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,maskClosable:!0,width:e.drawerWidth,placement:"right",closable:!0,"body-style":{paddingBottom:"60px"},visible:e.visible},on:{close:e.handleCancel}},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[e.visible?a("region-base-info-comp",{ref:"baseInfoComp",attrs:{model:e.model,validatorRules:e.validatorRules,labelCol:e.labelCol,wrapperCol:e.wrapperCol,disabled:e.disabled},on:{update:e.updateModel}}):e._e(),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"70",busiTypeDetail:"7001",isDetail:e.disabled,busiNo:e.model.id},on:{change:e.getFileList}})],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:null==e.model.state||"9"===e.model.state,expression:"model.state == null || model.state === '9'"}],attrs:{disabled:e.disabled,type:"primary",icon:"check"},on:{click:function(t){return e.handleOk(9)}}},[e._v("暂存")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:null==e.model.state||"9"===e.model.state,expression:"model.state == null || model.state === '9'"}],staticStyle:{"margin-left":"8px"},attrs:{disabled:"regionId"===e.model.showRecords||e.disabled,type:"primary",icon:"cloud-upload"},on:{click:function(t){return e.handleRecordOk()}}},[e._v("提交备案")])],1)],1)},n=[],i=a("a625"),l=a("9fbd"),s=a("e5e6"),r={name:"RegionInfoModal",components:{RegionBaseInfoComp:s["default"],TypeAttachmentUpload:l["default"]},mixins:[i["RegionInfoModal"]],provide:function(){var e=this;return{getContainer:function(){return e.$refs.spinRef.$el}}}},c=r,d=(a("8a2a"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"69132306",null);t["default"]=u.exports},ef17:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-modal",{attrs:{title:"业主房屋调换",width:1360,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认变更"},on:{ok:e.toChange,cancel:e.close}},[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")]),a("span",[e._v("：")])])]},proxy:!0}])},[a("vxe-grid",{ref:"originTable",staticStyle:{"margin-top":"10px"},attrs:{border:"",data:e.sourceDataSource,columns:e.showColumns},scopedSlots:e._u([{key:"houseState",fn:function(t){var o=t.row;return[a("span",["9"==o.houseState?a("span",[e._v("新建档")]):e._e(),"2"==o.houseState?a("span",[e._v("待备案")]):e._e(),"0"==o.houseState?a("span",[e._v("正常")]):e._e(),"4"==o.houseState?a("span",[e._v("待注销")]):e._e(),"5"==o.houseState?a("span",[e._v("已注销")]):e._e(),"8"==o.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}},{key:"state",fn:function(t){var o=t.row;return[a("span",["0"==o.state?a("span",[e._v("已交")]):e._e(),"9"==o.state?a("span",[e._v("新建")]):e._e(),"1"==o.state?a("span",[e._v("未交")]):e._e(),"3"==o.state?a("span",[e._v("待全额退款")]):e._e(),"4"==o.state?a("span",[e._v("待销户")]):e._e(),"5"==o.state?a("span",[e._v("已注销")]):e._e(),"7"==o.state?a("span",[e._v("待资金转账")]):e._e()])]}},{key:"action",fn:function(t){var o=t.row;return[a("span",[a("a",{on:{click:function(t){return e.handleTransferRecord(o)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 交易日志")],1)])]}}])}),a("div",{staticClass:"tableTool"},[a("a-button",{attrs:{type:"primary"},on:{click:e.onSearchRegion}},[a("a-icon",{attrs:{type:"setting"}}),e._v("选择调换后房屋")],1),a("a-form-item",{staticClass:"tableTool-radio",attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"是否调换业主信息"}},[a("a-radio-group",{attrs:{value:e.model.placePsnFlag},model:{value:e.model.placePsnFlag,callback:function(t){e.$set(e.model,"placePsnFlag",t)},expression:"model.placePsnFlag"}},[a("a-radio",{attrs:{value:"Y"}},[e._v("\n                是\n              ")]),a("a-radio",{attrs:{value:"N"}},[e._v("\n                否\n              ")])],1)],1)],1),a("vxe-grid",{ref:"targetTable",staticStyle:{"margin-top":"10px"},attrs:{border:"",size:"middle",columns:e.showColumns,data:e.targetDataSource},scopedSlots:e._u([{key:"houseState",fn:function(t){var o=t.row;return[a("span",["9"==o.houseState?a("span",[e._v("新建档")]):e._e(),"2"==o.houseState?a("span",[e._v("待备案")]):e._e(),"0"==o.houseState?a("span",[e._v("正常")]):e._e(),"4"==o.houseState?a("span",[e._v("待注销")]):e._e(),"5"==o.houseState?a("span",[e._v("已注销")]):e._e(),"8"==o.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}},{key:"state",fn:function(t){var o=t.row;return[a("span",["0"==o.state?a("span",[e._v("已交")]):e._e(),"9"==o.state?a("span",[e._v("新建")]):e._e(),"1"==o.state?a("span",[e._v("未交")]):e._e(),"3"==o.state?a("span",[e._v("待全额退款")]):e._e(),"4"==o.state?a("span",[e._v("待销户")]):e._e(),"5"==o.state?a("span",[e._v("已注销")]):e._e(),"7"==o.state?a("span",[e._v("待资金转账")]):e._e()])]}},{key:"action",fn:function(t){var o=t.row;return[a("span",[a("a",{on:{click:function(t){return e.handleTransferRecord(o)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 交易日志")],1)])]}}])}),a("a-form-model",{ref:"form",staticStyle:{"margin-top":"10px"},attrs:{model:e.model,rules:e.validatorRules}},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{labelCol:{span:2},wrapperCol:{span:22},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{placeholder:"请输入变更原因",rows:2,maxLength:150},model:{value:e.model.changeReason,callback:function(t){e.$set(e.model,"changeReason",t)},expression:"model.changeReason"}})],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505H"},on:{change:e.getFileList}})],1),e.checkSign?[a("a-spin",{staticStyle:{height:"100%"},attrs:{spinning:e.loading,tip:"信息加载中，请稍后..."}},[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}],null,!1,3707583208)},[a("span",[e._v("调换前房屋信息：")]),a("vxe-grid",{ref:"originTable",staticStyle:{"margin-top":"10px"},attrs:{border:"",data:e.sourceDataSource,columns:e.columns},scopedSlots:e._u([{key:"houseState",fn:function(t){var o=t.row;return[a("span",["9"==o.houseState?a("span",[e._v("新建档")]):e._e(),"2"==o.houseState?a("span",[e._v("待备案")]):e._e(),"0"==o.houseState?a("span",[e._v("正常")]):e._e(),"4"==o.houseState?a("span",[e._v("待注销")]):e._e(),"5"==o.houseState?a("span",[e._v("已注销")]):e._e(),"8"==o.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}},{key:"state",fn:function(t){var o=t.row;return[a("span",["0"==o.state?a("span",[e._v("已交")]):e._e(),"9"==o.state?a("span",[e._v("新建")]):e._e(),"1"==o.state?a("span",[e._v("未交")]):e._e(),"3"==o.state?a("span",[e._v("待全额退款")]):e._e(),"4"==o.state?a("span",[e._v("待销户")]):e._e(),"5"==o.state?a("span",[e._v("已注销")]):e._e(),"7"==o.state?a("span",[e._v("待资金转账")]):e._e()])]}},{key:"action",fn:function(t){var o=t.row;return[a("span",[a("a",{on:{click:function(t){return e.handleTransferRecord(o)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 交易日志")],1)])]}}],null,!1,288720302)}),a("span",[e._v("调换后房屋信息：")]),a("vxe-grid",{ref:"targetTable",staticStyle:{"margin-top":"10px"},attrs:{border:"",size:"middle",columns:e.columns,data:e.targetDataSource},scopedSlots:e._u([{key:"houseState",fn:function(t){var o=t.row;return[a("span",["9"==o.houseState?a("span",[e._v("新建档")]):e._e(),"2"==o.houseState?a("span",[e._v("待备案")]):e._e(),"0"==o.houseState?a("span",[e._v("正常")]):e._e(),"4"==o.houseState?a("span",[e._v("待注销")]):e._e(),"5"==o.houseState?a("span",[e._v("已注销")]):e._e(),"8"==o.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}},{key:"state",fn:function(t){var o=t.row;return[a("span",["0"==o.state?a("span",[e._v("已交")]):e._e(),"9"==o.state?a("span",[e._v("新建")]):e._e(),"1"==o.state?a("span",[e._v("未交")]):e._e(),"3"==o.state?a("span",[e._v("待全额退款")]):e._e(),"4"==o.state?a("span",[e._v("待销户")]):e._e(),"5"==o.state?a("span",[e._v("已注销")]):e._e(),"7"==o.state?a("span",[e._v("待资金转账")]):e._e()])]}},{key:"action",fn:function(t){var o=t.row;return[a("span",[a("a",{on:{click:function(t){return e.handleTransferRecord(o)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 交易日志")],1)])]}}],null,!1,288720302)}),a("a-form-model",{ref:"form",staticStyle:{"margin-top":"10px"},attrs:{model:e.model,rules:e.validatorRules}},[a("a-row",{staticClass:"maintainInfo"},[a("a-col",{attrs:{span:4}},[e._v("变更人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"changePerson"}},[e._v("\n                  "+e._s(e.model.changePerson)+"\n                ")])],1),a("a-col",{attrs:{span:4}},[e._v("\n                变更日期\n              ")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"changePerson"}},[e._v("\n                  "+e._s(e._f("formatTimer")(e.model.changeTime))+"\n                ")])],1),a("a-col",{attrs:{span:4}},[e._v("变更原因")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{prop:"changePerson"}},[e._v("\n                  "+e._s(e.model.changeReason)+"\n                ")])],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505H",busiNo:e.reqNo,"is-detail":!0},on:{change:e.getFileList}})],1)]:e._e(),a("select-region-layer-modal",{ref:"selectModal",attrs:{"need-type":"4"},on:{ok:e.selectOK}}),a("trading-record",{ref:"tradIngRecord",attrs:{zIndex:e.zIndex}})],2)},n=[],i=a("0fea"),l=a("917b"),s=a("9fbd"),r=a("3ed7"),c=a("11bf"),d=a("7dcb"),u=a("2b0e"),p=a("9fb0"),f={name:"OwnerHouseChangeModal",components:{TypeAttachmentUpload:s["default"],SelectRegionLayerModal:c["default"],TradingRecord:d["default"]},mixins:[l["a"]],filters:{formatTimer:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var n=t.getDate();n=n<10?"0"+n:n;var i=t.getHours();i=i<10?"0"+i:i;var l=t.getMinutes();l=l<10?"0"+l:l;var s=t.getSeconds();return s=s<10?"0"+s:s,a+"-"+o+"-"+n}},props:["onlyView","zIndex"],data:function(){var e=this;return{visible:!1,loading:!1,model:{placePsnFlag:"Y"},labelCol:{span:6},wrapperCol:{span:18},confirmLoading:!1,url:{getChangeInfoByRegionId:"/base/rAccInfo/getChangeInfoByRegionId",ownerHouseChange:"/base/rHouseInfo/ownerHouseChange",queryOwnerHouseChangeByReqId:"/base/rHouseInfo/queryOwnerHouseChangeByReqId"},validatorRules:{changeReason:[{required:!0,message:"请输入变更原因",trigger:"blur"},{max:150,message:"最多输入150个字符",trigger:"blur"}]},activeKey:["1","2"],fileIdList:[],checkSign:!1,reqNo:"",columns:[{title:"房屋位置",align:"left",width:200,field:"address",showOverflow:"tooltip"},{title:"账户编号",align:"center",width:200,field:"code",showOverflow:"tooltip"},{title:"业主姓名",align:"center",width:100,field:"psnName"},{title:"证件号",align:"center",width:200,field:"certNo",showOverflow:"tooltip"},{title:"建筑面积(m²)",align:"right",width:this.isFont(),field:"struArea",formatter:function(e){var t=e.cellValue;return Object(r["g"])(t,3)}},{title:"房屋售价(元)",align:"right",width:this.isFont(),field:"totalPrice",formatter:function(t){var a=t.cellValue;return e.formatAmount(a)}},{title:"应交金额(元)",align:"right",width:this.isFont(),field:"dueAmount",formatter:function(t){var a=t.cellValue;return e.formatAmount(a)}},{title:"账户余额(元)",align:"right",width:this.isFont(),field:"balance",formatter:function(t){var a=t.cellValue;return e.formatAmount(a)}},{title:"冻结金额(元)",align:"right",width:this.isFont(),field:"balanceFrozen",formatter:function(t){var a=t.cellValue;return e.formatAmount(a)}},{title:"房屋状态",align:"center",width:100,field:"houseState",slots:{default:"houseState"}},{title:"账户状态",align:"center",width:100,field:"state",slots:{default:"state"}},{title:"操作",field:"action",align:"center",fixed:"right",width:120,slots:{default:"action"}}],showColumns:[],targetDataSource:[],sourceDataSource:[],sourceRegionId:"",targetRegionId:""}},methods:{isFont:function(){return 18==u["default"].ls.get(p["w"])?140:120},handleTransferRecord:function(e){this.$refs.tradIngRecord.show(e.code),this.$refs.tradIngRecord.title="交易日志"},onSearchRegion:function(){this.$refs.selectModal.showModal()},selectOK:function(e){var t=this;this.targetDataSource=[],this.targetRegionId=e.id,Object(i["e"])(this.url.getChangeInfoByRegionId,{regionId:e.id}).then((function(e){e.result&&t.targetDataSource.push(e.result)}))},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},updateModel:function(e){this.model=e},close:function(){this.model={placePsnFlag:"Y"},this.targetDataSource=[],this.sourceDataSource=[],this.targetRegionId="",this.sourceRegionId="",this.$emit("close"),this.checkSign=!1,this.visible=!1},change:function(e){var t=this;this.visible=!0,this.sourceRegionId=e,this.sourceDataSource=[],Object(i["e"])(this.url.getChangeInfoByRegionId,{regionId:e}).then((function(e){e.result&&t.sourceDataSource.push(e.result)})),this.showColumns=[],this.$nextTick((function(){t.showColumns=t.updateTableSize(t.columns),t.$refs.fileupload.initData()}))},initData:function(e){var t=this;this.loading=!0,this.checkSign=!0;var a=this;Object(i["e"])(this.url.queryOwnerHouseChangeByReqId,{reqId:e}).then((function(o){if(o.result)if(a.model=o.result.baseInfoMap,t.onlyView){var n=o.result.sourceInfo.psnName,l=o.result.sourceInfo.certNo;o.result.sourceInfo.psnName=o.result.targetInfo.psnName,o.result.sourceInfo.certNo=o.result.targetInfo.certNo,o.result.targetInfo.psnName=n,o.result.targetInfo.certNo=l,a.sourceDataSource=[o.result.targetInfo],a.targetDataSource=[o.result.sourceInfo]}else a.sourceDataSource=[o.result.sourceInfo],a.targetDataSource=[o.result.targetInfo];Object(i["e"])("/common/bBusiReq/queryById",{id:e}).then((function(e){e.success&&(t.reqNo=e.result.reqNo,t.$nextTick((function(){t.$refs.fileupload.initData()})),t.loading=!1)}))}))},toChange:function(){var e=this,t=this;if(!this.$refs.fileupload.checkData())return!1;this.$refs.form.validate((function(a){a&&(t.confirmLoading=!0,e.model.fileIdList=e.fileIdList,e.model.sourceRegionId=e.sourceRegionId,e.model.targetRegionId=e.targetRegionId,Object(i["j"])(e.url.ownerHouseChange,e.model).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.confirmLoading=!1,t.close()):(t.$message.warning(e.message),t.confirmLoading=!1)})))}))},formatAmount:function(e){var t={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};return Number(e).toLocaleString("zh-CN",t)}}},m=f,h=(a("6eb9"),a("2877")),b=Object(h["a"])(m,o,n,!1,null,"b3b5c1ac",null);t["default"]=b.exports},fafd:function(e,t,a){},ff86:function(e,t,a){"use strict";a("25da")}}]);