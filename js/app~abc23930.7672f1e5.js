(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~abc23930"],{"04f0":function(e,t,a){"use strict";a("1470")},"122a":function(e,t,a){"use strict";a("9518")},"12c8":function(e,t,a){},1470:function(e,t,a){},2187:function(e,t,a){"use strict";a("dc1c")},"451a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-row",{staticClass:"rowContent",attrs:{gutter:12}},[a("a-col",{attrs:{xxl:4,xl:5,span:6}},[a("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{padding:0}}},[a("div",{staticClass:"row_1"},[a("a-space",{staticStyle:{"flex-shrink":"0"}},[a("a",{on:{click:function(t){return e.back()}}},[a("a-icon",{attrs:{type:"left-circle-o"}}),e._v(" 返回")],1),a("a",{on:{click:function(t){return e.toSwitch()}}},[a("a-icon",{attrs:{type:"retweet"}}),e._v(" 切换")],1)])],1),a("div",{staticClass:"row_2"},[a("a-space",[a("a-input",{attrs:{placeholder:"输入名称查询"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("a-button",{attrs:{type:"primary",icon:"search",title:"查询"},on:{click:e.onSearch}}),a("a-button",{attrs:{type:"primary",icon:"reload",title:"重置"},on:{click:e.refresh}})],1)],1),a("div",{staticClass:"row_3"},[a("a-tree",{attrs:{showLine:"",selectedKeys:e.selectedKeys,checkStrictly:!0,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,autoExpandParent:e.autoExpandParent,expandedKeys:e.iExpandedKeys,loading:e.loading},on:{select:e.onSelect,expand:e.onExpand}})],1)])],1),a("a-col",{attrs:{xxl:20,xl:19,span:18}},[a("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{padding:0}}},["1"==e.selectedInfo.baseType?a("bld-change-list",{attrs:{disabled:"5"===e.regionState,bldRegionId:e.selectedKeys,bldRegionName:e.selectedInfo.name,"is-district":e.isDistrict,bldRegionInfo:e.selectedInfo},on:{"tree-load":e.refreshcell}}):e._e(),"2"==e.selectedInfo.baseType?a("cell-info-list",{attrs:{disabled:"5"===e.regionState,bldId:e.selectedKeys,bldInfo:e.selectedInfo},on:{"tree-load":e.refreshcell}}):e._e(),"3"==e.selectedInfo.baseType?a("house-info-list",{attrs:{disabled:"5"===e.regionState,cellId:e.selectedKeys,cellInfo:e.selectedInfo}}):e._e()],1)],1),a("select-region-modal",{ref:"selectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,"region-ids":e.regionId,title:"小区","query-data":e.queryData,columns:e.columns},on:{ok:e.selectOK,initComp:e.initComp}})],1)},i=[],o=a("0fea"),r=a("1556"),s=a("4cf2"),l=a("9a8d"),c=a("e4b2");function d(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var h={name:"RegionTreeList",components:{BldChangeList:s["default"],SelectRegionModal:r["default"],CellInfoList:l["default"],HouseInfoList:c["default"]},props:{regionId:{type:String,default:""},regionName:{type:String,default:""},regionState:{type:String,default:""},isDistrict:{type:Boolean,default:!1}},data:function(){return{treeData:[],iExpandedKeys:[],loading:!1,autoExpandParent:!0,selectedKeys:[],selectedInfo:{},url:{queryRegionTreeList:"/base/rtRegion/queryRegionTreeList"},queryParams:{},name:"",modalWidth:1250,multi:!1,queryData:{baseType:"1"},columns:[{title:"名称",align:"left",dataIndex:"name"},{title:"地址",align:"left",dataIndex:"address"},{title:"所属区县",align:"center",dataIndex:"zoneCode_dictText"},{title:"编码",align:"center",dataIndex:"code"}]}},created:function(){this.queryParams.regionId=this.regionId,this.loadTree()},methods:{loadTree:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loading=!0;var n=this;n.treeData=[],Object(o["e"])(this.url.queryRegionTreeList,this.queryParams).then((function(i){if(i){for(var o=0;o<i.length;o++){var r=i[o];n.treeData.push(r),n.setThisExpandedKeys(r,e)}a&&(t.selectedKeys=[i[0].key],t.selectedInfo=i[0]),t.loading=!1}}))},setThisExpandedKeys:function(e,t){if(e.children&&e.children.length>0&&(this.iExpandedKeys.push(e.key),"search"==t))for(var a=0;a<e.children.length;a++)this.setThisExpandedKeys(e.children[a])},onExpand:function(e){this.iExpandedKeys=e,this.autoExpandParent=!1},onSearch:function(){this.queryParams.name=this.name,this.loadTree("search")},refresh:function(){this.name="",this.queryParams.name="",this.loadTree()},refreshcell:function(){this.loadTree(void 0,!1)},onSelect:function(e,t){if(0!==e.length){this.selectedKeys[0]!==e[0]&&(this.selectedKeys=[e[0]]);var a=t.node.dataRef;this.selectedInfo=a}},selectOK:function(e){if(e){var t,a=[],n=[],i=d(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push(o["id"]),n.push(o["name"])}}catch(r){i.e(r)}finally{i.f()}this.regionId=a.join(","),this.regionName=n.join(","),this.queryParams.regionId=this.regionId,this.refresh()}},initComp:function(e){this.regionName=e},toSwitch:function(){this.$refs.selectModal.showModal()},back:function(){this.$emit("back")}}},y=h,m=(a("fe0b"),a("e922"),a("2877")),p=Object(m["a"])(y,n,i,!1,null,"7a8cc823",null);t["default"]=p.exports},"4c0f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",{staticClass:"collapseTitle"},[e._v("\n          "+e._s(e.headerTitle)+"\n          "),e.isShowTipInfo?a("span",{staticClass:"requiredText",staticStyle:{"font-size":"12px"}},[e._v("未备案的账户,请先备案后再进行选择")]):e._e()])]},proxy:!0}])},[a("div",{staticStyle:{height:"99%"}},[a("vxe-table",{attrs:{data:e.tableData,border:""}},[a("vxe-table-column",{attrs:{field:"psnName",align:"left",headerAlign:"left",title:"业主姓名",width:"110"}}),a("vxe-table-column",{attrs:{field:"psnCertType_dictText",align:"left",headerAlign:"left",title:"证件类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{readOnly:"",dictCode:"cert_type"},model:{value:n.psnCertType,callback:function(t){e.$set(n,"psnCertType",t)},expression:"row.psnCertType"}})]}}])}),a("vxe-table-column",{attrs:{field:"psnCertNo",align:"left",headerAlign:"left",title:"证件号码",minWidth:"200"}}),a("vxe-table-column",{attrs:{field:"name",align:"left",headerAlign:"left",title:"账户名称",width:"200"}}),a("vxe-table-column",{attrs:{field:"code",align:"left",headerAlign:"left",title:"收款账号",width:"200"}}),a("vxe-table-column",{attrs:{field:"bankName",align:"left",headerAlign:"left",title:"开户银行",width:"180"}}),e.disabled?e._e():a("vxe-table-column",{attrs:{field:"action",title:"操作",align:"center",headerAlign:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.code||e.WhetherThePermissionPasses("RefundAccFlag")?e._e():a("a",{on:{click:function(t){return e.handleColAccPsnRecord(n)}}},[a("a-icon",{attrs:{type:"database"}}),e._v("备案")],1),n.code&&n.code.length>0?a("a",{on:{click:function(t){return e.handleColAccPsnChange(n)}}},[a("a-icon",{attrs:{type:"swap"}}),e._v("变更")],1):e._e(),n.code&&n.code.length>0?a("a-divider",{attrs:{type:"vertical"}}):e._e(),n.code&&n.code.length>0?a("a",{on:{click:function(t){return e.selectAccount(n)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v("选择该账户")],1):e._e()]}}],null,!1,3620787146)})],1)],1)])],1),a("change-record-modal",{ref:"changeRecord"}),a("col-acc-psn-info-detail",{ref:"colAccPsnDetail"}),a("col-acc-psn-info-modal",{ref:"colAccPsnModel",on:{ok:e.queryInfo}}),a("col-acc-info-detail",{ref:"colAccDetail"})],1)},i=[],o=a("ba05"),r=a("ff43"),s=a("31fb"),l=a("baa7"),c=(a("6eb7"),a("eccd")),d=a("0a5e"),u=a("6fa9"),f=a("3cd4"),h=a("fdcf"),y={name:"RefundColAccPsnInfoList",mixins:[d["a"],l["RefundColAccPsnInfoList"]],components:{MESSuperQuery:u["default"],ChangeRecordModal:o["default"],ColAccPsnInfoDetail:r["default"],ColAccPsnInfoModal:s["default"],JDDictSelectTag:c["default"],ColAccInfoDetail:f["default"]},props:{isShowTipInfo:{type:Boolean,default:!0}},data:function(){return{fileName:"RefundColaccPsnInfoList",description:"退款申请业主信息组件"}},methods:{WhetherThePermissionPasses:h["a"]}},m=y,p=(a("5c33"),a("2877")),g=Object(p["a"])(m,n,i,!1,null,"5c9dd564",null);t["default"]=g.exports},"5c33":function(e,t,a){"use strict";a("82d2a")},"5c77":function(e,t,a){},"60ce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.houseInfoShow,expression:"!houseInfoShow"}],staticClass:"h-full flex flex-column"},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery,reset:e.reset},scopedSlots:e._u([{key:"isDeposit",fn:function(){return[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否已交"},model:{value:e.queryParam.isDeposit,callback:function(t){e.$set(e.queryParam,"isDeposit",t)},expression:"queryParam.isDeposit"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("已交")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未交")])],1)]},proxy:!0}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"sort-config":{defaultSort:{field:"rr.create_time",order:"desc"}},"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,rowStyle:e.setRowStyle,"checkbox-config":e.checkMethod,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),"table-height":"auto",tableColumn:e.columns,customColumns:{name:"RegionInfoList"}},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("a-upload",{attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"import",loading:e.loading}},[e._v("导入")])],1),a("a-upload",{directives:[{name:"has",rawName:"v-has",value:"region:his",expression:"'region:his'"}],attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrlHis},on:{change:e.handleImportExcel}},[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"import",loading:e.loading}},[e._v("历史数据导入")])],1),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"download"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.handleInfo({},"add")}}},[e._v("新建")]),e.showSes?a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.sesRegion}},[e._v("产权拉取")]):e._e(),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDelCheck}},[a("a-icon",{attrs:{type:"delete"}}),e._v("批量删除")],1),e.isAdmin?a("a-menu-item",{key:"2",on:{click:e.openAcc}},[a("a-icon",{attrs:{type:"plus"}}),e._v("公共户开户")],1):e._e(),e.isAdmin?a("a-menu-item",{key:"3",on:{click:e.cancelOpenAcc}},[a("a-icon",{attrs:{type:"rollback"}}),e._v("撤销公共户")],1):e._e(),e.isAdmin?a("a-menu-item",{key:"4",on:{click:e.openAccHangOn}},[a("a-icon",{attrs:{type:"plus"}}),e._v("挂账户开户")],1):e._e()],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)]},proxy:!0},{key:"name",fn:function(t){var n=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(n))])]}},{key:"houseInfo",fn:function(t){t.text;var n=t.row;return[a("a-space",[a("span",[e._v(e._s(n.nextNodeNum?n.nextNodeNum:0))]),a("span",[e._v("/")]),a("span",[e._v(e._s(n.houseNum?n.houseNum:0))]),a("span",[e._v("/")]),a("span",[e._v(e._s(e.formatterAmount(n.struArea,3)))])])]}},{key:"accState_dictText",fn:function(t){var n=t.text,i=t.row;return[9==i.accState||null==i.accState?a("span",[e._v("未开户")]):a("span",[e._v(e._s(n))])]}},{key:"state",fn:function(t){t.text;var n=t.row;return["9"===n.state?a("a-badge",{attrs:{status:"processing",text:"新建档"}}):e._e(),"2"===n.state?a("a-badge",{attrs:{status:"warning",text:"待备案"}}):e._e(),"0"===n.state?a("a-badge",{attrs:{status:"success",text:"正常"}}):e._e(),"4"===n.state?a("a-badge",{attrs:{status:"warning",text:"待注销"}}):e._e(),"6"===n.state?a("a-badge",{attrs:{status:"warning",text:"待归属变更"}}):e._e(),"7"===n.state?a("a-badge",{attrs:{status:"warning",text:"待撤销备案"}}):e._e()]}},{key:"action",fn:function(t){t.text;var n=t.row;return["9"===n.state?a("span",[a("a-popconfirm",{attrs:{title:"是否提交备案申请?"},on:{confirm:function(){return e.submitRecord(n)}}},[a("a",{attrs:{disabled:"regionId"===n.showRecords}},[a("a-icon",{attrs:{type:"cloud-upload"}}),e._v(" 提交备案")],1)]),a("a-divider",{directives:[{name:"show",rawName:"v-show",value:"5"!==n.state,expression:"row.state !== '5'"}],attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleInfo(n,"edit")}}},[a("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑")],1)],1):"2"===n.state?a("span",[a("a-popconfirm",{attrs:{title:"是否提交备案申请?"},on:{confirm:function(){return e.submitRecord(n)}}},[a("a",{attrs:{disabled:"regionId"===n.showRecords}},[a("a-icon",{attrs:{type:"cloud-upload"}}),e._v(" 提交备案")],1)]),"1"===n.showRecordBtn&&e.isAdmin?[a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.adoptRecord(n)}}},[a("a-icon",{attrs:{type:"database"}}),e._v(" 备案")],1)]:e._e()],2):a("span",[a("get-table-action-buttons",[a("a",{on:{click:function(t){return e.toBld(n)}}},[a("a-icon",{attrs:{type:"bank"}}),e._v(" 自然幢")],1),"5"!==n.state&&"4"!==n.state&&e.isAdmin?a("a",{attrs:{disabled:"7"===n.state},on:{click:function(t){return e.handleRevokeRecord(n)}}},[a("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销备案")],1):e._e(),0==n.state&&e.showSes?a("a",{on:{click:function(t){return e.getRegionByFc(n)}}},[a("a-icon",{attrs:{type:"api"}}),e._v(" 房产小区")],1):e._e(),0==n.state&&e.showSes?a("a",{on:{click:function(t){return e.getBldByFc(n)}}},[a("a-icon",{attrs:{type:"api"}}),e._v(" 房产自然幢")],1):e._e(),a("a",{on:{click:function(t){return e.viewBuildingAnnotation(n)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 鸟瞰图")],1),a("a",{on:{click:function(t){return e.editBuildingAnnotation(n)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 标记楼盘")],1)])],1)]}}])}),a("j-modal",{attrs:{visible:e.visibleRevoke,title:e.revokeTitle,okText:"确认","cancel-text":"取消","confirm-loading":e.loading},on:{cancel:e.handleCancel,ok:e.handleOk}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",{attrs:{layout:"vertical",form:e.form}},[a("a-form-item",{attrs:{label:"撤销备案原因"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["revokeReason",{rules:[{required:!0,message:"请输入原因!"}]}],expression:"['revokeReason', { rules: [{ required: true, message: '请输入原因!' }] }]"}],attrs:{placeholder:"请输入撤销备案原因",rows:4},model:{value:e.revokeReason,callback:function(t){e.revokeReason=t},expression:"revokeReason"}})],1)],1)],1)],1)],1)],1),e.houseInfoShow?[a("BldInfoList",{ref:"bldInfoList",attrs:{zoneCodes:e.zoneCodes,"bld-region-code":e.bldRegionCode,bldRegionId:e.bldRegionId,bldRegionName:e.bldRegionName,isDistrict:e.isDistrict},on:{back:e.back}})]:e._e(),a("region-info-modal",{ref:"modalForm",attrs:{disabled:e.disabled},on:{ok:e.modalFormClear}}),a("region-info-detail",{ref:"detailModalForm",attrs:{isExamine:!0},on:{ok:e.modalFormOk}}),a("region-info-record",{ref:"recordModalForm",on:{ok:e.modalFormOk}}),a("region-info-open-acc",{ref:"openAcc",on:{ok:e.modalFormOk}}),a("region-info-open-acc-batch",{ref:"openAccBatch",on:{ok:e.modalFormOk}}),a("download-by-corp",{ref:"downloadByCorp",on:{back:e.chooseCorp}}),a("a-modal",{attrs:{title:"产权小区拉取",width:500,visible:e.regionVisible,maskClosable:!1,bodyStyle:{height:"150px"},cancelText:"关闭",okText:"拉取"},on:{ok:e.regionHandleOk,cancel:e.regionHandleCancel}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:6}},[a("span",[e._v("小区名称：")])]),a("a-col",{attrs:{span:18}},[a("a-input",{attrs:{placeholder:"请输入小区名称"},model:{value:e.sesRegionName,callback:function(t){e.sesRegionName=t},expression:"sesRegionName"}})],1)],1)],1)],2)},i=[],o=a("eb87"),r=a("a596"),s=a("6cc3"),l=a("7f7c"),c=a("6fa9"),d=a("bd6c"),u=a("5108"),f=a("0a5e"),h=a("429e"),y=a("25c2"),m=a("2d4c"),p=a("3ed7"),g={name:"RegionInfoList",methods:{formatterAmount:p["g"]},components:{GetTableActionButtons:m["default"],RegionInfoModal:o["default"],RegionInfoDetail:r["default"],MESSuperQuery:c["default"],RegionInfoRecord:s["default"],RegionInfoOpenAcc:d["default"],RegionInfoOpenAccBatch:u["default"],BldInfoList:h["default"],DownloadByCorp:y["default"]},mixins:[f["a"],l["RegionInfoList"]],data:function(){return{fileName:"RegionInfoList",description:"区域建档管理",loading:!1}}},v=g,b=(a("7307"),a("04f0"),a("2877")),x=Object(b["a"])(v,n,i,!1,null,"51826fce",null);t["default"]=x.exports},"82d2a":function(e,t,a){},9518:function(e,t,a){},"98aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName},on:{ok:e.handleSuperQuery}}),a("div",[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,serial:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1},scopedSlots:e._u([{key:"reqNo",fn:function(t){var n=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.showDetail(i,i.id,"归属变更")}}},[e._v(e._s(n))])]}},{key:"state",fn:function(e){var t=e.text;e.row;return[a("a-badge",0===t?{attrs:{status:"success",text:"完成"}}:2===t?{attrs:{status:"processing",text:"待审核"}}:4===t?{attrs:{status:"warning",text:"待撤销"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"action",fn:function(t){t.text;var n=t.row;return[2===n.result?a("a",{on:{click:function(t){return e.toDeal(n,n.id,"归属变更")}}},[e._v("审核")]):e._e()]}}])}),a("task-deal-modal",{ref:"taskDealModal",attrs:{"flow-id":e.businessKey,"task-primary-key":e.taskId},on:{ok:e.modalFormOk}})],1)],1)},i=[],o=a("0a5e"),r=a("6fa9"),s=a("9deb"),l=a("211e"),c=a("b801"),d={name:"RegionInfoCheckList",mixins:[o["a"],c["a"],s["RegionInfoCheckList"]],components:{TaskDealModal:l["default"],MESSuperQuery:r["default"]}},u=d,f=a("2877"),h=Object(f["a"])(u,n,i,!1,null,"0be19b66",null);t["default"]=h.exports},b02b:function(e,t,a){e.exports=a.p+"21936ff37bd1f4a93f04e829197fd5f1.md"},bb15:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.houseInfoShow,expression:"!houseInfoShow"}],staticClass:"h-full flex flex-column"},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,rowStyle:e.setRowStyle,"checkbox-config":e.checkMethod,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,"table-height":"auto",tableColumn:e.columns,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),customColumns:{name:"RegionChangeList"}},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.isAdmin?a("a-button",{attrs:{icon:"edit",type:"primary"},on:{click:e.batchChange}},[e._v("小区归属变更")]):e._e(),e.isAdmin?a("a-button",{attrs:{icon:"edit",type:"primary"},on:{click:e.batchChangeBank}},[e._v("小区承办银行变更")]):e._e(),e.isAdmin?a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"delete",type:"primary"},on:{click:e.batchDelete}},[e._v("清理\n          ")]):e._e(),e.isAdmin&&e.WhetherThePermissionPasses("AllowBldMergeFlag")?a("a-button",{attrs:{icon:"edit",type:"primary"},on:{click:e.regionMerge}},[e._v("小区合并")]):e._e()]},proxy:!0},{key:"name",fn:function(t){var n=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(n))])]}},{key:"houseInfo",fn:function(t){t.text;var n=t.row;return[a("a-space",[a("span",[e._v(e._s(n.nextNodeNum?n.nextNodeNum:0))]),a("span",[e._v("/")]),a("span",[e._v(e._s(n.houseNum?n.houseNum:0))]),a("span",[e._v("/")]),a("span",[e._v(e._s(e.formatterAmount(n.struArea,3)))])])]}},{key:"accState_dictText",fn:function(t){var n=t.text,i=t.row;return[9==i.accState||null==i.accState?a("span",[e._v("未开户")]):a("span",[e._v(e._s(n))])]}},{key:"number",fn:function(t){t.text;var n=t.row;return[a("span",[e._v("\n            "+e._s(n.nextNodeNum?n.nextNodeNum:0)+" / "+e._s(n.houseNum?n.houseNum:0)+" / "+e._s(e.formatterAmount(n.struArea,3))+"\n          ")])]}},{key:"state",fn:function(t){t.text;var n=t.row;return["0"===n.state?a("a-badge",{attrs:{status:"success",text:"正常"}}):e._e(),"4"===n.state?a("a-badge",{attrs:{status:"warning",text:"待注销"}}):e._e(),"5"===n.state?a("a-badge",{attrs:{status:"warning",text:"已注销"}}):e._e(),"6"===n.state?a("a-badge",{attrs:{status:"warning",text:"待归属变更"}}):e._e(),"7"===n.state?a("a-badge",{attrs:{status:"warning",text:"待撤销备案"}}):e._e()]}},{key:"action",fn:function(t){t.text;var n=t.row;return[e.isAdmin?a("a",{attrs:{disabled:"4"===n.state||"5"===n.state||"6"===n.state},on:{click:function(t){return e.infoChange(n)}}},[a("a-icon",{attrs:{type:"swap"}}),e._v(" 信息变更")],1):e._e(),e.isAdmin?a("a-divider",{attrs:{type:"vertical"}}):e._e(),a("a",{on:{click:function(t){return e.changeRecord(n)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 变更记录")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.toBld(n)}}},[a("a-icon",{attrs:{type:"bank"}}),e._v(" 自然幢")],1)]}}])})],1)],1),e.houseInfoShow?[a("region-tree-list",{attrs:{"region-id":e.bldRegionId,"region-name":e.bldRegionName,"region-state":e.bldRegionState,"is-district":e.isDistrict},on:{back:e.back}})]:e._e(),a("region-info-detail",{ref:"detailModalForm"}),a("region-batch-change-place-modal",{ref:"changePlace",on:{ok:e.modalFormOk}}),a("region-batch-change-bank-modal",{ref:"changeBank",on:{ok:e.modalFormOk}}),a("region-merge",{ref:"regionMerge",on:{ok:e.modalFormOk}}),a("change-record-modal",{ref:"changeRecord"}),a("region-info-change-modal",{ref:"changeModel",on:{ok:e.modalFormOk}})],2)},i=[],o=a("a596"),r=a("73ba"),s=a("6fa9"),l=a("4a2d"),c=a("ba05"),d=a("8466"),u=a("0a5e"),f=a("451a"),h=a("cb2a"),y=a("db44"),m=a("3ed7"),p={name:"RegionInfoList",methods:{formatterAmount:m["g"]},mixins:[u["a"],r["RegionChangeList"]],components:{RegionInfoDetail:o["default"],MESSuperQuery:s["default"],RegionBatchChangePlaceModal:l["default"],ChangeRecordModal:c["default"],RegionInfoChangeModal:d["default"],RegionTreeList:f["default"],RegionBatchChangeBankModal:h["default"],RegionMerge:y["default"]},data:function(){return{fileName:"RegionChangeList",description:"区域变更列表"}}},g=p,v=(a("a73f"),a("122a"),a("2877")),b=Object(v["a"])(g,n,i,!1,null,"1c90cdcc",null);t["default"]=b.exports},dc1c:function(e,t,a){},e24a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%"}}},[a("div",{staticClass:"listContent"},[e.showTree?a("div",{staticClass:"leftTree"},[a("a-space",{staticClass:"treeSearch"},[a("a-input-search",{attrs:{placeholder:"请输入小区名称"},on:{search:e.onSearch},model:{value:e.regionName,callback:function(t){e.regionName=t},expression:"regionName"}})],1),0===e.treeData.length?a("a-empty",{staticStyle:{"margin-top":"50%"},attrs:{description:"暂无数据"}}):a("a-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"content-tree ",attrs:{"element-loading-text":"加载中，请稍后。。。",showLine:"",selectedKeys:e.selectedKeys,checkStrictly:!0,loadedKeys:e.loadedKeys,expandedKeys:e.iExpandedKeys,dropdownStyle:{maxHeight:"200px",overflow:"auto"},"load-data":e.treeLoad,treeData:e.treeData},on:{select:e.onSelect,"update:expandedKeys":function(t){e.iExpandedKeys=t},"update:expanded-keys":function(t){e.iExpandedKeys=t}}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.maintainInfoShow,expression:"!maintainInfoShow"}],staticClass:"content-table"},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,isInitQuery:!0,type:"queryList"},on:{ok:e.handleSuperQuery,reset:function(t){e.queryParam.utilityId=null}},scopedSlots:e._u([{key:"utility",fn:function(t){var n=t.row;return[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,filterTreeNode:e.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.utilityList,placeholder:"请选择设施设备类型"},on:{change:e.selectUtility},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticStyle:{height:"calc(100% - 32px)"}},[a("v-table",{ref:"table",attrs:{"row-config":{height:120,useKey:!0},toolbar:!0,bordered:"",stripe:!0,checkbox:e.IsMenu&&!e.isDetail,"if-init-query":!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,reload:e.queryPage,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto",customColumns:{name:"RegionUtilityList"}},scopedSlots:e._u([e.IsMenu&&!e.isDetail?{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.handleAddNew}},[e._v("新建")]),a("a-button",{attrs:{icon:"printer",type:"primary"},on:{click:e.PrintQRCode}},[e._v("打印二维码")]),a("a-button",{on:{click:e.batchDelete}},[a("a-icon",{attrs:{type:"delete"}}),e._v("\n                批量删除\n              ")],1)],1)]},proxy:!0}:null,{key:"describe",fn:function(t){var n=t.text,i=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(n))])]}},e.IsMenu?{key:"action",fn:function(t){t.text;var n=t.row;return[a("a",{on:{click:function(t){return e.handleUpdate(n)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v("\n              编辑")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleCopy(n)}}},[a("a-icon",{attrs:{type:"copy"}}),e._v("\n              复制")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("\n                更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.openServiceModal(n)}}},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" 维修维保记录")],1)])],1)],1)]}}:null],null,!0)})],1)],1),e.maintainInfoShow?a("div",{staticClass:"content-table"},[a("MaintainInfoList",{attrs:{regUtilityId:e.utilityId,utilityName:e.utilityName},on:{back:function(t){e.maintainInfoShow=!1}}})],1):e._e()]),a("region-utility-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("region-utility-detail",{ref:"detailForm"}),a("utility-service-modal",{ref:"serviceModal"}),a("region-utility-code",{ref:"regionUtilityCode"})],1)},i=[],o=(a("6eb7"),a("0fea")),r=a("ac0d"),s=a("0a5e"),l=a("6fa9"),c=a("d89c"),d=a("d7aa"),u=a("f792"),f=a("b098"),h=a("dc94"),y=a("0a57");a("ca00");function m(e){return v(e)||g(e)||x(e)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e){if(Array.isArray(e))return w(e)}function b(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=x(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw o}}}}function x(e,t){if(e){if("string"==typeof e)return w(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var k={name:"RegionUtilityList",mixins:[s["a"],r["b"]],components:{UtilityServiceModal:h["default"],RegionUtilityModal:c["default"],RegionUtilityDetail:d["default"],MESSuperQuery:l["default"],MaintainInfoList:u["default"],JTreeSelect:f["default"],RegionUtilityCode:y["default"]},props:{initRegion:{type:Boolean,default:!0},isDetail:{type:Boolean,default:!1}},data:function(){var e=this;return{IsMenu:!0,fileName:"RegionUtilityList",description:"公共设施设备管理页面",queryObj:[{type:"slot",slotName:"utility",queryType:"in",value:"utilityId",label:"设施设备"}],columns:[{title:"设施设备名称",headerAlign:"left",align:"left",field:"describe",minWidth:160,slot:!0},{title:"设施设备类型",headerAlign:"left",align:"left",field:"utilityName",minWidth:160},{title:"安装位置",headerAlign:"left",align:"left",field:"instPlaceName",width:"20%"},{title:"保修期",align:"left",field:"expireDate",headerAlign:"left",width:"10%"},{title:"操作",field:"action",align:"center",fixed:"right",width:220,hidden:this.isDetail,slot:!0}],treeLoading:!1,loadedKeys:[],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/regionUtility/list",delete:"/base/regionUtility/delete",deleteBatch:"/base/regionUtility/deleteBatch",getTree:"/base/rtRegion/queryAllRegionTreeList",getBld:"/base/rtRegion/queryBldListByRegionId",queryByRuIds:"/use/serviceUtility/queryByRuIds",getUtilityTree:"/business/utility/getTree"},dictOptions:{},maintainInfoShow:!1,utilityId:"",utilityName:"",queryParam:{},treeData:[],autoExpandParent:!0,selectedKeys:[],iExpandedKeys:[],loading:!1,selectedInfo:{},queryTree:{},modalData:"",utilityData:{},regionName:"",utilityList:[],showTree:!0}},created:function(){this.initTree()},methods:{handleSuperQuery:function(e,t){this.queryPage()},selectUtility:function(e){this.queryParam.utilityId=e,this.queryPage()},openServiceModal:function(e){this.$refs.serviceModal.open(!0,e)},filter:function(e,t){return t.data.props.title.includes(e)},batchDelete:function(){var e=this;if(this.selectedRowKeys.length<=0)return this.$message.warning("请选择一条记录！");Object(o["j"])(this.url.queryByRuIds,this.selectedRowKeys).then((function(t){t.success?t.result&&t.result.length>0?e.$message.warning("存在维修项目不允许删除"):e.batchDel():e.$message.warning(t.message)}))},handleUpdate:function(e){var t=this,a=this,n=[];n.push(e.id),Object(o["j"])(this.url.queryByRuIds,n).then((function(n){n.success?n.result&&n.result.length>0?t.$message.warning("存在维修项目不允许修改"):0===e.maintainNum?(t.$refs.modalForm.edit(e),t.$refs.modalForm.title="编辑",t.$refs.modalForm.disableSubmit=!1):a.$message.warning("存在维保记录不允许修改！"):t.$message.warning(n.message)}))},handleCopy:function(e){this.$refs.modalForm.handleCopy(e),this.$refs.modalForm.title="编辑",this.$refs.modalForm.disableSubmit=!1},getMaintainInfo:function(e){this.utilityId=e.id,this.utilityName=e.utilityName,this.maintainInfoShow=!0},PrintQRCode:function(){if(!this.selectedRows||0===this.selectedRows.length)return this.$message.warning("请至少选择一条数据！");this.$refs.regionUtilityCode.show(this.selectedRows)},utilityChange:function(e){this.queryParam.utilityId=e},handleAddNew:function(){var e=this,t=this;if(this.selectedInfo.code)if("1"!==this.selectedInfo.baseType)Object(o["e"])("/base/rtRegion/queryRegionByIdAndType",{id:this.selectedInfo.id,baseType:this.selectedInfo.baseType}).then((function(t){var a={regionId:t.result.regionId,bldId:t.result.bldId,cellId:t.result.cellId,defaultName:t.result.defaultName};e.$refs.modalForm.add(t.result.code,a),e.$refs.modalForm.title="新增",e.$refs.modalForm.disableSubmit=!1}));else{var a={regionId:this.selectedInfo.id,defaultName:this.selectedInfo.name};this.$refs.modalForm.add(this.selectedInfo.code,a),this.$refs.modalForm.title="新增",this.$refs.modalForm.disableSubmit=!1}else 2===this.selectedInfo.isDistrict?t.$message.warning("分区节点不允许新增设施设备！"):t.$message.warning("请选择小区！")},handleDetail:function(e){this.$refs.detailForm.show(e),this.$refs.detailForm.title="详情"},onSearch:function(){this.queryTree.name=this.regionName,this.selectedInfo={},this.selectedKeys=[],this.queryParam={},this.initTree("search")},treeLoad:function(e){var t=this;return new Promise((function(a,n){e.dataRef.isArea?Object(o["e"])(t.url.getBld,{pid:e.dataRef.id}).then((function(n){if(n){if(n&&0!==n.length&&n[0].children&&0!==n[0].children.length){var i,o=b(n[0].children);try{for(o.s();!(i=o.n()).done;){var r,s=i.value,l=b(s.children);try{for(l.s();!(r=l.n()).done;){var c=r.value;c.isLeaf=!0}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}e.dataRef.children=n[0].children}else e.dataRef.isLeaf=!0;t.treeData=m(t.treeData)}a(),t.loadedKeys.push(e.dataRef.id)})):(a(),t.loadedKeys.push(e.dataRef.id))}))},initTree:function(e){var t=this,a=this;this.utilityList=[],Object(o["e"])(this.url.getUtilityTree).then((function(t){if(t.success&&t.result){a.loadedKeys=[],a.iExpandedKeys=[];var n,i=b(t.result);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=o;a.utilityList.push(r),a.setThisExpandedKeys(r,e)}}catch(s){i.e(s)}finally{i.f()}}})),this.initRegion&&(this.treeLoading=!0,Object(o["e"])(this.url.getTree,this.queryTree).then((function(e){if(e){a.treeData=[];var n,i=b(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=o;r.isArea=!0,r.isLeaf=0===r.nextNodeNum,a.treeData.push(r)}}catch(s){i.e(s)}finally{i.f()}t.hasEnablePageConfigByKey("banInitQuery")||t.queryPage()}})).finally((function(){t.treeLoading=!1})))},setThisExpandedKeys:function(e,t){},onExpand:function(e){this.iExpandedKeys=e,this.autoExpandParent=!1},onSelect:function(e,t){this.queryParam.regionId=null,this.queryParam.bldId=null,this.queryParam.cellId=null,this.selectedKeys=e,0!==e.length?(this.selectedInfo=t.node.dataRef,"1"===this.selectedInfo.baseType?(this.queryParam.regionId=this.selectedInfo.id,this.queryParam.isDistrict=this.selectedInfo.isDistrict):"2"===this.selectedInfo.baseType?this.queryParam.bldId=this.selectedInfo.id:"3"===this.selectedInfo.baseType&&(this.queryParam.cellId=this.selectedInfo.id)):this.queryParam.regionCode=null,this.queryPage()},showByPortrait:function(e,t){this.selectedInfo=t,this.selectedKeys=e,this.showTree=!1,this.queryParam.regionId=e,this.queryPage()},handleAddNewFather:function(){this.selectedKeys=[],this.selectedInfo=null,this.handleAddNew()},getPopupContainer:function(){return document.body}}},_=k,I=(a("2187"),a("2877")),S=Object(I["a"])(_,n,i,!1,null,"6e298a44",null);t["default"]=S.exports},e922:function(e,t,a){"use strict";a("5c77")},fe0b:function(e,t,a){"use strict";a("12c8")}}]);