(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~5218659a"],{"0080":function(e,t,n){},"0743":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",display:"flex",flexDirection:"column"}}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSuperQuery.apply(null,arguments)}}},[n("a-row",{attrs:{type:"flex",align:"middle",gutter:10}},[n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请输入业务编号"}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"请输入业务编号"},model:{value:e.queryParam.busiNo,callback:function(t){e.$set(e.queryParam,"busiNo","string"===typeof t?t.trim():t)},expression:"queryParam.busiNo"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请输入房屋位置"}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"请输入房屋位置"},model:{value:e.queryParam.address,callback:function(t){e.$set(e.queryParam,"address","string"===typeof t?t.trim():t)},expression:"queryParam.address"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请输入业主姓名"}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"请输入业主姓名"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name","string"===typeof t?t.trim():t)},expression:"queryParam.name"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请选择承办银行"}},[n("a-form-item",[n("j-dict-bank-list-select",{attrs:{"show-icon":"",placeholder:"请选择承办银行"},model:{value:e.queryParam.bankCode,callback:function(t){e.$set(e.queryParam,"bankCode",t)},expression:"queryParam.bankCode"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请选择开票开始日期"}},[n("a-form-item",[n("a-date-picker",{attrs:{"disabled-date":e.billDisabledStartDate,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD 00:00:00",placeholder:"请选择开票开始日期"},model:{value:e.queryParam.billDateStart,callback:function(t){e.$set(e.queryParam,"billDateStart",t)},expression:"queryParam.billDateStart"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3,title:"请选择开票结束日期"}},[n("a-form-item",[n("a-date-picker",{attrs:{"disabled-date":e.billDisabledEndDate,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD 23:59:59",placeholder:"请选择开票结束日期"},model:{value:e.queryParam.billDateEnd,callback:function(t){e.$set(e.queryParam,"billDateEnd",t)},expression:"queryParam.billDateEnd"}})],1)],1),n("a-col",{attrs:{span:"6",xl:4,xxl:3}},[n("span",{staticClass:"table-page-search-submitButtons mb-0",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleSuperQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")]),n("a-button",{attrs:{icon:"search",type:"dashed"},on:{click:e.openSearchModal}},[e._v("高级查询")])],1)])],1)],1)],1),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto",ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery")},scopedSlots:e._u([{key:"state",fn:function(t){var i=t.row;return["0"==i.state?n("a-badge",{attrs:{status:"processing",text:"明细记账完成"}}):e._e(),"1"==i.state?n("a-badge",{attrs:{status:"processing",text:"专户记账完成"}}):e._e(),"2"==i.state?n("a-badge",{attrs:{status:"success",text:"已验证"}}):e._e(),"3"==i.state?n("a-badge",{attrs:{status:"warning",text:"待记账"}}):e._e(),"4"==i.state?n("a-badge",{attrs:{status:"warning",text:"待打印"}}):e._e(),"5"==i.state?n("a-badge",{attrs:{status:"warning",text:"明细待冲正"}}):e._e()]}},{key:"action",fn:function(t){var i=t.row;return["1"!==i.billFlag&&"0"!==i.billFlag||e.removeTicketFlag?e._e():n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[n("a-icon",{attrs:{type:"file-text"}}),e._v(" 纸质票操作")],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:i.billNo},on:{click:function(t){return e.billing(i,"0")}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 初打")],1)],1),n("a-menu-item",{attrs:{disabled:!i.billNo}},[n("a-button",{attrs:{type:"link",disabled:!i.billNo},on:{click:function(t){return e.billing(i,"1")}}},[n("a-icon",{attrs:{type:"switcher"}}),e._v(" 重打")],1)],1),n("a-menu-item",{attrs:{disabled:!i.billNo}},[n("a-button",{attrs:{type:"link",disabled:!i.billNo},on:{click:function(t){return e.makeUp(i)}}},[n("a-icon",{attrs:{type:"block"}}),e._v(" 补办票据")],1)],1)],1)],1),"0"==i.state&&"0001"==i.busiTypeDetail&&e.removeTicketFlag?n("a-divider",{attrs:{type:"vertical"}}):e._e(),"0"==i.state&&"0001"==i.busiTypeDetail&&e.removeTicketFlag?n("a",{on:{click:function(t){return e.printJczm(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 交存证明")],1):e._e(),"2"===i.billFlag||"0"===i.billFlag?n("a-divider",{attrs:{type:"vertical"}}):e._e(),"2"===i.billFlag||"0"===i.billFlag?n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[n("a-icon",{attrs:{type:"cloud"}}),e._v(" 电子票操作")],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e.isAdmin||e.issueTicketFlag?n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:i.billNo},on:{click:function(t){return e.reopen(i)}}},[n("a-icon",{attrs:{type:"cloud-download"}}),e._v(" 初开")],1)],1):e._e(),e.isAdmin||e.issueTicketFlag?n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:!(i.billNo&&"0"===i.loanFlag)},on:{click:function(t){return e.rushRed(i)}}},[n("a-icon",{attrs:{type:"rest"}}),e._v(" 冲红")],1)],1):e._e(),e.isAdmin||e.issueTicketFlag?n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:!(i.billNo&&"0"===i.loanFlag)},on:{click:function(t){return e.reZerOpen(i)}}},[n("a-icon",{attrs:{type:"cloud-sync"}}),e._v(" 普票重开")],1)],1):e._e(),e.isAdmin||e.issueTicketFlag?n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:!(0==i.loanFlag&&i.billNo)},on:{click:function(t){return e.handlePrintNotice(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 打印告知单")],1)],1):e._e(),n("a-menu-item",[n("a-button",{attrs:{type:"link",disabled:!i.busNo},on:{click:function(t){return e.handleLook(i)}}},[n("a-icon",{attrs:{type:"eye"}}),e._v(" 查看")],1)],1)],1)],1):e._e()]}}])})],1),n("certificate-deal-form",{ref:"dealForm",on:{ok:e.modalFormOk}}),n("print-report-comp",{ref:"print"}),n("w-super-query",{ref:"BSuperQuery",attrs:{showModel:e.visible,"field-list":e.modalQueryObj,isWSuperList:!0,"save-code":"certificateList"},on:{ok:e.modalOk,reset:e.resetModalQuery,cancelModal:e.closeModal},scopedSlots:e._u([{key:"bankCode",fn:function(t){var i=t.row;return[n("j-dict-bank-list-select",{attrs:{"show-icon":"",placeholder:"请选择承办银行"},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}})]}}])})],1)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("9bed"),u=n("4275"),d=n("3269"),f=n("e1c2"),p=n("d8a5"),h={name:"CertificateList",components:{WSuperQuery:f["default"],JDictBankListSelect:d["default"],MESSuperQuery:l["default"],CertificateDealForm:u["default"],PrintReportComp:c["default"]},mixins:[s["a"],o["b"]],data:function(){var e=this;return{fileName:"CertificateList",description:"交存凭证管理",saveTreeData:[],removeTicketFlag:!1,queryObj:[{type:"input",value:"zoneCode",label:"所属区县"},{type:"input",value:"busiNo",label:"业务编号"},{type:"input",value:"passwd",label:"业务密码"},{type:"input",value:"state",label:"业务状态"},{type:"input",value:"busiType",label:"业务类别(字典[D_BUSI_TYPE_0])"},{type:"input",value:"busiTypeDetail",label:"业务明细类别(字典[D_BUSI_TYPE_1])"},{type:"input",value:"busiObject",label:"业务主体(字典[D_DIC_TYPE_14])"},{type:"input",value:"corpCode",label:"单位编号"},{type:"input",value:"corpType",label:"单位类型"},{type:"input",value:"bankCode",label:"银行代码"},{type:"input",value:"spaccCode",label:"专户账号"},{type:"input",value:"colaccCode",label:"收款账号"},{type:"input",value:"colaccName",label:"收款账户名"},{type:"input",value:"colbankName",label:"收款账户银行"},{type:"input",value:"totalNum",label:"总笔数"},{type:"input",value:"totalAmount",label:"总金额"},{type:"input",value:"loanFlag",label:"收支标志(1_收入,2_支出)"},{type:"input",value:"recDate",label:"打印日期"},{type:"input",value:"validDate",label:"有效期"},{type:"input",value:"trdFrom",label:"发起方(1_银行,2_系统)"},{type:"input",value:"tallyType",label:"结算方式(字典类型[D_DIC_TYPE_16])"},{type:"input",value:"chequeNo",label:"支票号码"},{type:"input",value:"batchNo",label:"凭证批次号"},{type:"input",value:"voucherNo",label:"票据凭证编号"},{type:"input",value:"voucherRecDate",label:"票据凭证登记日期"},{type:"input",value:"certDate",label:"验证日期"},{type:"input",value:"busiDate",label:"记账日期"},{type:"input",value:"hfmpDate",label:"系统记账时间"},{type:"input",value:"oldBusiNo",label:"原业务编号"},{type:"input",value:"hisFlag",label:"历史数据标志"},{type:"input",value:"delFlag",label:"删除状态（0-正常，1-已删除）"},{type:"input",value:"remark",label:"备注"}],modalQueryObj:[{type:"slot",slotName:"bankCode",value:"bankCode",label:"承办银行"},{type:"select",value:"state",label:"状态",options:[{label:"未开票",value:"0"},{label:"已开票",value:"1"}]},{type:"date",value:"busiDateStart",maxDate:"busiDateEnd",label:"记账开始日期",queryType:"ge"},{type:"date",value:"busiDateEnd",minDate:"busiDateStart",label:"记账结束日期",queryType:"le"},{type:"date",value:"billDateStart",maxDate:"billDateEnd",label:"开票开始日期",queryType:"ge"},{type:"date",value:"billDateEnd",minDate:"billDateStart",label:"开票结束日期",queryType:"le"}],columns:[{title:"小区名称",align:"left",headerAlign:"left",field:"regionName",width:"10%",sort:!0,customSortField:"region_Name"},{title:"房屋位置",field:"houseAddress",align:"left",headerAlign:"left",direction:"rtl",width:"15%"},{title:"账户名称",align:"left",headerAlign:"left",field:"ownerName",width:"10%"},{title:"交存金额 (元)",align:"right",headerAlign:"right",field:"amount",formatter:"amount",width:"10%",sort:!0,customSortField:"amount"},{title:"承办银行",align:"left",headerAlign:"left",field:"bankName",width:"10%",sort:!0,customSortField:"bank_code"},{title:"交存类型",align:"center",headerAlign:"center",field:"busiTypeDetailName",width:"10%"},{title:"记账日期",align:"center",field:"busiDate",width:"10%",sort:!0,customSortField:"busi_date"},{title:"开票日期",align:"center",field:"createTime",width:"10%",sort:!0,customSortField:"create_time"},{title:"票号",align:"left",headerAlign:"left",field:"billNo",width:"10%",sort:!0,customSortField:"bill_no"},{title:"状态",align:"left",field:"state",slot:!0,headerAlign:"center",width:"10%"},{title:"操作",field:"action",align:"center",fixed:"right",width:270,slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,Object.assign({},e.queryParam,e.modalQueryParams))).then((function(e){return e.result}))},url:{list:"/deposit/bBusiDeal/queryPageCertificateList",delete:"/deposit/bBusiDeal/delete",deleteBatch:"/deposit/bBusiDeal/deleteBatch",importExcelUrl:"deposit/bBusiDeal/importExcel"},queryParam:{name:"",state:void 0,busiDateStart:null,busiDateEnd:null,billDateStart:null,billDateEnd:null,bankCode:void 0},modalQueryParams:{},visible:!1,bankInfoOptions:[],isAdmin:!1,issueTicketFlag:!0,dictOptions:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){var e=this;Object(p["e"])("is_remove_ticket").then((function(t){t&&"1"==t&&(e.removeTicketFlag=!0)})),Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.isAdmin=!0)})),Object(p["e"])("corp_re_issue_ticket").then((function(t){t&&"0"==t&&(e.issueTicketFlag=!1)}))},methods:{handleTreeSelect:function(){},openSearchModal:function(){this.searchReset(),this.resetModalQuery(),this.visible=!0},printJczm:function(e){this.$refs.print.type="print",this.$refs.print.print("deposit_certificate",{houseId:e.houseId,busiNo:e.busiNo})},modalOk:function(e,t){var n=this;(t||[]).forEach((function(e){"date"===e.rowType&&(["ge","gt"].includes(e.rule)?e.val+=" 00:00:00":["le","lt"].includes(e.rule)&&(e.val+=" 23:59:59")),n.modalQueryParams[e.field]=e.val})),this.closeModal(),this.queryPage()},closeModal:function(){this.visible=!1},resetModalQuery:function(){this.modalQueryParams={}},billing:function(e,t){this.$refs.dealForm.show(e),this.$refs.dealForm.title="0"===t?"纸质票据-初打":"纸质票据-重打",this.$refs.dealForm.tabTitle="票据信息",this.$refs.dealForm.buttonType="billing"},makeUp:function(e){this.$refs.dealForm.show(e),this.$refs.dealForm.title="纸质票据-补打",this.$refs.dealForm.tabTitle="补办票据信息",this.$refs.dealForm.buttonType="makeUp"},reopen:function(e){this.$refs.dealForm.show(e),this.$refs.dealForm.title="电子票开具",this.$refs.dealForm.tabTitle="票据信息",this.$refs.dealForm.buttonType="reopen"},rushRed:function(e){this.$refs.dealForm.show(e),this.$refs.dealForm.title="电子票冲红",this.$refs.dealForm.tabTitle="申请信息",this.$refs.dealForm.buttonType="rushRed"},reZerOpen:function(e){this.$refs.dealForm.show(e),this.$refs.dealForm.title="电子票重开",this.$refs.dealForm.tabTitle="申请信息",this.$refs.dealForm.buttonType="reZerOpen"},reFirOpen:function(e){this.$refs.dealForm.show(e),this.$refs.dealForm.title="电子票重开",this.$refs.dealForm.tabTitle="申请信息",this.$refs.dealForm.buttonType="reFirOpen"},handlePrintNotice:function(e){var t=this;this.$refs.print.type="print",Object(r["e"])("/qrConfig/qrConfig/list",{state:"1"}).then((function(n){n.success&&n.result.records&&("1"===n.result.records[0].type&&t.$refs.print.print("electronic_bill_notice",{busNo:e.busNo}),"2"===n.result.records[0].type&&t.$refs.print.print("electronic_bill_notice_hebei",{busNo:e.busNo}))}))},handleLook:function(e){if(null!=e.pictureUrl&&""!=e.pictureUrl)window.open(e.pictureUrl);else if(null!==e.billqrCode&&""!==e.billqrCode){var t=new Image;t.src="data:image/jpg;base64,"+e.billqrCode;var n=window.open("","_blank");n.document.write(t.outerHTML),n.document.close()}else this.$warning({title:"电子票据查看",content:null==e.message||""==e.message?"暂无票据信息！":e.message})},searchReset:function(){this.queryParam.name="",this.queryParam.state=void 0,this.queryParam.busiDateStart=null,this.queryParam.busiDateEnd=null,this.queryParam.bankCode=void 0,this.queryParam.billDateStart=null,this.queryParam.billDateEnd=null,this.queryParam.address=void 0,this.queryParam.busiNo=void 0,this.queryPage()},busiDisabledStartDate:function(e){var t=this.queryParam.busiDateEnd;return!(!e||!t)&&e.valueOf()>t.valueOf()},busiDisabledEndDate:function(e){var t=this.queryParam.busiDateStart;return!(!e||!t)&&t.valueOf()>=e.valueOf()},billDisabledStartDate:function(e){var t=this.queryParam.billDateEnd;return!(!e||!t)&&e.valueOf()>t.valueOf()},billDisabledEndDate:function(e){var t=this.queryParam.billDateStart;return!(!e||!t)&&t.valueOf()>=e.valueOf()}}},m=h,y=(n("7aaf"),n("50fa"),n("4d2a"),n("2877")),b=Object(y["a"])(m,i,a,!1,null,"165823f9",null);t["default"]=b.exports},"0ad9":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("j-form-container",{attrs:{disabled:e.formDisabled}},[n("a-form-model",{ref:"form",attrs:{slot:"detail",model:e.model,rules:e.validatorRules},slot:"detail"},[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"所属区县",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"zoneCode"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入所属区县"},model:{value:e.model.zoneCode,callback:function(t){e.$set(e.model,"zoneCode",t)},expression:"model.zoneCode"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"申请编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"reqNo"}},[n("a-input",{attrs:{placeholder:"请输入申请编号"},model:{value:e.model.reqNo,callback:function(t){e.$set(e.model,"reqNo",t)},expression:"model.reqNo"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"业务类别(字典[D_BUSI_TYPE])",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"busiType"}},[n("a-input",{attrs:{placeholder:"请输入业务类别(字典[D_BUSI_TYPE])"},model:{value:e.model.busiType,callback:function(t){e.$set(e.model,"busiType",t)},expression:"model.busiType"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"业务明细类别(字典[D_BUSI_TYPE])",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"busiTypeDetail"}},[n("a-input",{attrs:{placeholder:"请输入业务明细类别(字典[D_BUSI_TYPE])"},model:{value:e.model.busiTypeDetail,callback:function(t){e.$set(e.model,"busiTypeDetail",t)},expression:"model.busiTypeDetail"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"状态(0：已变更完成,2：待变更,5：已撤销,9：新建)",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"state"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入状态(0：已变更完成,2：待变更,5：已撤销,9：新建)"},model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"变更编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"changeNo"}},[n("a-input",{attrs:{placeholder:"请输入变更编号"},model:{value:e.model.changeNo,callback:function(t){e.$set(e.model,"changeNo",t)},expression:"model.changeNo"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"变更类别(1：新增,2：修改,3：删除)",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"operType"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入变更类别(1：新增,2：修改,3：删除)"},model:{value:e.model.operType,callback:function(t){e.$set(e.model,"operType",t)},expression:"model.operType"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"变更原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"reason"}},[n("a-input",{attrs:{placeholder:"请输入变更原因"},model:{value:e.model.reason,callback:function(t){e.$set(e.model,"reason",t)},expression:"model.reason"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"档案变更完成时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"changeDate"}},[n("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择档案变更完成时间"},model:{value:e.model.changeDate,callback:function(t){e.$set(e.model,"changeDate",t)},expression:"model.changeDate"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"资金余额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"balance"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入资金余额"},model:{value:e.model.balance,callback:function(t){e.$set(e.model,"balance",t)},expression:"model.balance"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"冻结金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"balFrozen"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入冻结金额"},model:{value:e.model.balFrozen,callback:function(t){e.$set(e.model,"balFrozen",t)},expression:"model.balFrozen"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"过户利息",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"accrBal"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入过户利息"},model:{value:e.model.accrBal,callback:function(t){e.$set(e.model,"accrBal",t)},expression:"model.accrBal"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"删除状态（0-正常，1-已删除）",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"delFlag"}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入删除状态（0-正常，1-已删除）"},model:{value:e.model.delFlag,callback:function(t){e.$set(e.model,"delFlag",t)},expression:"model.delFlag"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"remark"}},[n("a-input",{attrs:{placeholder:"请输入备注"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1)],1)],1)],1)},a=[],r=n("0fea"),o=(n("ca00"),{name:"BChangeForm",components:{},props:{disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/common/bChange/add",edit:"/common/bChange/edit",queryById:"/common/bChange/queryById"}}},computed:{formDisabled:function(){return this.disabled}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{add:function(){this.edit(this.modelDefault)},edit:function(e){this.model=Object.assign({},e),this.visible=!0},submitForm:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(n){t.confirmLoading=!0;var i="",a="";e.model.id?(i+=e.url.edit,a="put"):(i+=e.url.add,a="post"),Object(r["i"])(i,e.model,a).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))}}}),s=o,l=n("2877"),c=Object(l["a"])(s,i,a,!1,null,null,null);t["default"]=c.exports},"0d84":function(e,t,n){},"1d34":function(e,t,n){},"1e10":function(e,t,n){},"1fec":function(e,t,n){},2064:function(e,t,n){"use strict";n("8080")},22711:function(e,t,n){},"26e9":function(e,t,n){"use strict";n("8f73")},2829:function(e,t,n){},"2dc7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"ant-modal-cust-warp",attrs:{bordered:!1,"body-style":{height:"100%",paddingTop:"0px"}}},[n("a-tabs",{staticClass:"ant-modal-cust-warp tabsContent",on:{change:e.callback},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-tab-pane",{key:"1",staticClass:"ant-modal-cust-warp",attrs:{tab:"全部（"+e.payConfirmTotal+")","force-render":""}},[n("refund-payment-confirm",{ref:"payConfirm",on:{ok:e.refresh,pageTotal:e.pageTotal}})],1),n("a-tab-pane",{key:"2",staticClass:"ant-modal-cust-warp",attrs:{tab:"支付凭证（"+e.voucherTotalNum+")","force-render":""}},[n("refund-voucher-list",{ref:"voucher",on:{ok:e.refresh,pageTotal:e.voucherTotal}})],1)],1)],1)},a=[],r=n("ce9a"),o=n("4520"),s={name:"ConfirmPayTabPage",components:{RefundVoucherList:o["default"],RefundPaymentConfirm:r["default"]},mounted:function(){this.$refs.payConfirm.modalFormOk(),this.$refs.voucher.modalFormOk()},data:function(){return{activeKey:"1",payConfirmTotal:0,voucherTotalNum:0}},methods:{refresh:function(){this.$refs.payConfirm.modalFormOk(),this.$refs.voucher.modalFormOk()},callback:function(e){1===e?this.$refs.payConfirm.modalFormOk():this.$refs.voucher.modalFormOk()},pageTotal:function(e){this.payConfirmTotal=e},voucherTotal:function(e){this.voucherTotalNum=e}}},l=s,c=(n("4b86"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,"716fcea8",null);t["default"]=u.exports},"2f26":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"分配查看","show-zoom":"",showFooter:"",width:"80vw",height:"80vh","destroy-on-close":""},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{icon:"close"},on:{click:e.handleCancel}},[e._v("关闭")])]},proxy:!0}]),model:{value:e.showBusi,callback:function(t){e.showBusi=t},expression:"showBusi"}},[n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",class:[18==e.font?"fonstyle":""],attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,expand:!0,data:e.loadData,tableColumn:e.columns,"table-height":"auto","header-align":"center","expand-config":{lazy:!0,loadMethod:e.loadContentMethod},tableColumnChild:e.columnsChild},scopedSlots:e._u([{key:"busiTypeDetail",fn:function(t){var i=t.row;return["6061"==i.busiTypeDetail?n("span",[e._v("房屋资金拆分")]):e._e(),"6062"==i.busiTypeDetail?n("span",[e._v("经营收入分配")]):e._e(),"6063"==i.busiTypeDetail?n("span",[e._v("共用设施处置收入分配")]):e._e(),"6064"==i.busiTypeDetail?n("span",[e._v("挂账资金分配")]):e._e()]}},{key:"reqState",fn:function(t){var i=t.text;return["0"==i?n("a-badge",{attrs:{status:"success",text:"已完成"}}):"2"==i?n("a-badge",{attrs:{status:"processing",text:"待审核"}}):e._e()]}},{key:"loanFlag",fn:function(t){var i=t.row;return[1===i.loanFlag?n("span",[e._v("收入")]):e._e(),2===i.loanFlag?n("span",[e._v("支出")]):e._e()]}}])})],1)])},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("c1df"),c=n.n(l),u=n("2b0e"),d=n("9fb0"),f={name:"AccDepositBusinessList",mixins:[s["a"],o["b"]],props:{},components:{},data:function(){var e=this;return{showBusi:!1,fileName:"PayBusiness",description:"分配查看",queryObj:[{type:"input",value:"req.req_no",label:"业务编号"},{type:"select",value:"req.busi_type_detail",label:"业务明细类别",options:[{label:"房屋资金拆分",value:"6061"},{label:"经营收入分配",value:"6062"},{label:"共用设施处置收入分配",value:"6063"},{label:"挂账资金分配",value:"6064"}]}],columns:[{title:"业务编号",align:"center",field:"reqNo"},{title:"业务类型",align:"center",field:"busiTypeDetail",slot:!0},{title:"总笔数",align:"center",field:"totalNum",width:80},{title:"总金额(元)",align:"right",headerAlign:"right",field:"amount",formatter:"amount"},{title:"转账日期",align:"center",field:"trdDate",format:"yyyy-MM-dd"},{title:"申请状态",align:"center",field:"reqState",slot:!0}],columnsChild:[{title:"房屋或单位地址",align:"left",headerAlign:"left",field:"address"},{title:"账号",align:"center",width:260,field:"accCode"},{title:"收支标识",align:"center",width:100,field:"loanFlag",slot:!0},{title:"发生额(元)",align:"right",width:150,formatter:"amount",field:"amount"},{title:"记账日期",align:"center",width:200,field:"trdDate",formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/accFuTra/queryAccTransBusinessByAccBusiNo",queryTrdLogList:"/account/trdlog/queryTrdLogPageList"},fundProgress:{},visible:!1,font:u["default"].ls.get(d["w"])}},methods:{show:function(e){this.queryParam.accBusiNo=e.busiNo,this.showBusi=!0},loadContentMethod:function(e){var t=this,n=e.row;return this.fundProgress.busiNo=n.reqNo,new Promise((function(e){Object(r["e"])(t.url.queryTrdLogList,t.fundProgress).then((function(t){if(t.success){var i=t.result.records;n.detailList=i}e()}))}))},handleCancel:function(){this.showBusi=!1}}},p=f,h=(n("e25b6"),n("f546"),n("2877")),m=Object(h["a"])(p,i,a,!1,null,"07ec8198",null);t["default"]=m.exports},"313c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{height:"100%",padding:e.modalFlag?"":"10px"}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.modalFlag,expression:"modalFlag"}],staticClass:"h-full flex flex-column"},[i("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,"is-full-query":!0,type:"queryList"},on:{ok:e.handleSuperQuery}}),i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto","header-align":"center",ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),customColumns:{name:"conDepositList"}},scopedSlots:e._u([{key:"regionName",fn:function(t){var n=t.text,a=t.row;return[i("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(n))])]}},{key:"houseNum",fn:function(t){var n=t.row;t.text,t.name;return[i("span",{staticStyle:{color:"blue"}},[e._v(e._s(n.depositNum))]),e._v("/"),i("span",{staticStyle:{color:"red"}},[e._v(e._s(n.unDepositNum))]),e._v("/"+e._s(n.houseNum)+"\n        ")]}},{key:"buttons",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[e.selectedRowKeys.length>0?i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"1",on:{click:e.batchDel}},[i("a-icon",{attrs:{type:"delete"}}),e._v("\n                  删除\n                ")],1)],1),i("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n                批量操作\n                "),i("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var n=t.row;return[i("a",{on:{click:function(t){return e.handleDeposit(n)}}},[i("a-icon",{attrs:{type:"edit"}}),e._v("\n            "+e._s("02"===e.continueDepositBusiType?"资金补交":"续交续筹")+"\n          ")],1)]}}])})],1)],1),e.modalFlag?e._e():[i("div",{staticClass:"stepHeaderDiv"},[i("div",{staticClass:"headerInfo"},[i("img",{staticStyle:{height:"53px",display:"inline","margin-right":"8px"},attrs:{src:n("d9a2"),alt:""}}),i("div",{staticClass:"currentInfo"},[i("j-dict-region-list-select",{ref:"regionSelect",staticClass:"regionName",attrs:{size:"large",hasBld:!0},on:{select:e.handleRegionSelect},model:{value:e.regionCode,callback:function(t){e.regionCode=t},expression:"regionCode"}}),"floorViews"===e.comPage?i("a-select",{ref:"buildInfoSelect",staticClass:"buildName",attrs:{size:"large",dropdownMatchSelectWidth:!1},on:{change:e.handleBuildChange},model:{value:e.chooseBuildId,callback:function(t){e.chooseBuildId=t},expression:"chooseBuildId"}},e._l(e.buildArr,(function(t){return i("a-select-option",{key:t.id,attrs:{value:t.id,label:t.buildName,data:t}},[e._v("\n              "+e._s(t.buildName)+"\n            ")])})),1):e._e()],1)]),i("a-button",{staticClass:"stepHeaderButton",attrs:{icon:"rollback"},on:{click:e.back}},[e._v("返回")])],1),i("div",{staticClass:"pageTab"},[e._l(e.pageTabs,(function(t){return[!e.showVerify&&"1"==t.id||!e.showApply&&"2"===t.id?e._e():i("div",{key:t.id},[i("div",{staticClass:"tabItem",class:t.id==e.current?"active":"",on:{click:function(n){return e.stepChange(t.id)}}},[i("span",[e._v(e._s(t.name))])])])]}))],2),i("div",{staticClass:"stepContent"},[i("floor-views",{directives:[{name:"show",rawName:"v-show",value:"floorViews"===e.comPage,expression:"comPage === 'floorViews'"}],ref:"floorViews",attrs:{showHeader:!1,isShowCheckbox:!1,regionCode:e.regionCode,regionId:e.regionId,regionName:e.regionName,bldId:e.chooseBuildId,depositType:e.depositType,hasBld:!0,isDeposit:!0},on:{"update:bldId":function(t){e.chooseBuildId=t},"update:bld-id":function(t){e.chooseBuildId=t}}}),"floorViews"!==e.comPage?i(e.comPage,{key:e.compentKey,ref:"publicComponent",tag:"component",attrs:{showHeader:!1,regionCode:e.regionCode,isShowCheckbox:!1,regionId:e.regionId,regionName:e.regionName,depositType:e.depositType,hasBld:!0}}):e._e()],1)]],2)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("9e62"),u=n("2243"),d=n("3dff"),f=n("cbc1"),p=n("4ec3"),h=n("fdce"),m={name:"ConDeposit",components:{JDictRegionListSelect:h["default"],MESSuperQuery:l["default"],floorViews:c["default"],DepositVerify:u["default"],DepositRequest:d["default"],BusiDealList:f["default"]},props:{continueDepositBusiType:{type:String,defeault:"01"}},provide:function(){return{continueDepositBusiType:this.continueDepositBusiType||"01"}},mixins:[s["a"],o["b"]],data:function(){var e=this;return{current:0,pageTabs:[{id:0,name:"房屋信息"},{id:1,name:"交存复核"},{id:2,name:"交存申请"},{id:3,name:"通知书打印"}],fileName:"ContinueDepositList",description:"业主初交管理页面",modalFlag:!0,regionName:"",activeKey:"0",regionCode:"",regionId:"",buildArr:[],chooseBuildId:"",depositType:"02",comPage:"floorViews",compentKey:0,queryObj:[{type:"input",value:"name",label:"小区名称",queryType:"like"},{type:"input",value:"address",label:"详细地址",queryType:"like"}],columns:[{title:"小区名称",align:"left",headerAlign:"left",field:"regionName",direction:"rtl",slot:!0,type:"input"},{title:"所属区县",align:"center",field:"zoneCode_dictText",width:130},{title:"总面积 (㎡)",headerAlign:"right",align:"right",field:"struArea",formatter:"area",width:130},{title:"详细地址",align:"left",headerAlign:"left",field:"address",direction:"rtl",type:"input"},{title:"操作",field:"action",align:"center",width:117,fixed:"right",slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/rRegionInfo/regionList",delete:"/region/rtRegion/delete",deleteBatch:"/region/rtRegion/deleteBatch",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel"},dictOptions:{},showVerify:!0,showApply:!0}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},mounted:function(){var e=this;this.$bus.$on("FirstDepositTabChange",(function(t){e.activeToPage(t)})),this.$bus.$on("regionNameChange",(function(t){e.getRegionInfo(t)})),Object(p["l"])("amount_confirm").then((function(t){Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(n){n.success?Object(p["l"])("show_verify_corp").then((function(i){n.success&&"0"==i.result?e.showVerify="0"!=t.result:e.showVerify=!1})):e.showVerify="0"!=t.result,Object(p["l"])("show_apply_corp").then((function(t){t.result&&"1"==t.result&&n.success&&(e.showApply=!1)}))}))}))},methods:{getRegionInfo:function(e){this.regionName=e.name,this.regionId=e.id,this.regionCode=e.code},handleRegionSelect:function(e,t){var n=this;if(this.getRegionInfo(t),this.getBuildList(),this.$refs.floorViews.initData({regionId:t.id}),"floorViews"!==this.comPage){var i=this.comPage;this.comPage="",this.$nextTick((function(){n.comPage=i}))}},getBuildList:function(){var e=this;Object(r["e"])("/view/floorViews/getNaturalBuild",{regionId:this.regionId,depositType:"01"}).then((function(t){if(!t.success)return e.$message.warning(t.message);e.buildArr=t.result}))},handleBuildChange:function(e){this.$refs.floorViews.handleBuildChange(e)},back:function(){this.queryParam={},this.modalFlag=!0},tabChange:function(e){this.comPage=e},stepChange:function(e){this.current=e,this.compentKey++,this.activeKey=e,this.activeToPage(e.toString())},activeToPage:function(e){switch(this.activeKey=e,this.current=e,e){case"0":this.comPage="floorViews",this.$refs.floorViews.handleBuildChange(this.chooseBuildId);break;case"1":this.comPage="depositVerify";break;case"2":this.comPage="depositRequest";break;case"3":this.comPage="BusiDealList";break}},handleDeposit:function(e){this.regionCode=e.code,this.regionId=e.id,this.regionName=e.regionName,this.modalFlag=!1,this.getBuildList()},handleDetail:function(e){var t={regionId:e.id,regionName:e.name};this.$router.push({path:"/communityPortrait",query:t})}}},y=m,b=(n("919e"),n("d502"),n("2877")),g=Object(b["a"])(y,i,a,!1,null,"4c9b2360",null);t["default"]=g.exports},"33f9":function(e,t,n){"use strict";n("d542")},3894:function(e,t,n){"use strict";n("4f48")},"3d9d":function(e,t,n){"use strict";n("7942")},4312:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{height:"100%",padding:e.modalFlag?"":"10px"}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.modalFlag,expression:"modalFlag"}],staticClass:"h-full flex flex-column"},[i("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,"is-full-query":!0,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"inputSearch",fn:function(t){var n=t.row;return[i("a-input",{attrs:{placeholder:"请输入小区名称"},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}}])}),i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto","header-align":"center",ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),customColumns:{name:"firstDepositList"}},scopedSlots:e._u([{key:"regionName",fn:function(t){var n=t.text,a=t.row;return[i("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(n))])]}},{key:"houseNum",fn:function(t){var n=t.row;t.text,t.name;return[i("span",{staticStyle:{color:"blue"}},[e._v(e._s(n.depositNum))]),e._v("/"),i("span",{staticStyle:{color:"red"}},[e._v(e._s(n.unDepositNum))]),e._v("/"+e._s(n.houseNum)+"\n        ")]}},{key:"buttons",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[e.selectedRowKeys.length>0?i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"1",on:{click:e.batchDel}},[i("a-icon",{attrs:{type:"delete"}}),e._v("\n                  删除\n                ")],1)],1),i("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n                批量操作\n                "),i("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var n=t.row;return[i("a",{on:{click:function(t){return e.handleDeposit(n)}}},[i("a-icon",{attrs:{type:"edit"}}),e._v(" 交存")],1)]}}])})],1)],1),e.modalFlag?e._e():[i("div",{staticClass:"depositPages"},[i("div",{staticClass:"stepHeaderDiv"},[i("div",{staticClass:"headerInfo"},[i("img",{staticStyle:{height:"53px",display:"inline","margin-right":"8px"},attrs:{src:n("d9a2"),alt:""}}),i("div",{staticClass:"currentInfo"},[i("j-dict-region-list-select",{ref:"regionSelect",staticClass:"regionName",attrs:{size:"large",hasBld:!0},on:{select:e.handleRegionSelect},model:{value:e.regionCode,callback:function(t){e.regionCode=t},expression:"regionCode"}}),"floorViews"===e.comPage?i("a-select",{ref:"buildInfoSelect",staticClass:"buildName",attrs:{size:"large",dropdownMatchSelectWidth:!1},on:{change:e.handleBuildChange},model:{value:e.chooseBuildId,callback:function(t){e.chooseBuildId=t},expression:"chooseBuildId"}},e._l(e.buildArr,(function(t){return i("a-select-option",{key:t.id,attrs:{value:t.id,label:t.buildName,data:t}},[e._v("\n                "+e._s(t.buildName)+"\n              ")])})),1):e._e()],1)]),i("a-space",{staticClass:"stepHeaderButton"},["floorViews"===e.comPage?i("a-button",{staticClass:"extraButton",attrs:{type:"primary"},on:{click:e.addHouse}},[e._v("\n            添加房屋\n          ")]):e._e(),i("a-button",{attrs:{icon:"rollback"},on:{click:e.backClick}},[e._v("返回")])],1)],1),i("div",{staticClass:"lingTab"},[e._l(e.tabData,(function(t){return[!e.showVerify&&"1"===t.id||!e.showApply&&"2"===t.id||t.permission&&e.WhetherThePermissionPasses(t.permission)?e._e():i("div",{key:t.id,staticClass:"lingTabItem"},[i("div",{staticClass:"funds",class:t.id==e.current?"fundShOver":"",on:{click:function(n){return e.stepChange(t.id)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])])]}))],2),i("div",{staticClass:"stepContent"},[i("floor-views",{directives:[{name:"show",rawName:"v-show",value:"floorViews"===e.comPage,expression:"comPage === 'floorViews'"}],ref:"floorViews",attrs:{showHeader:!1,isShowCheckbox:!0,regionCode:e.regionCode,regionId:e.regionId,regionName:e.regionName,"region-state":e.regionState,bldId:e.chooseBuildId,depositType:e.depositType,hasBld:!0,isDeposit:!0},on:{"update:bldId":function(t){e.chooseBuildId=t},"update:bld-id":function(t){e.chooseBuildId=t}}}),"floorViews"!==e.comPage?i(e.comPage,{key:e.compentKey,ref:"publicComponent",tag:"component",attrs:{regionCode:e.regionCode,regionId:e.regionId,regionName:e.regionName,depositType:e.depositType,hasBld:!0}}):e._e()],1)])]],2)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("9e62"),u=n("2243"),d=n("3dff"),f=n("cbc1"),p=n("429e"),h=n("4ec3"),m=n("fdce"),y=n("fdcf"),b={name:"FirstDeposit",components:{JDictRegionListSelect:m["default"],MESSuperQuery:l["default"],floorViews:c["default"],depositVerify:u["default"],depositRequest:d["default"],BusiDealList:f["default"],BldInfoList:p["default"]},mixins:[s["a"],o["b"]],created:function(){this.init()},data:function(){var e=this;return{current:"0",tabData:[{id:"0",name:"房屋信息"},{id:"1",name:"交存复核",permission:"firstDeposit:verify"},{id:"2",name:"交存申请",permission:"firstDeposit:request"},{id:"3",name:"通知书打印",permission:"firstDeposit:deal"}],showVerify:!0,showApply:!0,fileName:"FirstDepositList",description:"业主初交管理页面",modalFlag:!0,regionName:"",regionState:"0",activeKey:"0",comPage:"floorViews",regionCode:"",regionId:"",compentKey:0,depositType:"01",bldRegionId:"",bldRegionName:"",buildArr:[],chooseBuildId:"",zoneCodes:"",queryObj:[{type:"slot",value:"name",label:"小区名称",queryType:"like",slotName:"inputSearch"},{type:"input",value:"address",label:"详细地址",queryType:"like"},{label:"所属区县",value:"zoneCode",type:"tree",options:[]}],columns:[{title:"小区名称",headerAlign:"left",align:"left",field:"regionName",width:"400px",slot:!0,type:"input"},{title:"所属区县",align:"center",field:"zoneCode_dictText",minWidth:100},{headerAlign:"right",title:"总面积 (㎡)",align:"right",field:"struArea",formatter:"area",width:130},{headerAlign:"left",title:"详细地址",align:"left",field:"address",width:"400px",type:"input"},{title:"操作",field:"action",align:"center",width:100,fixed:"right",slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/rRegionInfo/regionList",delete:"/region/rtRegion/delete",deleteBatch:"/region/rtRegion/deleteBatch",exportXlsUrl:"/region/rtRegion/exportXls",importExcelUrl:"region/rtRegion/importExcel"},dictOptions:{}}},provide:{hideAction:"true"},methods:{WhetherThePermissionPasses:y["a"],getRegionInfo:function(e){this.regionName=e.name,this.regionId=e.id,this.regionCode=e.code,this.regionState=e.state},handleRegionSelect:function(e,t){var n=this;if(this.getRegionInfo(t),this.getBuildList(),this.$refs.floorViews.initData({regionId:t.id}),"floorViews"!==this.comPage){var i=this.comPage;this.comPage="",this.$nextTick((function(){n.comPage=i}))}},getBuildList:function(){var e=this;Object(r["e"])("/view/floorViews/getNaturalBuild",{regionId:this.regionId,depositType:"01"}).then((function(t){if(!t.success)return e.$message.warning(t.message);e.buildArr=t.result}))},handleBuildChange:function(e){this.$refs.floorViews.handleBuildChange(e)},init:function(){this.queryObj.map((function(e){"zoneCode"===e.value&&Object(r["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){t.success&&(e.options=t.result,1!=t.result.length||null!=t.result[0].children&&0!=t.result[0].children.length||(e.val=t.result[0].key))}))}))},backClick:function(){this.modalFlag=!0,this.queryParam={}},handleDeposit:function(e){this.regionCode=e.code,this.regionId=e.id,this.regionName=e.regionName,this.regionState=e.state,this.modalFlag=!1,this.getBuildList()},handleDetail:function(e){var t={regionId:e.id,regionName:e.name};this.$router.push({path:"/communityPortrait",query:t})},stepChange:function(e){this.current=e,this.compentKey++,this.activeKey=e,this.activeToPage(e.toString())},activeToPage:function(e){switch(this.activeKey=e,this.current=e,e){case"0":this.comPage="floorViews",this.$refs.floorViews.handleBuildChange(this.chooseBuildId);break;case"1":this.comPage="depositVerify";break;case"2":this.comPage="depositRequest";break;case"3":this.comPage="BusiDealList";break}},addHouse:function(){this.$refs.floorViews.addHouse()},batchUpdatePsn:function(){this.$refs.floorViews.batchUpdatePsn()},fillHouse:function(){this.$refs.floorViews.fillHouse()}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},mounted:function(){var e=this,t=this.$route_query;t&&t.id&&(this.handleDeposit(t),this.$nextTick((function(){e.stepChange("1")}))),this.$bus.$on("FirstDepositTabChange",(function(t){e.activeToPage(t)})),this.$bus.$on("toBusiDealListBookkeeping",(function(t){e.activeToPage("3"),e.$nextTick((function(){t.houseId=t.id,e.$refs.publicComponent.bookkeeping(t)}))})),this.$bus.$on("regionNameChange",(function(t){e.getRegionInfo(t)})),Object(h["l"])("amount_confirm").then((function(t){"2"===t.result?(e.showVerify=!1,e.showApply=!1):Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(n){n.success?Object(h["l"])("show_verify_corp").then((function(i){n.success&&"0"==i.result?e.showVerify="0"!=t.result:e.showVerify=!1})):e.showVerify="0"!=t.result,Object(h["l"])("show_apply_corp").then((function(t){t.result&&"1"==t.result&&n.success&&(e.showApply=!1)}))}))}))}},g=b,v=(n("6b75"),n("3d9d"),n("2877")),w=Object(v["a"])(g,i,a,!1,null,"cc1fd0aa",null);t["default"]=w.exports},"43ae":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":Object.assign({height:"100%",padding:0},e.bodyStyle)}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticStyle:{height:"calc(100% - 40px)"}},[[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",expand:!1,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("a-space",[e.showToList?n("a-button",{attrs:{title:"返回",icon:"left"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]},proxy:!0},{key:"number",fn:function(t){t.text;var i=t.row;return[n("span",[e._v(e._s(i.nextNodeNum?i.nextNodeNum:0))]),n("span",[e._v("/")]),n("span",[e._v(e._s(i.struArea?Number(i.struArea).toFixed(2):"0.00"))])]}},{key:"holds",fn:function(t){t.text;var i=t.row;return[n("span",[e._v(e._s(i.houseInt?i.houseInt:0))]),n("span",[e._v("/")]),n("span",[e._v(e._s(i.paidHouseNums?i.paidHouseNums:0))])]}},{key:"accState_dictText",fn:function(t){var i=t.text,a=t.row;return[9==a.accState||null==a.accState?n("span",[e._v("未开户")]):n("span",[e._v(e._s(i))])]}},{key:"action",fn:function(t){t.text;var i=t.row;return[n("span",[n("a",{on:{click:function(t){return e.toPrint(i)}}},[n("a-icon",{attrs:{type:"bank"}}),e._v(" 交存证明打印")],1)])]}}])})]],2),n("print-report-comp",{ref:"print"})],1)},a=[],r=n("6fa9"),o=n("0a5e"),s=n("0fea"),l=n("ca00"),c=n("9bed"),u=n("2b0e");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",m="suspendedYield",y="executing",b="completed",g={};function v(){}function w(){}function _(){}var x={};c(x,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(x=D);var C=_.prototype=v.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=p(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==d(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=h;return function(r,o){if(a===y)throw Error("Generator is already running");if(a===b){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===h)throw a=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var c=p(t,n,i);if("normal"===c.type){if(a=i.done?b:m,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=b,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=p(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=_,a(C,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:w,configurable:!0}),w.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function p(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){p(r,i,a,o,s,"next",e)}function s(e){p(r,i,a,o,s,"throw",e)}o(void 0)}))}}var m={name:"BldInfoListPrint",mixins:[o["a"]],components:{MESSuperQuery:r["default"],PrintReportComp:c["default"]},props:{bldRegionId:{type:String,default:void 0},bldRegionName:{type:String,default:void 0},zoneCodes:{type:String,default:void 0},showToList:{type:Boolean,default:!0},bodyStyle:{type:Object,default:function(){return{}}},isDistrict:{type:Boolean,default:!1}},data:function(){var e=this;return{reportCode:"bld_deposit",queryObj:[{label:"自然幢名称",value:"rr.name",type:"input",queryType:"like"}],showType:"queryList",regionId:"",regionName:"",fileName:"BldInfoListPrint",description:"自然幢信息表管理页面",columns:[{title:"分区名称",headerAlign:"center",align:"left",field:"districtName",minWidth:120,hidden:!this.isDistrict},{title:"自然幢编号",align:"left",field:"code",type:"input",width:120},{title:"自然幢名称",align:"left",field:"name",type:"input",minWidth:120},{title:"自然幢类型",align:"center",field:"bldType_dictText",width:120,type:"input"},{title:"有无电梯",align:"center",field:"liftFlag_dictText",width:120,type:"input"},{title:"单元数/总面积(㎡)",align:"center",field:"number",type:"input",width:200,slot:!0},{title:"总户数/已交户数",align:"center",field:"holds",type:"input",width:200,slot:!0},{title:"交存率(%)",align:"center",field:"houseNumsRate",type:"input",width:200},{title:"自然幢账户状态",align:"center",field:"accState_dictText",width:150,type:"input",slot:!0},{title:"操作",field:"action",align:"center",width:150,slot:!0,fixed:"right"}],url:{getBldInfoList:"/base/rBldInfo/getBldInfoList",getNameByCode:"/basics/sysZone/queryByCode"},loadData:function(t){return Object(s["e"])(e.url.getBldInfoList,Object.assign(t,e.getQueryParams()||{})).then((function(e){return e.result}))},form:this.$form.createForm(this)}},methods:{toPrint:function(){var e=h(f().mark((function e(t){var n,i;return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(100===t.houseNumsRate){e.next=3;break}return this.$message.warning("该自然幢存在未交存的业主户"),e.abrupt("return");case 3:if(n=u["default"].ls.get("Login_Userinfo"),i="",!n){e.next=8;break}return e.next=8,Object(s["e"])(this.url.getNameByCode,{code:n.orgCode}).then((function(e){e.result&&e.success&&(i=e.result.name)}));case 8:this.$refs.print.print(this.reportCode,{sysOrgCode:t.sysOrgCode,developName:t.developName,code:t.code,houseName:t.houseName,bldName:t.name,struArea:t.struArea,orgName:i});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),back:function(){this.$emit("back")},getQueryParams:function(){var e=Object.assign({},this.queryParam);return this.regionId=this.bldRegionId,this.regionName=this.bldRegionName,e.pid=this.regionId,e.state="0",Object(l["f"])(e)}}},y=m,b=(n("6df0"),n("2877")),g=Object(b["a"])(y,i,a,!1,null,"570059ba",null);t["default"]=g.exports},"44ca":function(e,t,n){"use strict";n("9438")},4928:function(e,t,n){"use strict";n("e70b")},"4b86":function(e,t,n){"use strict";n("1d34")},"4d2a":function(e,t,n){"use strict";n("0080")},"4f48":function(e,t,n){},"4f93":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{height:"100%",padding:e.modalFlag?"":"0 12px 12px"}}},[n("div",{staticClass:"boxContainer"},[e.modalFlag?n("m-e-s-super-query",{attrs:{isExpand:"",fieldList:e.queryObj,saveCode:e.fileName,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery"),type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.reset},scopedSlots:e._u([{key:"state",fn:function(t){var i=t.row;return[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择交存状态"},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}},e._l(e.depositState,(function(t){return n("a-select-option",{key:t.value},[e._v("\n            "+e._s(t.text)+"\n          ")])})),1)]}},{key:"bankCode",fn:function(t){var i=t.row;return[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择承办银行"},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}},e._l(e.bankInfoOptions,(function(t,i){return n("a-select-option",{key:i,attrs:{value:t.code}},[n("span",{attrs:{title:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1)]}}],null,!1,783751872)}):e._e(),e.modalFlag?n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"sort-config":{defaultSort:{field:"busi_date",order:"desc"}},"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,footerMethod:e.footerMethod,data:e.loadData,tableColumn:e.columns,"table-height":"auto","show-footer-overflow":!0,"if-init-query":!1,"header-align":"center",customColumns:{name:"DepositSearchList"}},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:function(t){return e.handleExport("交存业务")}}},[n("a-icon",{attrs:{type:"export"}}),e._v("\n                  基本信息\n                ")],1),n("a-menu-item",{key:"2",on:{click:function(t){return e.handleExportDetail("交存明细")}}},[n("a-icon",{attrs:{type:"export"}}),e._v("\n                  明细\n                ")],1),n("a-menu-item",{key:"3",on:{click:function(t){return e.downloadBillExpList()}}},[n("a-icon",{attrs:{type:"export"}}),e._v("\n                  电子票据\n                ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 导出操作\n                "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1)]},proxy:!0},{key:"regionName",fn:function(t){t.text;var i=t.row;return["5"==i.baseType?n("span",[e._v("-")]):n("a",{on:{click:function(t){return e.showRegionDetail(i)}}},[i.regionName?[e._v(e._s(i.regionName))]:e._e(),!i.regionName&&i.buildName?[e._v(e._s(i.buildName))]:e._e(),i.regionName||i.buildName||!i.cellName?e._e():[e._v(e._s(i.cellName))],i.regionName||i.buildName||i.cellName||!i.houseName?e._e():[e._v(e._s(i.houseName))]],2)]}},{key:"name",fn:function(t){var i=t.text,a=t.row;return["01"==a.busiObject?n("a",{on:{click:function(t){return e.showBusiDetail(a)}}},[e._v(e._s(i))]):n("span",[e._v(e._s(i))])]}},{key:"busiObject",fn:function(t){var i=t.text,a=t.row;return["0008"==a.busiTypeDetail||"0007"==a.busiTypeDetail||"0004"==a.busiTypeDetail?n("span",[e._v("公共户交存")]):n("span",["01"==i?n("span",[e._v("业主自交")]):e._e(),"02"==i?n("span",[e._v("企业垫交")]):e._e()])]}},{key:"dealState_dictText",fn:function(t){var i=t.text,a=t.row;return[0==a.dealState||1==a.dealState?n("a-badge",{attrs:{status:"success",text:i}}):e._e(),2==a.dealState?n("a-badge",{attrs:{status:"warning",text:i}}):e._e(),3==a.dealState||4==a.dealState||5==a.dealState?n("a-badge",{attrs:{status:"processing",text:i}}):e._e()]}},{key:"action",fn:function(t){t.text;var i=t.row;return[n("a",{on:{click:function(t){return e.handleView(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 明细")],1),null!=i.prtId?n("a-divider",{attrs:{type:"vertical"}}):e._e(),null!=i.prtId?n("a",{on:{click:function(t){return e.handleDeposit(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 电子票据")],1):e._e(),0!=i.state||"02"!=i.busiObject&&"03"!=i.busiObject?e._e():n("a-divider",{attrs:{type:"vertical"}}),0!=i.state||"02"!=i.busiObject&&"03"!=i.busiObject?e._e():n("a",{on:{click:function(t){return e.print(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 清册打印")],1)]}}],null,!1,2652619274)})],1):e._e()],1),n("shortcut-operation",{ref:"ShortcutOperation",staticStyle:{display:"none"},attrs:{showLastMenu:!1}}),n("j-modal",{attrs:{switchFullscreen:!0,title:"房屋交易明细",top:8,"body-style":{padding:0},visible:e.visible,width:18==e.font?"1400px":"1160px"},on:{cancel:e.handleCancel}},[n("template",{slot:"footer"},[n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          取消\n        ")],1)],1)]),n("deposit-business-details",{ref:"tradIngRecord"})],2),n("print-report-comp",{ref:"print"}),e.busiTypeDetail||e.dictCode?n("com-acc-info-modal",{ref:"detail",attrs:{"dict-code":e.dictCode,"busi-type-detail":e.busiTypeDetail}}):e._e(),n("j-modal",{attrs:{title:e.title,width:e.width,visible:e.billDownloadVisible,switchFullscreen:"",zIndex:e.zIndex,okButtonProps:{class:{"jee-hidden":!1}},cancelText:"关闭"},on:{ok:function(t){return e.downloadBillOk("电子票据")},cancel:function(t){return e.handleCancelBillDownload(!1)}}},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-form-model",{ref:"form",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,model:e.billDownModel}},[n("a-row",{staticClass:"houseInfo"},[n("a-form-model-item",{attrs:{prop:"dealDate",label:"缴款人邮箱"}},[n("a-input",{model:{value:e.billDownModel.ownerEmail,callback:function(t){e.$set(e.billDownModel,"ownerEmail",t)},expression:"billDownModel.ownerEmail"}})],1)],1)],1)],1)],1)],1)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("2b0e"),u=n("9fb0"),d=n("8fc8"),f=n("c1df"),p=n.n(f),h=n("eccd"),m=n("9bed"),y=n("6858"),b=n("d8a5"),g=n("4130"),v=n("c695"),w=n.n(v),_=n("3ed7"),x=n("5c96"),k=n("ca00"),D=n("5719"),C={name:"DepositSearch",components:{ShortcutOperation:D["default"],DepositBusinessDetails:g["default"],ComAccInfoModal:y["default"],PrintReportComp:m["default"],MESSuperQuery:l["default"],JDDictSelectTag:h["default"],TradingRecordTable:d["default"]},mixins:[s["a"],o["b"]],props:{isShowVerify:{type:Boolean,default:!0}},data:function(){return{font:c["default"].ls.get(u["w"]),depositState:[],fileName:"DepositSearch",description:"交存业务查询",modalFlag:!0,regionName:"",activeKey:"0",comPage:"floorViews",regionId:"",compentKey:0,depositType:"01",visible:!1,loading:!1,busiStartDate:"",busiEndDate:"",endOpen:!1,queryObj:[{label:"主管单位",value:"b.sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"b.zoneCode",type:"zoneSelect"},{type:"input",value:"rt.name",label:"小区名称",queryType:"like"},{type:"input",value:"b.busiNo",label:"业务编号",queryType:"like"},{type:"input",value:"name",label:"业主姓名",queryType:"like"},{type:"input",value:"certNo",label:"证件号码",queryType:"like"},{type:"slot",value:"b.state",label:"交存状态",slotName:"state",showInQueryList:!0},{type:"date",value:"b.busiDate",maxDate:"b.busiDate",label:"记账开始日期",queryType:"ge"},{type:"date",value:"b.busiDate",minDate:"b.busiDate",label:"记账结束日期",queryType:"le"},{type:"date",value:"trd.entryDate",maxDate:"trd.entryDate",label:"入账开始日期",queryType:"ge"},{type:"date",value:"trd.entryDate",minDate:"trd.entryDate",label:"入账结束日期",queryType:"le"},{type:"date",value:"a.reqdate",maxDate:"a.reqdate",label:"申请开始日期",queryType:"ge"},{type:"date",value:"a.reqdate",minDate:"a.reqdate",label:"申请结束日期",queryType:"le"},{type:"slot",value:"b.bank_code",label:"承办银行",slotName:"bankCode"},{type:"select",value:"b.busi_object",label:"交存类型",options:[{label:"个人代交",value:"01"},{label:"企业代交",value:"02"}],showInQueryList:!1}],columns:[{title:"主管单位",align:"left",headerAlign:"center",field:"sysOrgCode_dictText",minWidth:120},{title:"所属区县",align:"left",headerAlign:"center",field:"zoneCode_dictText",minWidth:120},{title:"小区名称",align:"left",headerAlign:"left",field:"regionName",slot:!0,minWidth:120,sort:!0},{title:"业务编号",align:"left",headerAlign:"left",field:"busiNo",width:170,sort:!0},{title:"业主姓名",align:"left",headerAlign:"left",field:"name",width:150,slot:!0},{title:"业务类型",align:"left",headerAlign:"left",field:"busiTypeDetail_dictText",width:130},{title:"承办银行",align:"left",headerAlign:"left",field:"bankCode_dictText",width:100},{title:"户数",align:"right",headerAlign:"right",field:"depCount",minWidth:80,sort:!0,customSortField:"b.total_num"},{title:"交存金额 (元)",align:"right",headerAlign:"right",field:"amount",formatter:"amount",width:130,sort:!0,customSortField:"b.total_amount"},{title:"状态",align:"left",headerAlign:"center",field:"dealState_dictText",width:130,slot:!0},{title:"申请日期",align:"center",formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""},field:"reqDate",width:120,sort:!0,customSortField:"a.reqdate"},{title:"记账日期",align:"center",formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""},field:"busiDate",width:120,sort:!0,customSortField:"b.busi_date"},{title:"入账日期",align:"center",formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""},field:"entryDate",width:120,sort:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:230,slot:!0}],depCountTotal:0,amountTotal:0,url:{list:"/deposit/firstDeposit/depositSearchList",listTotalInfo:"/deposit/firstDeposit/depositSearchListTotalInfo",exportXlsUrl:"/deposit/firstDeposit/depositSearchListExp",getHouseInfoDetail:"/common/fastHanding/getHouseInfoDetail",exportXlsDetailUrl:"/deposit/firstDeposit/depositSearchListExpDetail"},labelCol:{span:5},wrapperCol:{span:19},billDownloadVisible:!1,title:"请输入缴款人邮箱",width:"620px",zIndex:"1000",billDownModel:{ownerEmail:""},dictOptions:{},busiTypeDetail:"",dictCode:"",isBank:c["default"].ls.get(u["t"]),bankInfoOptions:[]}},created:function(){this.isBank&&(this.queryParam.bankCode=c["default"].ls.get(u["J"]).orgCode),this.getDepositStateDictionary(),this.bankInfoDict()},methods:{selectChangeEvent:function(e){var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.busiNo}))},selectAllEvent:function(e){e.checked;var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.busiNo}))},showBusiDetail:function(e){this.$refs.ShortcutOperation.comPage="2",this.$refs.ShortcutOperation.visible=!0,this.$refs.ShortcutOperation.fastButtonClick("房屋档案详情","FilesDetail",e)},handleExportDetail:function(e){var t=this;Object(r["c"])(this.url.exportXlsDetailUrl,this.queryParam).then((function(n){if(n)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([n],{type:"application/vnd.ms-excel"}),e+".xls");else{var i=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e+".xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else t.$message.warning("文件下载失败")}))},downloadBillExpList:function(){this.selectedRowKeys.length<=0?this.$message.warning("请选择一条记录！"):(this.billDownModel.ownerEmail="",this.billDownloadVisible=!0)},handleCancelBillDownload:function(){this.billDownloadVisible=!1},downloadBillOk:function(e){for(var t=this,n="",i=0;i<this.selectedRowKeys.length;i++)n+=this.selectedRowKeys[i]+",";Object(r["c"])("/deposit/bBusiDeal/downloadBillExpList?busiNos="+n+"&ownerEmail="+this.billDownModel.ownerEmail,{}).then((function(n){if(!n)return t.$message.warning("文件下载失败"),void(t.billDownloadVisible=!1);if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([n],{type:"application/vnd.ms-excel"}),e+(new Date).getTime()+".xlsx"),t.billDownloadVisible=!1;else{var i=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e+(new Date).getTime()+".xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i),t.billDownloadVisible=!1}}))},handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(n){var i="";n.forEach((function(e){e.includes("action")||(i=e.includes("_")?i+e.split("_")[0]+",":i+e+",")})),i=i.slice(0,-1),Object(r["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+i,t.queryParam).then((function(n){if(n)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([n],{type:"application/vnd.ms-excel"}),e+".xls");else{var i=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e+".xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else t.$message.warning("文件下载失败")}))}))},bankInfoDict:function(){var e=this;Object(r["e"])("/business/dBankCode/bankInfoStatistics").then((function(t){var n=e;t.result.forEach((function(e){var t={name:e.name,code:e.code,id:e.id};n.bankInfoOptions.push(t)}))}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(k["f"])(this.queryParam),this.getTotalInfo(),this.queryPage())},loadData:function(e){return Object(r["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.result}))},getTotalInfo:function(){var e,t,n=this;this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=x["Loading"].service({target:t,customClass:"tableFooterLoading"})),Object(r["e"])(this.url.listTotalInfo,Object.assign({current:1,size:-1},this.queryParam)).then((function(e){try{n.depCountTotal=e.result.depCountTotal||0,n.amountTotal=e.result.amountTotal||0}catch(t){n.depCountTotal=0,n.amountTotal=0}n.$refs.table.updateFooter()})).finally((function(){t&&e&&e.close()}))},footerMethod:function(e){var t=this,n=e.columns,i=e.data,a=[n.map((function(e,t){return"bankCode_dictText"===e.property?"合计：":["depCount"].includes(e.property)?w.a.sum(i,e.property):["amount"].includes(e.property)?Object(_["g"])(w.a.sum(i,e.property)):null})),n.map((function(e,n){return"bankCode_dictText"===e.property?"总合计：":["depCount"].includes(e.property)?t.depCountTotal:["amount"].includes(e.property)?Object(_["g"])(t.amountTotal):null}))];return a},getDepositStateDictionary:function(){var e=this;Object(b["g"])("busi_deal_state").then((function(t){t&&t.result.forEach((function(t){"9"!=t.value&&e.depositState.push(t)}))}))},showRegionDetail:function(e){var t={regionId:e.regionId,regionName:e.houseName?e.houseName:e.cellName?e.cellName:e.buildName?e.buildName:e.regionName};this.$router.push({path:"/communityPortrait",query:t})},print:function(e){this.$refs.print.print("deposit_inventory",{busiNo:e.busiNo})},reset:function(){this.busiStartDate="",this.busiEndDate=""},setBusiDate:function(e,t,n){e&&(this.$data[n]=e,this.$set(t,"val",p()(e).format("YYYY-MM-DD")))},disabledStartDate:function(e){var t=this.busiEndDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.busiStartDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},handleDeposit:function(e){var t=c["default"].ls.get(u["a"]),n=_baseConfig["production"].VUE_APP_API_BASE_URL+"/jmreport/view/656734915611262976?token="+t+"&bDepDrawListId="+e.id;window.open(n)},handleView:function(e){var t=this;"0008"==e.busiTypeDetail||"0007"==e.busiTypeDetail||"0004"==e.busiTypeDetail?(this.busiTypeDetail=e.busiTypeDetail,"0008"==e.busiTypeDetail?this.dictCode="shared_facilities_disposal":"0007"==e.busiTypeDetail?this.dictCode="fund_type":this.dictCode="",this.$nextTick((function(){t.$refs.detail.disabled=!0,t.$refs.detail.isChoose=!0,t.$refs.detail.initComDepositData(e.busiNo)}))):(this.visible=!0,this.$nextTick((function(){t.$refs.tradIngRecord.showByBusiNoAndRegionCode(e.busiNo,e.regionCode)})))},handleCancel:function(){this.visible=!1}}},T=C,S=(n("3894"),n("7203"),n("2877")),O=Object(S["a"])(T,i,a,!1,null,"a3c4118e",null);t["default"]=O.exports},"51ee":function(e,t,n){},5317:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"height-100",attrs:{bordered:!1,"body-style":{height:"100%"}}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,isInitQuery:!1,"is-full-query":!1,checkQueryData:e.checkQueryData,type:"queryList"},on:{reset:e.resetMesSuperQuery,ok:e.checkQueryData},scopedSlots:e._u([{key:"regionCode",fn:function(t){var i=t.row;return[n("j-dict-region-list-select",{attrs:{"value-field":"id"},on:{change:e.regionSelectChangeHandle},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}})]}},{key:"bldCode",fn:function(t){var i=t.row;return[n("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择自然幢"},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}},e._l(e.buildArr,(function(t){return n("a-select-option",{attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)]}}])}),n("div",{staticClass:"v-table-height"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","if-init-query":!1,stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,checkbox:!0,"checkbox-config":function(e){var t=e.row;return"0"==t.isDoing},"header-align":"center",expand:!1,data:e.loadData,"table-height":"auto",tableColumn:e.columns,customColumns:{name:"HouseTransferList"}},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-button",{attrs:{type:"primary",icon:"profile"},on:{click:e.transferBatch}},[e._v("批量过户")])],1)]},proxy:!0},{key:"accDepState",fn:function(t){var i=t.text;t.row;return["0"===i?n("span",[e._v("已交")]):e._e(),"1"===i?n("span",[e._v("未交")]):e._e(),"3"===i?n("span",[e._v("待全额退款")]):e._e(),"4"===i?n("span",[e._v("待销户")]):e._e(),"5"===i?n("span",[e._v("已注销")]):e._e(),"7"===i?n("span",[e._v("待资金转账")]):e._e(),"9"===i?n("span",[e._v("新建")]):e._e()]}},{key:"balance",fn:function(t){var i=t.text,a=t.row;return[e.isAllowTransfer?n("span",[e._v("\n          "+e._s(e.formatAmount(i))+"\n        ")]):n("span",["1"===a.isOutDue?n("span",[e._v(e._s(e.formatAmount(i)))]):n("a-popover",{attrs:{title:"注意"}},[n("template",{slot:"content"},[n("p",[e._v("您的账户余额不足应交金额（"+e._s(e.formatAmount(a.dueAmount))+"）金额的30%")])]),n("span",{staticClass:"textPointer"},[n("a-icon",{style:{color:"red"},attrs:{type:"info-circle"}}),n("span",{staticClass:"redBold marginLeft5"},[e._v(e._s(e.formatAmount(i)))])],1)],2)],1)]}},{key:"action",fn:function(t){t.text;var i=t.row;return["0"==i.isDoing?n("a",{on:{click:function(t){return e.houseTransfer(i)}}},[n("a-icon",{attrs:{type:"swap"}}),e._v(" 房屋过户")],1):n("a",{attrs:{disabled:"true"}},[n("a-icon",{attrs:{type:"swap"}}),e._v(" 有在途业务")],1)]}}])})],1),n("transfer-application-comp",{ref:"transfer",attrs:{"req-id":e.reqId},on:{ok:e.modalFormOk}}),n("transfer-application-batch-comp",{ref:"batch",on:{ok:e.modalFormOk}}),n("continue-deposit-modal",{ref:"continueDeposit",attrs:{"show-type":"modal"}})],1)},a=[],r=n("0a5e"),o=n("6fa9"),s=n("0fea"),l=n("a974"),c=n("03af"),u=n("f280"),d=n("2542"),f=n("fdce"),p={name:"HouseTransferList",mixins:[r["a"],l["HouseTransferMixins"]],components:{JDictRegionListSelect:f["default"],TransferApplicationBatchComp:d["default"],ContinueDepositModal:u["default"],MESSuperQuery:o["default"],TransferApplicationComp:c["default"]},data:function(){var e=this;return{description:"房屋过户管理页面",url:{list:"/base/rtRegion/selectHouseMsgToTransfer"},loadData:function(t){return Object(s["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{}},h=p,m=(n("aac1"),n("2877")),y=Object(m["a"])(h,i,a,!1,null,"2fe2f028",null);t["default"]=y.exports},5777:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[e.houseInfoShow?e._e():[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!1,rowStyle:e.setRowStyle,"checkbox-config":e.checkMethod,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,"table-height":"auto",tableColumn:e.columns,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery")},scopedSlots:e._u([{key:"name",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"houseInfo",fn:function(t){t.text;var i=t.row;return[n("a-space",[n("span",[e._v(e._s(i.nextNodeNum?i.nextNodeNum:0))]),n("span",[e._v("/")]),n("span",[e._v(e._s(i.houseNum?i.houseNum:0))]),n("span",[e._v("/")]),n("span",[e._v(e._s(e.formatterAmount(i.struArea,3)))])])]}},{key:"accState_dictText",fn:function(t){var i=t.text,a=t.row;return[9==a.accState||null==a.accState?n("span",[e._v("未开户")]):n("span",[e._v(e._s(i))])]}},{key:"number",fn:function(t){t.text;var i=t.row;return[n("span",[e._v("\n            "+e._s(i.nextNodeNum?i.nextNodeNum:0)+" / "+e._s(i.houseNum?i.houseNum:0)+" / "+e._s(e.formatterAmount(i.struArea,3))+"\n          ")])]}},{key:"state",fn:function(t){t.text;var i=t.row;return["0"===i.state?n("a-badge",{attrs:{status:"success",text:"正常"}}):e._e(),"4"===i.state?n("a-badge",{attrs:{status:"warning",text:"待注销"}}):e._e(),"5"===i.state?n("a-badge",{attrs:{status:"warning",text:"已注销"}}):e._e(),"6"===i.state?n("a-badge",{attrs:{status:"warning",text:"待归属变更"}}):e._e(),"7"===i.state?n("a-badge",{attrs:{status:"warning",text:"待撤销备案"}}):e._e()]}},{key:"action",fn:function(t){t.text;var i=t.row;return[n("a",{on:{click:function(t){return e.toBld(i)}}},[n("a-icon",{attrs:{type:"bank"}}),e._v(" 自然幢")],1)]}}],null,!1,701891563)})],1)],e.houseInfoShow?[n("region-tree-bill-list",{attrs:{"region-id":e.bldRegionId,"region-name":e.bldRegionName,"region-state":e.bldRegionState,"is-district":e.isDistrict},on:{back:e.back}})]:e._e(),n("region-info-detail",{ref:"detailModalForm"})],2)},a=[],r=n("a596"),o=n("6fa9"),s=n("4a2d"),l=n("0a5e"),c=n("3805"),u=n("0fea"),d=n("3ed7"),f={name:"CompanyBillList",mixins:[l["a"]],components:{RegionInfoDetail:r["default"],MESSuperQuery:o["default"],RegionBatchChangePlaceModal:s["default"],RegionTreeBillList:c["default"]},data:function(){return{fileName:"CompanyBillList",description:"企业票据管理列表",houseInfoShow:!1,bldRegionId:"",bldRegionName:"",bldRegionState:"",showType:"queryList",isDistrict:!1,queryObj:[{label:"小区名称",value:"rr.name",type:"input",queryType:"like"},{label:"小区地址",value:"rr.address",showInQueryList:!1,type:"input",queryType:"like"},{label:"行政区域",value:"rr.zoneCode",type:"tree",options:[]},{label:"状态",value:"rr.state",type:"select",options:[{label:"正常",value:"0"},{label:"待撤销备案",value:"7"},{label:"待注销",value:"4"},{label:"已注销",value:"5"},{label:"待归属变更",value:"6"}]}],columns:[{title:"小区名称",headerAlign:"left",align:"left",field:"name",minWidth:"200px",type:"input",slot:!0},{title:"所属区县",align:"center",headerAlign:"center",field:"zoneCode_dictText",width:200,type:"input"},{title:"总栋数/总户数/总面积(㎡)",align:"right",headerAlign:"right",slot:!0,field:"houseInfo",width:240},{title:"备案日期",align:"center",field:"recDate",width:200,type:"input"},{title:"状态",align:"left",headerAlign:"center",field:"state",type:"input",width:100,slot:!0},{title:"公共户状态",align:"center",headerAlign:"center",field:"accState_dictText",type:"input",width:200,slot:!0},{title:"操作",field:"action",align:"center",width:300,slot:!0,fixed:"right"}],url:{list:"/base/rRegionInfo/list"}}},created:function(){this.init()},methods:{formatterAmount:d["g"],setRowStyle:function(e){var t=e.row;if("5"===t.accState)return"background-color: #efefef"},checkMethod:function(e){var t=e.row;return"5"!==t.accState},back:function(){this.queryParam={},this.houseInfoShow=!1},loadData:function(e){return this.queryParam.state="0,4,5,6,7",Object(u["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.result}))},init:function(){this.queryObj.map((function(e){"rr.zoneCode"===e.value&&Object(u["e"])("/basics/sysZone/queryTreeList",{type:"tenant"}).then((function(t){t.success&&(e.options=t.result,1!==t.result.length||null!=t.result[0].children&&0!==t.result[0].children.length||(e.val=t.result[0].key))}))}))},handleDetail:function(e){var t={regionId:e.id,regionName:e.name};this.$router.push({path:"/communityPortrait",query:t})},toBld:function(e){this.houseInfoShow=!0,this.bldRegionId=e.id,this.bldRegionName=e.name,this.bldRegionState=e.accState,this.isDistrict=!(!e.isDistrict||1!==e.isDistrict)}}},p=f,h=(n("ebbd"),n("2877")),m=Object(h["a"])(p,i,a,!1,null,"7ef3f37b",null);t["default"]=m.exports},"5dfe":function(e,t,n){"use strict";n("51ee")},"5ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",padding:0}}},[n("div",{staticClass:"contentPage",staticStyle:{height:"100%"}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,ifInitQuery:!1,tableColumn:e.columns},scopedSlots:e._u([{key:"name",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"state",fn:function(t){t.text;var i=t.row;return["9"==i.state?n("span",[e._v("新建档")]):e._e(),"2"==i.state?n("span",[e._v("待备案")]):e._e(),"0"==i.state?n("span",[e._v("正常")]):e._e(),"4"==i.state?n("span",[e._v("待注销")]):e._e(),"5"==i.state?n("span",[e._v("已注销")]):e._e(),"6"==i.state?n("span",[e._v("待归属变更")]):e._e(),"7"==i.state?n("span",[e._v("待撤销备案")]):e._e()]}}])})],1)],1),n("cell-info-detail",{ref:"detailForm"})],1)},a=[],r=n("0a5e"),o=n("6c49"),s=n("6fa9"),l=n("0fea"),c=n("ca00"),u={name:"CellBillList",mixins:[r["a"]],components:{CellInfoDetail:o["default"],MESSuperQuery:s["default"]},props:["bldId","bldInfo"],data:function(){return{fileName:"CellBillList",description:"单元票据页面",confirmLoading:!1,showType:"queryList",queryObj:[{label:"单元名称",value:"rr.name",type:"input",queryType:"like"}],columns:[{title:"单元名称",headerAlign:"center",align:"left",field:"name",width:200,type:"input",slot:!0},{title:"单元编号",headerAlign:"center",align:"left",field:"code",type:"input"},{title:"地上层数",align:"center",field:"overFloor",type:"input",width:200},{title:"地下层数",align:"center",field:"underFloor",type:"input",width:200},{title:"状态",align:"center",field:"state",type:"input",width:200,slot:!0}],url:{list:"/base/rCellInfo/list",queryBldInfoById:"/base/rBldInfo/queryById"}}},watch:{bldId:function(){this.initRoute()}},created:function(){this.initRoute()},methods:{cellChooseOk:function(){this.RefreshTree(),this.modalFormOk()},RefreshTree:function(){this.$emit("tree-load")},initRoute:function(){var e=this;this.onClearSelected(),this.$nextTick((function(){e.$refs.table.localParams=e.getQueryParams(),e.$refs.table.loadData(),e.$refs.table.refresh()}))},getQueryParams:function(){var e=Object.assign({},this.queryParam);return e.pid=this.bldId[0],e.state="0,4,6,7",Object(c["f"])(e)},loadData:function(e){return Object(l["e"])(this.url.list,Object.assign(e,this.getQueryParams())).then((function(e){return e.result}))},handleDetail:function(e){this.$refs.detailForm.edit(e)}}},d=u,f=(n("8528"),n("2877")),p=Object(f["a"])(d,i,a,!1,null,"6ee3cc72",null);t["default"]=p.exports},"67f0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"changInfoComp"},[n("a-collapse",{directives:[{name:"show",rawName:"v-show",value:e.isHeader,expression:"isHeader"}],attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"title marginTop10"},[n("span",{staticClass:"collapseTitle"},[e._v("\n            "+e._s(e.headerTitle)+"\n          ")])])]},proxy:!0}])},[n("j-form-container",{ref:"formRow",attrs:{rules:e.rules,model:e.changeInfo,disabled:e.disabled,border:!1}},[n("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[n("a-col",{attrs:{span:4}},[e._v(e._s(e.headerDate))]),n("a-col",{attrs:{span:8}},[n("a-input",{staticClass:"disabledText",attrs:{disabled:!0},model:{value:e.changeInfo.createTimeText,callback:function(t){e.$set(e.changeInfo,"createTimeText",t)},expression:"changeInfo.createTimeText"}})],1),n("a-col",{attrs:{span:4}},[e._v(e._s(e.headerUse))]),n("a-col",{attrs:{span:8}},[n("a-input",{staticClass:"disabledText",attrs:{disabled:!0},model:{value:e.changeInfo.createByName,callback:function(t){e.$set(e.changeInfo,"createByName",t)},expression:"changeInfo.createByName"}})],1),n("a-col",{class:{"height-108":!0},attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v(e._s(e.headerReason)+"\n          ")]),n("a-col",{class:{"height-108":!0},attrs:{span:20,"data-prop":"reason"}},[e.disabled?n("span",[e._v(e._s(e.changeInfo.reason))]):n("a-textarea",{attrs:{rows:4,placeholder:"请填写申请原因"},model:{value:e.changeInfo.reason,callback:function(t){e.$set(e.changeInfo,"reason",t)},expression:"changeInfo.reason"}})],1)],1)],1)],1)],1)],1)},a=[],r=n("0fea"),o=n("c1df"),s=n.n(o),l=n("2b0e"),c=n("9fb0"),u={name:"ChangeInfoComp",props:{headerTitle:{type:String,default:"申请信息"},headerDate:{type:String,default:"申请日期"},headerUse:{type:String,default:"申请人"},headerReason:{type:String,default:"原因"},busiType:{type:String,default:""},busiTypeDetail:{type:String,default:""},disabled:{type:Boolean,default:!1},isHeader:{type:Boolean,default:!0}},data:function(){return{changeInfo:{},activeKey:["1"],rules:{reason:[{required:!0,message:"请输入原因",trigger:"change"}]},url:{getChangeInfoByFlowId:"/common/bBusiReq/getChangeInfoByFlowId"}}},mounted:function(){if(!this.isHeader){var e=this.$refs.formRow.$el;this.$refs.changInfoComp.appendChild(e)}},methods:{initData:function(e){var t=this;this.$nextTick((function(){e&&e.id||(t.changeInfo.createTimeText=s()(t.changeInfo.reqDate).format("YYYY-MM-DD"),t.changeInfo.createByName=t.changeInfo&&t.changeInfo.reqName?t.changeInfo.reqName:l["default"].ls.get(c["J"]).realname,t.$forceUpdate())}))},initChange:function(e){var t=this;return new Promise((function(n){Object(r["e"])(t.url.getChangeInfoByFlowId,{flowId:e}).then((function(e){e.success&&e.result&&(t.changeInfo.createTimeText=s()(e.result.reqDate).format("YYYY-MM-DD"),t.changeInfo.createByName=e.result.reqName,t.changeInfo.reason=e.result.reason,t.$forceUpdate()),n(e)}))}))},checkData:function(){var e=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow);return e.valida},getChangeInfo:function(){return this.changeInfo.busiType=this.busiType,this.changeInfo.busiTypeDetail=this.busiTypeDetail,this.changeInfo}}},d=u,f=(n("33f9"),n("2877")),p=Object(f["a"])(d,i,a,!1,null,"6f0a7426",null);t["default"]=p.exports},"687b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"height-100"},[n("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{padding:"8px"}}},[n("div",{staticClass:"cardBody"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"checkbox-config":e.checkboxConfig,expand:!1,data:e.loadData,tableColumn:e.columns,"header-align":"center"},scopedSlots:e._u([{key:"busiNo",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.addDeposit}},[e._v("添加")]),n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("撤销")],1),n("a-menu-item",{key:"2",on:{click:e.bookkeepingBatch}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("记账")],1)],1),n("a-button",[e._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var i=t.row;return["0"!=i.state&&"1"!=i.state?n("a",{on:{click:function(t){return e.handleEdit(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 修改")],1):e._e(),"0"!=i.state&&"1"!=i.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),"0"!=i.state&&"1"!=i.state?n("a-popconfirm",{attrs:{title:"确定撤销吗?"},on:{confirm:function(){return e.handleDelete(i)}}},[n("a",[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销")],1)]):e._e(),"0"!=i.state&&"1"!=i.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),"0"!=i.state&&"1"!=i.state?n("a",{on:{click:function(t){return e.bookkeeping(i)}}},[n("a-icon",{attrs:{type:"highlight"}}),e._v(" 记账")],1):e._e(),"0"!=i.state&&"1"!=i.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),n("a",{on:{click:function(t){return e.print(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 通知书打印")],1)]}}])})],1)],1),n("public-deposit-modal",{ref:"publicDepositModal",on:{ok:e.dealOk}}),n("print-report-comp",{ref:"print"}),n("deal-modal-comp",{ref:"deal",attrs:{"deal-id":e.dealId},on:{ok:e.dealOk}})],1)],1)},a=[],r=n("0a5e"),o=n("ac0d"),s=n("9630"),l=n("9bed"),c=n("6fa9"),u=n("0fea"),d=n("d8a5"),f=n("e334"),p=n("3ed7");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",y="executing",b="completed",g={};function v(){}function w(){}function _(){}var x={};c(x,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(x=D);var C=_.prototype=v.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=d(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==h(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=f;return function(r,o){if(a===y)throw Error("Generator is already running");if(a===b){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===f)throw a=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var c=d(t,n,i);if("normal"===c.type){if(a=i.done?b:p,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=b,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=d(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=_,a(C,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:w,configurable:!0}),w.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function y(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){y(r,i,a,o,s,"next",e)}function s(e){y(r,i,a,o,s,"throw",e)}o(void 0)}))}}var g={name:"PublicDeposot",mixins:[r["a"],o["b"]],components:{PublicDepositModal:f["default"],DealModalComp:s["default"],PrintReportComp:l["default"],MESSuperQuery:c["default"]},data:function(){var e=this;return{description:"公房交存页面",fileName:"PublicDeposit",modalFlag:!0,activeKey:"0",code:"",regionId:"",queryObj:[{type:"input",value:"bd.busi_no",label:"业务编号",queryType:"like"},{type:"input",value:"bdl.acc_code",label:"资金账号",queryType:"like"},{type:"select",value:"bd.state",label:"交存状态",queryType:"eq",options:[]}],columns:[{title:"业务编号",align:"center",headerAlign:"center",field:"busiNo",width:170,type:"input",slot:!0},{title:"承办银行",align:"left",headerAlign:"left",field:"bankCode_dictText",width:160},{title:"资金账号",align:"left",headerAlign:"center",field:"accCode",direction:"rtl",width:200},{title:"单位名称",align:"left",field:"corpName"},{title:"交存金额 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"totalAmount",width:140},{title:"交存状态",align:"center",field:"state_dictText",width:140},{title:"操作",field:"action",align:"center",width:300,slot:!0}],loadData:function(t){return Object(u["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/deposit/firstDeposit/publicAccDepositList",printPublicHouseDep:"/deposit/bBusiDeal/printPublicHouseDep",publicDepDelete:"/deposit/firstDeposit/publicDepDelete"},dealId:""}},created:function(){this.initDictConfig()},methods:{initDictConfig:function(){this.queryObj.map((function(e){"bd.state"===e.value&&Object(d["g"])("busi_deal_state").then((function(t){t.success&&(e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)})))}))}))},bookkeeping:function(e){this.dealId=e.dealId,this.$refs.deal.visible=!0},bookkeepingBatch:function(e){var t=this.$createElement,n=this;if(this.selectedRows.length<=0)this.$message.warning("请选择数据后再记账！");else{var i=[],a=[];this.selectedRows.forEach((function(e){3==e.state||2==e.state?i.push(e.dealId):4==e.state&&a.push(e.busiNo)})),0==i.length&&0==a.length?this.$message.warning("已记账完成，无需记账"):0==i.length&&a.length>0?this.$message.warning("请先打印通知书，再进行记账"):i.length>0&&a.length>0?this.$confirm({title:"注意",icon:function(){return t("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},content:"编号为"+a.join(",")+"的交存单尚未打印，是否记账剩余交存单？",onOk:function(){return new Promise(function(){var e=b(m().mark((function e(t,a){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.dealId=i.join(","),n.$refs.deal.visible=!0,t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onCancel:function(){}}):(i.length>0&&a.length,this.dealId=i.join(","),this.$refs.deal.visible=!0)}},dealOk:function(){this.dealId="",this.selectedRows=[],this.selectedRowKeys=[],this.modalFormOk()},tabChange:function(e){this.activeKey=e},handleEdit:function(e){this.$refs.publicDepositModal.handleEdit(e)},handleDetail:function(e){this.$refs.publicDepositModal.disabled=!0,this.$refs.publicDepositModal.handleEdit(e)},addDeposit:function(){this.$refs.publicDepositModal.isChoose=!1,this.$refs.publicDepositModal.handleEdit()},handleDelete:function(e){var t=this;Object(u["j"])(this.url.publicDepDelete,{keyList:[],busiNo:e.busiNo}).then((function(e){t.$refs.table.refresh(),t.$message.success("操作成功！")}))},batchDel:function(){var e=this.$createElement;if(this.selectedRowKeys.length<=0)this.$message.error("请选择一条数据进行操作！");else{var t=this,n=0,i=[];if(this.selectedRows.forEach((function(e){4!=e.state&&2!=e.state&&3!=e.state||(i.push(e.busiNo),n=Object(p["c"])(n,e.totalAmount))})),i.length<=0)this.$message.warning("您当前没有需要撤销的信息");else{var a={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};n=Number(n).toLocaleString("zh-CN",a),this.$confirm({title:"注意",content:"您当前正在进行批量撤销业务，共"+i.length+"户，涉及金额"+n+"元，是否办理？",okText:"确定",cancelText:"取消",icon:function(){return e("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},onOk:function(){Object(u["j"])(t.url.publicDepDelete,{keyList:i}).then((function(e){t.$refs.table.refresh(),t.$message.success("操作成功！")}))}})}}},selectChangeEvent:function(e){e._checked;var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.busiNo}))},checkboxConfig:function(e){var t=e.row;return"0"!=t.state&&"1"!=t.state},print:function(e){var t=this;4==e.state?Object(u["e"])(this.url.printPublicHouseDep,{busiNo:e.busiNo}).then((function(n){n.success?(t.$refs.print.print("deposit_public_house",{busiNo:e.busiNo}),t.queryPage()):t.$message.warning("操作异常，请联系管理员！")})):this.$refs.print.print("deposit_public_house",{busiNo:e.busiNo})}}},v=g,w=(n("a1ad"),n("a179"),n("2877")),_=Object(w["a"])(v,i,a,!1,null,"1b5561c1",null);t["default"]=_.exports},"68f1":function(e,t,n){},"6b75":function(e,t,n){"use strict";n("f976")},"6bd7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"height100"},[e.regionListFlag?n("income-deposit-region-list",{ref:"incomeDepositRegionList",on:{clickBtnCall:e.onClickBtnCall}}):n("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{padding:"8px"}}},[n("div",{staticClass:"cardBody"},[n("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","table-height":"auto",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"checkbox-config":e.checkboxConfig,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"header-align":"center",customColumns:{name:"comAccDepositList"}},scopedSlots:e._u([{key:"busiNo",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"houseNum",fn:function(t){var i=t.row;t.text,t.name;return[n("span",{staticStyle:{color:"blue"}},[e._v(e._s(i.depositNum))]),e._v("/"),n("span",{staticStyle:{color:"red"}},[e._v(e._s(i.unDepositNum))]),e._v("/"+e._s(i.houseNum)+"\n          ")]}},{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-button",{attrs:{icon:"rollback"},on:{click:function(){return e.regionListFlag=!0}}},[e._v("返回")]),n("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.addDeposit}},[e._v("新增")]),n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("撤销")],1),e.showAccount?n("a-menu-item",{key:"2",on:{click:e.bookkeepingBatch}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("批量记账")],1):e._e()],1),n("a-button",[e._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var i=t.row;return[e.publicBenefitsAudit?e._e():[n("a",{attrs:{disabled:"4"!==i.state},on:{click:function(t){return e.handleEdit(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 修改")],1),n("a-divider",{attrs:{type:"vertical"}})],"X"!==i.state?[n("a",{on:{click:function(t){return e.print(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 通知书打印")],1),e.publicBenefitsAudit?e._e():n("a-divider",{attrs:{type:"vertical"}})]:e._e(),[e.publicBenefitsAudit&&"X"===i.state?n("a-popconfirm",{attrs:{title:"确定撤销吗?"},on:{confirm:function(){return e.handleDelete(i)}}},[n("a",[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销")],1)]):e.publicBenefitsAudit?e._e():n("a-popconfirm",{attrs:{title:"确定撤销吗?"},on:{confirm:function(){return e.handleDelete(i)}}},[n("a",{attrs:{disabled:2!=i.state&&3!=i.state&&"4"!==i.state}},[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销")],1)])],3!=i.state&&2!=i.state||!e.showAccount?"0"==i.state?[!(!i.assBusiNo&&"0004"!=e.busiTypeDetail||"0004"==e.busiTypeDetail&&i.drawAmount>0)||!e.isAdmin&&e.hasEnablePageConfigByKey("hideAllot")?e._e():n("a-divider",{attrs:{type:"vertical"}}),i.assBusiNo||"0004"==e.busiTypeDetail||!e.isAdmin&&e.hasEnablePageConfigByKey("hideAllot")?e._e():n("a",{attrs:{disabled:i.isDivide},on:{click:function(t){return e.handleTransfer(i)}}},[n("a-icon",{attrs:{type:"cluster"}}),e._v(" 分配")],1),"0004"==e.busiTypeDetail&&i.drawAmount>0&&(e.isAdmin||!e.hasEnablePageConfigByKey("hideAllot"))?n("a",{attrs:{disabled:i.isDivide},on:{click:function(t){return e.handleTransfer(i)}}},[n("a-icon",{attrs:{type:"cluster"}}),e._v(" 分配")],1):e._e(),i.assBusiNo?[n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.handleTransList(i)}}},[n("a-icon",{attrs:{type:"eye"}}),e._v(" 分配查看")],1)]:e._e()]:e._e():[n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.bookkeeping(i)}}},[n("a-icon",{attrs:{type:"highlight"}}),e._v(" 记账")],1)]]}}])})],1)],1)]),n("com-acc-deposit-modal",{ref:"comAccDeposit",attrs:{"dict-code":e.dictCode,"busi-type-detail":e.busiTypeDetail}}),n("print-report-comp",{ref:"print"}),n("deal-modal-comp",{ref:"deal",attrs:{"deal-id":e.dealId,regionId:e.regionInfo.id},on:{ok:e.dealOk}}),n("acc-fu-transfer-modal",{ref:"accFuTrModel",attrs:{modFlag:"deposit"},on:{ok:e.modalFormOk}}),n("acc-deposit-business-list",{ref:"accDepositBusiness"}),n("region-info-open-acc",{ref:"regionInfoOpenAcc",on:{ok:e.reloadRegionList}})],1)},a=[],r=n("d8a5"),o=(n("6eb7"),n("0fea")),s=n("ac0d"),l=n("0a5e"),c=n("6fa9"),u=n("3ed7"),d=n("ca00"),f=n("6858"),p=n("9bed"),h=n("bd6c"),m=n("9630"),y=n("5987"),b=n("2f26"),g=n("4ec3"),v=n("4312"),w=n("744c");function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof b?t:b,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function b(){}function g(){}function v(){}var w={};c(w,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(w=D);var C=v.prototype=b.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=d(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==_(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=f;return function(r,o){if(a===h)throw Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===f)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=h;var c=d(t,n,i);if("normal"===c.type){if(a=i.done?m:p,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=m,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=d(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(_(t)+" is not iterable")}return g.prototype=v,a(C,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),y}},t}function k(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){k(r,i,a,o,s,"next",e)}function s(e){k(r,i,a,o,s,"throw",e)}o(void 0)}))}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=N(e,"string");return"symbol"==_(t)?t:t+""}function N(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var I={name:"ComAccDeposit",mixins:[l["a"],s["b"]],props:{busiTypeDetail:{type:String,default:""},dictCode:{type:String,default:""},sourceHidden:{type:Boolean,default:!1},reportCode:{type:String,default:"deposit_publicAcc"}},components:{RegionInfoOpenAcc:h["default"],IncomeDepositRegionList:w["default"],FirstDeposit:v["default"],DealModalComp:m["default"],PrintReportComp:p["default"],MESSuperQuery:c["default"],ComAccDepositModal:f["default"],AccFuTransferModal:y["default"],AccDepositBusinessList:b["default"]},created:function(){var e=this;this.initDictConfig(),this.queryParam.busiTypeDetail=this.busiTypeDetail,Object(o["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.isAdmin=!0)}))},data:function(){var e=this;return{publicBenefitsAudit:!1,accountOpenModel:{},regionListFlag:!0,regionInfo:{},regionAccInfo:{},showAccount:!0,transModel:{},fileName:"ComAccDeposit",description:"公共户管理页面",modalFlag:!0,activeKey:"0",isAdmin:!1,code:"",regionId:"",queryObj:[{type:"input",value:"bd.busi_no",label:"业务编号",queryType:"like"},{type:"input",value:"bdl.acc_code",label:"资金账号",queryType:"like"},{type:"select",value:"acc.base_type",label:"账户类型",queryType:"eq",options:[]},{type:"select",value:"bd.state",label:"交存状态",queryType:"like",options:[]}],columns:[{title:"业务编号",align:"center",headerAlign:"center",field:"busiNo",width:170,type:"input",slot:!0},{title:"承办银行",align:"left",headerAlign:"left",field:"bankCode_dictText",width:160},{title:"资金账号",align:"left",headerAlign:"left",field:"accCode",direction:"rtl",minWidth:120},{title:"账户类型",align:"left",headerAlign:"left",width:140,field:"baseType_dictText"},{title:"账户名称",align:"left",headerAlign:"left",field:"accName",width:140},{title:"交存金额 (元)",align:"right",headerAlign:"right",formatter:"amount",field:"amount",width:140},{title:"交存状态",align:"center",field:"state_dictText",width:140,formatter:function(e){var t=e.cellValue;return"X"===t?"审核中":t}},{title:"资金来源",align:"left",hidden:this.sourceHidden,headerAlign:"left",field:"fundTypeDictText",minWidth:140},{title:"操作",field:"action",align:"center",width:400,slot:!0}],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/deposit/firstDeposit/comAccDepositList",batchPrintOfComAcc:"deposit/bBusiDeal/batchPrintOfComAcc",checkHasDoingAcc:"/base/rAccInfo/checkHasDoingAcc",queryAccInfoByCode:"/deposit/firstDeposit/queryAccInfoByCode"},dictOptions:{},dealId:""}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{reloadRegionList:function(){this.$refs.incomeDepositRegionList.queryPage()},onClickBtnCall:function(e,t){var n=this;if("信息"===e){if(this.regionId=t.id,9==t.accState||null==t.accState)return void Object(o["j"])(this.url.checkHasDoingAcc,{nodeId:t.id}).then((function(e){e.success?n.$refs.regionInfoOpenAcc.show(t.id):n.$message.warning(e.message)}));this.getAccListByRegionId(t)}},getAccListByRegionId:function(e){var t=this;this.regionListFlag=!1,this.$set(this,"regionInfo",e),Object(o["e"])(this.url.queryAccInfoByCode,{accCode:this.regionInfo.accCode}).then((function(e){e.success?t.$set(t,"regionAccInfo",e.result):t.$message.warning("")})),this.$nextTick((function(){t.$refs.mesSuperQuery.manuallyQuery()}))},handleSuperQuery:function(e,t){if(this.queryParam.queryType=e.queryType,e.queryItems){var n=!1;e.queryItems.forEach((function(e){n||"region.id"!=e.field||(n=!0),e.val&&(e.val=e.val.toString().trim())})),n||e.queryItems.unshift({field:"region.id",rule:"eq",val:this.regionId})}else e.queryItems=[{field:"region.id",rule:"eq",val:this.regionId}];this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(d["f"])(this.queryParam),this.queryPage())},handleTransfer:function(e){this.transModel={},this.transModel.transFlag=!0,this.transModel.record=e,this.transModel.record.code=e.accCode,this.transModel.record.address=e.address,this.transModel.record.struArea=e.struArea,this.transModel.record.psnName=e.accName,this.transModel.record.assignedBusiNo=e.busiNo,Object.is(Number(e.balance),NaN)&&(e.debitAmount=0),Object.is(Number(e.balanceFrozen),NaN)&&(e.creditAmount=0),Object.is(Number(e.amount),NaN)&&(e.amount=0);var t=T({},this.transModel);"0007"==this.busiTypeDetail?(t.record.businessType="6062",this.$refs.accFuTrModel.showPubDeposit=!1,this.$refs.accFuTrModel.showBuyerDeposit=!1):"0008"==this.busiTypeDetail?(t.record.businessType="6063",this.$refs.accFuTrModel.showManageDeposit=!1,this.$refs.accFuTrModel.showBuyerDeposit=!1):"0004"==this.busiTypeDetail&&(t.record.amount=e.drawAmount,t.record.businessType="6064",this.$refs.accFuTrModel.showManageDeposit=!1,this.$refs.accFuTrModel.showPubDeposit=!1),this.$refs.accFuTrModel.show(t),this.$refs.accFuTrModel.title="账户资金转账(一对多)"},handleTransList:function(e){this.$refs.accDepositBusiness.show(e)},initDictConfig:function(){var e=this;Object(r["e"])("public_benefits_audit").then((function(t){e.publicBenefitsAudit="1"==t})),this.queryObj.map((function(e){"acc.base_type"===e.value&&Object(r["g"])("account_type").then((function(t){t.success&&(e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)})))})),"bd.state"===e.value&&Object(r["g"])("busi_deal_state").then((function(t){t.success&&(e.options.push({label:"全部",value:""}),t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)})))}))}))},bookkeeping:function(e){this.$refs.deal.visible=!0,this.dealId=e.dealId},bookkeepingBatch:function(e){var t=this.$createElement,n=this;if(this.selectedRows.length<=0)this.$message.warning("请选择数据后再记账！");else{var i=[],a=[];this.selectedRows.forEach((function(e){3==e.state||2==e.state?i.push(e.dealId):4==e.state&&a.push(e.busiNo)})),0==i.length&&0==a.length?this.$message.warning("已记账完成，无需记账"):0==i.length&&a.length>0?this.$message.warning("请先打印通知书，再进行记账"):i.length>0&&a.length>0?this.$confirm({title:"注意",icon:function(){return t("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},content:"编号为"+a.join(",")+"的交存单尚未打印，是否记账剩余交存单？",onOk:function(){return new Promise(function(){var e=D(x().mark((function e(t,a){return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.dealId=i.join(","),n.$refs.deal.visible=!0,t();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onCancel:function(){}}):(i.length>0&&a.length,this.dealId=i.join(","),this.$refs.deal.visible=!0)}},dealOk:function(){this.dealId="",this.selectedRows=[],this.selectedRowKeys=[],this.modalFormOk()},tabChange:function(e){this.activeKey=e},handleEdit:function(e){this.$refs.comAccDeposit.handleEdit(e)},handleDetail:function(e){this.$refs.comAccDeposit.disabled=!0,this.$refs.comAccDeposit.handleEdit(e)},addDeposit:function(){this.$refs.comAccDeposit.isChoose=!1,this.$refs.comAccDeposit.visible=!0,this.$refs.comAccDeposit.chooseComAccInfo(this.regionAccInfo)},handleTally:function(){this.$message.error("功能未开发")},handleDelete:function(e){var t=this;this.publicBenefitsAudit?Object(o["j"])("/deposit/firstDeposit/comAccDepDeleteAudit",{keyList:[],busiNo:e.busiNo}).then((function(e){e.success?(t.$refs.table.refresh(),t.$message.success("操作成功！")):t.$message.warning(e.message)})):Object(o["j"])("/deposit/firstDeposit/comAccDepDelete",{keyList:[],busiNo:e.busiNo}).then((function(e){t.$refs.table.refresh(),t.$message.success("操作成功！")}))},batchDel:function(){var e=this,t=this.$createElement;if(this.selectedRowKeys.length<=0)this.$message.error("请选择一条数据进行操作！");else{var n=this,i=0,a=[];if(this.selectedRows.forEach((function(t){e.publicBenefitsAudit?"X"===t.state&&(a.push(t.busiNo),i=Object(u["c"])(i,t.amount)):4!=t.state&&2!=t.state&&3!=t.state||(a.push(t.busiNo),i=Object(u["c"])(i,t.amount))})),a.length<=0)this.$message.warning("您当前没有需要撤销的信息");else{var r={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};i=Number(i).toLocaleString("zh-CN",r),this.$confirm({title:"注意",content:"您当前正在进行批量撤销业务，共"+a.length+"户，涉及金额"+i+"元，是否办理？",okText:"确定",cancelText:"取消",icon:function(){return t("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},onOk:function(){n.publicBenefitsAudit?Object(o["j"])("/deposit/firstDeposit/comAccDepDeleteAudit",{keyList:a}).then((function(e){e.success?(n.$refs.table.refresh(),n.$message.success("操作成功！")):n.$message.warning(e.message)})):Object(o["j"])("/deposit/firstDeposit/comAccDepDelete",{keyList:a}).then((function(e){n.$refs.table.refresh(),n.$message.success("操作成功！")}))}})}}},selectChangeEvent:function(e){e._checked;var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.busiNo}))},checkboxConfig:function(e){var t=e.row;return this.publicBenefitsAudit?"X"===t.state:"0"!=t.state&&"1"!=t.state},print:function(e){var t=this,n=[];n.push(e.busiNo),4==e.state?Object(o["j"])(this.url.batchPrintOfComAcc,n).then((function(e){e.success?(t.$refs.print.print(t.reportCode,{busiNo:n,busiTypeDetail:t.busiTypeDetail}),t.queryPage()):t.$refs.print.print(t.reportCode,{busiNo:n,busiTypeDetail:t.busiTypeDetail})})):this.$refs.print.print(this.reportCode,{busiNo:n,busiTypeDetail:this.busiTypeDetail})}},mounted:function(){var e=this;this.$bus.$on("tableRefresh",(function(){e.queryPage()})),Object(g["l"])("deposit_is_account").then((function(t){e.showAccount="0"!=t.result}))}},q=I,E=(n("f1ba"),n("b3c9"),n("2877")),P=Object(E["a"])(q,i,a,!1,null,"7a1634e6",null);t["default"]=P.exports},"6db5":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",padding:0}}},[n("div",{staticClass:"contentPage",staticStyle:{height:"100%"}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,ifInitQuery:!1,tableColumn:e.columns},scopedSlots:e._u([{key:"name",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"number",fn:function(t){t.text;var i=t.row;return[n("span",[e._v("\n            "+e._s(i.nextNodeNum?i.nextNodeNum:0)+" / "+e._s(i.houseNum?i.houseNum:0)+" / "+e._s(i.struArea?i.struArea:0)+"\n          ")])]}},{key:"accState_dictText",fn:function(t){var i=t.text,a=t.row;return[9==a.accState||null==a.accState?n("span",[e._v("未开户")]):n("span",[e._v(e._s(i))])]}},{key:"state",fn:function(t){t.text;var i=t.row;return["9"==i.state?n("span",[e._v("新建档")]):e._e(),"2"==i.state?n("span",[e._v("待备案")]):e._e(),"0"==i.state?n("span",[e._v("正常")]):e._e(),"4"==i.state?n("span",[e._v("待注销")]):e._e(),"5"==i.state?n("span",[e._v("已注销")]):e._e(),"6"==i.state?n("span",[e._v("待归属变更")]):e._e(),"7"==i.state?n("span",[e._v("待撤销备案")]):e._e()]}}])})],1)],1),n("bld-info-detail",{ref:"detailModalForm"})],1)},a=[],r=n("0a5e"),o=n("b5c9"),s=n("6fa9"),l=n("ca00"),c=n("0fea"),u={name:"BldBillList",mixins:[r["a"]],components:{BldInfoDetail:o["default"],MESSuperQuery:s["default"]},props:["bldRegionId","bldRegionName","isDistrict"],data:function(){return{fileName:"BldBillList",description:"自然幢票据页面",showType:"queryList",queryObj:[{label:"自然幢名称",value:"rr.name",type:"input",queryType:"like"}],regionId:this.bldRegionId[0],regionName:this.bldRegionName[0],columns:[{title:"分区名称",headerAlign:"center",align:"left",field:"districtName",minWidth:120,hidden:!this.isDistrict},{title:"自然幢名称",headerAlign:"center",align:"left",field:"name",type:"input",slot:!0,minWidth:120},{title:"自然幢类型",align:"center",field:"bldType_dictText",width:120,type:"input"},{title:"单元数/总户数/总面积(㎡)",align:"center",field:"number",type:"input",width:200,slot:!0},{title:"状态",align:"center",field:"state",type:"input",width:100,slot:!0},{title:"自然幢账户状态",align:"center",field:"accState_dictText",width:150,type:"input",slot:!0}],url:{list:"/base/rBldInfo/list"}}},watch:{bldRegionId:function(){this.initRoute()}},created:function(){this.initRoute()},methods:{Refreshree:function(){this.$emit("tree-load")},initRoute:function(){var e=this;this.onClearSelected(),this.$nextTick((function(){e.$refs.table.localParams=e.getQueryParams(),e.$refs.table.loadData(),e.$refs.table.refresh()}))},getQueryParams:function(){var e=Object.assign({},this.queryParam);return this.regionId=this.bldRegionId[0],this.regionName=this.bldRegionName[0],e.pid=this.regionId,e.state="0,4,6,7",Object(l["f"])(e)},loadData:function(e){return this.isDistrict?e.isDistrict=1:e.isDistrict=0,Object(c["e"])(this.url.list,Object.assign(e,this.getQueryParams())).then((function(e){return e.result}))},handleDetail:function(e){this.$refs.detailModalForm.edit(e)}}},d=u,f=(n("2064"),n("2877")),p=Object(f["a"])(d,i,a,!1,null,"2feb347e",null);t["default"]=p.exports},"6df0":function(e,t,n){"use strict";n("2829")},7203:function(e,t,n){"use strict";n("764a")},"764a":function(e,t,n){},"76b3":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",padding:0}}},[n("div",{staticClass:"contentPage",staticStyle:{height:"100%"}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,ifInitQuery:!1,tableColumn:e.columns},scopedSlots:e._u([{key:"address",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"state",fn:function(t){t.text;var i=t.row;return["9"===i.state?n("span",[e._v("新建档")]):e._e(),"2"===i.state?n("span",[e._v("待备案")]):e._e(),"0"===i.state?n("span",[e._v("正常")]):e._e(),"4"===i.state?n("span",[e._v("待注销")]):e._e(),"5"===i.state?n("span",[e._v("已注销")]):e._e(),"6"===i.state?n("span",[e._v("待归属变更")]):e._e(),"7"===i.state?n("span",[e._v("待撤销备案")]):e._e()]}},{key:"action",fn:function(t){t.text;var i=t.row;return[n("a",{on:{click:function(t){return e.handleLook(i)}}},[n("a-icon",{attrs:{type:"eye"}}),e._v(" 查看")],1),n("a-divider",{attrs:{type:"vertical"}}),i.psnName===e.companyName?n("a",{on:{click:function(t){return e.ownerBill(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 重开")],1):e._e(),i.psnName===e.companyName?n("a-divider",{attrs:{type:"vertical"}}):e._e(),n("a",{on:{click:function(t){return e.handlePrintNotice(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 打印告知单")],1)]}}])})],1)],1),n("house-detail-comp",{ref:"detailForm"}),n("owner-bill-modal",{ref:"ownerBill",on:{ok:e.modalFormOk}}),n("print-report-comp",{ref:"print"}),n("a-modal",{attrs:{width:800,visible:e.fileVisible,title:e.imgName,footer:null,"body-style":{textAlign:"center"}},on:{cancel:e.handleCancel}},[n("img",{staticClass:"filePreview",attrs:{src:e.filePath,alt:"电子票"}})])],1)},a=[],r=n("0a5e"),o=n("6fa9"),s=n("3ed7"),l=n("77a3"),c=n("821c"),u=n("0fea"),d=n("ca00"),f=n("9bed"),p=n("2b0e"),h={name:"HouseBillList",mixins:[r["a"]],components:{MESSuperQuery:o["default"],OwnerBillModal:l["default"],HouseDetailComp:c["default"],PrintReportComp:f["default"]},props:["cellId","cellInfo"],data:function(){return{fileName:"HouseBillList",description:"房屋票据页面",confirmLoading:!1,showType:"queryList",queryObj:[{label:"房屋位置",value:"rr.address",type:"input",queryType:"like"},{label:"业主姓名",value:"rpi.name",type:"input",queryType:"like"}],columns:[{title:"房间名称",headerAlign:"center",align:"left",field:"name",width:100,type:"input"},{title:"房间位置",headerAlign:"center",align:"left",field:"address",type:"input",width:300,slot:!0},{title:"建筑面积(m²)",align:"right",field:"struArea",type:"input",width:110,formatter:function(e){var t=e.cellValue;return Object(s["g"])(t,3)}},{title:"房屋售价(元)",align:"right",field:"totalPrice",type:"input",formatter:"amount",width:110},{title:"业主姓名",align:"center",field:"psnName",type:"input",width:120},{title:"证件号码",align:"center",field:"certNo",type:"input",width:200},{title:"房屋状态",align:"center",field:"state",type:"input",width:150,slot:!0},{title:"账户状态",align:"center",field:"accState_dictText",type:"input",width:150},{title:"操作",field:"action",align:"center",slot:!0,fixed:"right",width:300}],url:{list:"/base/rHouseInfo/list"},fileVisible:!1,filePath:"",imgName:"电子票查看",userInfo:{},companyName:""}},watch:{cellId:function(){this.initRoute()}},created:function(){this.initRoute(),this.userInfo=p["default"].ls.get("Login_Userinfo"),this.companyName=p["default"].ls.get("Login_Userinfo").orgCodeTxt},methods:{initRoute:function(){var e=this;this.onClearSelected(),this.$nextTick((function(){e.$refs.table.localParams=e.getQueryParams(),e.$refs.table.loadData(),e.$refs.table.refresh()}))},getQueryParams:function(){var e=Object.assign({},this.queryParam);return e.pid=this.cellId[0],e.state="0,4,5,6,7",Object(d["f"])(e)},loadData:function(e){return Object(u["e"])(this.url.list,Object.assign(e,this.getQueryParams(),{isCompany:!0})).then((function(e){return e.result}))},handleDetail:function(e){this.$refs.detailForm.initData(e.id)},ownerBill:function(e){this.$refs.ownerBill.initData(e)},handlePrintNotice:function(e){var t=this;this.$refs.print.type="print",Object(u["e"])("/qrConfig/qrConfig/list",{state:"1"}).then((function(n){n.success&&n.result.records&&("1"===n.result.records[0].type&&t.$refs.print.print("electronic_bill_notice",{busNo:e.busNo}),"2"===n.result.records[0].type&&t.$refs.print.print("electronic_bill_notice_hebei",{busNo:e.busNo}))}))},handleLook:function(e){var t=this;Object(u["e"])("/qrConfig/qrConfig/list",{state:"1"}).then((function(n){n.success&&n.result.records&&("1"===n.result.records[0].type&&Object(u["e"])("/electron/qrCodeBill/list",{busNo:e.busNo}).then((function(e){if(e.success&&e.result.dataList.records){var n=e.result.dataList.records[0];null==n.pictureUrl||""===n.pictureUrl||"2"===n.state?t.$warning({title:"电子票据查看",content:null==n.message||""===n.message?"暂无票据信息！":n.message}):window.open(n.pictureUrl)}})),"2"===n.result.records[0].type&&Object(u["e"])("/common/file/getFileUrl",{busiNo:e.busNo}).then((function(e){t.filePath=e.filePath,t.fileVisible=!0})))}))},handleCancel:function(){this.fileVisible=!1}}},m=h,y=(n("44ca"),n("2877")),b=Object(y["a"])(m,i,a,!1,null,"67fe9ac3",null);t["default"]=b.exports},"77a3":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("j-modal",{attrs:{title:"开票",width:1200,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"确认开票"},on:{ok:e.toBilling,cancel:e.close}},[n("j-form-container",[n("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.rules},slot:"edit"},[n("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"title marginTop10"},[n("span",{staticClass:"collapseTitle"},[e._v(" 房屋信息 ")])])]},proxy:!0}])},[n("house-info-comp",{ref:"hic",attrs:{disabled:!0,isShowHeader:!1}})],1)],1),e.visible?n("owner-batch-comp",{ref:"ownerBatchComp",attrs:{disabled:e.disabled,list:e.ownerList}}):e._e()],1)],1)],1)],1)},a=[],r=n("0792"),o=n("0a5e"),s=n("2b01"),l=n("c9f1"),c=n("0fea"),u=n("2b0e"),d=n("9fb0"),f={name:"OwnerBillModal",components:{HouseInfoComp:s["default"],OwnerBatchComp:l["default"]},mixins:[o["a"]],data:function(){return{visible:!1,model:{},labelCol:{span:6},wrapperCol:{span:18},confirmLoading:!1,activeKey:["1"],ownerList:[],validatorRules:{psnName:[{required:!0,message:"请输入业主姓名"}],certType:[{required:!0,message:"请输入证件类型"}],certNo:[{required:!0,message:"请输入证件号码"},{validator:this.validateCard}],phone:[{required:!1,message:""},{validator:r["b"]}]},disabled:!1,url:{companyBillCheck:"/electron/qrCodeBill/companyBillCheck",reOpenBillCompany:"/electron/qrCodeBill/reOpenBillCompany",toChangeCompany:"/base/rHouseInfo/toChangeCompany"}}},methods:{validateCard:function(e,t,n){""!==t&&void 0!==t||n(),1===this.model.certType?r["a"].IDCard.test(t)?n():n(r["a"].IDCardMsg):n()},close:function(){this.$emit("close"),this.checkSign=!1,this.visible=!1},initData:function(e){var t=this;this.model=Object.assign({},e);var n=JSON.parse(JSON.stringify(this.model));if(this.ownerList=n.psnInfoList,0===this.ownerList.length){var i={psnName:"",phone:"",certType:"",certNo:""};this.ownerList.push(i)}this.visible=!0,this.$nextTick((function(){t.$refs.hic.initData(t.model.id)}))},toBilling:function(){var e=this;this.$confirm({title:"确认重开",content:"每间房屋仅可重开一次，再次重开需前往当地住房保障中心修改，业主信息是否维护正确?",onOk:function(){e.confirmLoading=!0,e.disabled=!0;var t=e.$refs.hic.getHouseInfo();e.model=Object.assign(e.model,t),e.$refs.ownerBatchComp.checkData().then((function(){e.model.psnInfoList=[],e.model.psnInfoList=e.model.psnInfoList.concat(e.$refs.ownerBatchComp.list);var t=e.model.psnInfoList;if(t.length>1)for(var n=0;n<t.length;n++)for(var i=n+1;i<t.length;i++)if(t[n].psnName===t[i].psnName&&t[n].certType===t[i].certType&&t[n].certNo===t[i].certNo)return void e.$message.error("不允许添加相同的业主！");e.$refs.form.validate((function(t){t&&(e.confirmLoading=!0,Object(c["j"])(e.url.companyBillCheck,e.model).then((function(t){t.success?e.ownerUpdate(t.result):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.disabled=!1})))}))}))}})},ownerUpdate:function(){var e=this;this.model.changeReason="企业重开",Object(c["j"])(this.url.toChangeCompany,this.model).then((function(t){t.success?e.billing(t.result):e.$message.warning(t.message)}))},billing:function(e){var t=this;this.loading=!0;var n="企业重开";Object(c["j"])(this.url.reOpenBillCompany+"/"+e.busno+"/"+e.acccode+"/"+n+"/"+u["default"].ls.get(d["J"]).realname).then((function(e){e.success?(t.confirmLoading=!0,t.disabled=!0,t.visible=!1):t.$message.warning(e.message)})).finally((function(){t.loading=!1}))}}},p=f,h=(n("f7b2"),n("2877")),m=Object(h["a"])(p,i,a,!1,null,"6399519b",null);t["default"]=m.exports},"77aa":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{height:"100%",padding:e.modalFlag?"":"10px"}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.modalFlag,expression:"modalFlag"}],staticClass:"h-full flex flex-column"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,"is-full-query":!0,type:"queryList"},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"inputSearch",fn:function(t){var i=t.row;return[n("a-input",{attrs:{placeholder:"请输入小区名称"},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"row.val"}})]}}])}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"","footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},stripe:!0,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto","header-align":"center"},scopedSlots:e._u([{key:"regionName",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(a)}}},[e._v(e._s(i))])]}},{key:"action",fn:function(t){t.text;var i=t.row;return[n("a",{on:{click:function(t){return e.handleDeposit(i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 交存")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.exChangeAmount(i)}}},[n("a-icon",{attrs:{type:"pay-circle"}}),e._v("转账")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("更多"),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(t){return e.refundAmount(i)}}},[n("a-icon",{attrs:{type:"pay-circle"}}),e._v("\n                  退款")],1)]),n("a-menu-item",[n("a",{on:{click:function(t){return e.showByBusiNo(i)}}},[n("a-icon",{attrs:{type:"file-text"}}),e._v("\n                  交易明细")],1)])],1)],1)]}}])})],1)],1),[n("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",cancelText:"关闭"},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[n("a-icon",{attrs:{type:"check-circle"}}),e._v("\n          确定\n        ")],1),n("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-form-model",{ref:"form",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules,model:e.model}},[n("a-row",{staticClass:"houseInfo"},[n("a-form-model-item",{attrs:{prop:"depositAmount",label:"交存金额"}},[n("amount-input",{attrs:{minusFlag:!1,"addon-after":"元"},model:{value:e.model.depositAmount,callback:function(t){e.$set(e.model,"depositAmount",t)},expression:"model.depositAmount"}})],1),n("a-form-model-item",{attrs:{prop:"recDate",label:"记账日期"}},[n("a-date-picker",{attrs:{valueFormat:"YYYY-MM-DD",placeholder:"请选择记账日期"},model:{value:e.model.recDate,callback:function(t){e.$set(e.model,"recDate",t)},expression:"model.recDate"}})],1),n("a-form-model-item",{attrs:{prop:"bankCode",label:"承办银行"}},[n("j-dict-bank-list-select",{attrs:{"show-icon":!0},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1),n("a-form-model-item",{attrs:{prop:"remark",label:"备注"}},[n("a-textarea",{attrs:{placeholder:"请输入备注"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1)],1)],1)],[n("j-modal",{attrs:{title:e.titleChange,width:e.width,visible:e.changeAmountVisible,switchFullscreen:"",cancelText:"关闭"},on:{cancel:e.changeAmountCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:"primary"},on:{click:e.changeAmountOk}},[n("a-icon",{attrs:{type:"check-circle"}}),e._v("\n          确定\n        ")],1),n("a-button",{attrs:{type:""},on:{click:e.changeAmountCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          关闭\n        ")],1)]},proxy:!0}])},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-form-model",{ref:"form",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules,model:e.model}},[n("a-row",{staticClass:"houseInfo"},[n("a-form-model-item",{attrs:{prop:"outDate",label:"转出记账日期"}},[n("a-select",{attrs:{maxTagCount:2,mode:"radio",placeholder:"请选择转出记账日期"},on:{change:e.changeBusiData},model:{value:e.model.outDate,callback:function(t){e.$set(e.model,"outDate",t)},expression:"model.outDate"}},e._l(e.busiDateList,(function(t,i){return n("a-select-option",{key:i,attrs:{value:i}},[n("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                    "+e._s(t.trdDate+"("+t.amount+")")+"\n                  ")])])})),1)],1),n("a-form-model-item",{attrs:{prop:"allAmount",label:"可转金额"}},[n("amount-input",{attrs:{minusFlag:!1,disabled:"","addon-after":"元"},model:{value:e.model.allAmount,callback:function(t){e.$set(e.model,"allAmount",t)},expression:"model.allAmount"}})],1),n("a-form-model-item",{attrs:{prop:"outAmount",label:"转出金额"}},[n("amount-input",{attrs:{minusFlag:!1,"addon-after":"元"},model:{value:e.model.outAmount,callback:function(t){e.$set(e.model,"outAmount",t)},expression:"model.outAmount"}})],1),n("a-form-model-item",{attrs:{prop:"inDate",label:"转入记账日期"}},[n("a-select",{attrs:{maxTagCount:2,mode:"radio",placeholder:"请选择转入记账日期"},on:{change:e.changeInBusiData},model:{value:e.model.inDate,callback:function(t){e.$set(e.model,"inDate",t)},expression:"model.inDate"}},e._l(e.busiDateList,(function(t,i){return n("a-select-option",{key:i,attrs:{value:i}},[n("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                    "+e._s(t.trdDate+"("+t.amount+")")+"\n                  ")])])})),1)],1)],1)],1)],1)],1)],[n("j-modal",{attrs:{switchFullscreen:!0,title:"交易明细",top:8,"body-style":{padding:0},visible:e.advancesVisible,width:"1450px"},on:{cancel:e.advancesHandleCancel}},[n("template",{slot:"footer"},[n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{attrs:{loading:e.loading},on:{click:e.advancesHandleCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            取消\n          ")],1)],1)]),n("advances-deposit-details",{ref:"tradIngRecord",attrs:{"region-id":e.regionId}})],2)],n("advances-deposit-refund-modal",{ref:"advancesDepositRefundModal",on:{ok:e.modalFormOk}})],2)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("fdce"),u=n("8b50"),d=n("5a0c"),f=n.n(d),p=n("3269"),h=n("4aae"),m=n("7a13"),y=n("1155"),b=n("ca00"),g=n("c695"),v=n.n(g),w={name:"AdvancesDeposit",components:{AdvancesDepositRefundModal:u["default"],JDictRegionListSelect:c["default"],MESSuperQuery:l["default"],JDictBankListSelect:p["default"],AmountInput:h["default"],AdvancesDepositDetails:m["default"],CollectionAccountComp:y["default"]},mixins:[s["a"],o["b"]],created:function(){this.getSummation()},data:function(){var e=this,t=function(e,t,n){var i=Number(t);return i?i<=0?n("预收款交存金额必须大于0!"):n():n("请输入预收款交存金额!")},n=function(e,t,n){return!t||Number(t)<=0?n("转出金额必须大于0!"):n()};return{regionId:"",advancesVisible:!1,labelCol:{span:5},wrapperCol:{span:19},changeAmountVisible:!1,outDateSub:"",busiDateList:[],busiOutNo:"",busiInNo:"",model:{depositAmount:0,recDate:f()(new Date).format("YYYY-MM-DD"),bankCode:"",outDate:"",inDate:"",allAmount:0,outAmount:0,canRefundAmount:0,reason:""},validatorRules:{depositAmount:[{required:!0,message:"请输入预收款交存金额!"},{validator:t}],recDate:[{required:!0,message:"请选择记账日期!"}],bankCode:[{required:!0,message:"请选择承办银行!"}],outDate:[{required:!0,message:"请选择转出日期!"}],outAmount:[{required:!0,message:"请输入转出金额!"},{validator:n}],inDate:[{required:!0,message:"请选择转入日期!"}]},width:"550px",loading:!1,title:"预收款交存",titleChange:"预收款转账",visible:!1,fileName:"AdvancesDeposit",description:"业主初交管理页面",modalFlag:!0,regionName:"",refundAmountVisible:!1,queryObj:[{type:"slot",value:"name",label:"小区名称",queryType:"like",slotName:"inputSearch"},{type:"input",value:"address",label:"详细地址",queryType:"like"}],columns:[{title:"小区名称",headerAlign:"left",align:"left",field:"regionName",width:"400px",slot:!0,type:"input"},{title:"所属区县",align:"center",field:"zoneCode_dictText",minWidth:100},{title:"账户余额(元)",align:"right",field:"balance",formatter:"amount",width:140},{headerAlign:"right",title:"总面积 (㎡)",align:"right",field:"struArea",formatter:"area",width:130},{headerAlign:"left",title:"详细地址",align:"left",field:"address",width:"400px",type:"input"},{title:"操作",field:"action",align:"center",width:250,fixed:"right",slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/base/rRegionInfo/queryPageRegionInfo",advancesRegionKeep:"/base/rRegionInfo/advancesRegionKeep",queryBusiDealDateList:"/base/rRegionInfo/queryBusiDealDateList",advancesRegionExchange:"/base/rRegionInfo/advancesRegionExchange",queryBalanceSum:"/base/rRegionInfo/queryBalanceSum",queryRefundAmount:"/account/trdlog/queryRefundAmount",submitRefund:"/account/trdlog/submitRefund"},dictOptions:{},totalSum:{}}},methods:{advancesHandleCancel:function(){this.advancesVisible=!1},changeAmountCancel:function(){this.model={},this.$set(this.model,"recDate",f()(new Date).format("YYYY-MM-DD")),this.changeAmountVisible=!1,this.busiDateList=[],this.$set(this.model,"outDate",""),this.$set(this.model,"inDate",""),this.$set(this.model,"outAmount",0),this.$set(this.model,"allAmount",0),this.loading=!1},refundAmountCancel:function(){this.model={},this.refundAmountVisible=!1,this.busiDateList=[],this.loading=!1},exChangeAmount:function(e){this.regionId=e.id,this.model.regionCode=e.regionCode,this.model.accCode=e.accCode,this.queryBusiDealDateList(this.regionId),this.changeAmountVisible=!0},refundAmount:function(e){this.$refs.advancesDepositRefundModal.open(e)},queryBusiDealDateList:function(e){var t=this;Object(r["e"])(this.url.queryBusiDealDateList,{regionId:e}).then((function(e){e.success&&(t.busiDateList=e.result)}))},changeBusiData:function(e){var t=this.busiDateList[e];t&&(this.model.allAmount=t.amount,this.busiOutNo=t.busiNo)},changeInBusiData:function(e){var t=this.busiDateList[e];t&&(this.busiInNo=t.busiNo)},changeAmountOk:function(){var e=this;this.loading=!0,this.$refs.form.validate((function(t){if(t){if(e.busiOutNo===e.busiInNo)return e.$message.error("转出记账日期和转入记账日期不能选择同一条数据!"),void(e.loading=!1);if(parseFloat(e.model.outAmount)>parseFloat(e.model.allAmount))return e.$message.error("转出金额不能大于可转金额!"),void(e.loading=!1);e.visible=!1,e.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在转账中，请稍等。。。"}),e.exchangeModel={regionCode:e.model.regionCode,outBusiNo:e.busiOutNo,inBusiNo:e.busiInNo,outAmount:e.model.outAmount},Object(r["j"])(e.url.advancesRegionExchange,e.exchangeModel).then((function(t){t&&t.success?(e.changeAmountCancel(!0),e.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),e.$message.success("转账成功")):(e.loading=!1,e.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),e.$message.error(t&&t.length>0?t[0].errorDesc:"转账失败，请稍后重试"))}))}else e.loading=!1}))},showByBusiNo:function(e){var t=this;this.advancesVisible=!0,this.regionId=e.id,this.$nextTick((function(){t.$refs.tradIngRecord.showByBusiNo(e.regionCode)}))},handleDeposit:function(e){this.visible=!0,this.model.regionCode=e.regionCode,this.model.accCode=e.accCode},handleOk:function(){var e=this;this.loading=!0,this.$refs.form.validate((function(t){t?(e.visible=!1,e.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在记账中，请稍等。。。"}),Object(r["j"])(e.url.advancesRegionKeep,e.model).then((function(t){t&&t.success?(e.handleCancel(!0),e.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),e.$message.success("记账成功")):(e.loading=!1,e.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),e.$message.error(t&&t.length>0?t[0].errorDesc:t.message?t.message:"记账失败，请稍后重试"))}))):e.loading=!1}))},handleCancel:function(){this.model={},this.$set(this.model,"recDate",f()(new Date).format("YYYY-MM-DD")),this.visible=!1,this.loading=!1},handleDetail:function(e){var t={regionId:e.id,regionName:e.name};this.$router.push({path:"/communityPortrait",query:t})},footerMethod:function(e){var t=this,n=e.columns,i=e.data,a=["regionName","zoneCode_dictText"];return Object(s["b"])({scope:{columns:n,data:i},spanCol:a,computedCol:["balance"],isSpanSeq:!0,inPageComputer:function(e,t){if(["balance"].includes(t.property)){var n={style:"decimal",currency:"CNY"};return Number(v.a.sum(e,t.property)).toLocaleString("zh-CN",n)}},inTotalComputer:function(e){if(["balance"].includes(e.property)){var n={style:"decimal",currency:"CNY"};return i.length>0&&"balance"===e.property?void 0===t.totalSum?0:Number(t.totalSum).toLocaleString("zh-CN",n):0}}})},getSummation:function(){var e=this;this.queryPage(),Object(r["e"])(this.url.queryBalanceSum,this.queryParam).then((function(t){e.$set(e,"totalSum",t.result)}))},searchReset:function(){this.getSummation()},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(b["f"])(this.queryParam),this.getSummation())},footerSpanMethod:function(e){return Object(s["c"])({scope:e,spanCol:["regionName","zoneCode_dictText"],isSpanSeq:!0})}}},_=w,x=(n("26e9"),n("4928"),n("2877")),k=Object(x["a"])(_,i,a,!1,null,"71eabbcb",null);t["default"]=k.exports},7942:function(e,t,n){},8080:function(e,t,n){},8528:function(e,t,n){"use strict";n("1e10")},"8f73":function(e,t,n){},"919e":function(e,t,n){"use strict";n("22711")},9438:function(e,t,n){},"9fd3":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"mainCard",attrs:{bordered:!1,"body-style":{height:"100%",padding:e.modalFlag?"":"0 12px 12px"}}},[i("div",{staticClass:"cardBody"},[e.modalFlag?i("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,"default-sys-org":!0,"default-query":!e.hasEnablePageConfigByKey("banInitQuery"),type:"queryList"},on:{ok:e.handleSuperQuery,reset:e.reset},scopedSlots:e._u([{key:"extra",fn:function(){return[i("div",{staticClass:"vxetable-operator"},[i("a-button",{attrs:{icon:"export",type:"primary"},on:{click:function(t){return e.handleExport("退款业务")}}},[e._v("导出")])],1)]},proxy:!0}],null,!1,3257200682)}):e._e(),e.modalFlag?i("div",{staticClass:"tableDiv"},[i("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,footerMethod:e.footerMethod,data:e.loadData,tableColumn:e.columns,"show-footer-overflow":!0,"table-height":"auto","if-init-query":!1,"header-align":"center",customColumns:{name:"DrawSearchList"}},scopedSlots:e._u([{key:"reqNo",fn:function(t){var n=t.text,a=t.row;return[i("a",{on:{click:function(t){return e.gotoRefundDetail(a)}}},[e._v(e._s(n))])]}},{key:"busiTypeDetail",fn:function(t){t.text;var n=t.row;return["1012"===n.busiTypeDetail?i("span",[e._v("部分退款")]):e._e(),"1013"===n.busiTypeDetail?i("span",[e._v("全额退款")]):e._e(),"1014"===n.busiTypeDetail?i("span",[e._v("销户退款")]):e._e(),"1017"===n.busiTypeDetail?i("span",[e._v("预收退款")]):e._e(),"1016"===n.busiTypeDetail?i("span",[e._v("预收销户")]):e._e()]}},{key:"dealState_dictText",fn:function(t){var n=t.text,a=t.row;return[0==a.dealState||1==a.dealState?i("a-badge",{attrs:{status:"success",text:n}}):e._e(),2==a.dealState?i("a-badge",{attrs:{status:"warning",text:n}}):e._e(),3==a.dealState||4==a.dealState||5==a.dealState?i("a-badge",{attrs:{status:"processing",text:n}}):e._e(),n?e._e():i("span",[e._v("/")])]}},{key:"action",fn:function(t){t.text;var n=t.row;return[e.hasEnablePageConfigByKey("KeepOnlyApprovalProcess")?[i("a",{on:{click:function(t){return e.flowChartClick(n)}}},[i("a-icon",{attrs:{type:"profile"}}),e._v("审批流程")],1)]:[i("a",{attrs:{disabled:"4"==n.reqState||"5"==n.reqState},on:{click:function(t){return e.handlePrintApply(n)}}},[i("a-icon",{attrs:{type:"printer"}}),e._v(" 打印申请审批表")],1),i("a-divider",{attrs:{type:"vertical"}}),n.dealState?i("a",{on:{click:function(t){return e.handlePrint(n)}}},[i("a-icon",{attrs:{type:"printer"}}),e._v(" 打印退款凭证")],1):e._e(),n.dealState?i("a-divider",{attrs:{type:"vertical"}}):e._e(),i("a-dropdown",[i("a",{staticClass:"ant-dropdown-link"},[e._v("更多"),i("a-icon",{attrs:{type:"down"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"/account/settings/custom",on:{click:function(t){return e.flowChartClick(n)}}},[i("a-icon",{attrs:{type:"profile"}}),e._v("审批流程 ")],1)],1)],1)]]}}],null,!1,2777582906)})],1):e._e()],1),i("j-modal",{attrs:{switchFullscreen:!0,title:"房屋交易明细",top:8,"body-style":{padding:0},visible:e.visible,width:"1140px"},on:{cancel:e.handleCancel}},[i("template",{slot:"footer"},[i("div",{staticStyle:{"text-align":"center"}},[i("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[i("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            取消\n          ")],1)],1)])],2),i("j-modal",{attrs:{switchFullscreen:!0,title:"审批流程",top:8,"body-style":{padding:0},visible:e.flowChartFlag,width:"1140px"},on:{cancel:e.handleCancel}},[i("a-divider",{attrs:{orientation:"left"}},[e._v("历史流程记录")]),i("div",{staticStyle:{"margin-top":"15px"}},[i("v-table",{ref:"modelRef",attrs:{size:"small",bordered:"","table-column":e.historyColumns,"table-height":null,toolbar:!1,"show-pagination":!1,data:e.getHistoryData}})],1),i("a-divider",{attrs:{orientation:"left"}},[e._v("流程图")]),e.imageUrl?i("div",[i("img",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{src:e.imageUrl,alt:""}})]):e._e(),i("template",{slot:"footer"},[i("div",{staticStyle:{"text-align":"center"}},[i("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[i("a-icon",{attrs:{type:"close-circle"}}),e._v("取消\n          ")],1)],1)])],2),e.pageName?i(n("4b3b")("./"+e.pageName).default,{ref:"refund",tag:"component",attrs:{"req-id":e.reqId}}):e._e(),i("print-report-comp",{ref:"print"})],1)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("2b0e"),u=n("9fb0"),d=n("791b"),f=n("c1df"),p=n.n(f),h=n("9bed"),m=n("c695"),y=n.n(m),b=n("3ed7"),g=n("d8a5"),v=n("ca00"),w=n("5c96");function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof b?t:b,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function b(){}function g(){}function v(){}var w={};c(w,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(w=D);var C=v.prototype=b.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=d(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==_(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=f;return function(r,o){if(a===h)throw Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===f)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=h;var c=d(t,n,i);if("normal"===c.type){if(a=i.done?m:p,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=m,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=d(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(_(t)+" is not iterable")}return g.prototype=v,a(C,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),y}},t}function k(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){k(r,i,a,o,s,"next",e)}function s(e){k(r,i,a,o,s,"throw",e)}o(void 0)}))}}var C={name:"DrawSearch",mixins:[s["a"],o["b"]],props:{isShowVerify:{type:Boolean,default:!0}},components:{PrintReportComp:h["default"],MESSuperQuery:l["default"],RefundApplicationComp:d["default"]},data:function(){var e=this;return{fileName:"DrawSearch",description:"退款业务查询",modalFlag:!0,regionId:"",visible:!1,loading:!1,flowChartFlag:!1,dataSource:[],imageUrl:"",AuditEditBankFlag:!1,reqId:"",busiTypeDetail:"",busiStartDate:"",busiEndDate:"",queryObj:[{label:"主管单位",value:"sysOrgCode",type:"sysOrgSelect"},{label:"所属区县",value:"zoneCode",type:"zoneSelect"},{type:"input",value:"req_no",label:"申请编号",queryType:"like"},{type:"input",value:"name",label:"业主姓名",queryType:"like"},{type:"date",slotName:"busiStartDate",value:"busiDate",maxDate:"busiDate",label:"记账开始日期",queryType:"ge"},{type:"date",slotName:"busiEndDate",value:"busiDate",minDate:"busiDate",label:"记账结束日期",queryType:"le"},{type:"input",value:"address",label:"房屋位置",queryType:"like"},{type:"select",value:"dealState",label:"记账状态",options:[],showInQueryList:!1},{type:"select",value:"busiTypeDetail",label:"退款类型",options:[{label:"部分退款",value:"1012"},{label:"全额退款",value:"1013"},{label:"销户退款",value:"1014"},{label:"预收退款",value:"1017"},{label:"预收销户",value:"1016"}]},{type:"input",value:"busiNo",label:"业务编号",queryType:"like"}],columns:[{title:"主管单位",align:"left",headerAlign:"center",field:"sysOrgCode_dictText",width:170},{title:"所属区县",align:"left",headerAlign:"center",field:"zoneCode_dictText",width:170},{title:"业务编号",align:"center",headerAlign:"center",field:"busiNo",width:170},{title:"申请编号",align:"center",headerAlign:"center",field:"reqNo",slot:!0,width:170,sort:!0},{title:"业主姓名",align:"left",headerAlign:"left",field:"name",width:170},{title:"房屋地址",align:"left",headerAlign:"left",direction:"rtl",field:"address",minWidth:200},{title:"退款金额 (元)",align:"right",headerAlign:"right",field:"amount",formatter:"amount",width:140,sort:!0},{title:"退款类型",align:"left",headerAlign:"left",field:"busiTypeDetail",slot:!0,width:140},{title:"记账状态",align:"left",headerAlign:"center",field:"dealState_dictText",slot:!0,width:120},{title:"申请状态",align:"left",headerAlign:"center",field:"reqState_dictText",width:120},{title:"记账日期",align:"center",field:"busiDate",formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""},width:130,sort:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:this.hasEnablePageConfigByKey("KeepOnlyApprovalProcess")?100:315,slot:!0}],historyColumns:[{title:"任务名称",align:"center",width:160,field:"name",showOverflow:"tooltip"},{title:"处理人",align:"center",width:100,field:"assigneeName",showOverflow:"tooltip",formatter:function(e){var t=e.cellValue,n=e.row;e.rowIndex;return t||n.assignee}},{title:"耗时",align:"center",width:180,field:"duration",formatter:function(e){var t=e.cellValue,n=t,i="";if(null!=n){var a=Math.floor(n/864e5);0!==a&&(i+=a+"天");var r=n%864e5,o=Math.floor(r/36e5);0!==o&&(i+=o+"小时");var s=r%36e5,l=Math.floor(s/6e4);0!==l&&(i+=l+"分");var c=Math.round(s%6e4/1e3);i+=c+"秒"}return i}},{title:"开始时间",align:"center",width:160,field:"startTime"},{title:"结束时间",align:"center",width:160,field:"endTime"},{title:"审批结果",align:"center",field:"taskFlow",width:80,formatter:function(e){var t=e.cellValue,n=t;return n+""==="1"?"通过":n+""==="0"?"未通过":n}},{title:"审批意见",align:"center",field:"comment"}],getHistoryData:function(){return new Promise((function(t){t(e.dataSource)}))},url:{list:"/deposit/firstDeposit/drawSearchList",listTotalInfo:"/deposit/firstDeposit/drawSearchListTotalInfo",exportXlsUrl:"/deposit/firstDeposit/drawSearchListExp",getUrlByFlowId:"/deposit/firstDeposit/getUrlByFlowId"},dictOptions:{},endOpen:!1,pageName:"",amountTotal:0}},created:function(){this.initData(),this.initAuditBankFlag()},methods:{initData:function(){this.queryObj.map((function(e){"dealState"===e.value&&Object(g["g"])("busi_deal_state").then((function(t){t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)}))}))}))},initAuditBankFlag:function(){var e=this;Object(g["e"])("audit_edit_bank").then((function(t){t&&"1"==t&&(e.AuditEditBankFlag=!0)}))},handleExport:function(e){var t=this;this.$refs.table.selectedColumns({title:"请选择导出的列"}).then((function(n){var i="";n.forEach((function(e){e.includes("action")||(e.includes("_")?i=i+e.split("_")[0]+",":e.includes("reqNo")?i+="busiNo,":i=i+e+",")})),i=i.slice(0,-1),Object(r["c"])(t.url.exportXlsUrl+"?exportXlsColumn="+i,t.queryParam).then((function(n){if(n)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([n],{type:"application/vnd.ms-excel"}),e+".xls");else{var i=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.ms-excel"})),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",e+".xls"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}else t.$message.warning("文件下载失败")}))}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(v["f"])(this.queryParam),this.getTotalInfo(),this.queryPage())},loadData:function(e){return Object(r["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.result}))},getTotalInfo:function(){var e,t,n=this;this.$refs.table&&(t=this.$refs.table.$el.querySelector(".vxe-table--footer-wrapper.body--wrapper"),e=w["Loading"].service({target:t,customClass:"tableFooterLoading"})),Object(r["e"])(this.url.listTotalInfo,Object.assign({current:1,size:-1},this.queryParam)).then((function(e){try{n.amountTotal=e.result.amountTotal||0}catch(t){n.amountTotal=0}n.$refs.table.updateFooter()})).finally((function(){t&&e&&e.close()}))},footerMethod:function(e){var t=this,n=e.columns,i=e.data,a=[n.map((function(e,t){return"address"===e.property?"合计：":["amount"].includes(e.property)?Object(b["g"])(y.a.sum(i,e.property)):null})),n.map((function(e,n){return"address"===e.property?"总合计：":["amount"].includes(e.property)?Object(b["g"])(t.amountTotal):null}))];return a},reset:function(){this.busiStartDate="",this.busiEndDate=""},setBusiDate:function(e,t,n){e&&(this.$data[n]=e,this.$set(t,"val",p()(e).format("YYYY-MM-DD")))},disabledStartDate:function(e){var t=this.busiEndDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.busiStartDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},handleDeposit:function(e){var t=c["default"].ls.get(u["a"]),n=_baseConfig["production"].VUE_APP_API_BASE_URL+"/jmreport/view/656734915611262976?token="+t+"&bDepDrawListId="+e.id;window.open(n)},handleView:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.tradIngRecord.show(e.accCode)}))},handleCancel:function(){this.visible=!1,this.flowChartFlag=!1,this.previewVisible=!1},gotoRefundDetail:function(){var e=D(x().mark((function e(t){var n=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||!t.flowId){e.next=3;break}return e.next=3,Object(r["e"])(this.url.getUrlByFlowId,{flowId:t.flowId}).then((function(e){e.success&&e.result&&(n.pageName=e.result)}));case 3:this.$refs.refund.visible=!0,this.$refs.refund.isProcess=!0,this.$refs.refund.disableSubmit=!0,this.$refs.refund.title="退款申请",this.$refs.refund.showPrintFlag=this.AuditEditBankFlag,this.$nextTick((function(){n.reqId=t.id,n.$refs.refund.rreqId=t.reqNo,n.$refs.refund.rreqNo=t.reqNo,n.$refs.refund.refundType=t.busiTypeDetail,n.$refs.refund.initData(t.houseId,t)}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handlePrint:function(e){this.$refs.print.type="print",this.$refs.print.print("refound_report",{id:e.reqId,reqNo:e.reqNo})},flowChartClick:function(){var e=D(x().mark((function e(t){var n=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadList(t);case 2:return e.next=4,Object(r["e"])("/handle/getPic/"+t.flowId,{}).then((function(e){n.imageUrl=e?"data:image/png;base64,"+e:""}));case 4:this.flowChartFlag=!0,this.$nextTick((function(){n.$refs.modelRef.refresh()}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadList:function(){var e=D(x().mark((function e(t){var n=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["e"])("/act/taskinst/history/task/"+t.flowId,{}).then((function(e){e.success?n.dataSource=e.result:n.$message.error("查询审批历史记录发生错误！")})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),handlePrintApply:function(e){var t=c["default"].ls.get(u["J"]);this.$refs.print.type="print";var n=e.busiTypeDetail,i=e.reqNo;"1012"===n&&this.$refs.print.print("partial_refund",{reqNo:i,city:t.orgCodeTxt.substring(0,3)}),"1013"!==n&&"1014"!==n||this.$refs.print.print("full_refund",{reqNo:i,city:t.orgCodeTxt.substring(0,3),busiTypeDetail:n})}}},T=C,S=(n("91d1"),n("bf3c"),n("2877")),O=Object(S["a"])(T,i,a,!1,null,"dd1e8bc0",null);t["default"]=O.exports},a179:function(e,t,n){"use strict";n("bddb")},aac1:function(e,t,n){"use strict";n("c8ad")},ad8e:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("b-change-form",{ref:"realForm",attrs:{disabled:e.disableSubmit},on:{ok:e.submitCallback}})],1)},a=[],r=n("0ad9"),o={name:"BChangeModal",components:{BChangeForm:r["default"]},data:function(){return{title:"",width:800,visible:!1,disableSubmit:!1}},methods:{add:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.realForm.add()}))},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.edit(e)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){this.$refs.realForm.submitForm()},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},s=o,l=n("2877"),c=Object(l["a"])(s,i,a,!1,null,null,null);t["default"]=c.exports},b3c9:function(e,t,n){"use strict";n("1fec")},ba05:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("j-modal",{attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",footer:null,"modal-height":"80vh",zIndex:e.zIndex},on:{cancel:e.handleCancel}},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":"auto"},scopedSlots:e._u([{key:"state",fn:function(e){var t=e.text;e.row;return[n("a-badge",0===t?{attrs:{status:"success",text:"已完成"}}:2===t?{attrs:{status:"processing",text:"待变更"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:9===t?{attrs:{status:"processing",text:"新建"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"operType",fn:function(t){var i=t.text;t.row;return[1===i?n("span",[e._v("新增")]):2===i?n("span",[e._v("修改")]):3===i?n("span",[e._v("删除")]):e._e()]}},{key:"reqNo",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.gotoDetail(a)}}},[e._v(e._s(i))])]}},{key:"createBy_dictText",fn:function(t){t.text;var i=t.row;return[n("span",[e._v(e._s(i.createBy_dictText||i.createBy))])]}},{key:"actionExpand",fn:function(t){t.text;var i=t.row;return[n("vxe-grid",{attrs:{size:"small",border:"",columns:e.childColumns,data:i.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.wordNameStr?i.wordNameStr:i.wordName))])]}},{key:"oldInfoStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.oldInfoStr?i.oldInfoStr:i.oldInfo?i.oldInfo:"无"))])]}},{key:"newInfoStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.newInfoStr?i.newInfoStr:i.newInfo?i.newInfo:"无"))])]}}],null,!0)})]}}])}),n("j-modal",{attrs:{switchFullscreen:!0,title:"变更详情",top:8,"body-style":{padding:0},visible:e.changeVisible,width:"1160px"},on:{cancel:e.changeHandleCancel}},[n("template",{slot:"footer"},[n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{on:{click:e.changeHandleCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            取消\n          ")],1)],1)]),n("corp-change-info-comp",{ref:"corpChangeInfoComp"})],2)],1),e.showTemplate?[n("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1},scopedSlots:e._u([{key:"reqNo",fn:function(t){var i=t.text,a=t.row;return[n("a",{on:{click:function(t){return e.gotoDetail(a)}}},[e._v(e._s(i))])]}},{key:"state",fn:function(e){var t=e.text;e.row;return[n("a-badge",0===t?{attrs:{status:"success",text:"已完成"}}:2===t?{attrs:{status:"processing",text:"待变更"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:9===t?{attrs:{status:"processing",text:"新建"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"operType",fn:function(t){var i=t.text;t.row;return[1===i?n("span",[e._v("新增")]):2===i?n("span",[e._v("修改")]):3===i?n("span",[e._v("删除")]):e._e()]}},{key:"createBy_dictText",fn:function(t){t.text;var i=t.row;return[n("span",[e._v(e._s(i.createBy_dictText||i.createBy))])]}},{key:"actionExpand",fn:function(t){t.text;var i=t.row;return[n("vxe-grid",{attrs:{size:"middle",bordered:"",columns:e.childColumns,data:i.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.wordNameStr?i.wordNameStr:i.wordName))])]}},{key:"oldInfoStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.oldInfoStr?i.oldInfoStr:i.oldInfo?i.oldInfo:"无"))])]}},{key:"newInfoStr",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.newInfoStr?i.newInfoStr:i.newInfo?i.newInfo:"无"))])]}}],null,!0)})]}}],null,!1,988710338)})]:e._e(),n("task-deal-modal",{ref:"taskDealModal",attrs:{zIndex:e.zIndex+1,"flow-id":e.businessKey,"task-primary-key":e.taskId,pageName:e.pageUrl,editUrl:e.editUrl,innerpage:e.innerpage,internalUrl:e.internalUrl},on:{ok:e.modalFormOk}})],2)},a=[],r=n("0fea"),o=n("0a5e"),s=n("5a0c"),l=n.n(s),c=n("3a6a"),u=n("211e");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",m="suspendedYield",y="executing",b="completed",g={};function v(){}function w(){}function _(){}var x={};c(x,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(x=D);var C=_.prototype=v.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=p(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==d(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=h;return function(r,o){if(a===y)throw Error("Generator is already running");if(a===b){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===h)throw a=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var c=p(t,n,i);if("normal"===c.type){if(a=i.done?b:m,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=b,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=p(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=_,a(C,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:w,configurable:!0}),w.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function p(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){p(r,i,a,o,s,"next",e)}function s(e){p(r,i,a,o,s,"throw",e)}o(void 0)}))}}var m={name:"ChangeRecordModal",props:{zIndex:{type:Number,default:1e3}},components:{CorpChangeInfoComp:c["default"],TaskDealModal:u["default"]},mixins:[o["a"]],data:function(){var e=this;return{visible:!1,changeVisible:!1,url:{list:"/common/bChange/pageListByObj",getBusiReqList:"/common/bBusiReq/list",getProcessByReq:"/common/bBusiReq/getProcessByReq"},columns:[],originalColumns:[{title:"申请编号",headerAlign:"center",align:"center",field:"reqNo",width:"170px",type:"input",slot:!0},{title:"状态",align:"center",field:"state",width:"120px",type:"input",slot:!0},{title:"变更类别",align:"center",field:"operType",width:"120px",type:"input",slot:!0},{title:"变更原因",headerAlign:"center",align:"left",field:"reason",type:"input",className:"noPreLine",showOverflow:!1},{title:"变更人",align:"center",field:"createBy_dictText",width:"120px",slot:!0},{title:"变更日期",align:"center",field:"changeDate",width:"120px",type:"input",formatter:function(e){var t=e.cellValue;return t?l()(t).format("YYYY-MM-DD"):""}},{title:"详情",align:"center",field:"action",width:"80px",type:"expand",slot:!0}],childColumns:[{title:"序号",type:"seq",width:60,align:"center"},{title:"变更项",align:"center",field:"wordNameStr",slots:{default:"wordNameStr"}},{title:"原信息",align:"center",field:"oldInfoStr",slots:{default:"oldInfoStr"}},{title:"新信息",align:"center",field:"newInfoStr",slots:{default:"newInfoStr"}}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},confirmLoading:!1,showTemplate:!1,title:"变更记录",pageUrl:"",businessKey:"",taskId:"",editUrl:"",innerpage:"",internalUrl:""}},created:function(){},methods:{handleCancel:function(){this.visible=!1,this.showTemplate=!1},changeHandleCancel:function(){this.changeVisible=!1},init:function(e,t,n,i,a){var r=this;this.columns=this.originalColumns,"no"===n&&this.columns.splice(0,1),this.visible=!0;var o={changeNo:e,busiType:t,busiTypeDetail:i,reqNo:a};this.$nextTick((function(){r.$refs.table.localParams=o,r.$refs.table.loadData()}))},initTemplate:function(e,t,n,i){var a=this;this.columns=this.originalColumns,"no"===n&&this.columns.splice(0,1),this.visible=!1,this.showTemplate=!0;var r={changeNo:e,busiType:t,busiTypeDetail:i};this.$nextTick((function(){a.$refs.table.localParams=r,a.$refs.table.loadData()}))},gotoDetail:function(){var e=h(f().mark((function e(t){var n=this;return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(r["e"])(this.url.getProcessByReq,{reqNo:t.reqNo}).then((function(e){if(e.success&&e.result){var t=e.result;n.businessKey=t.businessKey,n.taskId=t.id,n.editUrl=t.editUrl,n.internalUrl=t.internalUrl,null!=t.editUrl&&""!==t.editUrl&&void 0!==t.editUrl&&-1!==t.editUrl.indexOf("innerpage")?(n.innerpage=t.editUrl.split(":")[1],n.pageUrl=t.url):(n.innerpage=t.url.split(":")[1],n.pageUrl=t.url),n.$refs.taskDealModal.width="90%",n.$refs.taskDealModal.onlyView=!0,n.$refs.taskDealModal.initData(t.busiId,(t.startUserId?t.startUserId+"·":"")+t.title,t,"done"),n.$refs.taskDealModal.disableSubmit=!1}else n.$message.warning(e.message)}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},y=m,b=n("2877"),g=Object(b["a"])(y,i,a,!1,null,"6ca24f20",null);t["default"]=g.exports},bddb:function(e,t,n){},bf3c:function(e,t,n){"use strict";n("d251")},c8ad:function(e,t,n){},cbc1:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",padding:"24px"}}},[n("a-row",{staticClass:"rowContent",attrs:{type:"flex",gutter:10}},[e.regionId?n("a-col",{attrs:{xxl:3,xl:4,span:3}},[n("div",{staticClass:"treeDiv"},[n("a-input-search",{attrs:{placeholder:"请输入楼栋名称"},on:{pressEnter:e.queryBldTree,search:e.queryBldTree},model:{value:e.treeKey,callback:function(t){e.treeKey=t},expression:"treeKey"}}),n("a-tree",{staticClass:"houseTree",attrs:{showLine:"",selectedKeys:e.selectedKeys,checkStrictly:!0,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.departTree,autoExpandParent:e.autoExpandParent,expandedKeys:e.iExpandedKeys},on:{select:e.onSelect,expand:e.onExpand}})],1)]):e._e(),n("a-col",{staticStyle:{flex:"1",width:"0"}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{type:"flex",gutter:10}},[n("a-col",{attrs:{xxl:4,xl:4,lg:4,md:4,sm:24}},[n("a-form-item",[n("a-input",{staticClass:"width100",attrs:{placeholder:"请输入业务编号或业主姓名"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name","string"===typeof t?t.trim():t)},expression:"queryParam.name"}})],1)],1),n("a-col",{attrs:{xxl:3,xl:4,lg:4,md:4,sm:24}},[n("a-form-item",[n("a-select",{staticClass:"width100",attrs:{allowClear:!0,placeholder:"请选择状态"},model:{value:e.queryParam.state,callback:function(t){e.$set(e.queryParam,"state",t)},expression:"queryParam.state"}},[n("a-select-option",{attrs:{value:"2"}},[e._v(" 已验证 ")]),n("a-select-option",{attrs:{value:"4"}},[e._v(" 待打印 ")]),n("a-select-option",{attrs:{value:"3"}},[e._v(" 待记账 ")]),n("a-select-option",{attrs:{value:"0"}},[e._v(" 已记账 ")])],1)],1)],1),n("a-col",{attrs:{xxl:3,xl:4,lg:4,md:4,sm:24}},[n("a-form-item",[n("a-select",{staticClass:"width100",attrs:{allowClear:!0,placeholder:"请选择交存方式"},model:{value:e.queryParam.businessType,callback:function(t){e.$set(e.queryParam,"businessType",t)},expression:"queryParam.businessType"}},[n("a-select-option",{attrs:{value:"1"}},[e._v(" 业主自交 ")]),n("a-select-option",{attrs:{value:"2"}},[e._v(" 企业垫交 ")]),n("a-select-option",{attrs:{value:"4"}},[e._v(" 业主批量 ")])],1)],1)],1),n("a-col",{attrs:{xxl:6,xl:6,lg:6,md:6,sm:24}},[n("query-range-picker",{attrs:{placeholder:["申请开始日期","申请结束日期"],valueFormat:"YYYY-MM-DD"},on:{change:e.splitTime},model:{value:e.reqDate,callback:function(t){e.reqDate=t},expression:"reqDate"}})],1),n("a-col",{attrs:{xl:4,lg:4,md:4,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.handleSuperQuery({})}}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"sort-config":{defaultSort:{field:"",order:""}},"row-config":{height:120},toolbar:!0,bordered:"","header-align":"center",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,"checkbox-config":e.checkMethod,tableHeight:"auto",ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),tableColumn:e.columns},scopedSlots:e._u([{key:"state",fn:function(t){t.text;var i=t.row;return[2===i.state?n("a-badge",{attrs:{status:"success",text:"已验证"}}):e._e(),3===i.state?n("a-badge",{attrs:{status:"warning",text:"待记账"}}):e._e(),4===i.state?n("a-badge",{attrs:{status:"processing",text:"待打印"}}):e._e(),0===i.state?n("a-badge",{attrs:{status:"success",text:"已记账"}}):e._e()]}},{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:function(t){return e.batchPrint()}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 批量打印 ")],1),n("a-menu-item",{key:"2",on:{click:function(t){return e.batchRevoke()}}},[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销申请\n                    ")],1),e.showAccount&&e.isAdmin?n("a-menu-item",{key:"3",on:{click:function(t){return e.bookkeepingBatch()}}},[n("a-icon",{attrs:{type:"highlight"}}),e._v(" 批量记账\n                    ")],1):e._e()],1),n("a-button",[e._v("\n                    批量操作\n                    "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var i=t.row;return[e.hasEnablePageConfigByKey("NoticePrintRemoveAccount")?[(e.showPos||e.showSM)&&"0"!=i.state&&"01"==i.busiObject?n("a",{on:{click:function(t){return e.defray("wechat",i)}}},[n("a-icon",{attrs:{type:"scan"}}),e._v(" 小程序支付")],1):e._e(),"0"!=i.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确定","cancel-t":"",ext:"取消"},on:{confirm:function(t){return e.revoke(i)}}},[n("template",{slot:"title"},[n("p",[e._v("是否撤销该交存申请？撤销后不可恢复！")])]),"0"!=i.state?n("a",[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销申请")],1):e._e()],2),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.print(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 去银行交费")],1)]:[n("a",{on:{click:function(t){return e.print(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 通知书打印")],1),"0"!=i.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确定","cancel-t":"",ext:"取消"},on:{confirm:function(t){return e.revoke(i)}}},[n("template",{slot:"title"},[n("p",[e._v("是否撤销该交存申请？撤销后不可恢复！")])]),"0"!=i.state?n("a",[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 撤销申请")],1):e._e()],2),(e.showPos||e.showSM)&&"0"!=i.state&&"01"==i.busiObject?n("a-divider",{attrs:{type:"vertical"}}):e._e(),(e.showPos||e.showSM)&&"0"!=i.state&&"01"==i.busiObject?n("a",{on:{click:function(t){return e.defray("wechat",i)}}},[n("a-icon",{attrs:{type:"scan"}}),e._v(" 小程序支付")],1):e._e()],e.hideMore(i)?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hideMore(i)?n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},["02"!==i.busiObject||"0001"!==i.busiTypeDetail&&"0002"!==i.busiTypeDetail&&"0003"!==i.busiTypeDetail&&"0012"!==i.busiTypeDetail?e._e():n("a-menu-item",[n("a",{on:{click:function(t){return e.printList(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 打印清册")],1)]),"02"==i.busiObject?n("a-menu-item",[n("a",{on:{click:function(t){return e.printInvestigate(i)}}},[n("a-icon",{attrs:{type:"printer"}}),e._v(" 打印审查单")],1)]):e._e(),e.showAccount&&e.isAdmin&&"0"!=i.state&&!e.WhetherThePermissionPasses("firstDeposit:bookkeeping")?n("a-menu-item",[n("a",{on:{click:function(t){return e.bookkeeping(i)}}},[n("a-icon",{attrs:{type:"highlight"}}),e._v(" 记账")],1)]):e._e()],1)],1):e._e()]}}])})],1)])],1),n("payment-modal",{ref:"payMentRef",attrs:{zIndex:e.zIndex+1,"is-modal":""}}),n("print-report-comp",{ref:"print",attrs:{zIndex:e.zIndex+1}}),n("deal-modal-comp",{key:"deal"+e.dealCompKey,ref:"deal",attrs:{zIndex:e.zIndex+1,"selected-rows":e.dealRows,"show-bank-state":e.showBankState,"default-bank-code":e.defaultBankCode,"deal-id":e.dealId,"is-deposit":e.isDeposit,"region-id":e.regionId,depositType:e.depositType,amountConfirm:e.amountConfirm},on:{ok:e.dealOk}})],1)},a=[],r=(n("6eb7"),n("0fea")),o=n("ac0d"),s=n("0a5e"),l=n("6fa9"),c=n("61b6"),u=n("9630"),d=n("5b0b"),f=n("d8a5"),p=n("4ec3"),h=n("9bed"),m=n("c1df"),y=n.n(m),b=n("fdcf");function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function w(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof b?t:b,o=Object.create(r.prototype),s=new E(i||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function b(){}function v(){}function w(){}var _={};c(_,o,(function(){return this}));var k=Object.getPrototypeOf,D=k&&k(k(P([])));D&&D!==n&&i.call(D,o)&&(_=D);var C=w.prototype=b.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,o,s){var l=d(e[a],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==g(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return r=r?r.then(a,a):a()}})}function O(t,n,i){var a=f;return function(r,o){if(a===h)throw Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:e,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=N(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===f)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=h;var c=d(t,n,i);if("normal"===c.type){if(a=i.done?m:p,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=m,i.method="throw",i.arg=c.arg)}}}function N(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=d(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(g(t)+" is not iterable")}return v.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:v,configurable:!0}),v.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new S(u(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(C),c(C,l,"Generator"),c(C,o,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;q(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:P(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),y}},t}function k(e,t,n,i,a,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){k(r,i,a,o,s,"next",e)}function s(e){k(r,i,a,o,s,"throw",e)}o(void 0)}))}}var C={name:"BusiDealList",components:{DealModalComp:u["default"],PaymentModal:c["default"],MESSuperQuery:l["default"],QueryRangePicker:d["default"],PrintReportComp:h["default"]},mixins:[s["a"],o["b"]],props:{regionId:String,regionCode:String,depositType:String,projInfo:{default:function(){return{}},type:Object},zIndex:{type:Number,default:1e3},quickDepFlag:{type:Boolean,default:!1}},data:function(){var e=this;return{showAccount:!0,isAdmin:!1,reqDate:[],fileName:"BusiDealList",description:"交存通知书打印",deposit_check_switch:"0",deposit_check_date:y()().format("YYYY-MM-DD"),queryObj:[{type:"input",value:"zoneCode",label:"所属区县"},{type:"input",value:"busiNo",label:"业务编号"},{type:"input",value:"passwd",label:"业务密码"},{type:"input",value:"state",label:"业务状态"},{type:"input",value:"busiType",label:"业务类别"},{type:"input",value:"busiTypeDetail",label:"业务明细类别"},{type:"input",value:"busiObject",label:"业务主体"},{type:"input",value:"corpCode",label:"单位编号"},{type:"input",value:"corpType",label:"单位类型"},{type:"input",value:"bankCode",label:"银行代码"},{type:"input",value:"spaccCode",label:"专户账号"},{type:"input",value:"colaccCode",label:"收款账号"},{type:"input",value:"colaccName",label:"收款账户名"},{type:"input",value:"colbankName",label:"收款账户银行"},{type:"input",value:"totalNum",label:"总笔数"},{type:"input",value:"totalAmount",label:"总金额"},{type:"input",value:"loanFlag",label:"收支标志"},{type:"input",value:"recDate",label:"打印日期"},{type:"input",value:"validDate",label:"有效期"},{type:"input",value:"trdFrom",label:"发起方(1_银行,2_系统)"},{type:"input",value:"tallyType",label:"结算方式"},{type:"input",value:"chequeNo",label:"支票号码"},{type:"input",value:"batchNo",label:"凭证批次号"},{type:"input",value:"voucherNo",label:"票据凭证编号"},{type:"input",value:"voucherRecDate",label:"票据凭证登记日期"},{type:"input",value:"certDate",label:"验证日期"},{type:"input",value:"busiDate",label:"记账日期"},{type:"input",value:"hfmpDate",label:"系统记账时间"},{type:"input",value:"oldBusiNo",label:"原业务编号"},{type:"input",value:"hisFlag",label:"历史数据标志"},{type:"input",value:"delFlag",label:"删除状态（0-正常，1-已删除）"},{type:"input",value:"remark",label:"备注"}],columns:[{title:"业务编号",align:"left",headerAlign:"left",field:"busiNo",width:170,sort:!0,customSortField:"busiNo"},{title:"承办银行",align:"left",headerAlign:"left",field:"bankName",width:110,sort:!0,customSortField:"bankName"},{title:"房屋位置",align:"left",headerAlign:"left",minWidth:"160px",field:"address"},{title:"账户名称",align:"left",headerAlign:"left",minWidth:"120px",field:"ownerName",sort:!0,customSortField:"ownerName"},{title:"实交金额 (元)",align:"right",headerAlign:"right",field:"totalAmount",formatter:"amount",width:100,sort:!0,customSortField:"totalAmount"},{title:"状态",align:"left",headerAlign:"center",field:"state",slot:!0,width:80},{title:"申请日期",align:"center",field:"reqDate",width:100,sort:!0,customSortField:"reqDate"},{title:"操作",field:"action",align:"center",fixed:"right",width:400,slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam,e.projInfo)).then((function(e){return e.result}))},url:{list:"/deposit/bBusiDeal/list",delete:"/deposit/bBusiDeal/delete",deleteBatch:"/deposit/bBusiDeal/deleteBatch",exportXlsUrl:"/deposit/bBusiDeal/exportXls",importExcelUrl:"deposit/bBusiDeal/importExcel",noticePush:"/deposit/bBusiDeal/noticePush",batchRevoke:"/deposit/bBusiDeal/batchRevoke",batchRevokeQuickDeposit:"/deposit/bBusiDeal/batchRevokeQuickDeposit",queryReport:"/ureport2/ureport2Config/queryReport",printDepOfHandOver:"deposit/bBusiDeal/printDepOfHandOver",batchPrintOfComAcc:"deposit/bBusiDeal/batchPrintOfComAcc",printDepOfSelfing:"deposit/bBusiDeal/printDepOfSelfing",queryHouseListById:"/view/floorViews/queryHouseListById",getDealById:"/deposit/bBusiDeal/getDealById"},selectedKeys:[],departTree:[],treeKey:"",departTreeTem:[],autoExpandParent:!0,iExpandedKeys:[],queryParam:{name:"",state:void 0,startDate:null,endDate:null,businessType:void 0},dictOptions:{},dealId:"",isDeposit:"1",showBankState:!1,checkBankDict:"",defaultBankCode:"",dealCompKey:0,showSM:!1,showPos:!1,dealRows:[],amountConfirm:"1"}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},mounted:function(){var e=this;this.$bus.$on("KeepAmountSuccess",(function(){e.handleSuperQuery({})})),Object(p["l"])("deposit_is_account").then((function(t){e.showAccount="0"!=t.result})),Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.isAdmin=!0)})),Object(p["l"])("deposit_check_switch").then((function(t){e.deposit_check_switch=t.result})),Object(p["l"])("deposit_check_date").then((function(t){e.deposit_check_date=t.result}))},inject:{continueDepositBusiType:{default:"01"}},created:function(){this.initData(),this.initPayBtn()},methods:{WhetherThePermissionPasses:b["a"],hideMore:function(e){return"02"===e.busiObject&&("0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail)||this.showAccount&&this.isAdmin&&"0"!=e.state},checkMethod:function(e){var t=e.row;return"0"!=t.state},initPayBtn:function(){var e=D(x().mark((function e(){var t,n,i;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["e"])("is_wechat");case 2:return t=e.sent,e.next=5,Object(f["e"])("is_aliPay");case 5:return n=e.sent,e.next=8,Object(f["e"])("is_pos");case 8:i=e.sent,"1"===i&&(this.showPos=!0),"1"!==n&&"1"!==t||(this.showSM=!0);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){"01"==this.continueDepositBusiType&&"01"!=this.depositType&&(this.depositType="03"),this.queryParam.regionCode=this.regionCode,this.queryParam.depositType=this.depositType,this.loadTree()},splitTime:function(){this.queryParam.startDate=this.reqDate[0],this.queryParam.endDate=this.reqDate[1]},initChooseBankState:function(){var e=this;return new Promise((function(t){e.checkBankDict="",e.showBankState=!1,Object(f["e"])("is_designated_depositary_bank").then((function(n){e.checkBankDict=n,n&&0==n&&(e.showBankState=!0),t()}))}))},dealOk:function(e){this.dealId="",this.dealCompKey++,this.defaultBankCode="",e&&(this.selectedRows=[],this.selectedRowKeys=[],this.modalFormOk()),this.$emit("dealOk")},bookkeeping:function(e){var t=this;this.amountConfirm=e.amountConfirm,e.busiTypeDetail&&"0001"==e.busiTypeDetail&&(this.depositType="01"),e.bankCode?this.initChooseBankState():(this.showBankState=!0,Object(f["e"])("is_designated_depositary_bank").then((function(n){n&&"1"==n&&(t.defaultBankCode=e.accBankCode)}))),this.validaKeeping([e.houseId]).then((function(n){n&&(t.$refs.deal.visible=!0,t.dealRows=[e],t.dealId=e.id,t.$refs.deal.queryShowAdvances(),t.$refs.deal.queryBusiDealDateList())}))},bookkeepingBatch:function(){var e=D(x().mark((function e(){var t,n,i,a,r,o,s,l=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,this.selectedRows.length<=0)this.$message.warning("请选择数据后再记账！");else{n=[],i=[],a=v(this.selectedRows);try{for(a.s();!(r=a.n()).done;)o=r.value,n.push(o.id),i.push(o.bankCode?o.bankCode:"")}catch(c){a.e(c)}finally{a.f()}i=i.filter((function(e,t){return i.indexOf(e,0)===t})),i.length>1?this.$message.warning("请选择相同承办行或没有承办行的交存数据记账"):(s=this.selectedRows.map((function(e){return e.houseId})),this.validaKeeping(s).then(function(){var e=D(x().mark((function e(a){return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}if(1!=i.length||i[0]){e.next=5;break}l.showBankState=!0,e.next=8;break;case 5:return e.next=7,l.initChooseBankState();case 7:t.checkBankDict&&0==t.checkBankDict&&i.length>0&&i[0]&&(t.defaultBankCode=i[0]);case 8:l.dealId=n.join(","),l.dealRows=l.selectedRows,l.$refs.deal.visible=!0,l.$refs.deal.queryShowAdvances(),l.$refs.deal.queryBusiDealDateList();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validaKeeping:function(e){var t=this;return new Promise((function(n){t.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在校验中"});var i=y()().isSameOrAfter(y()(t.deposit_check_date));"0"===t.deposit_check_switch&&i&&"2"!==t.amountConfirm?Object(r["j"])("/base/rHouseInfo/queryHouseInfos",e).then((function(e){if(e&&e.success)for(var i=0;i<e.result.length;i++){var a=e.result[i];if(a.dueAmount!==a.depAmount)return t.$message.warning("当前实交金额不等于应交金额，请核对记账数据！"),t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),void n(!1);var r=a.psnInfoList.filter((function(e){if(!e.certNo||!e.phone)return!0}));if(r.length>0)return t.$message.warning("存在业主未填写身份证或手机号，请核对数据！"),t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),void n(!1)}else t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),t.$message.warning(e.message),n(!1)})).catch((function(){t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})})):(t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),n(!0))}))},batchPrint:function(){if(this.selectedRowKeys.length<=0)return this.$message.warning("请选择一条记录！"),!1;var e,t=this,n="",i="",a=0,r=0,o=v(this.selectedRows);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(n){if(n!==s.busiObject)return t.$message.warning("不同业务主体的数据不能批量打印！"),!1;"0001"===s.busiTypeDetail||"0002"===s.busiTypeDetail||"0003"===s.busiTypeDetail?a++:r++}else n=s.busiObject,i=s.busiTypeDetail,"02"===s.busiObject&&("0001"===s.busiTypeDetail||"0002"===s.busiTypeDetail||"0003"===s.busiTypeDetail?a++:r++)}}catch(u){o.e(u)}finally{o.f()}if(a>0&&r>0)return t.$message.warning("不同业务主体的数据不能批量打印！"),!1;var l=this.selectedRows.map((function(e){return e.busiNo})),c=[];this.selectedRows.forEach((function(e){4==e.state&&c.push(e.busiNo)})),this.$refs.print.type="print","02"===n?"0001"===i||"0002"===i||"0003"===i?(this.$refs.print.print("deposit_enterprise",{busiNo:l}),this.publicPrint(l,this.url.printDepOfHandOver,null,c)):(this.$refs.print.print("deposit_publicAcc",{busiNo:l}),this.publicPrint(l,this.url.batchPrintOfComAcc,null,c)):"03"===record.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:l}),this.publicPrint(l,this.url.printDepOfHandOver)):(this.$refs.print.print("deposit_owner",{busiNo:l}),this.publicPrint(l,this.url.printDepOfSelfing,null,c))},batchRevoke:function(){var e=this.$createElement,t=this;if(this.selectedRowKeys.length<=0)return this.$message.warning("请选择一条记录！"),!1;var n=this.selectedRows.map((function(e){return e.busiNo})),i=this.quickDepFlag?this.url.batchRevokeQuickDeposit:this.url.batchRevoke,a=0;this.selectedRows.forEach((function(e){a+=e.totalAmount}));var o={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};a=Number(a).toLocaleString("zh-CN",o),this.$confirm({title:"确认撤销",icon:function(){return e("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},okText:"确认",zIndex:this.zIndex+1,cancelText:"取消",content:"您当前正在进行批量撤销业务，共"+this.selectedRowKeys.length+"户，涉及金额"+a+"元，是否办理？",onOk:function(){t.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在撤销申请，请稍等。。。"}),Object(r["j"])(i,n).then((function(e){e.success?(t.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),t.$message.success(e.message),t.queryPage(),t.onClearSelected()):t.$message.warning(e.message)}))}})},print:function(e){var t=[];t.push(e.busiNo),this.$refs.print.type="print","02"===e.busiObject?"0001"===e.busiTypeDetail||"0002"===e.busiTypeDetail||"0003"===e.busiTypeDetail?(this.$refs.print.print("deposit_enterprise",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):(this.$refs.print.print("deposit_publicAcc",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.batchPrintOfComAcc,e.state)):"03"===e.busiObject?(this.$refs.print.print("deposit_owner_same",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfHandOver,e.state)):(this.$refs.print.print("deposit_owner",{busiNo:t,state:e.state}),this.publicPrint(t,this.url.printDepOfSelfing,e.state))},printList:function(e){this.$refs.print.type="print",this.$refs.print.print("deposit_inventory",{busiNo:e.busiNo})},printInvestigate:function(e){this.$refs.print.type="print",this.$refs.print.print("deposit_inspection",{busiNo:e.busiNo})},printJczm:function(e){this.$refs.print.type="print",this.$refs.print.print("deposit_certificate",{houseId:e.houseId,busiNo:e.busiNo})},publicPrint:function(e,t,n,i){var a=this;(4==n||i&&i.length>0)&&Object(r["j"])(t,i&&i.length>0?i:e).then((function(e){e.success&&a.queryPage()}))},noticePush:function(e){var t=this,n=this;Object(r["j"])(this.url.noticePush,e.busiNo).then((function(e){e.success?(n.$message.success(e.message),n.queryPage()):t.dataSource=null}))},revoke:function(e){var t=this,n=this,i=[];i.push(e.busiNo);var a=this.quickDepFlag?this.url.batchRevokeQuickDeposit:this.url.batchRevoke;Object(r["j"])(a,i).then((function(e){e.success?(n.$message.success(e.message),n.queryPage()):t.dataSource=null}))},searchReset:function(){this.queryParam.name="",this.queryParam.state=void 0,this.queryParam.startDate=null,this.queryParam.endDate=null,this.queryParam.businessType=void 0,this.reqDate=[],this.handleSuperQuery({})},disabledStartDate:function(e){var t=this.queryParam.endDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.queryParam.startDate;return!(!e||!t)&&t.valueOf()>=e.valueOf()},defray:function(e,t){var n=this,i=t.houseId?t.houseId:"";i?Object(r["e"])(this.url.queryHouseListById,{houseId:i}).then((function(e){if(e.success){var i=e.result;i.busiTypeDetail=t.busiTypeDetail,i.depAmount=t.totalAmount,i&&n.$refs.payMentRef.open(i)}})):this.$message.warn("当前交易的房屋信息获取异常，请稍后重试")},onExpand:function(e){this.iExpandedKeys=e,this.autoExpandParent=!1},loadTree:function(){var e=this;Object(r["e"])("/base/rtRegion/getBldTree",{regionId:this.regionId,state:"0"}).then((function(t){e.departTree=t.result,e.departTreeTem=[].concat(t.result),e.tableFlag=!0}))},onSelect:function(e,t){if(this.selectedKeys[0]!==e[0]&&(this.selectedKeys=[e[0]]),void 0==this.selectedKeys[0])this.queryParam.cellId="",this.queryParam.bldId="";else{var n=t.node.dataRef;"Y"===n.isChildren?(this.queryParam.cellId=n.key,this.queryParam.bldId="",this.queryParam.districtId=""):"X"===n.isChildren?(this.queryParam.districtId=n.key,this.queryParam.bldId="",this.queryParam.cellId=""):(this.queryParam.bldId=n.key,this.queryParam.cellId="",this.queryParam.districtId="")}this.$refs.table.refresh()},queryBldTree:function(){if(this.departTree=[].concat(this.departTreeTem),this.departTree.length>0&&this.treeKey)for(var e=0;e<this.departTree.length;e++)-1===this.departTree[e].title.indexOf(this.treeKey)&&(this.departTree.splice(e,1),e--)},setThisExpandedKeys:function(e){e.children&&e.children.length>0&&this.iExpandedKeys.push(e.key)}}},T=C,S=(n("5dfe"),n("2877")),O=Object(S["a"])(T,i,a,!1,null,"534573e0",null);t["default"]=O.exports},d251:function(e,t,n){},d3fd:function(e,t,n){},d4f0:function(e,t,n){},d502:function(e,t,n){"use strict";n("0d84")},d542:function(e,t,n){},e25b6:function(e,t,n){"use strict";n("d4f0")},e70b:function(e,t,n){},e88e:function(e,t,n){},ebbd:function(e,t,n){"use strict";n("d3fd")},f546:function(e,t,n){"use strict";n("e88e")},f7b2:function(e,t,n){"use strict";n("68f1")},f976:function(e,t,n){}}]);