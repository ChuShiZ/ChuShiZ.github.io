(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~f6f6ed3b"],{"01c4":function(e,t,a){"use strict";a("fa3f")},"03ef":function(e,t,a){},"06d64":function(e,t,a){},"0746":function(e,t,a){"use strict";a("46b2")},"077e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,okText:"保存并安排任务",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"任务类名",prop:"jobClassName",hasFeedback:""}},[a("a-input",{attrs:{placeholder:"请输入任务类名"},model:{value:e.model.jobClassName,callback:function(t){e.$set(e.model,"jobClassName",t)},expression:"model.jobClassName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Cron表达式",prop:"cronExpression"}},[a("j-easy-cron",{model:{value:e.model.cronExpression,callback:function(t){e.$set(e.model,"cronExpression",t)},expression:"model.cronExpression"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"参数",prop:"parameter"}},[a("a-textarea",{attrs:{placeholder:"请输入参数",rows:5},model:{value:e.model.parameter,callback:function(t){e.$set(e.model,"parameter",t)},expression:"model.parameter"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"描述",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"请输入描述",rows:3},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态",prop:"status"}},[a("j-dict-select-tag",{attrs:{type:"radioButton",dictCode:"quartz_status"},model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}})],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("4ba5"),s={name:"QuartzJobModal",data:function(){return{title:"操作",buttonStyle:"solid",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},cron:{label:"",value:""},confirmLoading:!1,validatorRules:{cronExpression:[{required:!0,message:"请输入cron表达式!"},{validator:i["a"]}],jobClassName:[{required:!0,message:"请输入任务类名!"}]},url:{add:"/sys/quartzJob/add",edit:"/sys/quartzJob/edit"}}},methods:{add:function(){this.edit({cronExpression:"* * * * * ? *",status:0})},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.form.resetFields(),t.model=Object.assign({},e)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a,r){if(a){t.confirmLoading=!0;var n="",i="";e.model.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post"),Object(o["i"])(n,e.model,i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"dbdfc53c",null);t["default"]=d.exports},"079fe":function(e,t,a){},"0944":function(e,t,a){},"0cdf":function(e,t,a){},"11cb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:900,keyboard:!1,closable:!1,centered:!0,maskClosable:!1,mask:!1,okText:"确认",cancelText:"取消"},on:{ok:e.ok,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{tab:"方向性图标"}},[a("ul",e._l(e.icons.directionIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)]),a("a-tab-pane",{key:"2",attrs:{tab:"指示性图标"}},[a("ul",e._l(e.icons.suggestionIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)]),a("a-tab-pane",{key:"3",attrs:{tab:"编辑类图标"}},[a("ul",e._l(e.icons.editIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)]),a("a-tab-pane",{key:"4",attrs:{tab:"数据类图标"}},[a("ul",e._l(e.icons.dataIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)]),a("a-tab-pane",{key:"5",attrs:{tab:"网站通用图标"}},[a("ul",e._l(e.icons.webIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)]),a("a-tab-pane",{key:"6",attrs:{tab:"品牌和标识"}},[a("ul",e._l(e.icons.logoIcons,(function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)})),0)])],1)],1)},n=[],o=["step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","up-circle-o","down-circle-o","right-circle-o","left-circle-o","double-right","double-left","vertical-left","vertical-right","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","play-circle-o","up-square","down-square","left-square","right-square","up-square-o","down-square-o","left-square-o","right-square-o","login","logout","menu-fold","menu-unfold","border-bottom","border-horizontal","border-inner","border-left","border-right","border-top","border-verticle","pic-center","pic-left","pic-right","radius-bottomleft","radius-bottomright","radius-upleft","radius-upright","fullscreen","fullscreen-exit"],i=["question","question-circle","plus","plus-circle","pause","pause-circle","minus","minus-circle","plus-square","minus-square","info","info-circle","exclamation","exclamation-circle","close","close-circle","close-square","check","check-circle","check-square","clock-circle","warning","issues-close","stop"],s=["edit","form","copy","scissor","delete","snippets","diff","highlight","align-center","align-left","align-right","bg-colors","bold","italic","underline","strikethrough","redo","undo","zoom-in","zoom-out","font-colors","font-size","line-height","colum-height","dash","small-dash","sort-ascending","sort-descending","drag","ordered-list","radius-setting"],l=["area-chart","pie-chart","bar-chart","dot-chart","line-chart","radar-chart","heat-map","fall","rise","stock","box-plot","fund","sliders"],c=["lock","unlock","bars","book","calendar","cloud","cloud-download","code","copy","credit-card","delete","desktop","download","ellipsis","file","file-text","file-unknown","file-pdf","file-word","file-excel","file-jpg","file-ppt","file-markdown","file-add","folder","folder-open","folder-add","hdd","frown","meh","smile","inbox","laptop","appstore","link","mail","mobile","notification","paper-clip","picture","poweroff","reload","search","setting","share-alt","shopping-cart","tablet","tag","tags","to-top","upload","user","video-camera","home","loading","loading-3-quarters","cloud-upload","star","heart","environment","eye","camera","save","team","solution","phone","filter","exception","export","customer-service","qrcode","scan","like","dislike","message","pay-circle","calculator","pushpin","bulb","select","switcher","rocket","bell","disconnect","database","compass","barcode","hourglass","key","flag","layout","printer","sound","usb","skin","tool","sync","wifi","car","schedule","user-add","user-delete","usergroup-add","usergroup-delete","man","woman","shop","gift","idcard","medicine-box","red-envelope","coffee","copyright","trademark","safety","wallet","bank","trophy","contacts","global","shake","api","fork","dashboard","table","profile","alert","audit","branches","build","border","crown","experiment","fire","money-collect","property-safety","read","reconciliation","rest","security-scan","insurance","integration","safety-certificate","project","thunderbolt","block","cluster","deployment-unit","dollar","euro","pound","file-done","file-exclamation","file-protect","file-search","file-sync","gateway","gold","robot","shopping"],d=["android","apple","windows","ie","chrome","github","aliwangwang","dingding","weibo-square","weibo-circle","taobao-circle","html5","weibo","twitter","wechat","youtube","alipay-circle","taobao","skype","qq","medium-workmark","gitlab","medium","linkedin","google-plus","dropbox","facebook","codepen","amazon","google","codepen-circle","alipay","ant-design","aliyun","zhihu","slack","slack-square","behance","behance-square","dribbble","dribbble-square","instagram","yuque","alibaba","yahoo"],u={name:"Icons",props:{iconChooseVisible:{default:!1}},data:function(){return{icons:{directionIcons:o,suggestionIcons:i,editIcons:s,dataIcons:l,webIcons:c,logoIcons:d},choosedIcon:"",activeIndex:""}},computed:{show:{get:function(){return this.iconChooseVisible},set:function(){}}},methods:{reset:function(){this.activeIndex=""},chooseIcon:function(e){this.activeIndex=e,this.choosedIcon=e,this.$message.success("选中 ".concat(e))},ok:function(){""!==this.choosedIcon?(this.reset(),this.$emit("choose",this.choosedIcon)):this.$message.warning("尚未选择任何图标")},cancel:function(){this.reset(),this.$emit("close")}}},f=u,m=(a("ce47"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"29737772",null);t["default"]=h.exports},"17ce":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:"30vw",visible:e.visible,confirmLoading:e.confirmLoading,okButtonProps:{props:{icon:"check-circle"}},cancelButtonProps:{props:{icon:"close-circle"}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{disabled:!1,border:!1,model:e.model,rules:e.rules}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("名称\n        ")]),a("a-col",{attrs:{span:18,"data-prop":"itemText"}},[a("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.model.itemText,callback:function(t){e.$set(e.model,"itemText",t)},expression:"model.itemText"}})],1),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("数据值\n        ")]),a("a-col",{attrs:{span:18,"data-prop":"itemValue"}},[a("a-input",{attrs:{placeholder:"请输入数据值"},model:{value:e.model.itemValue,callback:function(t){e.$set(e.model,"itemValue",t)},expression:"model.itemValue"}})],1),a("a-col",{attrs:{span:6}},[e._v("\n          排序值\n        ")]),a("a-col",{attrs:{span:18}},[a("a-input-number",{attrs:{min:1},model:{value:e.model.sortOrder,callback:function(t){e.$set(e.model,"sortOrder",t)},expression:"model.sortOrder"}}),e._v("值越小越靠前\n        ")],1),a("a-col",{attrs:{span:6}},[e._v("\n          是否启用\n        ")]),a("a-col",{attrs:{span:18}},[a("a-switch",{attrs:{checkedChildren:"启用",unCheckedChildren:"禁用"},on:{change:e.onChose},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1),a("a-col",{staticClass:"height-108",attrs:{span:6}},[e._v("\n          描述\n        ")]),a("a-col",{staticClass:"height-108",attrs:{span:18}},[a("a-textarea",{attrs:{rows:4,placeholder:"请输入描述信息"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i=a("0fea");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};u(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,l){var c=m(e[n],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==s(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=h;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(f(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),u(S,d,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){c(o,r,n,i,s,"next",e)}function s(e){c(o,r,n,i,s,"throw",e)}i(void 0)}))}}var u={name:"DDictItemModal",data:function(){return{title:"操作",visible:!1,visibleCheck:!0,model:{},dictId:"",status:1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,rules:{itemText:[{required:!0,message:"请输入名称!",trigger:"change"}],itemValue:[{required:!0,message:"请输入数据值!",trigger:"change"},{validator:this.validateItemValue}]}}},created:function(){},methods:{validateItemValue:function(e,t){var a=this;return new Promise(function(){var e=d(l().mark((function e(r){var n,o;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&(n={itemValue:t,dictId:a.dictId},a.model.id&&(n.id=a.model.id),o=new RegExp("[`_~!@#$^&*()=|{}'.<>《》/?！￥（）—【】‘；：”“。，、？]"),o.test(t)?r("数据值不能包含特殊字符！"):Object(i["e"])("/sys/dictItem/dictItemCheck",n).then((function(e){e.success?r():r(e.message)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},add:function(e){this.dictId=e,this.edit({sortOrder:1,status:1})},edit:function(e){e.id&&(this.dictId=e.dictId),this.status=e.status,this.visibleCheck=1==e.status,this.model=Object.assign({},e),this.model.dictId=this.dictId,this.model.status=this.status,this.visible=!0},onChose:function(e){e?(this.status=1,this.visibleCheck=!0):(this.status=0,this.visibleCheck=!1)},handleOk:function(){var e=d(l().mark((function e(){var t,a,r;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.formRow.validaRowMsgPro(this.$refs.formOwnRow);case 3:a=e.sent.valida,a&&(t.confirmLoading=!0,this.model.itemText=(this.model.itemText||"").trim(),this.model.itemValue=(this.model.itemValue||"").trim(),this.model.description=(this.model.description||"").trim(),this.model.status=this.status,r=this.model.id?Object(o["v"])(this.model):Object(o["b"])(this.model),r.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1}}},f=u,m=(a("f71f"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"d99b1514",null);t["default"]=h.exports},1907:function(e,t,a){"use strict";a("a6d5")},"1a93":function(e,t,a){},"1ad1":function(e,t,a){"use strict";a("bea0")},"1be7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[this.departId?[a("a-spin",{staticStyle:{height:"calc(100% - 18px)"},attrs:{spinning:e.loading}},[a("a-form",[a("a-form-item",{attrs:{label:"所拥有的权限"}},[a("a-tree",{staticStyle:{height:"100%","overflow-x":"auto"},attrs:{checkable:"",checkedKeys:e.checkedKeys,treeData:e.treeData,selectedKeys:e.selectedKeys,expandedKeys:e.expandedKeysss,checkStrictly:e.checkStrictly},on:{check:e.onCheck,expand:e.onExpand,select:e.onTreeNodeSelect},scopedSlots:e._u([{key:"hasDatarule",fn:function(t){var r=t.slotTitle,n=t.ruleFlag,o=t.component;return a("span",{},["dashboard/ThirdPartyHome"===o&&"首页"===r?[e._v("\n                第三方首页\n              ")]:[e._v("\n                "+e._s(r)+"\n              ")],n?a("a-icon",{staticStyle:{"margin-left":"5px",color:"red"},attrs:{type:"align-left"}}):e._e()],2)}}],null,!1,1886589732)})],1)],1)],1),a("div",{staticClass:"anty-form-btn"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),a("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")]),a("a-menu-item",{key:"7",on:{click:e.openCheckStrictly}},[e._v("打开父子关联")]),a("a-menu-item",{key:"8",on:{click:e.closeCheckStrictly}},[e._v("关闭父子关联")])],1),a("a-button",[e._v(" 树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-button",{staticStyle:{float:"right"},attrs:{type:"primary",htmlType:"button",icon:"form"},on:{click:e.handleSubmit}},[e._v("保存")])],1)]:a("a-card",{staticStyle:{height:"200px"},attrs:{bordered:!1}},[a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[e._v(" 请先选择一个机构! ")])])],1),a("depart-datarule-modal",{ref:"datarule"})],2)},n=[],o=a("4ec3"),i=a("6675");function s(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function l(e){return f(e)||u(e)||d(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return m(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"DepartAuthModal",components:{DepartDataruleModal:i["default"]},data:function(){return{departId:"",treeData:[],defaultCheckedKeys:[],checkedKeys:[],halfCheckedKeys:[],expandedKeysss:[],allTreeKeys:[],autoExpandParent:!0,checkStrictly:!1,title:"部门权限配置",visible:!1,loading:!1,selectedKeys:[]}},methods:{onTreeNodeSelect:function(e){e&&e.length>0&&(this.selectedKeys=e),this.$refs.datarule.show(this.selectedKeys[0],this.departId)},onCheck:function(e,t){var a=t.halfCheckedKeys;this.checkedKeys=e,this.halfCheckedKeys=a||[]},show:function(e){this.departId=e,this.loadData()},close:function(){this.reset(),this.$emit("close"),this.visible=!1},onExpand:function(e){this.expandedKeysss=e,this.autoExpandParent=!1},reset:function(){this.expandedKeysss=[],this.checkStrictly?this.checkedKeys={checked:[],halfChecked:[]}:(this.checkedKeys=[],this.halfCheckedKeys=[]),this.defaultCheckedKeys=[],this.loading=!1},expandAll:function(){this.expandedKeysss=this.allTreeKeys},closeAll:function(){this.expandedKeysss=[]},checkALL:function(){this.checkStrictly?this.$set(this,"checkedKeys",{checked:this.allTreeKeys,halfChecked:[]}):this.$set(this,"checkedKeys",this.allTreeKeys)},openCheckStrictly:function(){this.checkStrictly=!1,this.loadData()},closeCheckStrictly:function(){this.checkStrictly=!0,this.loadData()},cancelCheckALL:function(){this.checkStrictly?this.$set(this,"checkedKeys",{checked:[],halfChecked:[]}):(this.$set(this,"checkedKeys",[]),this.$set(this,"halfCheckedKeys",[]))},handleCancel:function(){this.close()},handleSubmit:function(){var e,t=this;t.departId||this.$message.warning("请点击选择一个部门!"),e=this.checkStrictly?t.checkedKeys.checked:[].concat(l(t.checkedKeys),l(t.halfCheckedKeys));var a=e.join(","),r={departId:t.departId,permissionIds:a,lastpermissionIds:t.defaultCheckedKeys.join(",")};t.loading=!0,Object(o["cb"])(r).then((function(e){e.success?(t.$message.success(e.message),t.loading=!1,t.loadData()):(t.$message.error(e.message),t.loading=!1)}))},convertTreeListToKeyLeafPairs:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.key,i=n.isLeaf,l=n.children;a.push({key:o,isLeaf:i}),l&&l.length>0&&this.convertTreeListToKeyLeafPairs(l,a)}}catch(c){r.e(c)}finally{r.f()}return a},emptyCurrForm:function(){this.form.resetFields()},loadData:function(){var e=this;this.loading=!0,Object(o["Y"])().then((function(t){e.treeData=t.result.treeList,e.allTreeKeys=t.result.ids;var a=e.convertTreeListToKeyLeafPairs(e.treeData);Object(o["N"])({departId:e.departId}).then((function(t){var r=l(t.result).filter((function(e){var t=a.filter((function(t){return t.key===e}))[0];return t&&t.isLeaf})),n=l(t.result).filter((function(e){var t=a.filter((function(t){return t.key===e}))[0];return t&&!t.isLeaf}));e.defaultCheckedKeys=[].concat(l(n),l(r)),e.checkStrictly?(e.halfCheckedKeys=[],e.checkedKeys={checked:[].concat(l(r),l(n)),halfChecked:[]}):(e.halfCheckedKeys=l(n),e.checkedKeys=l(r)),e.expandedKeysss=e.allTreeKeys,e.loading=!1}))}))}}},p=h,v=(a("c229"),a("2877")),b=Object(v["a"])(p,r,n,!1,null,"10455674",null);t["default"]=b.exports},"1c2c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:12}}},[a("a-form-item",{attrs:{label:"数据源名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbName",{rules:[{required:!0,message:"请填写数据源名称！"}]}],expression:"['dbName', { rules: [{ required: true, message: '请填写数据源名称！' }] }]"}]})],1),a("a-form-item",{attrs:{label:"连接用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbUser",{rules:[{required:!0,message:"请填写连接用户名！"}]}],expression:"['dbUser', { rules: [{ required: true, message: '请填写连接用户名！' }] }]"}]})],1),a("a-form-item",{attrs:{label:"连接密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbPassword",{rules:[{required:!0,message:"请填写连接密码！"}]}],expression:"['dbPassword', { rules: [{ required: true, message: '请填写连接密码！' }] }]"}]})],1),a("a-form-item",{attrs:{label:"驱动名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbDriver",{rules:[{required:!0,message:"请填写驱动名称！"}]}],expression:"['dbDriver', { rules: [{ required: true, message: '请填写驱动名称！' }] }]"}]})],1),a("a-form-item",{attrs:{label:"连接URL"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbUrl",{rules:[{required:!0,message:"请填写连接URL！"}]}],expression:"['dbUrl', { rules: [{ required: true, message: '请填写连接URL！' }] }]"}]})],1)],1),1==e.spinning?a("div",{staticClass:"load",staticStyle:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}},[a("a-spin",{attrs:{spinning:e.spinning,tip:"录入中..."}})],1):e._e(),a("a-button",{on:{click:e.testConnct}},[e._v("测试连接")])],1)},n=[],o=a("0fea"),i={name:"Ureport2SetDBSourceModal",data:function(){return{title:"添加数据源",visible:!1,spinning:!1,form:this.$form.createForm(this),url:{updateUreport2DBSource:"/ureport2/ureport2/updateUreport2DBSource",testConnnction:"/ureport2/ureport2/testConnnction"}}},methods:{handleOk:function(){var e=this;this.form.validateFields((function(t,a){e.spinning=!0;var r={};r.dbName=a.dbName,r.dbUser=a.dbUser,r.dbPassword=a.dbPassword,r.dbDriver=a.dbDriver,r.dbUrl=a.dbUrl,Object(o["e"])(e.url.updateUreport2DBSource,r).then((function(t){t.success&&(e.spinning=!1,e.$message.success("修改成功"),e.visible=!1)}))}))},edit:function(e){this.visible=!0},handleCancel:function(){this.visible=!1},testConnct:function(){var e=this;this.form.validateFields((function(t,a){var r={};r.dbName=a.dbName,r.dbUser=a.dbUser,r.dbPassword=a.dbPassword,r.dbDriver=a.dbDriver,r.dbUrl=a.dbUrl,Object(o["e"])(e.url.testConnnction,r).then((function(t){t.result?e.$message.success("连接成功"):e.$message.success("连接失败:"+t.error)}))}))}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"fbea3d14",null);t["default"]=c.exports},"1d31":function(e,t,a){"use strict";a.r(t),a.d(t,"UreportMixins",(function(){return o}));var r=a("0fea"),n=a("2b0e"),o={data:function(){return{queryObj:[{label:"关联的动态表单",value:"formId",type:"select",options:[],bindAttr:{showSearch:!0,filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},{label:"报表标识",value:"formType",type:"input",queryType:"like"}],columns:[{title:"动态报表",align:"center",field:"formId_dictText",type:"input"},{title:"标识",align:"center",field:"formType",type:"input",slot:!0},{title:"主管单位",align:"center",field:"sysOrgCode",type:"input",slot:!0},{title:"操作",field:"action",align:"center",width:160,slot:!0,fixed:"right"}]}},methods:{testShowReport:function(){var e=this,t=this.selectedRows.length,a=this.selectedRows[0];return t<=0?(this.$message.warn("请选择一条数据！"),!1):t>1?(this.$message.warn("只能选择一条数据！"),!1):void Object(r["e"])("/ureport2/ureport2Config/queryReport",{flag:"",formType:a.formType}).then((function(t){if(t.success&&t.result&&t.result.formTypeName){var r=t.result.formTypeName,o=n["default"].ls.get("SOURCE_NAME");o&&""!==o||(o="master");var i=_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/preview?_u="+o+"db:"+r+"&id="+a.id+"&_t="+t.result.reportHeaderButton+"&_n=123";window.open(i)}else e.$message.warn("表单未配置")}))},init:function(){var e=function(e){return e.length>0&&e.map((function(e){e.label=e.rname,e.value=e.id})),e};this.queryObj.map((function(t){"formId"===t.value&&Object(r["e"])("/ureport2/ureport2/listAll").then((function(a){a.success&&(t.options=e(a.result))}))}))},handleAddModel:function(){window.open(_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/designer")},handleModel:function(e){var t=n["default"].ls.get("SOURCE_NAME");t&&""!==t||(t="master"),window.open(_baseConfig["production"].VUE_APP_API_BASE_URL+"/ureport/designer?_u="+t+"db:"+e.formId_dictText)},updateUreport2DBSourse:function(){this.$refs.updateSource.edit(),this.$refs.updateSource.title="批量修改数据源",this.$refs.updateSource.disableSubmit=!1}}}},"1eb7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{title:"选项配置",width:"600","show-footer":""},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:e.saveOptions}},[e._v("保存")])]},proxy:!0}]),model:{value:e.setOptionVisible,callback:function(t){e.setOptionVisible=t},expression:"setOptionVisible"}},[a("vxe-grid",{ref:"optionGrid",attrs:{"edit-config":{trigger:"manual",mode:"row"},"auto-resize":"",columns:e.setOptionColumn,data:e.setOptionData,"edit-rules":e.setOptionRules},scopedSlots:e._u([{key:"action",fn:function(t){t.row;var r=t.rowIndex;return[a("div",{staticStyle:{display:"flex","column-gap":"4px","align-items":"center","justify-content":"center"}},[a("a",{on:{click:e.addOption}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 添加 ")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticStyle:{color:"red"},on:{click:function(t){return e.deleteOption(r)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除 ")],1)],1)]}}])})],1)],1)},n=[],o=a("0fea");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return(t=d(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){var t=u(e,"string");return"symbol"==i(t)?t:t+""}function u(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var f={name:"SetOptionModal",data:function(){return{setOptionVisible:!1,setOptionColumn:[{title:"选项值",field:"value",editRender:{type:"visible",name:"$input",immediate:!0,props:{placeholder:"请输入选项值"}}},{title:"选项名称",field:"label",editRender:{type:"visible",name:"$input",immediate:!0,props:{placeholder:"请输入选项名称"}}},{title:"操作",width:160,align:"center",slots:{default:"action"}}],setOptionData:[],setOptionRules:{value:[{required:!0,message:"请输入选项值！"}],label:[{required:!0,message:"请输入选项名称！"}]},fieldRow:null,url:{add:"/sys/sysCustomComponent/add"}}},methods:{open:function(e){this.setOptionData=[],this.setOptionVisible=!0;try{if(this.fieldRow=l({},e),this.setOptionData=JSON.parse(e.selectInfo)||[],this.setOptionData.length>0)return}catch(t){}this.addOption()},addOption:function(){this.setOptionData.push({value:"",label:""})},deleteOption:function(e){this.setOptionData.splice(e,1)},saveOptions:function(){var e=this;this.$refs.optionGrid.fullValidate().then((function(t){try{e.fieldRow.selectInfo=JSON.stringify(e.setOptionData)}catch(a){e.fieldRow.selectInfo=JSON.stringify([])}Object(o["j"])(e.url.add,[e.fieldRow]).then((function(t){t&&t.success?(e.setOptionVisible=!1,e.$emit("ok")):e.$message.error(t.message)}))}))}}},m=f,h=a("2877"),p=Object(h["a"])(m,r,n,!1,null,"48abca33",null);t["default"]=p.exports},2285:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"数据规则/按钮权限配置",width:"365",closable:!1,visible:e.visible},on:{close:e.onClose}},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"数据规则"}},[e.dataruleList.length>0?a("a-checkbox-group",{model:{value:e.dataruleChecked,callback:function(t){e.dataruleChecked=t},expression:"dataruleChecked"}},[a("a-row",[e._l(e.dataruleList,(function(t,r){return a("a-col",{key:"dr"+r,attrs:{span:24}},[a("a-checkbox",{attrs:{value:t.id}},[e._v(e._s(t.ruleName))])],1)})),a("a-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"100%","margin-top":"15px"}},[a("a-button",{attrs:{type:"primary",size:"small",icon:"save"},on:{click:e.saveDataruleForRole}},[e._v("点击保存")])],1)])],2)],1):a("div",[a("h3",[e._v("无配置信息!")])])],1)],1)],1)},n=[],o=a("290c"),i=a("da05"),s=a("0fea"),l={name:"RoleDataruleModal",components:{ACol:i["b"],ARow:o["a"]},data:function(){return{functionId:"",roleId:"",visible:!1,tabList:[{key:"1",tab:"数据规则"},{key:"2",tab:"按钮权限"}],activeTabKey:"1",url:{datarule:"/sys/role/datarule"},dataruleList:[],dataruleChecked:[]}},methods:{loadData:function(){var e=this;Object(s["e"])("".concat(this.url.datarule,"/").concat(this.functionId,"/").concat(this.roleId)).then((function(t){if(t.success){e.dataruleList=t.result.datarule;var a=t.result.drChecked;a&&(e.dataruleChecked=a.split(","))}}))},saveDataruleForRole:function(){var e=this;this.dataruleChecked&&0!=this.dataruleChecked.length||this.$message.warning("请注意，现未勾选任何数据权限!");var t={permissionId:this.functionId,roleId:this.roleId,dataRuleIds:this.dataruleChecked.join(",")};Object(s["j"])(this.url.datarule,t).then((function(t){t.success?e.$message.success(t.message):e.$message.error(t.message)}))},show:function(e,t){this.onReset(),this.functionId=e,this.roleId=t,this.visible=!0,this.loadData()},onClose:function(){this.visible=!1,this.onReset()},onTabChange:function(e){this.activeTabKey=e},onReset:function(){this.functionId="",this.roleId="",this.dataruleList=[],this.dataruleChecked=[]}}},c=l,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"50f24976",null);t["default"]=u.exports},"24b9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[a("div",{staticClass:"cardBody"},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:10,sm:12}},[a("a-form-item",{staticStyle:{"margin-left":"8px"}},[a("a-input",{attrs:{placeholder:"请输入机构角色名称"},model:{value:e.queryParam.roleName,callback:function(t){e.$set(e.queryParam,"roleName",t)},expression:"queryParam.roleName"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{staticStyle:{"margin-left":"18px"},attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("div",{staticClass:"table-operator",attrs:{md:24,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建机构角色")]),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),a("div",{ref:"modalContent",staticClass:"tableBox"},[a("a-table",{ref:"table",attrs:{size:"middle",bordered:"",scroll:{y:e.tableHeight+"px"},rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,getCheckboxProps:e.getCheckboxProps}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},["admin"!==r.roleCode?[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("\n              更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{on:{click:function(t){return e.handlePerssion(r)}}},[e._v("授权")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(r.id)}}},[a("a",[e._v("删除")])])],1)],1)],1)]:e._e()],2)}}])})],1)]),a("sys-depart-role-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("dept-role-auth-modal",{ref:"modalDeptRole"})],1)},n=[],o=a("b65a"),i=a("0fea"),s=a("a119"),l=a("dc4b"),c={name:"DeptRoleInfo",components:{DeptRoleAuthModal:l["default"],SysDepartRoleModal:s["default"]},mixins:[o["a"]],data:function(){return{description:"机构角色信息",currentDeptId:"",columns:[{title:"机构角色名称",align:"center",dataIndex:"roleName"},{title:"机构角色编码",align:"center",dataIndex:"roleCode"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:170}],url:{list:"/sys/sysDepartRole/list",delete:"/sys/sysDepartRole/delete",deleteBatch:"/sys/sysDepartRole/deleteBatch"}}},mounted:function(){var e=this;this.resetScreenSize(110),window.addEventListener("resize",(function(){e.resetScreenSize(110)}))},methods:{getCheckboxProps:function(e){return{props:{disabled:"admin"===e.roleCode}}},searchReset:function(){this.queryParam={},this.loadData(1)},loadData:function(e){var t=this;if(this.url.list){1===e&&(this.ipagination.current=1);var a=this.getQueryParams();a.deptId=this.currentDeptId,Object(i["e"])(this.url.list,a).then((function(e){e.success&&e.result&&(t.dataSource=e.result.records,t.ipagination.total=e.result.total)}))}else this.$message.error("请设置url.list属性！")},open:function(e){this.currentDeptId=e.id,this.loadData(1)},clearList:function(){this.currentDeptId="",this.dataSource=[]},hasSelectDept:function(){return""!=this.currentDeptId||(this.$message.error("请选择一个机构！"),!1)},handleEdit:function(e){this.$refs.modalForm.title="编辑",this.$refs.modalForm.departDisabled=!0,this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.edit(e,e.departId)},handleAdd:function(){""==this.currentDeptId?this.$message.error("请选择一个机构！"):(this.$refs.modalForm.departDisabled=!0,this.$refs.modalForm.add(this.currentDeptId),this.$refs.modalForm.title="新增")},handlePerssion:function(e){this.$refs.modalDeptRole.show(e.id,e.departId)}}},d=c,u=(a("e0e1"),a("3e1b"),a("2877")),f=Object(u["a"])(d,r,n,!1,null,"67ef4464",null);t["default"]=f.exports},"24ff":function(e,t,a){},2874:function(e,t,a){},"2a24":function(e,t,a){},"2a70":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",destroyOnClose:!0,wrapClassName:"ant-modal-cust-warp"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:e.formDisabled,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("角色编码")]),a("a-col",{attrs:{span:20,"data-prop":"roleCode"}},[a("a-input",{attrs:{disabled:e.roleDisabled,placeholder:"请输入角色编码"},model:{value:e.model.roleCode,callback:function(t){e.$set(e.model,"roleCode",t)},expression:"model.roleCode"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("角色名称")]),a("a-col",{attrs:{span:20,"data-prop":"roleName"}},[a("a-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.model.roleName,callback:function(t){e.$set(e.model,"roleName",t)},expression:"model.roleName"}})],1),a("a-col",{staticClass:"height-108",attrs:{span:4}},[e._v("描述")]),a("a-col",{staticClass:"height-108",attrs:{span:20,"data-prop":"description"}},[a("a-textarea",{attrs:{rows:4,placeholder:"请输入角色描述"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("a-col",{attrs:{span:4}}),a("a-col",{attrs:{span:20,"data-prop":"customCheckbox"}},[a("a-checkbox",{model:{value:e.model.flag,callback:function(t){e.$set(e.model,"flag",t)},expression:"model.flag"}},[e._v("同步修改工作流中的角色名称")])],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i={name:"RoleModal",data:function(){return{title:"操作",visible:!1,roleDisabled:!1,model:{flag:!0},layout:{labelCol:{span:3},wrapperCol:{span:14}},confirmLoading:!1,validatorRules:{roleName:[{required:!0,message:"请输入角色名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码!"},{min:0,max:64,message:"长度不超过 64 个字符",trigger:"blur"},{validator:this.validateRoleCode}],description:[{min:0,max:126,message:"长度不超过 126 个字符",trigger:"blur"}]}}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{add:function(){this.edit(this.modelDefault)},edit:function(e){this.model=Object.assign({},e),this.visible=!0,this.roleDisabled=!!this.model.id},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e,t=this,a=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;a&&(t.confirmLoading=!0,e=this.model.id?Object(o["z"])(this.model):Object(o["g"])(this.model),e.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})))},handleCancel:function(){this.close()},validateRoleCode:function(e,t,a){if(/[\u4E00-\u9FA5]/g.test(t))a("角色编码不可输入汉字!");else{var r={tableName:"sys_role",fieldName:"role_code",fieldVal:t,dataId:this.model.id};Object(o["s"])(r).then((function(e){e.success?a():a(e.message)}))}}}},s=i,l=(a("bccc"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"32e5024c",null);t["default"]=c.exports},"2c70":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.modalOk,cancel:e.modelCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.rules,model:e.form,formRef:"formRow"}},[e.visible?a("a-row",{ref:"areaForm",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e._v("上级区域")]),a("a-col",{attrs:{span:20}},[a("a-tree-select",{attrs:{treeData:e.treeData,placeholder:"请选择上级区域",allowClear:""},model:{value:e.form.pcode,callback:function(t){e.$set(e.form,"pcode",t)},expression:"form.pcode"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("区域编码")]),a("a-col",{attrs:{span:20,"data-prop":"code"}},[a("a-input",{attrs:{placeholder:"请输入区域编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("区域名称")]),a("a-col",{attrs:{span:20,"data-prop":"name"}},[a("a-input",{attrs:{placeholder:"请输入地区名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("行政级别")]),a("a-col",{attrs:{span:20,"data-prop":"baseType"}},[a("j-dict-select-tag",{attrs:{triggerNode:!0,dictCode:"administrative_level",placeholder:"请选择行政级别"},model:{value:e.form.baseType,callback:function(t){e.$set(e.form,"baseType",t)},expression:"form.baseType"}})],1),a("a-col",{attrs:{span:4}},[e._v("排序")]),a("a-col",{attrs:{span:20,"data-prop":"orderNum"}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入排序"},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1):e._e()],1)],1)],1)},n=[],o=a("0fea"),i=a("4ec3");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};u(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,l){var c=m(e[n],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==s(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=h;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(f(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),u(S,d,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){c(o,r,n,i,s,"next",e)}function s(e){c(o,r,n,i,s,"throw",e)}i(void 0)}))}}var u={name:"ProvincialUrbanAreasModal",props:{treeData:{type:Array}},data:function(){return{labelCol:{span:6},wrapperCol:{span:18},title:"新增",visible:!1,confirmLoading:!1,form:{pcode:"",code:"",name:"",baseType:""},rules:{name:[{required:!0,message:"请输入地区名称",trigger:"change"}],code:[{validator:this.validateTemplateCode,type:"Promise"}],baseType:[{required:!0,message:"请选择行政级别",trigger:"change"}]},url:{add:"/basics/sysZone/add",check:"/sys/duplicate/check"}}},methods:{validateTemplateCode:function(e,t){return new Promise((function(e){if(""!==t&&t){var a=/\b\d{12}\b/;a.test(t)||e("地区编码格式不正确，由省/省+市/省+市+县共十二位数字组成,不足十二位补零");var r={tableName:"sys_zone",fieldName:"code",fieldVal:t};return Object(i["s"])(r).then((function(t){t.success?e():e("区划编码重复")}))}e("请输入地区编码")}))},add:function(e){this.form.pcode=e,this.visible=!0},modalOk:function(){var e=d(l().mark((function e(){var t,a=this;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validaRowMsgPro(this.$refs.areaForm);case 2:if(t=e.sent,!t.valida){e.next=7;break}Object(o["j"])(this.url.add,this.form).then((function(e){e.success&&(a.modelCancel(),a.$emit("addOk"))})).catch((function(e){})),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),modelCancel:function(){this.form={},this.visible=!1}}},f=u,m=(a("1ad1"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"5d845855",null);t["default"]=h.exports},3205:function(e,t,a){"use strict";a("3f2e")},"326b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"rName"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rName",{}],expression:"['rName', {}]"}],attrs:{placeholder:"请输入rName"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"rData"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rData",{}],expression:"['rData', {}]"}],attrs:{placeholder:"请输入rData"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"delFlag"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["delFlag",{}],expression:"['delFlag', {}]"}],attrs:{placeholder:"请输入delFlag"}})],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("88bc"),s=a.n(i),l=(a("c1df"),{name:"Ureport2Modal",data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{},url:{add:"/ureport2/ureport2/add",edit:"/ureport2/ureport2/edit"}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(s()(t.model,"rName","rData","delFlag"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var n="",i="";e.model.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post");var s=Object.assign(e.model,r);Object(o["i"])(n,s,i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()}}}),c=l,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"88b76a3e",null);t["default"]=u.exports},3668:function(e,t,a){"use strict";a("bebe")},"36c1":function(e,t,a){},3864:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{height:"100%"},attrs:{loading:e.cardLoading,bordered:!1}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-input-search",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{placeholder:"输入机构名称查询...",enterButton:""},on:{search:e.handleSearch}}),a("a-tree",{attrs:{showLine:"",checkStrictly:"",expandedKeys:e.expandedKeys,selectedKeys:e.selectedKeys,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeDataSource},on:{"update:expandedKeys":function(t){e.expandedKeys=t},"update:expanded-keys":function(t){e.expandedKeys=t},select:e.handleTreeSelect}})],1)],1)},n=[],o=a("4ec3"),i={name:"AddressListLeft",props:["value"],data:function(){return{cardLoading:!0,loading:!1,treeDataSource:[],selectedKeys:[],expandedKeys:[]}},created:function(){this.queryTreeData()},methods:{queryTreeData:function(e){this.commonRequestThen(Object(o["O"])({departName:e||void 0}))},handleSearch:function(e){e?this.commonRequestThen(Object(o["fb"])({keyWord:e})):this.queryTreeData()},handleTreeSelect:function(e,t){if(e.length>0&&this.selectedKeys[0]!==e[0]){this.selectedKeys=[e[0]];var a=t.node.dataRef.orgCode;this.emitInput(a)}},emitInput:function(e){this.$emit("input",e)},commonRequestThen:function(e){var t=this;this.loading=!0,e.then((function(e){e.success?t.treeDataSource=e.result:t.$message.warn(e.message)})).finally((function(){t.loading=!1,t.cardLoading=!1}))}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"71270e97",null);t["default"]=c.exports},"399c":function(e,t,a){"use strict";a("704d")},"3e1b":function(e,t,a){"use strict";a("5815")},"3f2e":function(e,t,a){},"418f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{"padding-bottom":"53px"},attrs:{maskClosable:!0,width:e.drawerWidth,placement:"right",closable:!0,destroyOnClose:!0,visible:e.visible,"body-style":{height:"calc(100vh - 108px)",overflow:"auto"}},on:{close:e.handleCancel}},[a("template",{slot:"title"},[a("div",{staticStyle:{width:"100%"}},[a("span",[e._v(e._s(e.title))]),a("span",{staticStyle:{display:"inline-block",width:"calc(100% - 51px)","padding-right":"10px","text-align":"right"}},[a("a-button",{staticStyle:{height:"20px",width:"20px",border:"0"},attrs:{icon:"appstore"}})],1)])]),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:e.disableSubmit,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("用户账号")]),a("a-col",{attrs:{span:20,"data-prop":"username"}},[a("a-input",{attrs:{autocomplete:"off",placeholder:"请输入用户账号",readOnly:!!e.model.id},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),e.isShowToken?[a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("令牌号")]),a("a-col",{attrs:{span:20,"data-prop":"clientId"}},[a("a-select",{staticClass:"width100",attrs:{placeholder:"请输入令牌号",allowClear:!0},model:{value:e.model.clientId,callback:function(t){e.$set(e.model,"clientId",t)},expression:"model.clientId"}},e._l(e.tokenNoList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.tokenNo}},[e._v("\n                "+e._s(t.tokenNo)+"\n              ")])})),1)],1)]:e._e(),e.isShowToken?e._e():[e.model.id?e._e():a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("登录密码")]),e.model.id?e._e():a("a-col",{attrs:{span:20,"data-prop":"password"}},[a("a-input",{attrs:{autocomplete:"new-password",type:"password",placeholder:"请输入登录密码"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),e.model.id?e._e():a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("确认密码")]),e.model.id?e._e():a("a-col",{attrs:{span:20,"data-prop":"confirmpassword"}},[a("a-input",{attrs:{type:"password",placeholder:"请重新输入登录密码"},on:{blur:e.handleConfirmBlur},model:{value:e.model.confirmpassword,callback:function(t){e.$set(e.model,"confirmpassword",t)},expression:"model.confirmpassword"}})],1)],a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("用户姓名")]),a("a-col",{attrs:{span:20,"data-prop":"realname"}},[a("a-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.model.realname,callback:function(t){e.$set(e.model,"realname",t)},expression:"model.realname"}})],1),a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("联系电话")]),a("a-col",{attrs:{span:20,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),a("a-col",{attrs:{span:4}},[e._v("邮箱")]),a("a-col",{attrs:{span:20,"data-prop":"email"}},[a("a-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),e.roleDisabled||e.departDisabled?e._e():a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("角色分配")]),e.roleDisabled||e.departDisabled?e._e():a("a-col",{attrs:{span:20,"data-prop":"selectedroles"}},[a("j-multi-select-tag",{attrs:{init:"",disabled:e.disableSubmit,options:e.rolesOptions,placeholder:"请选择角色"},model:{value:e.model.selectedroles,callback:function(t){e.$set(e.model,"selectedroles",t)},expression:"model.selectedroles"}})],1),e.departDisabled?a("a-col",{attrs:{span:4}},[e._v("机构角色")]):e._e(),e.departDisabled?a("a-col",{attrs:{span:20}},[a("j-multi-select-tag",{attrs:{init:!1,options:e.departRolesOptions,placeholder:"请选择机构角色"},model:{value:e.model.selectedDeptRoles,callback:function(t){e.$set(e.model,"selectedDeptRoles",t)},expression:"model.selectedDeptRoles"}})],1):e._e(),e.departDisabled?e._e():a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("机构分配")]),e.departDisabled?e._e():a("a-col",{attrs:{span:20,"data-prop":"selecteddeparts"}},[a("j-select-depart",{staticClass:"width100",attrs:{multi:!1,backDepart:!0,treeOpera:!0},on:{back:e.backDepartInfo},model:{value:e.model.selecteddeparts,callback:function(t){e.$set(e.model,"selecteddeparts",t)},expression:"model.selecteddeparts"}})],1),e.departIdShow?a("a-col",{attrs:{span:4}},[e._v("负责部门")]):e._e(),e.departIdShow?a("a-col",{attrs:{span:20}},[a("j-multi-select-tag",{attrs:{disabled:e.disableSubmit,options:e.nextDepartOptions,placeholder:"请选择负责部门"},model:{value:e.model.departIds,callback:function(t){e.$set(e.model,"departIds",t)},expression:"model.departIds"}})],1):e._e(),a("a-col",{staticClass:"height-120",attrs:{span:4}},[e._v("头像")]),a("a-col",{staticClass:"height-120 flexAlignCenter",attrs:{span:20}},[a("j-image-upload",{staticClass:"avatar-uploader",attrs:{text:"上传"},model:{value:e.model.avatar,callback:function(t){e.$set(e.model,"avatar",t)},expression:"model.avatar"}})],1)],2)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.disableSubmit,expression:"!disableSubmit"}],staticClass:"drawer-bootom-button"},[a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.handleCancel}},[a("a-button",{staticStyle:{"margin-right":"0.8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],2)},n=[],o=a("c1df"),i=a.n(o),s=a("2b0e"),l=a("9fb0"),c=a("0fea"),d=a("4ec3"),u=a("c82c"),f=a("d8a5"),m=a("ca00");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=v(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function v(e,t){if(e){if("string"==typeof e)return b(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */y=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function d(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",p="executing",v="completed",b={};function g(){}function w(){}function C(){}var k={};c(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,s){var l=u(e[n],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==h(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=f;return function(o,i){if(n===p)throw Error("Generator is already running");if(n===v){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=u(t,a,r);if("normal"===c.type){if(n=r.done?v:m,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=v,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=u(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,b;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,b):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=c(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(d(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),c(S,l,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function g(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){g(o,r,n,i,s,"next",e)}function s(e){g(o,r,n,i,s,"throw",e)}i(void 0)}))}}var C={name:"UserModal",components:{},props:{departId:{type:String,default:""}},data:function(){return{departDisabled:!1,roleDisabled:!1,modalWidth:800,drawerWidth:700,modaltoggleFlag:!0,confirmDirty:!1,userId:"",disableSubmit:!1,dateFormat:"YYYY-MM-DD",departIdShow:!1,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},uploadLoading:!1,confirmLoading:!1,headers:{},url:{fileUpload:window._CONFIG["domianURL"]+"/sys/common/upload",userWithDepart:"/sys/user/userDepartList",userId:"/sys/user/generateUserId",syncUserByUserName:"/act/process/extActProcess/doSyncUserByUserName",tenantList:"/tenant/sysTenantInfo/tenantList",getTokenList:"/sys/otpStorage/getTokenList",getIsCorp:"/sys/sysDepart/checkDepartIsCorp"},tenantsOptions:[],rolesOptions:[],nextDepartOptions:[],token_login_corp:"",tokenNoList:[],corpCode:"",isShowToken:!1,departRolesOptions:[],isCheckUserName:!0}},created:function(){var e=s["default"].ls.get(l["a"]);this.headers={"X-Access-Token":e},this.initRoleList(),this.initTenantList()},computed:{uploadAction:function(){return this.url.fileUpload},validatorRules:function(){var e={username:[{required:!0,message:"请输入用户账号!"},{validator:this.validateUsername}],realname:[{required:!0,message:"请输入用户名称!"}],phone:[{validator:this.validatePhone,type:"Promise"}],email:[{validator:this.validateEmail}],roles:{},telephone:[{validator:this.validateTelephone,type:"Promise"}],selectedroles:[{required:!0,message:"请选择角色!"}],selecteddeparts:[{required:!0,message:"请选择机构!"}]};return this.isShowToken?e.clientId=[{required:!0,message:"请选择令牌!"}]:(e.password=[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{8,}$/,message:"密码至少由8位的数字、大写或小写的字母及特殊字符组成!"},{validator:this.validateToNextPassword,trigger:"change"}],e.confirmpassword=[{required:!0,message:"请重新输入登录密码!"},{validator:this.compareToFirstPassword}]),e}},methods:{getTokenNo:function(){var e=this;Object(c["e"])(this.url.getTokenList,{corpCode:this.corpCode,state:"0"}).then((function(t){t.success&&(e.tokenNoList=t.result)}))},add:function(){this.refresh(),this.edit({activitiSync:"1",userIdentity:1,relTenantIdArr:[]})},getIsShowToken:function(){var e=w(y().mark((function e(t){var a,r,n=this;return y().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isShowToken=!1,e.next=3,Object(c["e"])(this.url.getIsCorp,{departId:t});case 3:return a=e.sent,r=a.success,e.next=7,Object(f["e"])("token_login_corp").then((function(e){(r||"1"!==e&&"3"!==e)&&(!r||"1"!==e&&"2"!==e)||(n.getTokenNo(),n.isShowToken=!0)}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),edit:function(e){var t=this;this.departRolesOptions=[],this.corpCode&&0!==this.corpCode.length||(this.corpCode=e.orgCode),this.departDisabled?Object(c["e"])("/sys/sysDepartRole/getRoleListByOrgCode",{orgCode:this.corpCode}).then((function(e){e.success&&(t.departRolesOptions=e.result.map((function(e){return{label:e.roleName,value:e.id}})))})).then((function(){t.editInfo(e)})):this.editInfo(e)},editInfo:function(e){this.getIsShowToken(this.departId);var t=this;t.visible=!0,this.resetScreenSize(),t.userId=e.id,t.model=Object.assign({},{selectedroles:"",selecteddeparts:""},e),t.$set(t.model,"relTenantIdArr",t.model.relTenantIds?t.model.relTenantIds.split(","):[]),this.departIdShow=2===this.model.userIdentity,e.hasOwnProperty("id")&&(this.getUserDepartRoles(e.id),t.getUserRoles(e.id),t.getUserDeparts(e.id))},getUserDepartRoles:function(e){var t=this;this.departDisabled&&Object(c["e"])("/sys/sysDepartRole/queryUserRole",{userid:e}).then((function(e){e.success&&(t.$set(t.model,"selectedDeptRoles",e.result.join(",")),t.$forceUpdate())}))},isDisabledAuth:function(e){return Object(u["a"])(e)},resetScreenSize:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:900},initTenantList:function(){var e=this;Object(c["e"])(this.url.tenantList).then((function(t){t.success&&(e.tenantsOptions=t.result)}))},initRoleList:function(){var e=this;Object(d["bb"])().then((function(t){t.success&&(e.rolesOptions=t.result.map((function(e){return{label:e.roleName,value:e.id}})))}))},getUserRoles:function(e){var t=this;Object(d["ab"])({userid:e}).then((function(e){e.success&&(t.model.selectedroles=e.result.join(","))}))},getUserDeparts:function(e){var t=this;Object(c["e"])(t.url.userWithDepart,{userId:e}).then((function(e){if(e.success){var a,r=[],n=[],o=p(e.result);try{for(o.s();!(a=o.n()).done;){var i=a.value;n.push(i.key),r.push({value:i.key,label:i.title})}}catch(s){o.e(s)}finally{o.f()}t.model.selecteddeparts=n.join(","),t.nextDepartOptions=r}}))},backDepartInfo:function(e){this.model.departIds=this.model.selecteddeparts,this.nextDepartOptions=e.map((function(e){return{label:e.text,value:e.value+""}}))},refresh:function(){this.userId="",this.nextDepartOptions=[],this.departIdShow=!1},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1,this.nextDepartOptions=[],this.departRolesOptions=[],this.departIdShow=!1,this.corpCode=[],this.$refs.formRow.clearValidate()},moment:i.a,handleSubmit:function(){var e=w(y().mark((function e(){var t,a,r,n=this;return y().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.formRow.validaRowMsgPro(this.$refs.formOwnRow);case 3:if(a=e.sent.valida,a){t.confirmLoading=!0,2!==this.model.userIdentity&&(this.model.departIds=""),!this.model.password&&this.isShowToken&&(this.model.password=Object(m["r"])(8));try{this.model.relTenantIds=this.model.relTenantIdArr.join(",")}catch(o){this.model.relTenantIds=""}this.model.id?r=Object(d["A"])(this.model):(this.model.id=this.userId,r=Object(d["h"])(this.model)),r.then((function(e){if(e.success){t.$message.success(e.message),t.$emit("ok");var a={selectedroles:n.model.selectedroles,userId:e.result.id};Object(c["j"])("/handle/handeUserToTask",a).catch((function(){}))}else t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},validateToNextPassword:function(e,t,a){var r=this.model.confirmpassword;t&&r&&t!==r&&a("两次输入的密码不一样！"),t&&this.confirmDirty&&this.$refs.formRow.clearValidate(["confirmpassword"]),a()},compareToFirstPassword:function(e,t,a){t&&t!==this.model.password?a("两次输入的密码不一样！"):a()},validatePhone:function(e,t){return new Promise((function(e){t?Object(c["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){t.success?e():e(t.result)})):e("请输入联系电话!")}))},validateTelephone:function(e,t,a){if(t)if(new RegExp(/^0\d{2,3}-[1-9]\d{6,7}$/).test(t)){var r={tableName:"sys_user",fieldName:"telephone",fieldVal:t,dataId:this.userId};Object(d["s"])(r).then((function(e){e.success?a():a("座机号已存在!")}))}else a("请输入正确格式的座机号码!");else a()},validateEmail:function(e,t,a){if(t)if(new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)){var r={tableName:"sys_user",fieldName:"email",fieldVal:t,dataId:this.userId};Object(d["s"])(r).then((function(e){e.success?a():a("邮箱已存在!")}))}else a("请输入正确格式的邮箱!");else a()},validateUsername:function(e,t,a){if(this.isCheckUserName){var r={tableName:"sys_user",fieldName:"username",fieldVal:t,dataId:this.userId};Object(d["s"])(r).then((function(e){e.success?a():a("用户名已存在!")}))}else a()},validateWorkNo:function(e,t,a){var r={tableName:"sys_user",fieldName:"work_no",fieldVal:t,dataId:this.userId};Object(d["s"])(r).then((function(e){e.success?a():a("工号已存在!")}))},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},beforeUpload:function(e){var t=e.type;if(t.indexOf("image")<0)return this.$message.warning("请上传图片"),!1},identityChange:function(e){this.departIdShow=1!==e.target.value}}},k=C,x=(a("6b15"),a("2877")),_=Object(x["a"])(k,r,n,!1,null,"1a7b9b8b",null);t["default"]=_.exports},4647:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:900,visible:e.visible,"destroy-on-close":!0,confirmLoading:e.confirmLoading,okButtonProps:{props:{disabled:e.disabled}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:e.disableSubmit,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("标题")]),a("a-col",{attrs:{span:8,"data-prop":"titile"}},[a("a-input",{attrs:{placeholder:"请输入标题",readOnly:e.disableSubmit},model:{value:e.model.titile,callback:function(t){e.$set(e.model,"titile",t)},expression:"model.titile"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("消息类型")]),a("a-col",{attrs:{span:8,"data-prop":"msgCategory"}},[a("a-select",{attrs:{placeholder:"请选择消息类型",disabled:e.disableSubmit,getPopupContainer:function(e){return e.parentNode}},model:{value:e.model.msgCategory,callback:function(t){e.$set(e.model,"msgCategory",t)},expression:"model.msgCategory"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("通知公告")]),a("a-select-option",{attrs:{value:"2"}},[e._v("系统消息")])],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("开始时间")]),a("a-col",{attrs:{span:8,"data-prop":"startTime"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{getCalendarContainer:function(e){return e.parentNode},placeholder:"请选择开始时间",showTime:"",dateFormat:"YYYY-MM-DD HH:mm:ss"},model:{value:e.model.startTime,callback:function(t){e.$set(e.model,"startTime",t)},expression:"model.startTime"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("结束时间")]),a("a-col",{attrs:{span:8,"data-prop":"endTime"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{getCalendarContainer:function(e){return e.parentNode},placeholder:"请选择结束时间",showTime:"",dateFormat:"YYYY-MM-DD HH:mm:ss"},model:{value:e.model.endTime,callback:function(t){e.$set(e.model,"endTime",t)},expression:"model.endTime"}})],1),a("a-col",{attrs:{span:4}},[e._v("优先级")]),a("a-col",{attrs:{span:8}},[a("a-select",{attrs:{placeholder:"请选择优先级",disabled:e.disableSubmit,getPopupContainer:function(e){return e.parentNode}},model:{value:e.model.priority,callback:function(t){e.$set(e.model,"priority",t)},expression:"model.priority"}},[a("a-select-option",{attrs:{value:"L"}},[e._v("低")]),a("a-select-option",{attrs:{value:"M"}},[e._v("中")]),a("a-select-option",{attrs:{value:"H"}},[e._v("高")])],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("通告类型")]),a("a-col",{attrs:{span:8,"data-prop":"msgType"}},[a("a-select",{attrs:{placeholder:"请选择通告类型",disabled:e.disableSubmit,getPopupContainer:function(e){return e.parentNode}},on:{change:e.chooseMsgType},model:{value:e.model.msgType,callback:function(t){e.$set(e.model,"msgType",t)},expression:"model.msgType"}},[a("a-select-option",{attrs:{value:"USER"}},[e._v("指定用户")]),a("a-select-option",{attrs:{value:"ALL"}},[e._v("全体用户")])],1)],1),e.userType?a("a-col",{attrs:{span:4}},[e._v("指定用户")]):e._e(),e.userType?a("a-col",{attrs:{span:8}},[a("a-select",{attrs:{mode:"multiple",placeholder:"请选择用户",labelInValue:!0},on:{dropdownVisibleChange:e.selectUserIds,change:e.handleChange},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1):e._e(),e.userType?a("a-col",{attrs:{span:4}}):e._e(),e.userType?a("a-col",{attrs:{span:8}}):e._e(),a("div",{staticClass:"jEditorRow houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("摘要")]),a("a-col",{attrs:{span:20,"data-prop":"msgAbstract"}},[a("a-textarea",{attrs:{rows:4,placeholder:"请输入摘要"},model:{value:e.model.msgAbstract,callback:function(t){e.$set(e.model,"msgAbstract",t)},expression:"model.msgAbstract"}})],1)],1),a("div",{staticClass:"jEditorRow houseInfo "},[a("a-col",{attrs:{span:4}},[e._v("内容")]),a("a-col",{attrs:{span:20}},[a("j-editor",{model:{value:e.model.msgContent,callback:function(t){e.$set(e.model,"msgContent",t)},expression:"model.msgContent"}})],1)],1)],1)],1)],1),a("select-user-list-modal",{ref:"UserListModal",on:{choseUser:e.choseUser}})],1)},n=[],o=a("0fea"),i=a("2dab"),s=a("a061"),l=a("ed2a"),c=a("c1df"),d=a.n(c);function u(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var h={components:{JEditor:s["default"],JDate:i["default"],SelectUserListModal:l["default"]},name:"SysAnnouncementModal",data:function(){return{title:"操作",visible:!1,disableSubmit:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}},labelColX1:{xs:{span:24},sm:{span:3}},wrapperColX1:{xs:{span:24},sm:{span:21}},confirmLoading:!1,validatorRules:{titile:[{required:!0,message:"请输入标题!"}],msgCategory:[{required:!0,message:"请选择消息类型!"}],msgType:[{required:!0,message:"请选择通告对象类型!"}],endTime:[{required:!0,message:"请选择结束时间!"},{validator:this.endTimeValidate}],startTime:[{required:!0,message:"请选择开始时间!"},{validator:this.startTimeValidate}],msgAbstract:[{required:!0,message:"请输入摘要!"}]},url:{queryByIds:"/sys/user/queryByIds",add:"/sys/annountCement/add",edit:"/sys/annountCement/edit"},userType:!1,userIds:[],selectedUser:[],disabled:!1,msgContent:"",userList:[]}},methods:{add:function(){this.edit({})},edit:function(e){this.model={},this.disable=!1,this.visible=!0,this.getUser(e)},getUser:function(e){var t=this;this.model=Object.assign({},e),e&&"USER"===e.msgType&&(this.userType=!0,this.userIds=e.userIds,Object(o["e"])(this.url.queryByIds,{userIds:this.userIds}).then((function(e){if(e.success){var a,r=[],n=u(e.result);try{for(n.s();!(a=n.n()).done;){var o=a.value,i={};i.label=o.realname,i.key=o.id,r.push(i)}}catch(s){n.e(s)}finally{n.f()}t.selectedUser=r,t.$refs.UserListModal.edit(e.result,t.userIds)}})))},close:function(){this.$emit("close"),this.selectedUser=[],this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this;if(!this.userType||null!=this.userIds&&this.userIds.length>0){var t=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;if(t){e.confirmLoading=!0;var a="",r="";this.model.id?(a+=this.url.edit,r="put"):(a+=this.url.add,r="post"),this.userType&&(this.model.userIds=this.userIds),Object(o["i"])(a,this.model,r).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.resetUser()):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))}}else this.$message.warning("指定用户不能为空！")},handleCancel:function(){this.visible=!1,this.$emit("close"),this.$refs.form.resetFields(),this.resetUser()},resetUser:function(){this.userType=!1,this.userIds=[],this.selectedUser=[],this.disabled=!1,this.$refs.UserListModal.edit(null,null)},selectUserIds:function(){this.$refs.UserListModal.add(this.selectedUser,this.userIds)},chooseMsgType:function(e){"USER"==e?this.userType=!0:(this.userType=!1,this.selectedUser=[],this.userIds=[])},choseUser:function(e){this.selectedUser=[],this.userIds=[];var t,a=u(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,n={};n.label=r.realname,n.key=r.id,this.selectedUser.push(n),this.userIds+=r.id+","}}catch(o){a.e(o)}finally{a.f()}},startTimeValidate:function(e,t,a){var r=this.model.endTime;t&&r?d()(t).isBefore(r)?a():a("开始时间需小于结束时间"):a()},endTimeValidate:function(e,t,a){var r=this.model.startTime;t&&r?d()(r).isBefore(t)?a():a("结束时间需大于开始时间"):a()},handleChange:function(e){if(e){this.userIds=[];var t,a=[],r=u(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,o={};o.id=n.key,o.realname=n.label,this.userIds+=n.key+",",a.push(o)}}catch(i){r.e(i)}finally{r.f()}}this.$refs.UserListModal.edit(a,this.userIds)}}},p=h,v=(a("5b2e"),a("2877")),b=Object(v["a"])(p,r,n,!1,null,"db002a48",null);t["default"]=b.exports},"46b2":function(e,t,a){},4890:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{attrs:{disabled:e.formDisabled}},[a("a-form-model",{ref:"form",attrs:{slot:"detail",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"租户名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{attrs:{placeholder:"请输入租户名称"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"租户编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"id"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入租户编号",disabled:e.disabledId},model:{value:e.model.id,callback:function(t){e.$set(e.model,"id",t)},expression:"model.id"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择开始时间","show-time":!0,"date-format":"YYYY-MM-DD HH:mm:ss"},model:{value:e.model.beginDate,callback:function(t){e.$set(e.model,"beginDate",t)},expression:"model.beginDate"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择结束时间","show-time":!0,"date-format":"YYYY-MM-DD HH:mm:ss"},model:{value:e.model.endDate,callback:function(t){e.$set(e.model,"endDate",t)},expression:"model.endDate"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{attrs:{name:"tenantStatus"},model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}},[a("a-radio",{attrs:{value:1}},[e._v("正常")]),a("a-radio",{attrs:{value:0}},[e._v("冻结")])],1)],1)],1),e.showFlowSubmitButton?a("a-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("a-button",{on:{click:e.submitForm}},[e._v("提 交")])],1):e._e()],1)],1)],1)],1)},n=[],o=a("0fea"),i=(a("ca00"),a("c681")),s=a("2dab"),l=a("7b16"),c={name:"TenantForm",components:{JFormContainer:i["default"],JDate:s["default"],JDictSelectTag:l["default"]},props:{formData:{type:Object,default:function(){},required:!1},normal:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{model:{status:1},id:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{id:[{required:!0,message:"请输入租户编号!"}]},url:{add:"/sys/tenant/add",edit:"/sys/tenant/edit",queryById:"/sys/tenant/queryById"}}},computed:{formDisabled:function(){return!1===this.normal?!1!==this.formData.disabled:this.disabled},disabledId:function(){return!!this.id},showFlowSubmitButton:function(){return!1===this.normal&&!1===this.formData.disabled}},created:function(){this.showFlowData()},methods:{show:function(e){this.model=e?Object.assign({},e):this.model,this.id=e?e.id:"",this.visible=!0},showFlowData:function(){var e=this;if(!1===this.normal){var t={id:this.formData.dataId};Object(o["e"])(this.url.queryById,t).then((function(t){t.success&&e.edit(t.result)}))}},submitForm:function(){var e=this,t=this;t.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var r="",n="";e.id?(r+=e.url.edit,n="put"):(r+=e.url.add,n="post"),Object(o["i"])(r,e.model,n).then((function(a){a.success?(t.$message.success(a.message),t.$emit("ok")):("该编号已存在!"==a.message&&(e.model.id=""),t.$message.warning(a.message))})).finally((function(){t.confirmLoading=!1}))}))},popupCallback:function(e){this.model=Object.assign(this.model,e)}}},d=c,u=a("2877"),f=Object(u["a"])(d,r,n,!1,null,null,null);t["default"]=f.exports},"49a0":function(e,t,a){},"4d35":function(e,t,a){"use strict";a("06d64")},"53e8":function(e,t,a){},"57b3":function(e,t,a){"use strict";a("af00")},"57ed":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:650,visible:e.visible,confirmLoading:e.confirmLoading,"destroy-on-close":!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:!1,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("字典名称")]),a("a-col",{attrs:{span:20,"data-prop":"dictName"}},[a("a-input",{attrs:{placeholder:"请输入字典名称"},model:{value:e.model.dictName,callback:function(t){e.$set(e.model,"dictName",t)},expression:"model.dictName"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("字典编码")]),a("a-col",{attrs:{span:20,"data-prop":"dictCode"}},[a("a-input",{attrs:{placeholder:"请输入字典编码"},model:{value:e.model.dictCode,callback:function(t){e.$set(e.model,"dictCode",t)},expression:"model.dictCode"}})],1),a("a-col",{attrs:{span:4}},[e._v("描述")]),a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{placeholder:"请输入字典描述"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i={name:"DictModal",data:function(){return{value:1,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{dictName:[{required:!0,message:"请输入字典名称!"}],dictCode:[{required:!0,message:"请输入字典编码!"},{validator:this.validateDictCode}]}}},methods:{validateDictCode:function(e,t,a){var r={tableName:"sys_dict",fieldName:"dict_code",fieldVal:t,dataId:this.model.id};Object(o["s"])(r).then((function(e){e.success?a():a(e.message)}))},handleChange:function(e){this.model.status=e},add:function(){this.edit({})},edit:function(e){this.model=Object.assign({},e),this.visible=!0},handleOk:function(){var e,t=this,a=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;a&&(t.confirmLoading=!0,this.model.dictName=(this.model.dictName||"").trim(),this.model.dictCode=(this.model.dictCode||"").trim(),this.model.description=(this.model.description||"").trim(),e=this.model.id?Object(o["w"])(this.model):Object(o["c"])(this.model),e.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.$refs.formRow.clearValidate()}}},s=i,l=(a("af5c"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"d4b83ba8",null);t["default"]=c.exports},5815:function(e,t,a){},5859:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1,"body-style":{padding:"8px 0"}}},[a("div",{staticClass:"cardBody"},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:10,sm:12}},[a("a-form-item",{staticStyle:{"margin-left":"8px"}},[a("a-input",{attrs:{placeholder:"请输入账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{staticStyle:{"margin-left":"18px"},attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("div",{staticClass:"table-operator",attrs:{md:24,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新建用户")]),e.selectedRowKeys.length>0?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"arrows-alt"}}),e._v("\n            取消关联\n          ")],1),a("a-menu-item",{key:"1",on:{click:e.batchDelReal}},[a("a-icon",{attrs:{type:"delete"}}),e._v("\n            删除\n          ")],1)],1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n          批量操作\n          "),a("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),a("div",{ref:"tableBox",staticClass:"tableBox"},[a("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",scroll:{y:e.tableHeight},columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t,r){return a("span",{},[e._v("\n          "+e._s("1"==t?"正常":"冻结")+"\n        ")])}},{key:"action",fn:function(t,r){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDeptRole(r)}}},[e._v("机构角色")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDetail(r)}}},[e._v("用户详情")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定取消与选中机构关联吗?"},on:{confirm:function(){return e.handleDelete(r.id)}}},[a("a",[e._v("取消关联")])])],1),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDeleteReal(r.id)}}},[a("a",[e._v("删除")])])],1),1==r.status?a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定冻结吗?"},on:{confirm:function(){return e.handleFrozen(r.id,2,r.username)}}},[a("a",[e._v("冻结")])])],1):e._e(),2==r.status?a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定解冻吗?"},on:{confirm:function(){return e.handleFrozen(r.id,1,r.username)}}},[a("a",[e._v("解冻")])])],1):e._e(),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleChangePassword(r.username)}}},[e._v("密码")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.getTokenNoList(r)}}},[e._v("令牌")])]),e.showRegion?a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.relationRegion(r)}}},[e._v("关联小区")])]):e._e()],1)],1)],1)}}])})],1)]),a("user-modal",{ref:"modalForm",attrs:{departId:e.currentDeptId},on:{ok:e.modalFormOk}}),a("Select-User-Modal",{ref:"selectUserModal",on:{selectFinished:e.selectOK}}),a("dept-role-user-modal",{ref:"deptRoleUser"}),a("password-modal",{ref:"passwordmodal",on:{ok:e.passwordModalOk}}),a("user-relation-region",{ref:"relationRegion",on:{ok:e.modalFormOk}}),a("user-client-modal",{ref:"clientModal",on:{ok:e.modalFormOk}})],1)},n=[],o=a("3ed7"),i=a("b65a"),s=a("0fea"),l=a("b3c4"),c=a("418f"),d=a("8034"),u=a("4ec3"),f=a("ddf9"),m=a("6bd9"),h=a("9d96"),p={name:"DeptUserInfo",mixins:[i["a"]],components:{DeptRoleUserModal:d["default"],SelectUserModal:l["default"],UserModal:c["default"],PasswordModal:f["default"],UserRelationRegion:m["default"],UserClientModal:h["default"]},data:function(){return{description:"用户信息",currentDeptId:"",currentDept:{},tableHeight:200,columns:[{title:"用户账号",align:"center",dataIndex:"username"},{title:"用户名称",align:"center",dataIndex:"realname"},{title:"电话",align:"center",dataIndex:"phone"},{title:"机构角色",align:"center",dataIndex:"roleName"},{title:"状态",align:"center",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],url:{list:"/sys/user/departUserList",edit:"/sys/user/editSysDepartWithUser",delete:"/sys/user/deleteUserInDepart",deleteBatch:"/sys/user/deleteUserInDepartBatch",queryCorpInfoByOrgCode:"/sys/user/queryCorpInfoByOrgCode"},showRegion:!1,tableHeightTimer:null}},mounted:function(){this.initTableHeight(),window.addEventListener("resize",this.initTableHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.initTableHeight)},methods:{initTableHeight:function(){var e=this;this.tableHeightTimer&&(clearTimeout(this.tableHeightTimer),this.tableHeightTimer=null),this.tableHeightTimer=setTimeout((function(){var t=e.$refs.tableBox,a=t?t.getBoundingClientRect():{height:200},r=a.height,n=t?t.querySelector(".ant-table-thead"):void 0,i=n?n.getBoundingClientRect():{height:42},s=i.height,l=t?t.querySelector(".ant-pagination.mini.ant-table-pagination"):void 0,c=l?l.getBoundingClientRect():{height:56},d=c.height;e.tableHeight=r-s-Object(o["c"])(d,32)}),200)},getTokenNoList:function(e){this.$refs.clientModal.getTokenNoList(e)},relationRegion:function(e){var t=this;Object(s["e"])(this.url.queryCorpInfoByOrgCode,{orgCode:e.orgCode}).then((function(a){a.success&&a.result&&(e.corpId=a.result.id,e.userId=e.id,e.corpType=a.result.baseType,t.$refs.relationRegion.show(e))}))},searchReset:function(){this.queryParam={},this.loadData(1)},loadData:function(e){var t=this;if(this.url.list){1===e&&(this.ipagination.current=1);var a=this.getQueryParams();a.depId=this.currentDeptId,Object(s["e"])(this.url.list,a).then((function(e){e.success&&e.result&&(t.dataSource=e.result.records,t.ipagination.total=e.result.total,t.onClearSelected())}))}else this.$message.error("请设置url.list属性!")},batchDel:function(){if(this.url.deleteBatch)if(this.currentDeptId)if(this.selectedRowKeys.length<=0)this.$message.warning("请选择一条记录！");else{for(var e="",t=0;t<this.selectedRowKeys.length;t++)e+=this.selectedRowKeys[t]+",";var a=this;this.$confirm({title:"确认取消",content:"是否取消用户与选中机构的关联?",onOk:function(){Object(s["a"])(a.url.deleteBatch,{depId:a.currentDeptId,userIds:e}).then((function(e){e.success?(a.$message.success("删除用户与选中机构关系成功！"),a.loadData(),a.onClearSelected()):a.$message.warning(e.message)}))}})}else this.$message.error("未选中任何机构，无法取消机构与用户的关联!");else this.$message.error("请设置url.deleteBatch属性!")},handleDelete:function(e){var t=this;if(this.url.delete)if(this.currentDeptId){var a=this;Object(s["a"])(a.url.delete,{depId:this.currentDeptId,userId:e}).then((function(r){if(r.success){if(a.$message.success("删除用户与选中机构关系成功！"),t.selectedRowKeys.length>0)for(var n=0;n<t.selectedRowKeys.length;n++)if(t.selectedRowKeys[n]==e){t.selectedRowKeys.splice(n,1);break}a.loadData()}else a.$message.warning(r.message)}))}else this.$message.error("未选中任何机构，无法取消机构与用户的关联!");else this.$message.error("请设置url.delete属性!")},handleDeleteReal:function(e){var t=this;Object(s["a"])("/sys/user/delete",{id:e}).then((function(e){e.success?(t.$message.success(e.message),t.loadData()):t.$message.warning(e.message)}))},batchDelReal:function(){if(this.selectedRowKeys.length<=0)this.$message.warning("请选择一条记录！");else{for(var e=this,t="",a=0;a<this.selectedRowKeys.length;a++)t+=this.selectedRowKeys[a]+",";this.$confirm({title:"确认删除",content:"是否删除选中数据?",onOk:function(){Object(s["a"])("/sys/user/deleteBatch",{ids:t}).then((function(t){t.success?(e.$message.success(t.message),e.loadData(),e.onClearSelected()):e.$message.warning(t.message)}))}})}},open:function(e){this.currentDeptId=e.id,this.currentDept=e,this.loadData(1)},clearList:function(){this.currentDeptId="",this.dataSource=[]},hasSelectDept:function(){return""!=this.currentDeptId||(this.$message.error("请选择一个机构!"),!1)},handleAddUserDepart:function(){""==this.currentDeptId?this.$message.error("请选择一个机构!"):this.$refs.selectUserModal.visible=!0},handleEdit:function(e){this.$refs.modalForm.title="编辑",this.$refs.modalForm.departDisabled=!0,this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.edit(e)},handleAdd:function(){""==this.currentDeptId?this.$message.error("请选择一个机构!"):(this.$refs.modalForm.departDisabled=!0,this.$refs.modalForm.nextDepartOptions=[{value:this.currentDept.key,label:this.currentDept.title}],this.$refs.modalForm.title="新增",this.$refs.modalForm.edit({activitiSync:"1",userIdentity:1,selecteddeparts:this.currentDeptId,orgCode:this.currentDept.orgCode}))},selectOK:function(e){var t=this,a={};a.depId=this.currentDeptId,a.userIdList=[];for(var r=0;r<e.length;r++)a.userIdList.push(e[r]);Object(s["j"])(this.url.edit,a).then((function(e){e.success?(t.$message.success(e.message),t.loadData()):t.$message.warning(e.message)}))},handleDeptRole:function(e){""!=this.currentDeptId?(this.$refs.deptRoleUser.add(e,this.currentDeptId),this.$refs.deptRoleUser.title="机构角色分配"):this.$message.warning("请先选择一个机构!")},handleFrozen:function(e,t,a){var r=this;"admin"!==a?Object(u["B"])({ids:e,status:t}).then((function(e){e.success?(r.$message.success(e.message),r.loadData()):r.$message.warning(e.message)})):r.$message.warning("管理员账号不允许此操作！")},handleChangePassword:function(e){this.$refs.passwordmodal.show(e)},passwordModalOk:function(){}}},v=p,b=(a("6050"),a("2877")),y=Object(b["a"])(v,r,n,!1,null,"761297d1",null);t["default"]=y.exports},5861:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"camera",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",capture:"camera"},on:{change:e.toBase64}}),a("van-overlay",{staticStyle:{"z-index":"9999"},attrs:{show:e.loading},on:{click:function(t){e.loading=!1}}},[a("van-loading",{staticStyle:{"margin-top":"45vh"},attrs:{size:"24px",vertical:""}},[e._v(e._s(e.tip))])],1),a("van-image-preview",{ref:"preview",attrs:{"get-container":"body",closeable:!0,"start-position":e.previewStartPosition,images:e.previewImages},on:{close:function(t){e.deg=0},change:e.previewOnChange},model:{value:e.previewShow,callback:function(t){e.previewShow=t},expression:"previewShow"}},[a("div",{staticClass:"preview",attrs:{slot:"cover"},slot:"cover"},[a("a-icon",{class:e.isDetail?"previewItemDetail":"previewItem",attrs:{type:"undo"},on:{click:function(t){return e.rotate("left")}}}),a("a-icon",{class:e.isDetail?"previewItemDetail":"previewItem",attrs:{type:"redo"},on:{click:function(t){return e.rotate("right")}}})],1)]),a("van-image-preview",{attrs:{"get-container":"body",closeable:!0},model:{value:e.pdfShow,callback:function(t){e.pdfShow=t},expression:"pdfShow"}},[a("van-overlay",{staticStyle:{"background-color":"#000000ff"},attrs:{slot:"cover","z-index":"9999",show:e.pdfShow},slot:"cover"},[a("div",{staticStyle:{"text-align":"center",color:"white",padding:"15px"}},[e._v(e._s(e.currentPage+"/"+e.pdfPages))]),a("pdf",{attrs:{src:e.pdfSrc,page:e.currentPage},on:{"num-pages":function(t){e.pdfPages=t}}}),a("div",{staticClass:"preview"},[a("a-icon",{staticClass:"previewItem",attrs:{type:"left-circle"},on:{click:function(t){return e.changePdfPage(0)}}}),a("a-icon",{staticClass:"previewItem",attrs:{type:"download"},on:{click:function(t){return e.download(e.pdfOriginalUrl)}}}),a("a-icon",{staticClass:"previewItem",attrs:{type:"right-circle"},on:{click:function(t){return e.changePdfPage(1)}}})],1),a("i",{staticClass:"van-icon van-icon-clear van-image-preview__close-icon van-image-preview__close-icon--top-right",attrs:{role:"button"},on:{click:function(t){e.pdfShow=!1}}})],1)],1),e._l(e.showTypeList,(function(t){return e._l(t.typeList,(function(t,r){return a("div",{key:t.id,staticClass:"typeListItem"},[a("div",{staticClass:"typeListItemTitle",class:{required:1===t.isValid}},[e._v(e._s(t.name))]),a("div",{staticStyle:{"border-radius":"4px"}},[a("van-uploader",{ref:"uploadImg"+r,refInFor:!0,staticStyle:{display:"none"},attrs:{multiple:!0,accept:"image/*","preview-image":!1,"preview-full-image":!1,"max-size":52428800,"before-read":e.onBeforeRead,"after-read":e.uploadActionImg,"preview-options":{closeable:!1}},on:{oversize:e.onOversize},model:{value:t.showList,callback:function(a){e.$set(t,"showList",a)},expression:"item.showList"}},[a("div",{staticStyle:{display:"none"}},[e._v("上传")])]),a("div",{staticClass:"van-uploader__wrapper",staticStyle:{"background-color":"white","border-radius":"4px"}},[t.showList&&0!==t.showList.length||!e.isDetail?e._e():a("div",{staticStyle:{"text-align":"center",width:"100%","line-height":"50px","background-color":"white","border-radius":"4px"}},[e._v("\n            暂无数据\n          ")]),e._l(t.showList,(function(r,n){return a("div",{key:n,staticStyle:{cursor:"pointer",position:"relative",margin:"4px 4px 0 4px",width:"80px",height:"80px"}},[e.isDetail?e._e():a("div",{staticClass:"delete",on:{click:function(a){return e.beforeDelete(t,r,n)}}},[a("i",{staticClass:"van-icon van-icon-cross van-uploader__preview-delete-icon"})]),a("van-image",{attrs:{fit:"cover",width:"80",height:"80",src:r.url},on:{click:function(a){return e.clickPreview(t,n)}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)}),a("div",{staticClass:"preview-cover van-ellipsis img_name",on:{click:function(a){return e.clickPreview(t,n)}}},[e._v("\n              "+e._s(r.name)+"\n            ")])],1)})),e.isDetail?e._e():a("div",{staticStyle:{cursor:"pointer",position:"relative",margin:"0 8px 8px 0",width:"80px",height:"80px"},on:{click:function(a){return e.uploadImg(t,r)}}},[a("div",{staticClass:"upload-border"},[a("van-icon",{staticClass:"van-uploader__upload-icon van-icon",attrs:{name:"plus"}}),a("span",{staticStyle:{color:"#9a9c9e"}},[e._v("上传")])],1)])],2)],1)])}))})),a("van-action-sheet",{attrs:{actions:e.photoActions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.selectPhoto,cancel:function(t){e.photoShow=!1}},model:{value:e.photoShow,callback:function(t){e.photoShow=t},expression:"photoShow"}})],2)},n=[],o=a("2b0e"),i=(a("157a"),a("bc3a")),s=a.n(i),l=a("4a6a"),c=a("858e"),d=a("0b17"),u=a("0fea"),f=a("01b9");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function d(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};c(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,s){var l=u(e[n],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==m(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=f;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=u(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=u(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(m(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=c(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(d(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),c(S,l,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function p(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){p(o,r,n,i,s,"next",e)}function s(e){p(o,r,n,i,s,"throw",e)}i(void 0)}))}}function b(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=y(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function y(e,t){if(e){if("string"==typeof e)return g(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var w={name:"UpdatingFiles",components:{pdf:c["a"]},mixins:[f["a"]],props:{title:{type:String,default:"附件上传"},busiType:{type:String,default:""},busiTypeDetail:{type:String,default:""},busiNo:{type:String,default:""},isDetail:{type:Boolean,default:!1},ereId:{type:String,default:""}},data:function(){return{photoActions:[{name:"打开相机"},{name:"打开相册"}],photoShow:!1,fileList:[],showList:[],loading:!1,tip:"正在处理",currentClickIndex:void 0,currentClickType:null,showTypeList:[{title:"必传项",icon:a("f736"),typeList:[]},{title:"选传项",icon:a("de60"),typeList:[]}],url:{getFileCategoryNoLogin:"/business/eFileCategory/queryByCodeNoLogin",fileDeleteImg:window._CONFIG["domianURL"]+"/control/file/delete"}}},computed:{previewImages:function(){var e,t=[],a=b(this.fileList);try{for(a.s();!(e=a.n()).done;){var r=e.value,n=r;(n.filePath.endsWith(".png")||n.filePath.endsWith(".jpg")||n.filePath.endsWith(".bmp")||n.filePath.endsWith(".jpeg"))&&t.push(this.buildPath(n.filePath))}}catch(o){a.e(o)}finally{a.f()}return t},uploadFileUrl:function(){return window._CONFIG["domianURL"]+"/control/file/uploadImg?uploadType=5"}},created:function(){this.initData()},methods:{initData:function(){var e=this;if(this.$toast("开始初始化"),this.bId=this.busiNo,this.resetData(),this.busiType&&this.busiTypeDetail){var t=this.url.getFileCategoryNoLogin;Object(u["e"])(t,{busiType:this.busiType,busiTypeDetail:this.busiTypeDetail,busiNo:this.bId}).then((function(t){if(e.$toast("接口调用完成"),t.success&&t.result.length>0){e.$toast("接口调用成功");var a=t.result;e.ereId&&(a=a.filter((function(t){return t.id===e.ereId}))),e.splitRequiredType(a)}e.emitFileIds()})).catch((function(t){e.$toast("接口调用失败"+t.message)}))}},resetData:function(){this.showTypeList.forEach((function(e){e.typeList=[]})),this.fileList=[],this.showList=[],this.fileTypeChecked={},this.fileValue=[]},splitRequiredType:function(e){this.showTypeList[0].typeList=[],this.showTypeList[1].typeList=[];var t,a=b(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.$set(r,"showList",[]),r.fileManageList=r.fileManageList?r.fileManageList:[],1===r.isValid?this.showTypeList[0].typeList.push(r):this.showTypeList[1].typeList.push(r)}}catch(n){a.e(n)}finally{a.f()}this.showAll(this.showTypeList)},showAll:function(e){var t,a=b(e);try{for(a.s();!(t=a.n()).done;){var r,n=t.value,o=b(n.typeList);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.showList=this.buildShowList(i.fileManageList)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){a.e(s)}finally{a.f()}},toBase64:function(){var e=v(h().mark((function e(t){var a,r=this;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.target.files[0],/image\/\w+/.test(a.type)){e.next=4;break}return this.$toast({message:"请选择图片文件",position:"bottom"}),e.abrupt("return");case 4:return e.next=6,this.onBeforeRead(a).then((function(e){var t={file:e};r.uploadActionImg(t)}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleImgRotate:function(e){var t=this;return new Promise((function(a,r){var n=t,i=n.index;n.showList[i].url="";var l=n.fileList[i].fileName,c=document.createElement("canvas"),d=c.getContext("2d"),u=new Image,f=t.previewImages[t.previewIndex];u.src=f,u.onload=function(){c.style.width=u.naturalWidth,c.style.height=u.naturalHeight;var t=this.width,f=this.height;switch(u.setAttribute("crossOrigin","anonymous"),d.drawImage(u,0,0,t,f),e<0&&(e=360+e),e){case 0:break;case 90:c.width=u.naturalHeight,c.height=u.naturalWidth,d.rotate(90*Math.PI/180),d.drawImage(u,0,-f,t,f);break;case 180:c.width=u.naturalWidth,c.height=u.naturalHeight,d.rotate(180*Math.PI/180),d.drawImage(u,-t,-f,t,f);break;case 270:c.width=u.naturalHeight,c.height=u.naturalWidth,d.rotate(270*Math.PI/180),d.drawImage(u,-t,0,t,f);break}var m=c.toDataURL("image/jpeg");if("data:,"!==m){var h=n.dataURLtoFile(m,l),p=new FormData;p.append("file",h);var v={headers:{"Content-Type":"multipart/form-data",sourceName:o["default"].ls.get("SOURCE_NAME"),redisIndex:o["default"].ls.get("REDIS_INDEX"),"X-Access-Token":o["default"].ls.get("Access-Token")}};s.a.post(n.uploadFileUrl,p,v).then((function(e){e.data.success?(n.fileList[i].fileId=e.data.result.id,n.fileList[i].filePath=e.data.result.filePath,n.fileList[i].thumPath=e.data.result.thumPath,n.showList=n.buildShowList(n.fileList),n.deg=0,a(1)):(n.$toast({message:"操作失败",position:"bottom"}),r(new Error("操作失败"))),n.loading=!1}))}}}))},handleRotate:function(){var e=v(h().mark((function e(){return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.previewShow=!1,0===this.deg){e.next=5;break}return this.loading=!0,e.next=5,this.handleImgRotate(this.deg);case 5:this.deg=0;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rotate:function(e){this.$refs.preview.$forceUpdate(),"left"===e?this.deg-=90:this.deg+=90,(this.deg>=360||this.deg<=-360)&&(this.deg=0);var t=$(".van-image-preview__image .van-image__img"),a=$(".van-image-preview__image");t[this.previewIndex]?(t[this.previewIndex].style.transform="rotate("+this.deg+"deg)",90===this.deg||270===this.deg||-90===this.deg||-270===this.deg?(t[this.previewIndex].style.width="100vh",t[this.previewIndex].style.height="100vw",a[this.previewIndex].style.width="100vh",a[this.previewIndex].style.height="100vw"):(t[this.previewIndex].style.width="100vw",t[this.previewIndex].style.height="100vh",a[this.previewIndex].style.width="100vw",a[this.previewIndex].style.height="100vh")):(t[t.length-1].style.transform="rotate("+this.deg+"deg)",90===this.deg||270===this.deg||-90===this.deg||-270===this.deg?(t[t.length-1].style.width="100vh",t[t.length-1].style.height="100vw",a[t.length-1].style.width="100vh",a[t.length-1].style.height="100vw"):(t[t.length-1].style.width="100vw",t[t.length-1].style.height="100vh",a[t.length-1].style.width="100vw",a[t.length-1].style.height="100vh"))},getFileNameByUrl:function(e){if(!e)return"";var t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("_")),a=e.substring(e.lastIndexOf("."),e.length);return t+a},clickPreview:function(e,t){if(this.fileList=e.fileManageList,-1!==e.showList[t].originalUrl.indexOf(".pdf"))this.currentPage=1,this.pdfSrc=c["a"].createLoadingTask({url:e.showList[t].originalUrl,CMapReaderFactory:d["a"]}),this.pdfShow=!0,this.pdfOriginalUrl=e.showList[t].originalUrl;else if(-1!==e.showList[t].originalUrl.indexOf(".doc")||-1!==e.showList[t].originalUrl.indexOf(".xls"))this.currentPage=1,this.pdfSrc=c["a"].createLoadingTask({url:e.showList[t].pdfPath,CMapReaderFactory:d["a"]}),this.pdfShow=!0,this.pdfOriginalUrl=e.showList[t].originalUrl;else{for(var a=$(".van-image-preview__image .van-image__img"),r=$(".van-image-preview__image"),n=0;n<a.length;n++)a[n]&&a[n].style&&(a[n].style.transform="rotate(0deg)",a[n].style.width="100vw",a[n].style.height="100vh"),r[n]&&r[n].style&&(r[n].style.width="100vw",r[n].style.height="100vh");for(var o=0,i=[],s=0;s<e.showList.length;s++)-1===e.showList[s].originalUrl.indexOf(".png")&&-1===e.showList[s].originalUrl.indexOf(".jpg")&&-1===e.showList[s].originalUrl.indexOf(".jpeg")&&-1===e.showList[s].originalUrl.indexOf(".bmp")||(i.push(e.showList[s]),s===t&&(o=i.length-1));this.index=t,this.previewIndex=o,this.previewStartPosition=o,this.previewShow=!0}},cameraTakePicture:function(){var e=this;navigator&&navigator.camera?navigator.camera.getPicture((function(t){var a="data:image/png;base64,"+t,r={};r.file=l["a"].dataURLtoFile(a),e.uploadActionImg(r)}),(function(t){e.$toast(t)}),{quality:50,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG,sourceType:Camera.PictureSourceType.CAMERA,correctOrientation:!0}):this.$refs.camera.click()},selectPhoto:function(e){"打开相机"===e.name?this.cameraTakePicture():this.$refs["uploadImg"+this.currentClickIndex][0].chooseFile()},uploadImg:function(e,t){this.currentClickIndex=t,this.currentClickType=e;var a="android";/iPhone|iPad|iPod|iphone|ipad|ipod/i.test(navigator.platform)&&(a="iphone"),"iphone"===a?this.$refs["uploadImg"+t][0].chooseFile():this.photoShow=!0},beforeDelete:function(e,t){var a=this,r=e.showList,n=e.fileManageList;if(!r||0===r.length)return!1;a.loading=!0,Object(u["a"])(a.url.fileDeleteImg,{id:t.uid}).then((function(e){if(e&&e.success){var o=r.findIndex((function(e){return e.uid===t.uid})),i=n.findIndex((function(e){return e.id===t.uid}));r.splice(o,1),n.splice(i,1),a.emitFileIds(),a.$message.success("删除成功")}else a.$message.error("删除失败")})).catch((function(){a.$message.error("删除失败")})).finally((function(){a.loading=!1}))},uploadActionImg:function(){var e=v(h().mark((function e(t){var a,r,n;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,this.tip="正在上传文件",!Array.isArray(t)){e.next=22;break}a=b(t),e.prev=4,a.s();case 6:if((r=a.n()).done){e.next=12;break}return n=r.value,e.next=10,this.uploadFile(n.file);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:e.next=24;break;case 22:return e.next=24,this.uploadFile(t.file);case 24:this.loading=!1;case 25:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=v(h().mark((function e(t){var a,r,n=this;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t),a.append("busiNo",this.busiNo),a.append("busiType",this.busiType),a.append("busiTypeDetail",this.busiTypeDetail),a.append("erecordId",this.currentClickType.id),a.append("orderNo","0"),a.append("parenPath",this.parenPath),r={headers:{"Content-Type":"multipart/form-data",sourceName:o["default"].ls.get("SOURCE_NAME"),redisIndex:o["default"].ls.get("REDIS_INDEX"),"X-Access-Token":o["default"].ls.get("Access-Token")}},e.next=11,s.a.post(this.uploadFileUrl,a,r).then((function(e){if(e.data.success){var t={};t.id=e.data.result.id,t.filePath=e.data.result.filePath,t.thumPath=e.data.result.thumPath,t.originalName=e.data.result.originalName,t.updateBy=e.data.result.updateBy,n.currentClickType.fileManageList.push(t),n.currentClickType.showList=n.buildShowList(n.currentClickType.fileManageList),n.emitFileIds()}else n.$toast({message:e.data.message,position:"bottom"}),n.loading=!1}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),emitFileIds:function(){var e,t=[],a=b(this.showTypeList);try{for(a.s();!(e=a.n()).done;){var r,n=e.value,o=b(n.typeList);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=t.concat(i.fileManageList.map((function(e){return e.id})))}}catch(s){o.e(s)}finally{o.f()}}}catch(s){a.e(s)}finally{a.f()}this.$emit("change",t)},onBeforeRead:function(e){return this.loading=!0,this.tip="正在压缩文件",Array.isArray(e)?new Promise(function(){var t=v(h().mark((function t(a,r){var n,o;return h().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=h().mark((function t(a){return h().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1===(e[a].type+"").indexOf("image/")){t.next=5;break}return t.next=3,l["a"].imgCompression(e[a]).then((function(t){var n=t.size<10485760;n?e[a]=t:r(new Error("图片大小不能超过10MB"))}));case 3:t.next=5;break;case 5:case"end":return t.stop()}}),t)})),o=0;case 2:if(!(o<e.length)){t.next=7;break}return t.delegateYield(n(o),"t0",4);case 4:o++,t.next=2;break;case 7:a(e);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()):new Promise(function(){var t=v(h().mark((function t(a,r){return h().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1===(e.type+"").indexOf("image/")){t.next=5;break}return t.next=3,l["a"].imgCompression(e).then((function(e){var t=e.size<10485760;t?a(e):r(new Error("图片大小不能超过10MB"))}));case 3:t.next=6;break;case 5:a(e);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},onOversize:function(e){this.loading=!1,this.$toast({message:"文件大小不能超过50MB",position:"bottom"})}}},C=w,k=(a("d23b"),a("2877")),x=Object(k["a"])(C,r,n,!1,null,"6190be28",null);t["default"]=x.exports},"5a00":function(e,t,a){"use strict";a("2a24")},"5b2e":function(e,t,a){"use strict";a("49a0")},"5cb0":function(e,t,a){},"5e65":function(e,t,a){"use strict";a("53e8")},"5f90":function(e,t,a){"use strict";a("c13d")},6050:function(e,t,a){"use strict";a("24ff")},6108:function(e,t,a){},6675:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"数据规则/按钮权限配置",width:"365",closable:!1,visible:e.visible},on:{close:e.onClose}},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"数据规则"}},[e.dataruleList.length>0?a("a-checkbox-group",{model:{value:e.dataruleChecked,callback:function(t){e.dataruleChecked=t},expression:"dataruleChecked"}},[a("a-row",[e._l(e.dataruleList,(function(t,r){return a("a-col",{key:"dr"+r,attrs:{span:24}},[a("a-checkbox",{attrs:{value:t.id}},[e._v(e._s(t.ruleName))])],1)})),a("a-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"100%","margin-top":"15px"}},[a("a-button",{attrs:{type:"primary",size:"small",icon:"save"},on:{click:e.saveDataruleForRole}},[e._v("点击保存")])],1)])],2)],1):a("div",[a("h3",[e._v("无配置信息！")])])],1)],1)],1)},n=[],o=a("290c"),i=a("da05"),s=a("0fea"),l={name:"DepartDataruleModal",components:{ACol:i["b"],ARow:o["a"]},data:function(){return{functionId:"",departId:"",visible:!1,tabList:[{key:"1",tab:"数据规则"},{key:"2",tab:"按钮权限"}],activeTabKey:"1",url:{datarule:"/sys/sysDepartPermission/datarule"},dataruleList:[],dataruleChecked:[]}},methods:{loadData:function(){var e=this;Object(s["e"])("".concat(this.url.datarule,"/").concat(this.functionId,"/").concat(this.departId)).then((function(t){if(t.success){e.dataruleList=t.result.datarule;var a=t.result.drChecked;a&&(e.dataruleChecked=a.split(","))}}))},saveDataruleForRole:function(){var e=this;this.dataruleChecked&&0!=this.dataruleChecked.length||this.$message.warning("请注意，现未勾选任何数据权限!");var t={permissionId:this.functionId,departId:this.departId,dataRuleIds:this.dataruleChecked.join(",")};Object(s["j"])(this.url.datarule,t).then((function(t){t.success?e.$message.success(t.message):e.$message.error(t.message)}))},show:function(e,t){this.onReset(),this.functionId=e,this.departId=t,this.visible=!0,this.loadData()},onClose:function(){this.visible=!1,this.onReset()},onTabChange:function(e){this.activeTabKey=e},onReset:function(){this.functionId="",this.departId="",this.dataruleList=[],this.dataruleChecked=[]}}},c=l,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"20b377f4",null);t["default"]=u.exports},"692d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,footer:null,visible:e.visible,cancelText:"关闭"},on:{cancel:e.handleCancel}},[a("div",{staticStyle:{"font-size":"15px",color:"rgba(0, 0, 0, 0.65)","font-variant":"tabular-nums","font-family":"verdana"}},[e._v("\n    1.创建：按照规定格式写好sql，并保存。"),a("br"),e._v("\n        sql规范："),a("br"),e._v("\n            sql子句尽量放后边"),a("br"),e._v("\n            加where条件尽量加一个1=1"),a("br"),e._v("\n            不是做where条件的参数 必填"),a("br"),e._v("\n            例：select a.* from table a,table b,(select * from table c) d where 1=1 and a.id =  b.id"),a("br"),e._v("\n            不需美化;"),a("br"),e._v("\n    2.使用：通过唯一编码（code）调用以下接口，即可返回相应数据"),a("br"),e._v("\n        不分页接口:"),a("br"),e._v("\n            url：/joinsoft/joinDataSource/queryDataByCode"),a("br"),e._v("\n            params：code(唯一编码)、条件map"),a("br"),e._v("\n        分页接口："),a("br"),e._v("\n            url：/joinsoft/joinDataSource/queryDataByCodeToPage"),a("br"),e._v("\n            params：code(唯一编码)、条件map、pageNum(页码)、pageSize(每页的个数)"),a("br"),a("br"),e._v("\n        "),a("span",{staticClass:"red"},[e._v("注意：")]),a("br"),e._v("\n            "),a("span",{staticClass:"red"},[e._v("后台使用预览功能时，动态参数不允许使用db_sql、db_db、db_code")]),a("br"),e._v("\n    3.xml方式："),a("br"),e._v("\n        基本使用方式同上："),a("br"),e._v("\n            url同上，code为xml文件中方法名，参数依旧放入条件map中"),a("br"),e._v("\n        如需切换数据源，条件map中添加key为db_db value为数据源名称的一组，因而此方式不允许动态参数使用db_db"),a("br"),e._v("\n        暂时只支持一个xml文件：org.tpsoft.modules.mapper.TpSoftMapper"),a("br"),e._v("\n        暂不支持后台预览功能"),a("br"),a("br"),e._v("\n      "),a("span",{staticClass:"red"},[e._v("*  code命名规范:sql方式加前缀：sql_  xml方式加前缀：xml_")]),a("br"),a("br"),e._v("\n      *  多个数据库时，需在数据库管理添加数据库，即可使用数据源正常功能。"),a("br"),e._v("\n      *  仅供特普软件相关项目使用。"),a("br"),a("br"),a("br")])])},n=[],o={name:"RuleTip",data:function(){return{title:"使用说明",visible:!1}},created:function(){},methods:{close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()}}},i=o,s=(a("6db5a"),a("2877")),l=Object(s["a"])(i,r,n,!1,null,"2e60f45a",null);t["default"]=l.exports},"6b15":function(e,t,a){"use strict";a("f6f8")},"6b49":function(e,t,a){},"6b7a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则名称",prop:"ruleName"}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.model.ruleName,callback:function(t){e.$set(e.model,"ruleName",t)},expression:"model.ruleName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则Code",prop:"ruleCode"}},[a("a-input",{attrs:{placeholder:"请输入规则Code",disabled:e.disabledCode},model:{value:e.model.ruleCode,callback:function(t){e.$set(e.model,"ruleCode",t)},expression:"model.ruleCode"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则实现类",prop:"ruleClass"}},[a("a-input",{attrs:{placeholder:"请输入规则实现类"},model:{value:e.model.ruleClass,callback:function(t){e.$set(e.model,"ruleClass",t)},expression:"model.ruleClass"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则参数",prop:"ruleParams"}},[a("a-textarea",{attrs:{placeholder:"请输入规则参数",rows:5},model:{value:e.model.ruleParams,callback:function(t){e.$set(e.model,"ruleParams",t)},expression:"model.ruleParams"}})],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("ca00"),s={name:"SysFillRuleModal",components:{},data:function(){var e=this;return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{ruleName:[{required:!0,message:"规则名称不能为空"}],ruleCode:[{required:!0,message:"规则Code不能为空"},{validator:function(t,a,r){return Object(i["x"])("sys_fill_rule","rule_code",a,e.model.id,r)}}],ruleClass:[{required:!0,message:"规则实现类不能为空"}],ruleParams:[{validator:function(e,t,a){try{var r=JSON.parse(t);r instanceof Array?a("只能传递JSON对象，不能传递JSON数组"):r instanceof Object?a():a("请输入JSON字符串")}catch(n){a("请输入JSON字符串")}}}]},url:{add:"/sys/fillRule/add",edit:"/sys/fillRule/edit"}}},computed:{disabledCode:function(){return!!this.model.id}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.form.resetFields(),t.model=Object.assign({},e)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a,r){if(a){t.confirmLoading=!0;var n=e.url.add,i="post";e.model.id&&(n=e.url.edit,i="put"),Object(o["i"])(n,e.model,i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"12bd46e2",null);t["default"]=d.exports},"6c94":function(e,t,a){"use strict";a("d31e")},"6db5a":function(e,t,a){"use strict";a("e1c7")},"6f2e":function(e,t,a){},"704d":function(e,t,a){},7195:function(e,t,a){"use strict";a("e998")},7474:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("tenant-form",{ref:"realForm",attrs:{disabled:e.disableSubmit,normal:""},on:{ok:e.submitCallback}})],1)},n=[],o=a("4890"),i={name:"TenantModal",components:{TenantForm:o["default"]},data:function(){return{title:"",width:800,visible:!1,disableSubmit:!1}},methods:{add:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.realForm.show()}))},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.show(e)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){this.$refs.realForm.submitForm()},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},"74c6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{}],expression:"['userName', {}]"}],attrs:{placeholder:"请输入用户名",readOnly:""}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"代理人用户名"}},[a("j-select-user-by-dep",{directives:[{name:"decorator",rawName:"v-decorator",value:["agentUserName",e.validatorRules.agentUserName],expression:"['agentUserName', validatorRules.agentUserName]"}],attrs:{placeholder:"请输入代理人用户名","trigger-change":!0}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"代理开始时间"}},[a("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime",e.validatorRules.startTime],expression:"[ 'startTime', validatorRules.startTime]"}],staticStyle:{width:"100%"},attrs:{"trigger-change":!0,showTime:!0,"date-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择开始时间"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"代理结束时间"}},[a("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime",e.validatorRules.endTime],expression:"[ 'endTime', validatorRules.endTime]"}],staticStyle:{width:"100%"},attrs:{"trigger-change":!0,showTime:!0,"date-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择结束时间"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{}],expression:"[ 'status', {}]"}],staticClass:"fontiframe",attrs:{name:"radioGroup"}},[a("a-radio",{staticClass:"radioGroup",attrs:{value:"1"}},[e._v("有效")]),a("a-radio",{staticClass:"radioGroup",attrs:{value:"0"}},[e._v("无效")])],1)],1)],1)],1)],1)},n=[],o=a("88bc"),i=a.n(o),s=a("0fea"),l=a("2dab"),c=a("c14a"),d={name:"SysUserAgentModal",components:{JDate:l["default"],JSelectUserByDep:c["default"]},data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},username:"",confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{agentUserName:{rules:[{required:!0,message:"请输入代理人用户名!"}]},startTime:{rules:[{required:!0,message:"请输入代理开始时间!"}]},endTime:{rules:[{required:!0,message:"请输入代理结束时间!"}]}},url:{add:"/sys/sysUserAgent/add",edit:"/sys/sysUserAgent/edit",queryByUserName:"/sys/sysUserAgent/queryByUserName"}}},created:function(){},methods:{agentSettings:function(e){this.username=e,this.init()},init:function(){var e=this,t={userName:this.username};Object(s["e"])(this.url.queryByUserName,t).then((function(t){t.success?e.edit(t.result):e.edit({userName:e.username,status:"0"})}))},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(i()(t.model,"userName","agentUserName","status","startTime","endTime"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var n="",o="";e.model.id?(n+=e.url.edit,o="put"):(n+=e.url.add,o="post");var i=Object.assign(e.model,r);Object(s["i"])(n,i,o).then((function(e){e.success?t.$message.success(e.message):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()}}},u=d,f=a("2877"),m=Object(f["a"])(u,r,n,!1,null,"565b98a7",null);t["default"]=m.exports},"7c33":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ruleName",label:"规则名称"}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.model.ruleName,callback:function(t){e.$set(e.model,"ruleName",t)},expression:"model.ruleName"}})],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:e.showRuleColumn,expression:"showRuleColumn"}],attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ruleColumn",label:"规则字段"}},[a("a-input",{attrs:{placeholder:"请输入规则字段"},model:{value:e.model.ruleColumn,callback:function(t){e.$set(e.model,"ruleColumn","string"===typeof t?t.trim():t)},expression:"model.ruleColumn"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ruleConditions",label:"条件规则"}},[a("j-dict-select-tag",{attrs:{placeholder:"请输入条件规则",dictCode:"rule_conditions"},on:{input:e.handleChangeRuleCondition},model:{value:e.model.ruleConditions,callback:function(t){e.$set(e.model,"ruleConditions",t)},expression:"model.ruleConditions"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ruleValue",label:"规则值"}},[a("a-input",{attrs:{placeholder:"请输入规则值"},model:{value:e.model.ruleValue,callback:function(t){e.$set(e.model,"ruleValue","string"===typeof t?t.trim():t)},expression:"model.ruleValue"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态"}},[a("a-radio-group",{attrs:{buttonStyle:"solid"},model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}},[a("a-radio-button",{attrs:{value:"1"}},[e._v("有效")]),a("a-radio-button",{attrs:{value:"0"}},[e._v("无效")])],1)],1)],1)],1)],1)},n=[],o=a("0fea"),i={name:"PermissionDataRuleModal",data:function(){return{queryParam:{},title:"操作",visible:!1,model:{},ruleConditionList:[],labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,permissionId:"",validatorRules:{ruleConditions:[{required:!0,message:"请选择条件!"}],ruleName:[{required:!0,message:"请输入规则名称!"}],ruleValue:[{required:!0,message:"请输入规则值!"}],ruleColumn:[]},url:{list:"/sys/dictItem/list",add:"/sys/permission/addPermissionRule",edit:"/sys/permission/editPermissionRule"},showRuleColumn:!0}},created:function(){},methods:{add:function(e){this.permissionId=e,this.edit({status:"1"})},edit:function(e){this.model=Object.assign({},e),e.permissionId?this.model.permissionId=e.permissionId:this.model.permissionId=this.permissionId,this.visible=!0,this.initRuleCondition()},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var r="",n="";e.model.id?(r+=e.url.edit,n="put"):(r+=e.url.add,n="post"),Object(o["i"])(r,e.model,n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},initRuleCondition:function(){this.model.ruleConditions&&"USE_SQL_RULES"==this.model.ruleConditions?this.showRuleColumn=!1:this.showRuleColumn=!0},handleChangeRuleCondition:function(e){"USE_SQL_RULES"==e?(this.model.ruleColumn="",this.showRuleColumn=!1):this.showRuleColumn=!0}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"268de72f",null);t["default"]=c.exports},"7d57":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"功能测试",width:800,visible:e.visible},on:{ok:function(t){e.visible=!1},cancel:function(t){e.visible=!1}}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"功能测试"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["test",e.validatorRules.test],expression:"['test', validatorRules.test]"}],attrs:{placeholder:"请输入"},on:{change:function(t){return e.testValue=t.target.value}}})],1)],1),a("a-row",{attrs:{type:"flex",gutter:8}},e._l(e.testValue,(function(t,r){return a("a-col",{key:r},[a("a-row",[a("a-col",[a("a-input",{staticStyle:{"text-align":"center",width:"40px"},attrs:{value:t}})],1),a("a-col",{staticStyle:{"text-align":"center"}},[e._v(e._s(r+1))])],1)],1)})),1)],1)},n=[],o=a("ca00"),i={name:"SysCheckRuleTestModal",data:function(){var e=this;return{title:"操作",visible:!1,ruleCode:"",testValue:"",form:this.$form.createForm(this),validatorRules:{test:{rules:[{validator:function(t,a,r){return Object(o["w"])(e.ruleCode,a,r)}}]}}}},methods:{open:function(e){this.ruleCode=e,this.form.resetFields(),this.testValue="",this.visible=!0}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"0e3a1b08",null);t["default"]=c.exports},8034:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:"600",placement:"right",closable:!0,visible:e.visible},on:{close:e.close}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[e.designNameOption.length>0?a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:""}},[a("a-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("a-card",{style:{marginTop:"12px",height:"auto"}},[a("a-checkbox-group",{staticStyle:{width:"100%"},on:{change:e.designNameChange},model:{value:e.designNameValue,callback:function(t){e.designNameValue=t},expression:"designNameValue"}},[a("a-row",[e._l(e.designNameOption,(function(t){return[a("a-col",{attrs:{span:20}},[a("a-checkbox",{attrs:{value:t.value}},[e._v(e._s(t.text))])],1)]}))],2)],1)],1)],1)],1)],1):a("div",[a("h3",[e._v("无可配置角色!")])])],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"2",on:{click:e.cancelCheckALL}},[e._v("取消全选")])],1),a("a-button",[e._v("\n        操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.close}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v("保存")])],1)],1)},n=[],o=a("0fea"),i=a("d579");a("89f2");function s(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"DeptRoleUserModal",components:{JEllipsis:i["default"]},data:function(){return{currentDeptId:"",title:"部门角色分配",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{},url:{add:"/sys/sysDepartRole/deptRoleUserAdd",getDeptRoleList:"/sys/sysDepartRole/getDeptRoleList",getDeptRoleByUserId:"/sys/sysDepartRole/getDeptRoleByUserId"},designNameOption:[],userId:"",newRoleId:"",oldRoleId:"",designNameValue:[],desformList:[]}},created:function(){},methods:{add:function(e,t){this.userId=e.id,this.currentDeptId=t,this.loadDesformList(),this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,Object(o["e"])(this.url.getDeptRoleByUserId,{userId:this.userId,departId:this.currentDeptId}).then((function(e){if(e.success){var a,r=[],n=s(e.result);try{for(n.s();!(a=n.n()).done;){var o=a.value;r.push(o.droleId)}}catch(i){n.e(i)}finally{n.f()}t.oldRoleId=r.join(","),t.designNameValue=r,t.newRoleId=r.join(",")}}))},close:function(){this.$emit("close"),this.visible=!1},handleSubmit:function(){var e=this;e.confirmLoading=!0;var t=this.url.add,a="post",r=Object.assign(this.model,{});r.userId=this.userId,r.newRoleId=this.newRoleId,r.oldRoleId=this.oldRoleId,Object(o["i"])(t,r,a).then((function(t){t.success?(e.$message.success(t.message),e.$emit("reload"),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))},handleCancel:function(){this.designNameOption=[],this.designNameValue=[],this.close()},designNameChange:function(e){this.newRoleId=e.join(",")},checkALL:function(){var e,t=[],a=s(this.desformList);try{for(a.s();!(e=a.n()).done;){var r=e.value;t.push(r.id)}}catch(n){a.e(n)}finally{a.f()}this.designNameValue=t,this.newRoleId=t.join(",")},cancelCheckALL:function(){this.designNameValue=[],this.newRoleId=""},loadDesformList:function(){var e=this;Object(o["e"])(this.url.getDeptRoleList,{departId:this.currentDeptId,userId:this.userId}).then((function(t){if(t.success){e.desformList=t.result;var a,r=[],n=s(e.desformList);try{for(n.s();!(a=n.n()).done;){var o=a.value;r.push({value:o.id,text:o.roleName})}}catch(i){n.e(i)}finally{n.f()}e.designNameOption=r}}))}}},u=d,f=(a("3205"),a("2877")),m=Object(f["a"])(u,r,n,!1,null,"522bfb8d",null);t["default"]=m.exports},8144:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:!1,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("名称")]),a("a-col",{attrs:{span:20,"data-prop":"itemText"}},[a("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.model.itemText,callback:function(t){e.$set(e.model,"itemText",t)},expression:"model.itemText"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("数据值")]),a("a-col",{attrs:{span:20,"data-prop":"itemValue"}},[a("a-input",{attrs:{placeholder:"请输入数据值"},model:{value:e.model.itemValue,callback:function(t){e.$set(e.model,"itemValue",t)},expression:"model.itemValue"}})],1),a("a-col",{attrs:{span:4}},[e._v("描述")]),a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{placeholder:"请输入描述"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("a-col",{attrs:{span:4}},[e._v("排序值")]),a("a-col",{attrs:{span:20}},[a("a-input-number",{attrs:{min:1},model:{value:e.model.sortOrder,callback:function(t){e.$set(e.model,"sortOrder",t)},expression:"model.sortOrder"}}),e._v("\n          值越小越靠前\n        ")],1),a("a-col",{attrs:{span:4}},[e._v("是否启用")]),a("a-col",{attrs:{span:20}},[a("a-switch",{attrs:{checkedChildren:"启用",unCheckedChildren:"禁用"},on:{change:e.onChose},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i=a("0fea"),s={name:"DictItemModal",data:function(){return{title:"操作",visible:!1,visibleCheck:!0,model:{},dictId:"",status:1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{itemText:[{required:!0,message:"请输入名称!"}],itemValue:[{required:!0,message:"请输入数据值!"},{validator:this.validateItemValue}]}}},methods:{add:function(e){this.dictId=e,this.edit({sortOrder:1,status:1})},edit:function(e){e.id&&(this.dictId=e.dictId),this.status=e.status,this.visibleCheck=1===e.status,this.model=Object.assign({},e),this.model.dictId=this.dictId,this.model.status=this.status,this.visible=!0},onChose:function(e){e?(this.status=1,this.visibleCheck=!0):(this.status=0,this.visibleCheck=!1)},handleOk:function(){var e,t=this,a=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;a&&(t.confirmLoading=!0,this.model.itemText=(this.model.itemText||"").trim(),this.model.itemValue=(this.model.itemValue||"").trim(),this.model.description=(this.model.description||"").trim(),this.model.status=this.status,e=this.model.id?Object(o["x"])(this.model):Object(o["d"])(this.model),e.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.$refs.formRow.clearValidate()},validateItemValue:function(e,t,a){var r={itemValue:t,dictId:this.dictId};if(this.model.id&&(r.id=this.model.id),t){var n=new RegExp("[`_~!@#$^&*()=|{}'.<>《》/?！￥（）—【】‘；：”“。，、？]");n.test(t)?a("数据值不能包含特殊字符！"):Object(i["e"])("/sys/dictItem/dictItemCheck",r).then((function(e){e.success?a():a(e.message)}))}else a()}}},l=s,c=(a("8567"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"4642ba6f",null);t["default"]=d.exports},"814d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"二级域名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["domainUrl",{}],expression:"['domainUrl', {}]"}],attrs:{placeholder:"请输入二级域名"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据源名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sourceName",{}],expression:"['sourceName', {}]"}],attrs:{placeholder:"请输入数据源名称"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"redis的database"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["redisIndex",{}],expression:"['redisIndex', {}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入redis的database"}})],1),e.isSelect?a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"租户名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["domainName",{}],expression:"['domainName', {}]"}],attrs:{placeholder:"请输入租户名称"}})],1):e._e()],1)],1)],1)},n=[],o=a("0fea"),i=a("88bc"),s=a.n(i),l=a("9fb0"),c=a("2b0e"),d={name:"JoinDataSourceDomainModal",data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{},isSelect:!1,url:{add:"/domain/joinDataSourceDomain/add",edit:"/domain/joinDataSourceDomain/edit"}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.isSelect="true"==c["default"].ls.get(l["u"]),this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(s()(t.model,"domainUrl","sourceName","redisIndex","domainName"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var n="",i="";e.model.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post");var s=Object.assign(e.model,r);Object(o["i"])(n,s,i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()}}},u=d,f=a("2877"),m=Object(f["a"])(u,r,n,!1,null,"e89c4a3c",null);t["default"]=m.exports},8567:function(e,t,a){"use strict";a("0cdf")},"88d6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:"详情",width:1600,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",footer:null},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-descriptions",{attrs:{column:2}},[a("a-descriptions-item",{attrs:{label:"第三方系统名称"}},[e._v(e._s(e.model.thirdName))]),a("a-descriptions-item",{attrs:{label:"编码"}},[e._v(e._s(e.model.code))]),a("a-descriptions-item",{attrs:{label:"请求路径"}},[e._v(e._s(e.model.url))]),a("a-descriptions-item",{attrs:{label:"请求类型"}},[e._v(e._s(e.model.requestType))]),a("a-descriptions-item",{attrs:{label:"业务类型"}},[e._v(e._s(e.model.mainSource))]),a("a-descriptions-item",{attrs:{label:"业务主键"}},[e._v(e._s(e.model.mainId))]),a("a-descriptions-item",{attrs:{label:"返回码"}},[e._v(e._s(e.model.httpCode))]),a("a-descriptions-item",{attrs:{label:"请求耗时"}},[e._v(e._s(e.model.costTime))]),a("a-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.model.createTime))]),a("a-descriptions-item",{attrs:{label:"创建人"}},[e._v(e._s(e.model.createBy))])],1),a("a-descriptions",{attrs:{column:1}},[a("a-descriptions-item",{attrs:{label:"请求头"}},[e._v(e._s(e.model.headers))]),a("a-descriptions-item",{attrs:{label:"输入"}},[e._v(e._s(e.model.indata))]),a("a-descriptions-item",{attrs:{label:"输出"}},[e._v(e._s(e.model.outdata))]),a("a-descriptions-item",{attrs:{label:"备注"}},[e._v(e._s(e.model.remark))])],1)],1)],1)},n=[],o=(a("0fea"),a("88bc"),a("c1df"),{name:"HttpLogModal",data:function(){return{title:"详情",visible:!1,model:{},confirmLoading:!1}},created:function(){},methods:{edit:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.model={},this.visible=!1},handleCancel:function(){this.close()}}}),i=o,s=a("2877"),l=Object(s["a"])(i,r,n,!1,null,"63348006",null);t["default"]=l.exports},"89ff":function(e,t,a){"use strict";a("36c1")},"8e7c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"code",required:"",label:"职务编码"}},[a("a-input",{attrs:{placeholder:"请输入职务编码","read-only":e.readOnly},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",required:"",label:"职务名称"}},[a("a-input",{attrs:{placeholder:"请输入职务名称"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"postRank",required:"",label:"职级"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择职级",dictCode:"position_rank"},model:{value:e.model.postRank,callback:function(t){e.$set(e.model,"postRank",t)},expression:"model.postRank"}})],1)],1)],1)],1)},n=[],o=(a("88bc"),a("0fea")),i=a("4ec3"),s=a("7b16"),l=null,c={name:"SysPositionModal",components:{JDictSelectTag:s["default"]},data:function(){var e=this;return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{code:[{required:!0,message:"请输入职务编码"},{validator:function(t,a,r){l&&clearTimeout(l),l=setTimeout((function(){Object(i["s"])({tableName:"sys_position",fieldName:"code",fieldVal:a,dataId:e.model.id}).then((function(e){e.success?r():r(e.message)})).catch(console.error)}),300)}}],name:[{required:!0,message:"请输入职务名称"}],postRank:[{required:!0,message:"请选择职级"}]},url:{add:"/sys/position/add",edit:"/sys/position/edit"},readOnly:!1}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){this.model=Object.assign({},e),this.visible=!0,e.id?this.readOnly=!0:this.readOnly=!1},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var r="",n="";e.model.id?(r+=e.url.edit,n="put"):(r+=e.url.add,n="post"),Object(o["i"])(r,e.model,n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()}}},d=c,u=a("2877"),f=Object(u["a"])(d,r,n,!1,null,"561e114e",null);t["default"]=f.exports},9655:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1e3,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则名称",prop:"ruleName"}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.model.ruleName,callback:function(t){e.$set(e.model,"ruleName",t)},expression:"model.ruleName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则Code",prop:"ruleCode"}},[a("a-input",{attrs:{placeholder:"请输入规则Code"},model:{value:e.model.ruleCode,callback:function(t){e.$set(e.model,"ruleCode",t)},expression:"model.ruleCode"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"规则描述",prop:"ruleDescription"}},[a("a-textarea",{attrs:{placeholder:"请输入规则描述"},model:{value:e.model.ruleDescription,callback:function(t){e.$set(e.model,"ruleDescription",t)},expression:"model.ruleDescription"}})],1)],1),a("a-tabs",{model:{value:e.tabs.activeKey,callback:function(t){e.$set(e.tabs,"activeKey",t)},expression:"tabs.activeKey"}},[a("a-tab-pane",{key:e.tabs.design.key,attrs:{tab:"局部规则",forceRender:""}},[a("a-alert",{attrs:{type:"info",showIcon:"",message:"局部规则按照你输入的位数有序的校验。"}}),a("j-editable-table",{ref:"designTable",staticStyle:{"margin-top":"8px"},attrs:{dragSort:"",rowNumber:"",maxHeight:240,columns:e.tabs.design.columns,dataSource:e.tabs.design.dataSource},scopedSlots:e._u([{key:"action",fn:function(e){return[a("my-action-button",{attrs:{rowEvent:e}})]}}])})],1),a("a-tab-pane",{key:e.tabs.global.key,attrs:{tab:"全局规则",forceRender:""}},[a("j-editable-table",{ref:"globalTable",attrs:{dragSort:"",rowNumber:"",actionButton:"",maxHeight:240,columns:e.tabs.global.columns,dataSource:e.tabs.global.dataSource},scopedSlots:e._u([{key:"actionButtonAfter",fn:function(){return[a("a-alert",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"info",showIcon:"",message:"全局规则可校验用户输入的所有字符；全局规则的优先级比局部规则的要高。"}})]},proxy:!0},{key:"action",fn:function(e){return[a("my-action-button",{attrs:{rowEvent:e,allowEmpty:""}})]}}])})],1)],1)],1)],1)},n=[],o=a("88bc"),i=a.n(o),s=a("0fea"),l=a("ca00"),c=a("e2e0"),d=a("7550");function u(e,t){return v(e)||p(e,t)||m(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function p(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,s=[],l=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return s}}function v(e){if(Array.isArray(e))return e}var b={name:"SysCheckRuleModal",components:{JEditableTable:d["default"],"my-action-button":{props:{rowEvent:Object,allowEmpty:Boolean},methods:{confirmIsShow:function(){var e=this.rowEvent,t=e.index,a=e.allValues.inputValues,r=a[t];return r.digits||r.pattern},handleLineAdd:function(){var e=this.rowEvent.target;e.add()},handleLineDelete:function(){var e=this.rowEvent,t=e.rowId,a=e.target;a.removeRows(t)},renderDeleteButton:function(){var e=this.$createElement;return this.allowEmpty||this.rowEvent.index>0?this.confirmIsShow()?e("a-popconfirm",{attrs:{title:"确定要删除吗？"},on:{confirm:this.handleLineDelete}},[e("a-button",{attrs:{icon:"minus"}})]):e("a-button",{attrs:{icon:"minus"},on:{click:this.handleLineDelete}}):""}},render:function(){var e=arguments[0];return e("div",[e("a-button",{on:{click:this.handleLineAdd},attrs:{icon:"plus"}})," ",this.renderDeleteButton()])}}},data:function(){var e=this;return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{ruleName:[{required:!0,message:"请输入规则名称!"}],ruleCode:[{required:!0,message:"请输入规则Code!"},{validator:function(t,a,r){return Object(l["x"])("sys_check_rule","rule_code",a,e.model.id,r)}}]},tabs:{activeKey:"design",global:{key:"global",columns:[{title:"优先级",key:"priority",width:"15%",type:c["a"].select,defaultValue:"1",options:[{title:"优先运行",value:"1"},{title:"最后运行",value:"0"}],validateRules:[]},{title:"规则(正则表达式)",key:"pattern",width:"50%",type:c["a"].input,validateRules:[{required:!0,message:"规则不能为空"},{handler:this.validatePatternHandler}]},{title:"提示文本",key:"message",width:"20%",type:c["a"].input,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"操作",key:"action",width:"15%",slotName:"action",type:c["a"].slot}],dataSource:[]},design:{key:"design",columns:[{title:"位数",key:"digits",width:"15%",type:c["a"].inputNumber,validateRules:[{required:!0,message:"${title}不能为空"},{pattern:/^[1-9]\d*$/,message:"请输入零以上的正整数"}]},{title:"规则(正则表达式)",key:"pattern",width:"50%",type:c["a"].input,validateRules:[{required:!0,message:"规则不能为空"},{handler:this.validatePatternHandler}]},{title:"提示文本",key:"message",width:"20%",type:c["a"].input,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"操作",key:"action",width:"15%",slotName:"action",type:c["a"].slot}],dataSource:[]}},url:{add:"/sys/checkRule/add",edit:"/sys/checkRule/edit"}}},created:function(){},methods:{validatePatternHandler:function(e,t,a,r,n,o){if("blur"===e||"getValues"===e)try{new RegExp(t),n(!0)}catch(i){n(!1,"请输入正确的正则表达式")}else n(!0)},add:function(){this.edit({})},edit:function(e){var t=this;this.tabs.activeKey=this.tabs.design.key,this.tabs.global.dataSource=[],this.tabs.design.dataSource=[{digits:"",pattern:"",message:""}],this.visible=!0,this.$nextTick((function(){t.$refs.form.resetFields(),t.model=Object.assign({},e);var a=t.model.ruleJson;if(a){var r=JSON.parse(a),n=[],o=[],i="1";r.forEach((function(e){"*"===e.digits?n.push(Object.assign(e,{priority:i})):(i="0",o.push(e))})),t.tabs.global.dataSource=n,t.tabs.design.dataSource=o}}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;Promise.all([Object(l["b"])(new Promise((function(t,a){e.$refs.form.validate((function(r,n){return r?t(e.model):a(n)}))}))),Object(l["b"])(this.$refs.designTable.getValuesPromise),Object(l["b"])(this.$refs.globalTable.getValuesPromise)]).then((function(t){var a=u(t,3),r=a[0],n=a[1],o=a[2];if(r.type===l["e"])return Promise.reject("主表校验未通过");if(n.type===l["e"])return e.tabs.activeKey=e.tabs.design.key,Promise.reject("局部规则子表校验未通过");if(o.type===l["e"])return e.tabs.activeKey=e.tabs.global.key,Promise.reject("全局规则子表校验未通过");var c=r.data,d=o.data,f=n.data,m=[],h=[];d.forEach((function(e){e.digits="*","1"===e.priority?m.push(e):h.push(e)}));var p=m.concat(f).concat(h),v=p.map((function(e){return i()(e,"digits","pattern","message")})),b=JSON.stringify(v),y=Object.assign(e.model,c,{ruleJson:b}),g="post",w=e.url.add;return e.model.id&&(g="put",w=e.url.edit),e.confirmLoading=!0,Object(s["i"])(w,y,g)})).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.warning(t.message)})).catch((function(e){})).finally((function(){e.confirmLoading=!1}))},handleCancel:function(){this.close()}}},y=b,g=a("2877"),w=Object(g["a"])(y,r,n,!1,null,"3cba52aa",null);t["default"]=w.exports},"9a1f":function(e,t,a){},"9d96":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{visible:e.isDisable,title:e.tokenTitle,okText:"确认","cancel-text":"取消",okButtonProps:{props:{icon:"check"}},cancelButtonProps:{props:{icon:"close"}},destroyOnClose:""},on:{cancel:e.handleCancel,ok:e.handleOk},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("关闭")],1),a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("确定")],1)]},proxy:!0}])},[a("a-form-model",{ref:"tokenForm",staticClass:"height-135",staticStyle:{"min-height":"140px"},attrs:{model:e.tokenModel,rules:e.tokenRules}},[a("a-form-model-item",{attrs:{prop:"clientId"}},[a("a-select",{attrs:{placeholder:"请选择令牌号",allowClear:!0,dropdownMenuStyle:{maxHeight:"100px"}},model:{value:e.tokenModel.clientId,callback:function(t){e.$set(e.tokenModel,"clientId",t)},expression:"tokenModel.clientId"}},e._l(e.tokenNoList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.tokenNo}},[e._v("\n          "+e._s(t.tokenNo)+"\n        ")])})),1)],1)],1)],1)},n=[],o=a("0fea"),i={name:"UserClientModal",data:function(){return{isDisable:!1,tokenTitle:"令牌绑定",tokenModel:{},tokenNoList:[],tokenRules:{clientId:[{required:!1,message:"请选择令牌号！",trigger:"change"}]},url:{getTokenList:"/sys/otpStorage/getTokenList"}}},methods:{getTokenNoList:function(e){var t=this;e.clientId&&this.$set(this.tokenModel,"clientId",e.clientId),this.tokenModel.userId=e.id,Object(o["e"])(this.url.getTokenList,{corpCode:e.orgCode,state:"0"}).then((function(e){e.success&&(t.tokenNoList=e.result,t.isDisable=!0)}))},handleCancel:function(){this.tokenModel={},this.isDisable=!1},handleOk:function(){var e=this;this.$refs.tokenForm.validate((function(t){if(!t)return!1;Object(o["e"])("/base/rCorpInfo/updateUserClientId",{clientId:e.tokenModel.clientId,userId:e.tokenModel.userId}).then((function(t){t.success?(e.$message.success("操作成功"),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.handleCancel()}))}))}}},s=i,l=(a("4d35"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"38b1c07d",null);t["default"]=c.exports},a119:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules,colon:!1}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"roleName",label:"机构角色名称"}},[a("a-input",{attrs:{placeholder:"请输入机构角色名称"},model:{value:e.model.roleName,callback:function(t){e.$set(e.model,"roleName",t)},expression:"model.roleName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"roleCode",label:"机构角色编码"}},[a("a-input",{attrs:{placeholder:"请输入机构角色编码"},model:{value:e.model.roleCode,callback:function(t){e.$set(e.model,"roleCode",t)},expression:"model.roleCode"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"description",label:"描述"}},[a("a-input",{attrs:{placeholder:"请输入描述"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1)],1)],1)},n=[],o=a("0fea"),i={name:"SysDepartRoleModal",data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{roleName:[{required:!0,message:"请输入机构角色名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请输入机构角色编码!"},{min:0,max:64,message:"长度不超过 64 个字符",trigger:"blur"},{validator:this.validateRoleCode}],description:[{min:0,max:126,message:"长度不超过 126 个字符",trigger:"blur"}]},url:{add:"/sys/sysDepartRole/add",edit:"/sys/sysDepartRole/edit"}}},created:function(){},methods:{add:function(e){this.edit({},e)},edit:function(e,t){this.departId=t,this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var r="",n="";e.model.id?(r+=e.url.edit,n="put"):(r+=e.url.add,n="post"),e.model.departId=e.departId,e.model.delFlag=0,Object(o["i"])(r,e.model,n).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},validateRoleCode:function(e,t,a){if(/[\u4E00-\u9FA5]/g.test(t))a("机构角色编码不可输入汉字!");else{var r={departId:this.departId,roleCode:t};this.model.id&&(r.id=this.model.id),Object(o["j"])("/sys/sysDepartRole/checkRole",r).then((function(e){e.success?a():a(e.message)}))}}}},s=i,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,"12d43db0",null);t["default"]=c.exports},a6d5:function(e,t,a){},a725:function(e,t,a){"use strict";a("2874")},aa42f:function(e,t,a){"use strict";a("6b49")},ab1c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:"queryList"},on:{ok:e.handleSuperQuery}}),a("div",[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,reload:e.queryPage,expand:!1,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.handleAdd}},[e._v("新建")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAddModel}},[e._v("新增动态报表")]),a("a-button",{attrs:{type:"primary"},on:{click:e.updateUreport2DBSourse}},[a("a-icon",{attrs:{type:"api"}}),e._v(" 统一更新数据源")],1),a("a-button",{on:{click:e.batchDel}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 批量删除")],1)],1)]},proxy:!0},{key:"formType",fn:function(t){t.text;var r=t.row;return[a("span",[e._v("\n          "+e._s(r.formType_dictText?r.formType_dictText:r.formType)+"\n        ")])]}},{key:"sysOrgCode",fn:function(t){var r=t.text,n=t.row;return[a("span",null==r?[e._v("系统预设")]:[e._v(e._s(n.sysOrgCode_dictText))])]}},{key:"action",fn:function(t){t.text;var r=t.row;return[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleModel(r)}}},[e._v("模板")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(r.id)}}},[a("a",[e._v("删除")])])]}}])})],1),a("ureport2Config-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("dbSource",{ref:"updateSource",on:{ok:e.modalFormOk}})],1)},n=[],o=a("cac4"),i=a("0a5e"),s=a("1d31"),l=a("0fea"),c=a("1c2c"),d=a("6fa9"),u={name:"Ureport2ConfigList",mixins:[i["a"],s["UreportMixins"]],components:{Ureport2ConfigModal:o["default"],dbSource:c["default"],MESSuperQuery:d["default"]},data:function(){var e=this;return{fileName:"Ureport2ConfigList",expenditureData:[],data:[],description:"动态表单配置管理页面",url:{list:"/ureport2/ureport2Config/list",delete:"/ureport2/ureport2Config/delete",deleteBatch:"/ureport2/ureport2Config/deleteBatch",exportXlsUrl:"ureport2/ureport2Config/exportXls",importExcelUrl:"ureport2/ureport2Config/importExcel"},loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},created:function(){this.init()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{}},f=u,m=(a("bc82"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"661ddf9b",null);t["default"]=h.exports},abfc:function(e,t,a){},af00:function(e,t,a){},af5c:function(e,t,a){"use strict";a("0944")},b3c4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{centered:"",title:e.title,width:1e3,visible:e.visible,"confirm-loading":e.loading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:6}},[a("a-form-item",[a("a-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{span:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns1,dataSource:e.dataSource1,pagination:e.ipagination,loading:e.loading,scroll:{y:240},rowSelection:{selectedRowKeys:e.selectedRowKeys,onSelectAll:e.onSelectAll,onSelect:e.onSelect,onChange:e.onSelectChange}},on:{change:e.handleTableChange}})],1)])],1)},n=[],o=a("ca00"),i=a("0fea"),s={name:"SelectUserModal",props:{autoClose:{type:Boolean,default:!0}},data:function(){return{title:"添加已有用户",names:[],visible:!1,placement:"right",description:"",queryParam:{},columns1:[{title:"#",dataIndex:"",key:"rowIndex",width:50,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"用户账号",align:"center",width:100,dataIndex:"username"},{title:"用户名称",align:"center",width:100,dataIndex:"realname"},{title:"性别",align:"center",width:100,dataIndex:"sex_dictText"},{title:"电话",align:"center",width:100,dataIndex:"phone"},{title:"部门",align:"center",width:150,dataIndex:"orgCode"}],columns2:[{title:"用户账号",align:"center",dataIndex:"username"},{title:"用户名称",align:"center",dataIndex:"realname"},{title:"操作",dataIndex:"action",align:"center",width:100,scopedSlots:{customRender:"action"}}],dataSource1:[],dataSource2:[],ipagination:{current:1,pageSize:10,pageSizeOptions:["10","20","30","40","50"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"createTime",order:"desc"},loading:!1,selectedRowKeys:[],selectedRows:[],url:{list:"/sys/user/list"}}},created:function(){this.loadData()},methods:{searchQuery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleCancel:function(){this.visible=!1},handleOk:function(){this.dataSource2=this.selectedRowKeys,0!=this.dataSource2.length?this.$emit("selectFinished",this.dataSource2,this.selectionRows):this.$emit("selectEmpty"),this.selectedRowKeys=[],this.selectionRows=[],this.autoClose&&(this.visible=!1)},add:function(){this.visible=!0},loadData:function(e){var t=this;1===e&&(this.ipagination.current=1);var a=this.getQueryParams();Object(i["e"])(this.url.list,a).then((function(e){e.success&&(t.dataSource1=e.result.records,t.ipagination.total=e.result.total)}))},getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(o["f"])(e)},getQueryField:function(){},onSelectAll:function(e,t,a){if(!0===e)for(var r=0;r<a.length;r++)this.dataSource2.push(a[r]);else for(var n=0;n<a.length;n++)this.dataSource2.splice(this.dataSource2.indexOf(a[n]),1)},onSelect:function(e,t){if(!0===t)this.dataSource2.push(e);else{var a=this.dataSource2.indexOf(e);a>=0&&this.dataSource2.splice(this.dataSource2.indexOf(e),1)}},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectionRows=t},onClearSelected:function(){this.selectedRowKeys=[],this.selectionRows=[]},handleDelete:function(e){this.dataSource2.splice(this.dataSource2.indexOf(e),1)},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=e,this.loadData()}}},l=s,c=(a("5e65"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"31f2140b",null);t["default"]=d.exports},b469:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{width:e.modalWidth,visible:e.visible,title:"数据对比窗口",confirmLoading:e.confirmLoading,cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticClass:"form",attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:8}},[a("a-form-item",{attrs:{label:"数据库表名","label-col":{span:6},"wrapper-col":{span:15}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataTale",{}],expression:"[ 'dataTale', {}]"}],attrs:{placeholder:"请输入数据库表名",disabled:""},on:{blur:e.handleTableBlur}})],1)],1),a("a-col",{attrs:{md:12,sm:8}},[a("a-form-item",{attrs:{label:"数据ID","label-col":{span:5},"wrapper-col":{span:15}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataId",{}],expression:"[ 'dataId', {}]"}],attrs:{placeholder:"请输入数据ID",disabled:""},on:{blur:e.handleIdBlur}})],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:8}},[a("a-form-item",{attrs:{label:"版本号1","label-col":{span:6},"wrapper-col":{span:15}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataVersion1",{}],expression:"[ 'dataVersion1', {}]"}],attrs:{placeholder:"请选择版本号"},on:{change:e.handleChange1}},e._l(e.DataVersionList,(function(t,r){return a("a-select-option",{key:r.toString(),attrs:{value:t.id}},[e._v("\n                  "+e._s(t.dataVersion)+"\n                ")])})),1)],1)],1),a("a-col",{attrs:{md:12,sm:8}},[a("a-form-item",{attrs:{label:"版本号2","label-col":{span:5},"wrapper-col":{span:15}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataVersion2",{}],expression:"[ 'dataVersion2', {}]"}],attrs:{placeholder:"请选择版本号"},on:{change:e.handleChange2}},e._l(e.DataVersionList,(function(t,r){return a("a-select-option",{key:r.toString(),attrs:{value:t.id}},[e._v("\n                  "+e._s(t.dataVersion)+"\n                ")])})),1)],1)],1)],1)],1)],1),a("data-log-compare-modal",{ref:"modal",on:{ok:e.modalFormOk}})],1)],1)},n=[],o=a("0fea"),i=a("fcbc"),s={name:"DataLogModal",components:{DataLogCompareModal:i["default"]},dataId1:"",dataId2:"",dataTable1:"",dataID3:"",data:function(){return{modalWidth:700,modaltoggleFlag:!0,confirmDirty:!1,title:"操作",visible:!1,model:{},confirmLoading:!1,headers:{},form:this.$form.createForm(this),url:{queryDataVerListUrl:"/sys/dataLog/queryDataVerList"},DataVersionList:[]}},created:function(){},methods:{addModal:function(e){var t=this,a=e[0].dataTable,r=e[0].dataId,n=e[0].dataVersion,o=e[1].dataVersion;this.dataId1=e[0].id,this.dataId2=e[1].id,this.dataTable1=e[0].dataTable,this.dataID3=e[0].dataId,this.initDataVersionList(),this.form.resetFields(),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({dataTale:a,dataId:r,dataVersion1:n,dataVersion2:o})}))},handleOk:function(){this.close(),this.$refs.modal.compareModal(this.dataId1,this.dataId2),this.$refs.modal.title="数据比较"},handleCancel:function(){this.close()},handleSubmit:function(){},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1},modalFormOk:function(){},initDataVersionList:function(){var e=this,t=this;Object(o["e"])(t.url.queryDataVerListUrl,{dataTable:this.dataTable1,dataId:this.dataID3}).then((function(t){t.success?e.DataVersionList=t.result:(e.DataVersionList=[],e.dataId1="",e.dataId2="")}))},handleChange1:function(e){this.dataId1=e},handleChange2:function(e){this.dataId2=e},handleTableBlur:function(e){this.dataTable1=e.target.value,this.initDataVersionList()},handleIdBlur:function(e){this.dataID3=e.target.value,this.initDataVersionList()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"adcb3c62",null);t["default"]=d.exports},b7a9:function(e,t,a){},b8c7:function(e,t,a){"use strict";a("1a93")},b90e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,width:e.drawerWidth,visible:e.visible,"destroy-on-close":!0,confirmLoading:e.confirmLoading},on:{close:e.handleCancel}},[a("div",{style:{width:"100%",padding:"10px 16px",background:"#fff"}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:e.disableSubmit,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e._v("菜单类型")]),a("a-col",{attrs:{span:20}},[a("a-radio-group",{on:{change:e.onChangeMenuType},model:{value:e.model.menuType,callback:function(t){e.$set(e.model,"menuType",t)},expression:"model.menuType"}},[a("a-radio",{attrs:{value:0}},[e._v("一级菜单")]),a("a-radio",{attrs:{value:1}},[e._v("子菜单")]),a("a-radio",{attrs:{value:2}},[e._v("按钮/权限")])],1)],1),a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("菜单名称")]),a("a-col",{attrs:{span:20,"data-prop":"name"}},[a("a-input",{attrs:{placeholder:"请输入菜单名称",readOnly:e.disableSubmit},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-col",{directives:[{name:"show",rawName:"v-show",value:0!==e.model.menuType,expression:"model.menuType !== 0"}],attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("上级菜单")]),a("a-col",{directives:[{name:"show",rawName:"v-show",value:0!==e.model.menuType,expression:"model.menuType !== 0"}],attrs:{span:20,"data-prop":"parentId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,placeholder:"请选择父级菜单",disabled:e.disableSubmit},on:{change:e.handleParentIdChange},model:{value:e.model.parentId,callback:function(t){e.$set(e.model,"parentId",t)},expression:"model.parentId"}})],1),a("a-col",{directives:[{name:"show",rawName:"v-show",value:0===e.model.menuType,expression:"model.menuType === 0"}],attrs:{span:4}},[e._v("默认跳转地址")]),a("a-col",{directives:[{name:"show",rawName:"v-show",value:0===e.model.menuType,expression:"model.menuType === 0"}],attrs:{span:20}},[a("a-input",{attrs:{placeholder:"请输入路由参数 redirect",readOnly:e.disableSubmit},model:{value:e.model.redirect,callback:function(t){e.$set(e.model,"redirect",t)},expression:"model.redirect"}})],1),e.show?[a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("菜单路径")]),a("a-col",{attrs:{span:20,"data-prop":"url"}},[a("a-input",{attrs:{placeholder:"请输入菜单路径",readOnly:e.disableSubmit},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),a("a-col",{attrs:{span:4}},[e.disableSubmit?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("前端组件")]),a("a-col",{attrs:{span:20,"data-prop":"component"}},[a("a-input",{attrs:{placeholder:"请输入前端组件",readOnly:e.disableSubmit},model:{value:e.model.component,callback:function(t){e.$set(e.model,"component",t)},expression:"model.component"}})],1),a("a-col",{attrs:{span:4}},[e._v("菜单图标")]),a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{placeholder:"点击选择图标",readOnly:e.disableSubmit},model:{value:e.model.icon,callback:function(t){e.$set(e.model,"icon",t)},expression:"model.icon"}},[a("a-icon",{attrs:{slot:"addonAfter",type:"setting"},on:{click:e.selectIcons},slot:"addonAfter"})],1)],1),a("a-col",{attrs:{span:4}},[e._v("排序")]),a("a-col",{attrs:{span:20}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入菜单排序",readOnly:e.disableSubmit},model:{value:e.model.sortNo,callback:function(t){e.$set(e.model,"sortNo",t)},expression:"model.sortNo"}})],1),a("a-col",{attrs:{span:4}},[e._v("是否路由菜单")]),a("a-col",{attrs:{span:20}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否"},model:{value:e.model.route,callback:function(t){e.$set(e.model,"route",t)},expression:"model.route"}})],1),a("a-col",{attrs:{span:4}},[e._v("隐藏路由")]),a("a-col",{attrs:{span:20}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否"},model:{value:e.model.hidden,callback:function(t){e.$set(e.model,"hidden",t)},expression:"model.hidden"}})],1),a("a-col",{attrs:{span:4}},[e._v("聚合路由")]),a("a-col",{attrs:{span:20}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否"},model:{value:e.model.alwaysShow,callback:function(t){e.$set(e.model,"alwaysShow",t)},expression:"model.alwaysShow"}})],1),a("a-col",{attrs:{span:4}},[e._v("打开方式")]),a("a-col",{attrs:{span:20}},[a("a-switch",{attrs:{checkedChildren:"外部",unCheckedChildren:"内部"},model:{value:e.model.internalOrExternal,callback:function(t){e.$set(e.model,"internalOrExternal",t)},expression:"model.internalOrExternal"}})],1)]:[a("a-col",{attrs:{span:4}},[e._v("授权标识")]),a("a-col",{attrs:{span:20,"data-prop":"perms"}},[a("a-input",{attrs:{placeholder:"请输入授权标识, 如: user:list",readOnly:e.disableSubmit},model:{value:e.model.perms,callback:function(t){e.$set(e.model,"perms",t)},expression:"model.perms"}})],1),a("a-col",{attrs:{span:4}},[e._v("授权策略")]),a("a-col",{attrs:{span:20}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择授权策略",type:"radio",dictCode:"global_perms_type"},model:{value:e.model.permsType,callback:function(t){e.$set(e.model,"permsType",t)},expression:"model.permsType"}})],1),a("a-col",{attrs:{span:4}},[e._v("状态")]),a("a-col",{attrs:{span:20}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择状态",type:"radio",dictCode:"valid_status"},model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}})],1)]],2)],1),a("icons",{attrs:{iconChooseVisible:e.iconChooseVisible},on:{choose:e.handleIconChoose,close:e.handleIconCancel}})],1),a("a-row",{style:{textAlign:"right",marginTop:"8px"}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.handleCancel}},[e._v(" 关闭 ")]),a("a-button",{attrs:{disabled:e.disableSubmit,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)],1)])},n=[],o=a("4ec3"),i=a("11cb");function s(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"PermissionModal",components:{Icons:i["default"]},data:function(){return{drawerWidth:700,treeData:[],title:"操作",visible:!1,disableSubmit:!1,model:{},show:!0,menuLabel:"菜单名称",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,iconChooseVisible:!1,validateStatus:""}},computed:{validatorRules:function(){return{name:[{required:!0,message:"请输入菜单标题!"}],component:[{required:this.show,message:"请输入前端组件!"}],parentId:[{required:0!==this.model.menuType,message:"请选择父级菜单!"}],url:[{required:this.show,message:"请输入菜单路径!"}],permsType:[{required:!0,message:"请输入授权策略!"}],perms:[{required:!1,message:"请输入授权标识!"},{validator:this.validatePerms}]}}},methods:{loadTree:function(){var e=this;Object(o["W"])().then((function(t){if(t.success){e.treeData=[];var a,r=t.result.treeList,n=s(r);try{for(n.s();!(a=n.n()).done;){var o=a.value,i=o;i.isLeaf=i.leaf,e.treeData.push(i)}}catch(l){n.e(l)}finally{n.f()}}}))},add:function(){this.edit({status:"1",permsType:"1",sortNo:1,route:!0,menuType:0})},edit:function(e){this.resetScreenSize(),this.model=Object.assign({},e),this.show=2!==e.menuType,this.menuLabel=2===e.menuType?"按钮/权限":"菜单名称",this.visible=!0,this.loadTree()},close:function(){this.$emit("close"),this.disableSubmit=!1,this.visible=!1,this.$refs.formRow.clearValidate()},handleOk:function(){var e=this,t=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;if(t){if(!(1!==this.model.menuType&&2!==this.model.menuType||this.model.parentId))return e.validateStatus="error",void e.$message.error("请检查你填的类型以及信息是否正确！");var a;e.validateStatus="success",e.confirmLoading=!0,a=this.model.id?Object(o["y"])(this.model):Object(o["f"])(this.model),a.then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))}},handleCancel:function(){this.close()},validateNumber:function(e,t,a){!t||new RegExp(/^[0-9]*[1-9][0-9]*$/).test(t)?a():a("请输入正整数!")},validatePerms:function(e,t,a){if(t&&t.length>0){var r={tableName:"sys_permission",fieldName:"perms",fieldVal:t,dataId:this.model.id};Object(o["s"])(r).then((function(e){e.success?a():a("授权标识已存在!")}))}else a()},onChangeMenuType:function(e){var t=this;2===this.model.menuType?(this.show=!1,this.menuLabel="按钮/权限"):(this.show=!0,this.menuLabel="菜单名称"),this.$nextTick((function(){t.$refs.formRow.clearValidate(["url","component"])}))},selectIcons:function(){this.iconChooseVisible=!0},handleIconCancel:function(){this.iconChooseVisible=!1},handleIconChoose:function(e){this.model.icon=e,this.iconChooseVisible=!1},resetScreenSize:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:800},handleParentIdChange:function(e){this.validateStatus=e?"success":"error"}}},u=d,f=(a("5a00"),a("2877")),m=Object(f["a"])(u,r,n,!1,null,"ba96772e",null);t["default"]=m.exports},b9a9:function(e,t,a){"use strict";a("6108")},bc82:function(e,t,a){"use strict";a("9a1f")},bccc:function(e,t,a){"use strict";a("abfc")},bea0:function(e,t,a){},bebd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{loading:e.modalLoading,width:900,title:"个性化配置"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"tools"},[a("a-button",{attrs:{type:"primary"},on:{click:e.addConfig}},[e._v("新增配置\n      ")])],1),a("vxe-table",{staticClass:"width100",attrs:{data:e.customData,"edit-config":{type:"manual",mode:"row"},"auto-resize":""}},[a("vxe-table-column",{attrs:{"edit-render":{type:"visible",name:"$input",props:{placeholder:"请输入关键字"}},field:"key",title:"关键字",width:"170"}}),a("vxe-table-column",{attrs:{"edit-render":{type:"visible",name:"$input",props:{placeholder:"请输入文本"}},field:"text",title:"文本",width:"170"}}),a("vxe-table-column",{attrs:{"edit-render":{type:"visible",name:"$input",props:{placeholder:"请输入描述"}},field:"remark","min-width":"200",title:"配置描述"}}),a("vxe-table-column",{attrs:{"edit-render":{type:"visible",name:"$switch"},align:"center",field:"flag",title:"是否启用",width:"100"}}),a("vxe-table-column",{attrs:{align:"center",title:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var r=t.rowIndex;return[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.removeConfig(r)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"delete"}})],1)]}}])})],1),a("div",{staticClass:"footer"},[a("a-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.saveConfig}},[e._v("保存")])],1)],1)],1)},n=[],o=(a("fa7d"),a("4ec3")),i={name:"PathCustomConfigModal",data:function(){return{visible:!1,model:{},customData:[],modalLoading:!1}},methods:{init:function(e){var t=[];if(e&&e.id){if(this.model=e,e.description)try{t=JSON.parse(e.description)}catch(a){this.$message.error(a)}}else this.$set(this,"model",{});this.$set(this,"customData",t),this.visible=!0},addConfig:function(){this.customData.push({key:"",text:"",remark:"",flag:!1})},saveConfig:function(){var e=this;this.modalLoading=!0;var t=this.customData.map((function(e){return{key:e.key,remark:e.remark,flag:e.flag,text:e.text||""}})),a=JSON.stringify(t);Object(o["y"])(Object.assign({},this.model,{description:a})).then((function(t){t.success&&(e.$message.success(t.message),e.visible=!1,e.$emit("ok"))})).catch((function(e){})).finally((function(){e.modalLoading=!1}))},removeConfig:function(e){this.customData.splice(e,1)}}},s=i,l=(a("c187"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"14c2607c",null);t["default"]=c.exports},bebe:function(e,t,a){},c13d:function(e,t,a){},c187:function(e,t,a){"use strict";a("03ef")},c1af:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,ok:!1,visible:e.visible,confirmLoading:e.confirmLoading,okButtonProps:{props:{disabled:e.disableSubmit}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("机构名称")]),a("a-col",{attrs:{span:20,"data-prop":"departName"}},[a("a-input",{attrs:{id:"departName",placeholder:"请输入机构/部门名称"},model:{value:e.model.departName,callback:function(t){e.$set(e.model,"departName",t)},expression:"model.departName"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("机构编码")]),a("a-col",{attrs:{span:20,"data-prop":"orgCode"}},[a("a-input",{attrs:{placeholder:"请输入机构编码"},model:{value:e.model.orgCode,callback:function(t){e.$set(e.model,"orgCode",t)},expression:"model.orgCode"}})],1),e.seen?e._e():a("a-col",{attrs:{span:4}},[e._v("上级部门")]),e.seen?e._e():a("a-col",{attrs:{span:20}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.departTree,placeholder:"请选择上级部门",disabled:e.condition},model:{value:e.model.parentId,callback:function(t){e.$set(e.model,"parentId",t)},expression:"model.parentId"}})],1),a("a-col",{attrs:{span:4}},[e._v("电话")]),a("a-col",{attrs:{span:20,"data-prop":"mobile"}},[a("a-input",{attrs:{placeholder:"请输入电话"},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}})],1),a("a-col",{attrs:{span:4}},[e._v("传真")]),a("a-col",{attrs:{span:20,"data-prop":"fax"}},[a("a-input",{attrs:{placeholder:"请输入传真"},model:{value:e.model.fax,callback:function(t){e.$set(e.model,"fax",t)},expression:"model.fax"}})],1),a("a-col",{attrs:{span:4}},[e._v("地址")]),a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{placeholder:"请输入地址"},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1),a("a-col",{attrs:{span:4}},[e._v("排序")]),a("a-col",{attrs:{span:20,"data-prop":"departOrder"}},[a("a-input-number",{model:{value:e.model.departOrder,callback:function(t){e.$set(e.model,"departOrder",t)},expression:"model.departOrder"}})],1),a("a-col",{staticClass:"height-108",attrs:{span:4}},[e._v("备注")]),a("a-col",{staticClass:"height-108",attrs:{span:20}},[a("a-textarea",{attrs:{placeholder:"请输入备注",rows:4},model:{value:e.model.memo,callback:function(t){e.$set(e.model,"memo",t)},expression:"model.memo"}})],1)],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("4ec3"),s=a("261e");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};u(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,s){var c=m(e[n],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==l(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=h;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(l(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),u(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(f(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),u(S,d,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){d(o,r,n,i,s,"next",e)}function s(e){d(o,r,n,i,s,"throw",e)}i(void 0)}))}}function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var p={name:"SysDepartModal",components:{ATextarea:s["a"]},data:function(){return{departTree:[],orgTypeData:[],phoneWarning:"",departName:"",title:"操作",seen:!1,visible:!1,condition:!0,disableSubmit:!1,model:{},defaultModel:{departOrder:0,orgCategory:"1"},menuhidden:!1,menuusing:!0,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{departName:[{required:!0,message:"请输入机构/部门名称!"}],orgCode:[{required:!0,message:"请输入机构编码!"},{validator:this.validateOrgCode,type:"Promise"}],mobile:[{validator:this.validateMobile}],departOrder:[{validator:this.validateDepartOrder}],fax:[{validator:this.validateFax}]},url:{add:"/sys/sysDepart/add"},dictDisabled:!0}},methods:{validateOrgCode:function(e,t,a){var r=this;return new Promise((function(e){if(""!==t&&t){if(r.model.value!=t){var a={tableName:"sys_depart",fieldName:"org_code",fieldVal:t};return Object(i["t"])(a).then((function(t){t.success?e():e("机构编码已存在")}))}e()}else e("机构编码不能为空")}))},loadTreeData:function(){var e=this;Object(i["R"])().then((function(t){if(t.success){e.departTree=[];var a,r=f(t.result);try{for(r.s();!(a=r.n()).done;){var n=a.value;e.departTree.push(n)}}catch(o){r.e(o)}finally{r.f()}}}))},add:function(e){e?(this.seen=!1,this.dictDisabled=!1):(this.seen=!0,this.dictDisabled=!0),this.edit(e)},edit:function(e){this.visible=!0,this.model=Object.assign({},this.defaultModel,e),this.loadTreeData(),this.model.parentId=null!=e?e.toString():null},close:function(){this.$emit("close"),this.disableSubmit=!1,this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=u(c().mark((function e(){var t,a;return c().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.formRow.validaRowMsgPro(this.$refs.formOwnRow);case 3:a=e.sent,a.valida&&(t.confirmLoading=!0,this.model.orgCategory="2",Object(o["i"])(this.url.add,this.model,"post").then((function(e){e.success?(t.$message.success(e.message),t.loadTreeData(),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},validateMobile:function(e,t,a){!t||new RegExp(/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/).test(t)?a():a("您的手机号或座机号码格式不正确!")},validateFax:function(e,t,a){!t||new RegExp(/^(\d{3,4}-)?\d{7,8}$/).test(t)?a():a("您的传真格式不正确!")},validateDepartOrder:function(e,t,a){!t||new RegExp(/^[1-9]+[0-9]*$/).test(t)?a():a("序号应为正整数!")}}},v=p,b=(a("5f90"),a("2877")),y=Object(b["a"])(v,r,n,!1,null,"517b1444",null);t["default"]=y.exports},c206:function(e,t,a){},c229:function(e,t,a){"use strict";a("6f2e")},c63e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:e.modalWidth,visible:e.visible,title:"部门搜索",confirmLoading:e.confirmLoading,cancelText:"关闭",wrapClassName:"ant-modal-cust-warp"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"上级部门"}},[a("a-tree",{attrs:{multiple:"",treeCheckable:"tree",checkable:"",expandedKeys:e.expandedKeysss,checkedKeys:e.checkedKeys,allowClear:"true",checkStrictly:!0,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.departTree,placeholder:"请选择上级部门"},on:{expand:e.onExpand,check:e.onCheck}})],1)],1)]],2)},n=[],o=a("88bc"),i=a.n(o),s=a("0fea"),l=a("4ec3"),c={name:"DepartWindow",components:{},data:function(){return{checkedKeys:[],expandedKeysss:[],userId:"",model:{},userDepartModel:{userId:"",departIdList:[]},departList:[],modalWidth:400,departTree:[],title:"操作",visible:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,headers:{},form:this.$form.createForm(this),url:{userId:"/sys/user/generateUserId"}}},methods:{add:function(e,t){this.checkedKeys=e,this.userId=t,this.edit({})},edit:function(e){var t=this;this.departList=[],this.queryDepartTree(),this.form.resetFields(),this.visible=!0,this.model=Object.assign({},e);var a=i()(this.model,"id","userId","departIdList");this.$nextTick((function(){t.form.setFieldsValue(a)}))},close:function(){this.$emit("close"),this.visible=!1,this.departList=[],this.checkedKeys=[]},handleSubmit:function(){var e=this,t=this;this.form.validateFields((function(a){if(!a)if(t.confirmLoading=!0,null==e.userId)Object(s["e"])(e.url.userId).then((function(a){if(a.success){var r={userId:a.result,departIdList:e.departList};t.$emit("ok",r)}})).finally((function(){t.departList=[],t.confirmLoading=!1,t.close()}));else{var r={userId:e.userId,departIdList:e.departList};t.departList=[],t.$emit("ok",r),t.confirmLoading=!1,t.close()}}))},handleCancel:function(){this.close()},onCheck:function(e,t){this.departList=[],this.checkedKeys=e.checked;for(var a=t.checkedNodes,r=0;r<a.length;r++){var n=a[r].data.props,o={key:"",value:"",title:""};o.key=n.value,o.value=n.value,o.title=n.title,this.departList.push(o)}},queryDepartTree:function(){var e=this;Object(l["R"])().then((function(t){if(t.success&&(e.departTree=t.result,e.checkedKeys&&e.checkedKeys.length>0)){var a=[],r=t.result;r&&r.length>0&&(r.forEach((function(e){a.push(e.key)})),e.expandedKeysss=a)}}))},onExpand:function(e){this.expandedKeysss=e}}},d=c,u=(a("b9a9"),a("2877")),f=Object(u["a"])(d,r,n,!1,null,"4d7589e4",null);t["default"]=f.exports},cac4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"关联的动态报表"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["formId",{}],expression:"['formId', {}]"}],staticStyle:{width:"100%"}},e._l(e.data,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n            "+e._s(t.rname)+"\n          ")])})),1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"类型标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["formType",{}],expression:"['formType', {}]"}],attrs:{placeholder:"请输入类型标识"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("报表头部按钮\n          "),a("a-popover",{attrs:{title:"提示",trigger:"click",placement:"topRight"}},[a("template",{slot:"content"},[a("p",[e._v("选择相应的按钮，则报表头部会展示相应的按钮；如果一个都不选，则报表头部不会展示工具栏")]),a("p",[e._v("建议选择：在线打印、PDF在线打印、PDF在线预览、导出PDF、预览")])]),a("a",{attrs:{href:""}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],2)],1),a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple"},model:{value:e.reportHeaderButton,callback:function(t){e.reportHeaderButton=t},expression:"reportHeaderButton"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("在线打印")]),a("a-select-option",{attrs:{value:"2"}},[e._v("PDF在线打印")]),a("a-select-option",{attrs:{value:"3"}},[e._v("PDF在线预览")]),a("a-select-option",{attrs:{value:"4"}},[e._v("导出PDF")]),a("a-select-option",{attrs:{value:"5"}},[e._v("导出WORD")]),a("a-select-option",{attrs:{value:"6"}},[e._v("导出EXCEL")]),a("a-select-option",{attrs:{value:"7"}},[e._v("分页导出EXCEL")]),a("a-select-option",{attrs:{value:"8"}},[e._v("分Sheet导出EXCEL")]),a("a-select-option",{attrs:{value:"9"}},[e._v("预览")])],1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"主管单位"}},[a("j-dict-county-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sysOrgCode",{}],expression:"['sysOrgCode', {}]"}],attrs:{replaceFields:{value:"code",children:"children",title:"name"}}})],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("88bc"),s=a.n(i),l=a("db21"),c={name:"Ureport2ConfigModal",components:{JDictCountyTreeSelect:l["default"]},data:function(){return{data:[],title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{},url:{add:"/ureport2/ureport2Config/add",edit:"/ureport2/ureport2Config/edit"},reportHeaderButton:[]}},created:function(){},methods:{init:function(){var e=this;Object(o["e"])("/ureport2/ureport2/listAll").then((function(t){t.success&&(e.data=t.result)}))},add:function(){this.edit({})},edit:function(e){var t=this;this.init(),this.form.resetFields(),this.model=Object.assign({},e),this.reportHeaderButton=e.reportHeaderButton&&"0"!=e.reportHeaderButton?e.reportHeaderButton.split(","):[],this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(s()(t.model,"flag","formId","formType","delFlag","sysOrgCode"))}))},close:function(){this.$emit("close"),this.reportPrintButton=[],this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var n="",i="";e.model.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post");var s=Object.assign(e.model,r);e.reportHeaderButton&&e.reportHeaderButton.length>0?s.reportHeaderButton=e.reportHeaderButton.join(","):s.reportHeaderButton="0",Object(o["i"])(n,s,i).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()}}},d=c,u=a("2877"),f=Object(u["a"])(d,r,n,!1,null,"171be074",null);t["default"]=f.exports},cb6b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"j-address-list-right-card-box",attrs:{loading:e.cardLoading,bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form-model",{attrs:{layout:"inline",model:e.queryParam}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:6,sm:12}},[a("a-form-model-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"姓名",prop:"realname"}},[a("a-input",{attrs:{placeholder:"请输入姓名查询"},model:{value:e.queryParam.realname,callback:function(t){e.$set(e.queryParam,"realname",t)},expression:"queryParam.realname"}})],1)],1),a("a-col",{attrs:{md:6,sm:12}},[a("a-form-model-item",{staticStyle:{"margin-left":"8px"},attrs:{label:"工号",prop:"workNo"}},[a("a-input",{attrs:{placeholder:"请输入工号查询"},model:{value:e.queryParam.workNo,callback:function(t){e.$set(e.queryParam,"workNo",t)},expression:"queryParam.workNo"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-button",{staticStyle:{"margin-left":"18px"},attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"userId",pagination:e.ipagination,columns:e.columns,dataSource:e.dataSource,loading:e.loading},on:{change:e.handleTableChange}})],1)},n=[],o=a("0fea"),i=a("b65a");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return(t=u(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e){var t=f(e,"string");return"symbol"==s(t)?t:t+""}function f(e,t){if("object"!=s(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var m={name:"AddressListRight",mixins:[i["a"]],components:{},props:["value"],data:function(){var e=this;return{description:"用户信息",cardLoading:!0,positionInfo:{},columns:[{title:"#",key:"rowIndex",dataIndex:"",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"姓名",width:"15%",align:"center",dataIndex:"realname"},{title:"工号",width:"15%",align:"center",dataIndex:"workNo"},{title:"部门",width:"20%",align:"center",dataIndex:"departName"},{title:"职务",width:"15%",align:"center",dataIndex:"post",customRender:function(t){return(t||"").split(",").map((function(t){return e.positionInfo[t]?e.positionInfo[t]:t})).join(",")}},{title:"手机",width:"15%",align:"center",dataIndex:"telephone"},{title:"公司邮箱",width:"15%",align:"center",dataIndex:"email"}],url:{list:"/sys/user/queryByOrgCodeForAddressList",listByPosition:"/sys/position/list"}}},watch:{value:{immediate:!0,handler:function(e){this.dataSource=[],this.loadData(1,e)}}},created:function(){this.queryPositionInfo()},methods:{loadData:function(e,t){var a=this;this.loading=!0,1===e&&(this.ipagination.current=1),t?Object(o["e"])(this.url.list,c({orgCode:t},this.getQueryParams())).then((function(e){e.success&&(a.dataSource=e.result.records,a.ipagination.total=e.result.total)})).finally((function(){a.loading=!1,a.cardLoading=!1})):Object(o["e"])(this.url.list,c({},this.getQueryParams())).then((function(e){e.success&&(a.dataSource=e.result.records,a.ipagination.total=e.result.total)})).finally((function(){a.loading=!1,a.cardLoading=!1}))},searchQuery:function(){this.loadData(1,this.value)},searchReset:function(){this.queryParam={},this.loadData(1,this.value)},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"===a.order?"asc":"desc"),this.ipagination=e,this.loadData(null,this.value)},queryPositionInfo:function(){var e=this;Object(o["e"])(this.url.listByPosition,{pageSize:99999}).then((function(t){if(t.success){var a={};t.result.records.forEach((function(e){a[e["code"]]=e["name"]})),e.positionInfo=a}}))}}},h=m,p=(a("d5e7"),a("01c4"),a("2877")),v=Object(p["a"])(h,r,n,!1,null,"cf50ead6",null);t["default"]=v.exports},ce47:function(e,t,a){"use strict";a("fcdf")},d125:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据源名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",e.validatorRules.name],expression:"['name', validatorRules.name]"}],attrs:{placeholder:"请输入..."}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"sql语句"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["sqlcmd",e.validatorRules.sqlcmd],expression:"['sqlcmd',validatorRules.sqlcmd ]"}],attrs:{rows:"4",placeholder:"请输入sql语句"},model:{value:e.sqlcmd,callback:function(t){e.sqlcmd=t},expression:"sqlcmd"}})],1),a("a-row",{staticStyle:{"margin-left":"13%",width:"80%"}},[a("a-col",{attrs:{lg:10}},[a("a-form-item",{attrs:{labelCol:{xs:{span:20},sm:{span:7}},wrapperCol:e.wrapperCol,label:"数据库"}},[a("a-select",{attrs:{placeholder:"请选择..."},model:{value:e.db,callback:function(t){e.db=t},expression:"db"}},e._l(e.databaselist,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.text)+"\n              ")])})),1)],1)],1),a("a-col",{attrs:{lg:12}},[a("a-form-item",{attrs:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:e.wrapperCol,label:"数据源编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",e.validatorRules.code],expression:"['code', validatorRules.code]"}],attrs:{placeholder:"请输入..."},model:{value:e.db_code,callback:function(t){e.db_code=t},expression:"db_code"}})],1)],1)],1),a("div",{style:{border:"1px solid #e8e8e8",marginTop:"10px",padding:"10px 24px",minHeight:"48px"}},[a("a-button",{attrs:{type:"primary",icon:"eye"},on:{click:e.doAnalyseData}},[e._v("解析数据")])],1),a("table",{staticClass:"owneTable"},[a("tr",{staticClass:"th"},[a("td",{staticClass:"tdOne"},[e._v("变量")]),a("td",{staticClass:"tdtwo"},[e._v("默认值")])]),e._l(e.dataSource,(function(t,r){return a("tr",[a("td",{staticClass:"tdOne"},[e._v(e._s(t.ikey))]),a("td",{staticClass:"tdtwo"},[a("a-input",{attrs:{placeholder:"请输入..."},model:{value:t.ivalue,callback:function(a){e.$set(t,"ivalue",a)},expression:"value.ivalue"}})],1)])}))],2),a("div",{style:{border:"1px solid #e8e8e8",marginTop:"10px",padding:"10px 24px",minHeight:"48px"}},[a("a-button",{attrs:{type:"primary",icon:"eye"},on:{click:e.doPreviewData}},[e._v("预览数据")])],1),a("a-tabs",{attrs:{type:"card"}},[a("a-tab-pane",{key:"1",attrs:{tab:"HTML"}},[a("a-table",{staticStyle:{overflow:"scroll",height:"250px"},attrs:{columns:e.columnshtml,dataSource:e.data}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"JSON"}},[a("textarea",{staticStyle:{width:"100%","font-size":"16px","font-weight":"500"},attrs:{rows:10,readonly:""},domProps:{innerHTML:e._s(e.resultJson)}})]),a("a-tab-pane",{key:"3",attrs:{tab:"XML"}},[a("textarea",{staticStyle:{width:"100%","font-size":"16px","font-weight":"500"},attrs:{rows:10,readonly:""},domProps:{innerHTML:e._s(e.resultXML)}})])],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("88bc"),s=a.n(i),l=a("b65a"),c={name:"TpDataSourceModal",mixins:[l["a"]],data:function(){return{title:"操作",model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},sqlcmd:"",resultJson:{},resultXML:{},resultHtml:{},data:[],columnshtml:[],visible:!1,confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入数据源名称!"}]},sqlcmd:{rules:[{required:!0,message:"请输入sql语句!"}]},code:{rules:[{required:!0,message:"请输入数据源编码!"}]}},dataSource:[],url:{list:"/joinsoft/joinDataSource/list",add:"/joinsoft/joinDataSource/add",edit:"/joinsoft/joinDataSource/edit",prieview:"/joinsoft/joinDataSource/updateSql",analyse:"/joinsoft/joinDataSource/getParamsAnalysis",checkCode:"/joinsoft/joinDataSource/checkCode",queryAllbase:"/sys/dict/getDictItems/dynamic_database"},databaselist:[],db:"",db_code:""}},created:function(){this.queryDb()},methods:{queryDb:function(){var e=this;Object(o["i"])(e.url.queryAllbase,{},"get").then((function(t){t.success&&(e.databaselist=t.result)}))},doPreviewData:function(){if(void 0!=this.sqlcmd)if(void 0!=this.db_code){var e=this,t=e.url.prieview,a="post",r=[];e.dataSource.forEach((function(e){null==e.ivalue||""==e.ivalue||r.push(e)}));var n={ikey:"db_sql"};n.ivalue=e.sqlcmd,r.push(n);var i={ikey:"db_db"};i.ivalue=e.db,r.push(i);var s={ikey:"db_code"};s.ivalue=e.db_code,r.push(s),Object(o["i"])(t,r,a).then((function(t){t.success?(e.resultJson=t.result.jsonArray,e.resultXML=t.result.xmlStr,e.columnshtml=t.result.columnsArray,e.data=t.result.jsonArray,e.$message.success(t.message)):e.$message.warning(t.message)})).finally((function(){}))}else this.$message.warning("请先输入正确的编码");else this.$message.warning("请先输入正确的sql语句")},doAnalyseData:function(){if(void 0!=this.sqlcmd){var e={},t=this;e.sql=t.sqlcmd,Object(o["j"])(t.url.analyse,e).then((function(e){if(e.success){for(var a=[],r=0;r<e.result.length;r++){var n={};n.ikey=e.result[r].ikey,n.ivalue=e.result[r].ivalue,a.push(n)}t.dataSource=a,t.$message.success(e.message)}else t.$message.warning(e.message)})).catch((function(e){t.$message.warning("接口异常，请尝试刷新")}))}else this.$message.warning("请先输入正确的sql语句")},add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,null!=this.model&&""!=this.model.sqlcmd&&(this.sqlcmd=this.model.sqlcmd),null!=this.model&&""!=this.model.db&&(this.db=this.model.db),this.$nextTick((function(){t.form.setFieldsValue(s()(t.model,"name","sqlcmd","code","db"))}))},close:function(){this.$emit("close"),this.visible=!1,this.sqlcmd="",this.dataSource=[],this.resultJson={},this.resultXML={},this.resultHtml={},this.data=[],this.columnshtml=[]},handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r="",n="",i={},s=Object.assign(e.model,a);s.id?(r+=e.url.edit,n="put",i.type="edit",i.code=s.code,i.id=s.id):(r+=e.url.add,n="post",i.type="add",i.code=s.code),Object(o["i"])(e.url.checkCode,i,"post").then((function(t){t.result?(s.db=e.db,Object(o["i"])(r,s,n).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))):(e.$message.warning(t.message),e.confirmLoading=!1)}))}}))},handleCancel:function(){this.close()}}},d=c,u=(a("6c94"),a("2877")),f=Object(u["a"])(d,r,n,!1,null,"4ccdde24",null);t["default"]=f.exports},d131:function(e,t,a){"use strict";a("b7a9")},d23b:function(e,t,a){"use strict";a("da54")},d31e:function(e,t,a){},d456:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"数据规则/按钮权限配置",width:"365",closable:!1,visible:e.visible},on:{close:e.onClose}},[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"数据规则"}},[e.dataruleList.length>0?a("a-checkbox-group",{model:{value:e.dataruleChecked,callback:function(t){e.dataruleChecked=t},expression:"dataruleChecked"}},[a("a-row",[e._l(e.dataruleList,(function(t,r){return a("a-col",{key:"dr"+r,attrs:{span:24}},[a("a-checkbox",{attrs:{value:t.id}},[e._v(e._s(t.ruleName))])],1)})),a("a-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"100%","margin-top":"15px"}},[a("a-button",{attrs:{type:"primary",size:"small",icon:"save"},on:{click:e.saveDataruleForRole}},[e._v("点击保存")])],1)])],2)],1):a("div",[a("h3",[e._v("无配置信息!")])])],1)],1)],1)},n=[],o=a("290c"),i=a("da05"),s=a("0fea"),l={name:"DeptRoleDataruleModal",components:{ACol:i["b"],ARow:o["a"]},data:function(){return{departId:"",functionId:"",roleId:"",visible:!1,tabList:[{key:"1",tab:"数据规则"},{key:"2",tab:"按钮权限"}],activeTabKey:"1",url:{datarule:"/sys/sysDepartRole/datarule"},dataruleList:[],dataruleChecked:[]}},methods:{loadData:function(){var e=this;Object(s["e"])("".concat(this.url.datarule,"/").concat(this.functionId,"/").concat(this.departId,"/").concat(this.roleId)).then((function(t){if(t.success){e.dataruleList=t.result.datarule;var a=t.result.drChecked;a&&(e.dataruleChecked=a.split(","))}}))},saveDataruleForRole:function(){var e=this;this.dataruleChecked&&0!=this.dataruleChecked.length||this.$message.warning("请注意，现未勾选任何数据权限!");var t={permissionId:this.functionId,roleId:this.roleId,dataRuleIds:this.dataruleChecked.join(",")};Object(s["j"])(this.url.datarule,t).then((function(t){t.success?e.$message.success(t.message):e.$message.error(t.message)}))},show:function(e,t,a){this.onReset(),this.departId=t,this.functionId=e,this.roleId=a,this.visible=!0,this.loadData()},onClose:function(){this.visible=!1,this.onReset()},onTabChange:function(e){this.activeTabKey=e},onReset:function(){this.functionId="",this.roleId="",this.dataruleList=[],this.dataruleChecked=[]}}},c=l,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"7b5ca0e8",null);t["default"]=u.exports},d57c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据源编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",e.validatorRules.code],expression:"['code', validatorRules.code]"}],attrs:{placeholder:"请输入数据源编码",disabled:!!e.model.id}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据源名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",e.validatorRules.name],expression:"['name', validatorRules.name]"}],attrs:{placeholder:"请输入数据源名称"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据库类型"}},[a("j-dict-select-tag",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbType",e.validatorRules.dbType],expression:"['dbType', validatorRules.dbType]"}],attrs:{placeholder:"请选择数据库类型","dict-code":"database_type",triggerChange:""},on:{change:e.handleDbTypeChange}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"驱动类"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbDriver",e.validatorRules.dbDriver],expression:"['dbDriver', validatorRules.dbDriver]"}],attrs:{placeholder:"请输入驱动类"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"数据源地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbUrl",e.validatorRules.dbUrl],expression:"['dbUrl', validatorRules.dbUrl]"}],attrs:{placeholder:"请输入数据源地址"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbUsername",e.validatorRules.dbUsername],expression:"['dbUsername', validatorRules.dbUsername]"}],attrs:{placeholder:"请输入用户名"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"密码"}},[a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:21}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["dbPassword",e.validatorRules.dbPassword],expression:"['dbPassword', validatorRules.dbPassword]"}],attrs:{placeholder:"请输入密码"}})],1),a("a-col",{attrs:{span:3}},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"small"},on:{click:e.handleTest}},[e._v("测试")])],1)],1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{}],expression:"['remark', {}]"}],attrs:{placeholder:"请输入备注"}})],1)],1)],1)],1)},n=[],o=a("88bc"),i=a.n(o),s=a("0fea"),l=a("ca00"),c={name:"SysDataSourceModal",components:{},data:function(){var e=this;return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{code:{validateFirst:!0,rules:[{required:!0,message:"请输入数据源编码!"},{validator:function(t,a,r){var n=/^[a-z|A-Z][a-z|A-Z\d_-]{0,}$/;n.test(a)?Object(l["x"])("sys_data_source","code",a,e.model.id,r):r("编码必须以字母开头，可包含数字、下划线、横杠")}}]},name:{rules:[{required:!0,message:"请输入数据源名称!"}]},dbType:{rules:[{required:!0,message:"请选择数据库类型!"}]},dbDriver:{rules:[{required:!0,message:"请输入驱动类!"}]},dbUrl:{rules:[{required:!0,message:"请输入数据源地址!"}]},dbName:{rules:[{required:!0,message:"请输入数据库名称!"}]},dbUsername:{rules:[{required:!0,message:"请输入用户名!"}]},dbPassword:{rules:[{required:!1,message:"请输入密码!"}]}},url:{add:"/sys/dataSource/add",edit:"/sys/dataSource/edit"},dbDriverMap:{1:{dbDriver:"com.mysql.jdbc.Driver"},4:{dbDriver:"com.mysql.cj.jdbc.Driver"},2:{dbDriver:"oracle.jdbc.OracleDriver"},3:{dbDriver:"com.microsoft.sqlserver.jdbc.SQLServerDriver"},5:{dbDriver:"org.mariadb.jdbc.Driver"},6:{dbDriver:"org.postgresql.Driver"},7:{dbDriver:"dm.jdbc.driver.DmDriver"},8:{dbDriver:"com.kingbase8.Driver"},9:{dbDriver:"com.oscar.Driver"},10:{dbDriver:"org.sqlite.JDBC"},11:{dbDriver:"com.ibm.db2.jcc.DB2Driver"},12:{dbDriver:"org.hsqldb.jdbc.JDBCDriver"},13:{dbDriver:"org.apache.derby.jdbc.ClientDriver"},14:{dbDriver:"org.h2.Driver"},15:{dbDriver:""}},dbUrlMap:{1:{dbUrl:"jdbc:mysql://127.0.0.1:3306/jeecg-boot?characterEncoding=UTF-8&useUnicode=true&useSSL=false"},4:{dbUrl:"jdbc:mysql://127.0.0.1:3306/jeecg-boot?characterEncoding=UTF-8&useUnicode=true&useSSL=false&tinyInt1isBit=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai"},2:{dbUrl:"jdbc:oracle:thin:@127.0.0.1:1521:ORCL"},3:{dbUrl:"jdbc:sqlserver://127.0.0.1:1433;SelectMethod=cursor;DatabaseName=jeecgboot"},5:{dbUrl:"jdbc:mariadb://127.0.0.1:3306/jeecg-boot?characterEncoding=UTF-8&useSSL=false"},6:{dbUrl:"jdbc:postgresql://127.0.0.1:5432/jeecg-boot"},7:{dbUrl:"jdbc:dm://127.0.0.1:5236/?jeecg-boot&zeroDateTimeBehavior=convertToNull&useUnicode=true&characterEncoding=utf-8"},8:{dbUrl:"jdbc:kingbase8://127.0.0.1:54321/jeecg-boot"},9:{dbUrl:"jdbc:oscar://192.168.1.125:2003/jeecg-boot"},10:{dbUrl:"jdbc:sqlite://opt/test.db"},11:{dbUrl:"jdbc:db2://127.0.0.1:50000/jeecg-boot"},12:{dbUrl:"jdbc:hsqldb:hsql://127.0.0.1/jeecg-boot"},13:{dbUrl:"jdbc:derby://127.0.0.1:1527/jeecg-boot"},14:{dbUrl:"jdbc:h2:tcp://127.0.0.1:8082/jeecg-boot"},15:{dbUrl:""}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(i()(t.model,"code","name","remark","dbType","dbDriver","dbUrl","dbName","dbUsername","dbPassword"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=Object.assign(e.model,a),n=e.url.add,o="post";e.model.id&&(n=e.url.edit,o="put",r["code"]=void 0),Object(s["i"])(n,r,o).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok"),e.close()):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},handleTest:function(){var e=this,t=["dbType","dbDriver","dbUrl","dbName","dbUsername","dbPassword"],a=this.form.getFieldsValue(t),r={};t.forEach((function(e){return r[e]={value:a[e],errors:null}})),this.form.setFields(r),this.$nextTick((function(){e.form.validateFields(t,(function(t,r){if(!t){var n=e.$message.loading("连接中……",0);Object(s["j"])("/online/cgreport/api/testConnection",a).then((function(t){if(!t.success)throw new Error(t.message);e.$message.success("连接成功")})).catch((function(t){e.$warning({title:"连接失败",content:t.message||t})})).finally((function(){return n()}))}}))}))},handleDbTypeChange:function(e){var t=this.dbDriverMap[e],a=this.dbUrlMap[e];t&&this.form.setFieldsValue(t),a&&this.form.setFieldsValue(a)}}},d=c,u=a("2877"),f=Object(u["a"])(d,r,n,!1,null,"2b94608b",null);t["default"]=f.exports},d5e7:function(e,t,a){"use strict";a("fdec")},da54:function(e,t,a){},dc4b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:"650",placement:"right",closable:!0,visible:e.visible},on:{close:e.close}},[a("a-form",[a("a-form-item",{attrs:{label:"所拥有的部门权限"}},[e.treeData.length>0?a("a-tree",{attrs:{checkable:"",checkedKeys:e.checkedKeys,treeData:e.treeData,selectedKeys:e.selectedKeys,expandedKeys:e.expandedKeysss,checkStrictly:e.checkStrictly},on:{check:e.onCheck,expand:e.onExpand,select:e.onTreeNodeSelect},scopedSlots:e._u([{key:"hasDatarule",fn:function(t){var r=t.slotTitle,n=t.ruleFlag;return a("span",{},[e._v("\n          "+e._s(r)),n?a("a-icon",{staticStyle:{"margin-left":"5px",color:"red"},attrs:{type:"align-left"}}):e._e()],1)}}],null,!1,2869785871)}):a("div",[a("h3",[e._v("无可配置部门权限!")])])],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),a("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")]),a("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),a("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n        树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.close}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{staticStyle:{"margin-right":"0.8rem"},attrs:{type:"primary",loading:e.loading,ghost:""},on:{click:function(t){return e.handleSubmit(!1)}}},[e._v("仅保存")]),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v("保存并关闭")])],1),a("dept-role-datarule-modal",{ref:"datarule"})],1)},n=[],o=a("4ec3"),i=a("2285"),s=a("d456");function l(e){return u(e)||d(e)||m(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return h(e)}function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var p={name:"DeptRoleAuthModal",components:{DeptRoleDataruleModal:s["default"],RoleDataruleModal:i["default"]},data:function(){return{departId:"",roleId:"",treeData:[],defaultCheckedKeys:[],checkedKeys:[],halfCheckedKeys:[],expandedKeysss:[],allTreeKeys:[],autoExpandParent:!0,checkStrictly:!0,title:"机构角色权限配置",visible:!1,loading:!1,selectedKeys:[]}},methods:{switchCheckStrictly:function(e){1==e?this.checkStrictly=!1:2==e&&(this.checkStrictly=!0)},onTreeNodeSelect:function(e){e&&e.length>0&&(this.selectedKeys=e),this.$refs.datarule.show(this.selectedKeys[0],this.departId,this.roleId)},onCheck:function(e){this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e},show:function(e,t){this.departId=t,this.roleId=e,this.visible=!0},close:function(){this.reset(),this.$emit("close"),this.visible=!1},onExpand:function(e){this.expandedKeysss=e,this.autoExpandParent=!1},reset:function(){this.expandedKeysss=[],this.checkedKeys=[],this.defaultCheckedKeys=[],this.loading=!1},expandAll:function(){this.expandedKeysss=this.allTreeKeys},closeAll:function(){this.expandedKeysss=[]},checkALL:function(){this.checkedKeys=this.allTreeKeys},cancelCheckALL:function(){this.checkedKeys=[]},handleCancel:function(){this.close()},handleSubmit:function(e){var t=this,a=this,r={roleId:a.roleId,permissionIds:a.checkedKeys.join(","),lastpermissionIds:a.defaultCheckedKeys.join(",")};a.loading=!0,Object(o["db"])(r).then((function(r){r.success?(a.$message.success(r.message),a.loading=!1,e&&a.close()):(a.$message.error(r.message),a.loading=!1,e&&a.close()),t.loadData()}))},convertTreeListToKeyLeafPairs:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=f(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.key,i=n.isLeaf,s=n.children;a.push({key:o,isLeaf:i}),s&&s.length>0&&this.convertTreeListToKeyLeafPairs(s,a)}}catch(l){r.e(l)}finally{r.f()}return a},loadData:function(){var e=this;Object(o["X"])({departId:this.departId}).then((function(t){e.treeData=t.result.treeList,e.allTreeKeys=t.result.ids,Object(o["Q"])({roleId:e.roleId}).then((function(t){e.checkedKeys=l(t.result),e.defaultCheckedKeys=l(t.result),e.expandedKeysss=e.allTreeKeys}))}))}},watch:{visible:function(){this.visible&&this.loadData()}}},v=p,b=(a("7195"),a("2877")),y=Object(b["a"])(v,r,n,!1,null,"6c413164",null);t["default"]=y.exports},ddf9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticStyle:{top:"20px"},attrs:{title:"重新设定密码",width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",okButtonProps:{props:{icon:"check"}},cancelButtonProps:{props:{icon:"close"}}},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{staticStyle:{display:"flex","justify-content":"center"},attrs:{form:e.form}},[a("a-row",{staticClass:"maintainInfo"},[a("a-col",{attrs:{span:7}},[e._v("用户账号")]),a("a-col",{attrs:{span:17}},[a("a-form-item",[e._v("\n              "+e._s(e.model.username)+"\n          ")])],1),a("a-col",{attrs:{span:7}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("登录密码")]),a("a-col",{attrs:{span:17}},[a("a-form-item",{staticStyle:{width:"80%"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",e.validatorRules.password],expression:"[ 'password', validatorRules.password]"}],attrs:{type:"password",allowClear:"",placeholder:"请输入登录密码"}})],1)],1),a("a-col",{attrs:{span:7}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("确认密码")]),a("a-col",{attrs:{span:17}},[a("a-form-item",{staticStyle:{width:"80%"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",e.validatorRules.confirmpassword],expression:"[ 'confirmpassword', validatorRules.confirmpassword]"}],attrs:{type:"password",allowClear:"",placeholder:"请重新输入登录密码"},on:{blur:e.handleConfirmBlur}})],1)],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i=a("9816"),s={name:"PasswordModal",data:function(){return{visible:!1,confirmLoading:!1,confirmDirty:!1,validatorRules:{password:{rules:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{8,}$/,message:"密码至少由8位的数字、大写或小写的字母及特殊字符组成!",trigger:["change","blur"]},{validator:this.validateToNextPassword}],validateFirst:!0},confirmpassword:{rules:[{required:!0,message:"请重新输入登录密码!",trigger:["change","blur"]},{validator:this.compareToFirstPassword}]}},model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},form:this.$form.createForm(this)}},created:function(){},methods:{show:function(e){this.form.resetFields(),this.visible=!0,this.confirmDirty=!1,this.model.username=e},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1,this.selectedRole=[]},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){e.confirmLoading=!0;var r=Object.assign(e.model,a),n={username:r.username,password:e.encode(r.password),confirmpassword:e.encode(r.confirmpassword)};Object(o["m"])(n).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))}}))},handleCancel:function(){this.close()},validateToNextPassword:function(e,t,a){var r=this.form;t&&this.confirmDirty&&r.validateFields(["confirmpassword"],{force:!0}),a()},compareToFirstPassword:function(e,t,a){var r=this.form;t&&t!==r.getFieldValue("password")?a("两次输入的密码不一样！"):a()},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},encode:function(e){var t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))),a="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrJAV6yAdgRO5NBjX/h6m83w1QgjnWqREkdV8HTYEraeZANNeL6HXCjdLoxTbjuUyCJLdLildy9Jf3k9ZKT/ZJ6ScczihEY4JSc738NWwVm8W2Rte2vWOb1IDRNWTPMUZGGbs++YWgdvLuyqMU/0cRUMIy+UxX+3oww+cnbDiiyQIDAQAB",r=new i["a"];return r.setPublicKey(a),r.encrypt(t)}}},l=s,c=(a("0746"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"794647e0",null);t["default"]=d.exports},de61:function(e,t,a){"use strict";a("c206")},e1c7:function(e,t,a){},e321:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"width100",class:{customFormDetail:e.isDetail}},[e.fieldList&&e.fieldList.length>0&&e.model[e.pCustomKey]?a("j-form-container",{attrs:{disabled:e.isDetail,border:!1}},[a("a-form-model",{ref:"form",attrs:{slot:"detail",labelCol:{span:0},model:e.model[e.pCustomKey],rules:e.rules,wrapperCol:{span:24}},slot:"detail"},[a("a-row",{staticClass:"houseInfo"},[e._l(e.fieldList,(function(t){return[a("a-col",{key:"label"+t.field,attrs:{span:t.labelSpan}},[a("span",{class:{required:"1"===t.required&&!e.isDetail}},[e._v(e._s(t.fieldName))])]),a("a-col",{key:"value"+t.field,attrs:{span:t.valueSpan}},[a("a-form-model-item",{staticClass:"width100 customFormItem",attrs:{prop:t.field}},[t.fieldType&&"input"!==t.fieldType?"select"===t.fieldType?a("a-select",{staticStyle:{width:"100%"},on:{change:e.formChangeHandle},model:{value:e.model[e.pCustomKey][t.field],callback:function(a){e.$set(e.model[e.pCustomKey],t.field,a)},expression:"model[pCustomKey][item.field]"}},e._l(t.options,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])})),1):e._e():a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"+t.fieldName},on:{change:e.formChangeHandle},model:{value:e.model[e.pCustomKey][t.field],callback:function(a){e.$set(e.model[e.pCustomKey],t.field,a)},expression:"model[pCustomKey][item.field]"}})],1)],1)]}))],2)],1)],1):e._e()],1)},n=[],o=a("0fea"),i=a("ca00"),s=(a("c311"),{name:"CustomFieldForm",props:{value:{type:String,default:""},colSpan:{type:Array,default:function(){return[]}},pCustomKey:{type:String,default:""},isDetail:{type:Boolean,default:!1}},watch:{pCustomKey:function(){this.getFieldList()},value:{immediate:!0,handler:function(e){try{e?(this.$set(this,"model",JSON.parse(e)),this.model[this.pCustomKey]||this.$set(this.model,this.pCustomKey,{})):this.$set(this.model,this.pCustomKey,{})}catch(t){this.$set(this.model,this.pCustomKey,{})}}}},created:function(){this.getFieldList()},model:{prop:"value",event:"change.value"},data:function(){return{fieldList:[],model:{},rules:{},url:{getFieldListByCustomKey:"/sys/sysCustomComponent/listByKey"}}},methods:{formChangeHandle:function(){var e=this;this.$nextTick((function(){e.$emit("change.value",JSON.stringify(e.model))}))},getFieldList:function(){var e=this;this.fieldList=[],this.isDetail||this.$set(this.model,this.pCustomKey,{}),this.rules={},Object(o["e"])(this.url.getFieldListByCustomKey,{customKey:this.pCustomKey,pageSize:-1}).then((function(t){if(t&&t.success){var a=t.result.records.sort((function(e,t){return e.orderNum-t.orderNum}));a.forEach((function(t){if(t.field){var a=e.colSpan.find((function(e){return e.field===t.field}));if(t.labelSpan=a&&a.labelSpan||4,t.valueSpan=a&&a.valueSpan||8,e.isDetail||e.$set(e.model[e.pCustomKey],t.field,void 0),e.$set(e.rules,t.field,"1"===t.required?[{required:!0,message:"请输入".concat(t.fieldName)}]:""),t.dataCheckType&&e.setFormValida(t.field,t.dataCheckType),"select"===t.fieldType)try{t.options=JSON.parse(t.selectInfo)}catch(r){t.options=[]}e.fieldList.push(t)}}))}})).catch((function(){e.fieldList=[]}))},setFormValida:function(e,t){var a=this,r=a.rules[e];"phone"===t&&r.push({validator:Object(i["t"])((function(e,t,a){Object(o["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(e){return e.success?a():a(e.result)})).catch((function(){a(new Error("验证失败！").message)}))}),600)})},checkData:function(){var e=this;return new Promise((function(t){if(e.fieldList&&0!==e.fieldList.length)try{e.$refs.form.validate((function(e){t({valida:e})}))}catch(a){t({valida:!1})}else t({valida:!0})}))},init:function(e){},getFormJson:function(){try{return JSON.stringify(this.model)}catch(e){return""}}}}),l=s,c=(a("69ea"),a("399c"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"0bd14122",null);t["default"]=d.exports},e326:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{visible:e.visible}},[a("a-form-model",{ref:"form",attrs:{model:e.model}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"机构名称"}},[a("a-input",{staticStyle:{border:"0"},attrs:{placeholder:""},model:{value:e.model.departName,callback:function(t){e.$set(e.model,"departName",t)},expression:"model.departName"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"上级部门"}},[a("a-tree-select",{staticStyle:{width:"100%",border:"none",outline:"none"},attrs:{disabled:"",dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,placeholder:"无"},model:{value:e.model.parentId,callback:function(t){e.$set(e.model,"parentId",t)},expression:"model.parentId"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"机构编码"}},[a("a-input",{staticStyle:{border:"0"},attrs:{placeholder:""},model:{value:e.model.orgCode,callback:function(t){e.$set(e.model,"orgCode",t)},expression:"model.orgCode"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"机构类型"}},[a("a-radio-group",{attrs:{disabled:!0,"read-only":""},model:{value:e.model.orgCategory,callback:function(t){e.$set(e.model,"orgCategory",t)},expression:"model.orgCategory"}},[a("a-radio",{attrs:{value:"1"}},[e._v("\n            公司\n          ")]),a("a-radio",{attrs:{value:"2"}},[e._v("\n            部门\n          ")]),a("a-radio",{attrs:{value:"3"}},[e._v("\n            岗位\n          ")])],1)],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[a("a-input-number",{staticStyle:{border:"0"},model:{value:e.model.departOrder,callback:function(t){e.$set(e.model,"departOrder",t)},expression:"model.departOrder"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机号"}},[a("a-input",{staticStyle:{border:"0"},attrs:{placeholder:""},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"地址"}},[a("a-input",{staticStyle:{border:"0"},attrs:{placeholder:""},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[a("a-textarea",{staticStyle:{border:"0"},attrs:{placeholder:""},model:{value:e.model.memo,callback:function(t){e.$set(e.model,"memo",t)},expression:"model.memo"}})],1)],1)],1)},n=[],o=a("4ec3"),i={name:"DeptBaseInfo",components:{},data:function(){return{departTree:[],id:"",model:{},visible:!1,disable:!0,treeData:[],labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:16}}}},created:function(){this.loadTreeData()},methods:{loadTreeData:function(){var e=this;Object(o["R"])().then((function(t){if(t.success)for(var a=0;a<t.result.length;a++){var r=t.result[a];e.treeData.push(r)}}))},open:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.form.resetFields(),t.model=Object.assign({},e)}))},clearForm:function(){this.$refs.form.resetFields(),this.treeData=[]}}},s=i,l=(a("de61"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"1567e08d",null);t["default"]=c.exports},e420:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"height100",attrs:{"body-style":{height:"100%"},bordered:!1}},[a("div",{staticClass:"cardBody"},[a("div",{staticStyle:{"margin-bottom":"8px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addComponent("component")}}},[e._v(" 新增")]),a("a-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询 测试用，用完删")])],1),a("div",{staticStyle:{"margin-bottom":"8px"}},[a("div",{staticStyle:{display:"flex","align-items":"center","column-gap":"10px","margin-bottom":"4px"}},[e._v("\n        测试组件标识：\n        "),a("a-input",{staticStyle:{width:"160px"},model:{value:e.formKey,callback:function(t){e.formKey=t},expression:"formKey"}}),a("a-button",{on:{click:e.testValida}},[e._v("测试校验")])],1),e.formKey?a("custom-field-form",{key:"customKey_"+e.customKey,ref:"testCustomField",attrs:{pCustomKey:e.formKey}}):e._e()],1),a("div",{staticClass:"tableBox"},[a("vxe-grid",{ref:"componentTable",attrs:{columns:e.componentColumns,data:e.componentData,"expand-config":{accordion:!0,trigger:"cell",toggleMethod:e.toggleMethod},"keep-source":!0,loading:e.componentTableLoading,border:"",height:"auto","row-id":"id"},scopedSlots:e._u([{key:"componetAction",fn:function(t){var r=t.row;t.rowIndex;return[a("div",{staticStyle:{display:"flex","column-gap":"4px","align-items":"center","justify-content":"center"}},[a("a",{on:{click:function(t){return e.editComponent(r)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v("\n              编辑\n            ")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticStyle:{color:"red"},on:{click:function(t){return e.deleteRecord({row:r,type:"component"})}}},[a("a-icon",{attrs:{type:"delete"}}),e._v("\n              删除\n            ")],1)],1)]}},{key:"content",fn:function(t){var r=t.row;t.rowIndex;return[a("div",{staticStyle:{"margin-bottom":"8px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit(r)}}},[e._v(" 保存")]),a("a-button",{on:{click:function(t){return e.resetEdit(r)}}},[e._v("重置修改")])],1),a("vxe-grid",e._b({key:"componentTable"+e.tableKey,ref:"fieldTable",attrs:{data:e.fieldList,"auto-resize":""},scopedSlots:e._u([{key:"requiredHeader",fn:function(t){var r=t.column;return[a("span",{staticClass:"required"},[e._v(e._s(r.title))])]}},{key:"fieldTypeEdit",fn:function(t){var r=t.row;return[a("div",{staticStyle:{display:"flex","align-items":"center","column-gap":"4px"}},[a("vxe-select",{attrs:{options:[{label:"输入框",value:"input"},{label:"下拉框",value:"select"}],placeholder:"请输入字段类别",transfer:""},model:{value:r.fieldType,callback:function(t){e.$set(r,"fieldType",t)},expression:"row.fieldType"}}),"select"===r.fieldType?a("a-button",{attrs:{icon:"setting",size:"small"},on:{click:function(t){return e.openSetOptionModal(r)}}},[e._v("配置选项\n                ")]):e._e()],1)]}},{key:"action",fn:function(t){var n=t.row,o=t.rowIndex;return[a("a-space",{staticStyle:{"font-size":"16px"}},[a("a",{on:{click:function(t){return e.addField()}}},[a("a-icon",{attrs:{type:"plus"}})],1),e.fieldList.length>1?a("a",{staticStyle:{color:"red"},on:{click:function(t){return e.deleteRecord({row:r,fieldRow:n,filedRowIndex:o,type:"field"})}}},[a("a-icon",{attrs:{type:"delete"}})],1):e._e()])]}}],null,!0)},"vxe-grid",e.customFieldTableBind,!1))]}}])})],1)]),a("vxe-modal",{attrs:{"show-footer":"",title:"新增组件标识",width:"900"},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:e.saveComponentForm}},[e._v(" 保存")])]},proxy:!0}]),model:{value:e.componentVisible,callback:function(t){e.componentVisible=t},expression:"componentVisible"}},[a("a-form-model",{attrs:{labelCol:{span:0},model:e.componentModel,rules:e.componentEditRules,wrapperCol:{span:24}}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"required"},[e._v("组件标识")])]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"customKey"}},[a("a-input",{model:{value:e.componentModel.customKey,callback:function(t){e.$set(e.componentModel,"customKey",t)},expression:"componentModel.customKey"}})],1)],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"required"},[e._v("组件描述")])]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"describe"}},[a("a-input",{model:{value:e.componentModel.describe,callback:function(t){e.$set(e.componentModel,"describe",t)},expression:"componentModel.describe"}})],1)],1)],1)],1)],1),a("set-option-modal",{ref:"setOptionModal",on:{ok:e.getData}})],1)},n=[],o=a("0fea"),i=a("e321"),s=a("1eb7");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return(t=f(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){var t=m(e,"string");return"symbol"==l(t)?t:t+""}function m(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var h={name:"CustomFieldList",components:{SetOptionModal:s["default"],CustomFieldForm:i["default"]},created:function(){this.getData()},data:function(){var e=this;return{componentVisible:!1,componentModel:{},componentTableLoading:!1,componentColumns:[{type:"expand",title:"",width:40,align:"center",slots:{content:"content"}},{type:"seq",title:"序号",width:60,align:"center"},{title:"组件标识",field:"customKey"},{title:"组件描述",field:"describe"},{title:"操作",width:160,align:"center",slots:{default:"componetAction"}}],componentData:[],fieldList:[],customFieldTableBind:{columns:[{title:"字段",field:"field",editRender:{type:"visible",name:"$input",immediate:!0,props:{placeholder:"请输入字段"}},slots:{header:"requiredHeader"}},{title:"字段名称",field:"fieldName",editRender:{type:"visible",name:"$input",immediate:!0,props:{placeholder:"请输入字段名称"}},slots:{header:"requiredHeader"}},{title:"字段类别",field:"fieldType",slots:{edit:"fieldTypeEdit"},editRender:{type:"visible",immediate:!0}},{title:"是否必填",width:100,field:"required",align:"center",editRender:{type:"visible",name:"$switch",immediate:!0,props:{onValue:"1",offValue:"0"}}},{title:"校验方式",width:140,field:"dataCheckType",align:"center",editRender:{type:"visible",name:"$select",immediate:!0,options:[{label:"请选择",value:""},{label:"手机号码",value:"phone"}]}},{title:"序号",width:120,field:"orderNum",editRender:{type:"visible",name:"$input",immediate:!0,props:{type:"integer",min:1,step:1,placeholder:"请输入序号"}},slots:{header:"requiredHeader"}},{title:"操作",width:"80",align:"center",slots:{default:"action"}}],editConfig:{trigger:"manual",mode:"row",showStatus:!0},editRules:{field:[{validator:this.validatorField,trigger:"blur, change"}],fieldName:[{validator:this.validatorField,trigger:"blur, change"}],orderNum:[{validator:this.validatorField,trigger:"blur, change"}]},keepSource:!0,size:"small"},actionRow:null,componentEditRules:{customKey:[{validator:function(t,a,r){if(!a)return r("请输入组件标识！");var n=e.componentData.find((function(t){return t.id!==e.componentModel.id&&t.customKey===a}));if(n)return r("组件标识不可重复！");r()}}],describe:[{required:!0,message:"请输入组件描述！"}]},tableKey:0,formNum:2,formKey:"",customKey:0,url:{list:"/sys/sysCustomComponent/list",add:"/sys/sysCustomComponent/add",edit:"/sys/sysCustomComponent/edit",delete:"/sys/sysCustomComponent/delete"}}},methods:{testValida:function(){this.$refs.testCustomField.checkData()},validatorField:function(e){e.row;var t=e.cellValue,a=e.rowIndex,r=e.column;if(!t)return Promise.reject(new Error("请输入".concat(r.title,"！")));var n=this.fieldList,o=n.find((function(e,n){return e[r.property]===t&&a!==n}));return o?Promise.reject(new Error("".concat(r.title,"不可重复！"))):void 0},getData:function(){var e=this;this.$set(this,"componentData",[]),this.componentTableLoading=!0,Object(o["e"])(this.url.list,{pageSize:-1}).then((function(t){if(t&&t.success){e.$set(e,"componentData",[]);var a=[];t.result.records.forEach((function(e){var t=e.customKey,r=a.findIndex((function(e){return e.customKey===t}));if(r>-1)e&&e.field&&a[r].fieldList.push(e);else{var n={customKey:e.customKey,describe:e.describe,id:e.id,fieldList:[]};e&&e.field&&n.fieldList.push(e),a.push(n)}})),e.$set(e,"componentData",a),e.customKey++}})).catch((function(e){})).finally((function(){e.componentTableLoading=!1}))},addComponent:function(){this.$set(this,"componentModel",{customKey:"",describe:"",addCustomFlag:!0}),this.componentVisible=!0},editComponent:function(e){this.$set(this,"componentModel",JSON.parse(JSON.stringify(e))),this.componentModel.addCustomFlag=!0,this.componentVisible=!0},deleteRecord:function(e){var t=this,a=e.row,r=e.fieldRow,n=e.filedRowIndex,i=e.type;this.$confirm({title:"是否确认删除？",onOk:function(){var e={};if("component"===i)e.id=a.id,e.delCustomAllFileds=!0;else if(e.id=r.id,!r.id)return void t.fieldList.splice(n,1);t.componentTableLoading=!0,Object(o["a"])(t.url.delete,e).then((function(e){e&&e.success?(t.$message.success(e.message),"field"===i?t.fieldList.splice(n,1):t.getData()):t.$message.error(e.message)})).catch((function(e){})).finally((function(){t.componentTableLoading=!1}))}})},openSetOptionModal:function(e){this.$refs.setOptionModal.open(e)},saveComponentForm:function(){var e=this,t=[],a="";this.componentModel.id?(t=this.componentModel.fieldList.map((function(t){return d(d({},t),{},{customKey:e.componentModel.customKey,describe:e.componentModel.describe})})),t.unshift(this.componentModel),a=this.url.edit):(t=[this.componentModel],a=this.url.add),Object(o["j"])(a,t).then((function(t){t&&t.success?(e.componentVisible=!1,e.getData()):e.$message.error(t.message)}))},toggleMethod:function(e){var t=e.expanded,a=(e.column,e.row);return t?(this.$set(this,"fieldList",a.fieldList),this.fieldList&&0!==this.fieldList.length||this.addField()):this.$set(this,"fieldList",[]),!0},resetEdit:function(e){this.$refs.componentTable.revertData(e)},saveEdit:function(e){var t=this;this.$refs.fieldTable.fullValidate().then((function(a){var r=t.fieldList.map((function(t){return d(d({},t),{},{customKey:e.customKey,describe:e.describe})}));Object(o["j"])(t.url.add,r).then((function(e){e&&e.success?t.$refs.componentTable.clearAll():t.$message.error(e.message)}))})).catch((function(e){}))},addField:function(){this.fieldList.push({field:"",fieldName:"",fieldType:"input",required:"0",orderNum:void 0,dataCheckType:""})},delFormField:function(e){this.componentModel.fieldList&&this.componentModel.fieldList.length>1&&this.componentModel.fieldList.splice(e,1)}}},p=h,v=(a("9eb1"),a("a725"),a("2877")),b=Object(v["a"])(p,r,n,!1,null,"99be9528",null);t["default"]=b.exports},e716:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,okButtonProps:{props:{icon:"check-circle"}},cancelButtonProps:{props:{icon:"close-circle"}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{disabled:!1,border:!1,model:e.model,rules:e.rules}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[e.showOrg?a("a-col",{attrs:{span:6}},[e._v("\n          主管单位\n        ")]):e._e(),e.showOrg?a("a-col",{attrs:{span:18,"data-prop":"sysOrgCode"}},[a("j-dict-county-tree-select",{attrs:{replaceFields:{value:"code",children:"children",title:"name"}},on:{change:e.checkCode},model:{value:e.model.sysOrgCode,callback:function(t){e.$set(e.model,"sysOrgCode",t)},expression:"model.sysOrgCode"}})],1):e._e(),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("字典名称\n        ")]),a("a-col",{attrs:{span:18,"data-prop":"dictName"}},[a("a-input",{attrs:{placeholder:"请输入字典名称"},model:{value:e.model.dictName,callback:function(t){e.$set(e.model,"dictName",t)},expression:"model.dictName"}})],1),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("字典编码\n        ")]),a("a-col",{attrs:{span:18,"data-prop":"dictCode"}},[a("a-input",{attrs:{placeholder:"请输入字典编码"},model:{value:e.model.dictCode,callback:function(t){e.$set(e.model,"dictCode",t)},expression:"model.dictCode"}})],1),a("a-col",{staticClass:"height-108",attrs:{span:6}},[e._v("\n          描述\n        ")]),a("a-col",{staticClass:"height-108",attrs:{span:18}},[a("a-textarea",{attrs:{rows:4,placeholder:"请输入字典描述信息"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1)],1)],1)],1)},n=[],o=a("4ec3"),i=a("0fea"),s=a("db21");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};u(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,s){var c=m(e[n],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==l(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=h;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(l(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),u(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(f(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),u(S,d,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){d(o,r,n,i,s,"next",e)}function s(e){d(o,r,n,i,s,"throw",e)}i(void 0)}))}}var f={name:"DDictModal",components:{JDictCountyTreeSelect:s["default"]},data:function(){return{value:1,title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,zoneList:[],url:{queryZone:"/basics/sysZone/queryTreeList"},rules:{dictName:[{required:!0,message:"请输入字典名称!",trigger:"change"}],dictCode:[{required:!0,message:"请输入字典编码!",trigger:"change"},{validator:this.validateDictCode,type:"Promise"}]},disabled:!1,showOrg:!0}},methods:{checkCode:function(){this.$refs.formRow.validaFields(["dictCode"])},validateDictCode:function(e,t){var a=this;return new Promise((function(e){var r={sysOrgCode:a.model.sysOrgCode,dictCode:t,id:a.model.id};return Object(i["j"])("/sys/dDict/checkDDict",r).then((function(t){t.success?e():e("该字典已存在")}))}))},filter:function(e,t){return t.data.props.title.includes(e)},handleChange:function(e){this.model.status=e},add:function(){this.edit({})},edit:function(e){this.initZone(),this.model=Object.assign({},e),e.id&&(this.showOrg=!1),this.visible=!0},handleOk:function(){var e=u(c().mark((function e(){var t,a,r,n;return c().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.formRow.validaRowMsgPro(this.$refs.formOwnRow);case 3:if(a=e.sent,r=a.valida,!r){e.next=15;break}t.confirmLoading=!0,this.model.dictName=(this.model.dictName||"").trim(),this.model.dictCode=(this.model.dictCode||"").trim(),this.model.dictType=0,this.model.description=(this.model.description||"").trim(),n=this.model.id?Object(o["u"])(this.model):Object(o["a"])(this.model),n.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()})),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},initZone:function(){var e=this;Object(i["e"])(this.url.queryZone,{type:"tenant"}).then((function(t){t.success&&(e.zoneList=t.result,1!==e.zoneList.length||null!=t.result[0].children&&0!==t.result[0].children.length||(e.model.sysOrgCode=e.zoneList[0].key))}))},close:function(){this.$emit("close"),this.showOrg=!0,this.visible=!1},filterOptionOfMenu:function(e,t){return t.componentOptions.children[0].text.toString().indexOf(e.toString())>=0}}},m=f,h=(a("57b3"),a("2877")),p=Object(h["a"])(m,r,n,!1,null,"3fd5eeef",null);t["default"]=p.exports},e844:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}}},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("\n      关闭\n    ")],1),e.formDisabled?e._e():a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("\n      确定\n    ")],1)]},proxy:!0}])},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow",disabled:e.formDisabled}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.formDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("秘钥")]),a("a-col",{attrs:{span:20,"data-prop":"authKey"}},[a("a-input",{attrs:{placeholder:"请输入秘钥",maxLength:100},model:{value:e.model.authKey,callback:function(t){e.$set(e.model,"authKey",t)},expression:"model.authKey"}})],1),a("a-col",{attrs:{span:4}},[e.formDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("令牌号")]),a("a-col",{attrs:{span:20,"data-prop":"tokenNo"}},[a("a-input",{attrs:{placeholder:"请输入令牌号",maxLength:50},model:{value:e.model.tokenNo,callback:function(t){e.$set(e.model,"tokenNo",t)},expression:"model.tokenNo"}})],1),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("漂移值")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:8,"data-prop":"currDft"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入漂移值",disabled:""},model:{value:e.model.currDft,callback:function(t){e.$set(e.model,"currDft",t)},expression:"model.currDft"}})],1):e._e(),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("认证窗口")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:8,"data-prop":"authWnd"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入认证窗口"},model:{value:e.model.authWnd,callback:function(t){e.$set(e.model,"authWnd",t)},expression:"model.authWnd"}})],1):e._e(),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("成功值")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:8,"data-prop":"currSucc"}},[a("a-input",{attrs:{placeholder:"请输入成功值",disabled:""},model:{value:e.model.currSucc,callback:function(t){e.$set(e.model,"currSucc",t)},expression:"model.currSucc"}})],1):e._e(),a("a-col",{attrs:{span:4}},[e.formDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("所属机构")]),a("a-col",{attrs:{span:20,"data-prop":"departId"}},[a("j-select-depart",{staticClass:"width100",attrs:{multi:!1,backDepart:!0,from:e.from,treeOpera:!0},on:{back:e.backDepartInfo},model:{value:e.model.departId,callback:function(t){e.$set(e.model,"departId",t)},expression:"model.departId"}})],1),a("a-col",{attrs:{span:4}},[e.formDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("联系电话")]),a("a-col",{attrs:{span:20,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("是否禁用")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:8}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否",checked:1==e.model.isDisable},on:{change:e.switchChange}})],1):e._e(),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("禁用原因")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:20}},[a("a-textarea",{attrs:{placeholder:"请输入禁用原因","auto-size":{minRows:2,maxRows:6},maxLength:150},model:{value:e.model.disReason,callback:function(t){e.$set(e.model,"disReason",t)},expression:"model.disReason"}})],1):e._e(),e.formDisabled?a("a-col",{attrs:{span:4}},[e._v("备注")]):e._e(),e.formDisabled?a("a-col",{attrs:{span:20}},[a("a-textarea",{attrs:{placeholder:"请输入备注","auto-size":{minRows:2,maxRows:6},maxLength:150},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1):e._e()],1)],1)],1)],1)},n=[],o=a("0fea"),i=a("4ec3");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new D(r||[]);return n(i,"_invoke",{value:I(e,a,s)}),i}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function C(){}var k={};u(k,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(R([])));_&&_!==a&&r.call(_,i)&&(k=_);var S=C.prototype=g.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function a(n,o,i,l){var c=m(e[n],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==s(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function I(t,a,r){var n=h;return function(o,i){if(n===v)throw Error("Generator is already running");if(n===b){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var l=$(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=m(t,a,r);if("normal"===c.type){if(n=r.done?b:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=b,r.method="throw",r.arg=c.arg)}}}function $(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,$(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,y;var i=o.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,n(S,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var i=new L(f(e,a,r,n),o);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),u(S,d,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return s.type="throw",s.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:R(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){c(o,r,n,i,s,"next",e)}function s(e){c(o,r,n,i,s,"throw",e)}i(void 0)}))}}var u={name:"OtpStorageModal",data:function(){var e=this,t=function(t,a){return new Promise(function(){var t=d(l().mark((function t(r){return l().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",r());case 2:Object(o["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:e.model.phone}}).then((function(e){return e.success?r():r(e.result)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return{title:"",width:800,visible:!1,disableSubmit:!1,model:{authWnd:20,currSucc:0,currDft:0,isDisable:0},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{authKey:[{required:!0,message:"请输入秘钥！"}],tokenNo:[{required:!0,message:"请输入令牌号！"},{validator:this.validateTokenNo,type:"Promise"}],departId:[{required:!0,message:"请选择所属机构！"}],phone:[{required:!0,message:"请输入联系电话！"},{validator:t,type:"Promise"}]},url:{add:"/sys/otpStorage/add",edit:"/sys/otpStorage/edit",queryById:"/sys/otpStorage/queryById"},formDisabled:!1,queryParam:{},from:"token"}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{backDepartInfo:function(e){this.model.departId=e[0].value},validateTokenNo:function(e,t,a){var r=this;return new Promise(function(){var e=d(l().mark((function e(a){var n;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={tableName:"d_otp_storage",fieldName:"token_no",fieldVal:t,dataId:r.model.id},Object(i["s"])(n).then((function(e){e.success?a():a("令牌号已存在")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},add:function(){this.visible=!0,this.edit(this.modelDefault)},edit:function(e){this.model=Object.assign({},e),this.visible=!0,this.formDisabled=!1},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=d(l().mark((function e(){var t,a,r,n,i,s=this;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validaRowMsgPro(this.$refs.formOwnRow);case 2:t=e.sent,a=t.valida,a&&(r=this,r.confirmLoading=!0,n="",i="",this.model.id?(n+=this.url.edit,i="put"):(n+=this.url.add,i="post"),Object(o["i"])(n,this.model,i).then((function(e){e.success?(r.$message.success(e.message),r.$emit("ok"),s.visible=!1):r.$message.warning(e.message)})).finally((function(){r.confirmLoading=!1})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valida:function(){var e=this.$refs.form.validaRowMsgPro(this.$refs.formOwnRow);return e.valida},switchChange:function(e){this.model.isDisable=e?1:0},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},f=u,m=(a("1907"),a("2877")),h=Object(m["a"])(f,r,n,!1,null,"378f1b78",null);t["default"]=h.exports},e998:function(e,t,a){},eb9c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:1e3,title:e.title,visible:e.innerVisible,cancelText:"关闭",okButtonProps:{style:{display:"none"}}},on:{cancel:e.handleCancel}},[a("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[a("template",{slot:"message"},[a("span",[e._v("已选择")]),a("a",{staticStyle:{"font-weight":"600",padding:"0 4px"}},[e._v(e._s(e.selectedRowKeys.length))]),a("span",[e._v("项")]),e.selectedRowKeys.length>0?[a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleClearSelection}},[e._v("清空选择")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleRevertBatch}},[e._v("批量还原")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.handleDeleteBatch}},[e._v("批量删除")])]:e._e()],2)],2),a("a-table",{ref:"table",attrs:{rowKey:"id",size:"middle",bordered:"",columns:e.columns,loading:e.loading,dataSource:e.dataSource,pagination:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.handleTableSelectChange}},scopedSlots:e._u([{key:"avatarslot",fn:function(t,r,n){return[a("div",{staticClass:"anty-img-wrap"},[a("a-avatar",{attrs:{shape:"square",src:e.url.getAvatar(r.avatar),icon:"user"}})],1)]}},{key:"action",fn:function(t,r){return a("span",{},[a("a",{on:{click:function(t){return e.handleRevert([r.id])}}},[a("a-icon",{attrs:{type:"redo"}}),e._v(" 还原用户")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleDelete([r.id])}}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 彻底删除")],1)],1)}}])})],1)},n=[],o=a("0fea");function i(e){var t=this;this.loading=!!e.loading,e.promise.then((function(t){if(!t.success||"function"!==typeof e.success)throw new Error(t.message);e.success(t)})).catch((function(e){t.$message.warning("查询已删除的用户失败："+(e.message||e))})).finally((function(){t.loading=!1}))}var s={name:"UserRecycleBinModal",props:{visible:{type:Boolean,default:!1}},data:function(){return{title:"用户回收站",loading:!1,innerVisible:!1,selectedRowKeys:[],dataSource:[],columns:[{title:"#",align:"center",key:"rowIndex",width:80,customRender:function(e,t,a){return a+1}},{title:"账号",align:"center",dataIndex:"username"},{title:"姓名",align:"center",dataIndex:"realname"},{title:"头像",align:"center",dataIndex:"avatar",scopedSlots:{customRender:"avatarslot"}},{title:"部门",align:"center",dataIndex:"orgCode"},{title:"操作",align:"center",dataIndex:"action",width:200,scopedSlots:{customRender:"action"}}],url:{getAvatar:function(e){return Object(o["f"])("".concat(e))},recycleBin:"/sys/user/recycleBin",putRecycleBin:"/sys/user/putRecycleBin",deleteRecycleBin:"/sys/user/deleteRecycleBin"}}},watch:{visible:{immediate:!0,handler:function(e){e&&this.loadData(),this.innerVisible=e}},innerVisible:function(e){this.$emit("update:visible",e)}},methods:{loadData:function(){var e=this;i.call(this,{loading:!0,promise:this.$http.get(this.url.recycleBin),success:function(t){return e.dataSource=t.result}})},handleOk:function(){this.loadData(),this.$emit("ok")},handleCancel:function(){this.innerVisible=!1},handleRevert:function(e){var t=this;this.$confirm({title:"恢复用户",content:"您确定要恢复这 ".concat(e.length," 个用户吗？"),centered:!0,onOk:function(){Object(o["l"])(t.url.putRecycleBin,{userIds:e.join(",")}).then((function(a){a.success&&(t.handleOk(),t.handleClearSelection(),t.$message.success("还原 ".concat(e.length," 个用户成功！")))}))}})},handleDelete:function(e){var t=this,a=this.$createElement;this.$confirm({title:"彻底删除用户",content:a("div",[a("p",["您确定要彻底删除这 ",e.length," 个用户吗？"]),a("p",{style:"color:red;"},["注意：彻底删除后将无法恢复，请谨慎操作！"])]),centered:!0,icon:function(){return a("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #FF4D4F"})},onOk:function(){var a=t;Object(o["a"])(a.url.deleteRecycleBin,{userIds:e.join(",")}).then((function(r){r.success?(t.loadData(),t.handleClearSelection(),t.$message.success("彻底删除 ".concat(e.length," 个用户成功！"))):a.$message.warning(r.message)}))}})},handleRevertBatch:function(){this.handleRevert(this.selectedRowKeys)},handleDeleteBatch:function(){this.handleDelete(this.selectedRowKeys)},handleClearSelection:function(){this.handleTableSelectChange([],[])},handleTableSelectChange:function(e,t){this.selectedRowKeys=e,this.selectionRows=t}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"7348ad04",null);t["default"]=d.exports},ece6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("a-drawer",{staticStyle:{overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:"45%",placement:"right",closable:!0,visible:e.visible},on:{close:e.handleCancel}},[a("a-form-model",{ref:"form",attrs:{layout:e.layout,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,model:e.router}},[a("a-form-model-item",{attrs:{label:"路由ID"}},[a("a-input",{attrs:{placeholder:"路由唯一ID"},model:{value:e.router.routerId,callback:function(t){e.$set(e.router,"routerId",t)},expression:"router.routerId"}})],1),a("a-form-model-item",{attrs:{label:"路由名称"}},[a("a-input",{attrs:{placeholder:"路由名称"},model:{value:e.router.name,callback:function(t){e.$set(e.router,"name",t)},expression:"router.name"}})],1),a("a-form-model-item",{attrs:{label:"路由URI"}},[a("a-input",{attrs:{placeholder:"路由URL"},model:{value:e.router.uri,callback:function(t){e.$set(e.router,"uri",t)},expression:"router.uri"}})],1),a("a-form-model-item",{attrs:{label:"路由状态",prop:"status"}},[a("a-switch",{attrs:{"default-checked":""},model:{value:e.router.status,callback:function(t){e.$set(e.router,"status",t)},expression:"router.status"}})],1),a("a-form-model-item",{attrs:{prop:"predicates",label:"路由条件"}},[e._l(e.router.predicates,(function(t,r){return a("div",[a("a-divider",[e._v(e._s(t.name)+"\n          "),a("a-icon",{attrs:{type:"delete",size:"22"},on:{click:function(t){return e.removePredicate(e.router,r)}}})],1),a("div",[e._l(t.args,(function(r,n){return[n==e.currentTagIndex?a("a-input",{ref:"input",refInFor:!0,style:{width:"190px"},attrs:{type:"text",size:"small",value:r},on:{change:e.handleInputChange,blur:function(a){return e.handleInputEditConfirm(t,r,n)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputEditConfirm(t,r,n)}}}):a("a-tag",{key:r,attrs:{closable:!0},on:{close:function(){return e.removeTag(t,r)},click:function(t){return e.editTag(r,n)}}},[e._v("\n              "+e._s(r)+"\n            ")])]})),e.inputVisible&&r==e.currentNameIndex?a("a-input",{ref:"input",refInFor:!0,style:{width:"100px"},attrs:{type:"text",size:"small",value:e.inputValue},on:{change:e.handleInputChange,blur:function(a){return e.handleInputConfirm(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t)}}}):a("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},on:{click:function(a){return e.showInput(t,r)}}},[a("a-icon",{attrs:{type:"plus"}}),e._v("\n            新建"+e._s(t.name)+"\n          ")],1)],2)],1)})),a("p",{staticClass:"btn",staticStyle:{"padding-top":"10px"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.predicatesHandleMenuClick},slot:"overlay"},e._l(e.tagArray,(function(t){return a("a-menu-item",{key:t},[e._v(e._s(t))])})),1),a("a-button",{staticStyle:{"margin-left":"8px",width:"100%"},attrs:{type:"dashed"}},[e._v(" 添加路由条件\n            "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)],2),a("a-form-model-item",{attrs:{prop:"predicates",label:"过滤器"}},[e._l(e.router.filters,(function(t,r){return a("div",[a("a-divider",[e._v(e._s(t.name)+"\n          "),a("a-icon",{attrs:{type:"delete",size:"22"},on:{click:function(t){return e.removeFilter(e.router,r)}}})],1),e._l(t.args,(function(r,n){return a("div",{key:r.key},[a("a-input",{staticStyle:{width:"45%","margin-right":"8px"},attrs:{placeholder:"参数键"},model:{value:r.key,callback:function(t){e.$set(r,"key",t)},expression:"tag.key"}}),a("a-input",{staticStyle:{width:"40%","margin-right":"8px"},attrs:{placeholder:"参数值"},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"tag.value"}}),a("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(a){return e.removeFilterParams(t,n)}}})],1)})),a("a-button",{staticStyle:{"margin-left":"28%",width:"30%"},attrs:{type:"dashed",size:"small"},on:{click:function(a){return e.addFilterParams(t)}}},[a("a-icon",{attrs:{type:"plus"}}),e._v("\n          添加参数\n        ")],1)],2)})),a("p",{staticClass:"btn",staticStyle:{"padding-top":"10px"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.filterHandleMenuClick},slot:"overlay"},e._l(e.filterArray,(function(t){return a("a-menu-item",{key:t.key,attrs:{name:t.name}},[e._v(e._s(t.name))])})),1),a("a-button",{staticStyle:{"margin-left":"8px",width:"100%"},attrs:{type:"dashed"}},[e._v(" 添加过滤器\n            "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)],2),a("a-row",{staticClass:"drawer-bootom-button",style:{textAlign:"right"}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]),a("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)],1):e._e()},n=[],o=a("0fea"),i=["predicates","filters"];function s(e,t){if(null==e)return{};var a,r,n=l(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function l(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;a[r]=e[r]}return a}function c(e){return m(e)||f(e)||u(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function f(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var p={name:"GateWayRouteModal",components:{},data:function(){return{layout:"horizontal",labelCol:{span:3},wrapperCol:{span:14},currentNameIndex:0,currentTagIndex:-1,predicates:{},filterArray:[{key:0,name:"熔断器"},{key:1,name:"限流过滤器"}],tagArray:["Path","Host","Cookie","Header","Method","Query","After","Before","Between","RemoteAddr"],inputVisible:!1,inputValue:"",url:{update:"/sys/gatewayRoute/updateAll",clear:"/sys/gatewayRoute/clearRedis"},router:this.getRouter(),title:"路由编辑",visible:!1,loading:!1}},methods:{getRouter:function(){return{routerId:"",name:"",uri:"",predicates:[],filters:[]}},show:function(e){e?(e.status=Boolean(e.status),this.router=e):(this.router=this.getRouter(),this.inputValue=""),this.visible=!0,this.currentTagIndex=-1,this.currentNameIndex=-1},close:function(){this.reset(),this.$emit("close"),this.$refs["form"].resetFields(),this.visible=!1},removeTag:function(e,t){var a=e.args.filter((function(e){return e!==t}));e.args=a},predicatesHandleMenuClick:function(e){this.router.predicates.push({args:[],name:e.key})},editTag:function(e,t){this.currentTagIndex=t},showInput:function(e,t){this.inputVisible=!0,this.currentNameIndex=t},handleInputChange:function(e){this.inputValue=e.target.value},removePredicate:function(e,t){e.predicates.splice(t,1)},removeFilterParams:function(e,t){e.args.splice(t,1)},removeFilter:function(e,t){e.filters.splice(t,1)},addFilterParams:function(e){e.args.push({key:"key"+e.args.length+1,value:""})},filterHandleMenuClick:function(e){0==e.key&&this.router.filters.push({args:[{key:"name",value:"default"},{key:"fallbackUri",value:"forward:/fallback"}],name:"Hystrix",title:this.filterArray[0].name}),1==e.key&&this.router.filters.push({args:[{key:"key-resolver",value:"#{@ipKeyResolver}"},{key:"redis-rate-limiter.replenishRate",value:20},{key:"redis-rate-limiter.burstCapacity",value:20}],name:"RequestRateLimiter",title:this.filterArray[1].name})},handleInputConfirm:function(e){var t=this.inputValue,a=e.args;t&&-1===a.indexOf(t)&&(e.args=[].concat(c(a),[t])),Object.assign(this,{tags:a,inputVisible:!1,inputValue:""}),this.currentTagIndex=-1},handleInputEditConfirm:function(e,t,a){if(this.inputValue){var r=this.inputValue;e.args[a]=r}this.currentTagIndex=-1},reset:function(){this.expandedKeysss=[],this.checkedKeys=[],this.defaultCheckedKeys=[],this.loading=!1},handleCancel:function(){this.close()},handleSubmit:function(){var e=this,t=this.router,a=(t.predicates,t.filters,s(t,i)),r=a;r.predicates=JSON.stringify(this.router.predicates),r.filters=JSON.stringify(this.router.filters),Object(o["j"])(this.url.update,{router:r}).then((function(t){t.success?(e.close(),e.$emit("ok"),e.$message.success(t.message)):e.$message.error(t.message)}))}}},v=p,b=(a("fea1c"),a("2877")),y=Object(b["a"])(v,r,n,!1,null,"3a8dc21f",null);t["default"]=y.exports},ed2a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:1200,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:6}},[a("a-form-item",{attrs:{label:"账号"}},[a("a-input",{attrs:{placeholder:"请输入账号"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-item",{attrs:{label:"性别"}},[a("a-select",{attrs:{placeholder:"请选择性别"},model:{value:e.queryParam.sex,callback:function(t){e.$set(e.queryParam,"sex",t)},expression:"queryParam.sex"}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择性别查询")]),a("a-select-option",{attrs:{value:"1"}},[e._v("男性")]),a("a-select-option",{attrs:{value:"2"}},[e._v("女性")])],1)],1)],1),e.toggleSearchStatus?[a("a-col",{attrs:{span:6}},[a("a-form-item",{attrs:{label:"邮箱"}},[a("a-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.queryParam.email,callback:function(t){e.$set(e.queryParam,"email",t)},expression:"queryParam.email"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-item",{attrs:{label:"手机号码"}},[a("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.queryParam.phone,callback:function(t){e.$set(e.queryParam,"phone",t)},expression:"queryParam.phone"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{placeholder:"请选择状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择状态")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"2"}},[e._v("解冻")])],1)],1)],1)]:e._e(),a("a-col",{attrs:{span:6}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchByquery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.handleToggleSearch}},[e._v("\n              "+e._s(e.toggleSearchStatus?"收起":"展开")+"\n              "),a("a-icon",{attrs:{type:e.toggleSearchStatus?"up":"down"}})],1)],1)])],2)],1)],1),a("a-table",{ref:"table",attrs:{rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,onSelect:e.onSelect}},on:{change:e.handleTableChange}})],1)},n=[],o=a("ca00"),i=a("4ec3"),s={name:"SelectUserListModal",components:{},data:function(){return{title:"选择用户",queryParam:{},columns:[{title:"用户账号",align:"center",dataIndex:"username",fixed:"left",width:200},{title:"用户名称",align:"center",dataIndex:"realname"},{title:"性别",align:"center",dataIndex:"sex",customRender:function(e){return 1==e?"男":2==e?"女":e}},{title:"手机号码",align:"center",dataIndex:"phone"},{title:"邮箱",align:"center",dataIndex:"email"},{title:"状态",align:"center",dataIndex:"status",customRender:function(e){return 1==e?"正常":2==e?"冻结":e}}],dataSource:[],ipagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"createTime",order:"desc"},selectedRowKeys:[],selectionRows:[],visible:!1,toggleSearchStatus:!1}},created:function(){this.loadData()},methods:{add:function(e,t){this.visible=!0,this.edit(e,t)},edit:function(e,t){if(t&&t.length>0?this.selectedRowKeys=t.split(","):this.selectedRowKeys=[],e){var a=this;a.selectionRows=[],e.forEach((function(e,t){a.selectionRows.push({id:a.selectedRowKeys[t],realname:e.label})}))}else this.selectionRows=[]},loadData:function(e){var t=this;1===e&&(this.ipagination.current=1);var a=this.getQueryParams();Object(i["L"])(a).then((function(e){e.success&&(t.dataSource=e.result.records,t.ipagination.total=e.result.total)}))},getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(o["f"])(e)},getQueryField:function(){for(var e="id,",t=0;t<this.columns.length;t++)e+=","+this.columns[t].dataIndex;return e},onSelectChange:function(e){this.selectedRowKeys=e},onSelect:function(e,t){1==t?this.selectionRows.push(e):this.selectionRows.forEach((function(t,a,r){t.id==e.id&&r.splice(a,1)}))},searchReset:function(){var e=this;Object.keys(e.queryParam).forEach((function(t){e.queryParam[t]=""})),e.loadData(1)},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=e,this.loadData()},handleCancel:function(){this.selectionRows=[],this.selectedRowKeys=[],this.visible=!1},handleOk:function(){this.$emit("choseUser",this.selectionRows),this.handleCancel()},searchByquery:function(){this.loadData(1)},handleToggleSearch:function(){this.toggleSearchStatus=!this.toggleSearchStatus}}},l=s,c=(a("3668"),a("2877")),d=Object(c["a"])(l,r,n,!1,null,"3e573fce",null);t["default"]=d.exports},ee18:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,maskClosable:!0,width:"650",placement:"right",closable:!0,visible:e.visible,"body-style":{height:"calc(100% - 55px - 53px)",overflow:"auto"}},on:{close:e.close}},[a("a-form",[a("a-form-item",{attrs:{label:"所拥有的权限"}},[a("a-tree",{ref:"trees",attrs:{checkable:"",checkedKeys:e.checkedKeys,treeData:e.treeData,selectedKeys:e.selectedKeys,expandedKeys:e.expandedKeysss,checkStrictly:e.checkStrictly},on:{check:e.onCheck,expand:e.onExpand,select:e.onTreeNodeSelect},scopedSlots:e._u([{key:"hasDatarule",fn:function(t){var r=t.slotTitle,n=t.ruleFlag,o=t.component;return a("span",{},["dashboard/ThirdPartyHome"===o&&"首页"===r?[e._v("\n            第三方首页\n          ")]:[e._v("\n            "+e._s(r)+"\n          ")],n?a("a-icon",{staticStyle:{"margin-left":"5px",color:"red"},attrs:{type:"align-left"}}):e._e()],2)}}])})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),a("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")]),a("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),a("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n        树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.close}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{staticStyle:{"margin-right":"0.8rem"},attrs:{type:"primary",loading:e.loading,ghost:""},on:{click:function(t){return e.handleSubmit(!1)}}},[e._v("仅保存")]),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v("保存并关闭")])],1),a("role-datarule-modal",{ref:"datarule"})],1)},n=[],o=a("4ec3"),i=a("2285");function s(e){return u(e)||d(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var m={name:"RoleModal",components:{RoleDataruleModal:i["default"]},data:function(){return{roleId:"",treeData:[],defaultCheckedKeys:[],checkedKeys:[],expandedKeysss:[],allTreeKeys:[],autoExpandParent:!0,checkStrictly:!0,title:"角色权限配置",visible:!1,loading:!1,selectedKeys:[]}},methods:{onTreeNodeSelect:function(e){e&&e.length>0&&(this.selectedKeys=e),this.$refs.datarule.show(this.selectedKeys[0],this.roleId)},onCheck:function(e){this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e},show:function(e){this.roleId=e,this.visible=!0},close:function(){this.reset(),this.$emit("close"),this.visible=!1},onExpand:function(e){this.expandedKeysss=e,this.autoExpandParent=!1},reset:function(){this.expandedKeysss=[],this.checkedKeys=[],this.defaultCheckedKeys=[],this.loading=!1},expandAll:function(){this.expandedKeysss=this.allTreeKeys},closeAll:function(){this.expandedKeysss=[]},checkALL:function(){this.checkedKeys=this.allTreeKeys},cancelCheckALL:function(){this.checkedKeys=[]},switchCheckStrictly:function(e){var t=this;1==e?(this.checkStrictly=!1,this.$nextTick((function(){t.checkedKeys=t.$refs.trees.$refs.tree._data._checkedKeys}))):2==e&&(this.checkStrictly=!0)},handleCancel:function(){this.close()},handleSubmit:function(e){var t=this,a=this,r={roleId:a.roleId,permissionIds:a.checkedKeys.join(","),lastpermissionIds:a.defaultCheckedKeys.join(",")};a.loading=!0,Object(o["eb"])(r).then((function(e){e.success?a.$message.success(e.message):a.$message.error(e.message),t.loadData()})).finally((function(){a.loading=!1,e&&a.close()}))},loadData:function(){var e=this;Object(o["Y"])().then((function(t){e.treeData=t.result.treeList,e.allTreeKeys=t.result.ids,Object(o["V"])({roleId:e.roleId}).then((function(t){e.checkedKeys=s(t.result),e.defaultCheckedKeys=s(t.result),e.expandedKeysss=e.allTreeKeys}))}))}},watch:{visible:function(){this.visible&&this.loadData()}}},h=m,p=(a("89ff"),a("2877")),v=Object(p["a"])(h,r,n,!1,null,"342062be",null);t["default"]=v.exports},f1cf:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{attrs:{icon:"close-circle"},on:{click:e.handleCancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",icon:"check-circle"},on:{click:e.handleOk}},[e._v("确定")])],1),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e._v("父级节点")]),a("a-col",{attrs:{span:20}},[a("j-tree-select",{ref:"treeSelect",attrs:{placeholder:"请选择父级节点",dict:"sys_category,name,id",pidField:"pid",pidValue:"0"},model:{value:e.model.pid,callback:function(t){e.$set(e.model,"pid",t)},expression:"model.pid"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("分类名称")]),a("a-col",{attrs:{span:20,"data-prop":"name"}},[a("a-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-col",{attrs:{span:4}},[a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("分类编码")]),a("a-col",{attrs:{span:20,"data-prop":e.spliceParentCode?"modelCode":"code"}},[e.spliceParentCode?a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center"}},[a("span",[e._v(e._s(e.model.parentCode))]),a("span",[e._v(" - ")]),a("a-input",{staticStyle:{flex:"1",width:"0"},attrs:{placeholder:"请输入分类编码"},model:{value:e.model.modelCode,callback:function(t){e.$set(e.model,"modelCode",t)},expression:"model.modelCode"}})],1):[a("a-input",{staticStyle:{flex:"1",width:"0"},attrs:{placeholder:"请输入分类编码"},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})]],2),a("a-col",{attrs:{span:4}},[e._v("备注")]),a("a-col",{attrs:{span:20}},[a("a-input",{attrs:{placeholder:"请输入备注"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1)],1)],2)},n=[],o=a("0fea"),i=a("4ec3"),s=a("b098");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return(t=p(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e){var t=v(e,"string");return"symbol"==l(t)?t:t+""}function v(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var b={name:"SysCategoryModal",props:{spliceParentCode:{type:Boolean,default:!1}},components:{JTreeSelect:s["default"]},data:function(){return{title:"操作",width:"50vw",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{name:[{required:!0,message:"请输入分类字典名称",trigger:"change"}],code:[{required:!0,message:"请输入分类字典编码",trigger:"change"}],modelCode:[{required:!0,message:"请输入分类字典编码",trigger:"change"}]},url:{add:"/sys/category/add",edit:"/sys/category/edit",checkCode:"/sys/category/checkCode"},expandedRowKeys:[],pidField:"pid",subExpandedKeys:[]}},methods:{validateDictCode:function(e,t,a){var r={tableName:"sys_category",fieldName:"code",fieldVal:t,dataId:this.model.id};Object(i["s"])(r).then((function(e){e.success?a():a(e.message)}))},add:function(){this.edit({})},edit:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this,a=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;if(a){t.confirmLoading=!0;var r="",n="";this.model.id?(r+=this.url.edit,n="put"):(r+=this.url.add,n="post"),this.spliceParentCode&&this.$set(this.model,"code",this.model.parentCode+this.model.modelCode),Object(o["i"])(r,this.model,n).then((function(a){a.success?(t.$message.success(a.message),t.submitSuccess(m({},e.model))):t.$message.warning(a.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}},handleCancel:function(){this.close()},submitSuccess:function(e){if(e.id)this.$emit("ok",e);else{var t=this.$refs.treeSelect.getCurrTreeData();this.expandedRowKeys=[],this.getExpandKeysByPid(e[this.pidField],t,t),e.pid&&0===this.expandedRowKeys.length&&(this.expandedRowKeys=this.subExpandedKeys),this.$emit("ok",e,this.expandedRowKeys.reverse())}},getExpandKeysByPid:function(e,t,a){if(e&&t&&t.length>0){var r,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.key===e?(this.expandedRowKeys.push(o.key),this.getExpandKeysByPid(o["parentId"],a,a)):this.getExpandKeysByPid(e,o.children,a)}}catch(i){n.e(i)}finally{n.f()}}}}},y=b,g=(a("aa42f"),a("2877")),w=Object(g["a"])(y,r,n,!1,null,"1be9eecc",null);t["default"]=w.exports},f6f8:function(e,t,a){},f71f:function(e,t,a){"use strict";a("5cb0")},fa3f:function(e,t,a){},fb53:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"uploadPage",staticClass:"uploadPage"},[a("div",{staticClass:"fileListBox"},[e.showEnclosure?a("updating-files",{staticClass:"fileList",attrs:{busiType:e.queryParams.bType,busiTypeDetail:e.queryParams.bDetailType,busiNo:e.queryParams.bNo,"ere-id":e.queryParams.ereId},on:{change:e.fileChange}}):e._e()],1),a("van-button",{attrs:{size:"large",block:"",type:"info"},on:{click:e.syncFiles}},[e._v("上传照片到电脑端\n  ")])],1)},n=[],o=a("0fea"),i=a("5861"),s=a("2b0e"),l=a("9fb0"),c={name:"UploadAcrossScreens",components:{UpdatingFiles:i["default"]},data:function(){return{showEnclosure:!1,fileList:[],distinguishType:"",corpId:"1567068742207459330",fileIds:"",queryParams:{},url:{getUploadCodeFile:"/qr/getUploadCodeFile"}}},created:function(){document.title="图档上传",this.queryParams=JSON.parse(decodeURIComponent(this.$route_query.message)),s["default"].ls.remove(l["A"]),s["default"].ls.remove(l["x"]),s["default"].ls.remove(l["G"]),s["default"].ls.set(l["A"],this.queryParams.sourceName,6048e5),s["default"].ls.set(l["x"],this.queryParams.redisIndex,6048e5),s["default"].ls.set(l["G"],this.queryParams.uploadPath,6048e5),this.showEnclosure=!0},mounted:function(){document.body.append(this.$refs.uploadPage)},methods:{fileChange:function(e){this.fileIds=e},syncFiles:function(){var e={};e.isUploadCode=this.queryParams.id,e.fileIdList=this.fileIds.join(","),e.uid=this.queryParams.bNo,this.buildExpenditureFiles(e)},buildExpenditureFiles:function(e){var t=this;Object(o["e"])("/control/file/uploadCodeSyncNoLogin",e).then((function(e){if(e.success){t.$toast.loading({duration:0,message:"正在同步",forbidClick:!0});var a=setTimeout((function(){t.$toast.success("同步成功"),clearInterval(a),t.$toast.clear()}),1e3)}else t.$toast.error("同步失败")}))},buildPath:function(e){return window._CONFIG["staticDomainURL"]+"/"+e}}},d=c,u=(a("b8c7"),a("2877")),f=Object(u["a"])(d,r,n,!1,null,"0ee487ca",null);t["default"]=f.exports},fcbc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:e.modalWidth,visible:e.visible,footer:null,cancelText:"关闭"},on:{cancel:e.handleCancel}},[a("div",{staticClass:"marginCss"},[a("a-table",{ref:"table",attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,rowClassName:e.setdataCss,loading:e.loading,scroll:{y:700},pagination:!1},scopedSlots:e._u([{key:"avatarslot",fn:function(t,r){return[a("div",{staticClass:"anty-img-wrap"},[a("img",{attrs:{src:e.getAvatarView(r)}})])]}}])},[a("span",{attrs:{slot:"dataVersionTitle1"},slot:"dataVersionTitle1"},[a("a-icon",{attrs:{type:"smile-o"}}),e._v(" 版本:"+e._s(e.dataVersion1Num))],1),a("span",{attrs:{slot:"dataVersionTitle2"},slot:"dataVersionTitle2"},[a("a-icon",{attrs:{type:"smile-o"}}),e._v(" 版本:"+e._s(e.dataVersion2Num))],1)])],1)])},n=[],o=a("0fea"),i={name:"DataLogCompareModal",data:function(){return{modalWidth:1e3,modaltoggleFlag:!0,confirmDirty:!1,title:"操作",visible:!1,model:{},confirmLoading:!1,headers:{},dataVersion1Num:"",dataVersion2Num:"",columns:[{title:"字段名",align:"left",dataIndex:"code",width:"30%"},{align:"left",dataIndex:"dataVersion1",width:"30%",slots:{title:"dataVersionTitle1"}},{title:"",dataIndex:"imgshow",align:"center",scopedSlots:{customRender:"avatarslot"},width:"10%"},{align:"left",dataIndex:"dataVersion2",width:"30%",slots:{title:"dataVersionTitle2"}}],dataSource:[],loading:!1,url:{queryCompareUrl:"/sys/dataLog/queryCompareList"}}},created:function(){},methods:{loadData:function(e,t){var a=this;this.dataSource=[];var r=this;Object(o["e"])(r.url.queryCompareUrl,{dataId1:e,dataId2:t}).then((function(e){if(e.success){r.dataVersion1Num=e.result[0].dataVersion,r.dataVersion2Num=e.result[1].dataVersion;var t=JSON.parse(e.result[0].dataContent),n=JSON.parse(e.result[1].dataContent);for(var o in t)for(var i in n)o==i&&a.dataSource.push({code:o,imgshow:"",dataVersion1:t[o],dataVersion2:n[i]})}}))},compareModal:function(e,t){this.visible=!0,this.loadData(e,t)},handleCancel:function(){this.close()},modalFormOk:function(){},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1},setdataCss:function(e){var t="trcolor",a=e.dataVersion1,r=e.dataVersion2;if(a!=r)return t},getAvatarView:function(e){return e.dataVersion1!=e.dataVersion2?"/goright.png":""}}},s=i,l=(a("d131"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"40d24e50",null);t["default"]=c.exports},fcdf:function(e,t,a){},fdec:function(e,t,a){},fea1c:function(e,t,a){"use strict";a("079fe")}}]);