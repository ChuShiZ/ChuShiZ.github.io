(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["home~f71cff67","components-menu-Contextmenu-vue~991a0cdf"],{"0f63":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isQianKun?n("div",{staticStyle:{position:"absolute",height:"100%",width:"100%"}},[e.reloadFlag?n("router-view"):e._e()],1):n("newSidemenu"===e.layoutMode?"NewGlobalLayout":"GlobalLayout",{tag:"component",on:{dynamicRouterShow:e.dynamicRouterShow}},[n("contextmenu",{staticStyle:{"z-index":"9999"},attrs:{itemList:e.menuItemList,visible:e.menuVisible},on:{"update:visible":function(t){e.menuVisible=t},select:e.onMenuSelect}}),e.multipage?n("a-tabs",{class:["tab-layout-tabs","tab-layout-tabs-"+e.layoutMode],staticStyle:{height:"52px"},attrs:{"active-key":e.activePage,"hide-add":!0,type:"editable-card"},on:{change:e.changePage,tabClick:e.tabCallBack,edit:e.editPage},nativeOn:{contextmenu:function(t){return function(t){return e.onContextmenu(t)}.apply(null,arguments)}}},[e._l(e.pageList,(function(t){return n("a-tab-pane",{key:e.isKeepAlive&&t.meta.routePath||t.fullPath,attrs:{id:e.isKeepAlive&&t.meta.routePath||t.fullPath,closable:!("首页"==t.meta.title)}},[n("div",{staticClass:"Rowheight",attrs:{slot:"tab",pagekey:e.isKeepAlive&&t.meta.routePath||t.fullPath},slot:"tab"},[e._v("\n        "+e._s(t.meta.title)+"\n        "),(e.activePage===t.fullPath||e.isKeepAlive&&t.meta.routePath===e.activePage)&&e.isShowIcon?n("img",{staticClass:"tabTitleIcon",attrs:{src:i("4bf9c"),alt:""}}):e._e()])])})),n("div",{staticClass:"tabBarRightButtonGroup",staticStyle:{"margin-right":"20px"},attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[e.showHomeEditBtns?[n("a-tooltip",{attrs:{title:e.getCustomHomeEditFlag?"保存布局":"编辑布局"}},[n("a-button",{attrs:{icon:e.getCustomHomeEditFlag?"save":"form"},on:{click:e.editHomeLayout}})],1),n("a-tooltip",{attrs:{title:"管理卡片"}},[n("a-button",{attrs:{icon:"appstore"},on:{click:e.openHomeCompManagerModal}})],1)]:e._e(),n("a-button",{attrs:{icon:"redo"},on:{click:e.routeReload}}),n("a-dropdown",{attrs:{getPopupContainer:e.getDropPopupContainer}},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.routeReload}},[n("a-icon",{attrs:{type:"reload"}}),e._v("\n            重新加载\n          ")],1),n("a-menu-item",{key:"2",on:{click:e.closeCurrent}},[n("a-icon",{attrs:{type:"close"}}),e._v("\n            关闭当前\n          ")],1),n("a-menu-divider"),n("a-menu-item",{key:"3",on:{click:function(t){return e.closeLeft(e.activePage)}}},[n("a-icon",{attrs:{type:"vertical-align-top",rotate:-90}}),e._v("\n            关闭左侧\n          ")],1),n("a-menu-item",{key:"4",on:{click:function(t){return e.closeRight(e.activePage)}}},[n("a-icon",{attrs:{type:"vertical-align-top",rotate:90}}),e._v("\n            关闭右侧\n          ")],1),n("a-menu-divider"),n("a-menu-item",{key:"5",on:{click:function(t){return e.closeOthers(e.activePage)}}},[n("a-icon",{attrs:{type:"pic-center"}}),e._v("\n            关闭其他\n          ")],1),n("a-menu-item",{key:"6",on:{click:e.closeAll}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            关闭全部\n          ")],1)],1),n("a-button",{attrs:{icon:"down"}})],1),n("a-button",{attrs:{icon:e.isFullScreen?"fullscreen-exit":"fullscreen"},on:{click:e.pageFullScreen}})],2)],2):e.multipage||"newSidemenu"!==e.layoutMode?e._e():n("div",{staticStyle:{height:"10px"}}),n("div",{staticClass:"mainDiv",style:{height:e.multipage?"calc(100% - 54px)":"",margin:(e.layoutMode,"0px"),overflowY:"auto"},attrs:{id:"routeViewGuide"}},[e.currentRouterReloadFlag?[e.reloadFlag?n("router-view"):e._e()]:e._e()],2),n("a-modal",{attrs:{title:e.editDefaultPsdTitle,loading:e.editDefaultPsdLoading,closable:!1,maskClosable:!1,keyboard:!1},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{loading:e.editDefaultPsdLoading,type:"primary"},on:{click:e.saveNewPsd}},[e._v("保存")])]},proxy:!0}]),model:{value:e.editDefaultPsdModal,callback:function(t){e.editDefaultPsdModal=t},expression:"editDefaultPsdModal"}},[n("a-form-model",{ref:"editDefaultPsdForm",attrs:{model:e.editDefaultPsdModel,rules:e.editDefaultPsdRules,wrapperCol:{span:24},labelCol:{span:0}}},[n("a-row",{staticClass:"houseInfo",attrs:{type:"flex"}},[n("a-col",{attrs:{span:6}},[e._v("用户账号")]),n("a-col",{attrs:{span:18}},[n("a-form-model-item",{staticClass:"width100"},[n("a-input",{attrs:{readOnly:""},model:{value:e.editDefaultPsdModel.username,callback:function(t){e.$set(e.editDefaultPsdModel,"username",t)},expression:"editDefaultPsdModel.username"}})],1)],1),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"required"},[e._v("登录密码")])]),n("a-col",{attrs:{span:18}},[n("a-form-model-item",{staticClass:"width100",attrs:{prop:"password"}},[n("a-input",{attrs:{name:"text",type:"password",allowClear:"",placeholder:"请输入登录密码"},model:{value:e.editDefaultPsdModel.password,callback:function(t){e.$set(e.editDefaultPsdModel,"password",t)},expression:"editDefaultPsdModel.password"}})],1)],1),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"required"},[e._v("确认密码")])]),n("a-col",{attrs:{span:18}},[n("a-form-model-item",{staticClass:"width100",attrs:{prop:"confirmpassword"}},[n("a-input",{attrs:{name:"newPassword",type:"password",allowClear:"",placeholder:"请确认密码"},on:{blur:e.handleConfirmBlur},model:{value:e.editDefaultPsdModel.confirmpassword,callback:function(t){e.$set(e.editDefaultPsdModel,"confirmpassword",t)},expression:"editDefaultPsdModel.confirmpassword"}})],1)],1)],1)],1)],1)],1)},a=[],s=i("8415"),o=i("2f868"),r=i("91ad"),l=i("ac0d"),u=i("ca00"),c=i("2b0e"),d=i("9fb0"),f=i("2f62"),h=i("4ec3"),m=i("fdcf"),p=i("9816"),g=i("c1df"),y=i.n(g),v=i("0fea");function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e){return O(e)||L(e)||k(e)||P()}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(e){if("string"==typeof e)return x(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(e,t):void 0}}function L(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function O(e){if(Array.isArray(e))return x(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function M(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){T(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function T(e,t,i){return(t=_(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _(e){var t=C(e,"string");return"symbol"==b(t)?t:t+""}function C(e,t){if("object"!=b(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var D="/dashboard/analysis",j={name:"TabLayout",components:{GlobalLayout:s["default"],Contextmenu:r["default"],NewGlobalLayout:o["default"]},mixins:[l["a"],l["b"]],data:function(){return{isQianKun:window.__POWERED_BY_QIANKUN__,pageList:[],linkList:[],activePage:"",menuVisible:!1,menuItemList:[{key:"4",icon:"reload",text:"刷 新"},{key:"1",icon:"arrow-left",text:"关闭左侧"},{key:"2",icon:"arrow-right",text:"关闭右侧"},{key:"3",icon:"close",text:"关闭其它"}],reloadFlag:!0,isFullScreen:!1,isShowIcon:!0,currentRouterReloadFlag:!0,editDefaultPsdTitle:"您当前正使用默认密码，请进行修改！",editDefaultPsdModal:!1,editDefaultPsdModel:{username:"",password:"",confirmpassword:""},editDefaultPsdRules:{password:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{8,}$/,message:"密码至少由8位的数字、大写或小写的字母及特殊字符组成!"},{validator:this.validateToNextPassword}],confirmpassword:[{required:!0,message:"请重新输入登录密码!"},{validator:this.compareToFirstPassword}]},confirmDirty:!1,editDefaultPsdLoading:!1,needChgPsd:!1}},provide:function(){var e=this;return{closeCurrent:this.closeCurrent,routeReload:this.routeReload,pageList:function(){return e.pageList}}},computed:M(M({},Object(f["c"])(["autoLockTime","isOpenAutoLock","cacheIncludedRoutes","isKeepAlive","getCustomHomeEditFlag"])),{},{multipage:function(){return this.$store.state.app.multipage},layoutMode:function(){return this.$store.state.app.layout},lockTimeOut:function(){var e=60*this.autoLockTime*1e3;return e},showHomeEditBtns:function(){var e=this.$route;return"/dashboard/customAnalysis"===e.path&&Object(m["a"])("homeEditBtnShow:all")}}),created:function(){var e=this;this.$route.path!==D&&this.addIndexToFirst();var t=Object.assign({},this.$route);t.meta=Object.assign({},t.meta),this.pageList.push(t),this.linkList.push(this.isKeepAlive&&t.meta.routePath||t.fullPath),this.activePage=this.isKeepAlive&&t.meta.routePath||t.fullPath,Object(h["l"])("need_edit_default_password").then((function(t){if("1"===t.result&&"1"===c["default"].ls.get("is_use_default_password")){e.editDefaultPsdModal=!0;var i=c["default"].ls.get(d["L"]);e.editDefaultPsdModel.username=i,e.confirmDirty=!1}})),Object(h["k"])("is_need_chg_psd").then((function(t){if(t.result&&"1"===t.result.itemText){var i=c["default"].ls.get(d["J"]),n=i.lastPasswordTime?i.lastPasswordTime:user.createTime,a=15;t.result.description&&(a=t.result.description);var s=y()(),o=y()(n).diff(s,"days");if(Math.abs(o)>parseInt(a)){e.needChgPsd=!0,e.editDefaultPsdTitle="您超过"+a+"天未修改密码，请进行修改！",e.editDefaultPsdModal=!0;var r=c["default"].ls.get(d["L"]);e.editDefaultPsdModel.username=r,e.confirmDirty=!1}}}))},watch:{isOpenAutoLock:{handler:function(e){e?this.autoLock():window.lockInterval&&(clearInterval(window.lockInterval),window.lockInterval=null)},immediate:!0},$route:function(e){if(this.activePage=this.isKeepAlive&&e.meta.routePath||e.fullPath,this.multipage){if(D===this.activePage)!1===e.meta.keepAlive&&this.routeReload();else if(this.linkList.indexOf(this.activePage)<0)this.linkList.push(this.activePage),this.pageList.push(Object.assign({},e));else if(this.linkList.indexOf(this.activePage)>=0){var t=this.linkList.indexOf(this.activePage),i=this.pageList[t];this.pageList.splice(t,1,Object.assign({},e,{meta:i.meta})),!e.meta.KeepAlive&&Object.keys(e.query).length>0&&!this.isKeepAlive&&this.routeReload()}}else this.linkList=[this.activePage],this.pageList=[Object.assign({},e)]},activePage:function(e){var t=this,i=this.linkList.lastIndexOf(e),n=this.pageList[i];this.isKeepAlive&&n.meta.routePath?n.meta.routePath!==this.$route.meta.routePath&&setTimeout((function(){t.$router.push(Object.assign({},n))}),100):n.fullPath!==this.$route.fullPath&&setTimeout((function(){t.$router.push(Object.assign({},n))}),100),this.changeTitle(n.meta.title)},multipage:function(e){this.reloadFlag&&(e||(this.linkList=[this.$route.fullPath],this.pageList=[this.$route]))},device:function(){this.multipage&&-1===this.linkList.indexOf(D)&&this.addIndexToFirst()},layoutMode:function(){this.routeReload()}},methods:{saveNewPsd:function(){var e=this;this.$refs.editDefaultPsdForm.validate((function(t){if(t){var i={username:e.editDefaultPsdModel.username,password:e.encode(e.editDefaultPsdModel.password),confirmpassword:e.encode(e.editDefaultPsdModel.confirmpassword)};e.editDefaultPsdLoading=!0,Object(h["m"])(i).then((function(t){t.success?(c["default"].ls.set("is_use_default_password",0),e.$message.success(t.message),e.editDefaultPsdModal=!1,Object(v["e"])("/sys/user/getUserInfo").then((function(e){c["default"].ls.set(d["J"],e.result.userInfo,6048e5)}))):e.$message.warning(t.message)})).finally((function(){e.editDefaultPsdLoading=!1}))}}))},addIndexToFirst:function(){this.pageList.splice(0,0,{name:"dashboard-analysis",path:D,fullPath:D,meta:{icon:"dashboard",title:"首页"}}),this.linkList.splice(0,0,D)},changeTitle:function(e){var t=window._H5_INFO.logoText;this.$route.path===D?document.title=t:document.title=e+" · "+t},changePage:function(e){var t=this;this.isShowIcon=!1,this.activePage=e,setTimeout((function(){t.isShowIcon=!0}),600)},tabCallBack:function(){this.$nextTick((function(){setTimeout((function(){Object(u["v"])()}),20)}))},editPage:function(e,t){this[t](e)},remove:function(e){var t=this;if(e!==D)if(1!==this.pageList.length){var i=this.pageList.filter((function(i){return i.fullPath===e||t.isKeepAlive&&i.meta.routePath===e}));this.pageList=this.pageList.filter((function(i){return t.isKeepAlive&&i.meta.routePath?i.meta.routePath!==e:i.fullPath!==e}));var n=this.linkList.indexOf(e);this.linkList=this.linkList.filter((function(t){return t!==e})),n=n>=this.linkList.length?this.linkList.length-1:n,this.activePage=this.linkList[n];var a=this.cacheIncludedRoutes;if(i&&i[0]){var s=i[0].meta.componentName;a.includes(s)&&(a.splice(a.findIndex((function(e){return e===s})),1),this.$store.commit("SET_CACHE_INCLUDED_ROUTES",a)),this.emitPageClosed(i[0])}}else this.$message.warning("这是最后一页，不能再关闭了啦");else this.$message.warning("首页不能关闭!")},emitPageClosed:function(e){this.$root.$emit("page-closed",{closedRoute:e,pageList:this.pageList,linkList:this.linkList,activePage:this.activePage})},onContextmenu:function(e){var t=this.getPageKey(e.target);null!==t&&(e.preventDefault(),this.menuVisible=!0)},getPageKey:function(e,t){if(t=t||0,t>2)return null;var i=e.getAttribute("pagekey");return i=i||(e.previousElementSibling?e.previousElementSibling.getAttribute("pagekey"):null),i||(e.firstElementChild?this.getPageKey(e.firstElementChild,++t):null)},onMenuSelect:function(e,t){var i=this.getPageKey(t);switch(e){case"1":this.closeLeft(i);break;case"2":this.closeRight(i);break;case"3":this.closeOthers(i);break;case"4":this.routeReload();break;default:break}},closeCurrent:function(){this.remove(this.activePage)},closeOthers:function(e){var t=this.linkList.indexOf(e);if(e===D||e.indexOf("?ticke=")>=0)this.linkList=this.linkList.slice(t,t+1),this.pageList=this.pageList.slice(t,t+1),this.activePage=this.linkList[0];else{var i=this.pageList.slice(0,1)[0];this.linkList=this.linkList.slice(t,t+1),this.pageList=this.pageList.slice(t,t+1),this.linkList.unshift(this.isKeepAlive&&i.meta.routePath||i.fullPath),this.pageList.unshift(i),this.activePage=this.linkList[1]}},closeLeft:function(e){if(e!==D){var t=w(this.pageList),i=t.slice(0,1)[0],n=this.linkList.indexOf(e);this.linkList=this.linkList.slice(n),this.pageList=this.pageList.slice(n),this.linkList.unshift(this.isKeepAlive&&i.meta.routePath||i.fullPath),this.pageList.unshift(i),this.linkList.indexOf(this.activePage)<0&&(this.activePage=this.linkList[0])}},closeRight:function(e){var t=this.linkList.indexOf(e);this.linkList=this.linkList.slice(0,t+1),this.pageList=this.pageList.slice(0,t+1),this.linkList.indexOf(this.activePage<0)&&(this.activePage=this.linkList[this.linkList.length-1])},dynamicRouterShow:function(e,t){var i=this.linkList.indexOf(e);if(i>=0){var n=this.pageList[i],a=Object.assign({},n.meta,{title:t});this.pageList.splice(i,1,Object.assign({},n,{meta:a})),e===this.activePage&&this.changeTitle(t)}},routeReload:function(e){var t=this,i="ToggleMultipage";e?this.currentRouterReloadFlag=!1:(this.reloadFlag=!1,this.$store.dispatch(i,!1)),this.$nextTick((function(){e?t.currentRouterReloadFlag=!0:(t.$store.dispatch(i,!0),t.reloadFlag=!0)}))},closeAll:function(){this.activePage=this.linkList[0],this.linkList.splice(1),this.pageList.splice(1),this.$store.commit("SET_CACHE_INCLUDED_ROUTES",[])},pageFullScreen:function(){var e=document.querySelector("main#layoutRightContent.ant-layout-content");document.onfullscreenchange=function(){this.isFullScreen?e.classList.remove("mainFullScreen"):e.classList.add("mainFullScreen"),this.isFullScreen=!this.isFullScreen},document.fullscreenElement?document.exitFullscreen():e.requestFullscreen()},excuteCallback:function(e){e()},getDropPopupContainer:function(){return document.getElementById("layoutRightContent")},autoLock:function(){var e=this,t=(new Date).getTime(),i=(new Date).getTime();function n(){if(i=(new Date).getTime(),t=c["default"].ls.get("lastTime"),i-t>e.lockTimeOut){if("/lock"===e.$route.path.name||"/user/login"===e.$route.path.name)return;e.$store.commit("SET_IS_AUTO_LOCK",!0),e.$store.commit("SET_LOCK"),c["default"].ls.set("beforeLockPage",e.$route.path),setTimeout((function(){e.$router.push({path:"/lock"})}),100)}}window.lockInterval=window.setInterval(n,3e4)},validateToNextPassword:function(e,t,i){var n=this,a={username:this.editDefaultPsdModel.username};a.password=this.encode(t),Object(v["l"])("sys/user/checkPassword",a).then((function(e){e.success?"a123456."===t?i("请勿使用默认密码！"):t&&n.confirmDirty?(i(),n.$refs.editDefaultPsdForm.validateField("confirmpassword",(function(){}))):i():i(e.message)}))},compareToFirstPassword:function(e,t,i){t&&t!==this.editDefaultPsdModel.password?i("两次输入的密码不一样！"):i()},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},editHomeLayout:function(){var e=!this.getCustomHomeEditFlag;this.$store.commit("SET_CUSTOM_HOME_EDIT_FLAG",e),this.$bus.$emit("setCustomHomeEditFlag",e)},openHomeCompManagerModal:function(){this.$bus.$emit("openHomeCompManagerModal")},encode:function(e){var t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))),i="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrJAV6yAdgRO5NBjX/h6m83w1QgjnWqREkdV8HTYEraeZANNeL6HXCjdLoxTbjuUyCJLdLildy9Jf3k9ZKT/ZJ6ScczihEY4JSc738NWwVm8W2Rte2vWOb1IDRNWTPMUZGGbs++YWgdvLuyqMU/0cRUMIy+UxX+3oww+cnbDiiyQIDAQAB",n=new p["a"];return n.setPublicKey(i),n.encrypt(t)}},beforeDestroy:function(){window.lockInterval&&clearInterval(window.lockInterval),window.lockInterval=null}},A=j,I=(i("47b1"),i("9d0e"),i("cffb"),i("2877")),$=Object(I["a"])(A,n,a,!1,null,"1fdc0586",null);t["default"]=$.exports},"1f27":function(e,t,i){"use strict";i("fa58")},2980:function(e,t,i){e.exports=i.p+"img/newBanner.62482598.png"},"2f868":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=this,i=t.$createElement,n=t._self._c||i;return n("a-layout",{staticClass:"layout",class:[t.device]},[n("a-layout-header",{class:["layoutHeader","layoutHeader-"+t.layoutMode],staticStyle:{height:"59px","background-color":"#fff!important"}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("logo",{class:["logo-"+t.layoutMode],attrs:{title:t.logoText?t.logoText:"维修资金综合管理平台V9"}}),n("global-header",{attrs:{mode:t.layoutMode,menus:t.menus,theme:t.navTheme,collapsed:t.collapsed,device:t.device},on:{toggle:t.toggle,updateMenuTitle:t.handleUpdateMenuTitle}})],1)]),n("a-layout",{class:["a-layout-content-"+t.layoutMode],staticStyle:{"background-size":"100% 100%","background-position":"center center",height:"calc(100vh - 59px - 48px)"},style:{backgroundImage:"url("+t.imgUrl+")"}},[["mobile"===t.device?n("a-drawer",{attrs:{wrapClassName:"drawer-sider "+t.navTheme,placement:"left",closable:!1,visible:t.collapsed,width:"careMode"!==t.layoutMode?"200px":"240px"},on:{close:function(){return e.collapsed=!1}}},["mobile"===t.device?n("side-menu",{class:[t.layoutMode],attrs:{layout:t.layoutMode,mode:"inline",menus:t.menus,theme:t.navTheme,collapsed:!1,collapsible:!0},on:{menuSelect:t.myMenuSelect,updateMenuTitle:t.handleUpdateMenuTitle}}):t._e()],1):t._e(),n("side-menu",{directives:[{name:"show",rawName:"v-show",value:"desktop"===t.device,expression:"device === 'desktop'"}],class:[t.layoutMode],attrs:{layout:t.layoutMode,mode:"inline",menus:t.menus,theme:t.navTheme,collapsed:t.collapsed,collapsible:!0},on:{menuSelect:t.myMenuSelect,updateMenuTitle:t.handleUpdateMenuTitle,toggle:t.toggle}})],n("a-layout",{class:[t.layoutMode,"content-width-"+t.contentWidth],staticStyle:{height:"calc(100% - 10px)"}},["newSidemenu"!==t.layoutMode?n("global-header",{attrs:{mode:t.layoutMode,menus:t.menus,theme:t.navTheme,collapsed:t.collapsed,device:t.device},on:{updateMenuTitle:t.handleUpdateMenuTitle}}):t._e(),n("a-layout-content",{style:{height:"100%",paddingTop:t.fixedHeader?"59px":"0"},attrs:{id:"layoutRightContent"}},[t._t("default")],2)],1)],2)],1)},a=[],s=i("e5f9"),o=i("630d"),r=i("911cc"),l=i("a250"),u=i("ca00"),c=i("2f62"),d=i("ac0d"),f=i("0fea");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=p(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw s}}}}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){b(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e,t,i){return(t=w(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function w(e){var t=P(e,"string");return"symbol"==h(t)?t:t+""}function P(e,t){if("object"!=h(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var k={name:"NewGlobalLayout",components:{SideMenu:s["default"],GlobalHeader:o["default"],GlobalFooter:r["default"],Logo:l["default"]},mixins:[d["a"],d["b"]],data:function(){return{collapsed:!1,activeMenu:{},menus:[],logoText:"",imgUrl:i("2980"),layoutStyle:{backgroundSize:"100% 100%",backgroundPosition:"center center"}}},computed:v({},Object(c["d"])({mainRouters:function(e){return e.permission.addRouters},permissionMenuList:function(e){return e.user.permissionList}})),watch:{sidebarOpened:function(e){this.collapsed=!e}},created:function(){this.menus=this.permissionMenuList,this.collapsed=!this.sidebarOpened,window._H5_INFO.systemVersion?this.logoText=window._H5_INFO.logoText+window._H5_INFO.systemVersion:this.logoText=window._H5_INFO.logoText},methods:v(v({},Object(c["b"])(["setSidebar"])),{},{getPictureInfo:function(){var e=this;Object(f["e"])("/base/pictureConfigInfo/pictureInit").then((function(t){t.success&&t.result&&t.result.logoText&&(t.result.systemVersion?e.logoText=t.result.logoText+t.result.systemVersion:e.logoText=t.result.logoText+"V9.0")}))},toggle:function(){this.collapsed=!this.collapsed,this.setSidebar(!this.collapsed),Object(u["v"])()},menuSelect:function(){this.isDesktop()||(this.collapsed=!1)},myMenuSelect:function(e){this.findMenuBykey(this.menus,e.key),this.$emit("dynamicRouterShow",e.key,this.activeMenu.meta.title)},findMenuBykey:function(e,t){var i,n=m(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;a.path===t?this.activeMenu=v({},a):a.children&&a.children.length>0&&this.findMenuBykey(a.children,t)}}catch(s){n.e(s)}finally{n.f()}},handleUpdateMenuTitle:function(e){this.findMenuBykey(this.menus,e.path),this.activeMenu.meta.title=e.meta.title,this.$emit("dynamicRouterShow",e.path,this.activeMenu.meta.title)}})},L=k,O=(i("9d35"),i("2877")),x=Object(O["a"])(L,n,a,!1,null,"49edffce",null);t["default"]=x.exports},"47b1":function(e,t,i){"use strict";i("8a5b")},"6db4":function(e,t,i){},"8a5b":function(e,t,i){},"91ad":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:e.style,attrs:{selectedKeys:e.selectedKeys},on:{click:e.handleClick}},e._l(e.itemList,(function(t){return i("a-menu-item",{key:t.key},[t.icon?i("a-icon",{attrs:{role:"menuitemicon",type:t.icon}}):e._e(),e._v(e._s(t.text)+"\n  ")],1)})),1)},a=[],s={name:"Contextmenu",props:{visible:{type:Boolean,required:!1,default:!1},itemList:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{left:0,top:0,target:null,selectedKeys:[]}},computed:{style:function(){return{left:this.left+"px",top:this.top+"px"}}},created:function(){var e=this;window.addEventListener("mousedown",(function(t){return e.closeMenu(t)})),window.addEventListener("contextmenu",(function(t){return e.setPosition(t)}))},methods:{closeMenu:function(e){!0===this.visible&&["menuitemicon","menuitem"].indexOf(e.target.getAttribute("role"))<0&&this.$emit("update:visible",!1)},setPosition:function(e){this.left=e.clientX,this.top=e.clientY,this.target=e.target},handleClick:function(e){var t=e.key;this.$emit("select",t,this.target),this.$emit("update:visible",!1)}}},o=s,r=(i("1f27"),i("2877")),l=Object(r["a"])(o,n,a,!1,null,"69453902",null);t["default"]=l.exports},"9d0e":function(e,t,i){"use strict";i("fb65")},"9d35":function(e,t,i){"use strict";i("d376")},cffb:function(e,t,i){"use strict";i("6db4")},d376:function(e,t,i){},fa58:function(e,t,i){},fb65:function(e,t,i){}}]);