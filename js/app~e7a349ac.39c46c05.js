(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~e7a349ac"],{"0b6e":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"floorTableView"},[n("div",{staticClass:"tableHeader"},[n("span",{staticClass:"tableHeaderText",on:{click:function(t){e.tableShow=!e.tableShow}}},[e._v(e._s(e.typeName)),e.houseNums?[e._v("（"+e._s(e.houseNums)+"户）")]:e._e()],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.tableShow,expression:"tableShow"}],staticStyle:{"max-width":"100%"}},["type01"===e.type?n("table",{ref:"viewTable",class:["viewTableClass",e.type]},[e._l(e.maxFloor,(function(t,o){return[n("tr",{key:o+"floorZz"},e._l(t.unitArr,(function(r,i){return n("td",{key:i+1+"unit",class:["row_"+o+"_col",(i+1)%2!==0&&0===i?"floorNumTd":""]},[(i+1)%2!==0?[t.isTitle||0!==i?e._e():[n("div",{staticClass:"floorNum"},[e.isShowCheckbox?n("input",{class:["floorCheck_"+e.getFloorNum(o)],attrs:{type:"checkbox"},domProps:{value:"floorCheck_"+e.getFloorNum(o)},on:{change:function(t){return e.batchCheckedHousesByFloor(t,e.$refs.viewTable,e.getFloorNum(o))}}}):e._e(),n("span",[e._v(e._s(e.getFloorNum(o))+" 层")])])],t.isTitle&&0===i?[n("div",{staticClass:"floorNum"})]:e._e()]:e._e(),(i+1)%2===0?[t.isTitle?[n("div",{staticClass:"unitInfo",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.openBatchChooseByColModal(r)}}},[t.title?e._e():[e.isShowCheckbox?n("input",{class:["unitCheckClass_"+r.unitId+"_"+e.type,"unitCheckBox"],attrs:{type:"checkBox"},domProps:{value:"unitCheck_"+r.unitId}}):e._e(),e._v("\n                    "+e._s(r.name)+"\n                  ")],t.title?[n("label",[e._v(e._s(t.title))])]:e._e()],2)]:[n("div",{staticClass:"tdContent",class:["floorContent_"+(e.maxFloor.length-o),"unitContent_"+r.unitId],style:{width:t.unitArr.length<3?"100%":e.getTdContentWidth(r.houseArr.length),"--notDepositColor":e.notDepositColor}},[e._l(r.houseArr,(function(t,o){return[n("div",{key:t.id,ref:"tdContent_Num"+t.id,refInFor:!0,staticClass:"tdContent_num",class:e.getHouseBoxClassList(t),style:{backgroundColor:e.getHouseCardColor(t)},attrs:{draggable:e.isDrag,id:"houseBox_"+t.id,houseBaseInfo:e.getHouseBaseInfo(t)},on:{mouseenter:function(n){return e.houseInfoOver(t,n)},mouseleave:function(n){return e.houseInfoOut(t)},click:function(n){return e.showModal(t)}}},[e.isShowCheckbox&&e.isOptionalHoust(t)?[n("input",{ref:"houseInfoCheckBoxRef"+t.id,refInFor:!0,class:["unit_"+t.unitId+"_type_"+e.data.type+"_houseCheckbox","houseFloor_"+t.floor],attrs:{type:"checkbox",unitNum:t.unitId,floorNum:t.floor,houseNo:o+1},domProps:{value:t.id},on:{click:function(t){return e.checkBoxClick(t)},change:function(n){return e.houseChange({houseItem:t,checked:n.target.checked})}}}),n("div",{ref:"houseChooseBox"+t.id,refInFor:!0,staticClass:"houseChooseBox",on:{click:function(n){return n.stopPropagation(),function(){return e.houseChange({houseItem:t,checked:!e.$refs["houseInfoCheckBoxRef"+t.id][0].checked})}.apply(null,arguments)}}},[n("svg-icon",{staticClass:"houseChooseBox_check circle",attrs:{size:"16",color:"#fff",type:"circle"}}),n("svg-icon",{staticClass:"houseChooseBox_check circle-check",attrs:{size:"16",color:"#fff",type:"check-circle"}})],1)]:e._e(),n("span",{class:{notCheckBoxSpan:e.isShowCheckbox}},[e._v(e._s(t.roomName))]),e.ownerShow&&t.householderName?n("div",{staticClass:"otherInfo tdFloorUnitContent_owner"},[e._v("\n                        "+e._s(t.householderName)+"\n                      ")]):e._e(),e.areaShow&&t.houseArea?n("div",{staticClass:"otherInfo tdFloorUnitContent_area"},[e._v("\n                        "+e._s(t.houseArea.toFixed(3))+"m²\n                      ")]):e._e(),e.moneyShow?n("div",{staticClass:"otherInfo tdFloorUnitContent_money"},[e._v("\n                        "+e._s(t.balance?t.balance.toFixed(2):"0.00")+"元\n                      ")]):e._e()],2)]}))],2)]]:e._e()],2)})),0)]}))],2):[e._l(e.maxUnitNum,(function(t){return[n("table",{key:"tableUnit"+t.unitId,ref:"viewTable"+t.unitId,refInFor:!0,staticClass:"otherFloorTable",class:["viewTableClass",e.type]},[e._l(t.maxFloor,(function(o,r){return[n("tr",{key:r+"floorZz"},e._l(o.unitArr,(function(i,a){return n("td",{key:a+1+"unit",class:["row_"+r+"_col",0===a?"floorNumTd":""],style:0===a?"width:60px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap":""},[0===a?[o.isTitle?e._e():[n("div",{staticClass:"floorNum"},[e.isShowCheckbox?n("input",{class:["floorCheck_"+e.getFloorNum(r,t)],attrs:{type:"checkbox",unitId:t.unitId},domProps:{value:"floorCheck_"+e.getFloorNum(r,t)},on:{change:function(n){return e.batchCheckedHousesByFloor(n,e.$refs["viewTable"+t.unitId][0],e.getFloorNum(r,t))}}}):e._e(),n("span",[e._v(e._s(e.getFloorNum(r,t))+" 层")])])],o.isTitle?[n("div",{staticClass:"floorNum"})]:e._e()]:e._e(),0!==a?[o.isTitle?[n("div",{staticClass:"unitInfo",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.openBatchChooseByColModal(t)}}},[e.isShowCheckbox?n("input",{class:["unitCheckClass_"+t.unitId+"_"+e.type,"unitCheckBox"],attrs:{type:"checkBox"},domProps:{value:"unitCheck_"+t.unitId}}):e._e(),e._v("\n                      "+e._s(t.name)+"\n                    ")])]:[n("div",{staticClass:"tdContent",class:["floorContent_"+(e.maxFloor.length-r),"unitContent_"+t.unitId],style:{width:"100%","--notDepositColor":e.notDepositColor}},[e._l(i.houseArr,(function(t,o){return[n("div",{key:t.id,ref:"tdContent_Num"+t.id,refInFor:!0,staticClass:"tdContent_num",class:e.getHouseBoxClassList(t),style:{backgroundColor:e.getHouseCardColor(t)},attrs:{draggable:e.isDrag,id:"houseBox_"+t.id,houseBaseInfo:e.getHouseBaseInfo(t)},on:{mouseenter:function(n){return e.houseInfoOver(t,n)},mouseleave:function(n){return e.houseInfoOut(t)},click:function(n){return e.showModal(t)}}},[e.isShowCheckbox&&e.isOptionalHoust(t)?[n("input",{ref:"houseInfoCheckBoxRef"+t.id,refInFor:!0,class:["unit_"+t.unitId+"_type_"+e.data.type+"_houseCheckbox","houseFloor_"+t.floor],attrs:{type:"checkbox",unitNum:t.unitId,houseNo:o+1,floorNum:t.floor},domProps:{value:t.id},on:{click:function(t){return e.checkBoxClick(t)},change:function(n){return e.houseChange({houseItem:t,checked:n.target.checked})}}}),n("div",{ref:"houseChooseBox"+t.id,refInFor:!0,staticClass:"houseChooseBox",on:{click:function(n){return n.stopPropagation(),function(){return e.houseChange({houseItem:t,checked:!e.$refs["houseInfoCheckBoxRef"+t.id][0].checked})}.apply(null,arguments)}}},[n("svg-icon",{staticClass:"houseChooseBox_check circle",attrs:{size:"16",color:"#fff",type:"circle"}}),n("svg-icon",{staticClass:"houseChooseBox_check circle-check",attrs:{size:"16",color:"#fff",type:"check-circle"}})],1)]:e._e(),n("span",{class:{notCheckBoxSpan:e.isShowCheckbox}},[e._v(e._s(t.roomName))]),e.ownerShow&&t.householderName?n("div",{staticClass:"otherInfo tdFloorUnitContent_owner"},[e._v("\n                            "+e._s(t.householderName)+"\n                          ")]):e._e(),e.areaShow&&t.houseArea?n("div",{staticClass:"otherInfo tdFloorUnitContent_area"},[e._v("\n                            "+e._s(t.houseArea.toFixed(3))+"m²\n                          ")]):e._e(),e.moneyShow?n("div",{staticClass:"otherInfo tdFloorUnitContent_money"},[e._v("\n                            "+e._s(t.balance?t.balance.toFixed(2):"0.00")+"元\n                          ")]):e._e()],2)]}))],2)]]:e._e()],2)})),0)]}))],2)]}))]],2),n("HouseOwnerInfoModal",{ref:"infoModal",attrs:{isDeposit:!!e.depositType,bldState:e.bldState,queryParam:e.queryParam},on:{modalOk:e.refreshView}}),n("continue-deposit-modal",{ref:"continueModal",attrs:{queryParam:e.queryParam}}),n("hou-owner-info-modal",{ref:"houOwInfoModal"})],1)},r=[],i=n("f280"),a=n("1618"),s=n("ca00"),u=n("2b2c"),c=n("4ec3"),l=n("f337"),d=n("d8a5"),f=n("0fea");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=g(e,"string");return"symbol"==h(t)?t:t+""}function g(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function w(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",p="suspendedYield",m="executing",y="completed",v={};function g(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I($([])));C&&C!==n&&o.call(C,a)&&(x=C);var _=w.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==h(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=f;return function(i,a){if(r===m)throw Error("Generator is already running");if(r===y){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===v)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=m;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?y:p,c.arg===v)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=y,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(h(t)+" is not iterable")}return b.prototype=w,r(_,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function I(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){I(i,o,r,a,s,"next",e)}function s(e){I(i,o,r,a,s,"throw",e)}a(void 0)}))}}var _={name:"FloorTable",components:{SvgIcon:l["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(n.bind(null,"c752"))},ContinueDepositModal:i["default"],HouOwnerInfoModal:a["default"]},mixins:[u["a"]],props:{selHand:{type:Boolean,default:!1},unitNums:{type:Number,default:1},queryParam:{type:Object,default:function(){return{}}},houseChecks:{type:Array,default:function(){return[]}},ownerShow:{type:Boolean,default:!1},areaShow:{type:Boolean,default:!1},moneyShow:{type:Boolean,default:!1},depositType:String,isShowCheckbox:{type:Boolean,default:!1},isDetail:{type:Boolean,default:!1},bldState:{type:[Number,String],default:"0"},optionalAccState:{type:[Array,Function],default:null},chooseFlag:{type:String,default:""},isDeposit:{type:Boolean,default:!1},isDrag:{type:Boolean,default:!1},domBaseInfo:{type:Boolean,default:!1},selectedHouse:{type:Array,default:function(){return[]}}},inject:{floorViews:{default:function(){return function(){return{}}}},getDragendHouseId:{default:function(){return function(){return[]}}},continueDepositBusiType:{default:"01"}},computed:{newFloorView:function(){try{return this.floorViews()}catch(e){return null}},dragendHouseId:function(){return this.getDragendHouseId()}},data:function(){return{isReserveString:!1,floorTableChecks:this.houseChecks,selectedHouseInfos:this.selectedHouse,floorNums:0,maxFloor:[],maxUnitNum:[],startFloor:0,type:"",typeName:"",houseNums:0,floorHouse:[],data:{},tableShow:!0,unitAll:[],floorAll:[],houseUseList:[],notDepositColor:"#edf5fd",floorCardColor:new Map([["未交","#edf5fd"],["已交","#a0c2fd"],["已交不足额","#4687f8"],["余额不足30%","#fdb3b8"],["免交","#d7cfcf"]])}},created:function(){var e=this;Object(d["e"])("is_reserve").then((function(t){e.isReserveString="1"==t}))},mounted:function(){$("body").append('<div id="floorBaseInfoModal"></div>')},beforeDestroy:function(){$("div").remove("#floorBaseInfoModal")},methods:{getHouseBoxClassList:function(e){return["floor_".concat(e.floor),"unit_".concat(e.unitId),this.dragendHouseId.includes(e.id)?"dragComplete":""]},getHouseCardColor:function(e){return this.checkHouseUseSpecial(e.houseUse)?this.floorCardColor.get("不交"):e.notThree?this.floorCardColor.get("余额不足30%"):e.deposit&&"0"===e.depFlag?this.floorCardColor.get("已交不足额"):e.deposit?this.floorCardColor.get("已交"):this.floorCardColor.get("未交")},initData:function(){var e=C(k().mark((function e(t){var n,o,r=this;return k().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["l"])("floor_notdeposit_color").catch((function(){}));case 2:return n=e.sent,this.notDepositColor=n.result||"#edf5fd",this.floorCardColor.set("未交",this.notDepositColor),e.next=7,Object(c["i"])("floor_card_color").catch((function(){}));case 7:o=e.sent,o.success&&o.result.forEach((function(e){r.floorCardColor.set(e.text,e.value)})),this.data=t,this.floorHouse=t.houseArr,this.type="type"+t.type,this.typeName=t.typeName,this.startFloor=t.startFloor,this.houseNums=t.houseArr.length,this.floorNums=0,this.setTableTrTd(t);case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setTableTrTd:function(e){if("01"===e.type){var t,n=[],o=b(e.houseArr);try{var r=function(){var e=t.value;n.find((function(t){return t.unitId===e.unitId}))||n.push({num:n.length},{num:n.length,unitId:e.unitId,houseArr:[]})};for(o.s();!(t=o.n()).done;)r()}catch(a){o.e(a)}finally{o.f()}for(var i=0;i<=e.floorNums;i++)0===i?this.maxFloor.push({type:"01",isTitle:!0,unitArr:[]}):this.maxFloor.push({type:"01",houseArr:[],unitArr:[]});this.getData(e)}else this.getOtherTypeData(e)},getData:function(e){var t=this;if(e.startFloor=Number(e.startFloor),e.floorNums<0)return this.$message.warning(e.typeName+"楼层数小于0，楼盘数据异常");this.unitAll=[],this.$nextTick((function(){var n,o=b(e.houseArr);try{var r=function(){var o=n.value;try{if([null,void 0].includes(o.floor))return t.$message.warning("房间".concat(o.name,"楼层为空")),0;if((0!==e.startFloor||1!==e.floorNums)&&0===o.floor)return t.$message.warning({content:"楼层数为0，数据异常",key:"floor=0"}),0;var r=0;o.floor>=0?(r=e.floorNums-(Number(o.floor)-e.startFloor),e.startFloor<0&&(r+=1)):r=e.floorNums-(Number(o.floor)-e.startFloor),t.$refs.viewTable.rows[r].style.display="table-row",t.getNewUnitByHouse(o);var i=t.maxFloor[r]["unitArr"];t.setUnitObj(i);var a=i.findIndex((function(e){return e.unitId===o.unitId}));-1!==a&&i[a].houseArr.push(o)}catch(s){return 0}};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}}))},getNewUnitByHouse:function(e){this.unitAll.find((function(t){return t.unitId===e.unitId}))||(this.maxFloor[0]["unitArr"].push({num:this.unitAll.length},{type:"01",isTitle:!0,name:e.cellName,unitId:e.unitId}),this.unitAll.push({unitId:e.unitId,cellName:e.cellName}))},setUnitObj:function(e){this.unitAll.forEach((function(t){e.find((function(e){return e.unitId===t.unitId}))||e.push({num:e.length},{num:e.length,unitId:t.unitId,houseArr:[]})}))},getOtherTypeData:function(e){var t=this;if(e.startFloor=Number(e.startFloor),e.floorNums<0)return this.$message.warning(e.typeName+"楼盘数据异常");this.setFloorAllByFloorData(e),this.maxUnitNum=[];var n,o=b(e.houseArr);try{for(o.s();!(n=o.n()).done;){var r=n.value;[null,void 0].includes(r.floor)?this.$message.warning("房间".concat(r.name,"楼层为空")):(r.floor=Number(r.floor),0===e.startFloor&&1===e.floorNums||0!==r.floor?this.getUnitData(r):this.$message.warning({content:"楼层数为0，数据异常",key:"floor=0"}))}}catch(i){o.e(i)}finally{o.f()}this.$nextTick((function(){var n,o=b(e.houseArr);try{for(o.s();!(n=o.n()).done;){var r=n.value,a=t.getUnitData(r);t.setFloorData(a,r)}}catch(i){o.e(i)}finally{o.f()}}))},setFloorData:function(e,t){var n=0;t.floor>=0?(n=this.data.floorNums-(t.floor-this.data.startFloor),this.data.startFloor<0&&(n+=1)):n=this.data.floorNums-(t.floor-this.data.startFloor);var o=null;o=this.$refs["viewTable"+t.unitId][0],o.rows[n].style.display="table-row";var r=e.maxFloor[n]["unitArr"];r.find((function(e){return e.unitId===t.unitId}))||(e.maxFloor[0].unitArr.find((function(e){return e.unitId===t.unitId}))||e.maxFloor[0].unitArr.push({isTitle:!0},{unitId:t.unitId,houseArr:[]}),r.push({unitId:t.unitId,isTitle:!0,cellName:t.cellName},{unitId:t.unitId,houseArr:[]})),r[1]["houseArr"].push(t)},getUnitData:function(e){var t,n=this.maxUnitNum.findIndex((function(t){return t.unitId===e.unitId}));return-1===n?(this.maxUnitNum.push({maxFloor:Object(s["c"])(this.floorAll),unitId:e.unitId,name:e.cellName}),t=this.maxUnitNum[this.maxUnitNum.length-1]):t=this.maxUnitNum[n],t},setFloorAllByFloorData:function(e){this.floorAll=[];for(var t=0;t<=e.floorNums;t++)0===t?this.floorAll.push({isTitle:!0,unitArr:[]}):this.floorAll.push({houseArr:[],unitArr:[]})},checkBoxClick:function(e){e=e||window.event,e.stopPropagation()},houseChange:function(e){var t=e.houseItem,n=e.checked,o=e.floorAll;if(n)this.floorTableChecks.push(t.id),this.selectedHouseInfos.push(t);else{var r=this.floorTableChecks.indexOf(t.id);-1!==r&&(this.floorTableChecks.splice(r,1),this.selectedHouseInfos.splice(r,1))}try{var i=this.$refs["houseInfoCheckBoxRef"+t.id][0];i&&(i.checked=n),o||this.updateFloorCheckState(t.floor,t.unitId),this.setUnitCheckBoxState(t.unitId,t.floor),this.$emit("update:houseCheckIds",this.floorTableChecks),this.$emit("update:selectedHouse",this.selectedHouseInfos)}catch(a){}},updateFloorCheckState:function(e,t){var n=null,o=null;"type01"===this.type?(n=this.$refs["viewTable"],o=n.querySelector(".floorCheck_".concat(e))):(n=this.$refs["viewTable"+t][0],o=n.querySelector('input[unitId="'.concat(t,'"].floorCheck_').concat(e)));var r=n.querySelectorAll(".houseFloor_".concat(e)),i=n.querySelectorAll(".houseFloor_".concat(e,":checked"));o&&(r.length===i.length?(o.checked=!0,o.indeterminate=!1):i.length>0?(o.checked=!1,o.indeterminate=!0):(o.checked=!1,o.indeterminate=!1))},setUnitCheckBoxState:function(e,t){var n;n="type01"===this.type?this.$refs["viewTable"]:this.$refs["viewTable"+e][0];var o=n.querySelectorAll(".tdContent.unitContent_".concat(e," input[type=checkbox]")),r=n.querySelectorAll(".tdContent.unitContent_".concat(e," input[type=checkbox]:checked")),i=n.querySelector("input[type=checkbox].unitCheckClass_".concat(e,"_").concat(this.type));r.length===o.length?(i.checked=!0,i.indeterminate=!1):r.length>0?(i.checked=!1,i.indeterminate=!0):(i.checked=!1,i.indeterminate=!1)},houseInfoOver:function(e,t){this.isShowCheckbox&&this.isOptionalHoust(e)&&this.$refs["houseChooseBox"+e.id][0].classList.add("open");var n=$("body"),o=t.pageX+10,r=t.pageY+40;o>n.width()/2&&(o-=300);var i=this.houseUseList.find((function(t){return t.value===e.houseUse})),a='\n        <div class="houseInfoOverModal">\n          <h3>'.concat(e.houseName,'</h3>\n          <ul style="list-style: none;padding-left: 10px">\n             <li>户主姓名：').concat(e.householderName?e.householderName:"无","</li>\n             <li>房屋面积：").concat(e.houseArea?Number(e.houseArea).toFixed(3):"0.000","m<sup>2</sup></li>\n             <li>房屋售价：").concat(e.price?this.formatAmount(e.price):"0.00","元</li>\n             <li>账户余额：").concat(e.balance?this.formatAmount(e.balance):"0.00","元</li>\n             ").concat(this.isReserveString?"\n            <li>冻结金额：".concat(e.balanceFrozen?this.formatAmount(e.balanceFrozen):"0.00","元</li>\n            <li>预留金额：").concat(e.reserveAmount?this.formatAmount(e.reserveAmount):"0.00","元</li>\n            <li>可用金额：").concat(e.usableBalance?this.formatAmount(e.usableBalance):"0.00","元</li>\n            "):"","\n             <li>房屋用途：").concat(i?i.text:"","</li>\n          </ul>\n        </div>\n      "),s=$("#floorBaseInfoModal");s.html(a).show(),n.height()-r<300&&(r-=$("#floorBaseInfoModal").height()+30+80),s.html(a).css({left:o+"px",top:r+"px"}).show()},houseInfoOut:function(e){this.isShowCheckbox&&this.isOptionalHoust(e)&&this.$refs["houseChooseBox"+e.id][0].classList.remove("open"),$("#floorBaseInfoModal").html("").hide()},showModal:function(e){var t=this;if(!this.isDrag){var n=this.$parent.IsShow;if(!1!==n)if("02"===this.depositType)if("02"==this.continueDepositBusiType){if(e&&e.isDoing>0)return void this.$message.error("该房屋存在在途业务，不支持补交!");if(Number(e.depAmount)>=Number(e.dueAmount))return void this.$message.error("该房屋实交金额充足，无需补交!");this.$refs.continueModal.initData(e)}else{if(e&&e.isDoing>0)return void this.$message.error("该房屋存在在途业务，不支持续交续筹!");var o="0012";"1"==e.accState&&(o="0003"),this.$refs.continueModal.initData(m(m({},e),{},{busiTypeDetail:o}))}else if("03"===this.depositType)this.$refs.houOwInfoModal.loadData(e);else{var r="";if(this.depositType&&this.checkHouseUseSpecial(e.houseUse)&&(r=!0),("1"===e.accState||"7"===e.accState&&e.depAmount>0)&&0===e.isDoing){var i=[];i.push(e.id);var a={businessIds:i,baseType:"4",changeType:"3"};Object(f["j"])("/common/bChange/checkState",a).then((function(n){n.success?t.$refs.infoModal.initData(e,"",r):t.$message.warning(n.message)}))}else this.$refs.infoModal.initData(e,"",r)}else this.$refs.houOwInfoModal.loadData(e)}},getHouseBaseInfo:function(e){if(this.domBaseInfo){var t={id:e.id||"",name:e.name||"",houseName:e.houseName||"",householderName:e.householderName||"",houseArea:e.houseArea||"0.000",price:e.price||"0.00",balance:e.balance||"0.00"};return JSON.stringify(t)}},getTdContentWidth:function(e){return e?e&&e<10?"".concat(80*e,"px"):e>=10?"800px":void 0:"80px"},formatAmount:function(e){var t={style:"decimal",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2};return Number(e).toLocaleString("zh-CN",t)},deleteArrayTarget:function(e,t){var n=[];for(var o in e)e[o]!==t&&n.push(e[o]);return n},isOptionalHoust:function(e){var t=!1;this.selHand&&"0"==e.accState&&(t=!0),"1"!==e.accState&&"9"!==e.accState||0!==e.isDoing||(t=!0);var n,o=b(this.houseUseList);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(e.houseUse==r.value&&r.description&&this.depositType){var i=JSON.parse(r.description);if(i&&i.special)return!1}}}catch(a){o.e(a)}finally{o.f()}return this.optionalAccState&&("function"===typeof this.optionalAccState?t=this.optionalAccState(e):this.optionalAccState.includes(e.accState)&&(t=!0)),"all"===this.chooseFlag&&(t=!0),t},getFloorNum:function(e,t){return this.startFloor>0?"type01"===this.type?this.maxFloor.length-1-e+this.startFloor:t.maxFloor.length-1-e+this.startFloor:"type01"===this.type?this.maxFloor.length-1+this.startFloor-(e-1)<=0?this.maxFloor.length-1+this.startFloor-(e-1)-1:this.maxFloor.length-1+this.startFloor-(e-1):t.maxFloor.length-1+this.startFloor-(e-1)<=0?t.maxFloor.length-1+this.startFloor-(e-1)-1:t.maxFloor.length-1+this.startFloor-(e-1)},batchCheckedHousesByFloor:function(e,t,n){var o,r=this,i=t.querySelectorAll(".houseFloor_".concat(n)),a=b(i);try{var s=function(){var t=o.value,n=r.data.houseArr.find((function(e){return e.id===t.getAttribute("value")}));r.houseChange({houseItem:n,checked:e.target.checked,floorAll:!0})};for(a.s();!(o=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}},refreshView:function(){this.newFloorView&&this.newFloorView.tabShow(0)},openBatchChooseByColModal:function(e){var t=this,n=null,o=0,r=[];n="type01"===this.type?this.$refs["viewTable"]:this.$refs["viewTable"+e.unitId][0];var i,a=n.querySelectorAll(".tdContent.unitContent_".concat(e.unitId," input[type=checkbox]")),s=b(a);try{for(s.s();!(i=s.n()).done;){var u=i.value,c=u.getAttribute("houseNo");Number(c)>o&&(o=Number(c))}}catch(f){s.e(f)}finally{s.f()}for(var l=1;l<=o;l++)r.push({key:l,value:!1});if(0===o)return this.$message.warning("当前单元暂无可选房屋！"),!1;function d(e,t){for(var n=[],o=function(t){n.push(e("div",{style:{display:"flex",alignItems:"center",columnGap:"8px"}},[e("input",{attrs:{id:"batchModalColumnId_".concat(t),type:"checkbox"},on:{change:function(e){var n=e.target.checked,o=r.findIndex((function(e){return e.key===t}));r[o].value=!!n}}}),e("label",{attrs:{for:"batchModalColumnId_".concat(t)}},["".concat(t,"号屋")])]))},i=1;i<=t;i++)o(i);return n}this.$confirm({title:"批量选择",width:600,zIndex:9e3,content:function(e){return e("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}},d(e,o))},onOk:function(){var n;n="type01"===t.type?t.$refs["viewTable"]:t.$refs["viewTable"+e.unitId][0],r.forEach((function(o){var r,i=n.querySelectorAll(".tdContent.unitContent_".concat(e.unitId,' input[type="checkbox"][houseNo="').concat(o.key,'"]')),a=b(i);try{var s=function(){var e=r.value,n=t.data.houseArr.find((function(t){return t.id===e.value}));t.houseChange({houseItem:n,checked:o.value})};for(a.s();!(r=a.n()).done;)s()}catch(f){a.e(f)}finally{a.f()}}))}})}}},S=_,T=(n("906c"),n("2877")),D=Object(T["a"])(S,o,r,!1,null,"4eb5c76e",null);t["default"]=D.exports},2268:function(e,t,n){"use strict";n("5cb2")},2651:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"批量维护业主信息",width:18==e.font?"98vw":"93vw","min-width":"1300px",zIndex:1e3,height:"80vh",loading:e.isLoading,transfer:"","min-height":"700px","show-footer":"",position:{top:"center",left:"center"}},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-space",[n("a-button",{on:{click:e.close}},[e._v("取消")]),n("a-button",{attrs:{loading:e.isClick,type:"primary"},on:{click:e.modalOk}},[e._v("确认")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"modelBody"},[n("div",{staticClass:"tableHeader"},[n("a-button",{attrs:{type:"primary"},on:{click:e.initialize}},[e._v("初始化")])],1),n("div",{ref:"tableDiv",staticClass:"tableDiv"},[n("vxe-grid",{ref:"xTable",attrs:{columns:e.columns,border:"",resizable:"","auto-resize":"",height:"auto","tree-config":{},"edit-config":{trigger:"click",mode:"row",showIcon:!0,autoClear:!1,showAsterisk:!1},"edit-rules":e.editRules,"span-method":e.rowspanMethod,data:e.tableData},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxAll},scopedSlots:e._u([{key:"struAreaEdit",fn:function(t){var o=t.row,r=t.column;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:o.houseDisabled||e.isDeposit,"format-due":"05",isHideAddon:"",placeholder:"请输入房屋面积",type:"text"},on:{change:function(t){return e.depCompute(o,r)}},model:{value:o.struArea,callback:function(t){e.$set(o,"struArea",t)},expression:"row.struArea"}})]}},{key:"depMode",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{disabled:o.houseDisabled||e.isDeposit,dictCode:"dep_mode"},on:{change:function(t){return e.depCompute(o)}},model:{value:o.depMode,callback:function(t){e.$set(o,"depMode",t)},expression:"row.depMode"}})]}},{key:"bankCodeEdit",fn:function(t){var o=t.row;return[n("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择承办银行","show-icon":""},on:{change:function(t){return e.bankCodeChooseFun(o,t)}},model:{value:o.bankCode,callback:function(t){e.$set(o,"bankCode",t)},expression:"row.bankCode"}})]}},{key:"priceEdit",fn:function(t){var o=t.row,r=t.column;return[n("amount-input",{staticClass:"myInput",attrs:{isHideAddon:"",placeholder:"请输入房屋售价",type:"text"},on:{change:function(t){return e.depCompute(o,r)}},model:{value:o.price,callback:function(t){e.$set(o,"price",t)},expression:"row.price"}})]}},{key:"contNoEdit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"myInput",attrs:{placeholder:"请输入合同号",type:"text"},on:{blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.contNo,callback:function(t){e.$set(o,"contNo",t)},expression:"row.contNo"}})]}},{key:"buyDateEdit",fn:function(t){var o=t.row;t.column;return[n("j-date",{attrs:{placeholder:"请选择购房日期"},model:{value:o.buyDate,callback:function(t){e.$set(o,"buyDate",t)},expression:"row.buyDate"}})]}},{key:"nameEdit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"myInput",attrs:{placeholder:"请输入业主姓名",type:"text"},on:{blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.name,callback:function(t){e.$set(o,"name",t)},expression:"row.name"}})]}},{key:"certType",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{dictCode:"cert_type",readOnly:""},model:{value:o.certType,callback:function(t){e.$set(o,"certType",t)},expression:"row.certType"}})]}},{key:"certTypeEdit",fn:function(t){var o=t.row,r=t.column;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{dropdownMatchSelectWidth:!1,label:o.certType,dictCode:"cert_type",placeholder:"请选择证件类型"},on:{"update:label":function(t){return e.$set(o,"certType",t)},select:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.certType,callback:function(t){e.$set(o,"certType",t)},expression:"row.certType"}})]}},{key:"certNoEdit",fn:function(t){var o=t.row,r=t.column;return[n("a-input",{staticClass:"myInput",attrs:{placeholder:"请输入证件号码"},on:{blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},scopedSlots:e._u(["1"==o.certType?{key:"addonAfter",fn:function(){return[n("i-d-card-reading",{attrs:{"z-index":1,color:"#1890ff"},on:{readOk:function(t){return e.readIdCardCallBack(o,r,!0,t)},readErr:function(t){return e.readIdCardCallBack(o,r,!1,t)}}})]},proxy:!0}:null],null,!0),model:{value:o.certNo,callback:function(t){e.$set(o,"certNo",t)},expression:"row.certNo"}})]}},{key:"baseType",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{readOnly:!0,dictCode:"owner_category",placeholder:"请选择业主类型"},model:{value:o.baseType,callback:function(t){e.$set(o,"baseType",t)},expression:"row.baseType"}})]}},{key:"baseTypeEdit",fn:function(t){var o=t.row,r=t.column;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{getPopupContainer:e.getPopupContainer,label:o.baseTypeName,dictCode:"owner_category",placeholder:"请选择业主类型"},on:{"update:label":function(t){return e.$set(o,"baseTypeName",t)},select:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.baseType,callback:function(t){e.$set(o,"baseType",t)},expression:"row.baseType"}})]}},{key:"phoneEdit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"ownerInfoTablePhoneInput myInput",attrs:{placeholder:"请输入联系电话"},on:{blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},change:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.phone,callback:function(t){e.$set(o,"phone",t)},expression:"row.phone"}})]}},{key:"dueAmount",fn:function(t){var o=t.row;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:!0,placeholder:"请输入应交金额",type:"text"},model:{value:o.dueAmount,callback:function(t){e.$set(o,"dueAmount",t)},expression:"row.dueAmount"}})]}},{key:"depAmountEdit",fn:function(t){var o=t.row;t.column;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:e.amountChange,placeholder:"请输入实交金额",type:"text"},on:{change:function(t){return e.depAmountChangeFun(o,t)}},model:{value:o.depAmount,callback:function(t){e.$set(o,"depAmount",t)},expression:"row.depAmount"}})]}},{key:"action",fn:function(t){var o=t.row,r=t.$rowIndex;return[n("a-space",{staticClass:"actionButtons"},[e.getIsLastByGroup(o)?n("a-icon",{staticStyle:{color:"#65c88d"},attrs:{type:"plus"},on:{click:function(t){return e.addOwnInfo(o,r)}}}):e._e(),n("a-icon",{attrs:{type:"delete"},on:{click:function(t){return e.deleteOwner(o,r)}}})],1)]}}])})],1),n("j-modal",{attrs:{title:"初始化",switchFullscreen:"",visible:e.initializeVisible,width:"500px",zIndex:e.zIndex},on:{cancel:e.initializeModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:""},on:{click:e.initializeModalCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            关闭\n          ")],1),n("a-button",{attrs:{type:"primary"},on:{click:e.saveInitialize}},[e._v("初始化")])]},proxy:!0}])},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{type:"flex"}},[n("a-col",{attrs:{span:5}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("实交金额")]),n("a-col",{attrs:{span:19,"data-prop":"modalDepAmount"}},[n("amount-input",{attrs:{placeholder:"请输入实交金额"},model:{value:e.modalDepAmount,callback:function(t){e.modalDepAmount=t},expression:"modalDepAmount"}})],1)],1)],1)],1)])},r=[],i=n("92d2"),a=n("0fea"),s=n("eccd"),u=n("3269"),c=n("d492"),l=n("3ed7"),d=n("4aae"),f=n("d8a5"),h=n("2b0e"),p=n("9fb0"),m=n("4ec3");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e){return x(e)||w(e)||b(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function w(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e){if(Array.isArray(e))return k(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=T(e,"string");return"symbol"==y(t)?t:t+""}function T(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function D(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */D=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:T(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function g(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var k=Object.getPrototypeOf,I=k&&k(k($([])));I&&I!==n&&o.call(I,a)&&(x=I);var C=w.prototype=g.prototype=Object.create(x);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==y(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function T(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===v)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?m:h,c.arg===v)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=m,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(y(t)+" is not iterable")}return b.prototype=w,r(C,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},_(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new S(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(C),c(C,u,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function O(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){O(i,o,r,a,s,"next",e)}function s(e){O(i,o,r,a,s,"throw",e)}a(void 0)}))}}var E={name:"BatchEditOwnerInfo",components:{IDCardReading:c["default"],OwnerInfoTable:i["default"],JDDictSelectTag:s["default"],AmountInput:d["default"],JDictBankListSelect:u["default"]},props:{isDeposit:{type:Boolean,default:!1}},data:function(){var e=function(e){var t,n=e.cellValue,o=e.row;return null!=n&&""!=n&&(t=Number(n)),"01"!=o["depMode"]||n&&""!==n?"01"==o["depMode"]&&t<=0?Promise.reject(new Error("房屋售价应大于0")):void 0:Promise.reject(new Error("请输入房屋售价"))},t=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请输入业主信息"))},n=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请选择证件类型"))},o=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请选择业主类型"))},r=function(e){var t=e.cellValue,n=e.row;if("01"!==n.depMode){if(!t||""===t)return Promise.reject(new Error("请输入房屋面积"));if(Number(t)<=0)return Promise.reject(new Error("房屋面积应大于0"))}},i=function(e){var t=e.cellValue,n=e.row;if("1"==n["certType"]&&(!t||!t.match(/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/)))return Promise.reject(new Error("请输入正确的身份证号码"))},s=function(e){var t=e.cellValue;return new Promise((function(e,n){if(!t||""===t)return n(new Error("请输入联系电话"));Object(a["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){if(!t.success)return n(new Error(t.result));e()}))}))},u={depMode:e,name:t,certType:n,certNo:i,baseType:o,phone:s,struArea:r},c={price:[{validator:e}],name:[{required:!0,validator:t}],certType:[{required:!0,message:"请选择证件类型",trigger:"change"},{validator:n,trigger:"change"}],certNo:[{required:!0,trigger:"change",message:"请输入证件号码"},{validator:i,trigger:"change"}],bankCode:[{required:!0,trigger:"change",message:"请选择承办银行"}],baseType:[{required:!0,trigger:"change",validator:o}],phone:[{required:!0,validator:s}],struArea:[{required:!0,validator:r}]};return{editRules:c,validaRuleMap:u,tableData:[],visible:!1,initializeVisible:!1,houseList:[],isLoading:!1,isScroll:!1,isRightScroll:!1,formatterAmount:l["g"],isClick:!1,amountChange:!1,url:{depositMaintainBatch:"/deposit/firstDeposit/depositMaintainBatch"},houseEdit:!1,depositHouseEdit:"",isCorp:!1,font:h["default"].ls.get(p["w"]),psnNoPhoneIsRequired:!0,initIndex:[],modalDepAmount:0,columns:[{type:"checkbox",width:40,align:"center"},{minWidth:190,showOverflow:"tooltip",field:"address",title:"房屋位置",className:"rtl"},{width:130,align:"right",field:"struArea",title:"房屋面积",formatter:function(e){var t=e.cellValue;return Object(l["g"])(t)},editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"struAreaEdit"}},{width:130,field:"depMode",title:"交存模式",slots:{default:"depMode"}},{width:150,field:"bankCode",editRender:{type:"visible"},title:"承办银行",slots:{edit:"bankCodeEdit"}},{width:120,align:"right",field:"price",title:"房屋售价",formatter:function(e){var t=e.cellValue;return Object(l["g"])(t)},editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"priceEdit"}},{width:140,field:"contNo",title:"合同号",editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"contNoEdit"}},{width:18==this.font?185:160,field:"buyDate",title:"购房日期",editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"buyDateEdit"}},{width:18==this.font?150:140,field:"name",title:"业主姓名",editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"nameEdit"}},{field:"certType",title:"证件类型",minWidth:170,align:"center",editRender:{autofocus:"myInput",type:"visible"},slots:{default:"certType",edit:"certTypeEdit"}},{width:18==this.font?250:230,field:"certNo",title:"证件号码",showOverflow:"tooltip",editRender:{autofocus:"myInput",type:"visible"},slots:{default:"certNo",edit:"certNoEdit"}},{field:"baseType",width:18==this.font?140:120,title:"业主类型",align:"center",editRender:{type:"visible"},slots:{default:"baseType",edit:"baseTypeEdit"}},{field:"phone",title:"联系电话",width:18==this.font?160:130,align:"center",editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"phoneEdit"}},{width:150,field:"dueAmount",title:"应交金额",formatter:function(e){var t=e.cellValue;return Object(l["g"])(t)},slots:{default:"dueAmount"}},{width:150,field:"depAmount",title:"实交金额",formatter:function(e){var t=e.cellValue;return Object(l["g"])(t)},editRender:{autofocus:"myInput",type:"visible"},slots:{edit:"depAmountEdit"}},{title:"操作",fixed:"right",align:"center",width:80,slots:{default:"action"}}]}},methods:{readIdCardCallBack:function(e,t,n,o){n?this.$set(e,"certNo",o.idNum):(this.$set(e,"certNo",""),this.$message.warning(o)),this.$refs.xTable.updateStatus({row:e,column:t})},init:function(e){var t=this;this.visible=!0,this.isLoading=!0,Object(m["l"])("deposit_check_switch").then((function(e){e&&"1"===e.result?(t.psnNoPhoneIsRequired=!1,t.editRules["certType"]=[],t.editRules["certNo"]=[],t.editRules["phone"]=[]):(t.psnNoPhoneIsRequired=!0,t.editRules["certType"]=[{required:!0,message:"请选择证件类型",trigger:"change"},{validator:t.validaRuleMap["certType"],trigger:"change"}],t.editRules["certNo"]=[{required:!0,trigger:"change",message:"请输入证件号码"},{validator:t.validaRuleMap["certNo"],trigger:"change"}],t.editRules["phone"]=[{required:!0,validator:t.validaRuleMap["phone"],trigger:"change"}])})),this.getOwnInfoList(e),this.handleHouseEdit(),this.getAmountChangeFlag()},handleHouseEdit:function(){var e=A(D().mark((function e(t){var n=this;return D().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["e"])("deposit_house_edit");case 2:this.depositHouseEdit=e.sent,Object(a["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success&&(n.isCorp=!0)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getOwnInfoList:function(e){var t=this,n=this,o=e.join(",");return Object(a["e"])("/view/floorViews/queryHouseListByIds",{houseIds:o}).then((function(e){return e.result.forEach((function(e){e.psnInfoList&&0!==e.psnInfoList.length||(e.psnInfoList=[{certType:"1",baseType:"1"}]),e.depAmount<=0&&(e.depAmount=e.dueAmount),e.depStandard&&e.dueAmount&&"1"===e.hisFlag||t.depCompute(e)})),n.houseList=e.result,n.getTableData(),e.result}))},depCompute:function(e,t){var n=this;this.$refs.xTable.updateStatus({row:e,column:t});var o=C(C({},e),{},{id:e.houseId});Object(a["j"])("/deposit/firstDeposit/calculateDueAmount",o).then((function(t){t.success&&(n.$set(e,"dueAmount",t.result),n.$set(e,"depAmount",t.result),n.$set(e,"depStandard",Number(t.message).toFixed(2)),n.tableData.forEach((function(o){o.houseId==e.houseId&&(n.$set(o,"struArea",e.struArea),n.$set(o,"dueAmount",t.result),n.$set(o,"depAmount",t.result),n.$set(o,"depStandard",Number(t.message).toFixed(2)))})))}))},bankCodeChooseFun:function(e,t){var n=this;this.tableData.forEach((function(o){o.houseId==e.houseId&&n.$set(o,"bankCode",t)}))},depAmountChangeFun:function(e,t){var n=this;this.tableData.forEach((function(o){o.houseId==e.houseId&&n.$set(o,"depAmount",t)}))},getTableData:function(){var e=this,t=this,n=this.$refs.xTable,o=[];this.houseList.forEach((function(n){n.psnInfoList&&n.psnInfoList.length>0&&n.psnInfoList.forEach((function(r){var i=Object.assign(r,{houseId:n.id,address:n.address,depMode:n.depMode,price:n.price,contNo:n.contNo,buyDate:n.buyDate,houseUse:n.houseUse,liftFlag:n.liftFlag,struArea:n.struArea,bldType:n.bldType,bldAttr:n.bldAttr,bldCode:n.bldCode,regionCode:n.regionCode,sysOrgCode:n.sysOrgCode,depAmount:n.depAmount,dueAmount:n.dueAmount,zoneCode:n.zoneCode,depStandard:n.depStandard,bankCode:n.bankCode});e.isCorp&&t.depositHouseEdit&&("1"==t.depositHouseEdit||"2"==t.depositHouseEdit)?(i.houseDisabled=!0,"2"==t.depositHouseEdit&&n.houseEdit&&(i.houseDisabled=!1)):i.houseDisabled=!1,o.push(i)}))})),this.tableData=[],n.createRow(o).then((function(t){var n;(n=e.tableData).push.apply(n,v(t))})).catch((function(){e.$message.error("数据初始化失败！")})).finally((function(){e.isLoading=!1}))},scroll:function(e){this.isScroll=0!==e.target.scrollLeft},addOwnInfo:function(e,t){var n=this;this.$refs.xTable.clearValidate();var o=this.$refs.xTable;o.validate(e).then((function(){var r={houseId:e.houseId,address:e.address,depMode:e.depMode,price:e.price,contNo:e.contNo,baseType:"1",certType:"1"};o.createRow(r).then((function(o){n.tableData.splice(t+1,0,o),n.tableData.forEach((function(t){t.houseId==e.houseId&&(n.$set(t,"struArea",e.struArea),n.$set(t,"bankCode",e.bankCode))}))}))})).catch((function(){}))},deleteOwner:function(e,t){this.$refs.xTable.clearValidate();var n=this;function o(t){return e.name?t("div",["是否确认删除业主姓名为",t("span",{style:{color:"#faad14"}},e.name),"的业主信息？"]):"是否确认删除此条业主信息？"}n.$confirm({title:function(e){return o(e)},onOk:function(){n.tableData.splice(t,1),n.houseList.splice(t,1)}})},getIsLastByGroup:function(e){var t=this.$refs.xTable,n=t.getTableData(),o=n.tableData,r=[],i=-1;return o.forEach((function(t,n){t.houseId===e.houseId&&(e._XID===t._XID&&(i=n),r.push(t))})),-1!==i&&i>=r.length-1},validError:function(){var e=this.$refs.scrollDiv;this.$nextTick((function(){try{var t=e.querySelector(".col--valid-error"),n=e.getBoundingClientRect(),o=n.left,r=t.getBoundingClientRect(),i=r.left;e.scrollLeft=Math.abs(Math.abs(o-i)-280)}catch(a){}}))},modalOk:function(){var e=A(D().mark((function e(){var t,n,o=this;return D().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isClick=!0,t=this.$refs.xTable,n=this,n.isLoading=!0,t.validate(this.tableData).then((function(){n.isClick=!0,n.isLoading=!0;try{n.getPostParams(),n.houseList.forEach((function(e){"0"!==e.psnInfoList[0].price||"01"!==e.psnInfoList[0].depMode?(e.depMode=e.psnInfoList[0].depMode,e.price=e.psnInfoList[0].price,e.contNo=e.psnInfoList[0].contNo,e.isDeposit=n.isDeposit):n.$message.error("房屋售价不能为0")}))}catch(e){n.isClick=!1,n.isLoading=!1}Object(a["j"])(n.url.depositMaintainBatch,n.houseList).then((function(e){e&&e.success?(n.$message.success("保存成功！"),n.$emit("save"),o.close(),"0"===e.result?n.$bus.$emit("FirstDepositTabChange","2"):Object(a["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success||n.$bus.$emit("FirstDepositTabChange","1")}))):o.$message.error(e.message)})).finally((function(){n.isClick=!1,n.isLoading=!1}))})).catch((function(){n.isClick=!1,n.isLoading=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPostParams:function(){var e=[].concat(this.tableData),t=this;t.houseList.map((function(t){return e.map((function(e){e.dueAmount&&t.id===e.houseId&&(t.dueAmount=e.dueAmount,t.depAmount=e.depAmount,t.depStandard=e.depStandard)})),t.psnInfoList=e.filter((function(e){return e.houseId===t.id})),t.bankCode=t.psnInfoList[0].bankCode,t.buyDate=t.psnInfoList[0].buyDate,t.struArea=t.psnInfoList[0].struArea,t}))},getPopupContainer:function(){return this.$refs.tableDiv},close:function(){this.tableData=[],this.$refs.xTable.clearValidate(),this.visible=!1},rowspanMethod:function(e){var t=e.row,n=e.$rowIndex,o=e.column,r=(e.visibleData,["address","depMode","price","contNo","buyDate","struArea","bankCode","depAmount","dueAmount"]),i=t.houseId;if(r.includes(o.property)){var a=this.tableData[n-1],s=this.tableData[n+1];if(a&&a.houseId===i)return{rowspan:0,colspan:0};var u=1;while(s&&s.houseId===i)s=this.tableData[++u+n];if(u>1)return{rowspan:u,colspan:1}}},checkboxChange:function(e){if(e.checked)this.initIndex.push(e.$rowIndex);else for(var t=0;t<this.initIndex.length;t++)this.initIndex[t]==e.$rowIndex&&this.initIndex.splice(t,1)},checkboxAll:function(e){for(var t=[],n=0;n<e.selection.length;n++)t.push(n);this.initIndex=t},initialize:function(){if(0===this.initIndex.length)return this.$message.warning("请选择至少一条房屋信息！");this.modalDepAmount=0,this.initializeVisible=!0},initializeModalCancel:function(){this.initializeVisible=!1},saveInitialize:function(){for(var e=this.initIndex,t=0;t<e.length;t++)this.tableData[e[t]].depAmount=this.modalDepAmount;this.initializeModalCancel()},getAmountChangeFlag:function(){var e=this,t=Object(m["F"])("charge_is_edit_depAmount");t&&t.length>0?this.amountChange="0"===t.result:Object(m["l"])("charge_is_edit_depAmount",null).then((function(t){t.success&&(e.amountChange="0"===t.result)}))}}},L=E,$=(n("a16be"),n("b9bb"),n("2877")),N=Object($["a"])(L,o,r,!1,null,"e1f5cea0",null);t["default"]=N.exports},2820:function(e,t,n){},"2b6a":function(e,t,n){"use strict";n("975d")},"2d29":function(e,t,n){},"3f45":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"floorView",attrs:{id:"floorView"}},[n("div",{staticClass:"top-list"},[e.showRightAction?n("div",{staticClass:"list-btn"},[n("div",{staticClass:"list-btn-left"},[e._t("leftAction")],2),n("div",{staticClass:"listBtn-right"},[e._l(e.floorCardColor,(function(t,o){return n("span",{key:o,staticClass:"houseColorType",style:{"--typeBgColor":t[1]}},[e._v(e._s(t[0]))])})),n("a-space",{attrs:{size:4}},[e.detailSimplifyFlag?[n("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[n("a-menu",e._l(e.infoButtonGroup,(function(t){return n("a-menu-item",{key:t.value},[n("a-button",{staticClass:"activeInfoButton",class:{active:e.activeButton.includes(t.value)},style:{"--active-color":t.activeColor},attrs:{block:""},on:{click:function(n){return e.updateActive(t.value)}}},[e._v("\n                      "+e._s(t.title)+"\n                      "),e.activeButton.includes(t.value)?n("span",{staticClass:"activeIconBox"},[n("a-icon",{staticClass:"activeIcon",attrs:{type:"check"}})],1):e._e()])],1)})),1)]},proxy:!0}],null,!1,2222775940)},[n("a-button",{staticClass:"radioButton "},[n("span",[e._v("详细信息"),n("a-icon",{attrs:{type:"caret-down"}})],1)])],1)]:[e._l(e.infoButtonGroup,(function(t){return[n("a-tooltip",{key:t.value,attrs:{title:t.tooltip}},[n("a-button",{staticClass:"activeInfoButton",class:{active:e.activeButton.includes(t.value)},style:{"--active-color":t.activeColor},on:{click:function(n){return e.updateActive(t.value)}}},[e._v("\n                  "+e._s(t.title)+"\n                  "),e.activeButton.includes(t.value)?n("div",{staticClass:"activeIconBox"},[n("a-icon",{staticClass:"activeIcon",attrs:{type:"check"}})],1):e._e()])],1)]}))],-1===e.$route.path.indexOf("deposit/ConDeposit")?n("div",[!e.fileSimplifyFlag||e.isDetail?n("div",[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.selectYetPsnHouseIno}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("有业主\n                  ")],1),n("a-menu-item",{key:"2",on:{click:e.selectNotPsnHouseIno}},[n("a-icon",{attrs:{type:"disconnect"}}),e._v("无业主\n                  ")],1),n("a-menu-item",{key:"3",on:{click:e.clear}},[n("a-icon",{attrs:{type:"close-square"}}),e._v("清空选择\n                  ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量选择 "),n("a-icon",{attrs:{type:"down"}})],1)],1),e.IsShow&&!e.isDetail?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.selectYetPsnHouseIno}},[n("a-tooltip",{attrs:{title:"导出楼盘信息"}},[n("a-icon",{staticStyle:{"margin-right":"8px","font-size":"12px"},attrs:{type:"export"}}),e._v("导出\n                    ")],1)],1),n("a-menu-item",{key:"2",on:{click:e.selectNotPsnHouseIno}},[n("a-tooltip",{attrs:{title:"导入楼盘信息"}},[n("a-upload",{attrs:{name:"file",showUploadList:!1,"before-upload":e.handleImportBefore,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[n("a-icon",{staticStyle:{"margin-right":"8px","font-size":"12px"},attrs:{type:"import"}}),e._v("导入\n                      ")],1)],1)],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 导入导出 "),n("a-icon",{attrs:{type:"down"}})],1)],1):e.IsShow?n("a-tooltip",{attrs:{title:"导出楼盘信息"}},[n("a-button",{staticClass:"topBtn",staticStyle:{"border-radius":"5px 0 0 5px"},attrs:{icon:"export"},on:{click:e.exportHouseInfo}},[e._v("\n                  导出\n                ")])],1):e._e()],1):n("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[n("a-menu",[n("a-menu-item",{key:"1"},[n("a-button",{attrs:{block:""},on:{click:e.exportHouseInfo}},[e._v("导出")])],1),n("a-menu-item",{key:"2"},[n("a-upload",{staticClass:"uploadWidth100",attrs:{name:"file",showUploadList:!1,"before-upload":e.handleImportBefore,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[n("a-button",{attrs:{block:""}},[e._v("导入")])],1)],1),n("a-menu-item",{key:"3"},[n("a-button",{attrs:{id:"exportButtonHide"},on:{click:e.exportFile}},[e._v("导出视图")])],1)],1)]},proxy:!0}],null,!1,3564241280)},[n("a-button",{staticClass:"radioButton "},[n("span",[e._v("导入/导出"),n("a-icon",{attrs:{type:"caret-down"}})],1)])],1)],1):e._e(),e.IsShow?n("a-tooltip",{attrs:{title:"批量维护选中房屋的业主信息"}},[e.isDisplay&&-1===e.$route.path.indexOf("deposit/ConDeposit")?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchEditOwner}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("批量维护\n                ")],1),n("a-menu-item",{key:"2",on:{click:e.batchDelOwner}},[n("a-icon",{attrs:{type:"disconnect"}}),e._v("批量撤销\n                ")],1),n("a-menu-item",{key:"3",on:{click:e.batchDelHouse}},[n("a-icon",{attrs:{type:"delete"}}),e._v("批量删除\n                ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1):e._e(),e.fileSimplifyFlag?e._e():n("a-tooltip",{attrs:{title:"将楼盘视图导出为png图片"}},[n("a-button",{staticClass:"list-a-btn1",attrs:{id:"exportButtonHide",size:"small",loading:e.exportLoading,icon:"export"},on:{click:e.exportFile}},[e._v("导出视图")])],1)],2)],2)]):e._e()]),n("div",{staticClass:"viewContent",attrs:{id:"viewContentId"}},["storeroom"!==e.viewType?[n("div",{staticClass:"right-content floorHouseView",attrs:{id:"rightContent"}},[e._l(e.houseList,(function(t,o){return[n("floor-table",{key:o,ref:"floorTable"+t.type,refInFor:!0,attrs:{isDetail:e.isShowDetail,depositType:e.depositType,houseChecks:e.houseChecks,selectedHouse:e.selectedHouse,areaShow:e.activeButton.includes("area"),moneyShow:e.activeButton.includes("balance"),ownerShow:e.activeButton.includes("ownerSName"),bldState:e.bldState,isShowCheckbox:e.isShowCheckbox,"unit-nums":e.unitNums,queryParam:e.queryParam,isDeposit:e.isDeposit},on:{"update:houseChecks":function(t){e.houseChecks=t},"update:house-checks":function(t){e.houseChecks=t},"update:selectedHouse":function(t){e.selectedHouse=t},"update:selected-house":function(t){e.selectedHouse=t}}})]}))],2)]:e._e()],2)])},r=[],i=n("f230"),a=n.n(i),s=n("0fea"),u=n("eccd"),c=n("0b6e"),l=n("2b0e"),d=n("9fb0"),f=n("4ec3"),h=n("d8a5");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",m="executing",y="completed",v={};function b(){}function w(){}function x(){}var k={};c(k,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I($([])));C&&C!==n&&o.call(C,a)&&(k=C);var _=x.prototype=b.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==p(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=f;return function(i,a){if(r===m)throw Error("Generator is already running");if(r===y){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===v)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=m;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?y:h,c.arg===v)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=y,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(p(t)+" is not iterable")}return w.prototype=x,r(_,"constructor",{value:x,configurable:!0}),r(x,"constructor",{value:w,configurable:!0}),w.displayName=c(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){b(i,o,r,a,s,"next",e)}function s(e){b(i,o,r,a,s,"throw",e)}a(void 0)}))}}var x={name:"StoreRoomHouseView",components:{JDDictSelectTag:u["default"],FloorTable:c["default"]},props:{isDeposit:{type:Boolean,default:!1},viewType:{type:String,default:"default"},buildId:{type:String,default:"",required:!0},showRightAction:{type:Boolean,default:!0},queryParam:{type:Object,default:function(){return{}}},depositType:{type:String,default:""},isDetail:{type:Boolean,default:!1},isShowCheckbox:{type:Boolean,default:!1},regionCode:{type:String,default:""},hidenBaseData:{type:Boolean,default:!1}},inject:{floorViews:{default:void 0}},data:function(){return{houseUseList:[],IsShow:!0,isDisplay:!0,isShowDetail:this.isDetail,infoButtonGroup:[{title:"业主姓名",value:"ownerSName",activeColor:"#d7cbdd",tooltip:"当不存在业主时，不进行显示！"},{title:"面积",value:"area",activeColor:"#e9f8ff"},{title:"余额",value:"balance",activeColor:"#ece5c3"}],activeButton:[],bgActive:!1,bgActive1:!1,bgActive2:!1,loading:!1,houseChecks:[],selectedHouse:[],exportLoading:!1,buildType:"0",loadingProgress:0,isSuccess:!1,maxFloor:[],unitNums:0,houseFloorNums:0,shoppingFloorNums:0,basementFloorNums:0,houseList:[],screenWidth:document.body.clientWidth,bldState:"0",id:"",selectArr:[],downLoading:!1,pageWidth:document.documentElement.clientWidth,font:l["default"].ls.get(d["w"]),notDepositColor:"#edf5fd",floorCardColor:new Map([["未交","#8FD623"],["已交","#a0c2fd"],["已交不足额","#4687f8"],["余额不足30%","#fdb3b8"],["免交","#d7cfcf"]]),url:{importExcelUrl:"/deposit/firstDeposit/importExcel"}}},created:function(){var e=w(g().mark((function e(){var t,n,o=this;return g().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["l"])("floor_notdeposit_color").catch((function(){}));case 2:t=e.sent,this.notDepositColor=t.result||"#edf5fd",this.floorCardColor.set("未交",this.notDepositColor),Object(f["i"])("floor_card_color").then((function(e){e.success&&e.result.forEach((function(e){o.floorCardColor.set(e.text,e.value)}))})),n=this.$route.path,n&&"/communityPortrait"===n&&(this.IsShow=!1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=this;window.onresize=function(){return function(){e.pageWidth=document.documentElement.clientWidth}()},Object(h["g"])("house_use").then((function(t){t&&(e.houseUseList=t.result)}))},computed:{tokenHeader:function(){var e={"X-Access-Token":l["default"].ls.get(d["a"]),sourceName:l["default"].ls.get(d["A"]),redisIndex:l["default"].ls.get(d["x"])},t=l["default"].ls.get(d["C"]);return t&&(e["tenant-id"]=t),e},importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl,"?regionCode=").concat(this.regionCode)},detailSimplifyFlag:function(){return this.hidenBaseData?18===this.font:18===this.font||this.pageWidth<1750},fileSimplifyFlag:function(){return!this.hidenBaseData&&(18==this.font&&this.pageWidth<1745||this.pageWidth<1562)}},watch:{houseChecks:function(e){this.$emit("update:houseChecks",e)}},methods:{selectYetPsnHouseIno:function(){var e=this;this.houseList.forEach((function(t){var n=e.$refs["floorTable"+t.type][0];t.houseArr.forEach((function(t){n.houseChange({houseItem:t,checked:t.householderName&&e.checkboxConfig({row:t})})}))}))},selectNotPsnHouseIno:function(){var e=this;this.houseList.forEach((function(t){var n=e.$refs["floorTable"+t.type][0];t.houseArr.forEach((function(t){n.houseChange({houseItem:t,checked:!t.householderName&&e.checkboxConfig({row:t})})}))}))},clear:function(){var e=this;this.houseList.forEach((function(t){var n=e.$refs["floorTable"+t.type][0];t.houseArr.forEach((function(e){n.houseChange({houseItem:e,checked:!1})}))}))},checkboxConfig:function(e){var t=e.row,n=!1;return"1"===t.accState&&0===t.isDoing&&(n=!0),n=!(!this.checkHouseUse(t.houseUse)||"0"===t.accState||0!==t.isDoing),n},checkHouseUse:function(e){return!this.depositType||!this.checkHouseUseSpecial(e)},checkHouseUseSpecial:function(e){var t,n=m(this.houseUseList);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(e==o.value){if(!o.description)return!1;var r=JSON.parse(o.description);if(r&&r.special)return!0}}}catch(i){n.e(i)}finally{n.f()}},updateActive:function(e){this.activeButton.includes(e)?this.activeButton=this.activeButton.filter((function(t){return t!==e})):this.activeButton.push(e)},batchEditOwner:function(){this.$emit("batchEditOwner")},handleImportBefore:function(){return this.downLoading=!0,Promise.resolve()},handleImportExcel:function(e){this.$emit("handleImportExcel",e)},exportHouseInfo:function(){this.$emit("exportHouseInfo")},loadData:function(e){var t=this;this.id=e,this.loadingProgress=0,this.loading=!0,this.$emit("loadStatus",!0),this.isSuccess=!1,this.houseList=[],Object(s["e"])("/view/floorViews/queryHouseView",{buildId:e,noAccState:this.isDeposit?"9":""}).then((function(e){function n(e,t){var n=["01","02","07","03"],o=e.type,r=t.type;return n.includes(o)&&n.includes(r)?n.indexOf(o)-n.indexOf(r):n.includes(o)?-1:n.includes(r)?1:t.startFloor-e.startFloor}t.bldState=e.result.bldState,"0"!=t.bldState&&(t.isDisplay=!1),t.unitNums=e.result.unitNums,t.houseList=e.result.houseTypeList.sort(n),t.$nextTick((function(){e.result.houseTypeList.forEach((function(e){t.$refs["floorTable"+e.type][0].initData(e)}))})),t.houseChecks=[],t.isSuccess=!0,t.loading=!1,t.$emit("loadStatus",!1)}))},getProgress:function(){var e=this,t=setInterval((function(){var n=this;e.loadingProgress<80&&(e.loadingProgress+=Math.round(15*Math.random())),"complete"===document.readyState&&e.isSuccess&&(e.loadingProgress=100,setTimeout((function(){e.loading=!1,n.$emit("loadStatus",!1)}),300),window.clearInterval(t))}),200)},showArea:function(){this.bgActive=!this.bgActive},showMoney:function(){this.bgActive1=!this.bgActive1},exportFile:function(){var e=this;this.exportLoading=!0;var t="";if(this.floorViews){var n=this.floorViews().regionName,o=this.floorViews().buildArr.find((function(t){return t.id===e.buildId})).buildName;t=n+"-"+o}else t="楼盘视图";this.$nextTick((function(){e.publicDomToImg("rightContent",t,!0,"exportButtonHide")}))},publicDomToImg:function(e,t){var n=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";window.pageYoffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;var i=document.getElementById(e),s=i.scrollWidth,u=i.offsetHeight,c=2;a()(i,{width:s,height:u,backgroundColor:"#ffffff",dpi:2*window.devicePixelRatio,scale:c,X:0,Y:0,ignoreElements:function(e){if(e.id===r||"INPUT"===e.tagName)return!0}}).then((function(e){var r=e.toDataURL();if(o){var i=document.createElement("a");i.download=t;var a=new MouseEvent("click");n.dataURL=r,i.href=r,i.dispatchEvent(a)}return r})).finally((function(){n.exportLoading=!1}))},getBuildClass:function(){return""},batchDelOwner:function(){var e=!1;if(this.selectedHouse.forEach((function(t){t.householderName||(e=!0)})),e)return this.$message.warning("所选房屋存在不能撤销的业主信息！");this.$emit("batchDelOwner")},batchDelHouse:function(){var e=!1;if(this.selectedHouse.forEach((function(t){t.householderName&&(e=!0)})),e)return this.$message.warning("所选房屋存在业主信息！");this.$emit("batchDelHouse")}}},k=x,I=(n("5952"),n("2877")),C=Object(I["a"])(k,o,r,!1,null,"59b407c6",null);t["default"]=C.exports},"41db":function(e,t,n){"use strict";n("7e4d")},4911:function(e,t,n){},"500f":function(e,t,n){"use strict";n("2d29")},5798:function(e,t,n){},5952:function(e,t,n){"use strict";n("cc97")},"5cb2":function(e,t,n){},"5eba":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{staticClass:"fillHouseQueryModal",attrs:{width:"1200px",maxHeight:"80vh",title:"房屋填充","show-footer":"","destroy-on-close":!0,position:{top:9,left:"center"},loading:e.loading,"z-index":1e3},on:{close:function(){return e.open({flag:!1})}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:"primary"},on:{click:e.modalOk}},[e._v("确认")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("j-form-container",{ref:"form",attrs:{model:e.model,rules:e.modelRules}},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"edit"},slot:"edit"},[n("a-col",{attrs:{span:6}},[n("span",{staticClass:"required"},[e._v("房屋用途")])]),n("a-col",{attrs:{span:6,"data-prop":"houseUse"}},[n("j-d-dict-select-tag",{staticClass:"width100",attrs:{dictCode:"house_use",placeholder:"请选择房屋用途"},model:{value:e.model.houseUse,callback:function(t){e.$set(e.model,"houseUse",t)},expression:"model.houseUse"}})],1),n("a-col",{attrs:{span:6}},[e._v("填充单元")]),n("a-col",{attrs:{span:6}},[n("a-select",{staticClass:"width-100",attrs:{placeholder:"请选择单元"},model:{value:e.model.unitId,callback:function(t){e.$set(e.model,"unitId",t)},expression:"model.unitId"}},[n("a-select-option",{attrs:{value:void 0}},[e._v("请选择单元")]),e._l(e.cellList,(function(t,o){return n("a-select-option",{key:o,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}))],2)],1),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"required"},[e._v("填充楼层")])]),n("a-col",{attrs:{span:6,"data-prop":"startEndFloor"}},[n("a-space",{staticClass:"width100"},[n("a-input-number",{attrs:{placeholder:"开始楼层",max:e.model.endFloor||void 0},on:{blur:function(t){return e.validaField("startEndFloor")}},model:{value:e.model.startFloor,callback:function(t){e.$set(e.model,"startFloor",t)},expression:"model.startFloor"}}),n("span",[e._v("~")]),n("a-input-number",{attrs:{placeholder:"结束楼层",min:e.model.startFloor||void 0},on:{blur:function(t){return e.validaField("startEndFloor")}},model:{value:e.model.endFloor,callback:function(t){e.$set(e.model,"endFloor",t)},expression:"model.endFloor"}})],1)],1),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"required"},[e._v("每层户数")])]),n("a-col",{attrs:{span:6,"data-prop":"floorHouseNum"}},[n("a-input-number",{staticClass:"width100",attrs:{placeholder:"请输入每层户数"},on:{change:function(){return e.inputDate=(new Date).getTime()}},model:{value:e.model.floorHouseNum,callback:function(t){e.$set(e.model,"floorHouseNum",t)},expression:"model.floorHouseNum"}})],1)],1)],1),n("house-list-table",{ref:"houseListTable",attrs:{"bld-id":e.buildInfo.id,isAdd:!0,isFill:!0,"cell-info":{flag:!0},"keep-source":!0,"is-detail":!1},scopedSlots:e._u([{key:"extraBtn",fn:function(){return[n("a-button",{attrs:{type:"primary"},on:{click:e.generatingHouse}},[e._v("生成房屋")])]},proxy:!0}])})],1)},r=[],i=n("eccd"),a=n("0fea"),s=n("c1df"),u=n.n(s),c=n("2b0e"),l=n("a87b");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function x(){}var k={};c(k,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I($([])));C&&C!==n&&o.call(C,a)&&(k=C);var _=x.prototype=b.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=h(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==d(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=p;return function(i,a){if(r===y)throw Error("Generator is already running");if(r===v){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===g)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=y;var c=h(t,n,o);if("normal"===c.type){if(r=o.done?v:m,c.arg===g)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=v,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=x,r(_,"constructor",{value:x,configurable:!0}),r(x,"constructor",{value:w,configurable:!0}),w.displayName=c(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),g}},t}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){y(i,o,r,a,s,"next",e)}function s(e){y(i,o,r,a,s,"throw",e)}a(void 0)}))}}var g={name:"FillHouseQueryModal",components:{HouseListTable:l["default"],JDDictSelectTag:i["default"]},props:{buildInfo:{type:Object,default:function(){}},regionState:{type:String,default:""}},data:function(){return{visible:!1,loading:!1,labelCol:{span:0},wrapperCol:{span:24},model:{},cellList:[],inputDate:(new Date).getTime(),url:{houseInfoChange:"/base/rHouseInfo/houseInfoChange",getRegionByPid:"/base/rtRegion/getRegionByPid"}}},computed:{modelRules:function(){var e=this;return{startEndFloor:[{validator:function(t,n,o){e.model.startFloor&&e.model.endFloor?0===e.model.startFloor||0===e.model.endFloor?o("楼层号不能为0！"):o():o("请输入起止楼层！")}}],floorHouseNum:[{required:!0,message:"请输入每层户数！",type:"number"}]}}},methods:{open:function(e){var t=e.flag;t&&this.initCellList(),this.visible=t},initCellList:function(){var e=this;Object(a["e"])(this.url.getRegionByPid,{pid:this.buildInfo.id}).then((function(t){t&&t.success&&(e.cellList=t.result.filter((function(e){return e.name})))}))},modalOk:function(){var e=this,t=this;this.$refs.houseListTable.validaTable().then((function(n){if(n)t.loading=!1;else{var o=e.$refs.houseListTable.getTableData(),r={newHouseList:o,changeReason:"填充房屋",fileIdList:[],oldHouseList:[]};t.loading=!0,Object(a["j"])(e.url.houseInfoChange,r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.loading=!1,t.open({flag:!1})}))}}))},validaField:function(e){this.$refs.form.validaFields([e])},getHouseArrByHouseUseAndFloor:function(){var e=v(f().mark((function e(){var t,n,o,r,i,s,u,c,l,d,p,m,y,v,g,b;return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=this.model,n=t.startFloor,o=t.endFloor,r=t.houseUse,i=[],s=0;s<=o-n;s++)i.push(s+n);return u=[],e.prev=4,e.next=7,Object(a["e"])("/view/floorViews/queryHouseView",{buildId:this.buildInfo.id,noAccState:this.isDeposit?"9":""});case 7:c=e.sent,c.success&&c.result?(l=c.result.houseTypeList.find((function(e){return e.type===r})),u=l&&l.houseArr||[]):u=[],e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),u=[];case 14:d={},p=h(u);try{for(p.s();!(m=p.n()).done;){y=m.value,v=h(i);try{for(v.s();!(g=v.n()).done;)b=g.value,y.floor==b&&(d[b]?d[b]["houseArr"].push(y):d[b]={floor:b,houseArr:[y]})}catch(f){v.e(f)}finally{v.f()}}}catch(f){p.e(f)}finally{p.f()}return e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),generatingHouse:function(){var e=v(f().mark((function e(){var t,n,o,r,i,a,s,u,c,l,d,h,p,m,y,v,g;return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],n=this.$refs.form.validaRowMsg(this.$refs.formRow),!n.valida){e.next=14;break}for(o=this.model,r=o.startFloor,i=o.endFloor,a=o.floorHouseNum,s=[],u=0;u<=i-r;u++)s.push(u+r);return e.next=8,this.getHouseArrByHouseUseAndFloor();case 8:for(c=e.sent,l=0,d=s;l<d.length;l++)if(h=d[l],c[h]){if(p=Number(a)-c[h].houseArr.length,p>0)for(m=1;m<=p;m++)y=this.getHouseInfoByHouseNum({floorNo:h,houseUse:this.model.houseUse,houseNum:m+""}),t.push(y)}else for(v=1;v<=Number(a);v++)g=this.getHouseInfoByHouseNum({floorNo:h,houseUse:this.model.houseUse,houseNum:v+""}),t.push(g);this.$refs.houseListTable.loadTableData(JSON.parse(JSON.stringify(t)));case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getHouseInfoByHouseNum:function(e){var t=e.houseNum,n=void 0===t?"":t,o=e.floorNo,r=e.houseUse,i=e.struArea,a=void 0===i?"":i,s=this,l=s.buildInfo,d=l.address,f=l.buildName,h=l.type,p=l.bank,m=s.model.unitId,y=c["default"].ls.get("Login_Userinfo"),v=n?"".concat(o).concat((n+"").padStart(2,"0")):"",g=o?o+"层":"";return{recDate:u()().format("YYYY-MM-DD HH:mm:ss"),zoneCode:y.sysOrgCode,zoneCode_dictText:y.orgCodeText,state:s.regionState,houseNum:n,buildType:h,houseUse:r,struArea:a,totalPrice:0,perPrice:0,bankCode:p,address:d+f+(o?o+"层":"")+v+(v?"室":""),buildAddress:d,buildName:f,accState:"",houseAttr:"",psnInfoList:[],name:n?v+"室":"",sysOrgCode:y.sysOrgCode,floorNo:o,floorName:g,code:v,depMode:"",baseType:"4",psnName:"",liftFlag:"",realArea:0,busNo:"",pid:m}}}},b=g,w=(n("371b"),n("2877")),x=Object(w["a"])(b,o,r,!1,null,"2b8fd7c0",null);t["default"]=x.exports},"6e989":function(e,t,n){},7411:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{ref:"modal",attrs:{"z-index":1e3,title:"业主维护撤销",position:{top:10,left:"center"},width:"80vw",height:"90vh"},on:{close:e.closeFun}},[n("content-view",{attrs:{title:"业主信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("owner-info-table",{ref:"oldOwner",attrs:{isDetail:!0,delOwner:e.delOwner},on:{quashOwner:e.quashOwner}})],1)],1)},r=[],i=n("dc9a"),a=n("0fea"),s=n("92d2"),u={components:{OwnerInfoTable:s["default"],ContentView:i["default"]},data:function(){return{psnInfoList:[],operateFlag:!1,delOwner:!0,url:{delHouseAndPsn:"view/floorViews/delHouseAndPsn"}}},methods:{closeFun:function(){this.$emit("close")},initData:function(e){var t=this;Object(a["e"])("/view/floorViews/queryHouseListById",{houseId:e.id}).then((function(e){e.result.depStandard=e.result.depStandard||"0.00",t.formInline=e.result,t.psnInfoList=e.result.psnInfoList,"0"==t.formInline.houseState&&"1"==t.formInline.accState||(t.operateFlag=!0),t.$refs.modal.open(),t.$nextTick((function(){t.$refs.oldOwner.initData(!1,t.psnInfoList)}))}))},quashOwner:function(e){var t=this;Object(a["a"])(this.url.delHouseAndPsn,{houseId:this.formInline.id,psnId:e.id}).then((function(e){e&&t.$message.success("撤销成功")}))}}},c=u,l=n("2877"),d=Object(l["a"])(c,o,r,!1,null,null,null);t["default"]=d.exports},"7c30":function(e,t,n){},"7e4d":function(e,t,n){},"7f45c":function(e,t,n){"use strict";n("6e989")},"8af8":function(e,t,n){"use strict";n("5798")},"906c":function(e,t,n){"use strict";n("9f84")},"975d":function(e,t,n){},"9e62":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"main",attrs:{bordered:!1}},[e.showHeader?n("div",{staticClass:"floorHeader"},[n("a-button",{staticClass:"headerExtra",attrs:{icon:"rollback"},on:{click:function(t){return e.$emit("back")}}},[e._v("返回")]),n("div",{staticClass:"floorHeaderBaseInfo"},[e.IsShow?e._e():n("span",{staticClass:"header_bldName"},[e._v(e._s(e.regionName)+"—"+e._s(e.bldName))]),e.IsShow?n("j-dict-region-list-select",{ref:"regionSelect",staticClass:"regionName",attrs:{customParams:{},size:"large",hasBld:e.hasBld},on:{select:e.handleRegionSelect},model:{value:e.cellCode,callback:function(t){e.cellCode=t},expression:"cellCode"}}):e._e(),e.IsShow&&e.buildArr&&e.buildArr.length>0?n("a-select",{ref:"buildInfoSelect",staticClass:"buildName",attrs:{size:"large",dropdownMatchSelectWidth:!1},on:{change:function(t){return e.handleBuildChange(t)}},model:{value:e.buildChangeValue,callback:function(t){e.buildChangeValue=t},expression:"buildChangeValue"}},e._l(e.buildArr,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id,label:t.buildName,data:t}},[e._v("\n          "+e._s(t.buildName)+"\n        ")])})),1):e._e()],1)],1):e._e(),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"floorViews",style:{gap:e.leftInfoShow?"8px":"0"}},[n("div",{staticClass:"wrap-left",class:{isHidden:!e.leftInfoShow}},[n("div",{staticClass:"wrap-left-top"},[n("a-button",{on:{click:function(t){return e.buildCheck()}}},[e._v("楼盘补齐")]),n("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择房屋用途"},model:{value:e.modelFlag,callback:function(t){e.modelFlag=t},expression:"modelFlag"}},[n("a-select-option",{attrs:{value:"1"}},[e._v("所有用途")]),n("a-select-option",{attrs:{value:"2"}},[e._v("住宅楼")]),n("a-select-option",{attrs:{value:"3"}},[e._v("非住宅楼")])],1)],1),n("div",{staticClass:"left-top-content"},[n("div",{staticClass:"content-list"},[n("div",{staticClass:"huShu-title"},[e._v(e._s(e.houseNumsTitle))]),n("div",{staticClass:"content-huShu",staticStyle:{"--borderColor":"#548af8"}},[n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",[e._v(e._s(e.unPaidHouseNums))]),n("p",[e._v("未交")])]),n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",[e._v(e._s(e.paidHouseNums))]),n("p",[e._v("已交")])]),n("div",[n("p",[e._v(e._s(e.houseNumsCount))]),n("p",[e._v("总户数")])])])]),n("div",{staticClass:"content-list"},[n("div",{staticClass:"huShu-title"},[e._v("面积 (m²)")]),n("div",{staticClass:"content-huShu",staticStyle:{"--borderColor":"#5ad7a5"}},[n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",{staticStyle:{color:"#5ad7a5"}},[e._v(e._s(e.unPaidArea))]),n("p",[e._v("未交")])]),n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",{staticStyle:{color:"#5ad7a5"}},[e._v(e._s(e.paidArea))]),n("p",[e._v("已交")])]),n("div",[n("p",{staticStyle:{color:"#5ad7a5"}},[e._v(e._s(e.areaCount))]),n("p",[e._v("总面积")])])])]),n("div",{staticClass:"content-list"},[n("div",{staticClass:"huShu-title"},[e._v("金额 (元)")]),n("div",{staticClass:"content-huShu",staticStyle:{"--borderColor":"#ff99c3"}},[n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",{staticStyle:{color:"#ff99c3"}},[e._v(e._s(e.unPaidMoney))]),n("p",[e._v("未交")])]),n("div",{staticStyle:{"border-right":"2px solid #ccc"}},[n("p",{staticStyle:{color:"#ff99c3"}},[e._v(e._s(e.paidMoney))]),n("p",[e._v("已交")])]),n("div",[n("p",{staticStyle:{color:"#ff99c3"}},[e._v(e._s(e.moneyCount))]),n("p",[e._v("总余额")])])])]),n("div",{staticClass:"content-list"},[n("div",{staticClass:"huShu-title"},[e._v("不足30%")]),n("div",{staticClass:"content-huShu",staticStyle:{"--borderColor":"#555555"}},[n("div",{staticClass:"list-buZu",staticStyle:{"border-right":"2px solid #ccc"}},[n("p",{staticStyle:{color:"#555555"}},[e._v(e._s(e.dueHouseNums))]),n("p",[e._v("总户数 (户)")])]),n("div",{staticClass:"list-buZu"},[n("p",{staticStyle:{color:"#555555"}},[e._v(e._s(e.dueArea))]),n("p",[e._v("总面积 (m²)")])])])])])]),n("div",{staticClass:"wrap-right",style:e.leftInfoShow?"":"width:100%;max-width:unset"},[e.hideData?e._e():[0===e.activeMode?n("storeroom-house-view",{ref:"storeHouseView",staticClass:"right-top",staticStyle:{"margin-left":"-6px"},attrs:{"is-detail":e.isDetail,buildId:e.buildChangeValue,houseChecks:e.houseChecks,queryParam:e.queryParam,regionCode:e.cellCode,isShowCheckbox:e.isShowCheckbox,depositType:e.depositType,hidenBaseData:!e.leftInfoShow,isDeposit:e.isDeposit},on:{"update:houseChecks":function(t){e.houseChecks=t},"update:house-checks":function(t){e.houseChecks=t},loadStatus:e.updateLoadingStatus,batchEditOwner:e.batchEditOwner,batchDelOwner:e.batchDelOwner,batchDelHouse:e.batchDelHouse,handleImportExcel:e.handleImportExcel,exportHouseInfo:e.exportHouseInfo},scopedSlots:e._u([{key:"leftAction",fn:function(){return[n("div",{ref:"leftAction",staticClass:"top-float"},[n("div",{staticClass:"top-tle-show",on:{click:e.ShowHide}},[e.leftInfoShow?n("a-icon",{attrs:{type:"menu-fold"}}):n("a-tooltip",{attrs:{placement:"bottom",title:"点击可查看自然幢信息"}},[n("a-icon",{attrs:{type:"menu-unfold"}})],1)],1),e.modeSimplify?e._e():n("div",{staticClass:"top-switch"},[n("a-button",{staticClass:"radioButton",class:{active:0===e.activeMode},on:{click:function(t){return e.tabShow(0)}}},[e._v("视图模式\n                ")]),n("a-button",{staticClass:"radioButton",class:{active:1===e.activeMode},on:{click:function(t){return e.tabShow(1)}}},[e._v("列表模式\n                ")])],1),e.modeSimplify?n("div",{staticClass:"top-switch"},[n("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[n("a-menu",[n("a-menu-item",{key:"1"},[n("a-button",{staticClass:"radioButton",class:{active:0===e.activeMode},on:{click:function(t){return e.tabShow(0)}}},[e._v("视图模式\n                        ")])],1),n("a-menu-item",{key:"2"},[n("a-button",{staticClass:"radioButton",class:{active:1===e.activeMode},on:{click:function(t){return e.tabShow(1)}}},[e._v("列表模式\n                        ")])],1)],1)]},proxy:!0}],null,!1,3925362066)},[n("a-button",{staticClass:"radioButton active"},[n("span",[e._v(e._s(e.changeTitle)),n("a-icon",{attrs:{type:"caret-down"}})],1)])],1)],1):e._e()])]},proxy:!0}],null,!1,2434644290)}):1===e.activeMode?n("floor-view-table",{ref:"floorViewTable",staticClass:"right-top",attrs:{"is-detail":e.isDetail&&("0"!=this.bldState||"9"!=this.bldState),buildId:e.buildChangeValue,houseChecks:e.houseChecks,regionCode:e.cellCode,queryParams:e.queryParam,depositType:e.depositType,hidenBaseData:!e.leftInfoShow,isDeposit:e.isDeposit},on:{"update:houseChecks":function(t){e.houseChecks=t},"update:house-checks":function(t){e.houseChecks=t},loadStatus:e.updateLoadingStatus,batchEditOwner:e.batchEditOwner,batchDelOwner:e.batchDelOwner,batchDelHouse:e.batchDelHouse,handleImportExcel:e.handleImportExcel,exportHouseInfo:e.exportHouseInfo},scopedSlots:e._u([{key:"leftAction",fn:function(){return[n("div",{ref:"leftAction",staticClass:"top-float",staticStyle:{"padding-bottom":"0"}},[n("div",{staticClass:"top-tle-show",on:{click:e.ShowHide}},[e.leftInfoShow?n("a-icon",{attrs:{type:"menu-fold"}}):n("a-tooltip",{attrs:{placement:"bottom",title:"点击可查看自然幢信息"}},[n("a-icon",{attrs:{type:"menu-unfold"}})],1)],1),e.modeSimplify?e._e():n("div",{staticClass:"top-switch"},[n("a-button",{staticClass:"radioButton",class:{active:0===e.activeMode},on:{click:function(t){return e.tabShow(0)}}},[e._v("视图模式\n                ")]),n("a-button",{staticClass:"radioButton",class:{active:1===e.activeMode},on:{click:function(t){return e.tabShow(1)}}},[e._v("列表模式\n                ")])],1),e.modeSimplify?n("div",{staticClass:"top-switch"},[n("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[n("a-menu",[n("a-menu-item",{key:"1"},[n("a-button",{staticClass:"radioButton",class:{active:0===e.activeMode},on:{click:function(t){return e.tabShow(0)}}},[e._v("视图模式\n                        ")])],1),n("a-menu-item",{key:"2"},[n("a-button",{staticClass:"radioButton",class:{active:1===e.activeMode},on:{click:function(t){return e.tabShow(1)}}},[e._v("列表模式\n                        ")])],1)],1)]},proxy:!0}],null,!1,3925362066)},[n("a-button",{staticClass:"radioButton active"},[n("span",[e._v(e._s(e.changeTitle)),n("a-icon",{attrs:{type:"caret-down"}})],1)])],1)],1):e._e()])]},proxy:!0}],null,!1,388438148)}):e._e()]],2)]),n("batch-edit-owner-info",{ref:"batchEditOwner",attrs:{isDeposit:!!e.depositType},on:{save:e.refresh}}),n("add-housing-modal",{ref:"addHousingModalRef",on:{ok:e.addHouseOk}}),n("fill-house-query-modal",{ref:"fillHouseQueryModal",attrs:{regionState:e.regionState,buildInfo:e.queryParam},on:{ok:e.addHouseOk}}),n("vxe-modal",{attrs:{loading:e.buildCheckLoading,title:"楼盘检查","show-footer":"",width:"900"},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:"primary",loading:e.buildCheckLoading},on:{click:e.confirmCheck}},[e._v("确认")])]},proxy:!0}]),model:{value:e.buildCheckVisible,callback:function(t){e.buildCheckVisible=t},expression:"buildCheckVisible"}},[n("a-row",{staticClass:"houseInfo",staticStyle:{"margin-bottom":"10px"}},[n("a-col",{attrs:{span:4}},[n("span",[e._v("是否检查1层")])]),n("a-col",{attrs:{span:4}},[n("a-radio-group",{model:{value:e.ifCheckFirstFloor,callback:function(t){e.ifCheckFirstFloor=t},expression:"ifCheckFirstFloor"}},[n("a-radio",{attrs:{value:!0}},[e._v("是")]),n("a-radio",{attrs:{value:!1}},[e._v("否")])],1)],1),n("a-col",{attrs:{span:4}},[n("span",[e._v("是否检查地下室")])]),n("a-col",{attrs:{span:4}},[n("a-radio-group",{model:{value:e.ifCheckBasement,callback:function(t){e.ifCheckBasement=t},expression:"ifCheckBasement"}},[n("a-radio",{attrs:{value:!0}},[e._v("是")]),n("a-radio",{attrs:{value:!1}},[e._v("否")])],1)],1),n("a-col",{attrs:{span:4}},[n("span",[e._v("\n          是否进行单元跳跃\n          "),n("a-tooltip",{attrs:{title:"例:假设每层两户，1单元1层开始为101,若跳跃则2单元1层为103，不跳跃则为101"}},[n("a-icon",{staticStyle:{color:"#faad14"},attrs:{type:"question-circle"}})],1)],1)]),n("a-col",{attrs:{span:4}},[n("a-radio-group",{model:{value:e.ifCellJump,callback:function(t){e.ifCellJump=t},expression:"ifCellJump"}},[n("a-radio",{attrs:{value:!0}},[e._v("是")]),n("a-radio",{attrs:{value:!1}},[e._v("否")])],1)],1)],1),n("content-view",{attrs:{headerStyle:{padding:"12px 0 12px 0"},bodyStyle:{padding:0},title:"配置单元的每层户数"}},[n("a-row",{staticClass:"houseInfo"},[e._l(e.cellMaxHouseNum,(function(t,o){return[n("a-col",{key:"label"+o,attrs:{span:4}},[n("span",[e._v(e._s(t.cellName)+"单元")])]),n("a-col",{key:"value"+o,attrs:{span:4}},[n("a-input-number",{attrs:{min:1,max:100},model:{value:t.maxHouseNum,callback:function(n){e.$set(t,"maxHouseNum",n)},expression:"item.maxHouseNum"}})],1)]}))],2)],1)],1)],1)},r=[],i=n("d8a5"),a=n("78ac"),s=n("c8f6"),u=n("3f45"),c=n("0fea"),l=n("eccd"),d=n("fdce"),f=n("2b0e"),h=n("9fb0"),p=n("4360"),m=n("c2f7"),y=n("4ec3"),v=n("3ed7"),g=n("dfe8"),b=n("5a0c"),w=n.n(b),x=n("5eba"),k=n("dc9a"),I=n("fdcf");function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x($([])));k&&k!==n&&o.call(k,a)&&(w=k);var I=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==C(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===y)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?m:h,c.arg===y)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=m,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(C(t)+" is not iterable")}return g.prototype=b,r(I,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(I),c(I,u,"Generator"),c(I,a,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function S(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){S(i,o,r,a,s,"next",e)}function s(e){S(i,o,r,a,s,"throw",e)}a(void 0)}))}}var D={name:"FloorViews",components:{FillHouseQueryModal:x["default"],AddHousingModal:g["default"],BatchEditOwnerInfo:m["default"],JModal:a["default"],floorViewTable:s["default"],StoreroomHouseView:u["default"],JDDictSelectTag:l["default"],JDictRegionListSelect:d["default"],ContentView:k["default"]},props:{regionName:{type:String,default:""},regionId:{type:String,default:""},depositType:{type:String,default:""},regionCode:{type:String,default:""},regionState:{type:String,default:""},bldId:{type:String,default:""},isDetail:{type:Boolean,default:!1},regionDisabled:{type:Boolean,default:!1},isShowCheckbox:{type:Boolean,default:!1},hasBld:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},isInit:{type:Boolean,default:!0},isDeposit:{type:Boolean,default:!1}},provide:function(){var e=this;return{buildState:function(){return e.bldState},floorViews:function(){return e}}},data:function(){return{EntUserBldgDepositModeMaint:!0,isAdmin:!1,buildCheckVisible:!1,cellMaxHouseNum:[],ifCheckBasement:!1,ifCheckFirstFloor:!0,ifCellJump:!1,IsShow:!0,internalRefresh:!1,formatterAmount:v["g"],default_shrink_status:"1",cellCode:this.regionCode,queryParam:{},houseChecks:[],activeMode:0,leftInfoShow:!0,naturalShow:!1,errorMsg:"",bldName:"",hideData:!0,buildArr:[],buildChangeValue:this.buildId,regionIds:"",url:{importExcelUrl:"/deposit/firstDeposit/importExcel",getNaturalBuild:"/view/floorViews/getNaturalBuild",batchDelHouse:"view/floorViews/batchDelHouse",batchDelHouseSure:"view/floorViews/batchDelHouseSure"},loading:!1,bldState:"0",customParams:{},minShow:!1,pageWidth:document.documentElement.clientWidth,changeTitle:"",font:f["default"].ls.get(h["w"]),modelFlag:"1",buildCheckLoading:!1}},computed:{windowWidth:function(){return document.documentElement.clientWidth},tokenHeader:function(){var e={"X-Access-Token":f["default"].ls.get(h["a"]),sourceName:f["default"].ls.get(h["A"]),redisIndex:f["default"].ls.get(h["x"])},t=f["default"].ls.get(h["C"]);return t&&(e["tenant-id"]=t),e},importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},modeSimplify:function(){return this.leftInfoShow,18==this.font?this.pageWidth<1900:this.pageWidth<1700},houseNumsTitle:function(){return"1"===this.modelFlag?"总户数(户)":"2"===this.modelFlag?"住宅户数(户)":"3"===this.modelFlag?"非住宅户数(户)":""},unPaidHouseNums:function(){try{if("1"===this.modelFlag)return this.queryParam.unPaidHouseNums||0;if("2"===this.modelFlag)return this.queryParam.unResidencePaidHouseNums||0;if("3"===this.modelFlag)return this.queryParam.unNotResidencePaidHouseNums||0}catch(e){}return 0},paidHouseNums:function(){try{if("1"===this.modelFlag)return this.queryParam.paidHouseNums||0;if("2"===this.modelFlag)return this.queryParam.residencePaidHouseNums||0;if("3"===this.modelFlag)return this.queryParam.notResidencePaidHouseNums||0}catch(e){}return 0},houseNumsCount:function(){try{if("1"===this.modelFlag)return this.queryParam.houseNumsCount||0;if("2"===this.modelFlag)return this.queryParam.residenceHouseNum||0;if("3"===this.modelFlag)return this.queryParam.notResidenceHouseNum||0}catch(e){}return 0},unPaidArea:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.unPaidArea,3);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residenceUnPaidArea,3);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidenceUnPaidArea,3)}catch(e){}return"0.000"},paidArea:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.paidArea,3);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residencePaidArea,3);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidencePaidArea,3)}catch(e){}return"0.000"},areaCount:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.areaCount,3);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residenceAreaCount,3);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidenceUnPaidArea,3)}catch(e){}return"0.000"},unPaidMoney:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.unPaidMoney);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residenceUnPaidMoney);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidenceUnPaidMoney)}catch(e){}return"0.00"},paidMoney:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.paidMoney);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residencePaidMoney);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidencePaidMoney)}catch(e){}return"0.00"},moneyCount:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.moneyCount);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residenceMoneyCount);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidenceMoneyCount)}catch(e){}return"0.00"},dueHouseNums:function(){try{if("1"===this.modelFlag)return this.queryParam.dueHouseNums||0;if("2"===this.modelFlag)return this.queryParam.residenceDueHouseNums||0;if("3"===this.modelFlag)return this.queryParam.notResidenceDueHouseNums||0}catch(e){}return 0},dueArea:function(){try{if("1"===this.modelFlag)return Object(v["g"])(this.queryParam.dueArea,3);if("2"===this.modelFlag)return Object(v["g"])(this.queryParam.residenceDueArea,3);if("3"===this.modelFlag)return Object(v["g"])(this.queryParam.notResidenceDueArea,3)}catch(e){}return"0.000"}},watch:{regionCode:function(e){this.cellCode=e},bld:function(e){this.buildChangeValue=e},watchWidth:{handler:function(e,t){this.smallShow=t<1860||e<1860},immediate:!0}},created:function(){var e=this;Object(i["e"])("EntUserBldgDepositModeMaint").then((function(t){e.EntUserBldgDepositModeMaint=0!=t})),Object(c["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.isAdmin=!0)})),this.regionIds=this.regionId,this.isInit&&this.initData(),this.tabShow(void 0)},mounted:function(){var e=this;window.onresize=function(){return function(){window.fullWidth=document.documentElement.clientWidth,e.pageWidth=window.fullWidth}()},Object(y["l"])("shrink_status").then((function(t){t.success?(e.default_shrink_status=t.result,e.leftInfoShow="1"===e.default_shrink_status):e.leftInfoShow="0"}))},methods:{WhetherThePermissionPasses:I["a"],updateLoadingStatus:function(e){this.loading=e},refresh:function(){var e=this;this.$nextTick((function(){0===e.activeMode?(e.$refs.storeHouseView.selectedHouse=[],e.$refs.storeHouseView.loadData(e.buildChangeValue)):1===e.activeMode&&(e.$refs.floorViewTable.selectedRows=[],e.$refs.floorViewTable.queryPage());var t=Object.assign({regionId:e.regionIds,depositType:e.depositType},e.customParams);e.regionIds=t.regionId,Object(c["e"])(e.url.getNaturalBuild,t).then((function(t){t.success&&(e.buildArr=t.result,e.queryParam=e.buildArr.find((function(t){return t.id===e.buildChangeValue})))}))}))},initData:function(e){var t=this;this.customParams=e,this.loading=!0;var n=Object.assign({regionId:this.regionIds,depositType:this.depositType},e);this.regionIds=n.regionId,Object(c["e"])(this.url.getNaturalBuild,n).then((function(e){if(!e.success)return t.$message.warning(e.message);t.buildArr=e.result,0!==t.buildArr.length?(t.hideData=!1,t.bldId&&t.showHeader?t.buildChangeValue=t.bldId:(t.buildChangeValue=t.buildArr[0].id,t.bldName=t.buildArr[0].buildName),t.handleBuildChange(t.buildChangeValue,t.activeMode)):(t.queryParam={},t.loading=!1),e.success&&e.result.length||(t.hideData=!0,t.buildChangeValue="",t.buildArr=[]),t.$emit("update:bldId",t.buildChangeValue)}))},handleBuildChange:function(){var e=T(_().mark((function e(t){var n,o,r=this,i=arguments;return _().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:this.activeMode,o=this,o.buildChangeValue=t,o.activeMode=3,o.$nextTick((function(){if(o.activeMode=n,o.queryParam=o.buildArr.find((function(e){return e.id===t})),!r.queryParam)return r.$message.error("无法找到当前楼盘：".concat(t)),void(o.loading=!1);o.bldState=r.queryParam.state,o.bldName=r.queryParam.buildName,o.naturalShow=!0,o.refresh()}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clickNaturalShow:function(){this.naturalShow=!this.naturalShow},ShowHide:function(){this.leftInfoShow=!this.leftInfoShow},tabShow:function(e){if(this.houseChecks=[],void 0===e)return this.changeTitle="视图模式",void this.$emit("changeType","view");0===e?(this.activeMode=0,this.refresh(),this.changeTitle="视图模式",this.$emit("changeType","view")):(this.activeMode=1,this.changeTitle="列表模式",this.$emit("changeType","table"))},getViewChangeIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"view";return"view"===e?this.$refs.storeHouseView.houseCheckIds:this.$refs.floorViewTable.selectedRowKeys},handleChange:function(e){},houseChange:function(e){},handleRegionSelect:function(e,t){this.regionIds=t.id,this.cellCode=t.code,this.$bus.$emit("regionNameChange",t),this.initData()},batchUpdatePsn:function(){},addHouse:function(){var e=this,t=e.queryParam,n=t.address,o=t.buildName,r=t.type,i=t.bank,a=f["default"].ls.get("Login_Userinfo"),s={floor:1,houseNum:"1",name:"101室",address:"".concat(n).concat(o,"101室"),houseAttr:"1",houseUse:"1",liftFlag:"1",struArea:"",depMode:""};try{s={recDate:w()().format("YYYY-MM-DD HH:mm:ss"),zoneCode:a.sysOrgCode,zoneCode_dictText:a.orgCodeText,state:e.regionState,houseNum:0,buildType:r,houseUse:"",struArea:"",totalPrice:0,perPrice:0,bankCode:i,address:n+o,buildAddress:n,buildName:o,accState:"",houseAttr:"",psnInfoList:[],name:"",sysOrgCode:a.sysOrgCode,floorNo:"",code:"",depMode:this.isAdmin||this.EntUserBldgDepositModeMaint?"":"02",baseType:"4",psnName:"",liftFlag:"",realArea:0,busNo:"",pid:""}}catch(u){}this.$refs.addHousingModalRef.open({flag:!0,defaultHouseInfo:s,bldId:this.buildChangeValue,houseList:[s]})},fillHouse:function(){this.$refs.fillHouseQueryModal.open({flag:!0})},addHouseOk:function(){this.tabShow(this.activeMode)},exportHouseInfo:function(){var e=this,t=this.regionName+"-"+this.bldName;Object(c["b"])("/deposit/firstDeposit/exportHouseInfo",{buildId:this.buildChangeValue}).then((function(n){if(n)if(0!=n.size)if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([n],{type:"application/vnd.ms-excel"}),t+".xls");else{var o=window.URL.createObjectURL(new Blob([n],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.style.display="none",r.href=o,r.setAttribute("download",t+".xls"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}else e.$message.warning("没有要导出的房屋数据");else e.$message.warning("文件下载失败")}))},handleImportExcel:function(e){var t=this,n=this.$createElement;if(this.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在导入，请稍等。。。"}),"done"===e.file.status)if(this.$refs.storeHouseView&&(this.$refs.storeHouseView.downLoading=!1),this.$refs.floorViewTable&&(this.$refs.floorViewTable.downLoading=!1),e.file.response.success){if(this.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),201===e.file.response.code){var o=e.file.response,r=o.message,i=o.result,a=i.msg,s=i.fileUrl,u=i.fileName,l=window._CONFIG["domianURL"]+s;this.$warning({title:r,content:n("div",[n("span",[a]),n("br"),n("span",["具体详情请"," ",n("a",{attrs:{href:l,target:"_blank",download:u}},["点击下载"])," "])])})}else this.$message.success(e.file.response.message||"".concat(e.file.name," 文件上传成功")),this.initData(),Object(y["l"])("amount_confirm").then((function(e){"0"!==e.result||Object(I["a"])("firstDeposit:request")?Object(c["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success||Object(I["a"])("firstDeposit:verify")||t.$bus.$emit("FirstDepositTabChange","1")})):t.$bus.$emit("FirstDepositTabChange","2")}));this.loadData()}else{this.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),this.errorMsg=e.file.response.message;var d=this.errorMsg.replaceAll("|","").split("；");this.errorMsg=this.errorMsg.replaceAll("|","\r\n");var m=this;this.$confirm({title:"错误信息",centered:!0,content:function(e){return e("div",{style:{maxHeight:"70vh",overflowY:"auto"}},d.map((function(t){return e("p",t)})))},type:"error",iconType:"exclamation-circle",okText:"下载",okType:"danger",onOk:function(){return m.aClick(),Promise.reject(new Error(""))}})}else if("error"===e.file.status)if(500===e.file.response.status){var v=e.file.response,g=f["default"].ls.get(h["a"]);g&&v.message.includes("Token失效")&&this.$error({title:"登录已过期",content:"很抱歉，登录已过期，请重新登录",okText:"重新登录",mask:!1,onOk:function(){p["a"].dispatch("Logout").then((function(){f["default"].ls.remove(h["a"]),window.location.reload()}))}})}else this.$message.error("文件上传失败: ".concat(e.file.msg," "))},aClick:function(){var e=document.createElement("a"),t=new Blob([this.errorMsg]);e.setAttribute("href",window.URL.createObjectURL(t)),e.setAttribute("download","导入错误信息"),e.click()},batchEditOwner:function(){if(!this.houseChecks||!this.houseChecks.length)return this.$message.warning("请选择至少一条房屋信息！");this.$refs.batchEditOwner.init(this.houseChecks)},batchDelOwner:function(){if(!this.houseChecks||!this.houseChecks.length)return this.$message.warning("请选择至少一条房屋信息！");var e=this;e.$confirm({title:"是否确认删除业主信息？",onOk:function(){e.batchQuashOwner(e.houseChecks)}})},batchQuashOwner:function(e){var t=this;e=e.join(","),Object(c["a"])(this.url.batchDelHouse,{houseIds:e}).then((function(e){e&&(t.$message.success("撤销成功"),t.refresh())}))},batchDelHouse:function(){if(!this.houseChecks||!this.houseChecks.length)return this.$message.warning("请选择至少一条房屋信息！");var e=this;e.$confirm({title:"是否确认删除房屋？",onOk:function(){e.batchQuashHouse(e.houseChecks)}})},batchQuashHouse:function(e){var t=this;e=e.join(","),Object(c["e"])(this.url.batchDelHouseSure,{houseIds:e,bldId:this.bldId}).then((function(e){e&&(t.$message.success("删除成功"),t.refresh())}))},confirmCheck:function(){var e=this;e.$confirm({title:"是否确认？",zIndex:3e3,onOk:function(){e.buildCheckLoading=!0,Object(c["j"])("/view/floorViews/buildingCheck",{buildId:e.buildChangeValue,cellMaxHouseNum:e.cellMaxHouseNum,ifCheckBasement:e.ifCheckBasement,ifCheckFirstFloor:e.ifCheckFirstFloor,ifCellJump:e.ifCellJump}).then((function(t){t.success&&(e.$message.success("检查成功"),e.buildCheckVisible=!1)})).finally((function(){e.buildCheckLoading=!1,e.tabShow(e.activeMode)}))}})},buildCheck:function(){var e=this;this.buildCheckVisible=!0,this.$refs.storeHouseView.houseList.forEach((function(t){"01"==t.type&&t.houseArr.forEach((function(t){var n={cellName:t.cellName,maxHouseNum:1};e.cellMaxHouseNum.some((function(e){return e.cellName==t.cellName}))||e.cellMaxHouseNum.push(n)}))}))}}},O=D,A=(n("834e9"),n("7f45c"),n("d38e"),n("2877")),E=Object(A["a"])(O,o,r,!1,null,"59d98e0a",null);t["default"]=E.exports},"9f84":function(e,t,n){},a66b:function(e,t,n){},b9bb:function(e,t,n){"use strict";n("ba6e")},ba6e:function(e,t,n){},bce3:function(e,t,n){"use strict";n("a66b")},c2f7:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{title:"批量维护业主信息",width:18==e.font?"98vw":"93vw","min-width":"1300px",zIndex:1e3,height:"80vh",loading:e.isLoading,transfer:"","min-height":"700px","show-footer":"",position:{top:"center",left:"center"}},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-space",[n("a-button",{on:{click:e.close}},[e._v("取消")]),n("a-button",{attrs:{loading:e.isClick,type:"primary"},on:{click:e.modalOk}},[e._v("确认")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"modelBody"},[n("div",{staticClass:"tableHeader"},[n("a-button",{attrs:{type:"primary"},on:{click:e.initialize}},[e._v("初始化")])],1),n("div",{ref:"tableDiv",staticClass:"tableDiv"},[n("vxe-table",{ref:"xTable",attrs:{border:"",resizable:"","auto-resize":"",height:"auto","tree-config":{},"edit-config":{trigger:"click",mode:"row",showIcon:!0,autoClear:!1,showAsterisk:!1},"edit-rules":e.editRules,"span-method":e.rowspanMethod,data:e.tableData},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.checkboxAll}},[n("vxe-table-column",{attrs:{type:"checkbox",width:"40px",align:"center"}}),n("vxe-table-column",{attrs:{minWidth:"190px","show-overflow":"tooltip",field:"address",title:"房屋位置"}}),n("vxe-table-column",{attrs:{width:"130px",align:"right",field:"struArea",title:"房屋面积",formatter:function(t){var n=t.cellValue;return e.formatterAmount(n)},"edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:o.houseDisabled||e.isDeposit,"format-due":"05",type:"text",isHideAddon:"",placeholder:"请输入房屋面积"},on:{change:function(t){return e.depCompute(o,r)}},model:{value:o.struArea,callback:function(t){e.$set(o,"struArea",t)},expression:"row.struArea"}})]}}])}),n("vxe-table-column",{attrs:{width:"130px",field:"depMode",title:"交存模式"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{disabled:o.houseDisabled||e.isDeposit,dictCode:"dep_mode"},on:{change:function(t){return e.depCompute(o)}},model:{value:o.depMode,callback:function(t){e.$set(o,"depMode",t)},expression:"row.depMode"}})]}}])}),n("vxe-table-column",{attrs:{width:"150px",field:"bankCode","edit-render":{type:"visible"},title:"承办银行"},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row;return[n("a-select",{staticClass:"width100",attrs:{"show-search":"","filter-option":e.filterOptionOfBank,dropdownMatchSelectWidth:!1},model:{value:o.bankCode,callback:function(t){e.$set(o,"bankCode",t)},expression:"row.bankCode"}},e._l(e.bankList,(function(t){return n("a-select-option",{key:t.code,attrs:{value:t.code,data:t}},[e._v("\n                  "+e._s(t.name)+"\n                ")])})),1)]}}])}),n("vxe-table-column",{attrs:{width:"120px",align:"right",field:"price",title:"房屋售价",formatter:function(t){var n=t.cellValue;return e.formatterAmount(n)},"edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("amount-input",{staticClass:"myInput",attrs:{type:"text",isHideAddon:"",placeholder:"请输入房屋售价"},on:{change:function(t){return e.depCompute(o,r)}},model:{value:o.price,callback:function(t){e.$set(o,"price",t)},expression:"row.price"}})]}}])}),n("vxe-table-column",{attrs:{width:"140px",field:"contNo",title:"合同号","edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"请输入合同号"},on:{input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.contNo,callback:function(t){e.$set(o,"contNo",t)},expression:"row.contNo"}})]}}])}),n("vxe-table-column",{attrs:{width:18==e.font?"185px":"160px",field:"buyDate",title:"购房日期","edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row;t.column;return[n("j-date",{attrs:{placeholder:"请选择购房日期"},model:{value:o.buyDate,callback:function(t){e.$set(o,"buyDate",t)},expression:"row.buyDate"}})]}}])}),n("vxe-table-column",{attrs:{field:"name",width:18==e.font?"150px":"140px",title:"业主姓名","edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"myInput",attrs:{type:"text",placeholder:"请输入业主姓名"},on:{input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.name,callback:function(t){e.$set(o,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}])}),n("vxe-table-column",{attrs:{field:"certType",title:"证件类型","min-width":"170px",align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{readOnly:"",dictCode:"cert_type"},model:{value:o.certType,callback:function(t){e.$set(o,"certType",t)},expression:"row.certType"}})]}},{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{dropdownMatchSelectWidth:!1,placeholder:"请选择证件类型",label:o.certType,dictCode:"cert_type"},on:{"update:label":function(t){return e.$set(o,"certType",t)},select:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.certType,callback:function(t){e.$set(o,"certType",t)},expression:"row.certType"}})]}}])}),n("vxe-table-column",{attrs:{field:"certNo",title:"证件号码","show-overflow":"tooltip","edit-render":{autofocus:"myInput",type:"visible"},width:18==e.font?"250px":"230px"},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("a-input",{staticClass:"myInput",attrs:{placeholder:"请输入证件号码"},on:{input:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},scopedSlots:e._u(["1"==o.certType?{key:"addonAfter",fn:function(){return[n("i-d-card-reading",{attrs:{"z-index":1,color:"#1890ff"},on:{readOk:function(t){return e.readIdCardCallBack(o,r,!0,t)},readErr:function(t){return e.readIdCardCallBack(o,r,!1,t)}}})]},proxy:!0}:null],null,!0),model:{value:o.certNo,callback:function(t){e.$set(o,"certNo",t)},expression:"row.certNo"}})]}}])}),n("vxe-table-column",{attrs:{field:"baseType",width:18==e.font?"140px":"120px",title:"业主类型",align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业主类型",readOnly:!0,dictCode:"owner_category"},model:{value:o.baseType,callback:function(t){e.$set(o,"baseType",t)},expression:"row.baseType"}})]}},{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业主类型",getPopupContainer:e.getPopupContainer,label:o.baseTypeName,dictCode:"owner_category"},on:{"update:label":function(t){return e.$set(o,"baseTypeName",t)},select:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.baseType,callback:function(t){e.$set(o,"baseType",t)},expression:"row.baseType"}})]}}])}),n("vxe-table-column",{attrs:{field:"phone",title:"联系电话",width:18==e.font?"160px":"130px",align:"center","edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row,r=t.column;return[n("vxe-input",{staticClass:"ownerInfoTablePhoneInput myInput",attrs:{placeholder:"请输入联系电话"},on:{change:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})},blur:function(t){return e.$refs.xTable.updateStatus({row:o,column:r})}},model:{value:o.phone,callback:function(t){e.$set(o,"phone",t)},expression:"row.phone"}})]}}])}),n("vxe-table-column",{attrs:{width:"150px",field:"dueAmount",title:"应交金额",formatter:function(t){var n=t.cellValue;return e.formatterAmount(n)}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:!0,type:"text",placeholder:"请输入应交金额"},model:{value:o.dueAmount,callback:function(t){e.$set(o,"dueAmount",t)},expression:"row.dueAmount"}})]}}])}),n("vxe-table-column",{attrs:{width:"150px",field:"depAmount",title:"实交金额",formatter:function(t){var n=t.cellValue;return e.formatterAmount(n)},"edit-render":{autofocus:"myInput",type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var o=t.row;t.column;return[n("amount-input",{staticClass:"myInput",attrs:{disabled:e.amountChange,type:"text",placeholder:"请输入实交金额"},on:{change:function(t){return e.depAmountChangeFun(o,t)}},model:{value:o.depAmount,callback:function(t){e.$set(o,"depAmount",t)},expression:"row.depAmount"}})]}}])}),n("vxe-table-column",{attrs:{title:"操作",fixed:"right",align:"center",width:80},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row,r=t.$rowIndex;return[n("a-space",{staticClass:"actionButtons"},[e.getIsLastByGroup(o)?n("a-icon",{staticStyle:{color:"#65c88d"},attrs:{type:"plus"},on:{click:function(t){return e.addOwnInfo(o,r)}}}):e._e(),n("a-icon",{attrs:{type:"delete"},on:{click:function(t){return e.deleteOwner(o,r)}}})],1)]}}])})],1)],1),n("j-modal",{attrs:{title:"初始化",switchFullscreen:"",visible:e.initializeVisible,width:"500px"},on:{cancel:e.initializeModalCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{attrs:{type:""},on:{click:e.initializeModalCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n            关闭\n          ")],1),n("a-button",{attrs:{type:"primary"},on:{click:e.saveInitialize}},[e._v("初始化")])]},proxy:!0}])},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{type:"flex"}},[n("a-col",{attrs:{span:5}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("实交金额")]),n("a-col",{attrs:{span:19,"data-prop":"modalDepAmount"}},[n("amount-input",{attrs:{placeholder:"请输入实交金额"},model:{value:e.modalDepAmount,callback:function(t){e.modalDepAmount=t},expression:"modalDepAmount"}})],1)],1)],1)],1)])},r=[],i=n("92d2"),a=n("0fea"),s=n("eccd"),u=n("3269"),c=n("d492"),l=n("3ed7"),d=n("4aae"),f=n("d8a5"),h=n("2b0e"),p=n("9fb0"),m=n("4ec3"),y=n("fdcf");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e){return k(e)||x(e)||w(e)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function x(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(e){if(Array.isArray(e))return I(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=D(e,"string");return"symbol"==v(t)?t:t+""}function D(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=v(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function O(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */O=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:T(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var k=Object.getPrototypeOf,I=k&&k(k($([])));I&&I!==n&&o.call(I,a)&&(x=I);var C=w.prototype=g.prototype=Object.create(x);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==v(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function T(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=D(s,o);if(u){if(u===y)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?m:h,c.arg===y)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=m,o.method="throw",o.arg=c.arg)}}}function D(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=w,r(C,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},_(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new S(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(C),c(C,u,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function A(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){A(i,o,r,a,s,"next",e)}function s(e){A(i,o,r,a,s,"throw",e)}a(void 0)}))}}var L={name:"BatchEditOwnerInfo",components:{IDCardReading:c["default"],OwnerInfoTable:i["default"],JDDictSelectTag:s["default"],AmountInput:d["default"],JDictBankListSelect:u["default"]},props:{isDeposit:{type:Boolean,default:!1}},data:function(){var e=function(e){var t,n=e.cellValue,o=e.row;return null!=n&&""!=n&&(t=Number(n)),"01"!=o["depMode"]||n&&""!==n?"01"==o["depMode"]&&t<=0?Promise.reject(new Error("房屋售价应大于0")):void 0:Promise.reject(new Error("请输入房屋售价"))},t=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请输入业主信息"))},n=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请选择证件类型"))},o=function(e){var t=e.cellValue;e.row;if(!t||""===t)return Promise.reject(new Error("请选择业主类型"))},r=function(e){var t=e.cellValue,n=e.row;if("01"!==n.depMode){if(!t||""===t)return Promise.reject(new Error("请输入房屋面积"));if(Number(t)<=0)return Promise.reject(new Error("房屋面积应大于0"))}},i=function(e){var t=e.cellValue,n=e.row;if("1"==n["certType"]&&(!t||!t.match(/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/)))return Promise.reject(new Error("请输入正确的身份证号码"))},s=function(e){var t=e.cellValue;return new Promise((function(e,n){if(!t||""===t)return n(new Error("请输入联系电话"));Object(a["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){if(!t.success)return n(new Error(t.result));e()}))}))},u={depMode:e,name:t,certType:n,certNo:i,baseType:o,phone:s,struArea:r},c={price:[{validator:e}],name:[{required:!0,validator:t}],certType:[{required:!0,message:"请选择证件类型",trigger:"change"},{validator:n,trigger:"change"}],certNo:[{required:!0,trigger:"change",message:"请输入证件号码"},{validator:i,trigger:"change"}],bankCode:[{required:!0,trigger:"change",message:"请选择承办银行"}],baseType:[{required:!0,trigger:"change",validator:o}],phone:[{required:!0,validator:s}],struArea:[{required:!0,validator:r}]};return{editRules:c,validaRuleMap:u,tableData:[],visible:!1,initializeVisible:!1,houseList:[],isLoading:!1,isScroll:!1,isRightScroll:!1,formatterAmount:l["g"],isClick:!1,amountChange:!1,url:{depositMaintainBatch:"/deposit/firstDeposit/depositMaintainBatch",getCompList:"/business/dBankCode/compList",queryRegionById:"/base/rtRegion/queryById",checkUserIsCorp:"/sys/sysDepart/checkUserIsCorp"},houseEdit:!1,depositHouseEdit:"",isCorp:!1,font:h["default"].ls.get(p["w"]),psnNoPhoneIsRequired:!0,initIndex:[],modalDepAmount:0,bankList:[]}},methods:{WhetherThePermissionPasses:y["a"],readIdCardCallBack:function(e,t,n,o){n?(this.$set(e,"certNo",o.idNum),this.$set(e,"name",o.name)):(this.$set(e,"certNo",""),this.$message.warning(o)),this.$refs.xTable.updateStatus({row:e,column:t})},init:function(e){var t=this;this.visible=!0,this.isLoading=!0,Object(a["e"])(this.url.getCompList,{attr:"1",size:999,current:1}).then((function(e){e.success?t.bankList=e.result.records:t.$message.warning(e.message)})),Object(m["l"])("deposit_check_switch").then((function(e){e&&"1"===e.result?(t.psnNoPhoneIsRequired=!1,t.editRules["certType"]=[],t.editRules["certNo"]=[],t.editRules["phone"]=[]):(t.psnNoPhoneIsRequired=!0,t.editRules["certType"]=[{required:!0,message:"请选择证件类型",trigger:"change"},{validator:t.validaRuleMap["certType"],trigger:"change"}],t.editRules["certNo"]=[{required:!0,trigger:"change",message:"请输入证件号码"},{validator:t.validaRuleMap["certNo"],trigger:"change"}],t.editRules["phone"]=[{required:!0,validator:t.validaRuleMap["phone"],trigger:"change"}])})),this.getOwnInfoList(e),this.handleHouseEdit(),this.getAmountChangeFlag()},filterOptionOfBank:function(e,t){return t.componentOptions.children[0].text.toString().indexOf(e.toString())>=0},handleHouseEdit:function(){var e=E(O().mark((function e(t){var n=this;return O().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["e"])("deposit_house_edit");case 2:this.depositHouseEdit=e.sent,Object(a["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success&&(n.isCorp=!0)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getOwnInfoList:function(e){var t=this,n=this,o=e.join(",");return Object(a["e"])("/view/floorViews/queryHouseListByIds",{houseIds:o}).then((function(e){return e.result.forEach((function(e){e.psnInfoList&&0!==e.psnInfoList.length||(e.psnInfoList=[{certType:"1",baseType:"1"}]),e.depAmount<=0&&(e.depAmount=e.dueAmount),e.depStandard&&e.dueAmount&&1===e.hisFlag||t.depCompute(e)})),n.houseList=e.result,n.getTableData(),e.result}))},depCompute:function(e,t){var n=this;this.$refs.xTable.updateStatus({row:e,column:t});var o=_(_({},e),{},{id:e.houseId});e.depStandard&&e.dueAmount&&1===e.hisFlag||Object(a["j"])("/deposit/firstDeposit/calculateDueAmount",o).then((function(t){t.success&&(n.$set(e,"dueAmount",t.result),n.$set(e,"depAmount",t.result),n.$set(e,"depStandard",Number(t.message).toFixed(2)),n.tableData.forEach((function(o){o.houseId==e.houseId&&(n.$set(o,"struArea",e.struArea),n.$set(o,"dueAmount",t.result),n.$set(o,"depAmount",t.result),n.$set(o,"depStandard",Number(t.message).toFixed(2)))})))}))},bankCodeChooseFun:function(e,t){var n=this;this.tableData.forEach((function(o){o.houseId==e.houseId&&n.$set(o,"bankCode",t)}))},depAmountChangeFun:function(e,t){var n=this;this.tableData.forEach((function(o){o.houseId==e.houseId&&n.$set(o,"depAmount",t)}))},getTableData:function(){var e=this,t=this,n=this.$refs.xTable,o=[];this.houseList.forEach((function(n){n.psnInfoList&&n.psnInfoList.length>0&&n.psnInfoList.forEach((function(r){var i=Object.assign(r,{houseId:n.id,address:n.address,depMode:n.depMode,price:n.price,contNo:n.contNo,buyDate:n.buyDate,houseUse:n.houseUse,liftFlag:n.liftFlag,struArea:n.struArea,bldType:n.bldType,bldAttr:n.bldAttr,bldCode:n.bldCode,regionCode:n.regionCode,sysOrgCode:n.sysOrgCode,depAmount:n.depAmount,dueAmount:n.dueAmount,zoneCode:n.zoneCode,depStandard:n.depStandard,bankCode:n.bankCode,hisFlag:n.hisFlag});e.isCorp&&t.depositHouseEdit&&("1"==t.depositHouseEdit||"2"==t.depositHouseEdit)?(i.houseDisabled=!0,"2"==t.depositHouseEdit&&n.houseEdit&&(i.houseDisabled=!1)):i.houseDisabled=!1,o.push(i)}))})),this.tableData=[],n.createRow(o).then((function(t){var n;(n=e.tableData).push.apply(n,g(t))})).catch((function(){e.$message.error("数据初始化失败！")})).finally((function(){e.isLoading=!1}))},scroll:function(e){this.isScroll=0!==e.target.scrollLeft},addOwnInfo:function(e,t){var n=this;this.$refs.xTable.clearValidate();var o=this.$refs.xTable;o.validate(e).then((function(){var r={houseId:e.houseId,address:e.address,depMode:e.depMode,price:e.price,contNo:e.contNo,baseType:"1",certType:"1"};o.createRow(r).then((function(o){n.tableData.splice(t+1,0,o),n.tableData.forEach((function(t){t.houseId==e.houseId&&(n.$set(t,"struArea",e.struArea),n.$set(t,"bankCode",e.bankCode))}))}))})).catch((function(){}))},deleteOwner:function(e,t){this.$refs.xTable.clearValidate();var n=this;function o(t){return e.name?t("div",["是否确认删除业主姓名为",t("span",{style:{color:"#faad14"}},e.name),"的业主信息？"]):"是否确认删除此条业主信息？"}n.$confirm({title:function(e){return o(e)},onOk:function(){n.tableData.splice(t,1),n.houseList.splice(t,1)}})},getIsLastByGroup:function(e){var t=this.$refs.xTable,n=t.getTableData(),o=n.tableData,r=[],i=-1;return o.forEach((function(t,n){t.houseId===e.houseId&&(e._XID===t._XID&&(i=n),r.push(t))})),-1!==i&&i>=r.length-1},validError:function(){var e=this.$refs.scrollDiv;this.$nextTick((function(){try{var t=e.querySelector(".col--valid-error"),n=e.getBoundingClientRect(),o=n.left,r=t.getBoundingClientRect(),i=r.left;e.scrollLeft=Math.abs(Math.abs(o-i)-280)}catch(a){}}))},modalOk:function(){var e=E(O().mark((function e(){var t,n,o=this;return O().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isClick=!0,t=this.$refs.xTable,n=this,n.isLoading=!0,t.validate(this.tableData).then((function(){n.isClick=!0,n.isLoading=!0;try{n.getPostParams(),n.houseList.forEach((function(e){"0"!==e.psnInfoList[0].price||"01"!==e.psnInfoList[0].depMode?(e.depMode=e.psnInfoList[0].depMode,e.price=e.psnInfoList[0].price,e.contNo=e.psnInfoList[0].contNo,e.isDeposit=n.isDeposit):n.$message.error("房屋售价不能为0")}))}catch(e){n.isClick=!1,n.isLoading=!1}Object(a["j"])(n.url.depositMaintainBatch,n.houseList).then((function(e){e&&e.success?(n.$message.success("保存成功！"),n.$emit("save"),o.close(),"0"===e.result?Object(y["a"])("firstDeposit:request")||n.$bus.$emit("FirstDepositTabChange","2"):Object(a["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success||Object(y["a"])("firstDeposit:verify")||n.$bus.$emit("FirstDepositTabChange","1")}))):o.$message.error(e.message)})).finally((function(){n.isClick=!1,n.isLoading=!1}))})).catch((function(){n.isClick=!1,n.isLoading=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPostParams:function(){var e=[].concat(this.tableData),t=this;t.houseList.map((function(t){return e.map((function(e){e.dueAmount&&t.id===e.houseId&&(t.dueAmount=e.dueAmount,t.depAmount=e.depAmount,t.depStandard=e.depStandard)})),t.psnInfoList=e.filter((function(e){return e.houseId===t.id})),t.bankCode=t.psnInfoList[0].bankCode,t.buyDate=t.psnInfoList[0].buyDate,t.struArea=t.psnInfoList[0].struArea,t}))},getPopupContainer:function(){return this.$refs.tableDiv},close:function(){this.tableData=[],this.$refs.xTable.clearValidate(),this.visible=!1},rowspanMethod:function(e){var t=e.row,n=e.$rowIndex,o=e.column,r=(e.visibleData,["address","depMode","price","contNo","buyDate","struArea","bankCode","depAmount","dueAmount"]),i=t.houseId;if(r.includes(o.property)){var a=this.tableData[n-1],s=this.tableData[n+1];if(a&&a.houseId===i)return{rowspan:0,colspan:0};var u=1;while(s&&s.houseId===i)s=this.tableData[++u+n];if(u>1)return{rowspan:u,colspan:1}}},checkboxChange:function(e){if(e.checked)this.initIndex.push(e.$rowIndex);else for(var t=0;t<this.initIndex.length;t++)this.initIndex[t]==e.$rowIndex&&this.initIndex.splice(t,1)},checkboxAll:function(e){for(var t=[],n=0;n<e.selection.length;n++)t.push(n);this.initIndex=t},initialize:function(){if(0===this.initIndex.length)return this.$message.warning("请选择至少一条房屋信息！");this.modalDepAmount=0,this.initializeVisible=!0},initializeModalCancel:function(){this.initializeVisible=!1},saveInitialize:function(){for(var e=this.initIndex,t=0;t<e.length;t++)this.tableData[e[t]].depAmount=this.modalDepAmount;this.initializeModalCancel()},getAmountChangeFlag:function(){var e=this,t=Object(m["F"])("charge_is_edit_depAmount");t&&t.length>0?this.amountChange="0"===t.result:Object(m["l"])("charge_is_edit_depAmount",null).then((function(t){t.success&&(e.amountChange="0"===t.result)}))}}},$=L,N=(n("7c2a"),n("500f"),n("2877")),j=Object(N["a"])($,o,r,!1,null,"e300ccc0",null);t["default"]=j.exports},c35c:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{"body-style":{padding:"10px 0",height:"100%"},bordered:!1}},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"table-height":"auto","row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadTableData,tableColumn:e.columns,"header-align":"center"},scopedSlots:e._u([{key:"houseNum",fn:function(t){var o=t.row;t.text,t.name;return[n("span",{staticStyle:{color:"blue"}},[e._v(e._s(o.depositNum))]),e._v("/"),n("span",{staticStyle:{color:"red"}},[e._v(e._s(o.unDepositNum))]),e._v("/"+e._s(o.houseNum)+"\n      ")]}},{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[e.selectedRowKeys&&e.selectedRowKeys.length>0?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("\n                删除\n              ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作\n              "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1)]},proxy:!0}])})],1),n("HouseOwnerInfoModal",{ref:"infoModal",attrs:{queryParam:e.query}}),n("continue-deposit-modal",{ref:"continueModal",attrs:{queryParm:e.query}})],1)},r=[],i=(n("6eb7"),n("ac0d")),a=n("0fea"),s=n("0a5e"),u=n("c752"),c=n("f280"),l=n("6fa9"),d=n("2b0e"),f={name:"HouseBusiDetail",mixins:[i["b"],s["a"]],props:{buildId:{type:String,default:""},keyValue:{type:String,default:""},depositType:{type:String,default:""},queryParams:{type:Object,default:function(){return{}}}},components:{HouseOwnerInfoModal:u["default"],ContinueDepositModal:c["default"],MESSuperQuery:l["default"]},data:function(){var e=this;return{description:"业主初交管理页面",modalTitle:null,modalType:1,modalText:"是否进行备案",revokeTitle:"撤销备案",visible:!1,visibleRevoke:!1,confirmLoading:!1,recordId:null,revokeReason:null,settingColumns:[],modalFlag:!0,activeKey:"0",loading:!1,selectedKeys:[],menuData:[],primaryMenuData:[],searchValue:"",windowHeight:document.documentElement.clientHeight,columns:[{title:"业主姓名",align:"center",field:"householderName",width:120},{title:"交易时间",align:"right",field:"trdDate",width:120},{title:"交易时间",align:"right",field:"houseArea",width:120},{title:"房屋用途",align:"center",field:"houseUse_dictText",width:120},{title:"交存模式",width:80,align:"center",field:"depMode_dictText"},{title:"账户状态",align:"center",field:"accState_dictText",width:100},{title:"操作",field:"action",align:"center",width:120,fixed:"right",slot:!0}],query:this.queryParams,loadTableData:function(t){return Object(a["e"])("/view/floorViews/queryHouseList",Object.assign(t,e.query)).then((function(e){return e.result}))},dictOptions:{},queryObj:[],fileName:""}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},rowSelection:function(){var e=this;return{onChange:function(t,n){e.onSelectChange(t,n)},getCheckboxProps:function(){return{props:{}}}}}},methods:{customRow:function(e){var t=this;return{on:{dblclick:function(){t.handleDetail(e)}}}},onColSettingsChange:function(e){var t=this,n=this.$route.name+":colsettings";d["default"].ls.set(n,e,6048e5),this.settingColumns=e,this.columns=this.defColumns.filter((function(e){return"rowIndex"===e.key||"action"===e.field||t.settingColumns.includes(e.field)}))},tabChange:function(e){this.activeKey=e},handleDeposit:function(e){this.$refs.infoModal.initData(e)},handleEdit:function(e){this.$refs.continueModal.initData(e)}},created:function(){this.query.id=this.buildId}},h=f,p=(n("e2cd"),n("bce3"),n("2877")),m=Object(p["a"])(h,o,r,!1,null,"12bac4ab",null);t["default"]=m.exports},c752:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{height:"div"===e.showType?"100%":""}},["modal"===e.showType?n("j-modal",{attrs:{switchFullscreen:!0,title:"房屋业主信息维护",top:8,"body-style":{padding:0},visible:e.visible,"z-index":e.index,loading:e.loading,"load-class":"houseOwnerInfoModalLoad",width:"1140px"},on:{ok:function(t){return e.handleOk(!1)},cancel:e.handleCancel}},[n("template",{slot:"footer"},[n("div",{staticStyle:{"text-align":"center"}},[e.operateFlag||e.isDetail||"2"===e.activeKey||"2"!==e.amountConfirm?e._e():n("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleOk(!0)}}},[n("a-icon",{attrs:{type:"check-circle"}}),e._v("\n          一键交存\n        ")],1),e.operateFlag||e.isDetail||"2"===e.activeKey?e._e():n("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleOk(!1)}}},[n("a-icon",{attrs:{type:"check-circle"}}),e._v("\n          保存\n        ")],1),n("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[n("a-icon",{attrs:{type:"close-circle"}}),e._v("\n          取消\n        ")],1)],1)]),n("a-tabs",{ref:"tabsContent",staticClass:"tabsContent",attrs:{activeKey:e.activeKey},on:{change:e.changeModalTab}},[n("a-tab-pane",{key:"1",attrs:{"force-render":!0,tab:"房屋业主信息"}},[n("div",{staticClass:"infoBodyContent"},[n("content-view",{attrs:{title:"房屋信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("house-info-comp",{ref:"hic",attrs:{tag:e.tag,showDepAmount:!0,disabled:e.operateFlag||e.isDetail||e.houseEdit||e.isDeposit,"is-can-edit-cont":e.operateFlag||e.isDetail||e.houseEdit,isShowHeader:!1},on:{updateInfoByContractNo:e.updateInfoByContractNo,update:e.updateHouseInfo}})],1),n("content-view",{attrs:{title:"业主信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}},scopedSlots:e._u([e.operateFlag||e.isDetail?null:{key:"extra",fn:function(){return[n("a-checkbox",{model:{value:e.isSyncUserInfo,callback:function(t){e.isSyncUserInfo=t},expression:"isSyncUserInfo"}},[e._v("是否同步业主信息")]),n("a-button",{attrs:{type:"primary"},on:{click:e.rollbaceUserInfo}},[n("a-icon",{attrs:{type:"rollback"}}),e._v(" 重置业主\n              ")],1)]},proxy:!0}],null,!0)},[n("owner-info-table",{ref:"oldOwner",attrs:{isSync:e.isSyncUserInfo,isDetail:e.operateFlag||e.isDetail,isDepisit:!0}})],1),n("type-attachment-upload",{ref:"fileUpload",attrs:{"is-detail":e.operateFlag||e.isDetail,"header-title":"图档信息",busiType:"00",busiTypeDetail:"0001",busiNo:this.formInline.id,"body-style":{padding:"0"},"header-style":{padding:"12px 0"}},on:{change:e.getFileList}})],1)]),e.isAdmin||!e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM?n("a-tab-pane",{key:"2",attrs:{tab:"业务明细","force-render":!0}},[n("trading-record-table",{ref:"tradIngRecord",attrs:{zIndex:e.index+1}})],1):e._e()],1)],2):"div"===e.showType?n("div",{staticClass:"height-100"},[n("a-tabs",{ref:"tabsContent",staticClass:"tabsContent",attrs:{activeKey:e.activeKey},on:{change:e.changeModalTab}},[n("a-tab-pane",{key:"1",attrs:{"force-render":!0,tab:"房屋业主信息"}},[n("div",{staticClass:"infoBodyContent"},[n("content-view",{attrs:{title:"房屋信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("house-info-comp",{ref:"hic",attrs:{tag:e.tag,showDepAmount:!0,disabled:e.operateFlag||e.isDetail||e.houseEdit||e.isDeposit,isShowHeader:!1,"is-can-edit-cont":e.operateFlag||e.isDetail||e.houseEdit},on:{update:e.updateHouseInfo}})],1),n("content-view",{attrs:{title:"业主信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("owner-info-table",{ref:"oldOwner",attrs:{isDetail:e.operateFlag||e.isDetail}})],1),n("type-attachment-upload",{ref:"fileUpload",attrs:{"is-detail":e.operateFlag||e.isDetail,"header-title":"图档信息",busiType:"00",busiTypeDetail:"0001",busiNo:this.formInline.id,"body-style":{padding:"0"},"header-style":{padding:"12px 0"}},on:{change:e.getFileList}})],1)]),!e.tradIngRecordVisible||!e.isAdmin&&e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM?e._e():n("a-tab-pane",{key:"2",attrs:{tab:"业务明细","force-render":!0}},[n("trading-record-table",{ref:"tradIngRecord"})],1)],1)],1):e._e(),n("print-report-comp",{ref:"print"})],1)},r=[],i=n("0fea"),a=n("eccd"),s=n("9fbd"),u=n("dc9a"),c=n("8fc8"),l=n("0792"),d=n("92d2"),f=n("4aae"),h=n("9bed"),p=n("3269"),m=n("2b01"),y=n("d8a5"),v=n("2b2c"),g=n("4ec3"),b=n("fdcf");function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var k={};c(k,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I($([])));C&&C!==n&&o.call(C,a)&&(k=C);var _=b.prototype=v.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==w(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===y)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?m:h,c.arg===y)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=m,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(w(t)+" is not iterable")}return g.prototype=b,r(_,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function k(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){k(i,o,r,a,s,"next",e)}function s(e){k(i,o,r,a,s,"throw",e)}a(void 0)}))}}var C={name:"HouseOwnerInfoModal",mixins:[v["a"]],props:{queryParam:{type:Object,default:function(){return{}}},showType:{type:String,default:"modal"},isShowLoading:{type:Boolean,default:!0},isDetail:{type:Boolean,default:!1},index:{type:Number,default:1e3},isDeposit:{type:Boolean,default:!1},tag:{type:String,default:""}},provide:function(){var e=this;return{getContainer:function(){return e.$refs.tabsContent.$el}}},components:{JDictBankListSelect:p["default"],PrintReportComp:h["default"],ContentView:u["default"],JDDictSelectTag:a["default"],TypeAttachmentUpload:s["default"],TradingRecordTable:c["default"],OwnerInfoTable:d["default"],AmountInput:f["default"],HouseInfoComp:m["default"]},data:function(){var e=this,t=function(t,n,o){var r=e.formInline.depMode;if("01"===r){if(!e.formInline.price||""===e.formInline.price)return o("不能为空");if("0"===e.formInline.price)return o("不能为0")}};return{isAdmin:!1,HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM:!1,formInline:{},amountChange:!0,fileIdList:[],activeKey:"1",psnInfoList:[],rules:{houseName:[{required:!0,message:"不能为空",trigger:"blur"}],houseArea:[{required:!0,type:"number",message:"不能为空",trigger:"blur"},{pattern:l["a"].areaAmount,message:l["a"].areaAmountMsg,trigger:"blur"}],depAmount:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:l["a"].areaAmount,message:l["a"].areaAmountMsg,trigger:"blur"}],dueAmount:[{required:!0,message:"不能为空",trigger:"change"}],price:[{pattern:l["a"].areaAmount,message:l["a"].areaAmountMsg,trigger:"blur"},{validator:t}],depMode:[{required:!0,message:"请选择交存模式！",trigger:"blur"}]},form1:{},operateFlag:!1,houseEdit:!1,rules1:{name:[{required:!0,message:"不能为空",trigger:"change"}],certType:[{required:!0,message:"不能为空",trigger:"change"}],phone:[{required:!0,message:"不能为空",trigger:"change"},{validator:l["b"]}]},visible:!1,bankInfoOptions:[],loading:!1,url:{fastFirstDeposit:"/common/fastHanding/fastFirstDeposit",getHouseInfoDetail:"/common/fastHanding/getHouseInfoDetail",tjfxGetHouseInfoDetail:"/tjfx/getHouseInfoDetail",checkUserIsCorp:"/sys/sysDepart/checkUserIsCorp"},ShortcutOperationValue:"",tradIngRecordVisible:!0,isSyncUserInfo:!1,oldOwnList:[],amountConfirm:"1"}},methods:{WhetherThePermissionPasses:b["a"],updateInfoByContractNo:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.oldOwner.modelForm.formList=[];var n={certType:e.certtype,certNo:e.certno,baseType:"1",name:e.username,phone:e.phone};t.$refs.oldOwner.modelForm.formList.push(n)}))},cqUpdateOne:function(){},shortcutOperation:function(e,t){this.ShortcutOperationValue=e,this.formInline.busiTypeDetail="0001",this.handleOk(t)},initData:function(){var e=I(x().mark((function e(t,n,o){var r,a=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(g["l"])("amount_confirm").then((function(e){e.success&&(a.amountConfirm=e.result)})),"modal"===this.showType&&("/deposit/FirstDeposit"===this.$route.path?this.isSyncUserInfo=!0:this.isSyncUserInfo=!1),"ShortcutOperation"==this.ShortcutOperationValue&&(this.isDeposit=!0),e.next=5,Object(y["e"])("deposit_house_edit");case 5:r=e.sent;try{"modal"===this.showType&&this.$store.commit("SET_PAGE_LOAD_STATE",{state:!0}),n||(this.tradIngRecordVisible=n),Object(i["e"])("/view/floorViews/queryHouseListById",{houseId:t.id}).then((function(e){if(e.result.depStandard=e.result.depStandard||"0.00",a.formInline=e.result,a.psnInfoList=e.result.psnInfoList,a.psnInfoList.forEach((function(e){a.certTypeChange(e)})),!a.formInline.accCode)return a.$store.commit("SET_PAGE_LOAD_STATE",{state:!1}),void a.$message.error("当前房屋账户存在问题！");a.formInline.bldType=a.queryParam.type,a.formInline.bldAttr=a.queryParam.attr,"01"===a.formInline.depMode||a.formInline.price||(a.formInline.price="0"),a.formInline.depAmount<=0&&(a.formInline.depAmount=a.formInline.dueAmount),a.operateFlag=a.formInline.operFlag,a.$set(t,"operateFlag",a.operateFlag),"0"==a.formInline.houseState&&"1"==a.formInline.accState||(a.operateFlag=!0),o&&(a.operateFlag=!0),Object(i["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success&&r&&("1"!=r&&"2"!=r||(a.houseEdit=!0,"2"==r&&Object(i["e"])("/deposit/firstDeposit/checkHouseEdit",{houseId:t.id}).then((function(e){e.success&&Object(y["e"])("revoke_can_edit_house").then((function(e){a.houseEdit=!(!e||"0"!=e)}))}))))})),a.visible=!0,"modal"===a.showType&&(a.activeKey="1"),a.$nextTick((function(){a.$refs.fileUpload.initData(),a.oldOwnList=JSON.parse(JSON.stringify(a.psnInfoList)),a.$refs.oldOwner.initData(!1,a.psnInfoList),"modal"===a.showType&&a.$refs.oldOwner.$once("watch_formList_change",(function(){a.isSyncUserInfo=!0})),a.$refs.hic.initData(e.result.id,!t.deposit&&!a.checkHouseUseSpecial(t.houseUse)),a.$refs.tradIngRecord&&Object(i["e"])("tjfx"==a.tag?a.url.tjfxGetHouseInfoDetail:a.url.getHouseInfoDetail,{id:t.id}).then((function(e){e.success&&a.$nextTick((function(){a.$refs.tradIngRecord.initData(e.result),a.loading=!1}))})),a.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})}))})).catch((function(){a.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})}))}catch(s){this.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})}case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,o){return e.apply(this,arguments)}return t}(),rollbaceUserInfo:function(){this.isSyncUserInfo=!1,this.$refs.oldOwner.initData(!1,JSON.parse(JSON.stringify(this.oldOwnList)))},handleOk:function(){var e=I(x().mark((function e(t){var n,o,r,a,s,u,c=this;return x().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("2"===this.amountConfirm?this.formInline.depositFlag=t:this.formInline.depositFlag=!0,!(this.formInline.depAmount<=0&&"01"===this.$refs.hic.houseInfo.depMode)){e.next=4;break}return this.$message.error("房屋售价不能小于等于0！"),e.abrupt("return");case 4:if(!(this.$refs.hic.houseInfo.dueAmount<=0)){e.next=7;break}return this.$message.error("应交金额不能小于等于0！"),e.abrupt("return");case 7:if(n=this.$refs.hic.checkData(),n){e.next=12;break}return e.abrupt("return",!1);case 12:o=this.$refs.hic.houseInfo,this.formInline=Object.assign({},this.formInline,{name:o.name,address:o.address,bankCode:o.bankCode,struArea:o.struArea,houseAttr:o.houseAttr,houseUse:o.houseUse,price:o.price,contNo:o.contNo,buyDate:o.buyDate});case 14:return e.next=16,this.$refs.oldOwner.checkData();case 16:if(e.sent){e.next=18;break}return e.abrupt("return",!1);case 18:if(this.formInline.psnInfoList=this.psnInfoList,!(this.isSyncUserInfo&&this.formInline.psnInfoList.length<=0)){e.next=22;break}return this.$message.error("请维护业主信息！"),e.abrupt("return");case 22:if(r=this.formInline.psnInfoList,!(r.length>1)){e.next=37;break}a=0;case 25:if(!(a<r.length)){e.next=37;break}s=a+1;case 27:if(!(s<r.length)){e.next=34;break}if(r[a].name!==r[s].name||r[a].certType!==r[s].certType||r[a].certNo!==r[s].certNo){e.next=31;break}return this.$message.error("不允许添加相同的业主！"),e.abrupt("return");case 31:s++,e.next=27;break;case 34:a++,e.next=25;break;case 37:if(this.$refs.fileUpload.checkData()){e.next=39;break}return e.abrupt("return",!1);case 39:if(this.formInline.fileIdList=this.fileIdList,u="","ShortcutOperation"!=this.ShortcutOperationValue){e.next=48;break}if(this.formInline.bankCode){e.next=45;break}return this.$message.error("请选择承办银行！"),e.abrupt("return");case 45:u=this.url.fastFirstDeposit,e.next=49;break;case 48:u="/deposit/firstDeposit/depositMaintain";case 49:this.formInline.isDeposit=this.isDeposit,this.loading=!0,"ShortcutOperation"!==this.ShortcutOperationValue&&(this.formInline.isSyncUserInfo=this.isSyncUserInfo),Object(i["j"])(u,this.formInline).then((function(e){e.success?("ShortcutOperation"==c.ShortcutOperationValue?c.formInline.depositFlag?"2"===c.amountConfirm?(c.formInline.amountConfirm=c.amountConfirm,c.$bus.$emit("toBusiDealListBookkeeping_shortcut",c.formInline)):(c.$refs.print.type="window",c.$refs.print.print("deposit_owner",{busiNo:e.result}),c.$emit("refresh","交存","","00")):(c.$message.success("操作成功！"),c.$emit("refresh","交存","","00")):(c.$message.success("操作成功！"),c.visible=!1,"0"===e.result?c.isSyncUserInfo&&!Object(b["a"])("firstDeposit:request")&&c.$bus.$emit("FirstDepositTabChange","2"):"2"===e.result?c.formInline.depositFlag&&(c.formInline.amountConfirm=e.result,c.$bus.$emit("toBusiDealListBookkeeping",c.formInline)):Object(i["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success||c.isSyncUserInfo&&!Object(b["a"])("firstDeposit:verify")&&c.$bus.$emit("FirstDepositTabChange","1")}))),c.$emit("modalOk")):c.$message.warning(e.message)})).finally((function(){c.loading=!1}));case 53:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.visible=!1},changeModalTab:function(e){var t=this,n=this;this.activeKey=e,"2"===e&&(this.loading=!0,Object(i["e"])("tjfx"==n.tag?n.url.tjfxGetHouseInfoDetail:n.url.getHouseInfoDetail,{id:n.formInline.id}).then((function(e){e.success&&n.$nextTick((function(){n.$refs.tradIngRecord&&n.$refs.tradIngRecord.initData(e.result)}))})).finally((function(){t.loading=!1})))},editAmount:function(){this.amountChange=!1},areaChange:function(e){var t=this;"01"===this.formInline.depMode||this.formInline.price||(this.formInline.price="0"),Object(i["j"])("/deposit/firstDeposit/calculateDueAmount",this.formInline).then((function(e){e.success&&(t.formInline.dueAmount=e.result,t.formInline.depAmount=e.result,t.formInline.depStandard=Number(e.message).toFixed(2))}))},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},certTypeChange:function(e){this.$set(e,"rules",Object.assign({},this.rules1)),e.rules.certNo=[],"1"===e.certType?(e.rules.certNo.push({required:!0,message:"不能为空",trigger:"change"}),e.rules.certNo.push({pattern:l["a"].IDCard,message:"身份证号格式不正确",trigger:"blur"})):e.rules.certNo.push({required:!0,message:"不能为空",trigger:"change"})},updateHouseInfo:function(e){this.formInline=e}},mounted:function(){var e=this;Object(y["e"])("HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM").then((function(t){e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM="1"===t})),Object(i["e"])(this.url.checkUserIsCorp).then((function(t){t.success||(e.isAdmin=!0)})),this.$bus.$on("ownerSave",(function(t){e.psnInfoList=t}))}},_=function(e,t,n,o){""!==t&&void 0!==t||o(),e.bankCard.test(t)?o():o(e.bankCardMsg)},S=C,T=(n("2b6a"),n("8af8"),n("2877"));n.d(t,"validateBankCode",(function(){return _}));var D=Object(T["a"])(S,o,r,!1,null,"38bc9487",null);t["default"]=D.exports},c8f6:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{"body-style":{padding:"0",height:"100%"},bordered:!1}},[n("div",{ref:"tableDiv",staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"table-height":"auto","row-config":{height:120},toolbar:!0,"auto-resize":!1,bordered:"",stripe:!0,checkbox:e.checkbox,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadTableData,tableColumn:e.columns,"header-align":"center",checkboxConfig:e.checkboxConfig},on:{changeData:e.changeData},scopedSlots:e._u([{key:"houseNum",fn:function(t){var o=t.row;t.text,t.name;return[n("span",{staticStyle:{color:"blue"}},[e._v(e._s(o.depositNum))]),e._v("/"),n("span",{staticStyle:{color:"red"}},[e._v(e._s(o.unDepositNum))]),e._v("/"+e._s(o.houseNum)+"\n      ")]}},{key:"buttons",fn:function(){return[n("div",{ref:"tableButtonsBox",staticClass:"width-100 tableButtonsBox"},[e._t("leftAction"),n("a-input",{staticStyle:{flex:"1",width:"0"},attrs:{placeholder:"热搜项：房屋位置，建筑面积（m²），业主姓名等"},on:{pressEnter:e.handleQuery},model:{value:e.tableQueryText,callback:function(t){e.tableQueryText=t},expression:"tableQueryText"}}),n("a-button",{staticClass:"margin-0",attrs:{type:"primary",icon:"search",title:"查询"},on:{click:e.handleQuery}},[18==e.font&&e.pageWidth<1500?e._e():[e._v("查询")]],2),n("a-button",{staticClass:"margin-0",attrs:{icon:"redo",title:"重置"},on:{click:e.handleReset}},[18==e.font&&e.pageWidth<1500?e._e():[e._v("重置")]],2),e.checkbox&&!e.isDetail?["02"!==e.depositType?n("a-space",{attrs:{size:0}},[-1===e.$route.path.indexOf("deposit/ConDeposit")&&e.MenuIs?[!e.fileSimplifyFlag||e.isDetail?[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.selectYetPsnHouseIno}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("有业主\n                      ")],1),n("a-menu-item",{key:"2",on:{click:e.selectNotPsnHouseIno}},[n("a-icon",{attrs:{type:"disconnect"}}),e._v("无业主\n                      ")],1),n("a-menu-item",{key:"3",on:{click:e.clear}},[n("a-icon",{attrs:{type:"close-square"}}),e._v("清空选择\n                      ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量选择 "),n("a-icon",{attrs:{type:"down"}})],1)],1),n("a-tooltip",{attrs:{title:"导出楼盘信息"}},[n("a-button",{staticClass:"topBtn",style:{borderRight:e.isDetail?"":"none",borderRadius:e.isDetail?"5px 5px 5px 5px":"5px 0 0 5px"},attrs:{icon:"export"},on:{click:e.exportHouseInfo}},[n("span",[e._v("导出")])])],1),e.isDetail?e._e():n("a-tooltip",{attrs:{title:"导入楼盘信息"}},[n("a-upload",{attrs:{name:"file",showUploadList:!1,"before-upload":e.handleImportBefore,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[n("a-button",{staticStyle:{"border-radius":"0 5px 5px 0"},attrs:{loading:e.downLoading,icon:"import"}},[e._v("导入")])],1)],1)]:n("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[n("a-menu",[n("a-menu-item",{key:"1"},[n("a-button",{attrs:{block:""},on:{click:e.exportHouseInfo}},[e._v("导出")])],1),n("a-menu-item",{key:"2"},[n("a-upload",{staticClass:"uploadWidth100",attrs:{name:"file",showUploadList:!1,"before-upload":e.handleImportBefore,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[n("a-button",{attrs:{block:""}},[e._v("导入")])],1)],1)],1)]},proxy:!0}],null,!1,251562426)},[n("a-button",{staticClass:"radioButton "},[n("span",[e._v("导出/导入"),n("a-icon",{attrs:{type:"caret-down"}})],1)])],1),-1===e.$route.path.indexOf("deposit/ConDeposit")?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchEditOwner}},[n("a-icon",{attrs:{type:"highlight"}}),e._v("批量维护\n                    ")],1),n("a-menu-item",{key:"2",on:{click:e.batchDelOwner}},[n("a-icon",{attrs:{type:"disconnect"}}),e._v("批量撤销\n                    ")],1),n("a-menu-item",{key:"3",on:{click:e.batchDelHouse}},[n("a-icon",{attrs:{type:"delete"}}),e._v("批量删除\n                    ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作 "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()]:e._e()],2):e._e()]:e._e()],2)]},proxy:!0},{key:"houseName",fn:function(t){var o=t.text,r=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(r)}}},[e._v(e._s(o))])]}},{key:"depStandard",fn:function(t){t.text;var n=t.row;return[e._v("\n        "+e._s(e.depStandardFormat(n))+"\n      ")]}},{key:"action",fn:function(t){t.text;var o=t.row;return["02"!==e.depositType?n("span",[("1"===o.accState||"7"===o.accState&&o.depAmount>0)&&0==o.isDoing?n("a",[e.checkHouseUse(o.houseUse)?n("a",{attrs:{disabled:e.isDetail},on:{click:function(t){return e.handleDeposit(o)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 维护")],1):e._e(),e._v(" \n            "),o.householderName?n("a",{attrs:{disabled:e.isDetail},on:{click:function(t){return e.quashOwner(o)}}},[n("a-icon",{attrs:{type:"caret-left"}}),e._v(" 撤销")],1):e._e()]):n("a",[n("a",{attrs:{disabled:e.isDetail},on:{click:function(t){return e.handleDeposit(o,"show")}}},[n("a-icon",{attrs:{type:"eye"}}),e._v(" 查看")],1)]),e.showSes?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e.showSes?n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(t){return e.getHouseByFc(o)}}},[n("a-icon",{attrs:{type:"api"}}),e._v(" 房产房屋")],1)]),n("a-menu-item",[n("a",{on:{click:function(t){return e.getPsnByFc(o)}}},[n("a-icon",{attrs:{type:"api"}}),e._v(" 房产业主")],1)]),n("a-menu-item",[n("a",{on:{click:function(t){return e.getContByFc(o)}}},[n("a-icon",{attrs:{type:"api"}}),e._v(" 房产合同")],1)])],1)],1):e._e()],1):e._e(),"02"===e.continueDepositBusiType?n("span",["02"===e.depositType&&"1"===o.accState?n("span",[n("a",{attrs:{disabled:"disabled"}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 补交")],1)]):e._e(),"02"===e.depositType&&"1"!==o.accState?n("span",[n("a",{attrs:{disabled:"0"!==o.depFlag||(["3","4","5","7"].includes(o.accState)||o.isDoing>0||e.isDetail||o.drawState||o.onChange)},on:{click:function(t){return e.handleEdit(o,"0002")}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 补交")],1)]):e._e()]):["02"===e.depositType?n("span",[n("a",{attrs:{disabled:e.isDetail||o.onChange||o.isDoing>0},on:{click:function(t){return e.handleEdit(o,"0003")}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 续交")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a",{attrs:{disabled:!(Number(o.balance)<e.floatMul(o.dueAmount,.3))||(["3","4","5","7"].includes(o.accState)||o.isDoing>0||e.isDetail||o.drawState||o.onChange||"1"===o.accState)},on:{click:function(t){return e.handleEdit(o,"0012")}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 续筹")],1)],1):e._e()]]}}],null,!0)})],1),n("HouseOwnerInfoModal",{ref:"infoModal",attrs:{isDeposit:!!e.depositType,queryParam:e.query},on:{modalOk:e.loadDataList}}),n("quash-owner-modal",{ref:"quashModal",on:{close:e.queryPage}}),n("continue-deposit-modal",{ref:"continueModal",attrs:{queryParm:e.query},on:{modalOk:e.loadDataList}}),n("house-detail-comp",{ref:"detailForm"})],1)},r=[],i=(n("6eb7"),n("ac0d")),a=n("0fea"),s=n("0a5e"),u=n("7411"),c=n("f280"),l=n("6fa9"),d=n("2b0e"),f=n("d492"),h=n("9fb0"),p=n("3ed7"),m=n("821c"),y=n("2b2c"),v=n("4ec3");function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function b(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var x={name:"FloorViewTable",mixins:[i["b"],s["a"],y["a"]],props:{buildId:{type:String,default:""},depositType:{type:String,default:""},queryParams:{type:Object,default:function(){return{}}},isDetail:{type:Boolean,default:!1},isDeposit:{type:Boolean,default:!1},regionCode:{type:String,default:""},houseChecks:{type:Array,default:function(){return[]}},hidenBaseData:{type:Boolean,default:!1}},inject:{continueDepositBusiType:{default:"01"}},components:{IDCardReading:f["default"],HouseOwnerInfoModal:function(){return Promise.resolve().then(n.bind(null,"c752"))},ContinueDepositModal:c["default"],MESSuperQuery:l["default"],quashOwnerModal:u["default"],HouseDetailComp:m["default"]},data:function(){var e=this;return{tableData:[],tableQueryText:"",MenuIs:!0,isShowDrop:!1,depStandardFormat:p["b"],selectedRows:[],selectedRowKeys:this.houseChecks,downLoading:!1,description:"业主初交管理页面",modalTitle:null,modalType:1,modalText:"是否进行备案",revokeTitle:"撤销备案",visible:!1,visibleRevoke:!1,confirmLoading:!1,recordId:null,revokeReason:null,settingColumns:[],modalFlag:!0,activeKey:"0",loading:!1,selectedKeys:[],menuData:[],primaryMenuData:[],searchValue:"",windowHeight:document.documentElement.clientHeight,checkbox:!0,columns:[{title:"房屋位置",align:"left",field:"houseName",direction:"rtl",minWidth:280,type:"input",slot:!0},{title:"建筑面积 (㎡)",align:"right",headerAlign:"right",field:"houseArea",width:130,formatter:function(e){var t=e.cellValue;return Object(p["g"])(t,3)}},{title:"业主姓名",align:"center",field:"householderName",width:120,type:"input"},{title:"房屋用途",align:"center",field:"houseUse_dictText",width:120},{title:"交存模式",width:80,align:"center",field:"depMode_dictText"},{title:"交存标准",width:160,align:"right",formatter:"amount",field:"depStandard",slot:!0},{title:"账户状态",align:"center",field:"accState_dictText",formatter:function(t){var n=t.row,o=t.cellValue;return e.checkHouseUseSpecial(n.houseUse)?"不交":o},width:100},{hidden:!1,title:"操作",field:"action",align:"center",width:210,fixed:"right",slot:!0}],query:this.queryParams,loadTableData:function(t){return e.isDeposit&&(e.queryParam.noAccState="9"),e.selectAllEvent({records:[]}),Object(a["e"])("/view/floorViews/queryHouseList",Object.assign(t,e.queryParam)).then((function(e){return e.result}))},dictOptions:{},queryObj:[{type:"input",value:"housename",label:"房屋位置",queryType:"like"},{type:"slot",value:"householdername",label:"业主姓名",queryType:"like",slotName:"name"}],fileName:"",pageWidth:document.documentElement.clientWidth,font:d["default"].ls.get(h["w"]),url:{batchDelete:"/base/rtRegion/batchDelete",importExcelUrl:"/deposit/firstDeposit/importExcel"},showSes:!1}},mounted:function(){var e=this;window.onresize=function(){return function(){e.pageWidth=document.documentElement.clientWidth}()},this.monitorTableBox()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl,"?regionCode=").concat(this.regionCode)},tokenHeader:function(){var e={"X-Access-Token":d["default"].ls.get(h["a"]),sourceName:d["default"].ls.get(h["A"]),redisIndex:d["default"].ls.get(h["x"])},t=d["default"].ls.get(h["C"]);return t&&(e["tenant-id"]=t),e},rowSelection:function(){var e=this;return{onChange:function(t,n){e.onSelectChange(t,n)},getCheckboxProps:function(){return{props:{}}}}},fileSimplifyFlag:function(){return!this.hidenBaseData&&(18==this.font&&this.pageWidth<1640||this.pageWidth<1420)}},watch:{isDetail:{handler:function(e){var t=this;e&&(this.columns[6]["hidden"]=!0,this.$nextTick((function(){t.refreshColumn()})))},immediate:!0}},methods:{selectYetPsnHouseIno:function(){var e=this;this.$refs.table.clearCheckboxRow(),this.$nextTick((function(){var t=[];t=e.tableData.filter((function(t){return t.householderName&&e.checkboxConfig({row:t})})),e.selectedRows=t,e.selectedRowKeys=t.map((function(e){return e.id})),e.$refs.table.setCheckboxRow(t,!0),e.$emit("update:houseChecks",e.selectedRowKeys)}))},selectNotPsnHouseIno:function(){var e=this;this.$refs.table.clearCheckboxRow(),this.$nextTick((function(){var t=[];t=e.tableData.filter((function(t){return!t.householderName&&e.checkboxConfig({row:t})})),e.selectedRows=t,e.selectedRowKeys=t.map((function(e){return e.id})),e.$refs.table.setCheckboxRow(t,!0),e.$emit("update:houseChecks",e.selectedRowKeys)}))},clear:function(){this.$refs.table.clearCheckboxRow(),this.selectedRows=[],this.selectedRowKeys=[],this.$emit("update:houseChecks",this.selectedRowKeys)},floatMul:p["e"],getTableData:function(){try{return this.$refs.table.getTableData()}catch(e){return[]}},handleQuery:function(){this.handleSuperQuery({queryText:this.tableQueryText})},handleReset:function(){this.tableQueryText="",this.handleSuperQuery({queryText:""})},checkHouseUse:function(e){return!this.depositType||!this.checkHouseUseSpecial(e)},changeData:function(e){var t=this;this.tableData=e,this.$nextTick((function(){t.$emit("loadStatus",!1)}))},monitorTableBox:function(){var e=null,t=this,n=t.$refs.tableButtonsBox,o=function(n){var o,r=g(n);try{for(r.s();!(o=r.n()).done;){var i=o.value;i.target.classList.contains("tableDiv")&&(e&&(clearTimeout(e),e=null),e=setTimeout((function(){try{t.$refs.table.$refs.xTable.recalculate(!0)}catch(e){}}),20))}}catch(a){r.e(a)}finally{r.f()}},r=new ResizeObserver(o);r.observe(this.$refs.tableDiv),r.observe(n)},selectChangeEvent:function(e){var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.id})),this.$emit("update:houseChecks",this.selectedRowKeys)},selectAllEvent:function(e){var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.id})),this.$emit("update:houseChecks",this.selectedRowKeys)},handleImportExcel:function(e){this.$emit("handleImportExcel",e)},exportHouseInfo:function(){this.$emit("exportHouseInfo")},batchEditOwner:function(){this.$emit("batchEditOwner")},batchDelOwner:function(){var e=!1;if(this.selectedRows.forEach((function(t){t.householderName||(e=!0)})),e)return this.$message.warning("所选房屋存在不能撤销的业主信息！");this.$emit("batchDelOwner")},batchDelHouse:function(){var e=!1;if(this.selectedRows.forEach((function(t){t.householderName&&(e=!0)})),e)return this.$message.warning("所选房屋存在业主信息！");this.$emit("batchDelHouse")},handleImportBefore:function(){return this.downLoading=!0,Promise.resolve()},loadDataList:function(){this.queryPage()},customRow:function(e){var t=this;return{on:{dblclick:function(){t.handleDetail(e)}}}},onColSettingsChange:function(e){var t=this,n=this.$route.name+":colsettings";d["default"].ls.set(n,e,6048e5),this.settingColumns=e,this.columns=this.defColumns.filter((function(e){return"rowIndex"===e.key||"action"===e.field||t.settingColumns.includes(e.field)}))},tabChange:function(e){this.activeKey=e},quashOwner:function(e){this.$refs.quashModal.initData(e)},handleDeposit:function(e,t){var n=this;if("show"===t)this.$refs.infoModal.initData(e);else{var o=[];o.push(e.id);var r={businessIds:o,baseType:"4",changeType:"3"};Object(a["j"])("/common/bChange/checkState",r).then((function(t){t.success?n.$refs.infoModal.initData(e):n.$message.warning(t.message)}))}},handleEdit:function(e,t){var n=this;e.busiTypeDetail=t;var o=[];o.push(e.id);var r={businessIds:o,baseType:"4",changeType:"3"};Object(a["j"])("/common/bChange/checkState",r).then((function(t){t.success?n.$refs.continueModal.initData(e):n.$message.warning(t.message)}))},checkboxConfig:function(e){var t=e.row,n=!1;return"1"===t.accState&&0===t.isDoing&&(n=!0),n=!(!this.checkHouseUse(t.houseUse)||"0"===t.accState||0!==t.isDoing),n},batchDel:function(){var e=this;if(this.selectedRowKeys.length<1)return this.$message.warning("请选择一条记录！");var t={businessIds:this.selectedRowKeys,baseType:"4",changeType:"1"};Object(a["j"])("/common/bChange/checkState",t).then((function(t){t.success?e.$confirm({content:"确定清理吗？",onOk:function(){e.batchDeleteSure()}}):e.$message.warning(t.message)}))},batchDeleteSure:function(){var e=this;this.$store.commit("SET_PAGE_LOAD_STATE",{state:!0,text:"正在清理中，请稍候..."});var t={baseType:"4",selectedIdList:this.selectedRowKeys};Object(a["j"])(this.url.batchDelete,t).then((function(t){t.success?e.$message.success(t.message):e.$message.warning(t.message)})).finally((function(){e.queryPage(),e.$store.commit("SET_PAGE_LOAD_STATE",{state:!1})}))},handleDetail:function(e){this.$refs.detailForm.initData(e.id)},getHouseByFc:function(e){var t=this,n={};n.houseCode=e.presellNo,Object(a["e"])("/ses/searchHouseInfo",n).then((function(e){e.success?t.$message.success("提取成功"):t.$message.error(e.message)}))},getPsnByFc:function(e){var t=this,n={};n.houseCode=e.presellNo,Object(a["e"])("/ses/searchOwnerInfo",n).then((function(e){e.success?t.$message.success("提取成功"):t.$message.error(e.message)}))},getContByFc:function(e){var t=this,n={};n.houseCode=e.presellNo,Object(a["e"])("/ses/searchContractInfo",n).then((function(e){e.success?t.$message.success("提取成功"):t.$message.error(e.message)}))}},created:function(){var e=this;"/deposit/FirstDeposit"===window.location.pathname&&(this.isShowDrop=!0);var t=this.$route.path;t&&"/communityPortrait"===t&&(this.MenuIs=!1,this.checkbox=!1,this.columns.pop()),"02"===this.depositType&&(this.checkbox=!1),this.queryParam.id=this.buildId,Object(v["l"])("ses_equity_flag").then((function(t){"1"===t.result&&(e.showSes=!0)}))}},k=x,I=(n("41db"),n("2268"),n("2877")),C=Object(I["a"])(k,o,r,!1,null,"2b653997",null);t["default"]=C.exports},cc97:function(e,t,n){},d38e:function(e,t,n){"use strict";n("2820")},d49ce:function(e,t,n){"use strict";n("4911")},dfe8:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vxe-modal",{attrs:{minHeight:"600px",width:"1200",title:"新增房屋","show-footer":"","destroy-on-close":!0,position:{top:9,left:"center"},loading:e.loading,"z-index":1e3},on:{close:function(){return e.open({flag:!1})}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{on:{click:function(){return e.open({flag:!1})}}},[e._v("关闭")]),n("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"title marginTop10"},[n("span",{staticClass:"collapseTitle"},[e._v("\n            房屋信息\n          ")])])]},proxy:!0}])},[n("house-list-table",{ref:"houseListTable",attrs:{"bld-id":e.bldId,addDefaultRow:e.defaultHouseInfo,isAdd:!0,"keep-source":!0,"is-detail":!1}})],1)],1)],1)},r=[],i=n("a87b"),a=n("0fea"),s={name:"AddHousingModal",components:{HouseListTable:i["default"]},data:function(){return{visible:!1,loading:!1,defaultHouseInfo:{},activeKey:"1",bldId:"",url:{houseInfoChange:"/base/rHouseInfo/houseInfoChange"}}},methods:{open:function(e){var t=this,n=e.flag,o=e.defaultHouseInfo,r=e.bldId,i=e.houseList;n?(this.bldId=r,o&&(this.defaultHouseInfo=JSON.parse(JSON.stringify(o))),this.$nextTick((function(){t.$refs.houseListTable.loadTableData(JSON.parse(JSON.stringify(i)))}))):this.bldId="",this.visible=n},handleOk:function(){var e=this,t=this;this.$refs.houseListTable.validaTable().then((function(n){if(n)t.loading=!1;else{var o=e.$refs.houseListTable.getTableData(),r={newHouseList:o,changeReason:"新增房屋",fileIdList:[],oldHouseList:[]};t.loading=!0,Object(a["j"])(e.url.houseInfoChange,r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.loading=!1,t.open({flag:!1})}))}}))}}},u=s,c=(n("5cb4"),n("2877")),l=Object(c["a"])(u,o,r,!1,null,"d72b840c",null);t["default"]=l.exports},e2cd:function(e,t,n){"use strict";n("7c30")},f280:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"height-100":"div"===e.showType}},["modal"===e.showType?n("j-modal",{attrs:{switchFullscreen:!0,visible:e.visible,width:"1140px","body-style":{paddingTop:0},title:e.dynamicText+"信息维护"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("template",{slot:"footer"},[n("div",{staticStyle:{"text-align":"center"}},["1"===e.activeKey?n("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleOk}},[e._v("保存 ")]):e._e(),n("a-button",{attrs:{loading:e.loading},on:{click:e.handleCancel}},[e._v("关闭 ")])],1)]),n("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.changeModalTab}},[n("a-tab-pane",{key:"1",attrs:{tab:"房屋业主信息"}},[n("content-view",{attrs:{title:"房屋基本信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("house-info-comp",{ref:"hic",attrs:{disabled:!0,isShowHeader:!1,"is-can-edit-cont":!0}})],1),n("content-view",{attrs:{title:"业主信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("owner-info-table",{ref:"oldOwner",attrs:{isDetail:"0003"!==e.depositType||!e.conDesitAllTimeFlag}})],1),"02"===e.continueDepositBusiType?[n("content-view",{attrs:{title:"补交信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"collapseTitle"},[n("span",[e._v("补交信息")])])]},proxy:!0}],null,!1,1875316168)},[n("j-form-container",{ref:"houseBaseInfo",attrs:{border:!1,rules:e.rules,model:e.formInline,formRef:"formRow"}},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[[n("a-col",{attrs:{span:"4"}},[e._v("补交金额")]),n("a-col",{attrs:{span:"4","data-prop":"depAmount"}},[n("amount-input",{attrs:{"addon-after":"元",disabled:!e.WhetherThePermissionPasses("continueDeposit:patch")},model:{value:e.formInline.patchAmount,callback:function(t){e.$set(e.formInline,"patchAmount",t)},expression:"formInline.patchAmount"}})],1)]],2)],1)],1)]:[n("content-view",{attrs:{title:"续交续筹信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"collapseTitle"},[n("span",[e._v(" "+e._s(e.dynamicText)+"信息")]),n("vxe-switch",{staticStyle:{"font-weight":"normal"},attrs:{size:"mini","on-label":"续交","on-value":"0003","off-label":"续筹","off-value":"0012",disabled:e.suppRenewSwitch},on:{change:e.depositTypeChangeFun},model:{value:e.depositType,callback:function(t){e.depositType=t},expression:"depositType"}})],1)]},proxy:!0}],null,!1,2888209288)},[n("j-form-container",{ref:"houseBaseInfo",attrs:{border:!1,rules:e.rules,model:e.formInline,formRef:"formRow"}},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[[n("a-col",{attrs:{span:"4"}},[e.operateFlag?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v(e._s(e.dynamicText)+"金额")]),n("a-col",{attrs:{span:"4","data-prop":"conFundAmount"}},[n("amount-input",{attrs:{"addon-after":"元",disabled:"0003"!==e.depositType},model:{value:e.dynamicModel,callback:function(t){e.dynamicModel=t},expression:"dynamicModel"}})],1)]],2)],1)],1)],n("type-attachment-upload",{ref:"fileUpload",attrs:{"is-detail":e.operateFlag,"header-title":"图档信息",busiType:"00",busiTypeDetail:e.depositType,busiNo:e.formInline.id,"body-style":{padding:"0"},"header-style":{padding:"12px 0"}},on:{change:e.getFileList}})],2),e.isAdmin||!e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM?n("a-tab-pane",{key:"2",attrs:{tab:"业务明细","force-render":!0}},[n("trading-record-table",{ref:"tradIngRecord"})],1):e._e()],1)],2):"div"===e.showType?n("div",{staticClass:"height-100"},[n("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.changeModalTab}},[n("a-tab-pane",{key:"1",attrs:{tab:"房屋业主信息"}},[n("div",[n("div",{staticClass:"tabs-title"},[n("span",[e._v("房屋基本信息")])]),n("house-info-comp",{ref:"hic",attrs:{disabled:!0,isShowHeader:!1,"is-can-edit-cont":!0}})],1),n("content-view",{attrs:{title:"业主信息","header-style":{padding:"12px 0"},"body-style":{padding:"0"}}},[n("owner-info-table",{ref:"oldOwner",attrs:{isDetail:!0}})],1),n("div",[n("div",{staticClass:"tabs-title"},[n("span",[e._v(e._s("02"!==e.continueDepositBusiType?"续交续筹信息":"补交信息"))])]),n("j-form-container",{ref:"houseBaseInfo",attrs:{border:!1,rules:e.rules,model:e.formInline,formRef:"formRow",disabled:e.operateFlag}},[n("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[[n("a-col",{attrs:{span:"4"}},[e.operateFlag?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v(e._s(e.dynamicText)+"金额")]),n("a-col",{attrs:{span:"4","data-prop":"depAmount"}},[n("amount-input",{attrs:{"addon-after":"元",disabled:"0003"!==e.depositType},model:{value:e.dynamicModel,callback:function(t){e.dynamicModel=t},expression:"dynamicModel"}})],1)]],2)],1)],1),n("type-attachment-upload",{ref:"fileUpload",attrs:{"is-detail":e.operateFlag,"header-title":"图档信息",busiType:"00",busiTypeDetail:e.depositType,busiNo:e.formInline.id,"body-style":{padding:"0"},"header-style":{padding:"12px 0"}},on:{change:e.getFileList}})],1),!e.tradIngRecordVisible||!e.isAdmin&&e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM?e._e():n("a-tab-pane",{key:"2",attrs:{tab:"业务明细","force-render":!0}},[n("trading-record-table",{ref:"tradIngRecord"})],1)],1)],1):e._e(),n("print-report-comp",{ref:"print"})],1)},r=[],i=n("0fea"),a=n("eccd"),s=n("9fbd"),u=n("92d2"),c=n("4aae"),l=n("3269"),d=n("2b01"),f=n("dc9a"),h=n("63dd"),p=n("9bed"),m=n("3ed7"),y=n("d8a5"),v=n("fdcf");function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:D(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function v(){}function w(){}function x(){}var k={};c(k,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I($([])));C&&C!==n&&o.call(C,a)&&(k=C);var _=x.prototype=v.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(r,i,a,s){var u=d(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==g(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function D(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===m){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===y)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?m:h,c.arg===y)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=m,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(g(t)+" is not iterable")}return w.prototype=x,r(_,"constructor",{value:x,configurable:!0}),r(x,"constructor",{value:w,configurable:!0}),w.displayName=c(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(l(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:$(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),y}},t}function w(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(o,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){w(i,o,r,a,s,"next",e)}function s(e){w(i,o,r,a,s,"throw",e)}a(void 0)}))}}var k={name:"ContinueDepositModal",props:{queryParam:{type:Object,default:function(){return{}},disabled:!1},disableSubmit:{type:Boolean,default:!1},showType:{type:String,default:"modal"},pContinueDepositBusiType:{type:String,default:"01"}},components:{PsnInfoComp:h["default"],ContentView:f["default"],JDictBankListSelect:l["default"],TypeAttachmentUpload:s["default"],JDDictSelectTag:a["default"],TradingRecordTable:function(){return Promise.resolve().then(n.bind(null,"8fc8"))},OwnerInfoTable:u["default"],AmountInput:c["default"],HouseInfoComp:d["default"],PrintReportComp:p["default"]},inject:{continueDepositBusiType:{default:"01"}},created:function(){var e=this;this.bankInfoDict(),this.continueDepositBusiType||(this.continueDepositBusiType=this.pContinueDepositBusiType),"02"===this.continueDepositBusiType&&(this.depositType="0002"),Object(y["e"])("HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM").then((function(t){e.HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM="1"===t})),Object(y["e"])("con_dposit_all_time").then((function(t){t&&"1"==t&&(e.conDesitAllTimeFlag=!0)})),Object(i["e"])(this.url.checkUserIsCorp).then((function(t){t.success||(e.isAdmin=!0)}))},data:function(){return{HIDE_BD_IN_ENT_HOUSE_MAINT_PARAM:!1,isAdmin:!1,formInline:{},rules:{depAmount:[{required:!0,type:"number",message:"不能为空",trigger:"blur"},{validator:this.validateAmount,type:"Promise"}]},depositType:"0002",conDesitAllTimeFlag:!1,psnInfoList:[],operateFlag:!1,visible:!1,activeKey:"1",fileIdList:[],bankInfoOptions:[],loading:!1,url:{fastFirstDeposit:"/common/fastHanding/fastFirstDeposit",getHouseInfoDetail:"/common/fastHanding/getHouseInfoDetail",checkUserIsCorp:"/sys/sysDepart/checkUserIsCorp"},ShortcutOperationValue:"",tradIngRecordVisible:!0,suppRenewSwitch:!1}},methods:{WhetherThePermissionPasses:v["a"],validateAmount:function(e,t){var n=this;return new Promise(function(){var e=x(b().mark((function e(o){return b().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"0003"===n.depositType?t?0==Number(t)?o("金额不能为0"):o():o("请输入金额"):o();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},depositTypeChangeFun:function(){var e=this;this.$refs.houseBaseInfo.clearValidate("depAmount"),this.$nextTick((function(){e.$refs.fileUpload.initData()}))},getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}},shortcutOperation:function(e){this.ShortcutOperationValue=e,this.handleOk()},initData:function(e,t){var n=this;t||(this.tradIngRecordVisible=t),"02"===this.continueDepositBusiType?this.depositType="0002":["0003","0012"].includes(e.busiTypeDetail)?("1"==e.accState&&(this.suppRenewSwitch=!0),this.depositType=e.busiTypeDetail,Number(e.balance)>=Object(m["e"])(e.dueAmount,.3)&&(this.depositType="0003",this.suppRenewSwitch=!0)):(this.depositType=e.busiTypeDetail,"1"===e.depFlag&&(this.suppRenewSwitch=!0)),Object(i["e"])("/view/floorViews/queryHouseListForContinue",{houseId:e.id}).then((function(t){n.formInline=t.result,"1"==n.formInline.depFlag||"0"==n.formInline.depFlag?"0002"!=n.depositType||"1"!=n.formInline.accState&&"9"!=n.formInline.accState&&("7"!=n.formInline.accState||0!=n.formInline.depAmount)?"0003"!=n.depositType&&"0012"!=n.depositType||"1"!=n.formInline.accState&&"9"!=n.formInline.accState&&("7"!=n.formInline.accState||0!=n.formInline.depAmount)||n.conDesitAllTimeFlag&&"1"==n.formInline.accState?!n.formInline.drawState&&!n.formInline.onChange&&"3"!=n.formInline.accState&&"4"!=n.formInline.accState&&"5"!=n.formInline.accState&&"7"!=n.formInline.accState||"ShortcutOperation"===n.ShortcutOperationValue?(n.formInline.bldType=n.queryParam.type,n.formInline.bldAttr=n.queryParam.attr,n.psnInfoList=n.formInline.psnInfoList,n.operateFlag=n.formInline.operFlag,n.$set(e,"operateFlag",n.operateFlag),n.visible=!0,n.activeKey="1",n.$nextTick((function(){void 0!==n.$refs.fileUpload&&n.$refs.fileUpload.initData(),n.$refs.oldOwner.initData(!1,n.psnInfoList),n.$refs.hic.houseInfo=n.formInline,"02"===n.continueDepositBusiType?"0"==n.formInline.depFlag&&n.$set(n.formInline,"patchAmount",n.formInline.dueAmountReg>0?n.formInline.dueAmountReg:0):"0012"==n.depositType&&n.$set(n.formInline,"patchAmount",n.formInline.conFundAmount>0?n.formInline.conFundAmount:0),n.$refs.tradIngRecord&&Object(i["e"])(n.url.getHouseInfoDetail,{id:e.id}).then((function(e){e.success&&n.$nextTick((function(){n.$refs.tradIngRecord.initData(e.result),n.loading=!1}))}))}))):n.$message.error("该房屋存在在途业务，不支持补交续交续筹!"):n.$message.error("该房屋尚未交存，不支持续筹续交!"):n.$message.error("该房屋尚未交存，不支持补交!"):n.$message.warning("当前账户信息不完善，请联系管理员！")}))},handleOk:function(){var e=x(b().mark((function e(){var t,n,o=this;return b().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=function(){if(o.$refs.fileUpload&&!o.$refs.fileUpload.checkData())return!1;o.formInline.fileIdList=o.fileIdList;var e="";if("ShortcutOperation"==o.ShortcutOperationValue){if(!o.formInline.bankCode)return void o.$message.error("请选择承办银行！");e=o.url.fastFirstDeposit}else e="/deposit/firstDeposit/conDepositMaintain";"0012"==o.depositType&&Number(o.formInline.conFundAmount)<=0?o.$message.error("您当前无需续筹！"):"0002"!=o.depositType||o.formInline.depAmount&&!(Number(o.formInline.depAmount)<=0)?"0003"==o.depositType&&Number(o.dynamicModel)<=0?o.$message.error("续交金额不能为0！"):("0012"!=o.depositType&&(o.formInline.conFundAmount=0),o.formInline.busiTypeDetail=o.depositType,Object(i["j"])(e,o.formInline).then((function(e){e.success?("ShortcutOperation"==o.ShortcutOperationValue?(o.$refs.print.type="window",o.$refs.print.print("deposit_owner",{busiNo:e.result}),o.operateFlag=!0,o.$emit("showRevoke",!0)):(o.$message.success("操作成功！"),o.visible=!1,"0"!==e.result||Object(v["a"])("firstDeposit:request")?Object(i["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){e.success||Object(v["a"])("firstDeposit:verify")||o.$bus.$emit("FirstDepositTabChange","1")})):o.$bus.$emit("FirstDepositTabChange","2")),o.$emit("modalOk")):o.$message.warning(e.message)}))):o.$message.error("您当前无需补交！")},"0003"!=this.depositType||!this.conDesitAllTimeFlag){e.next=7;break}return e.next=4,this.$refs.oldOwner.checkData();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:this.formInline.psnInfoList=this.psnInfoList;case 7:return e.next=9,this.$refs.houseBaseInfo.validaRowMsgPro(this.$refs.formRow);case 9:if(n=e.sent,n.valida){e.next=12;break}return e.abrupt("return",!1);case 12:if("0002"!==this.depositType){e.next=20;break}if(!(Number(this.formInline.patchAmount)<=0)){e.next=16;break}return this.$message.warning("补交金额不能小于0！"),e.abrupt("return");case 16:this.formInline.depAmount=this.formInline.patchAmount,t(),e.next=26;break;case 20:if("0003"!==this.depositType||"0"!==this.formInline.depFlag){e.next=25;break}return e.next=23,this.$confirm({title:"当前房屋可补交，是否继续续交",onOk:t,onCancel:function(){}});case 23:e.next=26;break;case 25:t();case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.visible=!1,this.suppRenewSwitch=!1},changeModalTab:function(e){var t=this;this.activeKey=e,"2"===e&&Object(i["e"])(this.url.getHouseInfoDetail,{id:this.formInline.id}).then((function(e){e.success&&t.$nextTick((function(){t.$refs.tradIngRecord.initData(e.result),t.loading=!1}))}))},bankInfoDict:function(){}},mounted:function(){var e=this;this.$bus.$on("ownerSave",(function(t){e.psnInfoList=t}))},computed:{dynamicModel:{get:function(){return"0003"===this.depositType?this.formInline.depAmount:"0012"===this.depositType?this.formInline.conFundAmount:this.formInline.patchAmount},set:function(e){"0003"===this.depositType?this.formInline.depAmount=e:"0012"===this.depositType?this.formInline.conFundAmount=e:this.formInline.patchAmount=e}},dynamicText:function(){return"02"===this.continueDepositBusiType?"补交":"0003"===this.depositType?"续交":"续筹"}}},I=k,C=(n("d49ce"),n("2877")),_=Object(C["a"])(I,o,r,!1,null,"7b260f82",null);t["default"]=_.exports},fcb9:function(e,t,n){e.exports=n.p+"3bd59e311089fc2ebb79034653a45ea2.md"}}]);