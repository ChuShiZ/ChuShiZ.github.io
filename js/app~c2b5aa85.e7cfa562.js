(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~c2b5aa85"],{"04d2":function(e,t,a){},"0b07f":function(e,t,a){},1265:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-modal",{attrs:{height:"90vh",position:{top:9,left:"center"},"show-footer":"",loading:e.modalLoading,title:e.title,"z-index":1e3,width:"1200"},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{loading:e.modalLoading,type:"close"},on:{click:e.close}},[e._v("关闭")]),a("a-button",{attrs:{disabled:e.isDetail,loading:e.modalLoading,type:"primary"},on:{click:e.handleOk}},[e._v("保存")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?[a("j-form-container",[a("a-form-model",{ref:"form",attrs:{slot:"edit",rules:e.validatorRules,model:e.model},slot:"edit"},[a("div",[a("content-view",{attrs:{title:"基本信息"}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{type:"flex"}},[a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("投资类型")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"invType"}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择投资类型",dictCode:"investment_type",disabled:e.isDetail},model:{value:e.model.invType,callback:function(t){e.$set(e.model,"invType",t)},expression:"model.invType"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("投资金额")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"creditAmount"}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入投资金额",disabled:e.isDetail,"is-zero":!1,"minus-flag":!1,"format-due":"01"},on:{change:e.computePreaccr},model:{value:e.model.creditAmount,callback:function(t){e.$set(e.model,"creditAmount",t)},expression:"model.creditAmount"}})],1)],1),"1"==e.model.invType?a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("承办银行")]):e._e(),"1"==e.model.invType?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"bankCode"}},[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择银行","is-detail":e.isDetail},on:{change:function(t){return e.changeCode("bank")}},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1)],1):e._e(),"1"==e.model.invType?a("a-col",{attrs:{span:"4"}},[e.isDetail?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("承办行专户账号")]):e._e(),"1"==e.model.invType?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"spaccCode"}},[e.isDetail?a("span",[e._v(e._s(e.model.spaccCode))]):a("input-search-modal",{attrs:{options:{value:"code",label:"code",search:"code",highValue:"code",highLabel:"code"},action:"/business/rSpAccInfo/list?bankCode="+(e.model.bankCode?e.model.bankCode:"XX"),placeholder:"请选择专户账号",width:"100%",disabled:e.isDetail},model:{value:e.model.spaccCode,callback:function(t){e.$set(e.model,"spaccCode",t)},expression:"model.spaccCode"}})],1)],1):e._e(),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("投资银行")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"crBankCode"}},[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择银行","is-detail":e.isDetail},on:{change:function(t){return e.changeCode("crBank")}},model:{value:e.model.crBankCode,callback:function(t){e.$set(e.model,"crBankCode",t)},expression:"model.crBankCode"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("投资行专户账号")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"crSpaccCode"}},[e.isDetail?a("span",[e._v(e._s(e.model.crSpaccCode))]):a("input-search-modal",{attrs:{options:{value:"code",label:"code",search:"code",highValue:"code",highLabel:"code"},action:"/business/rSpAccInfo/list?bankCode="+(e.model.crBankCode?e.model.crBankCode:"XX"),placeholder:"请选择专户账号",width:"100%",disabled:e.isDetail},on:{change:e.checkCreditAmount},model:{value:e.model.crSpaccCode,callback:function(t){e.$set(e.model,"crSpaccCode",t)},expression:"model.crSpaccCode"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("存单号")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"depRecNo"}},[a("a-input",{attrs:{placeholder:"请输入存单号",maxLength:30,disabled:e.isDetail},model:{value:e.model.depRecNo,callback:function(t){e.$set(e.model,"depRecNo",t)},expression:"model.depRecNo"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("年利率")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"accrRate"}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入年利率",disabled:e.isDetail,"is-zero":!1,"minus-flag":!1,"addon-after":"%"},on:{change:e.computePreaccr},model:{value:e.model.accrRate,callback:function(t){e.$set(e.model,"accrRate",t)},expression:"model.accrRate"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("投资日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"invDate"}},[a("a-date-picker",{staticClass:"width100",attrs:{format:"YYYY-MM-DD",disabled:e.isDetail},on:{change:e.changeTerm},model:{value:e.model.invDate,callback:function(t){e.$set(e.model,"invDate",t)},expression:"model.invDate"}})],1)],1),a("a-col",{attrs:{span:4}},[e.isDetail?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("投资期限")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"term"}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择投资期限",dictCode:"invest_term",disabled:e.isDetail},on:{change:e.changeTerm},model:{value:e.model.term,callback:function(t){e.$set(e.model,"term",t)},expression:"model.term"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("到期日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"matDate"}},[a("a-date-picker",{staticClass:"width100",attrs:{format:"YYYY-MM-DD",disabled:""},model:{value:e.model.matDate,callback:function(t){e.$set(e.model,"matDate",t)},expression:"model.matDate"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("预计投资收益")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"preInvIncome"}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{placeholder:"计算预计投资收益",disabled:""},model:{value:e.model.preInvIncome,callback:function(t){e.$set(e.model,"preInvIncome",t)},expression:"model.preInvIncome"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("投资经办人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"invOper"}},[a("a-input",{attrs:{maxLength:30,placeholder:"请输入投资经办人",disabled:e.isDetail},model:{value:e.model.invOper,callback:function(t){e.$set(e.model,"invOper",t)},expression:"model.invOper"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("是否生成财务凭证")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"voucheFlagF"}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否",disabled:e.isDetail},on:{change:e.handleVoucheFlag},model:{value:e.model.voucheFlagF,callback:function(t){e.$set(e.model,"voucheFlagF",t)},expression:"model.voucheFlagF"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("是否到期计提利息")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"preaccrF"}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否",disabled:e.isDetail},on:{change:e.handlePreaccr},model:{value:e.model.preaccrF,callback:function(t){e.$set(e.model,"preaccrF",t)},expression:"model.preaccrF"}})],1)],1),e.model.preaccrF?e._e():a("a-col",{attrs:{span:4}},[e._v("每年计提日期")]),e.model.preaccrF?e._e():a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"preaccrDate"}},[a("a-input",{attrs:{maxLength:30,placeholder:"请输入计提日期（格式为01-01）",disabled:e.isDetail},on:{blur:e.checkPreaccrDate},model:{value:e.model.preaccrDate,callback:function(t){e.$set(e.model,"preaccrDate",t)},expression:"model.preaccrDate"}})],1)],1),e.model.preaccrF?a("a-col",{attrs:{span:4}}):e._e(),e.model.preaccrF?a("a-col",{attrs:{span:8}}):e._e(),a("a-col",{attrs:{span:4}},[e._v("投资情况描述")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"90%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"describe"}},[a("a-textarea",{staticClass:"height-108",attrs:{placeholder:"请输入投资情况描述",disabled:e.isDetail},model:{value:e.model.describe,callback:function(t){e.$set(e.model,"describe",t)},expression:"model.describe"}})],1)],1)],1)],1),e.raiseRatesCompShow?a("content-view",{attrs:{title:"提取利息"}},[a("raise-rates-comp",{ref:"raiseRatesComp",attrs:{extId:e.model.id,showOption:e.showOption}})],1):e._e()],1)])],1)]:e._e()],2)},o=[],r=a("dc9a"),i=a("0fea"),l=a("2e12"),s=a("eccd"),c=a("5a0c"),d=a.n(c),u=a("aa2d"),m=a("3269"),f=a("4aae"),h=a("5c11"),p={name:"InvestInfoModal",components:{JDDictSelectTag:s["default"],ContentView:r["default"],RaiseRatesComp:l["default"],InputSearchModal:u["default"],JDictBankListSelect:m["default"],amountInput:f["default"]},data:function(){var e=function(e,t,a){Number(t)?a():a(new Error("请填写投资金额"))},t=function(e,t,a){Number(t)?a():a(new Error("请填写投资金额"))};return{title:"新增增值项目",visible:!1,isDetail:!1,raiseRatesCompShow:!1,showOption:!0,model:{},modalLoading:!1,validatorRules:{invType:[{required:!0,message:"请选择投资类型!"}],creditAmount:[{required:!0,message:"请填写投资金额!"},{validator:e}],bankCode:[{required:!0,message:"请选择承办银行!"}],spaccCode:[{required:!0,message:"请选择承办行专户账号!"}],crBankCode:[{required:!0,message:"请选择投资银行!"}],crSpaccCode:[{required:!0,message:"请选择投资行专户账号!"}],depRecNo:[{required:!0,message:"请填写存单号!"}],accrRate:[{required:!0,message:"请填写年利率!"},{validator:t}],invDate:[{required:!0,message:"请选择投资日期!"}],term:[{required:!0,message:"请选择投资期限!"}]},url:{addAndEdit:"/appreciation/investInfo/addAndEdit",checkCreditAmount:"/appreciation/investInfo/checkCreditAmount",judgeIsMonth:"/transfer/judgeIsMonth"}}},methods:{checkCreditAmount:function(){var e=this;this.model.crSpaccCode&&this.model.creditAmount&&Object(i["e"])(this.url.checkCreditAmount,{crSpaccCode:this.model.crSpaccCode,creditAmount:this.model.creditAmount}).then((function(t){t.result||(e.$set(e.model,"creditAmount",0),e.$message.warning("投资金额大于账户中活期余额，请重新输入！"))}))},changeCode:function(e){"bank"===e&&this.$set(this.model,"spaccCode",""),"crBank"===e&&this.$set(this.model,"crSpaccCode","")},add:function(){this.edit({invType:"1",preaccr:"0",voucheFlag:"1"})},edit:function(e){var t=this;this.model=Object.assign({},e),"1"===this.model.voucheFlag&&this.$set(this.model,"voucheFlagF",!0),"1"===this.model.preaccr?this.$set(this.model,"preaccrF",!1):this.$set(this.model,"preaccrF",!0),this.visible=!0,this.raiseRatesCompShow&&this.$nextTick((function(){t.$refs.raiseRatesComp.investInfo=e}))},close:function(){this.$emit("close"),this.raiseRatesCompShow=!1,this.visible=!1},handleOk:function(){var e=this;e.$refs.form.validate((function(t){t&&e.$confirm({title:"提示",content:"保存后产生"+(e.model.voucheFlagF?"财务凭证":"记账信息")+"不可编辑，是否检查无误?",onOk:function(){e.modalLoading=!0,Object(i["j"])(e.url.addAndEdit,e.model).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.modalLoading=!1,e.close()}))}})}))},computePreaccr:function(){this.$set(this.model,"amount",this.model.creditAmount),this.model.creditAmount&&this.model.term&&this.model.accrRate&&this.$set(this.model,"preInvIncome",(this.model.creditAmount*(this.model.term/12)*(this.model.accrRate/100)).toFixed(2)),this.checkCreditAmount()},changeTerm:function(){var e=this;this.model.invDate&&Object(i["e"])(this.url.judgeIsMonth,{coverYear:d()(this.model.invDate).year()+"",month:d()(this.model.invDate).month()+""}).then((function(t){t.success&&t.result&&(e.model.invDate="",e.$message.warning("当前选择日期错误,不能选择已月结的日期！"))})),this.model.term&&this.model.invDate&&(this.$set(this.model,"matDate",Object(h["a"])(this.model.invDate,this.model.term)),this.computePreaccr())},handleVoucheFlag:function(){var e=this;Object(i["e"])("/cover/list",{}).then((function(t){t.result.records.length<=0&&(e.model.voucheFlagF=!1,e.$message.warning("该用户没有财务系统，无法生成财务凭证！")),e.model.voucheFlagF?e.$set(e.model,"voucheFlag","1"):e.$set(e.model,"voucheFlag","0")}))},handlePreaccr:function(){this.model.preaccrF?(this.$set(this.model,"preaccr","0"),this.$set(this.model,"preaccrDate","")):(this.$set(this.model,"preaccr","1"),this.$set(this.model,"preaccrDate","12-31"))},checkPreaccrDate:function(e){if(5!==e.target._value.length||Number(e.target._value.substring(0,2))<1||Number(e.target._value.substring(0,2))>12||Number(e.target._value.substring(3,5))<1||Number(e.target._value.substring(3,5))>31)return this.$message.warning("输入计提日期的格式不正确！"),this.$set(this.model,"preaccr","1"),this.$set(this.model,"preaccrDate","12-31"),!1},handleCancel:function(){this.close()}}},v=p,y=(a("6afd"),a("2877")),g=Object(y["a"])(v,n,o,!1,null,"8d1cc2d6",null);t["default"]=g.exports},1786:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("vxe-grid",{ref:"voucherRef",attrs:{columns:e.columns,"checkbox-config":{showHeader:!1},"edit-config":{trigger:"click",mode:"row",showIcon:!e.disableEdit},"valid-config":{autoPos:!0},toolbar:{zoom:!0},"keyboard-config":{isArrow:!0,isDel:!0,isTab:!0,isEdit:!0},"mouse-config":{selected:!0},"show-overflow":"","auto-resize":"",border:"","show-footer":"","footer-span-method":e.footerSpanMethod,data:e.voucherList,"footer-method":e.footerMethod,"edit-rules":e.disableEdit?{}:e.editRules},scopedSlots:e._u([{key:"itemName",fn:function(t){var n=t.row;t.rowIndex,t.column;return[a("span",[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择银行"},model:{value:n.itemNo,callback:function(t){e.$set(n,"itemNo",t)},expression:"row.itemNo"}})],1)]}},{key:"debitAmount",fn:function(t){var n=t.row;t.rowIndex;return[a("span",[e._v(" "+e._s(e.convertCurrency(n.creditAmount)))])]}},{key:"creditAmount",fn:function(t){var n=t.row;t.rowIndex;return[e.disableEdit?a("span",[e._v(" "+e._s(n.creditAmount))]):a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:.1,disabled:e.disableEdit,precision:2},on:{blur:e.AmountChange},model:{value:n.creditAmount,callback:function(t){e.$set(n,"creditAmount",t)},expression:"row.creditAmount"}})]}},{key:"checkboxHeader",fn:function(t,n){var o=t.column,r=t.columnIndex,i=t.$columnIndex,l=t._columnIndex,s=t.$rowIndex;return[a("a-space",[a("a-checkbox",{on:{change:e.chooseAll}}),a("i",{staticClass:"vxe-icon--plus",on:{click:function(t){!e.disableEdit&&e.addVoucherInfo({column:o,columnIndex:r,$columnIndex:i,_columnIndex:l,$rowIndex:s})}}}),a("i",{staticClass:"vxe-icon--minus",on:{click:function(t){!e.disableEdit&&e.removeVoucherInfo()}}})],1)]}},{key:"seqFooter",fn:function(t){var a=t.$rowIndex;return[0===a?void 0:e._e()]}},{key:"itemNameFooter",fn:function(e){e.$rowIndex}},{key:"debitAmountFooter",fn:function(t){var n=t.$rowIndex;return[0===n?[e._v("大写:"),a("span",[e._v(e._s(e.convertCurrency(e.model.creditAmountSum)))])]:e._e()]}},{key:"creditAmountFooter",fn:function(t){var n=t.$rowIndex;return[0===n?[e._v("合计:"),a("span",[e._v(e._s(e.formatterAmount(e.model.creditAmountSum)))])]:e._e()]}}])})],1)},o=[],r=a("0fea"),i=a("6c18"),l=a("2b0e"),s=a("9fb0"),c=a("49a8"),d=a("c1df"),u=a.n(d),m=a("9fbd"),f=a("3ed7"),h=a("3269"),p={name:"IncrementCreditComp",components:{JSelectItemModal:i["default"],JCategorySelect:c["default"],TypeAttachmentUpload:m["default"],JDictBankListSelect:h["default"]},props:{disabled:{type:Boolean,default:!1,required:!1},disableEdit:{type:Boolean,default:!1,required:!1},disableDetail:{type:Boolean,default:!1}},data:function(){return{formatterAmount:f["g"],convertCurrency:f["a"],fileIdList:[],monthFormat:"YYYY-MM-DD",voucherList:[{}],model:{acceNum:0,amount:"0.00",creditAmountSum:"0.00",makeDate:""},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{makeDate:[{required:!0,message:"请选择填制日期"}],busiTypeId:[{required:!0,message:"请选择业务类型"}]},url:{add:"/voucher/add",edit:"/voucher/edit",queryById:"/voucher/queryById",cateQueryById:"/sys/category/queryById"},editRules:{itemName:[{required:!0,message:"请选择贷方银行"}],debitAmount:[{required:!0,message:"自动生成大写"}],creditAmount:[{required:!0,message:"请填写金额"}]},columns:[{title:"序号",dataIndex:"",width:60,align:"center",type:"seq",slots:{footer:"seqFooter"}},{title:"贷方科目",field:"itemName",align:"left",editRender:{type:"visible"},slots:{edit:"itemName",footer:"itemNameFooter"}},{title:"贷方金额 (元)",field:"creditAmount",align:"right",editRender:{type:"visible"},slots:{edit:"creditAmount",footer:"creditAmountFooter"}},{title:"贷方金额大写 (元)",field:"debitAmount",align:"right",editRender:{type:"visible"},slots:{edit:"debitAmount",footer:"debitAmountFooter"}},{width:100,fixed:"right",field:"action",align:"center",type:"checkbox",slots:{header:"checkboxHeader"}}]}},watch:{"model.busiTypeId":"busiTypeWatch",disableEdit:{immediate:!0,handler:function(e){var t=this,a=this;this.$nextTick((function(){var n=t.$refs.voucherRef.getColumnByField("action");e?a.$refs.voucherRef.hideColumn(n):a.$refs.voucherRef.showColumn(n),a.$forceUpdate()}))}}},computed:{formDisabled:function(){return this.disabled}},created:function(){this.model.makeOper=l["default"].ls.get(s["J"]).realname,this.model.makeDate=u()(new Date).format("YYYY-MM-DD"),this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},valida:function(){var e=!0,t=this.$refs.form.validaRowMsg(this.$refs.formOwnRow);if(t.valida){for(var a=0;a<this.voucherList.length;a++){var n=this.voucherList[a];if(Object.is(Number(n.debitAmount),NaN)&&(n.debitAmount=0),Object.is(Number(n.creditAmount),NaN)&&(n.creditAmount=0),0!==Number(n.debitAmount)&&0!==Number(n.creditAmount))return this.$message.warning("在第"+(a+1)+"条中,借方金额或贷方金额必须有一方为0"),void(e=!1);if(0===Number(n.debitAmount)&&0===Number(n.creditAmount))return this.$message.warning("在第"+(a+1)+"条中,借方金额和贷方金额全为0,请确认！"),void(e=!1)}return this.model.amount!==this.model.creditAmountSum?(this.$message.warning("借方合计金额必须与贷方合计金额一致"),void(e=!1)):e}e=!1},AmountChange:function(){var e=0,t=0,a=this.voucherList;a.forEach((function(a){a.debitAmount&&(e+=Number(a.debitAmount)),a.creditAmount&&(t+=Number(a.creditAmount))})),this.model.amount=e.toFixed(2),this.model.creditAmountSum=t.toFixed(2),this.$emit("computePreaccr"),this.$forceUpdate()},chooseAll:function(e){this.$refs.voucherRef.setAllCheckboxRow(e.target.checked)},removeVoucherInfo:function(){var e=this.$refs.voucherRef.getCheckboxRecords();if(e&&e.length<=0)return this.$message.warning("请选择要删除的数据");if(this.voucherList.length-e.length<1)return this.$message.warning("至少保留一条数据");var t=[],a=this;e.forEach((function(e){t.push(e._XID)})),this.$confirm({title:"是否确认删除选中数据？",okText:"确认",okCancel:"取消",onOk:function(){t.forEach((function(e){a.voucherList.forEach((function(t,n){t._XID===e&&a.voucherList.splice(n,1)}))})),a.AmountChange(),a.$message.success("删除成功"),a.$forceUpdate()},onCancel:function(){return!1}})},addVoucherInfo:function(e){e._columnIndex,e.$rowIndex;this.voucherList.push({})},edit:function(e){this.voucherList=e;for(var t=0;t<e.length;t++)this.voucherList[t].itemNo=e[t].crItemNo},submitForm:function(){var e=this;if(this.valida()){this.model.makeDate=u()(this.model.makeDate).format("YYYY-MM-DD"),e.confirmLoading=!0;var t=Object.assign({},this.model);t.makeOper=l["default"].ls.get(s["J"]).username,t.vouList=this.voucherList,t.fileIdList=this.fileIdList;var a="",n="";this.model.id?(a+=this.url.edit,n="put"):(a+=this.url.add,n="post"),Object(r["i"])(a,t,n).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1}))}},footerMethod:function(e){var t=e.columns;return[t.map((function(e,t){return""}))]},footerSpanMethod:function(e){e._rowIndex;var t=e._columnIndex,a=e.$rowIndex;if(0===a){if(0===t)return{colspan:2};if(1===t)return{colspan:0};if(2===t)return{colspan:1};if(3===t)return{colspan:1};if(4===t)return{colspan:1};if(5===t)return{colspan:1}}},busiTypeWatch:function(e){var t=this;Object(r["e"])(this.url.cateQueryById,{id:e}).then((function(e){e.result&&e.success&&(t.model.busiTypeDetail=e.result.code)}))},itemChange:function(e,t,a){var n=t.data;this.$set(e,"itemName",n.attrs.data.itemName),this.$refs.voucherRef.updateStatus({row:e,column:a})}}},v=p,y=(a("ed2c1"),a("2877")),g=Object(y["a"])(v,n,o,!1,null,"75bf7a7a",null);t["default"]=g.exports},"190a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"操作引导",width:1e3,bodyStyle:{padding:0}},model:{value:e.guideShow,callback:function(t){e.guideShow=t},expression:"guideShow"}},[a("a-carousel",{ref:"carousel",staticStyle:{"border-radius":"3px"},attrs:{"after-change":e.onChange}},e._l(e.pageList,(function(t){return a("div",{staticStyle:{width:"100%",height:"500px"},domProps:{innerHTML:e._s(t.message)}})})),0),a("div",{staticStyle:{background:"#FFFFFF",height:"40px","line-height":"40px","padding-left":"5px","padding-right":"5px","margin-top":"5px","border-radius":"3px"},attrs:{slot:"footer"},slot:"footer"},[a("a-row",[a("a-col",{staticStyle:{"text-align":"left"},attrs:{span:"6"}},[a("a-button",{on:{click:e.onPrev}},[e._v("上一步")])],1),a("a-col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s("第"+(e.index+1)+"项/共"+e.pageList.length+"项"))])]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}},[a("a-button",{on:{click:e.onNext}},[e._v("下一步")])],1)],1)],1)],1)},o=[],r=a("0fea"),i={name:"GuidePage",data:function(){return{index:0,guideShow:!1,pageList:[]}},created:function(){this.getContent()},methods:{getContent:function(){var e=this;Object(r["e"])("/content/contentBaseType/listContentByType",{type:"guide"}).then((function(t){if(t.success&&t.result){var a=localStorage.getItem("guideAnalysis");a!==JSON.stringify(t.result)&&(e.pageList=t.result,document.body.parentNode.style.overflowY="hidden",e.guideShow=!0,localStorage.setItem("guideAnalysis",JSON.stringify(t.result)))}}))},onNext:function(){this.$refs.carousel.next()},onPrev:function(){this.$refs.carousel.prev()},onChange:function(e){this.index=e},onButtonCilck:function(e){e&&(this.guideShow=!1)}}},l=i,s=a("2877"),c=Object(s["a"])(l,n,o,!1,null,"7db590d0",null);t["default"]=c.exports},"2439f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{"body-style":{display:"flex",flexDirection:"column"},bordered:!1}},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{type:"queryList",fieldList:e.queryObj,saveCode:e.fileName},on:{ok:e.handleSuperQuery},scopedSlots:e._u([{key:"crBankCode",fn:function(t){var n=t.row;return[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择投资银行"},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,serial:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerCellStyle:{textAlign:"right"},"header-align":"center","table-height":"auto",expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery")},scopedSlots:e._u([{key:"depRecNo",fn:function(t){var n=t.text,o=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(o,0)}}},[e._v(e._s(n))])]}},{key:"crBankCode_dictText",fn:function(t){var n=t.text;t.row;return[a("span",n?[e._v(e._s(n))]:[e._v("/")])]}},{key:"state",fn:function(t){var n=t.text;t.row;return["0"===n?a("span",[e._v("完成")]):"1"===n?a("span",[e._v("在途")]):"2"===n?a("span",[e._v("终止")]):e._e()]}},{key:"timeState",fn:function(t){t.text;var n=t.row;return["已到期"===e.setTimeState(n.matDate,n.state)?a("span",{staticStyle:{color:"#ff0000"}},[e._v(" "+e._s(e.setTimeState(n.matDate,n.state))+" ")]):a("span",[e._v(" "+e._s(e.setTimeState(n.matDate,n.state))+" ")])]}},{key:"restAmount",fn:function(t){var n=t.text;t.row;return[a("span",n>0?[e._v(e._s(n))]:[e._v("0.00")])]}},{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.addIncrement()}}},[e._v("新建")])],1)]},proxy:!0},{key:"action",fn:function(t){var n=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(n,2)}}},[a("a-icon",{attrs:{type:"to-top"}}),e._v("提取")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?",placement:"left"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])]}}])})],1),a("invest-info-modal",{ref:"investInfoModal",on:{close:e.queryPage,ok:e.queryPage}})],1)},o=[],r=a("0a5e"),i=a("6fa9"),l=a("0fea"),s=a("c1df"),c=a.n(s),d=a("1265"),u=a("3269"),m={name:"IncrementList",components:{InvestInfoModal:d["default"],MESSuperQuery:i["default"],JDictBankListSelect:u["default"]},mixins:[r["a"]],data:function(){var e=this;return{fileName:"incrementList",description:"智能增值管理页面",queryObj:[{type:"slot",slotName:"crBankCode",value:"crBankCode",label:"投资银行"},{type:"input",value:"depRecNo",label:"存单号",queryType:"like"},{type:"select",value:"state",label:"存单状态",options:[{label:"全部",value:""},{label:"完成",value:"0"},{label:"在途",value:"1"},{label:"终止",value:"2"}]},{type:"date",value:"invDate",maxDate:"invDate",label:"投资开始日期",queryType:"ge"},{type:"date",value:"invDate",minDate:"invDate",label:"投资结束日期",queryType:"le"},{type:"date",value:"matDate",maxDate:"matDate",label:"到期开始日期",queryType:"ge"},{type:"date",value:"matDate",minDate:"matDate",label:"到期结束日期",queryType:"le"}],columns:[{title:"存单号",align:"left",width:180,field:"depRecNo",slot:!0},{title:"业务编号",align:"left",width:150,field:"busiNo"},{title:"投资银行",align:"left",width:100,field:"crBankCode_dictText",slot:!0},{title:"投资类型",align:"center",width:100,field:"invType_dictText"},{title:"投资金额(元)",align:"right",width:140,field:"amount",formatter:"amount"},{title:"年利率%",align:"right",width:80,field:"accrRate",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2)}},{title:"投资期限",align:"center",width:80,field:"term_dictText"},{title:"投资日期",align:"center",width:110,field:"invDate",formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}},{title:"到期日期",align:"center",width:110,field:"matDate",formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}},{title:"预计收益(元)",align:"right",width:110,field:"preInvIncome",formatter:"amount"},{title:"已提取利息(元)",align:"right",width:110,field:"realAmount",formatter:"amount"},{title:"待提取利息(元)",align:"right",width:110,field:"restAmount",formatter:"amount",slot:!0},{title:"存单状态",align:"center",width:80,field:"state",slot:!0},{title:"到期状态",align:"center",width:80,field:"timeState",slot:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:190,slot:!0}],loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/appreciation/investInfo/list",delete:"/appreciation/investInfo/delete"}}},methods:{addIncrement:function(){this.$refs.investInfoModal.isDetail=!1,this.$refs.investInfoModal.title="新增增值项目",this.$refs.investInfoModal.add()},setTimeState:function(e,t){var a="未到期",n=new Date;e=e.replace(/-/g,"/");var o=new Date(e);return n.getTime()>o.getTime()&&(a="已到期"),a},handleDetail:function(e,t){if(1===t&&0!==e.realAmount)return this.$message.warning("已存在预提数据，禁止修改！"),!1;0===t?(this.$refs.investInfoModal.isDetail=!0,this.$refs.investInfoModal.raiseRatesCompShow=!0,this.$refs.investInfoModal.title="增值项目详情"):2===t?(this.$refs.investInfoModal.isDetail=!0,this.$refs.investInfoModal.raiseRatesCompShow=!0,this.$refs.investInfoModal.title="提取利息"):this.$refs.investInfoModal.isDetail=!1,this.$refs.investInfoModal.edit(e)}}},f=m,h=(a("74c4"),a("2877")),p=Object(h["a"])(f,n,o,!1,null,"3a370288",null);t["default"]=p.exports},"250c":function(e,t,a){},"2e12":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{"body-style":{display:"flex",flexDirection:"column"},bordered:!1}},[a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},bordered:"",stripe:!0,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,footerCellStyle:{textAlign:"right"},"header-align":"center","table-height":null,expand:!1,data:e.loadData,tableColumn:e.columns,"show-pagination":!1},scopedSlots:e._u([{key:"state",fn:function(t){var n=t.text;t.row;return["0"===n?a("span",[e._v("已提取")]):"1"===n?a("span",[e._v("未提取")]):a("span",{staticStyle:{color:"#cc0000"}},[e._v("无法提取利息")])]}},e.showOption?{key:"action",fn:function(t){var n=t.row,o=t.rowIndex;return["1"===n.state&&e.compareDate(n.holdDate)?a("a",{on:{click:function(t){return e.handleDetail(n,o)}}},[a("a-icon",{attrs:{type:"to-top"}}),e._v("计提")],1):e._e(),"1"!==n.state||e.compareDate(n.holdDate)?e._e():a("span",{staticStyle:{color:"#cc0000"}},[e._v("未到计提日期")]),"1"===n.state&&o!==e.rowLength-1?a("a-divider",{attrs:{type:"vertical"}}):e._e(),"1"===n.state&&o!==e.rowLength-1?a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]):e._e(),"0"===n.state?a("a",{on:{click:function(t){return e.handleDetail(n,o)}}},[e._v("提取信息")]):e._e()]}}:null],null,!0)})],1),a("raise-rates-modal",{ref:"raiseRatesModal",attrs:{"invest-info":e.investInfo},on:{queryPage:e.queryPage}}),a("raise-rates-final-modal",{ref:"raiseRatesFinalModal",attrs:{"invest-info":e.investInfo},on:{queryPage:e.queryPage}})],1)},o=[],r=a("eccd"),i=(a("6eb7"),a("fdce")),l=a("0a5e"),s=a("0fea"),c=a("c1df"),d=a.n(c),u=a("b1d3"),m=a("5a69"),f=a("da39");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return(t=g(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){var t=b(e,"string");return"symbol"==h(t)?t:t+""}function b(e,t){if("object"!=h(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var w={name:"RaiseRatesComp",components:{RaiseRatesModal:u["default"],RaiseRatesFinalModal:m["default"],JDDictSelectTag:r["default"],JDictRegionListSelect:i["default"]},mixins:[l["a"],f["FooterMethod"]],props:{extId:{type:String,default:""},showOption:{type:Boolean,default:!0}},data:function(){var e=this;return{fileName:"RaiseRatesComp",columns:[{title:"预设计提日期",align:"center",width:160,field:"holdDate",formatter:function(e){var t=e.cellValue;return t?d()(t).format("YYYY-MM-DD"):""}},{title:"计提金额（元）",align:"right",width:150,field:"holdSum",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2)}},{title:"实提日期",align:"center",width:160,field:"actualDate",formatter:function(e){var t=e.cellValue;return t?d()(t).format("YYYY-MM-DD"):""}},{title:"实提金额（元）",align:"right",width:150,field:"actualSum",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2)}},{title:"计提状态",align:"center",width:150,field:"state",slot:!0},{title:"操作",field:"action",align:"center",fixed:"right",slot:!0}],rowLength:0,loadData:function(t){return Object(s["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.rowLength=t.result.records.length,t.result.records}))},url:{list:"/appreciation/raiseRates/list",delete:"/appreciation/raiseRates/delete"},queryParam:{extId:this.extId},investInfo:{}}},created:function(){},methods:{handleDetail:function(e,t){var a=this.$refs.table.getTableData();a.length===t+1?(this.$refs.raiseRatesFinalModal.model=v({},e),"1"===e.state&&("1"===this.investInfo.invType&&(this.$set(this.$refs.raiseRatesFinalModal.model,"bankCode",this.investInfo.bankCode),this.$set(this.$refs.raiseRatesFinalModal.model,"spaccCode",this.investInfo.spaccCode)),this.$set(this.$refs.raiseRatesFinalModal.model,"voucheFlag",this.investInfo.voucheFlag)),this.$set(this.$refs.raiseRatesFinalModal.model,"voucheFlagF","1"===this.$refs.raiseRatesFinalModal.model.voucheFlag),this.$refs.raiseRatesFinalModal.isDisable="0"===e.state,this.$refs.raiseRatesFinalModal.init(),this.$refs.raiseRatesFinalModal.visible=!0):(this.$refs.raiseRatesModal.model=v({},e),"1"===e.state&&("1"===this.investInfo.invType&&(this.$set(this.$refs.raiseRatesModal.model,"bankCode",this.investInfo.bankCode),this.$set(this.$refs.raiseRatesModal.model,"spaccCode",this.investInfo.spaccCode)),this.$set(this.$refs.raiseRatesModal.model,"voucheFlag",this.investInfo.voucheFlag)),this.$set(this.$refs.raiseRatesModal.model,"voucheFlagF","1"===this.$refs.raiseRatesModal.model.voucheFlag),this.$refs.raiseRatesModal.isDisable="0"===e.state,this.$refs.raiseRatesModal.visible=!0)},footerSpanMethod:function(e){e._rowIndex;var t=e._columnIndex;return 0===t?{colspan:2}:t<2?{colspan:0}:void 0},compareDate:function(e){return d()(e).isBefore(d()(new Date).format("YYYY-MM-DD"))}}},x=w,k=(a("6fa5"),a("2877")),C=Object(k["a"])(x,n,o,!1,null,"7c6dcb27",null);t["default"]=C.exports},"3cf6":function(e,t,a){"use strict";a("250c")},"4e0a":function(e,t,a){},"512b":function(e,t,a){},"5a69":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:1090,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}}},on:{cancel:e.handleCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{disabled:e.isDisable,type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("\n      关闭\n    ")],1),a("a-button",{attrs:{disabled:e.isDisable,type:"primary"},on:{click:e.submitForm}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("\n      确定\n    ")],1)]},proxy:!0}])},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow"}},[a("a-row",{ref:"formBillRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("承办银行")]),a("a-col",{attrs:{span:8,"data-prop":"bankCode"}},[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择银行","is-detail":e.isDisable||"1"==e.investInfo.invType},on:{change:function(t){return e.changeCode("crBank")}},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1),a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("专户账号")]),a("a-col",{attrs:{span:8,"data-prop":"spaccCode"}},[a("input-search-modal",{attrs:{options:{value:"code",label:"code",search:"code",highValue:"code",highLabel:"code"},action:"/business/rSpAccInfo/list?bankCode="+(e.model.bankCode?e.model.bankCode:"XX"),placeholder:"请选择专户账号",width:"100%",disabled:e.isDisable||"1"==e.investInfo.invType},model:{value:e.model.spaccCode,callback:function(t){e.$set(e.model,"spaccCode",t)},expression:"model.spaccCode"}})],1),a("a-col",{attrs:{span:4}},[e._v("预计利息")]),a("a-col",{attrs:{span:8}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{disabled:"","addon-after":"元"},model:{value:e.investInfo.preInvIncome,callback:function(t){e.$set(e.investInfo,"preInvIncome",t)},expression:"investInfo.preInvIncome"}})],1),a("a-col",{attrs:{span:4}},[e._v("已计提利息")]),a("a-col",{attrs:{span:8}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{disabled:"","addon-after":"元"},model:{value:e.model.hasSum,callback:function(t){e.$set(e.model,"hasSum",t)},expression:"model.hasSum"}})],1),a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("实际总利息")]),a("a-col",{attrs:{span:8,"data-prop":"realSum"}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入实提金额",disabled:e.isDisable,"is-zero":!1,"minus-flag":!1,"addon-after":"元"},on:{change:e.changeRealSum},model:{value:e.model.realSum,callback:function(t){e.$set(e.model,"realSum",t)},expression:"model.realSum"}})],1),a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("实提日期")]),a("a-col",{attrs:{span:8,"data-prop":"actualDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisable,placeholder:"请输入实提日期",valueFormat:e.dateFormat},model:{value:e.model.actualDate,callback:function(t){e.$set(e.model,"actualDate",t)},expression:"model.actualDate"}})],1),a("a-col",{attrs:{span:4}},[e._v("本次计提利息")]),a("a-col",{attrs:{span:8}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{disabled:"","addon-after":"元"},model:{value:e.model.actualSum,callback:function(t){e.$set(e.model,"actualSum",t)},expression:"model.actualSum"}})],1),a("a-col",{attrs:{span:4}},[e._v("收回本金")]),a("a-col",{attrs:{span:8}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{disabled:"","addon-after":"元"},model:{value:e.investInfo.amount,callback:function(t){e.$set(e.investInfo,"amount",t)},expression:"investInfo.amount"}})],1),a("a-col",{attrs:{span:4}},[e._v("是否生成财务凭证")]),a("a-col",{attrs:{span:8}},[a("a-switch",{attrs:{disabled:e.isDisable,"checked-children":"是","un-checked-children":"否"},on:{change:e.handleVoucheFlag},model:{value:e.model.voucheFlagF,callback:function(t){e.$set(e.model,"voucheFlagF",t)},expression:"model.voucheFlagF"}})],1)],1)],1)],1)],1)},o=[],r=a("0fea"),i=a("3269"),l=a("aa2d"),s=a("4aae");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function m(e,t,a,n){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),l=new O(n||[]);return o(i,"_invoke",{value:I(e,a,l)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var h="suspendedStart",p="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function x(){}var k={};u(k,i,(function(){return this}));var C=Object.getPrototypeOf,_=C&&C(C(E([])));_&&_!==a&&n.call(_,i)&&(k=_);var S=x.prototype=b.prototype=Object.create(k);function D(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function $(e,t){function a(o,r,i,l){var s=f(e[o],e,r);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"==c(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,l)}))}l(s.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function I(t,a,n){var o=h;return function(r,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var l=n.delegate;if(l){var s=L(l,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,g;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,g):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function E(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},D($.prototype),u($.prototype,l,(function(){return this})),t.AsyncIterator=$,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new $(m(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},D(S),u(S,s,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return l.type="throw",l.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),F(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;F(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:E(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function m(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){u(r,n,o,i,l,"next",e)}function l(e){u(r,n,o,i,l,"throw",e)}i(void 0)}))}}var f={name:"RaiseRatesFinalModal",components:{JDictBankListSelect:i["default"],inputSearchModal:l["default"],amountInput:s["default"]},props:{investInfo:{type:Object}},data:function(){return{title:"投资计提利息",visible:!1,disableSubmit:!1,model:{},disabled:!0,dateFormat:"YYYY-MM-DD",confirmLoading:!1,validatorRules:{realSum:[{required:!0,message:"请输入实提资金"},{validator:this.checkRealSum,type:"Promise"}],actualDate:[{required:!0,message:"请选择实提时间"}],bankCode:[{required:!0,message:"请选择承办银行"}],spaccCode:[{required:!0,message:"请选择专户账号"}]},url:{edit:"/appreciation/raiseRates/finalEdit",queryHasAmountByExtId:"/appreciation/raiseRates/queryHasAmountByExtId"},isDisable:!1}},methods:{changeCode:function(){this.$set(this.model,"spaccCode","")},checkRealSum:function(e,t){var a=this;return new Promise((function(e){t?t<a.model.hasSum?e("实际利息不能小于计提金额!"):e():e("请输入实际利息!")}))},changeRealSum:function(){this.model.actualSum=this.model.realSum-this.model.hasSum},init:function(){var e=this;Object(r["e"])(this.url.queryHasAmountByExtId,{extId:this.investInfo.id}).then((function(t){t.success?(e.$set(e.model,"hasSum",t.result),e.isDisable&&e.$set(e.model,"realSum",t.result)):e.$message.error("计提信息异常。")}))},close:function(){this.$emit("close"),this.visible=!1,this.model={}},submitForm:function(){var e=m(d().mark((function e(){var t,a=this;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.valida();case 2:if(!e.sent){e.next=7;break}t=this,t.confirmLoading=!0,this.model.state="0",Object(r["l"])(this.url.edit,this.model).then((function(e){e.success?(t.$message.success(e.result),t.confirmLoading=!1,t.close()):t.$message.warning(e.message),a.$emit("queryPage")}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valida:function(){var e=m(d().mark((function e(){var t;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validaRowMsgPro(this.$refs.formBillRow);case 2:return t=e.sent,e.abrupt("return",t.valida);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},handleVoucheFlag:function(){this.model.voucheFlagF?this.$set(this.model,"voucheFlag","1"):this.$set(this.model,"voucheFlag","0")}}},h=f,p=(a("61aa"),a("2877")),v=Object(p["a"])(h,n,o,!1,null,"03089184",null);t["default"]=v.exports},"61aa":function(e,t,a){"use strict";a("c61b")},"6afd":function(e,t,a){"use strict";a("0b07f")},"6fa5":function(e,t,a){"use strict";a("4e0a")},"74c4":function(e,t,a){"use strict";a("88be")},"78ed":function(e,t,a){e.exports=a.p+"225bd76470169327e33868a1ca5bd1db.md"},"88be":function(e,t,a){},a99c:function(e,t,a){},b1d3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:1090,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}}},on:{cancel:e.handleCancel,ok:e.submitForm},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:""},on:{click:e.handleCancel}},[a("a-icon",{attrs:{type:"close-circle"}}),e._v("\n      关闭\n    ")],1),a("a-button",{attrs:{disabled:e.isDisable,type:"primary"},on:{click:e.submitForm}},[a("a-icon",{attrs:{type:"check-circle"}}),e._v("\n      确定\n    ")],1)]},proxy:!0}])},[a("a-spin",{ref:"spinRef",attrs:{spinning:e.confirmLoading}},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow"}},[a("a-row",{ref:"formBillRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},["2"!=e.investInfo.invType||e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("承办银行")]),a("a-col",{attrs:{span:8,"data-prop":"bankCode"}},[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{"show-icon":"",placeholder:"请选择银行","is-detail":e.isDisable||"1"==e.investInfo.invType},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1),a("a-col",{attrs:{span:4}},["2"!=e.investInfo.invType||e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("专户账号")]),a("a-col",{attrs:{span:8,"data-prop":"spaccCode"}},[a("input-search-modal",{attrs:{options:{value:"code",label:"code",search:"code",highValue:"code",highLabel:"code"},action:"/business/rSpAccInfo/list?bankCode="+(e.model.bankCode?e.model.bankCode:"XX"),placeholder:"请选择专户账号",width:"100%",disabled:e.isDisable||"1"==e.investInfo.invType},model:{value:e.model.spaccCode,callback:function(t){e.$set(e.model,"spaccCode",t)},expression:"model.spaccCode"}})],1),a("a-col",{attrs:{span:4}},[e._v("计提金额")]),a("a-col",{attrs:{span:8}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{disabled:"","addon-after":"元"},model:{value:e.model.holdSum,callback:function(t){e.$set(e.model,"holdSum",t)},expression:"model.holdSum"}})],1),a("a-col",{attrs:{span:4}},[e._v("计提日期")]),a("a-col",{attrs:{span:8}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",valueFormat:e.dateFormat},model:{value:e.model.holdDate,callback:function(t){e.$set(e.model,"holdDate",t)},expression:"model.holdDate"}})],1),a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("实提金额")]),a("a-col",{attrs:{span:8,"data-prop":"actualSum"}},[a("amount-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入实提金额",disabled:e.isDisable,"is-zero":!1,"minus-flag":!1,"addon-after":"元"},model:{value:e.model.actualSum,callback:function(t){e.$set(e.model,"actualSum",t)},expression:"model.actualSum"}})],1),a("a-col",{attrs:{span:4}},[e.isDisable?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("实提日期")]),a("a-col",{attrs:{span:8,"data-prop":"actualDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisable,placeholder:"请输入实提日期",valueFormat:e.dateFormat},model:{value:e.model.actualDate,callback:function(t){e.$set(e.model,"actualDate",t)},expression:"model.actualDate"}})],1),a("a-col",{attrs:{span:4}},[e._v("是否生成财务凭证")]),a("a-col",{attrs:{span:8}},[a("a-switch",{attrs:{disabled:e.isDisable,"checked-children":"是","un-checked-children":"否"},on:{change:e.handleVoucheFlag},model:{value:e.model.voucheFlagF,callback:function(t){e.$set(e.model,"voucheFlagF",t)},expression:"model.voucheFlagF"}})],1)],1)],1)],1)],1)},o=[],r=a("0fea"),i=a("3269"),l=a("aa2d"),s=a("4aae");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function m(e,t,a,n){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),l=new O(n||[]);return o(i,"_invoke",{value:I(e,a,l)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var h="suspendedStart",p="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function x(){}var k={};u(k,i,(function(){return this}));var C=Object.getPrototypeOf,_=C&&C(C(E([])));_&&_!==a&&n.call(_,i)&&(k=_);var S=x.prototype=b.prototype=Object.create(k);function D(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function $(e,t){function a(o,r,i,l){var s=f(e[o],e,r);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"==c(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(u).then((function(e){d.value=e,i(d)}),(function(e){return a("throw",e,i,l)}))}l(s.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function I(t,a,n){var o=h;return function(r,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var l=n.delegate;if(l){var s=L(l,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,g;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,g):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function E(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},D($.prototype),u($.prototype,l,(function(){return this})),t.AsyncIterator=$,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new $(m(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},D(S),u(S,s,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return l.type="throw",l.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),F(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;F(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:E(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function m(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){u(r,n,o,i,l,"next",e)}function l(e){u(r,n,o,i,l,"throw",e)}i(void 0)}))}}var f={name:"RaiseRatesModal",components:{JDictBankListSelect:i["default"],InputSearchModal:l["default"],amountInput:s["default"]},props:{investInfo:{type:Object}},data:function(){return{title:"投资计提利息",visible:!1,disableSubmit:!1,model:{},disabled:!0,dateFormat:"YYYY-MM-DD",confirmLoading:!1,validatorRules:{bankCode:[{required:!0,message:"请选择银行!",trigger:"change"}],spaccCode:[{required:!0,message:"请选择专户!",trigger:"change"}],actualSum:[{required:!0,message:"请输入实提金额!"},{validator:this.checkActualSum,type:"Promise"}],actualDate:[{required:!0,message:"请选择实提日期!",trigger:"change"}]},url:{edit:"/appreciation/raiseRates/edit"},isDisable:!1}},created:function(){},methods:{checkActualSum:function(e,t){var a=this;return new Promise((function(e){t?t>a.model.holdSum?e("实提金额不能大于计提金额!"):e():e("请输入实提金额!")}))},close:function(){this.visible=!1,this.model={}},submitForm:function(){var e=m(d().mark((function e(){var t,a=this;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.valida();case 2:if(!e.sent){e.next=7;break}t=this,t.confirmLoading=!0,this.model.state="0",Object(r["l"])(this.url.edit,this.model).then((function(e){e.success?(t.$message.success(e.result),t.confirmLoading=!1,t.close()):t.$message.warning(e.message),a.$emit("queryPage")}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valida:function(){var e=m(d().mark((function e(){var t;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validaRowMsgPro(this.$refs.formBillRow);case 2:return t=e.sent,e.abrupt("return",t.valida);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.close()},handleVoucheFlag:function(){this.model.voucheFlagF?this.$set(this.model,"voucheFlag","1"):this.$set(this.model,"voucheFlag","0")}}},h=f,p=(a("3cf6"),a("2877")),v=Object(p["a"])(h,n,o,!1,null,"a60e6ede",null);t["default"]=v.exports},b407:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"mainCard",attrs:{bordered:!1,id:"__guideStartFind"}},[a("div",{staticClass:"cardBody"},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"页面路径"}},[a("a-input",{attrs:{placeholder:"请输入页面路径"},model:{value:e.queryParam.path,callback:function(t){e.$set(e.queryParam,"path",t)},expression:"queryParam.path"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"提示标题"}},[a("a-input",{attrs:{placeholder:"请输入提示标题"},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),a("a-button",{attrs:{icon:"delete"},on:{click:e.batchDel}},[e._v("删除")])],1),a("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[a("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v(" 已选择 "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项\n      "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),a("div",{ref:"modalContent",staticClass:"tableDiv"},[a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,scroll:{y:e.tableHeight+"px"},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.tableDelete(n.id)}}},[e._v("删除 "),a("a-icon",{attrs:{type:"delete"}})],1)],1)}}])})],1)]),a("guide-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},o=[],r=(a("6eb7"),a("db97")),i=a("b65a"),l={name:"GuideList",mixins:[i["a"]],components:{GuideModal:r["default"]},data:function(){return{description:"导航页管理页面",columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"页面",align:"center",dataIndex:"path_dictText"},{title:"对象选择器",align:"center",dataIndex:"element",width:500,ellipsis:!0},{title:"提示标题",align:"center",dataIndex:"title"},{title:"排序",align:"center",dataIndex:"position"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/guide/guide/list",delete:"/guide/guide/delete",deleteBatch:"/guide/guide/deleteBatch",exportXlsUrl:"guide/guide/exportXls",importExcelUrl:"guide/guide/importExcel"}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},mounted:function(){this.getTableHeight(),window.addEventListener("resize",this.getTableHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.getTableHeight)},methods:{getTableHeight:function(){var e=this;e.resetScreenSize(90)},tableDelete:function(e){var t=this;t.$confirm({title:"是否确认删除？",onOk:function(){t.handleDelete(e)}})}}},s=l,c=(a("62d5"),a("e4de"),a("2877")),d=Object(c["a"])(s,n,o,!1,null,"7acad486",null);t["default"]=d.exports},c61b:function(e,t,a){},ce61:function(e,t,a){},d1b6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{switchFullscreen:!0,title:"定期明细","body-style":{padding:0},visible:e.visible,width:"1200px","modal-height":"80vh"},on:{ok:e.handleCancel,cancel:e.handleCancel}},[[a("a-card",{staticClass:"mainCard",attrs:{"body-style":{display:"flex",flexDirection:"column"},bordered:!1}},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{type:"queryList",fieldList:e.queryObj,saveCode:e.fileName,"default-query":!0,resetQuery:!1},on:{ok:e.handleSuperQuery,reset:e.reset},scopedSlots:e._u([{key:"crBankCode",fn:function(t){var n=t.row;return[a("j-dict-bank-list-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,"is-detail":!0,"show-icon":"",placeholder:"请选择投资银行"},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}})]}}])}),a("div",{staticClass:"tableDiv"},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,serial:!1,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,footerCellStyle:{textAlign:"right"},"header-align":"center","table-height":"auto",expand:!1,data:e.loadData,footerMethod:e.footerMethod,tableColumn:e.columns,"if-init-query":!1},scopedSlots:e._u([{key:"depRecNo",fn:function(t){var n=t.text,o=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(o,0)}}},[e._v(e._s(n))])]}},{key:"crBankCode_dictText",fn:function(t){var n=t.text;t.row;return[a("span",{attrs:{disabled:!0}},n?[e._v(e._s(n))]:[e._v("/")])]}},{key:"state",fn:function(t){var n=t.text;t.row;return["0"===n?a("span",[e._v("完成")]):"1"===n?a("span",[e._v("在途")]):"2"===n?a("span",[e._v("终止")]):e._e()]}},{key:"timeState",fn:function(t){t.text;var n=t.row;return["已到期"===e.setTimeState(n.matDate,n.state)?a("span",{staticStyle:{color:"#ff0000"}},[e._v(" "+e._s(e.setTimeState(n.matDate,n.state))+" ")]):a("span",[e._v(" "+e._s(e.setTimeState(n.matDate,n.state))+" ")])]}},{key:"restAmount",fn:function(t){var n=t.text;t.row;return[a("span",n>0?[e._v(e._s(n))]:[e._v("0.00")])]}},{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.addIncrement()}}},[e._v("新建")])],1)]},proxy:!0}])})],1),a("invest-info-modal",{ref:"investInfoModal",on:{close:e.queryPage,ok:e.queryPage}})],1)]],2)},o=[],r=a("0a5e"),i=a("6fa9"),l=a("0fea"),s=a("c1df"),c=a.n(s),d=a("1265"),u=a("3269"),m=a("3ed7"),f=a("c695"),h=a.n(f),p={name:"IncrementList",components:{InvestInfoModal:d["default"],MESSuperQuery:i["default"],JDictBankListSelect:u["default"]},mixins:[r["a"]],data:function(){var e=this;return{fileName:"RegDetailList",description:"定期明细页面",visible:!1,spaCode:"",queryObj:[{type:"slot",slotName:"crBankCode",value:"crBankCode",label:"投资银行"},{type:"input",value:"depRecNo",label:"存单号",queryType:"like"},{type:"select",value:"state",label:"存单状态",options:[{label:"全部",value:""},{label:"完成",value:"0"},{label:"在途",value:"1"},{label:"终止",value:"2"}]},{type:"date",value:"invDate",maxDate:"invDate",label:"投资开始日期",queryType:"ge"},{type:"date",value:"invDate",minDate:"invDate",label:"投资结束日期",queryType:"le"},{type:"date",value:"matDate",maxDate:"matDate",label:"到期开始日期",queryType:"ge"},{type:"date",value:"matDate",minDate:"matDate",label:"到期结束日期",queryType:"le"}],columns:[{title:"存单号",align:"left",width:180,field:"depRecNo",slot:!0},{title:"投资银行",align:"left",width:100,field:"crBankCode_dictText",slot:!0},{title:"投资类型",align:"center",width:100,field:"invType_dictText"},{title:"投资金额(元)",align:"right",width:140,field:"amount",formatter:"amount"},{title:"年利率%",align:"right",width:80,field:"accrRate",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2)}},{title:"投资期限",align:"center",width:80,field:"term_dictText"},{title:"投资日期",align:"center",width:110,field:"invDate",formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}},{title:"到期日期",align:"center",width:110,field:"matDate",formatter:function(e){var t=e.cellValue;return t?c()(t).format("YYYY-MM-DD"):""}},{title:"预计收益(元)",align:"right",width:110,field:"preInvIncome",formatter:"amount"},{title:"已提取利息(元)",align:"right",width:110,field:"realAmount",formatter:"amount"},{title:"待提取利息(元)",align:"right",width:110,field:"restAmount",formatter:"amount",slot:!0},{title:"存单状态",align:"center",width:80,field:"state",slot:!0},{title:"到期状态",align:"center",width:80,field:"timeState",slot:!0}],loadData:function(t){return Object(l["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/appreciation/investInfo/list",delete:"/appreciation/investInfo/delete"}}},methods:{footerMethod:function(e){var t=e.columns,a=e.data,n=[t.map((function(e,t){if("invType_dictText"===e.property)return"合计：";if(["preInvIncome","amount","realAmount","restAmount"].includes(e.property)){var n=a.map((function(t){return Math.max(0,t[e.property]||0)}));return Object(m["g"])(h.a.sum(n))}return null}))];return n},addIncrement:function(){this.$refs.investInfoModal.isDetail=!1,this.$refs.investInfoModal.title="新增增值项目",this.$refs.investInfoModal.add()},handleCancel:function(){this.visible=!1,this.queryParam={},this.$set(this.queryObj[0],"val","")},initData:function(e){var t=this;this.spaCode=e.spaCode,this.visible=!0,this.$nextTick((function(){t.$refs.table.refresh()}))},reset:function(){this.$refs.mesSuperQuery.setQueryListVal([{field:"crBankCode",val:this.spaCode}]),this.$refs.mesSuperQuery.manuallyQuery()},setTimeState:function(e,t){var a="未到期",n=new Date;e=e.replace(/-/g,"/");var o=new Date(e);return n.getTime()>o.getTime()&&(a="已到期"),a},handleDetail:function(e,t){this.$refs.investInfoModal.showOption=!1,0===t?(this.$refs.investInfoModal.isDetail=!0,this.$refs.investInfoModal.raiseRatesCompShow=!0,this.$refs.investInfoModal.title="增值项目详情"):2===t?(this.$refs.investInfoModal.isDetail=!0,this.$refs.investInfoModal.raiseRatesCompShow=!0,this.$refs.investInfoModal.title="提取利息"):this.$refs.investInfoModal.isDetail=!1,this.$refs.investInfoModal.edit(e)}}},v=p,y=(a("f6b64"),a("2877")),g=Object(y["a"])(v,n,o,!1,null,"f27392f2",null);t["default"]=g.exports},db97:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-modal",{attrs:{title:e.title,width:1100,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"path",label:"页面"}},[a("a-tree-select",{ref:"treeSelect",staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.menu,replaceFields:{key:"id",value:"path"},placeholder:"请选择页面"},on:{change:e.treeChange},scopedSlots:e._u([{key:"title",fn:function(t){return a("span",{},[e._v("\n                "+e._s(t)+"\n              ")])}}]),model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"element",label:"对象选择器"}},[a("div",{staticClass:"elementInput"},[a("a-input",{attrs:{readOnly:e.elementReadOnly||!e.model.path,placeholder:e.elementReadOnly?"点击选择元素":"请输入元素selector路径"},on:{click:e.openPreviewPath},model:{value:e.model.element,callback:function(t){e.$set(e.model,"element",t)},expression:"model.element"}}),a("a",{on:{click:e.openElementEdit}},[a("a-icon",{attrs:{type:"edit"}}),e._v(" "+e._s(e.elementReadOnly?"":"关闭")+"自定义编辑\n\t\t\t\t\t\t\t")],1)],1)]),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"title",label:"提示标题"}},[a("a-input",{attrs:{placeholder:"请输入提示标题"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"description",label:"提示内容"}},[a("join-soft-editor",{staticStyle:{width:"100%"},attrs:{"props-http":e.options.props,headers:e.options.headers,action:e.options.action,options:e.options},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"position",label:"排序"}},[a("a-input",{attrs:{placeholder:"请输入排序"},model:{value:e.model.position,callback:function(t){e.$set(e.model,"position",t)},expression:"model.position"}})],1)],1)],1)],1),a("vxe-modal",{ref:"previewModal",staticClass:"__guide",attrs:{"z-index":1300,resize:"",fullscreen:"","destroy-on-close":"",title:"组件预览"},on:{close:e.previewModalClose}},[a("div",{ref:"modalBody",staticClass:"__guide modalBody",attrs:{id:"previewGuideBody"}},[a(e.comps[e.activeComp],{tag:"component"})],1)]),e.previewVisible?a("div",{staticClass:"__guide previewPageTooltip"}):e._e()],1)},o=[],r=a("0fea"),i=a("2b0e"),l=a("9fb0"),s=a("16ad");function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw r}}}}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var m={name:"GuideModal",components:{JoinSoftEditor:s["default"]},data:function(){return{comps:[],activeRoute:"",activeComp:"",previewVisible:!1,elementReadOnly:!0,elementXPath:"",menu:[],title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},options:{headers:{"X-Access-Token":i["default"].ls.get("Access-Token"),sourceName:i["default"].ls.get(l["A"]),redisIndex:i["default"].ls.get(l["x"])},action:window._CONFIG["domianURL"]+"/control/file/uploadImgNormal?parenPath=control&uploadType=5",customConfig:{lineHeights:["1","1.15","1.6","2","2.5","3"]},props:{res:"result",url:"urlPath"}},routers:[],routerIndex:null,confirmLoading:!1,validatorRules:{path:[{required:!0,message:"请选择页面"}],element:[{required:!0,message:"请设置提示元素",trigger:"change"}],title:[{required:!0,message:"请输入提示标题"}],description:[{required:!0,message:"请输入提示内容"}],position:[{required:!0,message:"请输入排序"}]},url:{add:"/guide/guide/add",edit:"/guide/guide/edit",getUserPermissionByToken:"/sys/permission/getUserPermissionByToken"}}},created:function(){this.getMenus(),this.toUrl()},methods:{toUrl:function(){var e={},t=a("c3211");t.keys().forEach((function(a){var n=t(a);e[a.replace(/^\.\/(.*)\.\w+$/,"$1")]=n.default})),this.comps=e},treeChange:function(e,t,a){this.activeRoute=a.triggerNode.dataRef,this.getRouterZIndex()},getRouterZIndex:function(){var e=this;function t(a,n,o){var r,i=null,l=c(a);try{for(l.s();!(r=l.n()).done;){var s=r.value;if(s.path===n?i=s:s.children&&s.children.length>0&&(i=t(s.children,n,o+1)),i)return e.routeIndex||(e.routeIndex=o),i}}catch(d){l.e(d)}finally{l.f()}}e.routeIndex=null,t(e.menu,e.activeRoute.path,0)},getMenus:function(){var e=this,t=i["default"].ls.get(l["a"]);Object(r["e"])(this.url.getUserPermissionByToken,{token:t}).then((function(t){t.success&&(t.result.menu.forEach((function(e){e.selectable=!1,e.title=e.meta.title,e.children&&e.children.length>0?e.children.forEach((function(e){e.selectable=!1,e.title=e.meta.title,e.children&&e.children.length>0?e.children.forEach((function(e){e.selectable=!0,e.title=e.meta.title})):e.selectable=!0})):e.selectable=!0})),e.menu=t.result.menu)}))},getArrayByTree:function(e,t){var a,n=this,o=c(e);try{for(o.s();!(a=o.n()).done;){var r=a.value,i=r;if(i.path===t)return i;if(i.children&&i.children.length>0){var l=n.getArrayByTree(i.children,t);if(l)return l}}}catch(s){o.e(s)}finally{o.f()}},openPreviewPath:function(){var e=this;this.elementReadOnly&&(this.model.path?(this.activeComp=this.activeRoute.component,this.routers=this.$store.state.permission.routers,this.$refs.previewModal.open(),this.previewVisible=!0,this.$refs.previewModal.maximize(),setTimeout((function(){e.generateElementMask()}),1e3)):this.$message.warn("请先选择页面！"))},previewModalClose:function(){var e=this.$el.querySelector(".previewPageTooltip");e&&(e.style.display="none")},generateElementMask:function(){var e=this,t=this,a=this.$el.querySelector(".previewPageTooltip");a.style.display="block";var n=function(n){r&&(clearTimeout(r),r=null),a.style.opacity="0",r=setTimeout((function(){var o=n||window.event,r=o.clientX,i=o.clientY,l=document.elementFromPoint(r,i),s=l.getBoundingClientRect(),c=s.x,d=s.y,u=s.width,m=s.height;a.style.pointerEvents="auto",a.style.left=c-5+"px",a.style.top=d-5+"px",a.style.width=u+10+"px",a.style.height=m+10+"px",a.style.opacity="0.5";for(var f=t.readXPath(l),h="div#routeViewGuide > ",p=0;p<e.routeIndex;p++)h+="div.main > ";f=h+f,t.elementXPath=f}),0)},o=function(e){(void 0!==e.key&&"Escape"===e.key||void 0!==e.keyCode&&27===e.keyCode)&&(a.style.cssText="")};document.addEventListener("keydown",o),a.addEventListener("click",(function(){a.style.cssText="",t.$set(t.model,"element",t.elementXPath),t.$refs.modalBody.removeEventListener("mouseover",n),document.removeEventListener("keydown",o),t.$refs.previewModal.close(),e.previewVisible=!1}));var r=null;this.$refs.modalBody.addEventListener("mouseover",n)},readXPath:function(e){var t=["previewGuideBody"],a=e,n=1,o="";while(1){if(n+=1,n>99)break;if("layoutRightContent"===e.id||"previewGuideBody"===e.id)return o;for(var r=e.parentElement,i=0;i<r.childElementCount;i++)if(e===r.children[i]&&!t.includes(e.id)){o=this.getItem(e,a)+(o&&""!==o?" > ":"")+o;break}e=r}},getItem:function(e,t){for(var a=e.parentElement&&e.parentElement.childElementCount>1,n=!1,o=1,r=0;r<e.parentElement.childElementCount;r++){var i=e.parentElement.children[r];i.id||i.tagName!==e.tagName||i.className!==e.className||(i===e?o=r+1:n=!0)}var l="";return e.id?l="#"+e.id:e.className&&a&&!n?l="string"===typeof e.className?e.tagName.toLowerCase()+"."+(-1!==e.className.indexOf(" ")?e.className.split(" ").join("."):e.className):e.tagName.toLowerCase():n?l=e.tagName.toLowerCase()+":nth-child("+o+")":(l=e.tagName.toLowerCase(),e.className&&"string"===typeof e.className&&a&&(l+="."+e.className.split(" ").join("."))),l},add:function(){this.model={},this.visible=!0},edit:function(e){this.model=Object.assign({},e),this.activeRoute=this.getArrayByTree(this.menu,this.model.path),this.getRouterZIndex(),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.elementReadOnly=!0,this.$refs.form.clearValidate()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var n="",o="";e.model.id?(n+=e.url.edit,o="put"):(n+=e.url.add,o="post"),Object(r["i"])(n,e.model,o).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},openElementEdit:function(){var e=this;e.elementReadOnly?this.$confirm({title:"是否自定义元素路径？",content:"开启后可自定义编辑元素路径，再次点击即可关闭。",onOk:function(){e.elementReadOnly=!1},onCancel:function(){}}):e.elementReadOnly=!0}}},f=m,h=(a("dddc"),a("2877")),p=Object(h["a"])(f,n,o,!1,null,"204ae0c0",null);t["default"]=p.exports},dddc:function(e,t,a){"use strict";a("ce61")},e4de:function(e,t,a){"use strict";a("512b")},ed2c1:function(e,t,a){"use strict";a("04d2")},f6b64:function(e,t,a){"use strict";a("a99c")}}]);