(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~83e80a1f"],{"0340":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"houseBatchExchangeCheck"},[a("content-view",{attrs:{title:"调换房屋"}},[a("div",{staticClass:"changeTableBox"},[a("div",{staticClass:"houseInfoListBox"},[a("vxe-grid",{staticClass:"houseInfoList",attrs:{columns:e.columns,data:e.leftData,"max-height":300,border:"",height:"auto",maxHeight:"360px","show-overflow":"",size:"mini"},scopedSlots:e._u([{key:"houseState",fn:function(t){var n=t.row;return[a("span",["9"==n.houseState?a("span",[e._v("新建档")]):e._e(),"2"==n.houseState?a("span",[e._v("待备案")]):e._e(),"0"==n.houseState?a("span",[e._v("正常")]):e._e(),"4"==n.houseState?a("span",[e._v("待注销")]):e._e(),"5"==n.houseState?a("span",[e._v("已注销")]):e._e(),"8"==n.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}}])})],1),a("vxe-table",{staticClass:"actionTable",attrs:{data:e.HouseInfoList,"max-height":300,align:"center",border:"none",size:"mini"},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div")]},proxy:!0}])},[a("vxe-table-column",{attrs:{width:"32px"}},[a("a-icon",{attrs:{type:"double-right"}})],1)],1),a("div",{staticClass:"houseInfoListBox"},[a("vxe-grid",{staticClass:"houseInfoList",attrs:{columns:e.columns,data:e.rightData,"max-height":300,border:"",height:"auto",maxHeight:"360px","show-overflow":"",size:"mini"},scopedSlots:e._u([{key:"houseState",fn:function(t){var n=t.row;return[a("span",["9"==n.houseState?a("span",[e._v("新建档")]):e._e(),"2"==n.houseState?a("span",[e._v("待备案")]):e._e(),"0"==n.houseState?a("span",[e._v("正常")]):e._e(),"4"==n.houseState?a("span",[e._v("待注销")]):e._e(),"5"==n.houseState?a("span",[e._v("已注销")]):e._e(),"8"==n.houseState?a("span",[e._v("监管划转冻结")]):e._e()])]}}])})],1),a("vxe-table",{staticClass:"actionTable",attrs:{data:e.HouseInfoList,"max-height":300,align:"center",border:"none",size:"mini"},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div")]},proxy:!0}])},[a("vxe-table-column",{attrs:{title:"附件",width:"44px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("a-tooltip",{attrs:{title:"附件预览"}},[a("a-icon",{attrs:{type:"eye"},on:{click:function(t){return e.showFile(n)}}})],1)]}}])})],1)],1)]),a("content-view",{attrs:{title:"调换原因"}},[a("j-form-container",{attrs:{disabled:!0}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("申请人")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.baseInfoMap.changePerson))]),a("a-col",{attrs:{span:4}},[e._v("申请时间")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.baseInfoMap.changeTime))]),a("a-col",{attrs:{span:4}},[e._v("申请原因")]),a("a-col",{attrs:{span:20}},[a("a-textarea",{attrs:{autoSize:{minRows:3},value:e.baseInfoMap.changeReason,readOnly:""}})],1)],1)],1)],1),a("a-modal",{attrs:{destroyOnClose:!0,title:"附件预览",width:"900px"},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{on:{click:function(){return e.visible=!1}}},[e._v("关闭")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("type-attachment-upload",{ref:"typeFile",attrs:{"busi-no":e.fileReqId,"is-detail":!0,"busi-type":"50","busi-type-detail":"505H"}})],1)],1)},o=[],r=a("dc9a"),i=a("3ed7"),s=a("0fea"),l=a("9fbd"),c={name:"HouseBatchExchangeCheck",components:{TypeAttachmentUpload:l["default"],ContentView:r["default"]},data:function(){return{HouseInfoList:[],baseInfoMap:{changeTime:"",changeReason:"",changePerson:""},fileReqId:"",visible:!1,loading:!1,columns:[{title:"房屋位置",align:"left",width:200,field:"address",showOverflow:"tooltip"},{title:"账户编号",align:"center",width:150,field:"code",showOverflow:"tooltip"},{title:"业主姓名",align:"center",width:100,field:"psnName"},{title:"证件号",align:"center",width:150,field:"certNo",showOverflow:"tooltip"},{title:"建筑面积(m²)",align:"right",width:100,field:"struArea",formatter:function(e){var t=e.cellValue;return Object(i["g"])(t,3)}},{title:"房屋售价(元)",align:"right",width:100,field:"totalPrice",formatter:function(e){var t=e.cellValue;return Object(i["g"])(t)}},{title:"应交金额(元)",align:"right",width:100,field:"dueAmount",formatter:function(e){var t=e.cellValue;return Object(i["g"])(t)}},{title:"账户余额(元)",align:"right",width:100,field:"balance",formatter:function(e){var t=e.cellValue;return Object(i["g"])(t)}},{title:"冻结金额(元)",align:"right",width:100,field:"balanceFrozen",formatter:function(e){var t=e.cellValue;return Object(i["g"])(t)}},{title:"房屋状态",align:"center",width:100,field:"houseState",slots:{default:"houseState"}},{title:"账户状态",align:"center",width:100,field:"state_dictText"}],newHouseList:[{left:{},right:{}}],url:{queryHouseChange:"/base/rHouseInfo/queryOwnerHouseBatchChangeByReqId"}}},computed:{leftData:function(){return this.HouseInfoList.map((function(e){return e.sourceInfo}))},rightData:function(){return this.HouseInfoList.map((function(e){return e.targetInfo}))}},methods:{initData:function(e){this.getHouseChangeByReqId(e)},getHouseChangeByReqId:function(e){var t=this;this.loading=!0,Object(s["e"])(this.url.queryHouseChange,{reqId:e}).then((function(e){if(e&&e.success){var a=e.result,n=a.baseInfoMap,o=a.HouseInfoList;t.baseInfoMap=n,t.HouseInfoList=o}else t.$message.warning(e.message);t.loading=!1}))},showFile:function(e){var t=this;this.fileReqId=e.sourceInfo.houseChangeId,this.visible=!0,this.$nextTick((function(){t.$refs.typeFile.initData()}))}}},u=c,d=(a("dbed"),a("26d9"),a("2877")),p=Object(d["a"])(u,n,o,!1,null,"466a6a14",null);t["default"]=p.exports},"07c0":function(e,t,a){"use strict";a("b4ed")},"0a1b":function(e,t,a){},"0cb8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["0"==e.state?a("a-badge",{attrs:{status:"success",text:"正常"}}):"9"==e.state?a("a-badge",{attrs:{status:"processing",text:"新建档"}}):"2"==e.state?a("a-badge",{attrs:{status:"processing",text:"待备案"}}):"4"==e.state?a("a-badge",{attrs:{status:"warning",text:"待注销"}}):"5"==e.state?a("a-badge",{attrs:{status:"error",text:"已注销"}}):"6"==e.state?a("a-badge",{attrs:{status:"warning",text:"待归属变更"}}):"8"==e.state?a("a-badge",{attrs:{status:"error",text:"监管划转冻结"}}):""==e.state?a("a-badge",{attrs:{status:"warning",text:"其他"}}):e._e()],1)},o=[],r={name:"HouseStateComp",props:{state:{type:String,default:""}},data:function(){return{fileName:"HouseStateComp",description:"HouseStateComp"}},created:function(){},methods:{}},i=r,s=(a("123e"),a("2877")),l=Object(s["a"])(i,n,o,!1,null,"1f7436b7",null);t["default"]=l.exports},"0dbd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{attrs:{placeholder:"请选择"+e.title,readOnly:"",unselectable:"on"},on:{search:e.onSearchRegion},model:{value:e.textVals,callback:function(t){e.textVals=t},expression:"textVals"}},[a("a-button",{attrs:{slot:"enterButton",disabled:e.disabled},slot:"enterButton"},[e._v("选择"+e._s(e.title))])],1),a("select-region-modal",{ref:"selectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,"region-ids":e.value,title:e.title,"query-data":e.queryData,columns:e.columns},on:{ok:e.selectOK,initComp:e.initComp}})],1)},o=[],r=a("1556");function i(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw r}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var c={name:"SelectRegion",components:{SelectRegionModal:r["default"]},props:{modalWidth:{type:Number,default:1250,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},multi:{type:Boolean,default:!0,required:!1},queryData:{type:Object,default:function(){return{baseType:"1"}},required:!1},title:{type:String,default:"小区",required:!1},columns:{type:Array,default:function(){return[{title:"名称",align:"left",dataIndex:"name"},{title:"地址",align:"left",dataIndex:"address"},{title:"所属区县",align:"center",dataIndex:"zoneCode_dictText"},{title:"编码",align:"center",dataIndex:"code"}]},required:!1}},data:function(){return{storeVals:"",textVals:""}},mounted:function(){this.storeVals=this.value},watch:{value:function(e){this.storeVals=e}},model:{prop:"value",event:"change"},methods:{initComp:function(e){this.textVals=e},onSearchRegion:function(){this.$refs.selectModal.showModal()},selectOK:function(e){if(e){var t,a=[],n=[],o=i(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;a.push(r["id"]),n.push(r["name"])}}catch(s){o.e(s)}finally{o.f()}this.storeVals=a.join(","),this.textVals=n.join(",")}else this.storeVals="",this.textVals="";this.$emit("change",this.storeVals)}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,o,!1,null,"45ee37cc",null);t["default"]=p.exports},1155:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",{staticClass:"collapseTitle"},[e._v("\n          "+e._s(e.headerTitle)+"\n        ")]),a("a-button",{staticStyle:{"margin-right":"20px","pointer-events":"auto"},attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.editColaccInfo()}}},[e._v("维护")])]},proxy:!0}])},[a("j-form-container",{ref:"formRow",attrs:{rules:e.rules,model:e.accountInfo,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("账户名称")]),e.changePayee?a("a-col",{attrs:{span:8,"data-prop":"name"}},[a("vxe-pulldown",{ref:"pulldown_name",staticClass:"width100",attrs:{disabled:e.disabled,transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[a("a-input",{staticClass:"width100",attrs:{disabled:e.disabled,placeholder:"请输入账户名称"},on:{focus:function(t){return e.pulldownFocus("name")},keyup:function(t){return e.pulldownKeyup("name")}},model:{value:e.accountInfo.name,callback:function(t){e.$set(e.accountInfo,"name",t)},expression:"accountInfo.name"}})]},proxy:!0},{key:"dropdown",fn:function(){return[e.colAccLoading?a("ul",{staticClass:"accountInfoPullDownBody"},[a("a-spin",{staticStyle:{width:"100%",height:"100%"}})],1):a("ul",{staticClass:"accountInfoPullDownBody"},e._l(e.colDataSourceForName,(function(t,n){return a("li",{key:n,staticClass:"accountInfoPullDownItem",on:{click:function(a){return e.pulldownSelect(t,"name")}}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])})),0)]},proxy:!0}],null,!1,512131864)})],1):e.editColacc?a("a-col",{attrs:{span:8,"data-prop":"name"}},[a("vxe-pulldown",{ref:"pulldown_name",staticClass:"width100",attrs:{transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入账户名称"},model:{value:e.accountInfo.name,callback:function(t){e.$set(e.accountInfo,"name",t)},expression:"accountInfo.name"}})]},proxy:!0}])})],1):a("a-col",{attrs:{span:8,"data-prop":"name"}},[a("vxe-select",{staticClass:"width100",attrs:{transfer:!0,size:"small",placeholder:e.disabled?"":"请选择收款账户"},on:{change:function(t){return e.colCodeChange(t,"id")}},model:{value:e.accountInfo.name,callback:function(t){e.$set(e.accountInfo,"name",t)},expression:"accountInfo.name"}},[e.colAccLoading?[a("a-spin",{staticClass:"optionSpinLoad"},[a("vxe-option",{attrs:{value:"empty_1"}})],1)]:e._l(e.colDataSource,(function(e,t){return a("vxe-option",{key:t,attrs:{value:e.id,label:e.name}})}))],2)],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("收款账户")]),e.changePayee?a("a-col",{attrs:{span:8,"data-prop":"code"}},[a("vxe-pulldown",{ref:"pulldown_code",staticClass:"width100",attrs:{disabled:e.disabled,transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[a("a-input",{staticClass:"width100",attrs:{disabled:e.disabled,placeholder:"请输入收款账户"},on:{focus:function(t){return e.pulldownFocus("code")},keyup:function(t){return e.pulldownKeyup("code")}},model:{value:e.accountInfo.code,callback:function(t){e.$set(e.accountInfo,"code",t)},expression:"accountInfo.code"}})]},proxy:!0},{key:"dropdown",fn:function(){return[e.colAccLoading?a("ul",{staticClass:"accountInfoPullDownBody"},[a("a-spin",{staticStyle:{width:"100%",height:"100%"}})],1):a("ul",{staticClass:"accountInfoPullDownBody"},e._l(e.colDataSourceForCode,(function(t,n){return a("li",{key:n,staticClass:"accountInfoPullDownItem",on:{click:function(a){return e.pulldownSelect(t,"code")}}},[e._v("\n                    "+e._s(t.code)+"\n                  ")])})),0)]},proxy:!0}],null,!1,1945455949)})],1):e._e(),e.editColacc?a("a-col",{attrs:{span:8,"data-prop":"code"}},[a("vxe-pulldown",{ref:"pulldown_code",staticClass:"width100",attrs:{transfer:!0},scopedSlots:e._u([{key:"default",fn:function(){return[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入收款账户"},model:{value:e.accountInfo.code,callback:function(t){e.$set(e.accountInfo,"code",t)},expression:"accountInfo.code"}})]},proxy:!0}],null,!1,1470894509)})],1):a("a-col",{attrs:{span:8,"data-prop":"code"}},[a("vxe-select",{staticClass:"width100",attrs:{transfer:!0,size:"small",placeholder:e.disabled?"":"请选择收款账户"},on:{change:function(t){return e.colCodeChange(t,"code")}},model:{value:e.accountInfo.code,callback:function(t){e.$set(e.accountInfo,"code",t)},expression:"accountInfo.code"}},[e.colAccLoading?[a("a-spin",{staticClass:"optionSpinLoad"},[a("vxe-option",{attrs:{value:"empty_1"}})],1)]:e._l(e.colDataSource,(function(e,t){return a("vxe-option",{key:t,attrs:{value:e.code,label:e.code}})}))],2)],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("开户银行")]),a("a-col",{attrs:{span:8,"data-prop":"bankName"}},[a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请填写开户银行"},model:{value:e.accountInfo.bankName,callback:function(t){e.$set(e.accountInfo,"bankName",t)},expression:"accountInfo.bankName"}})],1),a("a-col",{attrs:{span:4}},[e._v("证件类型")]),a("a-col",{attrs:{span:8,"data-prop":"certType"}},[a("j-d-dict-select-tag",{attrs:{disabled:e.disabled,getPopupContainer:e.getContainer,title:"证件类型",dictCode:"cert_type",placeholder:e.disabled?"":"请选择证件类型"},on:{change:e.dictChange},model:{value:e.accountInfo.certType,callback:function(t){e.$set(e.accountInfo,"certType",t)},expression:"accountInfo.certType"}})],1),a("a-col",{attrs:{span:4}},[e._v("证件号码")]),a("a-col",{attrs:{span:8,"data-prop":"certNo"}},[a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请填写证件号码"},model:{value:e.accountInfo.certNo,callback:function(t){e.$set(e.accountInfo,"certNo",t)},expression:"accountInfo.certNo"}})],1),a("a-col",{attrs:{span:4}},[e._v("收款联系人")]),a("a-col",{attrs:{span:8}},[a("a-input",{attrs:{maxLength:10,disabled:e.disabled,placeholder:e.disabled?"":"请填写收款联系人"},model:{value:e.accountInfo.linkName,callback:function(t){e.$set(e.accountInfo,"linkName",t)},expression:"accountInfo.linkName"}})],1),a("a-col",{attrs:{span:4}},[e._v("联系电话")]),a("a-col",{attrs:{span:8,"data-prop":"phone"}},[a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请填写联系电话"},model:{value:e.accountInfo.phone,callback:function(t){e.$set(e.accountInfo,"phone",t)},expression:"accountInfo.phone"}})],1)],1)],1)],1)],1)],1)},o=[],r=a("eccd"),i=a("6603"),s=a("0792"),l=a("0fea");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return(t=f(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){var t=h(e,"string");return"symbol"==c(t)?t:t+""}function h(e,t){if("object"!=c(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function d(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function p(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};u(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,s){var l=p(e[o],e,r);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=f;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,a,n);if("normal"===c.type){if(o=n.done?v:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=p(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(d(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function b(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){b(r,n,o,i,s,"next",e)}function s(e){b(r,n,o,i,s,"throw",e)}i(void 0)}))}}var y={name:"CollectionAccountComp",components:{AutoSelect:i["default"],JDDictSelectTag:r["default"]},props:{disabled:{type:Boolean,default:!1,required:!1},isRefund:{type:Boolean,default:!1,required:!1},headerTitle:{type:String,default:"收款账户"},busiType:{type:String,default:""},psnId:{type:String,default:""},changePayee:{type:Boolean,default:!0},isInit:{type:Boolean,default:!0}},inject:{getContainer:{default:function(){return function(){return document.body}}}},data:function(){var e=this,t=function(e,t){return new Promise(function(){var e=v(m().mark((function e(a){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",a());case 2:Object(l["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(e){return e.success?a():a(e.result)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},a=function(t,a,n){""!==a&&void 0!==a||n(),a&&1==e.accountInfo.certType&&(s["a"].IDCard.test(a)||n("请输入正确格式的身份证号")),n()};return{activeKey:["1"],accountInfo:{},dataSource:[],colAccArr:[],colAccLoading:!1,rules:{code:[{required:!0,message:"请输入收款账户",trigger:"change"},{max:30,message:"账号长度不能超过30位！"},{validator:this.validateBankCode}],name:[{required:!0,message:"请输入账户名称",trigger:"change"}],bankName:[{required:!0,message:"请输入开户银行",trigger:"change"}],phone:[{message:"请输入联系电话",trigger:"change"},{validator:t,type:"Promise"}],certNo:[{validator:a,message:"请输入证件类型",trigger:"change"}]},colDataSource:[],colDataSourceForName:[],colDataSourceForCode:[],editColacc:!1,fieldUp:["code","bankName","linkName","phone","certNo","certType","name"],oldColaccInfo:"",url:{getColAccListByPsnId:"/base/rColaccInfo/getColAccListByPsnId",getColAccList:"/base/rColaccInfo/getColAccList",getAccInfoByCode:"/base/rColaccInfo/getAccInfoByCode"}}},created:function(){this.isInit&&(this.isRefund?this.initAllAccList():this.initColData())},methods:{filterOptionName:function(e,t){var a=t.data.attrs.obj;if(-1!==(a.name+"").indexOf(e)&&a.id)return!0},filterOptionCode:function(e,t){var a=t.data.attrs.obj;if(-1!==(a.code+"").indexOf(e)&&a.id)return!0},editColaccInfo:function(){this.oldColaccInfo={},this.editColacc=!0},initAllAccList:function(){var e=this;this.colAccLoading=!0,Object(l["e"])(this.url.getColAccList).then((function(t){t.success&&(e.colDataSource=t.result.records,e.colDataSourceForName=e.colDataSource,e.colDataSourceForCode=e.colDataSource)})).finally((function(){e.colAccLoading=!1}))},pulldownFocus:function(e){this.isInit&&("name"===e?(this.colDataSourceForName=this.colDataSource,this.$refs.pulldown_name.showPanel()):(this.colDataSourceForCode=this.colDataSource,this.$refs.pulldown_code.showPanel()))},pulldownKeyup:function(e){var t=this.accountInfo[e],a=[];a=this.colDataSource.filter((function(a){return!!a[e]&&-1!==a[e].indexOf(t)})),"name"===e?this.colDataSourceForName=a:this.colDataSourceForCode=a},pulldownSelect:function(e,t){this.accountInfo=e?JSON.parse(JSON.stringify(e)):{},"name"===t?this.$refs.pulldown_name.hidePanel():this.$refs.pulldown_code.hidePanel()},colCodeChange:function(e,t){var a=e.value,n=(e.$event,this.colDataSource.find((function(e){return e[t]===a})));this.accountInfo=n?JSON.parse(JSON.stringify(n)):{}},initColData:function(){var e=this;this.colAccLoading=!0,Object(l["e"])(this.url.getColAccListByPsnId,{psnId:this.psnId}).then((function(t){t&&t.success&&(e.colDataSource=t.result.records,e.colDataSource.length>0&&"{}"==JSON.stringify(e.accountInfo)&&(e.accountInfo=e.colDataSource[0]),e.colDataSourceForName=e.colDataSource,e.colDataSourceForCode=e.colDataSource)})).finally((function(){e.colAccLoading=!1}))},validateBankCode:function(e,t,a){""!=t&&void 0!=t||a(),s["a"].bankCard.test(t)?a():a(s["a"].bankCardMsg)},initData:function(e){var t=this;Object(l["e"])(this.url.getAccInfoByCode,{accCode:e}).then((function(e){e&&(t.accountInfo=e.result)}))},handleChange:function(e,t){if(t&&t.data&&t.data.attrs&&t.data.attrs.obj&&t.data.attrs.obj.id){var a=d({},t.data.attrs.obj);a.id=null,this.accountInfo=Object.assign({},a)}},handleSearch:function(e){this.accountInfo={}},dictChange:function(e){this.accountInfo.certType=e,this.$refs.formRow.clearValidate("certNo")},checkData:function(){var e=v(m().mark((function e(){var t;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.formRow.validaRowMsgPro(this.$refs.formOwnRow);case 2:return t=e.sent,e.abrupt("return",t.valida);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAccountInfo:function(){return this.accountInfo.baseType=this.busiType,this.accountInfo}}},g=y,w=(a("a34d3"),a("16da"),a("2877")),C=Object(w["a"])(g,n,o,!1,null,"40f6b5a0",null);t["default"]=C.exports},"11bf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{width:"60%",visible:e.visible,title:"区域选择",switchFullscreen:"","modal-height":"60vh",cancelText:"关闭"},on:{screenChange:e.screenChange,ok:e.close,cancel:e.close}},[a("a-card",{staticClass:"mainCard",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("a-space",{staticClass:"marginBottom10",attrs:{align:"center"}},[a("a-input-search",{style:{width:"280px"},attrs:{placeholder:"请输入名称"},on:{search:e.onSearch},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}}),a("a-button",{attrs:{type:"primary",icon:"search",title:"查询"},on:{click:e.onSearch}},[e._v("查询")]),a("a-button",{attrs:{icon:"redo"},on:{click:function(t){return e.searchReset()}}},[e._v("重置")])],1),2==e.baseType||3==e.baseType||4==e.baseType?a("a-button",{on:{click:function(t){e.clickRoute(Number(e.baseType)-1)}}},[e._v("\n        返回\n      ")]):e._e()],1),2==e.baseType?a("div",[a("a",{on:{click:function(t){return e.clickRoute(1)}}},[e._v("小区列表")]),a("span",[e._v("/"+e._s(e.selectedRegion.name))])]):3==e.baseType?a("div",[a("a",{on:{click:function(t){return e.clickRoute(1)}}},[e._v("小区列表")]),a("span",[e._v("/")]),a("a",{on:{click:function(t){return e.clickRoute(2)}}},[e._v(e._s(e.selectedRegion.name))]),a("span",[e._v("/"+e._s(e.selectedBld.name))])]):4==e.baseType?a("div",[a("a",{on:{click:function(t){return e.clickRoute(1)}}},[e._v("小区列表")]),a("span",[e._v("/")]),a("a",{on:{click:function(t){return e.clickRoute(2)}}},[e._v(e._s(e.selectedRegion.name))]),a("span",[e._v("/")]),a("a",{on:{click:function(t){return e.clickRoute(3)}}},[e._v(e._s(e.selectedBld.name))]),a("span",[e._v("/"+e._s(e.selectedCell.name))])]):e._e(),a("div",{ref:"modalContent",style:{height:"calc(100% - 42px - "+(2==e.baseType||3==e.baseType||4==e.baseType?"21px":"0px")+")"}},[a("a-table",{ref:"table",attrs:{bordered:"",scroll:{y:e.tableHeight+"px"},size:"middle",rowKey:"id",columns:e.columns,customRow:e.customRow,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[e.needType==e.baseType?a("a",{on:{click:function(t){return e.choose(n)}}},[e._v("选择")]):a("span",[1==e.baseType?a("a",{on:{click:function(t){return e.toList(n,2)}}},[e._v("自然幢")]):e._e(),2==e.baseType?a("a",{on:{click:function(t){return e.toList(n,3)}}},[e._v("单元")]):e._e(),3==e.baseType?a("a",{on:{click:function(t){return e.toList(n,4)}}},[e._v("房屋")]):e._e()])])}}])})],1)])],1)},o=[],r=a("ca00"),i=a("0fea");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,a){return e[t]=a}}function p(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};u(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,l){var c=f(e[o],e,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=h;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?v:m,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=u(C,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),u(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(p(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),u(k,c,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function p(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){p(r,n,o,i,s,"next",e)}function s(e){p(r,n,o,i,s,"throw",e)}i(void 0)}))}}var h={name:"SelectRegionLayerModal",components:{},props:["needType"],data:function(){return{queryParam:{},scrollTrigger:{},dataSource:[],ipagination:{current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"code",order:"asc"},visible:!1,loading:!1,columns:[{title:"名称",align:"left",dataIndex:"name",width:300,ellipsis:!0},{title:"编码",align:"center",dataIndex:"code",width:120,ellipsis:!0},{title:"地址",align:"left",dataIndex:"address",ellipsis:!0},{title:"操作",dataIndex:"action",align:"center",width:80,scopedSlots:{customRender:"action"}}],selectedRegion:{},selectedBld:{},selectedCell:{},baseType:"1",tableHeight:0}},created:function(){this.resetScreenSize()},methods:{loadData:function(){var e=f(d().mark((function e(t){var a,n=this;return d().wrap((function(e){while(1)switch(e.prev=e.next){case 0:1===t&&(this.ipagination.current=1),a=this.getQueryParams(),1==a.baseType&&(a.order="desc"),this.loading=!0,Object(i["e"])("/base/rtRegion/listByComp",a).then((function(e){e.success&&(n.dataSource=e.result.records,n.ipagination.total=e.result.total)})).finally((function(){n.loading=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clickRoute:function(e){this.baseType=e,1==e?(this.ipagination.current=this.selectedRegion.current,this.queryParam={baseType:"1"},this.queryParam.name=this.selectedRegion.queryName,this.selectedRegion={},this.selectedBld={},this.selectedCell={}):2==e?(this.ipagination.current=this.selectedBld.current,this.queryParam={baseType:"2",pid:this.selectedRegion.id},this.queryParam.name=this.selectedBld.queryName,this.selectedBld={},this.selectedCell={}):(this.ipagination.current=this.selectedCell.current,this.queryParam={baseType:"3",pid:this.selectedBld.id},this.queryParam.name=this.selectedCell.queryName,this.selectedCell={}),this.loadData()},toList:function(e,t){this.queryParam.name="",this.baseType=t,2==t?(this.selectedRegion=e,this.selectedRegion.current=this.ipagination.current,this.selectedRegion.queryName=this.queryParam.name):3==t?(this.selectedBld=e,this.selectedBld.current=this.ipagination.current,this.selectedBld.queryName=this.queryParam.name):4==t&&(this.selectedCell=e,this.selectedCell.current=this.ipagination.current,this.selectedCell.queryName=this.queryParam.name),this.queryParam.baseType=this.baseType,this.queryParam.pid=e.id,this.loadData(1)},choose:function(e){var t="";t=2==this.needType?this.selectedRegion.name+"-"+e.name:3==this.needType?this.selectedRegion.name+"-"+this.selectedBld.name+"-"+e.name:4==this.needType?this.selectedRegion.name+"-"+this.selectedBld.name+"-"+this.selectedCell.name+"-"+e.code:e.name;var a={text:t,id:e.id,isDistrict:!(!e.isDistrict||1!==e.isDistrict)};this.$emit("ok",a),this.close()},showModal:function(e,t){var a=this;this.visible=!0,this.queryParam.pid=e||void 0,this.queryParam.baseType=t||1,this.baseType=t||1,this.$nextTick((function(){a.resetScreenSize()})),e?Object(i["e"])("/base/rtRegion/getParentListById",{id:e}).then((function(e){if(e&&e.success){var n,o=l(e.result);try{for(o.s();!(n=o.n()).done;){var r=n.value,i=r.baseType,s=r.name;1==i?(a.selectedRegion=r,a.selectedRegion.current=1,a.selectedRegion.queryName=s):2==i?(a.selectedBld=r,a.selectedBld.current=1,a.selectedBld.queryName=s):3==i&&(a.selectedCell=r,a.selectedCell.current=1,a.selectedCell.queryName=s),i==t&&(a.queryParam.pid=r.pid,a.loadData(1))}}catch(c){o.e(c)}finally{o.f()}}})):this.loadData(1)},screenChange:function(){this.resetScreenSize()},searchReset:function(){this.queryParam.name="",this.loadData(1)},onSearch:function(){this.loadData(1)},close:function(){this.queryParam={},this.selectedRegion={},this.selectedBld={},this.selectedCell={},this.baseType="1",this.dateSource=[],this.visible=!1},resetScreenSize:function(){var e=this;this.$nextTick((function(){e.tableHeight=$(e.$refs.modalContent).height()-102.5}))},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"===a.order?"asc":"desc"),this.ipagination=e,this.loadData()},getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(r["f"])(e)},getQueryField:function(){for(var e="id,",t=0;t<this.columns.length;t++)e+=","+this.columns[t].dataIndex;return e},customRow:function(e){var t=this;return{on:{dblclick:function(){t.needType===t.baseType&&t.choose(e)}}}}}},m=h,b=(a("ce4e"),a("2877")),v=Object(b["a"])(m,n,o,!1,null,"890446da",null);t["default"]=v.exports},"123e":function(e,t,a){"use strict";a("9779")},1556:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{staticStyle:{top:"50px"},attrs:{width:e.modalWidth,visible:e.visible,title:"管辖小区选择",switchFullscreen:"",wrapClassName:"region-select-modal","modal-height":"60vh",cancelText:"关闭"},on:{screenChange:e.resetScreenSize,ok:e.handleSubmit,cancel:e.close}},[a("a-card",{staticClass:"mainCard",attrs:{"body-style":{height:"100%",padding:0},bordered:!1}},[a("a-space",{staticClass:"marginBottom10",attrs:{align:"center"}},[a("a-input",{attrs:{placeholder:"请输入小区名称"},on:{pressEnter:e.onSearch},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}}),a("a-button",{attrs:{type:"primary",icon:"search",title:"查询"},on:{click:e.onSearch}},[e._v("查询")]),a("a-button",{attrs:{icon:"redo"},on:{click:function(t){return e.searchReset(1)}}},[e._v("重置")])],1),a("div",{ref:"modalContent",staticClass:"tableDiv"},[a("a-table",{ref:"table",attrs:{scroll:{y:e.tableHeight+"px"},size:"middle",rowKey:"id",bordered:"",customRow:e.customRow,columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,type:e.getType},loading:e.loading},on:{change:e.handleTableChange}})],1)],1)],1)},o=[],r=a("ca00"),i=a("0fea");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function d(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,a){return e[t]=a}}function p(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};d(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,l){var c=f(e[o],e,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=h;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?v:m,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=d(C,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,d(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),d(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(p(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),d(k,u,"Generator"),d(k,i,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){c(r,n,o,i,s,"next",e)}function s(e){c(r,n,o,i,s,"throw",e)}i(void 0)}))}}function d(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=p(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var h={name:"SelectRegionModal",components:{},props:{filterOfCorp:Boolean,modalWidth:{type:[Number,String],default:""},multi:Boolean,regionIds:{type:String,default:""},corpModel:{},filterNormalState:{type:String,default:""},queryData:{type:Object,default:function(){return{}}},title:{type:String,default:""},columns:{type:Array,default:function(){return[]}},searchWidth:{type:String,default:"150px"},isSupervise:{type:String,default:""}},data:function(){return{queryParam:{},scrollTrigger:{},dataSource:[],searchSource:[],selectionRows:[],selectedRowKeys:[],selectRegionRows:[],selectRegionIds:[],ipagination:{current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"createTime",order:"desc"},visible:!1,loading:!1,tableHeight:0}},computed:{getType:function(){return 1==this.multi?"checkbox":"radio"}},watch:{regionIds:{immediate:!0,handler:function(){this.initRegionNames()}}},created:function(){this.loadData(),this.searchLoad()},methods:{initRegionNames:function(){var e=this;this.filterOfCorp||(this.regionIds?Object(i["e"])("/base/rtRegion/getMultiRegion",{ids:this.regionIds}).then((function(t){e.selectionRows=[];var a=[],n=[];if(t&&t.length>0){var o,r=d(t);try{for(r.s();!(o=r.n()).done;){var i=o.value;n.push(i["name"]),a.push(i["id"]),e.selectionRows.push(i)}}catch(s){r.e(s)}finally{r.f()}}e.selectedRowKeys=a,e.$emit("initComp",n.join(","))})):(this.$emit("initComp",""),this.selectedRowKeys=[]))},loadData:function(){var e=u(l().mark((function e(t){var a,n=this;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:1===t&&(this.ipagination.current=1),a=this.getQueryParams(),this.loading=!0,Object(i["e"])("/base/rtRegion/listByComp",a).then((function(e){e.success&&(n.dataSource=e.result.records,n.ipagination.total=e.result.total)})).finally((function(){n.loading=!1}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),searchLoad:function(){var e=u(l().mark((function e(){var t,a=this;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.getQueryParams(),Object(i["e"])("/base/rtRegion/queryListByCom",t).then((function(e){a.searchSource=[],e&&e.result&&e.result.length>0&&e.result.forEach((function(e){var t=a.searchSource.find((function(t){return t.name===e.name}));t||a.searchSource.push(e)}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetScreenSize:function(){var e=this;this.$nextTick((function(){e.tableHeight=$(e.$refs.modalContent).height()-102.5}))},showModal:function(){this.visible=!0,this.initRegionNames(),this.resetScreenSize(),this.searchReset(1)},getQueryParams:function(){this.queryParam.filterNormalState=this.filterNormalState,this.queryParam.filterOfCorp=this.filterOfCorp,this.queryParam.regionIds=this.regionIds,this.corpModel&&(this.queryParam.corpId=this.corpModel.id);var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object.assign(e,this.queryData),e.isSupervise=this.isSupervise,Object(r["f"])(e)},getQueryField:function(){for(var e="id,",t=0;t<this.columns.length;t++)e+=","+this.columns[t].dataIndex;return e},searchReset:function(e){var t=this;t.selectedRowKeys=[],t.selectRegionIds=[],0!==e&&(t.queryParam={},t.loadData(1),this.searchLoad())},close:function(){this.searchReset(0),this.visible=!1},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"===a.order?"asc":"desc"),this.ipagination=e,this.loadData(),this.searchLoad()},handleSubmit:function(){this.selectRegionRows&&0!=this.selectionRows.length?(this.getSelectRegionRows(),this.$emit("ok",this.selectRegionRows),this.close()):this.$message.warn("请选择小区！")},getSelectRegionRows:function(){this.selectRegionRows=[];var e,t=d(this.selectionRows);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.selectedRowKeys.includes(a.id)&&this.selectRegionRows.push(a)}}catch(n){t.e(n)}finally{t.f()}this.selectRegionIds=this.selectRegionRows.map((function(e){return e.regionname})).join(",")},onSelectChange:function(e,t){var a=this;this.selectedRowKeys=e,t.forEach((function(e){return Object(r["p"])(a.selectionRows,e,"id")}))},onSearch:function(){this.loadData(1)},customRow:function(e){var t=this;return{on:{click:function(a){if(t.multi){var n=t.selectedRowKeys.findIndex((function(t){return t===e.id}));n>=0?t.selectedRowKeys.splice(n,1):t.selectedRowKeys.push(e.id);var o=t.selectionRows.findIndex((function(t){return t.id===e.id}));o>=0?t.selectionRows.splice(o,1):t.selectionRows.push(e)}else t.selectedRowKeys=[],t.selectionRows=[],t.selectedRowKeys.push(e.id),t.selectionRows.push(e)},dblclick:function(){t.multi||(t.selectedRowKeys=[],t.selectionRows=[],t.selectedRowKeys.push(e.id),t.selectionRows.push(e),t.handleSubmit())}}}},handleChange:function(e,t){this.searchLoad(),this.loadData()}}},m=h,b=(a("fe08"),a("2877")),v=Object(b["a"])(m,n,o,!1,null,"3eaee19e",null);t["default"]=v.exports},"16da":function(e,t,a){"use strict";a("609f")},"17d2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"serviceRecordsPhone"},[a("div",{staticClass:"header"},[e._v("维修维保记录")]),a("div",{staticClass:"body",style:{"row-gap":0===e.active?0:"10px"}},[a("van-tabs",{on:{change:e.tabChange},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-tab",{attrs:{title:"维修记录"}}),a("van-tab",{attrs:{title:"维保记录"}})],1),0===e.active?a("div",{staticClass:"partType"},[a("div",{staticClass:"partTypeArr partTypeRadioGroup"},[a("span",{staticClass:"partTypeRadio",class:{selected:e.isSelectedAll},on:{click:function(t){return e.selectedPartType(void 0)}}},[e._v("全部"+e._s(e.allRecords.length?"（"+e.allRecords.length+"）":""))]),e._l(e.partTypeList,(function(t){return a("span",{key:t.id,staticClass:"partTypeRadio",class:{selected:e.selectedKeys.includes(t.id)},on:{click:function(a){return e.selectedPartType(t)}}},[e._v("\n          "+e._s(t.name)+"（"+e._s(t.num)+"）\n        ")])}))],2),a("a-icon",{staticClass:"partType_expandIcon",attrs:{type:"menu"},on:{click:function(t){e.visible=!0}}})],1):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"record"},e._l(e.showData,(function(t,n){return a("div",{key:t.id,staticClass:"recordItem"},[a("div",{staticClass:"line"},[a("span",{staticClass:"line_state"},[e._v("✓")]),n<e.showData.length-1?a("div",{staticClass:"line_subject"}):e._e()]),a("div",{staticClass:"content"},[0===e.active?[a("div",{staticClass:"content_title"},[e._v("\n              "+e._s(t.partName)+"\n            ")]),a("div",{staticClass:"content_info"},[a("span",[e._v("施工单位："+e._s(t.cropName))]),a("span",[e._v("维修费用："+e._s(e.formatterAmount(t.budgetCost)))])]),a("div",{staticClass:"content_info"},[a("span",[e._v("竣工日期："+e._s(t.completionDate?e.moment(t.completionDate).format("YYYY-MM-DD"):""))]),a("span",[e._v("质保日期："+e._s(t.marginDate?e.moment(t.marginDate).format("YYYY-MM-DD"):""))])]),a("div",{staticClass:"content_desc"},[e._v("维修描述："+e._s(t.describe))])]:[a("div",{staticClass:"content_info"},[a("span",[e._v("维保人："+e._s(t.maintainer))])]),a("div",{staticClass:"content_desc"},[e._v("维修描述："+e._s(t.maintainRecord))])],t.showList&&t.showList.length>0?a("div",{staticClass:"content_file"},e._l(t.showList,(function(n,o){return a("van-image",{key:n.id,attrs:{fit:"cover",width:"80",height:"80",src:n.url},on:{click:function(a){return e.clickPreview(t,o)}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})})),1):e._e(),a("div",{staticClass:"content_date"},[e._v("\n            "+e._s(t.createTime?e.moment(t.createTime).format("YYYY-MM-DD"):"")+"\n          ")])],2)])})),0)],1),a("van-image-preview",{ref:"preview",attrs:{"get-container":"body",closeable:!0,"start-position":e.previewStartPosition,images:e.previewImages},on:{close:function(t){e.deg=0},change:e.previewOnChange},model:{value:e.previewShow,callback:function(t){e.previewShow=t},expression:"previewShow"}},[a("div",{staticClass:"preview",attrs:{slot:"cover"},slot:"cover"},[a("a-icon",{class:"previewItem",attrs:{type:"undo"},on:{click:function(t){return e.rotate("left")}}}),a("a-icon",{class:"previewItem",attrs:{type:"redo"},on:{click:function(t){return e.rotate("right")}}})],1)]),a("van-image-preview",{attrs:{"get-container":"body",closeable:!0},model:{value:e.pdfShow,callback:function(t){e.pdfShow=t},expression:"pdfShow"}},[a("van-overlay",{staticStyle:{"background-color":"#000000ff"},attrs:{slot:"cover","z-index":"9999",show:e.pdfShow},slot:"cover"},[a("div",{staticStyle:{"text-align":"center",color:"white",padding:"15px"}},[e._v(e._s(e.currentPage+"/"+e.pdfPages))]),a("pdf",{attrs:{src:e.pdfSrc,page:e.currentPage},on:{"num-pages":function(t){e.pdfPages=t}}}),a("div",{staticClass:"preview"},[a("a-icon",{staticClass:"previewItem",attrs:{type:"left-circle"},on:{click:function(t){return e.changePdfPage(0)}}}),a("a-icon",{staticClass:"previewItem",attrs:{type:"download"},on:{click:function(t){return e.download(e.pdfOriginalUrl)}}}),a("a-icon",{staticClass:"previewItem",attrs:{type:"right-circle"},on:{click:function(t){return e.changePdfPage(1)}}})],1),a("i",{staticClass:"van-icon van-icon-clear van-image-preview__close-icon van-image-preview__close-icon--top-right",attrs:{role:"button"},on:{click:function(t){e.pdfShow=!1}}})],1)],1),a("van-action-sheet",{attrs:{title:"部件分类"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"partTypeRadioGroup"},[a("span",{staticClass:"partTypeRadio",class:{selected:e.isSelectedAll},on:{click:function(t){return e.selectedPartType(void 0)}}},[e._v("全部（"+e._s(e.allRecords.length)+"）")]),e._l(e.partTypeList,(function(t){return a("span",{key:t.id,staticClass:"partTypeRadio",class:{selected:e.selectedKeys.includes(t.id)},on:{click:function(a){return e.selectedPartType(t)}}},[e._v("\n        "+e._s(t.name)+"（"+e._s(t.num)+"）\n      ")])}))],2)])],1)},o=[],r=a("c1df"),i=a.n(r),s=a("4a12"),l=a("01b9"),c=a("0fea"),u=a("3ed7");function d(e){return m(e)||h(e)||f(e)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return b(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return b(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var v={name:"ServiceRecordsPhone",components:{ImgList:s["default"]},mixins:[l["a"]],data:function(){return{formatterAmount:u["g"],visible:!1,utilityId:"1587327344545681410",sourceName:"",showData:[],allRecords:[],partTypeList:[],selectedParts:[],isSelectedAll:!1,moment:i.a,active:0,loading:!1,url:{getServiceList:"use/serviceUtility/getServiceListByUtiAndPartId",getMaintainList:"/base/maintainInfo/list"}}},computed:{selectedKeys:{get:function(){return this.selectedParts.map((function(e){return e.id}))},set:function(){}}},mounted:function(){this.utilityId=this.$route_query.id,this.sourceName=this.$route_query.sourceName,this.utilityId&&this.initData()},methods:{initData:function(){var e,t,a=this,n=this;0===n.active?(e=n.url.getServiceList,t={regionUtilityId:n.utilityId}):(e=n.url.getMaintainList,t={regUtilityId:n.utilityId,busiType:"70",busiTypeDetail:"7008",busiNo:this.utilityId}),n.loading=!0,Object(c["e"])(e,t,{sourceName:this.sourceName}).then((function(e){if(e&&e.success){if(0===a.active){n.partTypeList=[],n.allRecords=e.result.serList;var t=e.result.serMap;for(var o in t)n.partTypeList.push({id:"partType".concat(a.partTypeList.length),name:o,num:t[o].length,detailArr:t[o]});a.selectedPartType(void 0,!0)}else n.showData=e.result.records.map((function(e){return e.fileManageList=e.fileList||[],e}));n.initFile()}else n.$message.warning(e.message)})).finally((function(){n.loading=!1}))},initFile:function(){var e=this;this.showData.forEach((function(t){t.showList=e.buildShowList(t.fileManageList)}))},tabChange:function(){this.showData=[],this.initData()},selectedPartType:function(e,t){var a=this;if(e){this.isSelectedAll=!1;var n=this.selectedParts.findIndex((function(t){return t.id===e.id}));-1!==n?this.selectedParts.splice(n,1):this.selectedParts.push(e),this.showData=[],this.selectedParts.forEach((function(e){var t;e.detailArr=e.detailArr.map((function(e){return e.fileManageList=e.fileList||[],e})),(t=a.showData).push.apply(t,d(e.detailArr))})),this.initFile()}else this.isSelectedAll=!!t||!this.isSelectedAll,this.selectedParts=this.isSelectedAll?[]:this.selectedParts,this.showData=this.allRecords.map((function(e){return e.fileManageList=e.fileList||[],e}));this.$forceUpdate()}}},y=v,g=(a("4b81"),a("2877")),w=Object(g["a"])(y,n,o,!1,null,"3bc6061e",null);t["default"]=w.exports},2003:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",{ref:"tempDiv"},[n("a-collapse",{attrs:{expandIconPosition:"right",id:"baseInfo"},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title marginTop10"},[n("span",[t._v(" 基本信息 ")])])]},proxy:!0}])},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[t._v("小区名称")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.name))]),n("a-col",{attrs:{span:4}},[t._v("所属区县")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.areaName))]),n("a-col",{attrs:{span:4}},[t._v("地址")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.address))]),t.showAdvances?n("a-col",{attrs:{span:4}},[t.disabled?t._e():n("span",{staticClass:"requiredText"},[t._v("*")]),t._v("账户属性")]):t._e(),t.showAdvances?n("a-col",{attrs:{span:8}},[n("j-d-dict-select-tag",{attrs:{placeholder:"请选择账户属性",readOnlySpan:!0,dictCode:"account_properties"},model:{value:t.model.attr,callback:function(e){t.$set(t.model,"attr",e)},expression:"model.attr"}})],1):t._e(),n("a-col",{attrs:{span:4}},[t._v("是否分区")]),n("a-col",{attrs:{span:8}},[0===t.model.isDistrict?n("span",[t._v("否")]):t._e(),1===t.model.isDistrict?n("span",[t._v("是")]):t._e()]),1===t.model.isDistrict?[n("a-col",{attrs:{span:4}},[t._v("分区名称")]),n("a-col",{attrs:{span:8}},[n("div",[t._v("\n              "+t._s(t.model.districtList&&t.model.districtList.map((function(e){return e.name})).join("；"))+"\n            ")])])]:t._e(),n("a-col",{attrs:{span:4}},[t.bankRequired&&"do"==t.operate?n("span",{staticClass:"requiredText"},[t._v("*")]):t._e(),t._v("承办银行")]),t.bankRequired&&"do"==t.operate?n("a-col",{attrs:{span:8}},[n("j-dict-bank-list-select",{attrs:{getPopupContainer:function(){return e.$refs.tempDiv},"show-icon":"",placeholder:"请选择承办银行"},model:{value:t.model.bankCode,callback:function(e){t.$set(t.model,"bankCode",e)},expression:"model.bankCode"}})],1):n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.bankName))]),t.isExamine||t.isTask?t._e():n("a-col",{attrs:{span:4}},[t._v("自然幢数")]),t.isExamine||t.isTask?t._e():n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.nextNodeNum))]),n("a-col",{attrs:{span:4}},[t._v("开发日期")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.buildDate))]),t.isExamine||t.isTask?t._e():n("a-col",{attrs:{span:4}},[t._v("建筑面积")]),t.isExamine||t.isTask?t._e():n("a-col",{attrs:{span:8}},[t._v(t._s(Number(t.model.struArea).toFixed(2))+"m²")]),"2"==t.model.attr?n("a-col",{attrs:{span:4}},[t._v("公房单位")]):t._e(),"2"==t.model.attr?n("a-col",{attrs:{span:8}},t._l(t.publicCorpInfo,(function(e,a){return n("a",{on:{click:function(a){return t.handleDetailModel(e.value)}}},[t._v(" "+t._s(e.text)+"\n            "),a!==t.publicCorpInfo.length-1?[t._v("，")]:t._e()],2)})),0):t._e(),n("a-col",{attrs:{span:4}},[t._v("开发单位")]),n("a-col",{attrs:{span:8}},t._l(t.developCorpInfo,(function(e,a){return n("a",{on:{click:function(a){return t.handleDetailModel(e.value)}}},[t._v(" "+t._s(e.text)+"\n            "),a!==t.developCorpInfo.length-1?[t._v("，")]:t._e()],2)})),0),n("a-col",{attrs:{span:4}},[t._v("物业服务企业")]),n("a-col",{attrs:{span:8}},[n("a",{on:{click:function(e){return t.handleDetailModel(t.model.environCode)}}},[t._v(" "+t._s(t.model.environName)+" ")])]),n("a-col",{attrs:{span:4}},[t._v("街道乡镇")]),n("a-col",{attrs:{span:8}},[n("a",{on:{click:function(e){return t.handleDetailModel(t.model.communityCode)}}},[t._v(" "+t._s(t.model.communityName)+" ")])]),n("a-col",{attrs:{span:4}},[t._v("社区居委会")]),n("a-col",{attrs:{span:8}},[n("a",{on:{click:function(e){return t.handleDetailModel(t.model.streetCode)}}},[t._v(" "+t._s(t.model.streetName)+" ")])]),n("a-col",{attrs:{span:4}},[t._v("业主委员会")]),n("a-col",{attrs:{span:8}},[n("a",{on:{click:function(e){return t.handleDetailModel(t.model.ownersCode)}}},[t._v(" "+t._s(t.model.ownersName)+" ")])]),n("a-col",{attrs:{span:4}},[t._v("备注说明")]),n("a-col",{attrs:{span:8}},[t._v("\n          "+t._s(t.model.remark)+"\n        ")])],2)],1)],1),t.isTask||"9"==t.model.accState?t._e():n("a-tabs",{staticClass:"tabContent"},[n("a-tab-pane",{key:"1",attrs:{tab:"小区公共户",forceRender:""}},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[t._v("资金账户")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.accCode))]),n("a-col",{attrs:{span:4}},[t._v("账户余额")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t._f("getAmount")(t.model.balance))+" 元 ")]),n("a-col",{attrs:{span:4}},[t._v("承办银行")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t.model.bankName))]),n("a-col",{attrs:{span:4}},[t._v("冻结金额")]),n("a-col",{attrs:{span:8}},[t._v(t._s(t._f("getAmount")(t.model.balanceFrozen))+" 元")]),n("a-col",{attrs:{span:4}},[t._v("是否参与结息")]),n("a-col",{attrs:{span:8}},[t._v(t._s(1==t.model.settleFlag?"是":0==t.model.settleFlag?"否":""))])],1)],1),n("a-tab-pane",{key:"2",attrs:{tab:"交易明细",forceRender:""}},[n("vxe-grid",{ref:"tradeGridRef",attrs:{columns:t.TradeColumns,data:t.TradeData,"print-config":{modes:["current","selected","all"]},"max-height":"300","auto-resize":"","show-overflow":"",resizable:"",border:""},scopedSlots:t._u([{key:"toLoanSign",fn:function(e,t){var a=e.row;return["1"==a.loanFlag?n("a-badge",{attrs:{color:"orange",text:"收入"}}):n("a-badge",{attrs:{color:"#8bcc00",text:"支出"}})]}}],null,!1,2168846219)})],1)],1),n("corp-info-detail",{ref:"detailForm",attrs:{zIndex:t.zIndex?t.zIndex+1:void 0}})],1)},o=[],r=a("3269"),i=a("c1df"),s=a.n(i),l=a("0fea"),c=a("779d"),u=a("eccd"),d=a("d8a5"),p=a("3ed7"),f={name:"RegionInfoDetailComp",components:{JDDictSelectTag:u["default"],JDictBankListSelect:r["default"],CorpInfoDetail:c["default"]},props:{model:{type:Object,required:!0},operate:{type:String,default:"do"},bankRequired:{type:Boolean,default:!1},isTask:{type:[Boolean,String],default:!1},isExamine:{type:Boolean,default:!1},zIndex:{type:Number,default:void 0}},data:function(){return{showAdvances:!1,activeKey:["1","2"],TradeData:[],TradeColumns:[{title:"序号",type:"seq",width:80,align:"center"},{title:"交易日期",field:"trdDate",align:"center",formatter:function(e){var t=e.cellValue;return t?s()(t).format("YYYY-MM-DD"):""}},{title:"业务编号",field:"busiNo",align:"center"},{title:"业务类别",field:"busiTypeDetailText",align:"center"},{title:"业务描述",field:"describe",align:"center"},{title:"收支标识",field:"loanFlag",align:"center",slots:{default:"toLoanSign"}},{title:"发生额(元)",field:"amount",headerAlign:"center",align:"right",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{title:"账户余额(元)",field:"balance",headerAlign:"center",align:"right",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}],developCorpInfo:[],publicCorpInfo:[]}},filters:{getAmount:function(e){return e&&""!==e&&"undefined"!==e?String(Number(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"}},created:function(){this.initTrdLog(),this.initCorpInfo(),this.initShowAdvances()},methods:{formatterAmount:p["g"],handleDetailModel:function(e){var t=this;Object(l["e"])("/base/rCorpInfo/queryByCode",{code:e}).then((function(e){e.success?(t.$refs.detailForm.show(e.result.records[0]),t.$refs.detailForm.title=e.result.records[0].name+" ("+e.result.records[0].baseType_dictText+") "):t.$message.warning(e.message)}))},initTrdLog:function(){var e=this;Object(l["e"])("/account/trdlog/getTrdLogById",{id:this.model.id}).then((function(t){t.success&&(e.TradeData=t.result.records)}))},initCorpInfo:function(){for(var e=this.model.developCodes?this.model.developCodes.split(","):[],t=this.model.developName?this.model.developName.split(","):[],a=0;a<e.length;a++)this.developCorpInfo.push({value:e[a],text:t[a]});for(var n=this.model.publicCodes.split(","),o=this.model.publicName.split(","),r=0;r<n.length;r++)this.publicCorpInfo.push({value:n[r],text:o[r]})}},initShowAdvances:function(){var e=this;Object(d["e"])("is_advances_deposit").then((function(t){e.showAdvances="1"==t}))}},h=f,m=(a("30c2"),a("2877")),b=Object(m["a"])(h,n,o,!1,null,"1557f32a",null);t["default"]=b.exports},2026:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"serviceRecords"},e._l(e.stepData,(function(t){return n("div",{key:t.year,staticClass:"stepItem"},[n("span",{staticClass:"stepYearTitle"},[e._v(e._s(t.year))]),n("div",{staticClass:"stepDetail"},e._l(t.detailArr,(function(t,o){return n("div",{key:t.id,staticClass:"stepDetailItem",style:{top:o>0?-13*o+"px":void 0}},[e._m(0,!0),n("div",{staticClass:"stepDetailItemCont"},[n("span",{staticClass:"contTitle"},[e._v(e._s(e.moment(t.createTime).format("MM-DD")))]),n("div",{staticClass:"contBox"},[e._t("default",(function(){return[n("div",{staticClass:"contBoxTitle"},[n("img",{staticClass:"contBoxTitleIcon",attrs:{src:a("8bb1"),alt:"齿轮"}}),e._v("\n                "+e._s(t.partName)+"\n              ")]),n("a-row",{staticClass:"contBoxBaseInfo",attrs:{type:"flex",gutter:[10,10]}},[n("a-col",{attrs:{span:12}},[n("span",{staticClass:"label"},[e._v(" 施工单位：")]),n("span",{staticClass:"value"},[e._v(e._s(t.cropName))])]),n("a-col",{attrs:{span:12}},[n("span",{staticClass:"label"},[e._v(" 维修费用：")]),n("span",{staticClass:"value amount"},[e._v(e._s(e.formatterAmount(t.budgetCost)))])]),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"label"},[e._v(" 开工日期：")]),n("span",{staticClass:"value"},[e._v(e._s(e.moment(t.createTime).format("YYYY-MM-DD")))])]),n("a-col",{attrs:{span:6}},[n("span",{staticClass:"label"},[e._v(" 竣工日期：")]),n("span",{staticClass:"value"},[e._v(e._s(t.completionDate?e.moment(t.completionDate).format("YYYY-MM-DD"):""))])]),n("a-col",{attrs:{span:8}},[n("span",{staticClass:"label"},[e._v(" 质保日期：")]),n("span",{staticClass:"value"},[e._v(e._s(t.marginDate))])]),n("a-col",{attrs:{span:24}},[n("span",{staticClass:"desc"},[e._v("维修描述："+e._s(t.describe))])]),n("a-col",{attrs:{span:24}},[n("img-list",{attrs:{size:75,"img-list":t.fileList}})],1)],1)]}),{row:t})],2)])])})),0)])})),0)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stepDetailItemLine"},[a("div",{staticClass:"lineStartGarden"}),a("div",{staticClass:"lineEndGarden"})])}],r=a("c1df"),i=a.n(r),s=a("4a12"),l=a("3ed7"),c={name:"ServiceRecords",components:{ImgList:s["default"]},props:{type:{type:String,default:"service"},records:{type:Array,default:function(){return[]}},splitDateFiled:{type:String,default:"createTime"}},data:function(){return{moment:i.a,formatterAmount:l["g"]}},computed:{stepData:function(){var e=this,t=[];return this.records.forEach((function(a){var n=i()(a[e.splitDateFiled]).format("YYYY"),o=t.findIndex((function(e){return e.year===n}));if(-1===o){var r={year:n,detailArr:[a]};t.push(r)}else t[o].detailArr.push(a)})),t}}},u=c,d=(a("cdd7"),a("2877")),p=Object(d["a"])(u,n,o,!1,null,"1cea3524",null);t["default"]=p.exports},2335:function(e,t,a){"use strict";a("26ad6")},2661:function(e,t,a){"use strict";a("7fa0")},"268d":function(e,t,a){"use strict";a("3a9e")},"26ad6":function(e,t,a){},"26d9":function(e,t,a){"use strict";a("bd99")},"274e":function(e,t,a){"use strict";a("83c9")},"28ed":function(e,t,a){},"2b01":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShowHeader?a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[a("div",{staticClass:"collapseTitle"},[e._v("\n            "+e._s(e.headerTitle)+"\n          ")]),a("div",{staticStyle:{display:"flex","align-items":"center",width:"240px","margin-right":"10px"}},[a("span",{staticStyle:{"flex-shrink":"0","line-height":"normal"}},[e._v("余额所剩比例  ")]),a("a-progress",{attrs:{percent:Math.min(100,e.houseInfo.proportion),showInfo:!1}}),a("span",{staticClass:"ant-progress-text"},[e._v(e._s(e.houseInfo.proportion?Math.min(100,e.houseInfo.proportion):0)+"%")])],1)])]},proxy:!0}],null,!1,1844058411)},[a("j-form-container",{ref:"form",attrs:{disabled:e.disabled,border:!1,rules:e.rulesHou,model:e.houseInfo,formRef:"formRow"}},[a("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋名称")]),a("a-col",{attrs:{span:4,"data-prop":"name"}},[a("a-input",{model:{value:e.houseInfo.name,callback:function(t){e.$set(e.houseInfo,"name",t)},expression:"houseInfo.name"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋位置")]),a("a-col",{attrs:{span:12,"data-prop":"address"}},[a("a-input",{model:{value:e.houseInfo.address,callback:function(t){e.$set(e.houseInfo,"address",t)},expression:"houseInfo.address"}})],1),a("a-col",{attrs:{span:4}},[e._v("账户编号")]),a("a-col",{attrs:{span:4}},[a("span",{attrs:{title:e.houseInfo.accCode}},[e._v(e._s(e.houseInfo.accCode))])]),a("a-col",{attrs:{span:4}},[e._v("承办银行")]),a("a-col",{attrs:{span:4}},[a("j-dict-bank-list-select",{attrs:{"show-icon":"",disabled:e.isModify,dictCode:"bank_code"},model:{value:e.houseInfo.bankCode,callback:function(t){e.$set(e.houseInfo,"bankCode",t)},expression:"houseInfo.bankCode"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋面积(㎡)")]),a("a-col",{attrs:{span:4,"data-prop":"struArea"}},["02"===e.houseAreaRules?a("amount-input",{key:"due01",attrs:{"format-due":"01",placeholder:"请输入房屋面积",isHideAddon:""},on:{change:e.depCompute},model:{value:e.houseInfo.struArea,callback:function(t){e.$set(e.houseInfo,"struArea",t)},expression:"houseInfo.struArea"}}):a("amount-input",{key:"due05",attrs:{"format-due":"05",placeholder:"请输入房屋面积",isHideAddon:""},on:{change:e.depCompute},model:{value:e.houseInfo.struArea,callback:function(t){e.$set(e.houseInfo,"struArea",t)},expression:"houseInfo.struArea"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋性质")]),a("a-col",{attrs:{span:4,"data-prop":"houseAttr"}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,dictCode:"house_attr"},model:{value:e.houseInfo.houseAttr,callback:function(t){e.$set(e.houseInfo,"houseAttr",t)},expression:"houseInfo.houseAttr"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋用途")]),a("a-col",{attrs:{span:4,"data-prop":"houseUse"}},[a("j-d-dict-select-tag",{attrs:{dictCode:"house_use"},on:{change:e.depCompute},model:{value:e.houseInfo.houseUse,callback:function(t){e.$set(e.houseInfo,"houseUse",t)},expression:"houseInfo.houseUse"}})],1),a("a-col",{attrs:{span:4}},[e._v("有无电梯")]),a("a-col",{attrs:{span:4}},[a("j-d-dict-select-tag",{attrs:{dictCode:"is_have_elevator"},on:{change:e.depCompute},model:{value:e.houseInfo.liftFlag,callback:function(t){e.$set(e.houseInfo,"liftFlag",t)},expression:"houseInfo.liftFlag"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("交存模式")]),a("a-col",{attrs:{span:4,"data-prop":"depMode"}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,dictCode:"dep_mode"},on:{change:e.depCompute},model:{value:e.houseInfo.depMode,callback:function(t){e.$set(e.houseInfo,"depMode",t)},expression:"houseInfo.depMode"}})],1),a("a-col",{attrs:{span:4}},[e._v("应交金额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(" "+e._s(e._f("getAmount")(e.houseInfo.dueAmount))+" ")])]),e.showDepAmount&&!e.disabled?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("交存金额(元)")]):e._e(),e.showDepAmount&&!e.disabled?a("a-col",{attrs:{span:4,"data-prop":"depAmount"}},[a("amount-input",{attrs:{placeholder:"请输入交存金额",isHideAddon:""},model:{value:e.houseInfo.depAmount,callback:function(t){e.$set(e.houseInfo,"depAmount",t)},expression:"houseInfo.depAmount"}})],1):e._e(),a("a-col",{attrs:{span:4}},[e._v("交存标准")]),a("a-col",{attrs:{span:4}},[e._v("\n            "+e._s(e.depStandardFormat(e.houseInfo))+"\n          ")]),a("a-col",{attrs:{span:4}},[e._v("账户余额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(e._s(e.showAmount(e.houseInfo.balance?Number(e.houseInfo.balance).toFixed(2):"0.00")))])]),a("a-col",{attrs:{span:4}},[e._v("冻结金额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(e._s(e.showAmount(e.houseInfo.balanceFrozen?Number(e.houseInfo.balanceFrozen).toFixed(2):"0.00")))])]),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋售价(元)")]),a("a-col",{attrs:{span:4,"data-prop":"price"}},[a("amount-input",{attrs:{placeholder:"请输入房屋售价",isHideAddon:""},on:{change:e.depCompute},model:{value:e.houseInfo.price,callback:function(t){e.$set(e.houseInfo,"price",t)},expression:"houseInfo.price"}})],1),a("a-col",{attrs:{span:4}},[!e.disabled&&e.propExtractFuncFlag?a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.loading,size:"small",type:"primary"},on:{click:e.updateByContractno}},[e._v("产权提取")]):e._e(),e._v("\n            合同号\n          ")],1),a("a-col",{attrs:{span:4}},[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center"}},[a("a-input",{model:{value:e.houseInfo.contNo,callback:function(t){e.$set(e.houseInfo,"contNo",t)},expression:"houseInfo.contNo"}})],1)]),a("a-col",{attrs:{span:4}},[e._v("购房日期")]),a("a-col",{attrs:{span:4}},[a("j-date",{attrs:{placeholder:"请选择购房日期"},model:{value:e.houseInfo.buyDate,callback:function(t){e.$set(e.houseInfo,"buyDate",t)},expression:"houseInfo.buyDate"}})],1),!e.disabled&&e.houseInfo.state&&e.houseInfo.houseState?e._e():a("a-col",{attrs:{span:4}},[e._v("房屋状态")]),!e.disabled&&e.houseInfo.state&&e.houseInfo.houseState?e._e():a("a-col",{attrs:{span:4}},[a("house-state-comp",{attrs:{state:e.houseInfo.state?e.houseInfo.state:e.houseInfo.houseState}})],1)],1)],1)],1)],1)],1):a("div",[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.rulesHou,model:e.houseInfo,formRef:"formRow"}},[a("a-row",{ref:"formRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.isCanEditCont?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋名称")]),a("a-col",{attrs:{span:4,"data-prop":"name"}},[a("a-input",{attrs:{disabled:e.isCanEditCont},model:{value:e.houseInfo.name,callback:function(t){e.$set(e.houseInfo,"name",t)},expression:"houseInfo.name"}})],1),a("a-col",{attrs:{span:4}},[e.isCanEditCont?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋位置")]),a("a-col",{attrs:{span:12,"data-prop":"address"}},[a("a-input",{attrs:{disabled:e.isCanEditCont},model:{value:e.houseInfo.address,callback:function(t){e.$set(e.houseInfo,"address",t)},expression:"houseInfo.address"}})],1),a("a-col",{attrs:{span:4}},[e._v("账户编号")]),a("a-col",{attrs:{span:4}},[a("span",{attrs:{title:e.houseInfo.accCode}},[e._v(e._s(e.houseInfo.accCode))])]),a("a-col",{attrs:{span:4}},[(e.disabled||e.isModify)&&e.isCanEditCont?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("承办银行")]),a("a-col",{attrs:{span:4,"data-prop":"bankCode"}},[e.houseInfo.id?a("j-dict-bank-list-select",{attrs:{"show-icon":"",isDetail:(e.disabled||e.isModify)&&e.isCanEditCont&&e.isAdmin||!e.isAdmin,dictCode:"bank_code",regionId:e.houseInfo.id},model:{value:e.houseInfo.bankCode,callback:function(t){e.$set(e.houseInfo,"bankCode",t)},expression:"houseInfo.bankCode"}}):e._e()],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋面积(㎡)")]),a("a-col",{attrs:{span:4,"data-prop":"struArea"}},[a("amount-input",{attrs:{"format-due":"02"===e.houseAreaRules?"01":"05",placeholder:"请输入房屋面积",isHideAddon:"",disabled:e.isCanEditCont},on:{change:e.depCompute},model:{value:e.houseInfo.struArea,callback:function(t){e.$set(e.houseInfo,"struArea",t)},expression:"houseInfo.struArea"}}),a("amount-input",{attrs:{"format-due":"02"===e.houseAreaRules?"01":"05",placeholder:"请输入房屋面积",isHideAddon:"",disabled:e.isCanEditCont},on:{change:e.depCompute},model:{value:e.houseInfo.struArea,callback:function(t){e.$set(e.houseInfo,"struArea",t)},expression:"houseInfo.struArea"}})],1),a("a-col",{attrs:{span:4}},[e.disabled&&e.isCanEditCont?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋性质")]),a("a-col",{attrs:{span:4,"data-prop":"houseAttr"}},[a("j-d-dict-select-tag",{attrs:{disabled:e.disabled&&e.isCanEditCont&&e.isAdmin||!e.isAdmin,"get-popup-container":e.getContainer,dictCode:"house_attr"},model:{value:e.houseInfo.houseAttr,callback:function(t){e.$set(e.houseInfo,"houseAttr",t)},expression:"houseInfo.houseAttr"}})],1),a("a-col",{attrs:{span:4}},[e.disabled&&e.isCanEditCont?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋用途")]),a("a-col",{attrs:{span:4,"data-prop":"houseUse"}},[a("j-d-dict-select-tag",{attrs:{disabled:e.disabled&&e.isCanEditCont&&e.isAdmin||!e.isAdmin,dictCode:"house_use"},on:{change:e.depCompute},model:{value:e.houseInfo.houseUse,callback:function(t){e.$set(e.houseInfo,"houseUse",t)},expression:"houseInfo.houseUse"}})],1),a("a-col",{attrs:{span:4}},[e._v("有无电梯")]),a("a-col",{attrs:{span:4}},[a("j-d-dict-select-tag",{attrs:{disabled:e.disabled,dictCode:"is_have_elevator"},on:{change:e.depCompute},model:{value:e.houseInfo.liftFlag,callback:function(t){e.$set(e.houseInfo,"liftFlag",t)},expression:"houseInfo.liftFlag"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("交存模式")]),a("a-col",{attrs:{span:4,"data-prop":"depMode"}},[a("j-d-dict-select-tag",{attrs:{disabled:e.disabled,"get-popup-container":e.getContainer,dictCode:"dep_mode"},on:{change:e.depCompute},model:{value:e.houseInfo.depMode,callback:function(t){e.$set(e.houseInfo,"depMode",t)},expression:"houseInfo.depMode"}})],1),a("a-col",{attrs:{span:4}},[e._v("应交金额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(" "+e._s(e._f("getAmount")(e.houseInfo.dueAmount))+" ")])]),e.showDepAmount&&!e.isCanEditCont?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("实交金额(元)")]):e._e(),e.showDepAmount&&!e.isCanEditCont?a("a-col",{attrs:{span:4,"data-prop":"depAmount"}},[a("amount-input",{attrs:{disabled:e.isCanEditCont||e.amountChange,placeholder:"请输入实交金额"},scopedSlots:e._u([{key:"addonAfter",fn:function(){return[e.isEdieDepAmount?a("span",{staticStyle:{"margin-left":"4px"},on:{click:e.editAmount}},[a("a-icon",{attrs:{type:"edit"}})],1):e._e()]},proxy:!0}],null,!1,276813298),model:{value:e.houseInfo.depAmount,callback:function(t){e.$set(e.houseInfo,"depAmount",t)},expression:"houseInfo.depAmount"}})],1):e._e(),a("a-col",{attrs:{span:4}},[e._v("交存标准")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(e._s(e.depStandardFormat(e.houseInfo)))])]),a("a-col",{attrs:{span:4}},[e._v("账户余额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(e._s(e.showAmount(e.houseInfo.balance?Number(e.houseInfo.balance).toFixed(2):"0.00")))])]),a("a-col",{attrs:{span:4}},[e._v("冻结金额(元)")]),a("a-col",{attrs:{span:4}},[a("span",[e._v(e._s(e.showAmount(e.houseInfo.balanceFrozen?Number(e.houseInfo.balanceFrozen).toFixed(2):"0.00")))])]),a("a-col",{attrs:{span:4}},[e.disabled||"01"!==e.houseInfo.depMode?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋售价(元)")]),a("a-col",{attrs:{span:4,"data-prop":"price"}},[a("amount-input",{attrs:{placeholder:"请输入房屋售价",isHideAddon:"",disabled:e.isCanEditCont},on:{change:e.depCompute},model:{value:e.houseInfo.price,callback:function(t){e.$set(e.houseInfo,"price",t)},expression:"houseInfo.price"}})],1),a("a-col",{attrs:{span:4}},[e.propExtractFuncFlag?a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.loading,size:"small",type:"primary"},on:{click:e.updateByContractno}},[e._v("产权提取")]):e._e(),e._v("\n        合同号\n      ")],1),a("a-col",{attrs:{span:4}},[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center"}},[a("a-input",{attrs:{disabled:e.isCanEditCont},model:{value:e.houseInfo.contNo,callback:function(t){e.$set(e.houseInfo,"contNo",t)},expression:"houseInfo.contNo"}})],1)]),a("a-col",{attrs:{span:4}},[e._v("购房日期")]),a("a-col",{attrs:{span:4}},[a("j-date",{attrs:{placeholder:"请选择购房日期",disabled:e.isCanEditCont},model:{value:e.houseInfo.buyDate,callback:function(t){e.$set(e.houseInfo,"buyDate",t)},expression:"houseInfo.buyDate"}})],1),!e.disabled&&e.houseInfo.state&&e.houseInfo.houseState?e._e():a("a-col",{attrs:{span:4}},[e._v("房屋状态")]),!e.disabled&&e.houseInfo.state&&e.houseInfo.houseState?e._e():a("a-col",{attrs:{span:4}},[a("house-state-comp",{attrs:{state:e.houseInfo.state?e.houseInfo.state:e.houseInfo.houseState}})],1)],1)],1)],1)},o=[],r=a("3ed7"),i=a("0fea"),s=a("0cb8"),l=a("3269"),c=a("eccd"),u=a("4aae"),d=a("d8a5"),p={name:"HouseInfoComp",components:{HouseStateComp:s["default"],JDictBankListSelect:l["default"],JDDictSelectTag:c["default"],AmountInput:u["default"]},filters:{getAmount:function(e){return e&&""!==e&&"undefined"!==e?String(Number(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"}},props:{showDepAmount:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1,required:!1},headerTitle:{type:String,default:"房屋信息"},isShowHeader:{type:Boolean,default:!0},tag:{type:String,default:""},isCanEditCont:{type:Boolean,default:!1}},data:function(){return{loading:!1,isEdieDepAmount:!1,depStandardFormat:r["b"],amountChange:!0,isAdmin:!1,houseInfo:{},isModify:!0,activeKey:["1"],url:{getHouseInfo:"/base/rHouseInfo/queryHouseInfo/",tjfxGetHouseInfo:"/tjfx/queryHouseInfo/",checkUserIsCorp:"/sys/sysDepart/checkUserIsCorp",updateByContractno:"/hfmp/deposit/updateByContractno"},rulesHou:{name:[{required:!0,message:"请输入房屋名称！",trigger:"change"}],address:[{required:!0,message:"请输入房屋位置！",trigger:"change"}],houseUse:[{required:!0,message:"请选择房屋用途！",trigger:"change"}],bankCode:[{required:!0,message:"请选择承办银行！",trigger:"change"}],houseAttr:[{required:!0,message:"请选择房屋性质！",trigger:"change"}],struArea:[{validator:this.validateHouseArea}],depAmount:[{required:!0,message:"请输入交存金额！",trigger:"change"}],dueAmount:[{required:!0,message:"请输入应交金额！",trigger:"change"}],houseName:[{required:!0,message:"请输入房屋位置！",trigger:"change"},{max:300,message:"房屋位置长度不能超过300位！",trigger:"change"}],depMode:[{required:!0,message:"请选择交存模式！",trigger:"change"}],totalPrice:[{validator:this.validatePrice}]},propExtractFuncFlag:!1,houseAreaRules:""}},created:function(){var e=this;Object(d["e"])("PropExtractFuncFlag").then((function(t){e.propExtractFuncFlag="1"===t})),Object(d["e"])("house_area_rules").then((function(t){e.houseAreaRules=t||"03"})),this.initEditDepAmount()},watch:{houseInfo:{handler:function(e){this.$emit("update",e)},deep:!0}},inject:{getContainer:{default:function(){return function(){return document.body}}}},methods:{updateByContractno:function(){var e=this;this.loading=!0,Object(i["e"])(this.url.updateByContractno,{contractno:this.houseInfo.contNo,accno:this.houseInfo.accCode}).then((function(t){0!=Object.keys(t).length?(e.$message.success("产权提取成功！"),e.houseInfo.depMode=t.depmode,e.houseInfo.contNo=t.contractno,e.houseInfo.buyDate=t.buydate,e.houseInfo.price=t.price,e.houseInfo.struArea=t.struarea,e.depCompute(),e.$emit("updateInfoByContractNo",t),e.$forceUpdate()):e.$message.warning("产权提取失败！")})).finally((function(){e.loading=!1}))},initEditDepAmount:function(){var e=this;Object(i["e"])(this.url.checkUserIsCorp).then((function(t){t.success||(e.isAdmin=!0,Object(d["e"])("charge_is_edit_depAmount").then((function(t){t&&"1"===t&&(e.isEdieDepAmount=!0)})))}))},editAmount:function(){this.amountChange=!1},initData:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(i["e"])("tjfx"==this.tag?this.url.tjfxGetHouseInfo+e:this.url.getHouseInfo+e).then((function(e){e.success&&(t.houseInfo=e.result,a&&(!t.houseInfo.depStandard||t.houseInfo.dueAmount<=0||"1"===t.houseInfo.accState&&"/deposit/FirstDeposit"===t.$route.path)&&t.depCompute(),"1"!=t.houseInfo.accState&&"9"!=t.houseInfo.accState&&(t.isModify=!1),t.showDepAmount&&(t.houseInfo.depAmount=t.houseInfo.dueAmount))}))},depCompute:function(){var e=this;this.houseInfo.bldCode=this.houseInfo.corpCode,this.houseInfo.regionCode=this.houseInfo.propertyCode,this.houseInfo.depStandard&&this.houseInfo.dueAmount&&"1"===this.houseInfo.hisFlag||Object(i["j"])("/deposit/firstDeposit/calculateDueAmount",this.houseInfo).then((function(t){t.success&&(e.$set(e.houseInfo,"dueAmount",t.result),e.$set(e.houseInfo,"depAmount",t.result),e.$set(e.houseInfo,"depStandard",Number(t.message).toFixed(2)))}))},getHouseInfo:function(){return this.houseInfo.totalPrice=this.houseInfo.price,this.removeProperty(this.houseInfo)},removeProperty:function(e){return Object.keys(e).forEach((function(t){void 0!==e[t]&&null!==e[t]&&"null"!==e[t]&&"state"!==t||delete e[t]})),e},showAmount:function(e){return Object(r["g"])(e)},checkData:function(){var e=this.$refs.form.validaRowMsg(this.$refs.formRow);return e.valida},validatePrice:function(e,t,a){var n;"01"===this.houseInfo.depMode?(0===t||t||(n="请输入房屋售价",a(n)),Number(t)>0?a():(n="房屋售价应大于0",a(n))):a()},validateHouseArea:function(e,t,a){var n;"01"!==this.houseInfo.depMode?(0===t||t||(n="请输入房屋面积",a(n)),Number(t)>0?a():(n="房屋面积应大于0",a(n))):a()}}},f=p,h=(a("4dff"),a("2877")),m=Object(h["a"])(f,n,o,!1,null,"fbb7099e",null);t["default"]=m.exports},"30c2":function(e,t,a){"use strict";a("a4bf")},3130:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"width100",staticStyle:{margin:"10px 0"}},[e.disabled?e._e():a("a-checkbox-group",{attrs:{disabled:e.disabled,options:e.repairRangeOptions},on:{change:e.fstbuScopeChangea},model:{value:e.fstbuScopeValues,callback:function(t){e.fstbuScopeValues=t},expression:"fstbuScopeValues"}}),e.scopeData&&e.scopeData.length>0?a("a-row",{staticClass:"houseInfo"},[e._l(e.scopeData,(function(t,n){return[a("a-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:"typeLabel_"+n+"_"+t.scopeValue,attrs:{span:0}}),a("a-col",{key:"typeValue_"+n+"_"+t.scopeValue,attrs:{span:3}},[e._v(e._s(e.getScopeTextByValue(t.scopeValue)))]),a("a-col",{key:"classifyLabel_"+n+"_"+t.scopeValue,attrs:{span:2}},[e._v("资质分类")]),a("a-col",{key:"classifyValue_"+n+"_"+t.scopeValue,attrs:{span:e.disabled?4:3}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,dropdownMatchSelectWidth:!1,label:t.credentialTypeLabel,placeholder:"请选择资质分类",dictCode:"credential_type",align:"left",readOnly:e.disabled},on:{"update:label":function(a){return e.$set(t,"credentialTypeLabel",a)}},model:{value:t.credentialType,callback:function(a){e.$set(t,"credentialType",a)},expression:"item.credentialType"}})],1),a("a-col",{key:"gradeLabel_"+n+"_"+t.scopeValue,attrs:{span:2}},[e._v("资质等级")]),a("a-col",{key:"gradeValue_"+n+"_"+t.scopeValue,attrs:{span:3}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,dropdownMatchSelectWidth:!1,placeholder:"请选择资质等级",dictCode:"quality_grade",align:"left",readOnly:e.disabled},model:{value:t.qualityGrade,callback:function(a){e.$set(t,"qualityGrade",a)},expression:"item.qualityGrade"}})],1),a("a-col",{key:"deadlineLabel_"+n+"_"+t.scopeValue,attrs:{span:2}},[e._v("有效期限")]),a("a-col",{key:"deadlineValue_"+n+"_"+t.scopeValue,attrs:{span:3}},[a("a-date-picker",{attrs:{disabled:e.disabled,valueFormat:"YYYY-MM-DD",placeholder:"请选择有效期限"},model:{value:t.validPeriod,callback:function(a){e.$set(t,"validPeriod",a)},expression:"item.validPeriod"}})],1),a("a-col",{key:"aptitudeLabel_"+n+"_"+t.scopeValue,attrs:{span:2}},[e._v("\n        资质证书\n      ")]),a("a-col",{key:"aptitudeValue_"+n+"_"+t.scopeValue,attrs:{span:3}},[!e.disabled||e.disabled&&t["aptitudeFileList"]&&t["aptitudeFileList"].length>0?a("a",{on:{click:function(a){return e.openUploadFileModal(t,"aptitudeFileList")}}},[e._v("\n          上传附件"),t["aptitudeFileList"]&&t["aptitudeFileList"].length>0?[e._v("（"+e._s(t["aptitudeFileList"].length)+"）")]:e._e()],2):a("span",[e._v("暂未上传附件")])]),e.disabled?e._e():[a("a-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:"credentialLabel_"+n+"_"+t.scopeValue,attrs:{span:0}}),a("a-col",{key:"credentialValue_"+n+"_"+t.scopeValue,attrs:{span:1}},[a("a-space",{attrs:{size:4}},[a("a-icon",{attrs:{type:"plus-circle",theme:"twoTone"},on:{click:function(a){return e.addCredential(t,n)}}}),a("a-icon",{attrs:{type:"minus-circle",theme:"twoTone"},on:{click:function(a){return e.delCredential(t,n)}}})],1)],1)]]}))],2):a("span"),a("a-modal",{on:{close:e.uploadFileModalClose},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{on:{click:e.uploadFileModalClose}},[e._v("关闭")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("my-upload-file",{ref:"uploadFileComp",attrs:{isDetail:e.disabled,action:e.url.fileUploadImg+e.uploadFileTypeId},on:{change:e.uploadFileChange,delete:e.fileDelFun}})],1)],1)},o=[],r=a("eccd"),i=a("8ef0"),s=a("0fea"),l=a("d8a5");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return(t=f(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){var t=h(e,"string");return"symbol"==c(t)?t:t+""}function h(e,t){if("object"!=c(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var m={name:"ScopeMaintenance",props:{disabled:{type:Boolean,default:!1},scopeData:{type:Array,default:function(){return[]}},getContainer:{type:Function,default:function(){return function(){return document.body}}},fstbuScope:{type:String,default:""},isLogin:{type:Boolean,default:!0}},model:{event:"change.value",prop:"scopeData"},components:{MyUploadFile:i["default"],JDDictSelectTag:r["default"]},computed:{uploadFileUrl:function(){return this.url.fileUploadImg+this.uploadFileTypeId},fstbuScopeData:{get:function(){return this.scopeData},set:function(e){this.$emit("change.value",e)}},fstbuScopeValues:{get:function(){return this.fstbuScope?this.fstbuScope.split(","):[]},set:function(e){this.$emit("update:fstbuScope",e.join(","))}}},data:function(){return{visible:!1,currentFstbuScope:{},uploadFileType:"",fileCategoryArr:[],repairRangeOptions:[],uploadFileTypeId:"",url:{getFileCategory:"/business/eFileCategory/queryByCode",getFileCategoryNoLogin:"/business/eFileCategory/queryByCodeNoLogin",fileUploadImg:window._CONFIG["domianURL"]+"/control/file/uploadImg?parenPath=&orderNo=&uploadType=5&busiType=70&busiTypeDetail=7003&erecordId="}}},created:function(){var e=this,t="";t=this.isLogin?this.url.getFileCategory:this.url.getFileCategoryNoLogin,Object(s["e"])(t,{busiType:"70",busiTypeDetail:"7003"}).then((function(t){t&&t.success&&(e.fileCategoryArr=t.result)})),Object(l["g"])("repair_range").then((function(t){var a=t.result.map((function(e){var t={};return t.label=e.text,t.value=e.value,t}));e.repairRangeOptions=a}))},methods:{addCredential:function(e,t){var a=JSON.parse(JSON.stringify(e));e.id="",this.scopeData.splice(t+1,0,d(d({},a),{},{aptitudeFileList:[]}))},delCredential:function(e,t){var a=this.scopeData.filter((function(t){return t.scopeValue===e.scopeValue})).length;a<=1&&this.fstbuScopeValues.indexOf(e.scopeValue)>-1?this.$message.warning("".concat(this.getScopeTextByValue(e.scopeValue),"请至少保留一条维修范围数据")):this.scopeData.splice(t,1)},getScopeTextByValue:function(e){var t=this.repairRangeOptions.find((function(t){return t.value===e}));return t?t.label:""},openUploadFileModal:function(e,t){var a=this;this.uploadFileType=t,this.currentFstbuScope=e;var n=this.fileCategoryArr.find((function(e){return e.name===("aptitudeFileList"===t?"资质证书":"其他")}));this.uploadFileTypeId=n?n.id:"",this.visible=!0,this.$nextTick((function(){a.$refs.uploadFileComp.init(e[t]||[])}))},uploadFileModalClose:function(){this.visible=!1,this.currentFstbuScope={}},uploadFileChange:function(e){this.$set(this.currentFstbuScope,this.uploadFileType,e);var t="aptitudeFileList"===this.uploadFileType?"资质证书":"其他";this.$emit("upload-file",{type:t,fileList:e}),this.$forceUpdate()},fileDelFun:function(e){var t="aptitudeFileList"===this.uploadFileType?"资质证书":"其他";this.$emit("del-file",{type:t,fileId:e})},fstbuScopeChangea:function(e){var t=this;if(this.fstbuScopeData&&0!==this.fstbuScopeData.length)if(this.fstbuScopeData.length>e.length){var a=this.fstbuScopeData.findIndex((function(t){return-1===e.indexOf(t.scopeValue)}));a>-1&&(["aptitudeFileList","permissionFileList"].forEach((function(e,n){var o=t.fstbuScopeData[a][e]||[];o.forEach((function(e){t.$emit("del-file",{type:0===n?"资质证书":"其他",fileId:e.id})}))})),this.fstbuScopeData.splice(a,1))}else{var n=e.find((function(e){return!t.fstbuScopeData.find((function(t){return t.scopeValue===e}))})),o=this.repairRangeOptions.find((function(e){return e.value===n}));this.fstbuScopeData.push({label:this.getScopeTextByValue(o.value),scopeValue:o.value,aptitudeFileList:[],permissionFileList:[],qualityGrade:""})}else{var r=[];this.repairRangeOptions.forEach((function(a){e.includes(a.value)&&r.push({label:t.getScopeTextByValue(a.value),scopeValue:a.value,aptitudeFileList:[],permissionFileList:[],qualityGrade:""})})),this.fstbuScopeData=r}}}},b=m,v=(a("7ec5"),a("2877")),y=Object(v["a"])(b,n,o,!1,null,"50393521",null);t["default"]=y.exports},"38cb":function(e,t,a){},"3a6a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("corp-info-change-modal",{ref:"corpInfo"}),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n            变更详情\n          ")])])]},proxy:!0}])},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"show-pagination":!1},scopedSlots:e._u([{key:"oldInfoStr",fn:function(t){var a=t.text,n=t.row;return[e._v("\n          "+e._s(a||(n.oldInfo?n.oldInfo:"无"))+"\n        ")]}},{key:"newInfoStr",fn:function(t){var a=t.text,n=t.row;return[e._v("\n          "+e._s(a||(n.newInfo?n.newInfo:"无"))+"\n        ")]}}])})],1)],1)],1)},o=[],r=a("0fea"),i=a("0a5e"),s=a("ad66"),l={name:"CorpChangeInfoComp",components:{CorpInfoChangeModal:s["default"]},mixins:[i["a"]],data:function(){return{visible:!1,url:{list:"/base/rCorpInfo/getCorpInfoChangeByReq"},columns:[{title:"修改信息",align:"center",field:"wordNameStr",type:"input"},{title:"原数据",align:"center",field:"oldInfoStr",type:"input",slot:!0},{title:"新数据",align:"center",field:"newInfoStr",type:"input",slot:!0}],corpInfo:{},changeInfo:{},reqInfo:{},reqId:"",activeKey:["1"]}},created:function(){},methods:{close:function(){this.reqId=""},initData:function(e){var t=this;this.reqId=e;var a={reqId:e};this.$nextTick((function(){t.$refs.table.localParams=a,t.$refs.table.loadData()}))},loadData:function(e){var t=this,a={reqId:this.reqId};return Object(r["e"])(this.url.list,Object.assign(e,a)).then((function(e){return t.corpInfo=e.corpInfo,t.changeInfo=e.change,t.reqInfo=e.req,t.corpInfo.changePerson=e.change.createByName,t.corpInfo.changeTime=e.change.createTime,t.corpInfo.changeReason=e.change.reason,t.corpInfo.reqNo=e.req.reqNo,t.$nextTick((function(){t.$refs.corpInfo.check(t.corpInfo)})),e.change.changeDetails}))}}},c=l,u=(a("7b55"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,"7fec8457",null);t["default"]=d.exports},"3a9e":function(e,t,a){},"3dcf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"存在在途业务，点击【确定】 发起变更申请",visible:e.dialogTableVisible,modal:!1,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("j-form-container",{ref:"formAccPsn",attrs:{border:!1,formRef:"formRow"}},[a("a-row",{ref:"formAccPsnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[a("span",{staticClass:"font16"},[e._v("是否变更在途业务")])]),a("a-col",{attrs:{span:8}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.changeBusiness,callback:function(t){e.changeBusiness=t},expression:"changeBusiness"}})],1)],1)],1),a("el-table",{attrs:{data:e.gridData,border:"",stripe:"","cell-style":e.cellStyle,"header-cell-style":e.headCellStyle}},[a("el-table-column",{attrs:{property:"busiNo",label:"申请编号/业务编号"}}),a("el-table-column",{attrs:{property:"colaccCode",label:"收款账户"}}),a("el-table-column",{attrs:{property:"colaccName",label:"收款账户名称"}}),a("el-table-column",{attrs:{property:"colbankName",label:"收款账户银行"}}),a("el-table-column",{attrs:{property:"amount",label:"业务发生额(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("getAmount")(t.row.amount))+"\n        ")]}}])}),a("el-table-column",{attrs:{property:"busiTypeDetailName",label:"业务类别名称"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(t){e.dialogTableVisible=e.fasle}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check"},on:{click:e.handConfirm}},[e._v("确 定")])],1)],1)},o=[],r={data:function(){return{gridData:[],dialogTableVisible:!1,changeBusiness:!1,oldCode:""}},methods:{initData:function(e,t){this.dialogTableVisible=!0,this.gridData=e,this.oldCode=t},handConfirm:function(){this.$emit("changeData",this.changeBusiness),this.dialogTableVisible=!1,this.oldCode=""},cellStyle:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex,a="text-align:right",n="text-align:center",o="text-align:left";return 4===t?a:2===t?o:n},headCellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"text-align:center"}},filters:{getAmount:function(e){return e&&""!==e&&"undefined"!==e?String(Number(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"}}},i=r,s=(a("f1fb"),a("2877")),l=Object(s["a"])(i,n,o,!1,null,"1ee960b4",null);t["default"]=l.exports},"406d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.ItemList.length>0?a("el-popover",{attrs:{"popper-class":"materialPreviewPopover",placement:"left",width:"500",trigger:"hover","close-delay":200,"open-delay":200},on:{show:function(t){return e.showPopover()},hide:function(t){return e.hidePopover()}}},[a("div",{staticClass:"popoverBody"},[a("vxe-grid",{staticStyle:{width:"100%"},attrs:{"auto-resize":"","show-overflow":"tooltip",size:"mini",height:"217",data:e.previewPage.showList,columns:e.materialColumns},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.getMaterialName(n)))])]}},{key:"unitPrice",fn:function(t){t.text;var n=t.row;return[a("span",[e._v(e._s(e.formatterAmount(n.unitPrice)))])]}}],null,!1,2198673399)}),a("vxe-pager",{attrs:{total:e.previewPage.total,"current-page":e.previewPage.current,"page-size":e.previewPage.size,"page-sizes":[5,10,15,20],size:"mini",align:"right",layouts:["PrevPage","Jump","PageCount","NextPage","Sizes","Total"]},on:{"page-change":e.getPreviewShowListByPage}})],1),a("a",{staticClass:"cursor-default",attrs:{slot:"reference"},slot:"reference"},[e._v("共"+e._s(e.ItemList.length)+"个 "),a("a-icon",{attrs:{type:"eye"}})],1)]):a("span",[e._v("暂无已选材料")])],1)},o=[],r=a("0fea"),i=a("3ed7");function s(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=l(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var u={name:"MaterialQuantity",props:{ItemList:{type:[Object,Array],default:function(){return{}}}},data:function(){return{formatterAmount:i["g"],materialColumns:[{field:"name",title:"材料名称",slots:{default:"name"}},{field:"quantity",title:"数量",align:"right"},{field:"unitPrice",title:"单价",align:"right",slots:{default:"unitPrice"}},{field:"model",title:"型号"},{field:"brand",title:"品牌"}],materialTree:[],previewPage:{current:1,size:5,total:0,showList:[],allList:[]}}},computed:{CMaterialList:function(){var e=[];function t(a){var n,o=s(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;r.children&&r.children.length>0?t(r.children):e.push(r)}}catch(i){o.e(i)}finally{o.f()}}return t(this.materialTree),e}},created:function(){this.initMaterialTree()},methods:{initMaterialTree:function(){var e=this;this.materialTree=[],Object(r["e"])("/sys/category/loadTreeRoot",{async:!1,pcode:"material_type"}).then((function(t){t&&t.success&&t.result.length>0&&(e.materialTree=t.result)}))},showPopover:function(){this.previewPage.allList=JSON.parse(JSON.stringify(this.ItemList)),this.previewPage.total=this.previewPage.allList.length,this.getPreviewShowListByPage({currentPage:1,pageSize:5})},getPreviewShowListByPage:function(e){var t=e.currentPage,a=e.pageSize;this.previewPage.current=t,this.previewPage.size=a,this.previewPage.showList=this.previewPage.allList.slice((t-1)*a,t*a)},hidePopover:function(){document.querySelectorAll(".materialPreviewPopover").forEach((function(e){e.remove()}))},getMaterialName:function(e){if(e.name)return e.name;var t=this.CMaterialList.find((function(t){return t.code===e.materialCode}));return t?t.title:void 0}}},d=u,p=(a("b285"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"2b619bca",null);t["default"]=f.exports},"429e8":function(e,t,a){},"4b81":function(e,t,a){"use strict";a("535f")},"4bf9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"amountInfo"},[e.showTitle?a("span",{staticClass:"collapseTitle"},[e._v("\n    "+e._s(e.headerTitle)+"\n  ")]):e._e(),"grid"===e.type?a("j-form-container",{ref:"form",attrs:{border:!1,disabled:e.disabled,rules:e.validatorRules,model:e.accountInfo,formRef:"formRow"}},[a("a-row",{ref:"formAccRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e._v("收款账号")]),a("a-col",{attrs:{span:8,"data-prop":"code"}},[a("a-input",{attrs:{placeholder:"请输入收款账号"},model:{value:e.accountInfo.code,callback:function(t){e.$set(e.accountInfo,"code",t)},expression:"accountInfo.code"}})],1),a("a-col",{attrs:{span:4}},[e._v("开户银行")]),a("a-col",{attrs:{span:8,"data-prop":"bankName"}},[a("a-input",{attrs:{maxLength:30,placeholder:"请输入开户银行"},model:{value:e.accountInfo.bankName,callback:function(t){e.$set(e.accountInfo,"bankName",t)},expression:"accountInfo.bankName"}})],1),a("a-col",{attrs:{span:4}},[e._v("账户名称")]),a("a-col",{attrs:{span:8,"data-prop":"name"}},[a("a-input",{attrs:{maxLength:20,disabled:""},model:{value:e.accountInfo.name,callback:function(t){e.$set(e.accountInfo,"name",t)},expression:"accountInfo.name"}})],1),a("a-col",{attrs:{span:4}},[e._v("收款联系人")]),a("a-col",{attrs:{span:8,"data-prop":"linkName"}},[a("a-input",{attrs:{maxLength:20,placeholder:"请输入收款联系人"},model:{value:e.accountInfo.linkName,callback:function(t){e.$set(e.accountInfo,"linkName",t)},expression:"accountInfo.linkName"}})],1),a("a-col",{attrs:{span:4}},[e._v("收款联系人电话")]),a("a-col",{attrs:{span:8,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:"请输入收款联系人电话"},model:{value:e.accountInfo.phone,callback:function(t){e.$set(e.accountInfo,"phone",t)},expression:"accountInfo.phone"}})],1)],1)],1):a("a-form-model",e._b({ref:"form",attrs:{rules:e.validatorRules,model:e.accountInfo}},"a-form-model",e.formBind,!1),[a("a-form-model-item",{attrs:{label:"收款账号",prop:"code"}},[a("a-input",{attrs:{readOnly:e.disabled,placeholder:"请输入收款账号"},model:{value:e.accountInfo.code,callback:function(t){e.$set(e.accountInfo,"code",t)},expression:"accountInfo.code"}})],1),a("a-form-model-item",{attrs:{label:"开户银行",prop:"bankName"}},[a("a-input",{attrs:{maxLength:30,readOnly:e.disabled,placeholder:"请输入开户银行"},model:{value:e.accountInfo.bankName,callback:function(t){e.$set(e.accountInfo,"bankName",t)},expression:"accountInfo.bankName"}})],1),a("a-form-model-item",{attrs:{label:"账户名称",prop:"name"}},[a("a-input",{attrs:{maxLength:20,readOnly:e.disabled,disabled:""},model:{value:e.accountInfo.name,callback:function(t){e.$set(e.accountInfo,"name",t)},expression:"accountInfo.name"}})],1),a("a-form-model-item",{attrs:{label:"收款联系人",prop:"linkName"}},[a("a-input",{attrs:{maxLength:20,readOnly:e.disabled,placeholder:"请输入收款联系人"},model:{value:e.accountInfo.linkName,callback:function(t){e.$set(e.accountInfo,"linkName",t)},expression:"accountInfo.linkName"}})],1),a("a-form-model-item",{attrs:{label:"收款联系人电话",prop:"phone"}},[a("a-input",{attrs:{readOnly:e.disabled,placeholder:"请输入收款联系人电话"},model:{value:e.accountInfo.phone,callback:function(t){e.$set(e.accountInfo,"phone",t)},expression:"accountInfo.phone"}})],1)],1)],1)},o=[],r=a("0792"),i=a("0fea");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function d(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,a){return e[t]=a}}function p(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};d(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,l){var c=f(e[o],e,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,l)}),(function(e){a("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,l)}))}l(c.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=h;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?v:m,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(s(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=d(C,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,d(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),d(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(p(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),d(k,u,"Generator"),d(k,i,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){c(r,n,o,i,s,"next",e)}function s(e){c(r,n,o,i,s,"throw",e)}i(void 0)}))}}var d={name:"AccountInfoModal",props:{headerTitle:{type:String,default:"收款账户信息"},disabled:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},type:{type:String,default:"grid"},isLogin:{type:Boolean,default:!0}},data:function(){var e=this,t=function(t,a){return new Promise((function(t){a?Object(i["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:e.accountInfo.phone}}).then((function(e){e.success?t():t(e.result)})):t()}))},a=function(t,a,n){return new Promise((function(t){if(a){if(!e.isLogin){var o=/^1(3|4|5|7|8)\d{9}$/,r=/^\d{3}-\d{7,8}|\d{4}-\d{7,8}$/;if(o.test(a)||r.test(a))return n();var s="请输入正确的手机号或座机号!";return n(s)}Object(i["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:e.accountInfo.phone}}).then((function(e){e.success?n():n(e.result)}))}else n()}))};return{accountInfo:{id:"",code:"",bankName:"",name:"",linkName:"",phone:""},validatorRules:{phone:[{required:!1,message:"手机号码格式不正确!"},{validator:"grid"===this.type?t:a,type:"Promise"}],code:[{max:30,message:"账号长度不能超过30位！"},{validator:this.validateBankCode,type:"Promise"}]},formBind:{labelCol:{span:8},wrapperCol:{span:16}}}},methods:{validateBankCode:function(e,t,a){var n=this;return new Promise(function(){var e=u(l().mark((function e(o,s){var c,u;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c="grid"===n.type?o:a,""!=t&&void 0!=t){e.next=3;break}return e.abrupt("return",c());case 3:if(r["a"].bankCard.test(t)){e.next=5;break}return e.abrupt("return",c(r["a"].bankCardMsg));case 5:u={},u.accCode=t,u.id=n.accountInfo.id,Object(i["e"])("/base/rColaccInfo/checkAccCode",u).then((function(e){return e.success?c():c("该账户已存在!")}));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},initData:function(e){e&&(this.accountInfo.id=e.accountId,this.accountInfo.code=e.accountCode,this.accountInfo.bankName=e.accountBankName,this.accountInfo.name=e.accountName?e.accountName:e.name,this.accountInfo.linkName=e.accountLinkName,this.accountInfo.phone=e.accountPhone)},close:function(){this.accountInfo={code:"",bankName:"",name:"",linkName:"",phone:""}},CollectionVerification:function(){var e=this;return new Promise((function(t,a){e.$refs.form.validate().then((function(e){t(e)})).catch((function(e){t(e)}))}))}}},p=d,f=(a("6414"),a("2877")),h=Object(f["a"])(p,n,o,!1,null,"1a6ae37a",null);t["default"]=h.exports},"4dff":function(e,t,a){"use strict";a("6d1b")},"501e":function(e,t,a){},"52de":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-button",{staticStyle:{"margin-bottom":"8px"},attrs:{slot:"enterButton",type:"primary"},on:{click:e.onSearchRegion},slot:"enterButton"},[e._v("选择管辖范围")]),a("select-region-modal",{ref:"selectModal",attrs:{"search-width":"200px","modal-width":e.modalWidth,multi:e.multi,filterOfCorp:e.filterOfCorp,"region-ids":e.value,corpModel:e.corpModel,title:e.title,"query-data":e.queryData,columns:e.columns},on:{ok:e.selectOK,initComp:e.initComp}})],1)},o=[],r=a("1556"),i=a("c1df"),s=a.n(i);a("3ed7");function l(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var d={name:"SelectRegion",components:{SelectRegionModal:r["default"]},props:{filterOfCorp:{type:Boolean,required:!1,default:!1},corpModel:{},modalWidth:{type:Number,default:1250,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},multi:{type:Boolean,default:!0,required:!1},queryData:{type:Object,default:function(){return{baseType:"1"}},required:!1},title:{type:String,default:"小区",required:!1},columns:{type:Array,default:function(){return[{title:"小区名称",align:"left",dataIndex:"name"},{title:"小区地址",align:"left",dataIndex:"address"},{title:"所属区县",align:"center",dataIndex:"zoneCode_dictText"},{title:"编码",align:"center",dataIndex:"code"},{title:"备案日期",align:"center",dataIndex:"recDate",customRender:function(e){return e?s()(e).format("YYYY-MM-DD"):""}}]},required:!1}},data:function(){return{storeVals:"",textVals:""}},mounted:function(){this.storeVals=this.value},watch:{value:function(e){this.storeVals=e}},model:{prop:"value",event:"change"},methods:{initComp:function(e){this.textVals=e},onSearchRegion:function(){this.$refs.selectModal.showModal()},selectOK:function(e){if(e){var t,a=[],n=[],o=l(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;a.push(r["id"]),n.push(r["name"])}}catch(i){o.e(i)}finally{o.f()}this.storeVals=a.join(","),this.textVals=n.join(",")}else this.storeVals="",this.textVals="";this.$emit("change",this.storeVals),this.$emit("ok")}}},p=d,f=a("2877"),h=Object(f["a"])(p,n,o,!1,null,"0faa869a",null);t["default"]=h.exports},"535f":function(e,t,a){},"545e":function(e,t,a){"use strict";a("d556")},5633:function(e,t,a){},"59ff":function(e,t,a){},"609f":function(e,t,a){},"63dd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.hideHeader?a("vxe-table",e._b({ref:"xTable",attrs:{border:"","show-overflow":"","keep-source":"","header-align":"center",data:e.psnData,"edit-config":{trigger:"click",showIcon:!1,mode:"cell",icon:"fa fa-pencil",showStatus:!0},"edit-rules":e.disabled?{}:e.editRules},on:{"valid-error":e.validError},scopedSlots:e._u([{key:"empty",fn:function(){return[e._t("empty",(function(){return[a("div",{staticClass:"tableEmpty"},[a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[e._v(" "+e._s(e.describe||"暂无数据")+" "),e.disabled?e._e():a("a",{on:{click:function(t){return e.addPsn()}}},[e._v("立即新增")])])])],1)]}))]},proxy:!0}],null,!0)},"vxe-table",e.bindAttr,!1),[a("vxe-table-column",{attrs:{type:"seq",title:"序号",align:"center",width:"60"}}),a("vxe-table-column",{attrs:{field:"name",title:"业主姓名",width:"auto",minWidth:e.getTableWidth(200),align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.name))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入业主姓名"},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"row.name"}})]}}])}),a("vxe-table-column",{attrs:{field:"certType",title:"证件类型",align:"center",width:e.getTableWidth(180),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[a("j-d-dict-select-tag",{staticClass:"width100",attrs:{"get-popup-container":e.getContainer,title:"证件类型","read-only-span":e.disabled,dictCode:"cert_type",placeholder:e.disabled?"":"请选择证件类型"},model:{value:n.certType,callback:function(t){e.$set(n,"certType",t)},expression:"row.certType"}})]}}])}),a("vxe-table-column",{attrs:{field:"certNo",title:"证件号码","min-width":e.getTableWidth(260),align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row,o=t.column;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.certNo))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入证件号码"},scopedSlots:e._u(["1"==n.certType?{key:"addonAfter",fn:function(){return[a("i-d-card-reading",{attrs:{color:"#1890ff"},on:{readOk:function(t){return e.readIdCardCallBack(n,o,!0,t)},readErr:function(t){return e.readIdCardCallBack(n,o,!1,t)}}})]},proxy:!0}:null],null,!0),model:{value:n.certNo,callback:function(t){e.$set(n,"certNo",t)},expression:"row.certNo"}})]}}])}),a("vxe-table-column",{attrs:{field:"baseType",title:"业主类别",align:"center",width:e.getTableWidth(130),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[a("j-d-dict-select-tag",{staticClass:"width100",attrs:{"get-popup-container":e.getContainer,readOnlySpan:e.disabled,title:"业主类别",dictCode:"owner_category",placeholder:e.disabled?"":"请选择业主类别"},model:{value:n.baseType,callback:function(t){e.$set(n,"baseType",t)},expression:"row.baseType"}})]}}])}),a("vxe-table-column",{attrs:{field:"phone",title:"联系电话",align:"center",width:e.getTableWidth(150),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.phone))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入联系电话"},model:{value:n.phone,callback:function(t){e.$set(n,"phone",t)},expression:"row.phone"}})]}}])}),e.disabled?e._e():a("vxe-table-column",{attrs:{title:"操作",fixed:"right",width:e.getTableWidth(150),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.rowIndex;return[a("a",{on:{click:function(t){return e.addPsn(n)}}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 新增")],1),!e.keepOne||e.keepOne&&e.psnData.length>1&&0!==o?[a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.deletePsn(n,o)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]:e._e()]}}],null,!1,1600034469)})],1):a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n            "+e._s(e.headerTitle)+"\n          ")])])]},proxy:!0}],null,!1,2805534264)},["single"===e.compType?a("j-form-container",{ref:"formRow",attrs:{rules:e.rules,model:e.psnInfo,disabled:e.disabled,border:!1}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("业主姓名")]),a("a-col",{attrs:{span:4,"data-prop":"name"}},[a("a-input",{attrs:{placeholder:e.disabled?"":"请输入业主姓名"},model:{value:e.psnInfo.name,callback:function(t){e.$set(e.psnInfo,"name","string"===typeof t?t.trim():t)},expression:"psnInfo.name"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("证件类型")]),a("a-col",{attrs:{span:4,"data-prop":"certType"}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,title:"证件类型",dictCode:"cert_type",placeholder:e.disabled?"":"请选择证件类型"},on:{change:function(t){return e.dictChange(t,"certType")}},model:{value:e.psnInfo.certType,callback:function(t){e.$set(e.psnInfo,"certType",t)},expression:"psnInfo.certType"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("证件号码")]),a("a-col",{attrs:{span:4,"data-prop":"certNo"}},[a("a-input",{attrs:{placeholder:e.disabled?"":"请输入证件号码"},model:{value:e.psnInfo.certNo,callback:function(t){e.$set(e.psnInfo,"certNo",t)},expression:"psnInfo.certNo"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("业主类别")]),a("a-col",{attrs:{span:4,"data-prop":"baseType"}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,title:"业主类别",dictCode:"owner_category",placeholder:e.disabled?"":"请选择业主类别"},on:{change:function(t){return e.dictChange(t,"baseType")}},model:{value:e.psnInfo.baseType,callback:function(t){e.$set(e.psnInfo,"baseType",t)},expression:"psnInfo.baseType"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("联系电话")]),a("a-col",{attrs:{span:4,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:e.disabled?"":"请输入联系电话"},model:{value:e.psnInfo.phone,callback:function(t){e.$set(e.psnInfo,"phone",t)},expression:"psnInfo.phone"}})],1)],1)],1):e._e(),"batch"===e.compType?a("vxe-table",{ref:"xTable",attrs:{border:"","auto-resize":"","show-overflow":"","keep-source":"","header-align":"center","max-height":"400",data:e.psnData,"valid-config":{message:"default"},"edit-config":{trigger:"click",showIcon:!1,mode:"cell",icon:"fa fa-pencil",showStatus:!0},"edit-rules":e.disabled?{}:e.editRules},on:{"valid-error":e.validError},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div",{staticClass:"tableEmpty"},[a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[e._v(" 暂无数据 "),e.disabled?e._e():a("a",{on:{click:function(t){return e.addPsn()}}},[e._v("立即新增")])])])],1)]},proxy:!0}],null,!1,558752868)},[a("vxe-table-column",{attrs:{type:"seq",title:"序号",align:"center",width:"60"}}),a("vxe-table-column",{attrs:{field:"name",title:"业主姓名",width:"auto",minWidth:e.getTableWidth(200),align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.name))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入业主姓名"},model:{value:n.name,callback:function(t){e.$set(n,"name","string"===typeof t?t.trim():t)},expression:"row.name"}})]}}],null,!1,1647416679)}),a("vxe-table-column",{attrs:{field:"certType",title:"证件类型",align:"center",width:e.getTableWidth(180),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[a("j-d-dict-select-tag",{staticClass:"width100",attrs:{"get-popup-container":e.getContainer,title:"证件类型","read-only-span":e.disabled,dictCode:"cert_type",placeholder:e.disabled?"":"请选择证件类型"},model:{value:n.certType,callback:function(t){e.$set(n,"certType",t)},expression:"row.certType"}})]}}],null,!1,2163903516)}),a("vxe-table-column",{attrs:{field:"certNo",title:"证件号码","min-width":e.getTableWidth(260),align:"center","edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row,o=t.column;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.certNo&&"null"!==n.certNo?n.certNo:""))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入证件号码"},scopedSlots:e._u(["1"==n.certType?{key:"addonAfter",fn:function(){return[a("i-d-card-reading",{attrs:{color:"#1890ff"},on:{readOk:function(t){return e.readIdCardCallBack(n,o,!0,t)},readErr:function(t){return e.readIdCardCallBack(n,o,!1,t)}}})]},proxy:!0}:null],null,!0),model:{value:n.certNo,callback:function(t){e.$set(n,"certNo",t)},expression:"row.certNo"}})]}}],null,!1,2889017691)}),a("vxe-table-column",{attrs:{field:"baseType",title:"业主类别",align:"center",width:e.getTableWidth(130),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[a("j-d-dict-select-tag",{staticClass:"width100",attrs:{"get-popup-container":e.getContainer,"read-only-span":e.disabled,title:"业主类别",dictCode:"owner_category",placeholder:e.disabled?"":"请选择业主类别"},model:{value:n.baseType,callback:function(t){e.$set(n,"baseType",t)},expression:"row.baseType"}})]}}],null,!1,1280644256)}),a("vxe-table-column",{attrs:{field:"phone",title:"联系电话",align:"center",width:e.getTableWidth(150),"edit-render":{type:"visible"}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;t.rowIndex;return[e.disabled?a("span",[e._v(e._s(n.phone&&"null"!==n.phone?n.phone:""))]):a("a-input",{attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请输入联系电话"},model:{value:n.phone,callback:function(t){e.$set(n,"phone",t)},expression:"row.phone"}})]}}],null,!1,2325848240)}),e.disabled?e._e():a("vxe-table-column",{attrs:{title:"操作",fixed:"right",width:e.getTableWidth(150),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.rowIndex;return[a("a",{on:{click:function(t){return e.addPsn(n)}}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 新增")],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.deletePsn(n,o)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]}}],null,!1,3019129945)})],1):e._e()],1)],1)],1)},o=[],r=a("eccd"),i=a("0792"),s=a("0fea"),l=a("d492"),c=a("3ed7"),u=a("4ec3");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */p=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",m="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};c(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,s){var l=f(e[o],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==d(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=h;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,a,n);if("normal"===c.type){if(o=n.done?v:m,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=f(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=c(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(u(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),c(k,l,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function f(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){f(r,n,o,i,s,"next",e)}function s(e){f(r,n,o,i,s,"throw",e)}i(void 0)}))}}function m(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=b(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function b(e,t){if(e){if("string"==typeof e)return v(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var y={name:"PsnInfoComp",components:{JDDictSelectTag:r["default"],IDCardReading:l["default"]},props:{headerTitle:{type:String,default:"业主信息"},disabled:{type:Boolean,default:!1},regionId:{type:String,default:""},compType:{type:String,default:"single"},psnListProp:{type:Array,default:function(){return[]}},bindAttr:{type:Object,default:function(){return{maxHeight:"400"}}},hideHeader:{type:Boolean,default:!1},describe:{type:String,default:""},keepOne:{type:Boolean,default:!1},hasAtLeastOneData:{type:Boolean,default:!1}},inject:{getContainer:{default:function(){return function(){return document.body}}}},watch:{psnData:{immediate:!0,deep:!0,handler:function(e){this.keepOne&&e.length<1||this.$emit("update:psnListProp",e)}}},created:function(){this.initRule()},data:function(){var e=this,t=function(e,t,a){if(!t)return a();Object(s["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(e){return e.success?a():a(e.result)}))},a=function(t,a,n){""!==a&&void 0!==a||n(),a&&1==e.psnInfo.certType&&(i["a"].IDCard.test(a)||n("请输入正确格式的身份证号")),n()},n=function(t){var a=t.cellValue,n=t.row;if(!a)return Promise.reject(new Error("请输入证件号码"));if("1"===n["certType"]&&(!a||!a.match(/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/)))return Promise.reject(new Error("请输入正确的身份证号码"));if(n.name){var o,r=m(e.psnData);try{for(r.s();!(o=r.n()).done;){var i=o.value;if(a==i.certNo&&n["certType"]==i.certType&&n.name==i.name&&n["_XID"]!=i._XID)return Promise.reject(new Error("业主身份信息重复"))}}catch(s){r.e(s)}finally{r.f()}}},o=function(e){var t=e.cellValue;return new Promise((function(e,a){if(!t)return a(new Error("请输入证件号码"));Object(s["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){return t.success?e():a(new Error(t.result))}))}))},r={batchCertNo:n,batchPhone:o,certNo:a,phone:t};return{validaRuleMap:r,psnInfo:{},activeKey:["1"],rules:{baseType:[{required:!0,message:"请选择业主类别",trigger:"change"}],certType:[{required:!0,message:"请选择证件类型",trigger:"change"}],name:[{required:!0,message:"请填写业主姓名",trigger:"change"}],certNo:[{required:!0,message:"请填写证件号码",trigger:"change"},{validator:a}],phone:[{required:!0,message:"请填写联系电话",trigger:"change"},{validator:t}]},psnData:[],timer:null,editRules:{baseType:[{required:!0,message:"请选择业主类型",trigger:"change"}],certType:[{required:!0,message:"请选择证件类型",trigger:"change"}],certNo:[{required:!0,message:"请填写证件号码",trigger:"change"},{validator:n}],baseTypeName:[{required:!0,message:"请选择业主类型",trigger:"change"}],name:[{required:!0,message:"请输入业主姓名",trigger:"change"}],phone:[{required:!0,message:"请填写联系电话",trigger:"change"},{validator:o}]},actionWidth:150,psnNoPhoneIsRequired:!0}},methods:{readIdCardCallBack:function(e,t,a,n){a?(this.$set(e,"certNo",n.idNum),this.$set(e,"name",n.name)):(this.$set(e,"certNo",""),this.$message.warning(n)),this.$refs.xTable.updateStatus({row:e,column:t})},initRule:function(){var e=this;Object(u["l"])("deposit_check_switch").then((function(t){t&&"1"===t.result?(e.psnNoPhoneIsRequired=!1,e.editRules["certType"]=[],e.editRules["certNo"]=[],e.editRules["phone"]=[],e.rules["certType"]=[],e.rules["certNo"]=[],e.rules["phone"]=[]):(e.psnNoPhoneIsRequired=!0,e.editRules["certType"]=[{required:!0,message:"请选择证件类型",trigger:"change"}],e.editRules["certNo"]=[{required:!0,message:"请填写证件号码",trigger:"change"},{validator:e.validaRuleMap["batchCertNo"]}],e.editRules["phone"]=[{required:!0,message:"请填写联系电话",trigger:"change"},{validator:e.validaRuleMap["batchPhone"]}],e.rules["certType"]=[{required:!0,message:"请选择证件类型",trigger:"change"}],e.rules["certNo"]=[{required:!0,message:"请填写证件号码",trigger:"change"},{validator:e.validaRuleMap["certNo"]}],e.rules["phone"]=[{required:!0,message:"请填写联系电话",trigger:"change"},{validator:e.validaRuleMap["phone"]}])}))},dictChange:function(e,t){this.psnInfo[t]=e},checkData:function(){var e=h(p().mark((function e(){var t=this;return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if("batch"===t.compType){var a=t.$refs.xTable;a.validate(t.psnData).then((function(t){e(!0)})).catch((function(t){e(!1)}))}else{var n=t.$refs.formRow.validaRowMsg(t.$refs.formOwnRow);n.valida?e(!0):e(!1)}})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getPsnInfo:function(){return"batch"===this.compType?this.psnData:this.psnInfo},addPsn:function(e){var t=this,a=this,n=this.$refs.xTable;n.validate(e).then((function(){a.psnData.push({baseType:"1",certType:"1"}),n.setActiveRow({})})).catch((function(e){setTimeout((function(){t.$refs.xTable.clearValidate()}),2e3)}))},validError:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.$refs.xTable.clearValidate()}),2e3)},deletePsn:function(e,t){this.hasAtLeastOneData&&this.psnData.length<=1?this.$message.warning("请至少保留一条业主信息"):this.psnData.splice(t,1)},whetherToAddANewLine:function(){this.disabled||"batch"===this.compType&&this.addPsn()},getTableWidth:function(e){return"careMode"===this.$store.state.app.layout?Object(c["e"])(e,1.2):e}}},g=y,w=(a("dd3b"),a("2877")),C=Object(w["a"])(g,n,o,!1,null,"cc33d6ba",null);t["default"]=C.exports},6414:function(e,t,a){"use strict";a("0a1b")},"65ed":function(e,t,a){},"69e1":function(e,t,a){},"6d1b":function(e,t,a){},"70cd":function(e,t,a){"use strict";a("28ed")},"714b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更详情 ")])])]},proxy:!0}])},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":"null",maxHeight:400},scopedSlots:e._u([{key:"operType",fn:function(t){var n=t.text;t.row;return[1===n?a("span",[e._v("新增")]):2===n?a("span",[e._v("修改")]):3===n?a("span",[e._v("删除")]):e._e()]}},{key:"actionExpand",fn:function(t){t.text;var n=t.row;return[a("a-table",{attrs:{size:"middle",bordered:"",columns:e.childColumns,dataSource:n.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.wordNameStr)+"\n            ")])}},{key:"oldInfoStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.oldInfoStr?n.oldInfoStr:n.oldInfo?n.oldInfo:"无")+"\n            ")])}},{key:"newInfoStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.newInfoStr?n.newInfoStr:n.newInfo?n.newInfo:"无")+"\n            ")])}}],null,!0)})]}}])})],1)],1),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}])},[a("j-form-container",{attrs:{disabled:!0}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("变更人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"变更人"}},[a("a-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.changeInfo.createByName,callback:function(t){e.$set(e.changeInfo,"createByName",t)},expression:"changeInfo.createByName"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("变更日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"变更日期"}},[e._v("\n              "+e._s(e._f("formatDate")(e.changeInfo.createTime))+"\n              ")])],1),a("a-col",{staticStyle:{height:"80px"},attrs:{span:4}},[e._v("变更原因")]),a("a-col",{staticStyle:{height:"80px"},attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{placeholder:"请输入变更原因",autoSize:{minRows:3,maxRows:3},rows:3,disabled:!0,maxLength:150},model:{value:e.changeInfo.reason,callback:function(t){e.$set(e.changeInfo,"reason",t)},expression:"changeInfo.reason"}})],1)],1)],1)],1)],1)],1),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505B",busiNo:e.reqInfo.reqNo,"is-detail":!0}}),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505C",busiNo:e.reqInfo.reqNo,"is-detail":!0}})],1)},o=[],r=a("0fea"),i=a("c1df"),s=a.n(i),l=a("0a5e"),c=a("9fbd"),u={name:"HouseChangeInfoComp",components:{TypeAttachmentUpload:c["default"]},mixins:[l["a"]],data:function(){return{visible:!1,url:{list:"/common/bChange/pageListByObj",queryById:"/common/bBusiReq/queryById",queryHouseById:"/base/rtRegion/queryById"},columns:[{title:"变更类别",align:"center",field:"operType",width:"80px",type:"input",slot:!0},{title:"房屋信息",align:"left",headerAlign:"center",field:"remark",type:"input",showOverflow:!0,className:"noPreLine"},{title:"详情",align:"center",field:"action",width:"80px",type:"expand",slot:!0}],childColumns:[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"变更项",align:"center",dataIndex:"wordNameStr",scopedSlots:{customRender:"wordNameStr"}},{title:"原信息",align:"center",dataIndex:"oldInfoStr",scopedSlots:{customRender:"oldInfoStr"}},{title:"新信息",align:"center",dataIndex:"newInfoStr",scopedSlots:{customRender:"newInfoStr"}}],changeInfo:{},reqInfo:{},activeKey:["1"]}},created:function(){},methods:{getHouseName:function(e){},close:function(){this.reqInfo={}},initData:function(e){var t=this;Object(r["e"])(this.url.queryById,{id:e}).then((function(e){if(e.success){t.reqInfo=e.result,t.$nextTick((function(){t.$refs.fileupload.initData()}));var a={reqNo:e.result.reqNo};t.$nextTick((function(){t.$refs.table.localParams=a,t.$refs.table.loadData()}))}}))},loadData:function(e){var t={reqNo:this.reqInfo.reqNo},a=this;return Object(r["e"])(this.url.list,Object.assign(e,t)).then((function(e){return a.changeInfo=e.result.records[0],e.result}))}},filters:{formatDate:function(e){if(e)return s()(e).format("YYYY-MM-DD")}}},d=u,p=(a("07c0"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"d6d7cd9a",null);t["default"]=f.exports},"716f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-form-container",{attrs:{disabled:e.disabled}},[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?{}:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("小区名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"小区名称"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.regionName,callback:function(t){e.$set(e.model,"regionName",t)},expression:"model.regionName"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("自然幢名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"自然幢名称"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.bldName,callback:function(t){e.$set(e.model,"bldName",t)},expression:"model.bldName"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("单元编号")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"code",label:"单元编号"}},[a("a-input",{attrs:{placeholder:"请输入单元编号",disabled:e.disabled||e.changeDisabled},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("单元名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",label:"单元名称"}},[a("a-input",{attrs:{placeholder:"请输入单元名称",disabled:e.disabled},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地上楼层数")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"overFloor",label:"地上楼层数"}},[a("a-input-number",{attrs:{min:0,precision:0,disabled:e.disabled||e.changeDisabled},model:{value:e.model.overFloor,callback:function(t){e.$set(e.model,"overFloor",t)},expression:"model.overFloor"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地上每层户数")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"overPerFloor",label:"地上每层户数"}},[a("a-input-number",{attrs:{min:0,precision:0,disabled:e.disabled||e.changeDisabled},model:{value:e.model.overPerFloor,callback:function(t){e.$set(e.model,"overPerFloor",t)},expression:"model.overPerFloor"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地下楼层数")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"underFloor",label:"地下楼层数"}},[a("a-input-number",{attrs:{min:0,precision:0,disabled:e.underDisabled||e.disabled||e.changeDisabled},model:{value:e.model.underFloor,callback:function(t){e.$set(e.model,"underFloor",t)},expression:"model.underFloor"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地下每层户数")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"underPerFloor",label:"地下每层户数"}},[a("a-input-number",{attrs:{min:0,precision:0,disabled:e.underDisabled||e.disabled||e.changeDisabled},model:{value:e.model.underPerFloor,callback:function(t){e.$set(e.model,"underPerFloor",t)},expression:"model.underPerFloor"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("是否存在底商")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否存在底商"}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否",disabled:e.disabled||e.changeDisabled},on:{change:e.onisShopChange},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1)],1),e.visibleCheck?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("底商开始层数")]):e._e(),e.visibleCheck?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"startFloor",label:"底商开始层数"}},[a("a-input-number",{attrs:{precision:0,disabled:e.disabled||e.changeDisabled},model:{value:e.model.startFloor,callback:function(t){e.$set(e.model,"startFloor",t)},expression:"model.startFloor"}})],1)],1):e._e(),e.visibleCheck?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("底商结束层数")]):e._e(),e.visibleCheck?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"endFloor",label:"底商结束层数"}},[a("a-input-number",{attrs:{precision:0,disabled:e.disabled||e.changeDisabled},model:{value:e.model.endFloor,callback:function(t){e.$set(e.model,"endFloor",t)},expression:"model.endFloor"}})],1)],1):e._e(),e.visibleCheck?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("底商每层户数")]):e._e(),e.visibleCheck?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"shopPerFloor",label:"底商每层户数"}},[a("a-input-number",{attrs:{min:0,precision:0,disabled:e.disabled||e.changeDisabled},model:{value:e.model.shopPerFloor,callback:function(t){e.$set(e.model,"shopPerFloor",t)},expression:"model.shopPerFloor"}})],1)],1):e._e()],1)],1)],1)],1)},o=[],r={name:"CellBaseInfoComp",props:["model","validatorRules","labelCol","wrapperCol","disabled","changeDisabled","underDisabled"],data:function(){return{visibleCheck:!0}},computed:{cellCode:function(){return this.model.code}},watch:{model:function(e,t){this.$emit("update",e)},cellCode:function(e,t){e!==t&&this.changeCellCode(e,t)}},created:function(){this.init()},methods:{changeCellCode:function(e,t){this.model.name=e&&!t?this.model.code+"单元":this.model.name.replace(t,e),this.$refs.form.validateField("name")},init:function(){this.onisShopChange(1==this.model.isShop)},onisShopChange:function(e){e?(this.disabled||(this.model.isShop=1,this.$set(this.model,"startFloor",0),this.$set(this.model,"endFloor",0),this.$set(this.model,"shopPerFloor",0)),this.visibleCheck=!0):(this.model.isShop=0,this.visibleCheck=!1)}}},i=r,s=(a("c550"),a("2877")),l=Object(s["a"])(i,n,o,!1,null,"327ac746",null);t["default"]=l.exports},"74c7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["5058"==e.reqInfo.busiTypeDetail?a("region-info-change-modal",{ref:"regionInfo",attrs:{disabled:!0}}):e._e(),"5059"==e.reqInfo.busiTypeDetail?a("bld-info-change-modal",{ref:"regionInfo",attrs:{disabled:!0}}):e._e(),"505A"==e.reqInfo.busiTypeDetail?a("cell-info-change-modal",{ref:"regionInfo",attrs:{disabled:!0}}):e._e(),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("\n            变更详情\n          ")])])]},proxy:!0}])},[a("v-table",{ref:"table",attrs:{tableHeight:200,"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"show-pagination":!1},scopedSlots:e._u([{key:"oldInfoStr",fn:function(t){var a=t.text,n=t.row;return[e._v("\n          "+e._s(a||(n.oldInfo?n.oldInfo:"无"))+"\n        ")]}},{key:"newInfoStr",fn:function(t){var a=t.text,n=t.row;return[e._v("\n          "+e._s(a||(n.newInfo?n.newInfo:"无"))+"\n        ")]}}])})],1)],1)],1)},o=[],r=a("0fea"),i=a("0a5e"),s=a("8466"),l=a("f520"),c=a("7de8"),u=a("c1df"),d=a.n(u),p={name:"RegionChangeInfoComp",components:{RegionInfoChangeModal:s["default"],BldInfoChangeModal:l["default"],CellInfoChangeModal:c["default"]},mixins:[i["a"]],data:function(){return{visible:!1,url:{list:"/base/rtRegion/queryChangeByReq"},columns:[{title:"修改信息",align:"center",field:"wordNameStr",type:"input"},{title:"原数据",align:"center",field:"oldInfoStr",type:"input",slot:!0},{title:"新数据",align:"center",field:"newInfoStr",type:"input",slot:!0}],regionInfo:{},changeInfo:{},reqInfo:{},reqId:"",activeKey:["1"]}},created:function(){},methods:{close:function(){this.reqId=""},initData:function(e){var t=this;this.reqId=e;var a={reqId:e};this.$nextTick((function(){t.$refs.table.localParams=a,t.$refs.table.loadData()}))},loadData:function(e){var t=this,a={reqId:this.reqId};return Object(r["e"])(this.url.list,Object.assign(e,a)).then((function(e){return t.regionInfo=e.region,t.changeInfo=e.change,t.reqInfo=e.req,t.regionInfo.changePerson=e.change.createByName,t.regionInfo.changeTime=d()(e.change.createTime).format("YYYY-MM-DD"),t.regionInfo.changeReason=e.change.reason,t.regionInfo.reqNo=e.req.reqNo,t.$nextTick((function(){t.$refs.regionInfo.check(t.regionInfo)})),e.change.changeDetails}))}}},f=p,h=(a("274e"),a("2877")),m=Object(h["a"])(f,n,o,!1,null,"61b0a78e",null);t["default"]=m.exports},7835:function(e,t,a){},"794c":function(e,t,a){"use strict";a("429e8")},"7b55":function(e,t,a){"use strict";a("f05e")},"7d28":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{height:"100%"},attrs:{bordered:!1,"body-style":{height:"100%",padding:0}}},[a("div",{staticStyle:{height:"100%"}},[[a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,tableHeight:220,checkbox:!1,"table-height":"600",selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,ifInitQuery:!1,tableColumn:e.columns},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var n=t.row;return[a("a",{on:{click:function(t){return e.handleDetail(n)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 详情")],1)]}},{key:"state",fn:function(t){t.text;var n=t.row;return["9"==n.state?a("span",[e._v("新建档")]):e._e(),"2"==n.state?a("span",[e._v("待备案")]):e._e(),"0"==n.state?a("span",[e._v("正常")]):e._e(),"4"==n.state?a("span",[e._v("待注销")]):e._e(),"5"==n.state?a("span",[e._v("已注销")]):e._e(),"8"==n.state?a("span",[e._v("监管划转冻结")]):e._e()]}}])})]],2),a("cell-info-detail",{ref:"cellDetail",attrs:{zIndex:e.zIndex+1}}),a("house-detail-comp",{ref:"houseDetail",attrs:{zIndex:e.zIndex+1}}),a("bld-info-detail",{ref:"bldDetail",attrs:{zIndex:e.zIndex+1}}),a("region-info-detail",{ref:"regionDetail",attrs:{zIndex:e.zIndex+1}})],1)},o=[],r=a("0a5e"),i=a("7de8"),s=a("6c49"),l=a("61be"),c=a("b5c9"),u=a("a596"),d=a("0fea"),p=a("821c"),f={name:"RegionBatchDelComp",components:{HouseDetailComp:p["default"],CellInfoChangeModal:i["default"],CellInfoDetail:s["default"],HouseInfoDetail:l["default"],BldInfoDetail:c["default"],RegionInfoDetail:u["default"]},mixins:[r["a"]],props:{zIndex:{type:Number,default:1e3}},data:function(){var e=this;return{fileName:"RegionBatchDelComp",description:"区域批量删除审核页面",columns:[{title:"名称",align:"center",field:"joinName",headerAlign:"center",type:"input"},{title:"编号",align:"center",headerAlign:"center",field:"code",type:"input",width:150},{title:"地址",align:"center",field:"address",type:"input",width:250},{title:"状态",align:"center",field:"state",type:"input",width:100,slot:!0},{title:"操作",field:"action",align:"center",slot:!0,fixed:"right",width:150}],url:{list:"/base/rtRegion/delListByReqId"},loadData:function(t){return Object(d["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},methods:{initData:function(e){var t=this;this.$nextTick((function(){t.$refs.table.localParams={reqId:e},t.$refs.table.loadData()}))},handleDetail:function(e){var t=Object.assign({},e);3==e.baseType?this.$refs.cellDetail.edit(e):2==e.baseType?this.$refs.bldDetail.initData(e.id):1==e.baseType?this.$refs.regionDetail.edit(t):this.$refs.houseDetail.initData(e.id)}}},h=f,m=(a("545e"),a("2877")),b=Object(m["a"])(h,n,o,!1,null,"3c0527a5",null);t["default"]=b.exports},"7f8f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("转账清册列表 ")])])]},proxy:!0}])},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":null,maxHeight:400},scopedSlots:e._u([{key:"loanFlag",fn:function(t){var n=t.text;return["1"===n?a("a-badge",{attrs:{status:"success",text:"收入"}}):"2"===n?a("a-badge",{attrs:{status:"processing",text:"支出"}}):e._e()]}}])})],1)],1),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 申请信息 ")])])]},proxy:!0}])},[a("j-form-container",{attrs:{disabled:!0}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("申请人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"申请人"}},[a("a-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.reqInfo.reqName,callback:function(t){e.$set(e.reqInfo,"reqName",t)},expression:"reqInfo.reqName"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("申请日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"申请日期"}},[e._v("\n              "+e._s(e._f("formatDate")(e.reqInfo.createTime))+"\n            ")])],1),a("a-col",{staticStyle:{height:"80px"},attrs:{span:4}},[e._v("转账描述")]),a("a-col",{staticStyle:{height:"80px"},attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"转账描述"}},[a("a-textarea",{attrs:{autoSize:{minRows:3,maxRows:3},rows:3,disabled:!0,maxLength:150},model:{value:e.reqInfo.reqDescribe,callback:function(t){e.$set(e.reqInfo,"reqDescribe",t)},expression:"reqInfo.reqDescribe"}})],1)],1)],1)],1)],1)],1),e.reqInfo.reqNo?a("type-attachment-upload",{ref:"fileupload",attrs:{busiNo:e.reqInfo.reqNo,busiType:e.reqInfo.busiType,busiTypeDetail:e.reqInfo.busiTypeDetail,"is-detail":!0}}):e._e()],1)},o=[],r=a("0fea"),i=a("c1df"),s=a.n(i),l=a("0a5e"),c=a("9fbd"),u={name:"AccTransferAuditComp",components:{TypeAttachmentUpload:c["default"]},filters:{getAmount:function(e){return e&&""!==e&&"undefined"!==e?String(Number(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"},formatDate:function(e){if(e)return s()(e).format("YYYY-MM-DD")}},mixins:[l["a"]],data:function(){var e=this;return{visible:!1,url:{pageTransDrawList:"/base/accFuTra/pageTransDrawList",queryById:"/common/bBusiReq/queryById"},columns:[{title:"申请编号",headerAlign:"center",align:"center",field:"reqNo",width:"170px",type:"input"},{title:"账户号",align:"center",field:"code",width:"200px",type:"input"},{title:"收支标识",align:"center",field:"loanFlag",width:"100px",type:"input",slot:!0},{title:"账户地址",headerAlign:"center",align:"left",minWidth:"200px",field:"address",type:"input"},{title:"账户名称",headerAlign:"center",align:"left",field:"psnName",width:"120px",type:"input",className:"noPreLine",showOverflow:!1},{title:"发生额 (元)",headerAlign:"center",align:"right",field:"amount",width:"120px",type:"input",formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}],loadData:function(t){return Object(r["e"])(e.url.pageTransDrawList,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},reqInfo:{},reqId:"",reqNo:"",activeKey:["1","2"]}},methods:{close:function(){this.reqId=""},initData:function(e,t){var a=this;this.reqId=t.tableId,Object(r["e"])(this.url.queryById,{id:this.reqId}).then((function(e){if(e.success){a.reqInfo=e.result;var t={reqNo:e.result.reqNo};a.$nextTick((function(){e.result.reqNo&&a.$refs.fileupload.initData(),a.$refs.table.localParams=t,a.$refs.table.loadData()}))}}))},cellStyle:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex,a="text-align:right";if(5===t)return a}}},d=u,p=(a("ea9f"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"31d03b36",null);t["default"]=f.exports},"7fa0":function(e,t,a){},"821c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-drawer",{ref:"house",staticStyle:{height:"100%",overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:"1100px",placement:"right",closable:!0,visible:e.visible,"z-index":e.zIndex,"body-style":{paddingBottom:"60px",height:"calc(100% - 55px)",overflow:"auto"}},on:{close:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.loading,tip:"加载中..."}},[a("files-detail",{ref:"detail",attrs:{zIndex:e.zIndex+1}})],1)],1)],1)},o=[],r=a("0fea"),i=a("45ce"),s={name:"HouseDetailComp",components:{FilesDetail:i["default"]},props:{zIndex:{type:Number,default:1e3}},data:function(){return{title:"房屋基本信息",visible:!1,loading:!1,url:{getHouseInfoDetail:"/common/fastHanding/getHouseInfoDetail"}}},methods:{handleCancel:function(){this.close()},close:function(){this.visible=!1,this.loading=!1},initData:function(e){var t=this;this.visible=!0,this.loading=!0,Object(r["e"])(this.url.getHouseInfoDetail,{id:e}).then((function(e){e.success&&t.$nextTick((function(){t.$refs.detail.initData(e.result),t.loading=!1}))}))}}},l=s,c=a("2877"),u=Object(c["a"])(l,n,o,!1,null,"0abb5dcb",null);t["default"]=u.exports},"83c9":function(e,t,a){},"897b":function(e,t,a){"use strict";a("bfbe")},"8b07":function(e,t,a){},"8e5d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":"null","max-height":400},scopedSlots:e._u([{key:"oldInfo",fn:function(t){t.text;var n=t.row;return[a("span",[e._v(e._s(n.oldInfoStr))])]}},{key:"newInfo",fn:function(t){t.text;var n=t.row;return[a("span",[e._v(e._s(n.newInfoStr))])]}}])}),a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:e.reqInfo.busiTypeDetail,busiNo:e.reqInfo.reqNo,"is-detail":""}})],1)},o=[],r=a("0fea"),i=a("0a5e"),s=a("9fbd"),l={name:"BatchChangeRecordComp",components:{TypeAttachmentUpload:s["default"]},mixins:[i["a"]],data:function(){var e=this;return{url:{list:"/base/rtRegion/getRecordByReq"},columns:[{title:"名称",align:"center",field:"name",minWidth:"100px",type:"input"},{title:"地址",align:"center",field:"address",minWidth:"150px",type:"input"},{title:"变更人",align:"center",field:"createBy_dictText",minWidth:"80px",type:"input"},{title:"变更时间",align:"center",field:"createTime",minWidth:"80px",type:"input"},{title:"变更原因",align:"center",field:"reason",width:200,type:"input"},{title:"原归属",align:"center",field:"oldInfo",minWidth:"80px",type:"input",slot:!0},{title:"变更归属",align:"center",field:"newInfo",minWidth:"80px",type:"input",slot:!0}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},reqInfo:{}}},created:function(){},methods:{initData:function(e){var t=this;Object(r["e"])("/common/bBusiReq/queryById",{id:e}).then((function(a){t.reqInfo=a.result,t.$nextTick((function(){t.$refs.fileupload.initData()}));var n={reqId:e};t.$nextTick((function(){t.$refs.table.localParams=n,t.$refs.table.loadData()}))}))}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,o,!1,null,"63df1e8d",null);t["default"]=d.exports},9111:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("关联业务 ")])])]},proxy:!0}])},[a("vxe-table",{ref:"xTable",attrs:{border:"","show-footer":"","show-overflow":"",resizable:"","highlight-hover-row":"",data:e.businessData,"cell-style":e.cellStyle,"header-align":"center",align:"center"}},[a("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号"}}),a("vxe-table-column",{attrs:{field:"busiNo",title:"业务编号",width:"200"}}),a("vxe-table-column",{attrs:{field:"colaccCode",width:"200",title:"收款账户"}}),a("vxe-table-column",{attrs:{field:"colaccName",title:"收款账户名称"}}),a("vxe-table-column",{attrs:{field:"colbankName",title:"收款账户银行"}}),a("vxe-table-column",{attrs:{field:"amount",title:"业务发生额(元)"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("getAmount")(n.amount))+" ")])]}}])}),a("vxe-table-column",{attrs:{field:"busiTypeDetailName",title:"业务类别名称"}})],1)],1),a("a-collapse-panel",{key:"2",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v("变更记录 ")])])]},proxy:!0}])},[a("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":null},scopedSlots:e._u([{key:"state",fn:function(e){var t=e.text;return[a("a-badge",0===t?{attrs:{status:"success",text:"已完成"}}:2===t?{attrs:{status:"processing",text:"待变更"}}:5===t?{attrs:{status:"error",text:"已撤销"}}:{attrs:{status:"default",text:"其他"}})]}},{key:"operType",fn:function(t){var n=t.text;return[1===n?a("span",[e._v("新增")]):2===n?a("span",[e._v("修改")]):3===n?a("span",[e._v("删除")]):e._e()]}},{key:"actionExpand",fn:function(t){var n=t.row;return[a("a-table",{attrs:{size:"middle",bordered:"",columns:e.childColumns,dataSource:n.changeDetails,pagination:!1},scopedSlots:e._u([{key:"wordNameStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.wordNameStr)+"\n            ")])}},{key:"oldInfoStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.oldInfoStr?n.oldInfoStr:n.oldInfo?n.oldInfo:"无")+"\n            ")])}},{key:"newInfoStr",fn:function(t,n){return a("span",{},[e._v("\n              "+e._s(n.newInfoStr?n.newInfoStr:n.newInfo?n.newInfo:"无")+"\n            ")])}}],null,!0)})]}}])})],1)],1),a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 变更信息 ")])])]},proxy:!0}])},[a("j-form-container",{attrs:{disabled:!0}},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("变更人")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changePerson",label:"变更人"}},[a("a-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.changeInfo.createBy,callback:function(t){e.$set(e.changeInfo,"createBy",t)},expression:"changeInfo.createBy"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("变更日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeTime",label:"变更日期"}},[e._v("\n              "+e._s(e._f("formatDate")(e.changeInfo.createTime))+"\n            ")])],1),a("a-col",{staticStyle:{height:"80px"},attrs:{span:4}},[e._v("变更原因")]),a("a-col",{staticStyle:{height:"80px"},attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"changeReason",label:"变更原因"}},[a("a-textarea",{attrs:{placeholder:"请输入变更原因",autoSize:{minRows:3,maxRows:3},rows:3,disabled:!0,maxLength:150},model:{value:e.changeInfo.reason,callback:function(t){e.$set(e.changeInfo,"reason",t)},expression:"changeInfo.reason"}})],1)],1)],1)],1)],1)],1),e.reqNo?a("type-attachment-upload",{ref:"fileupload",attrs:{busiType:"50",busiTypeDetail:"505D",busiNo:e.reqNo,"is-detail":!0}}):e._e()],1)},o=[],r=a("0fea"),i=a("c1df"),s=a.n(i),l=a("0a5e"),c=a("9fbd"),u={name:"HouseChangeInfoComp",components:{TypeAttachmentUpload:c["default"]},mixins:[l["a"]],data:function(){var e=this;return{visible:!1,url:{changeList:"/common/bChange/pageListByObj",list:"/base/rColaccInfo/getChangeColBuInfo",getChangeInfo:"/base/rColaccInfo/getChangeInfo",queryById:"/common/bBusiReq/queryById"},columns:[{title:"申请编号",headerAlign:"center",align:"center",field:"reqNo",width:"170px",type:"input"},{title:"状态",align:"center",field:"state",width:"120px",type:"input",slot:!0},{title:"变更类别",align:"center",field:"operType",width:"120px",type:"input",slot:!0},{title:"变更原因",headerAlign:"center",align:"left",field:"reason",type:"input",className:"noPreLine",showOverflow:!1},{title:"变更人",align:"center",field:"createBy_dictText",width:"120px",type:"input"},{title:"变更日期",align:"center",field:"createTime",width:"120px",type:"input",formatter:function(e){var t=e.cellValue;return t?s()(t).format("YYYY-MM-DD"):""}},{title:"详情",align:"center",field:"action",width:"80px",type:"expand",slot:!0}],childColumns:[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"变更项",align:"center",dataIndex:"wordNameStr",scopedSlots:{customRender:"wordNameStr"}},{title:"原信息",align:"center",dataIndex:"oldInfoStr",scopedSlots:{customRender:"oldInfoStr"}},{title:"新信息",align:"center",dataIndex:"newInfoStr",scopedSlots:{customRender:"newInfoStr"}}],loadData:function(t){return Object(r["e"])(e.url.changeList,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},businessData:[],changeInfo:{},reqId:"",reqNo:"",activeKey:["1","2"]}},methods:{initData:function(e,t){var a=this;this.reqId=t.tableId,Object(r["j"])(this.url.list+"/"+this.reqId).then((function(e){e.success&&(a.businessData=e.result)})),Object(r["j"])(this.url.getChangeInfo+"/"+this.reqId).then((function(e){e.success&&(a.changeInfo=e.result)})),Object(r["e"])(this.url.queryById,{id:this.reqId}).then((function(e){if(a.reqNo=e.result.reqNo,e.success){var t={reqNo:e.result.reqNo,busiType:"50",busiTypeDetail:"505D"};a.$nextTick((function(){a.$refs.table.localParams=t,a.$refs.table.loadData(),a.reqNo&&a.$refs.fileupload.initData()}))}}))},cellStyle:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex,a="text-align:right";if(5===t)return a}},filters:{getAmount:function(e){return e&&""!==e&&"undefined"!==e?String(Number(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"},formatDate:function(e){if(e)return s()(e).format("YYYY-MM-DD")}}},d=u,p=(a("ca60"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"534f91f6",null);t["default"]=f.exports},9779:function(e,t,a){},"99fe":function(e,t,a){},"9a5d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["region"===e.page?a("div",{staticClass:"h-full flex flex-column"},[a("m-e-s-super-query",{ref:"mesSuperQuery",attrs:{"field-list":[],saveCode:"incomeDepositRegionList","is-full-query":!0,type:"queryList"},on:{ok:e.handleSuperQuery}}),a("div",{staticClass:"tableDiv"},[a("v-table",{key:"region",ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"auto","header-align":"center",ifInitQuery:!1},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var n=t.row;return[a("a",{on:{click:function(t){return e.showBldList(n)}}},[e._v(" 查看自然幢")])]}}],null,!1,3725307792)})],1)],1):a("div",{staticClass:"h-full flex flex-column"},[a("div",{staticClass:"tableDiv"},[a("v-table",{key:"bld",ref:"bldTable",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,"table-height":"auto",expand:!1,data:e.bldLoadData,tableColumn:e.bldColumns},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("a-button",{attrs:{title:"返回",icon:"left"},on:{click:function(){return e.page="region"}}},[e._v("返回")])]},proxy:!0},{key:"state",fn:function(t){t.text;var n=t.row;return["9"==n.STATE?a("span",[e._v("新建档")]):e._e(),"2"==n.STATE?a("span",[e._v("待备案")]):e._e(),"0"==n.STATE?a("span",[e._v("正常")]):e._e(),"4"==n.STATE?a("span",[e._v("待注销")]):e._e(),"5"==n.STATE?a("span",[e._v("已注销")]):e._e(),"7"==n.STATE?a("span",[e._v("待撤销审核")]):e._e(),"6"==n.STATE?a("span",[e._v("待归属变更")]):e._e()]}},{key:"action",fn:function(t){t.text;var n=t.row;return[a("a",{on:{click:function(t){return e.showBld(n)}}},[e._v("产权提取")])]}}])})],1),[a("j-modal",{attrs:{width:"1200px",visible:e.visible,zIndex:1050,"modal-height":"360px"},on:{ok:e.cqSave,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{colon:!1,model:e.model,rules:e.validatorRules}},[a("a-row",{staticClass:"bldInfoPageFormRow"},[a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",label:"小区名称"}},[e._v("\n                  "+e._s(e.regionName)+"\n                ")])],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",label:"自然幢名称"}},[a("a-input",{attrs:{placeholder:"请输入自然幢名称"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"address",label:"自然幢位置"}},[a("a-input",{attrs:{placeholder:"请输入自然幢位置"},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bldType",label:"自然幢类型"}},[a("a-select",{attrs:{placeholder:"请选择自然幢类型"},on:{change:e.onbldTypeChange},model:{value:e.model.bldType,callback:function(t){e.$set(e.model,"bldType",t)},expression:"model.bldType"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.bldTypeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                        "+e._s(t.text||t.label)+"\n                      ")])])}))],2)],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"有无电梯"}},[a("a-switch",{attrs:{checkedChildren:"有",unCheckedChildren:"无"},on:{change:e.onLiftFlagChange},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankCode",label:"承办银行"}},[a("j-dict-bank-list-select",{attrs:{"show-icon":"",placeholder:"请选择承办银行"},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"houseAttr",label:"房屋性质"}},[a("a-select",{attrs:{placeholder:"请选择房屋性质"},model:{value:e.model.houseAttr,callback:function(t){e.$set(e.model,"houseAttr",t)},expression:"model.houseAttr"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.houseAttrOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                        "+e._s(t.text||t.label)+"\n                      ")])])}))],2)],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"attr",label:"结构属性"}},[a("a-select",{attrs:{placeholder:"请选择结构属性"},model:{value:e.model.attr,callback:function(t){e.$set(e.model,"attr",t)},expression:"model.attr"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.attrOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                        "+e._s(t.text||t.label)+"\n                      ")])])}))],2)],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"overFloor",label:"地上楼层数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0},on:{blur:e.changeBldType},model:{value:e.model.overFloor,callback:function(t){e.$set(e.model,"overFloor",t)},expression:"model.overFloor"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"underFloor",label:"地下楼层数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0},model:{value:e.model.underFloor,callback:function(t){e.$set(e.model,"underFloor",t)},expression:"model.underFloor"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"nextNodeNum",label:"单元数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0},model:{value:e.model.nextNodeNum,callback:function(t){e.$set(e.model,"nextNodeNum",t)},expression:"model.nextNodeNum"}})],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"sortType",label:"房屋名称规则"}},[a("a-select",{attrs:{placeholder:"请选择房屋名称规则"},model:{value:e.model.sortType,callback:function(t){e.$set(e.model,"sortType",t)},expression:"model.sortType"}},e._l(e.sortTypeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                        "+e._s(t.text||t.label)+"\n                      ")])])})),1)],1)],1),a("a-col",{attrs:{xxl:8,xl:8,span:12}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"depMode",label:"房屋交存模式"}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择房屋交存模式","dict-code":"dep_mode"},model:{value:e.model.depMode,callback:function(t){e.$set(e.model,"depMode",t)},expression:"model.depMode"}})],1)],1)],1)],1)],1)],1)]],2)])},o=[],r=a("0fea"),i=a("0a5e"),s=a("3ed7"),l=a("ca00"),c=a("eccd"),u=a("6fa9"),d=a("744c"),p=a("3269"),f=a("d8a5"),h={name:"EquityWithdraw",mixins:[i["a"]],components:{JDDictSelectTag:c["default"],JDictBankListSelect:p["default"],MESSuperQuery:u["default"],IncomeDepositRegionList:d["default"]},props:{regionName:{type:String,default:""},regionId:{type:String,default:""}},data:function(){var e=this,t=function(t,a,n){if(e.isDistrict)if(e.model.districtId)for(var o=e.bldNameList.filter((function(t){return t.districtId===e.model.districtId})),r=0;r<o.length;r++)a===o[r].name&&n("该自然幢名称已存在！");else n("请先选择自然幢分区！");else for(var i=0;i<e.bldNameList.length;i++)a===e.bldNameList[i].name&&n("该自然幢名称已存在！");n()};return{regionname:"",record:{},confirmLoading:!1,attrOptions:[],bldTypeOptions:[],houseAttrOptions:[],sortTypeOptions:[],visibleCheck:!0,developList:[],bldNameList:[],bldDescList:[],validatorRules:{name:[{required:!0,message:"请输入自然幢名称！"},{validator:t}],address:[{required:!0,message:"请输入自然幢位置！"}],bldType:[{required:!0,message:"请选择自然幢类型！"}],bankCode:[{required:!0,message:"请选择承办银行！"}],houseAttr:[{required:!0,message:"请选择房屋性质！"}],attr:[{required:!0,message:"请选择结构属性！"}],overFloor:[{required:!0,message:"请输入地上楼层数！"}],underFloor:[{required:!0,message:"请输入地下楼层数！"}],nextNodeNum:[{required:!0,message:"请输入单元数！"},{validator:this.nextNodeNumCheck}],sortType:[{required:!0,message:"请选择房屋名称规则！"}],depMode:[{required:!0,message:"请选择房屋交存模式！"}],districtId:[{required:!0,message:"请选择自然幢分区！"}]},formCol:{label:3,value:5},labelCol:{span:8},wrapperCol:{span:16},model:{liftFlag:1},visible:!1,page:"region",regionCqCode:"",columns:[{title:"物业项目名称",headerAlign:"left",align:"left",field:"XMMC",width:"400px"},{headerAlign:"left",title:"物业项目位置",align:"left",field:"XMDZ",width:"400px",type:"input"},{title:"所属区域",align:"center",field:"SZQY",minWidth:100},{title:"操作",field:"action",align:"center",width:140,fixed:"right",slot:!0}],bldColumns:[{title:"分区名称",align:"left",field:"districtName",minWidth:120,hidden:!this.isDistrict},{title:"自然幢名称",align:"left",field:"ZMC",type:"input",minWidth:120},{title:"自然幢面积",align:"right",field:"JZMJ",type:"input",minWidth:120},{title:"状态",align:"center",field:"state",type:"input",width:100,slot:!0},{title:"操作",field:"action",align:"center",width:100,slot:!0,fixed:"right"}],loadData:function(t){return Object(r["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},bldLoadData:function(t){return Object(r["e"])(e.url.bldList,Object.assign(t,e.getBldQueryParams()||{})).then((function(e){return e.result}))},url:{list:"/hfmp/deposit/cqshowcorpInfo",bldList:"/hfmp/deposit/cqshowbldInfo",cqSave:"/hfmp/deposit/cqSave"},dictOptions:{}}},inject:{getContainer:{default:function(){return function(){return document.body}}}},created:function(){this.initData()},methods:{initData:function(){var e=this;Object(f["g"])("bld_type").then((function(t){e.originBldTypeOptions=t.result,e.bldTypeOptions=t.result,e.$forceUpdate()})),Object(f["g"])("bld_attr").then((function(t){e.attrOptions=t.result})),Object(f["g"])("house_attr").then((function(t){e.houseAttrOptions=t.result})),Object(f["g"])("sort_type").then((function(t){e.sortTypeOptions=t.result,t.result&&t.result.length>0&&"01"!=t.result[0].value&&"02"!=t.result[0].value&&e.$set(e.model,"sortType",t.result[0].value)})),Object(r["e"])("/sys/dDict/queryListHasDesc",{dictCode:"bld_type"}).then((function(t){t.success&&(e.bldDescList=t.result)}))},nextNodeNumCheck:function(e,t,a){0===t?a(new Error("单元不能为0！")):a()},onbldTypeChange:function(e){var t=this;"03"==this.model.bldType?(this.model.liftFlag=0,this.visibleCheck=!1):(this.model.liftFlag=1,this.visibleCheck=!0),this.$nextTick((function(){t.model.overFloor&&t.changeBldType()}))},onLiftFlagChange:function(e){e?(this.model.liftFlag=1,this.visibleCheck=!0):(this.model.liftFlag=0,this.visibleCheck=!1)},changeBldType:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,n=a.model.bldType,o=this.model.overFloor,r=[];a.bldDescList.forEach((function(e){var t=JSON.parse(e.description),a=Number(t.startFloor),n=Number(t.endFloor);o?a<=Number(o)&&Number(o)<=n&&r.push(e.itemValue):r.push(e.itemValue)})),a.bldTypeOptions=[],a.originBldTypeOptions.forEach((function(e){-1!==r.indexOf(e.value)&&a.bldTypeOptions.push(e)})),a.bldTypeOptions||(a.bldTypeOptions=a.originBldTypeOptions),this.$set(this.model,"bldType",-1!==r.indexOf(n)?n:""),!a.model.bldType&&t&&(this.validatorRules.bldType=[{required:!0,message:"地上层数和自然幢类型不符，请重新选择"}],this.$refs.form.validateField(["bldType"]),this.validatorRules.bldType=[{required:!0,message:"请选择自然幢类型"}])},formatterAmount:s["g"],handleCancel:function(){this.visible=!1,this.model={liftFlag:1}},showBld:function(e){this.visible=!0,this.record=e,this.$set(this,"model",{address:e.ZMC,overFloor:e.DSCS,underFloor:e.DXCS||0,nextNodeNum:e.DYS||0,liftFlag:1,attr:this.getDictValueByBDCDictValue("24",e.JG),houseAttr:this.getDictValueByBDCDictValue("房屋性质",e.GHYT)}),this.changeBldType("",!1);for(var t=0;t<this.bldTypeOptions.length;t++){var a=this.bldTypeOptions[t];if(a.description){var n=JSON.parse(a.description),o=Number(n.startFloor),r=Number(n.endFloor),i=this.model.overFloor;if(i&&o<=Number(i)&&Number(i)<=r)return void this.$set(this.model,"bldType",a.value)}}},getDictValueByBDCDictValue:function(e,t){return"24"===e?["01","1","05","5"].includes(t)?"01":["02","2","03","3","04","4"].includes(t)?"02":["07","7"].includes(t)?"03":["08","8"].includes(t)?"04":"06":"房屋性质"===e?["10"].includes(t)?"01":["31"].includes(t)?"02":["32"].includes(t)?"03":["60"].includes(t)?"05":["85"].includes(t)?"04":"99":""},cqSave:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.confirmLoading=!0,Object(r["e"])(e.url.cqSave,Object.assign({regionCqCode:e.regionCqCode,regionId:e.regionId,cqCode:t.record.CODE},e.model)).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.error(t.message)})).finally((function(){t.confirmLoading=!1,t.handleCancel()}))}))},showBldList:function(e){this.regionCqCode=e.CODE,this.regionName=e.XMMC,this.page="bld"},getBldQueryParams:function(){var e=Object.assign({},this.queryParam);return e.code=this.regionCqCode,Object(l["f"])(e)}}},m=h,b=(a("b06d"),a("2335"),a("2877")),v=Object(b["a"])(m,n,o,!1,null,"3a22e635",null);t["default"]=v.exports},"9b1f":function(e,t,a){"use strict";a("d64d")},"9e7e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{attrs:{placeholder:"请选择区域",readOnly:"",unselectable:"on"},on:{search:e.onSearchRegion},model:{value:e.textVals,callback:function(t){e.textVals=t},expression:"textVals"}},[a("a-button",{attrs:{slot:"enterButton",disabled:e.disabled},slot:"enterButton"},[e._v("选择区域")])],1),a("select-region-layer-modal",{ref:"selectModal",attrs:{defaultId:e.defaultId,defaultType:e.defaultType,"need-type":e.needType},on:{ok:e.selectOK}})],1)},o=[],r=a("11bf"),i={name:"SelectRegionLayer",components:{SelectRegionLayerModal:r["default"]},props:{needType:{type:String,required:!1,default:"1"},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},defaultId:{type:String,default:void 0},defaultType:{type:[Number,String],default:1}},data:function(){return{storeVals:"",textVals:"",isDistrict:!1}},mounted:function(){this.storeVals=this.value},watch:{value:function(e){this.storeVals=e}},model:{prop:"value",event:"change"},methods:{onSearchRegion:function(){this.$refs.selectModal.showModal(this.defaultId,this.defaultType)},selectOK:function(e){e?(this.storeVals=e.id,this.textVals=e.text,this.isDistrict=e.isDistrict):(this.storeVals="",this.textVals="",this.isDistrict=!1),this.$emit("change",this.storeVals),this.$emit("handleDistrict",this.isDistrict)}}},s=i,l=a("2877"),c=Object(l["a"])(s,n,o,!1,null,"76d925a1",null);t["default"]=c.exports},a4bf:function(e,t,a){},b285:function(e,t,a){"use strict";a("99fe")},b4ed:function(e,t,a){},b4ef:function(e,t,a){"use strict";a("65ed")},b98c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-form-container",{attrs:{disabled:e.disabled}},[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?{}:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:e.formCol.label}},[e._v("小区名称")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"houseName",label:"小区名称"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.houseName,callback:function(t){e.$set(e.model,"houseName",t)},expression:"model.houseName"}})],1)],1),e.isDistrict?[a("a-col",{attrs:{span:e.formCol.label}},[e._v("分区名称")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"districtId",label:"小区分区"}},[a("a-select",{attrs:{placeholder:"请选择小区分区"},on:{change:e.districtIdChooseFun},model:{value:e.model.districtId,callback:function(t){e.$set(e.model,"districtId",t)},expression:"model.districtId"}},e._l(e.districtList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[a("span",{staticStyle:{width:"100%"},attrs:{title:t.name}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])])})),1)],1)],1)]:e._e(),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("自然幢名称")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",label:"自然幢名称"}},[a("a-input",{attrs:{placeholder:"请输入自然幢名称",disabled:e.disabled},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("自然幢位置")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"address",label:"自然幢位置"}},[a("a-tooltip",[e.model.address?a("template",{slot:"title"},[a("span",[e._v(e._s(e.model.address))])]):e._e(),a("a-input",{attrs:{placeholder:"请输入自然幢位置",disabled:e.disabled},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],2)],1)],1),e.showBank?a("a-col",{attrs:{span:e.formCol.label}},[e._v("承办银行")]):e._e(),e.showBank?a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankCode",label:"承办银行"}},[a("j-dict-bank-list-select",{attrs:{"get-popup-container":e.getContainer,"show-icon":"",placeholder:"请选择承办银行","is-detail":e.disabled},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1)],1):e._e(),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled||e.changeDisabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房号规则")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"sortType",label:"房号规则"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择房屋名称规则",disabled:e.disabled||e.changeDisabled},model:{value:e.model.sortType,callback:function(t){e.$set(e.model,"sortType",t)},expression:"model.sortType"}},e._l(e.sortTypeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                  "+e._s(t.text||t.label)+"\n                ")])])})),1)],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("有无电梯")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"有无电梯"}},[a("a-switch",{attrs:{checkedChildren:"有",unCheckedChildren:"无",disabled:e.disabled},on:{change:e.onLiftFlagChange},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("房屋性质")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"houseAttr",label:"房屋性质"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择房屋性质",disabled:e.disabled},model:{value:e.model.houseAttr,callback:function(t){e.$set(e.model,"houseAttr",t)},expression:"model.houseAttr"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.houseAttrOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                  "+e._s(t.text||t.label)+"\n                ")])])}))],2)],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("结构属性")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"attr",label:"结构属性"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择结构属性",disabled:e.disabled},model:{value:e.model.attr,callback:function(t){e.$set(e.model,"attr",t)},expression:"model.attr"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.attrOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                  "+e._s(t.text||t.label)+"\n                ")])])}))],2)],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("自然幢类型")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bldType",label:"自然幢类型"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择自然幢类型",disabled:e.disabled},model:{value:e.model.bldType,callback:function(t){e.$set(e.model,"bldType",t)},expression:"model.bldType"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.bldTypeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.text||t.label}},[e._v("\n                  "+e._s(t.text||t.label)+"\n                ")])])}))],2)],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地上楼层数")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"overFloor",label:"地上楼层数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0,disabled:e.disabled},on:{blur:e.changeBldType},model:{value:e.model.overFloor,callback:function(t){e.$set(e.model,"overFloor",t)},expression:"model.overFloor"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("地下楼层数")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"underFloor",label:"地下楼层数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0,disabled:e.disabled},model:{value:e.model.underFloor,callback:function(t){e.$set(e.model,"underFloor",t)},expression:"model.underFloor"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("单元数")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"nextNodeNum",label:"单元数"}},[a("a-input-number",{staticClass:"width100",attrs:{min:0,precision:0,disabled:e.disabled},model:{value:e.model.nextNodeNum,callback:function(t){e.$set(e.model,"nextNodeNum",t)},expression:"model.nextNodeNum"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("开工日期")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"buildDate",label:"开工日期"}},[a("a-date-picker",{attrs:{valueFormat:"YYYY-MM-DD",placeholder:"请选择开工日期",disabled:e.disabled,getCalendarContainer:e.getParentContainer},model:{value:e.model.buildDate,callback:function(t){e.$set(e.model,"buildDate",t)},expression:"model.buildDate"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("竣工日期")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"finishDate",label:"竣工日期"}},[a("a-date-picker",{attrs:{"disabled-date":e.disabledFinishDate,valueFormat:"YYYY-MM-DD",placeholder:"请选择竣工日期",disabled:e.disabled,getCalendarContainer:e.getParentContainer},model:{value:e.model.finishDate,callback:function(t){e.$set(e.model,"finishDate",t)},expression:"model.finishDate"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("交付日期")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"deliverDate",label:"交付日期"}},[a("a-date-picker",{attrs:{"disabled-date":e.disabledDeliverDate,valueFormat:"YYYY-MM-DD",placeholder:"请选择交付日期",disabled:e.disabled,getCalendarContainer:e.getParentContainer},model:{value:e.model.deliverDate,callback:function(t){e.$set(e.model,"deliverDate",t)},expression:"model.deliverDate"}})],1)],1),"09"==e.model.houseAttr?a("a-col",{attrs:{span:e.formCol.label}},[e._v("公房单位")]):e._e(),"09"==e.model.houseAttr?a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"publicCode",label:"公房单位"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择公房单位"},model:{value:e.model.publicCode,callback:function(t){e.$set(e.model,"publicCode",t)},expression:"model.publicCode"}},e._l(e.publicList,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.code}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                  "+e._s(t.name)+"\n                ")])])})),1)],1)],1):e._e(),a("a-col",{attrs:{span:e.formCol.label}},[e._v("开发单位")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"developCode",label:"开发单位"}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择开发单位"},model:{value:e.model.developCode,callback:function(t){e.$set(e.model,"developCode",t)},expression:"model.developCode"}},e._l(e.developList,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.code}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.name}},[e._v("\n                  "+e._s(t.name)+"\n                ")])])})),1)],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("物业单位")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"environCode",label:"物业单位"}},[a("j-select-corp",{attrs:{placeholder:"请选择物业服务企业",baseType:"02",multi:!1,"read-only":""},model:{value:e.model.environCode,callback:function(t){e.$set(e.model,"environCode",t)},expression:"model.environCode"}})],1)],1),a("a-col",{attrs:{span:e.formCol.label}},[e._v("业委会")]),a("a-col",{attrs:{span:e.formCol.value}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ownersCode",label:"业委会"}},[a("j-select-corp",{attrs:{placeholder:"请选择业委会",baseType:"11",multi:!1,"read-only":""},model:{value:e.model.ownersCode,callback:function(t){e.$set(e.model,"ownersCode",t)},expression:"model.ownersCode"}})],1)],1)],2)],1)],1)],1)},o=[],r=a("0fea"),i=a("d8a5"),s=a("3269"),l={name:"BldBaseInfoComp",components:{JDictBankListSelect:s["default"]},props:["model","validatorRules","labelCol","wrapperCol","disabled","changeDisabled","isDistrict"],data:function(){return{bldTypeOptions:[],originBldTypeOptions:[],bldDescList:[],bankInfoOptions:[],houseAttrOptions:[],attrOptions:[],sortTypeOptions:[],visibleCheck:!0,showBank:!1,developList:[],publicList:[],formCol:{label:2,value:6},districtList:[],address:""}},inject:{getContainer:{default:function(){return function(){return document.body}}}},watch:{model:function(e){this.$emit("update",e)}},created:function(){this.initData()},mounted:function(){this.setFormCol()},methods:{setFormCol:function(){var e=this.$refs.form.$el.clientWidth;this.formCol=e<1e3?{label:4,value:8}:{label:3,value:5}},changeBldType:function(e){var t=this,a=t.model.bldType,n=e.target.value,o=[];t.bldDescList.forEach((function(e){var t=JSON.parse(e.description),a=Number(t.startFloor),r=Number(t.endFloor);n?a<=Number(n)&&Number(n)<=r&&o.push(e.itemValue):o.push(e.itemValue)})),t.bldTypeOptions=[],t.originBldTypeOptions.forEach((function(e){-1!==o.indexOf(e.value)&&t.bldTypeOptions.push(e)})),t.bldTypeOptions||(t.bldTypeOptions=t.originBldTypeOptions),t.model.bldType=-1!==o.indexOf(a)?a:null,t.model.bldType||(this.validatorRules.bldType=[{required:!0,message:"地上层数和自然幢类型不符，请重新选择!"}],this.$refs.form.validateField(["bldType"]),this.validatorRules.bldType=[{required:!0,message:"请选择自然幢类型!"}])},disabledFinishDate:function(e){var t=this.model.buildDate;return!(!e||!t)&&e.valueOf()<t.valueOf()},disabledDeliverDate:function(e){var t=this.model.finishDate;return!(!e||!t)&&e.valueOf()<t.valueOf()},getParentContainer:function(){return document.body},initData:function(){var e=this;Object(i["g"])("bld_type").then((function(t){e.originBldTypeOptions=t.result,e.bldTypeOptions=t.result})),Object(r["e"])("/sys/dDict/queryListHasDesc",{dictCode:"bld_type"}).then((function(t){t.success&&(e.bldDescList=t.result)})),Object(i["g"])("house_attr").then((function(t){e.houseAttrOptions=t.result})),Object(i["g"])("sort_type").then((function(t){e.sortTypeOptions=t.result})),Object(i["g"])("bld_attr").then((function(t){e.attrOptions=t.result})),Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(t){t.success||(e.showBank=!0)})),this.visibleCheck=1===this.model.liftFlag||"1"===this.model.liftFlag,Object(r["e"])("/base/regionCorp/getCorpByRegionAndType",{regionId:this.model.pid,corpType:"01"}).then((function(t){t.success&&t.result&&t.result.length>0&&(e.developList=t.result)})),this.isDistrict&&Object(r["e"])("/regionDistrict/regionDistrict/list",{pageNo:1,pageSize:-1,regionId:this.model.pid,delFlag:0}).then((function(t){t.success&&t.result&&(e.districtList=t.result.records,e.address=e.model.address.replace(e.districtList.find((function(t){return t.id===e.model.districtId})).name,""))})),Object(r["e"])("/base/regionCorp/getCorpByRegionAndType",{regionId:this.model.pid,corpType:"10"}).then((function(t){t.success&&t.result&&t.result.length>0&&(e.publicList=t.result)}))},onLiftFlagChange:function(e){e?(this.model.liftFlag=1,this.visibleCheck=!0):(this.model.liftFlag=0,this.visibleCheck=!1)},districtIdChooseFun:function(){var e=this;this.$refs.form.validateField(["name"]),this.model.address=this.address+this.districtList.find((function(t){return t.id===e.model.districtId})).name}}},c=l,u=(a("794c"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,"d69cd436",null);t["default"]=d.exports},b99e:function(e,t,a){},bd99:function(e,t,a){},bfbe:function(e,t,a){},c550:function(e,t,a){"use strict";a("c63f")},c63f:function(e,t,a){},c697:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"houseBatchExchange"},[a("vxe-modal",{attrs:{loading:e.modalLoading,position:{left:"center",top:"center"},height:"90vh",title:e.title,width:"90vw"},on:{close:e.close},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{ref:"modalContainer",staticClass:"modalContainer",on:{dragend:e.onDragend,dragenter:e.onDragenter,dragleave:e.onDragleave,dragstart:e.onDragstart}},[a("div",{staticClass:"modalLeftBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isUpload,expression:"!isUpload"}],staticClass:"floorViewBox"},[a("div",{staticClass:"floorViewQuery"},["merge"!==e.busiType?a("j-dict-region-list-select",{ref:"regionSelect",staticClass:"regionName",attrs:{getPopupContainer:function(){return e.$refs.modalContainer},customParams:{},hasBld:!0},on:{select:e.handleRegionSelect},model:{value:e.regionInfo.code,callback:function(t){e.$set(e.regionInfo,"code",t)},expression:"regionInfo.code"}}):e._e(),a("a-select",{staticClass:"buildName",attrs:{getPopupContainer:function(){return e.$refs.modalContainer}},on:{change:e.getFloorInfo},model:{value:e.buildId,callback:function(t){e.buildId=t},expression:"buildId"}},e._l(e.buildOptionList,(function(t){return a("a-select-option",{key:t.id},[e._v("\n                  "+e._s(t.buildName)+"\n                ")])})),1)],1),a("div",{staticClass:"floorTable"},[e._l(e.houseList,(function(t,n){return[a("floor-table",{key:n,ref:"floorTable"+t.type,refInFor:!0,attrs:{bldState:e.bldState,"is-drag":!0,isDetail:!0,"unit-nums":e.unitNums,domBaseInfo:!0}})]}))],2)]),a("transition",{attrs:{"appear-active-class":"animated fadeIn","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e.isUpload?a("div",{staticClass:"uploadFileBox"},[a("content-view",{attrs:{title:e.uploadTitle}},[a("type-attachment-upload",{ref:"typeUpload",attrs:{"is-show-header":!1,"busi-type":"50","busi-type-detail":"505H"},on:{change:e.uploadFileChange}}),a("a-space",{staticClass:"fileUploadFooter",attrs:{align:"center"}},[a("a-button",{on:{click:e.closeFileUpload}},[e._v("关闭")]),a("a-button",{attrs:{type:"primary"},on:{click:e.saveFileUpload}},[e._v("保存附件")])],1)],1)],1):e._e()])],1),a("div",{staticClass:"collectBox"},[a("div",{staticClass:"collectListAdd",attrs:{"data-isadd":"1"}},[a("a-empty",{staticStyle:{"pointer-events":"none"},attrs:{description:"将房屋拖拽到此处生成数据"}})],1),a("transition-group",{staticClass:"collectListBox",attrs:{tag:"div"}},e._l(e.collectList,(function(t,n){return a("div",{key:t.forId,ref:"collectItemRef_"+n,refInFor:!0,staticClass:"collectListItem",style:e.collectItemStyle(n)},[a("a-tooltip",{attrs:{title:"是否调换业主"}},["merge"!==e.busiType?a("el-checkbox",{on:{change:function(t){return e.exchangeUserChange(t,"item")}},model:{value:t.exchangeUserFlag,callback:function(a){e.$set(t,"exchangeUserFlag",a)},expression:"item.exchangeUserFlag"}}):e._e()],1),a("div",{staticClass:"collectLeft",class:{placeholder:!t.left},attrs:{"data-collectindex":n,"data-isadd":"0"}},[t.left?[e._v("\n                  "+e._s(t.left.houseName)+"\n                ")]:[e._v(" 请拖拽房屋至此处"+e._s("merge"===e.busiType?"（主房屋）":""))]],2),a("a-icon",{attrs:{type:"merge"===e.busiType?"double-left":"double-right"}}),a("div",{staticClass:"collectRight",class:{placeholder:!t.right},attrs:{"data-collectindex":n,"data-isadd":"0"}},[t.right?[e._v("\n                  "+e._s(t.right.houseName)+"\n                ")]:[e._v(" 请拖拽房屋至此处"+e._s("merge"===e.busiType?"（副房屋）":""))]],2),"merge"!==e.busiType?a("a-icon",{attrs:{type:"upload"},on:{click:function(a){return e.showUploadBox(t)}}}):e._e(),a("a-icon",{attrs:{type:"delete"},on:{click:function(a){return e.removeCollect(t,n)}}})],1)})),0),a("div",{staticClass:"collectReason"},[a("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:3},placeholder:"merge"===e.busiType?"请输入房屋合并原因":"请输入房屋调换原因"},model:{value:e.changeReason,callback:function(t){e.changeReason=t},expression:"changeReason"}})],1),a("div",{staticClass:"collectFooter"},["merge"===e.busiType?[a("el-checkbox",{attrs:{"true-label":"Y","false-label":"N"},model:{value:e.mergeAllotFlag,callback:function(t){e.mergeAllotFlag=t},expression:"mergeAllotFlag"}},[e._v("是否合并支用分摊")])]:[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(t){return e.exchangeUserChange(t,"all")}},model:{value:e.exchangeUserAllFlag,callback:function(t){e.exchangeUserAllFlag=t},expression:"exchangeUserAllFlag"}},[e._v("是否全部调换业主\n\t\t\t\t\t\t\t")]),a("el-checkbox",{model:{value:e.placeAreaFlag,callback:function(t){e.placeAreaFlag=t},expression:"placeAreaFlag"}},[e._v("\n\t\t\t\t\t\t\t\t是否调换房屋面积\n\t\t\t\t\t\t\t")])],a("a-button",{attrs:{loading:e.modalLoading,type:"primary"},on:{click:function(){return"merge"===e.busiType?e.toMerge():e.toChange()}}},[e._v("保存")])],2)],1)])])],1)},o=[],r=a("0fea"),i=a("0b6e"),s=a("9fbd"),l=a("dc9a"),c=a("b9e5"),u=a("9e62"),d=a("fdce");function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=m(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function f(e){return v(e)||b(e)||m(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}function b(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e){if(Array.isArray(e))return y(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var g={name:"HouseBatchExchange",mixins:[c["default"]],components:{JDictRegionListSelect:d["default"],floorViews:u["default"],ContentView:l["default"],TypeAttachmentUpload:s["default"],FloorTable:i["default"]},props:{bldId:{type:String,default:""},pRegionInfo:{type:Object,default:function(){}}},data:function(){return{title:"房屋批量调换",regionInfo:{},buildId:"",buildOptionList:[],visible:!1,modalLoading:!1,houseList:[],bldState:"0",unitNums:0,placeAreaFlag:!1,mergeAllotFlag:"N",exchangeUserAllFlag:!1,isIndeterminate:!1,isUpload:!1,uploadTitle:"",handleRowUid:"",changeReason:"",busiType:"",url:{ownerHouseBatchChange:"/base/rHouseInfo/ownerHouseBatchChange",checkState:"/common/bChange/checkState",getNaturalBuild:"/view/floorViews/getNaturalBuild",houseBatchMerge:"/base/rHouseInfo/houseBatchMerge"}}},methods:{open:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.busiType=t,"merge"===t&&(this.title="房屋批量合并"),this.regionInfo=JSON.parse(JSON.stringify(this.pRegionInfo)),this.isUpload=!1,e?(this.visible=!0,this.modalLoading=!0,this.getBuildListByRegionId(this.regionInfo.id)):this.houseList=[]},handleRegionSelect:function(e,t){this.regionInfo=t,this.getBuildListByRegionId(t.id)},getBuildListByRegionId:function(e){var t=this;this.modalLoading=!0;var a={regionId:e,depositType:""};Object(r["e"])(this.url.getNaturalBuild,a).then((function(e){e.success&&(t.buildOptionList=e.result,e.result.length>0?(t.buildId=e.result[0].id,t.getFloorInfo(t.buildId)):t.houseList=[])}))},getFloorInfo:function(e){var t=this;this.modalLoading=!0,this.houseList=[],Object(r["e"])("/view/floorViews/queryHouseView",{buildId:e,noAccState:"9"}).then((function(e){function a(e,t){var a=["01","02","07","03"],n=e.type,o=t.type;return a.includes(n)&&a.includes(o)?a.indexOf(n)-a.indexOf(o):a.includes(n)?-1:a.includes(o)?1:t.startFloor-e.startFloor}t.bldState=e.result.bldState,t.unitNums=e.result.unitNums,t.houseList=e.result.houseTypeList.sort(a),t.$nextTick((function(){t.houseList.forEach((function(e){t.$refs["floorTable"+e.type][0].initData(e)}))}))})).finally((function(){t.modalLoading=!1}))},removeCollect:function(e,t){e.forId===this.handleRowUid&&this.closeFileUpload();var a=this.collectList[t];if(a.left){var n=this.$el.querySelector("#houseBox_"+a.left.id);n.classList.remove("dragComplete")}if(a.right){var o=this.$el.querySelector("#houseBox_"+a.right.id);o.classList.remove("dragComplete")}this.collectList.splice(t,1)},showUploadBox:function(e){var t=this;this.isUpload?this.$message.warning("当前正在上传附件，请保存附件后再试！"):(this.handleRowUid=e.forId,this.isUpload=!0,this.$nextTick((function(){if(e.showTypeList){t.$refs.typeUpload.fileTypeIsNull=!1;var a=JSON.parse(JSON.stringify(e.showTypeList)),n=[];a.forEach((function(e){n.push.apply(n,f(e.typeList))})),t.$refs.typeUpload.splitRequiredType(n)}else t.$refs.typeUpload.initData()})))},uploadFileChange:function(e,t){var a=this,n=this.collectList.find((function(e){return e.forId===a.handleRowUid}));n&&this.$set(n,"fileIdList",e)},saveFileUpload:function(){var e=this,t=this.collectList.find((function(t){return t.forId===e.handleRowUid}));if(t){var a=this.$refs.typeUpload.showTypeList;this.$set(t,"showTypeList",JSON.parse(JSON.stringify(a)))}this.isUpload=!1},closeFileUpload:function(){this.isUpload=!1},exchangeUserChange:function(e,t){var a=this;if("all"===t)this.isIndeterminate=!1,this.collectList.forEach((function(t){a.$set(t,"exchangeUserFlag",e)}));else{for(var n=0,o=this.collectList.length,r=0;r<o;r++)this.collectList[r].exchangeUserFlag&&n++;n===o?(this.exchangeUserAllFlag=!0,this.isIndeterminate=!1):n<o&&0!==n?(this.exchangeUserAllFlag=!1,this.isIndeterminate=!0):(this.exchangeUserAllFlag=!1,this.isIndeterminate=!1)}},collectItemStyle:function(e){for(var t=0,a=0;a<e;a++){var n=this.$refs["collectItemRef_"+a][0],o=n.getBoundingClientRect(),r=o.height;t+=r+10}return{top:t+"px"}},toChange:function(){var e=this;this.modalLoading=!0;var t,a=[],n=p(this.collectList);try{var o=function(){var e=t.value,n={placePsnFlag:"Y",fileIdList:[]};e.exchangeUserFlag||(n.placePsnFlag="N"),n.sourceRegionId=e.left.id,n.targetRegionId=e.right.id,(e.fileIdList||[]).forEach((function(e){n.fileIdList.push(e.id)})),a.push(n)};for(n.s();!(t=n.n()).done;)o()}catch(s){n.e(s)}finally{n.f()}var i={newHouseList:a,changeReason:this.changeReason,placeAreaFlag:this.placeAreaFlag?"Y":"N"};Object(r["j"])(this.url.ownerHouseBatchChange,i).then((function(t){t.success?(e.$message.success(t.message),e.visible=!0,e.close()):(e.$message.warning(t.message),e.modalLoading=!1)}))},toMerge:function(){for(var e=this,t={},a=0;a<this.collectList.length;a++){var n=this.collectList[a];if(!n.right||!n.left)return this.$message.warn("数据不完整，请检查！"),!1;t[n.right.id]=n.left.id}var o={regionId:this.regionInfo.id,changeReason:this.changeReason,isMergeAllot:this.mergeAllotFlag,houseIds:t};this.modalLoading=!0,Object(r["j"])(this.url.houseBatchMerge,o).then((function(t){t&&t.success?(e.$message.success(t.message),e.close()):(e.$message.warning(t.message),e.modalLoading=!1)})).catch((function(t){e.modalLoading=!1}))},close:function(){this.houseList=[],this.collectList=[],this.changeReason="",this.visible=!1,this.modalLoading=!1}}},w=g,C=(a("897b"),a("2877")),_=Object(C["a"])(w,n,o,!1,null,"36979220",null);t["default"]=_.exports},c9dc:function(e,t,a){"use strict";a("69e1")},c9f1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 业主信息 ")])])]},proxy:!0}])},[a("vxe-table",{key:"ownerBatchTable"+e.tableData.length,ref:"xTable",attrs:{"sync-resize":e.tableData.length,height:e.disabled?"":1===e.tableData.length?"120px":void 0,size:"small","max-height":e.disabled?"":1!==e.tableData.length?"300px":void 0,data:e.tableData,"edit-rules":e.disabled?null:e.validatorRules,"valid-config":{message:"default"},"edit-config":{trigger:e.disabled?"manual":"click",mode:"row",showIcon:!e.disabled,autoClear:!1,showAsterisk:!1}},on:{"valid-error":e.validError}},[a("vxe-table-column",{attrs:{field:"psnName",title:"业主姓名",width:"150px","edit-render":{type:e.disabled?"default":"visible",enabled:!1}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row,o=(t.rowIndex,t.column);return[a("vxe-input",{attrs:{placeholder:"请输入业主姓名",type:"text"},on:{input:function(t){return e.$refs.xTable.updateStatus({row:n,column:o})},blur:function(t){return e.$refs.xTable.updateStatus({row:n,column:o})}},model:{value:n.psnName,callback:function(t){e.$set(n,"psnName","string"===typeof t?t.trim():t)},expression:"row.psnName"}})]}}])}),a("vxe-table-column",{attrs:{field:"certType",title:"证件类型","min-width":120,"edit-render":{type:e.disabled?"default":"visible",enabled:!1}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{"read-only":"",align:"left",dictCode:"cert_type"},model:{value:n.certType,callback:function(t){e.$set(n,"certType",t)},expression:"row.certType"}})]}},{key:"edit",fn:function(t){var n=t.row,o=(t.rowIndex,t.column);return[a("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入证件类型",dictCode:"cert_type"},on:{change:function(t){return e.updateStatus(n,o)}},model:{value:n.certType,callback:function(t){e.$set(n,"certType",t)},expression:"row.certType"}})]}}])}),a("vxe-table-column",{attrs:{field:"certNo",title:"证件号码","min-width":"140px","edit-render":{type:e.disabled?"default":"visible",enabled:!1}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row,o=(t.rowIndex,t.column);return[a("a-input",{attrs:{placeholder:"请输入证件号码"},on:{blur:function(t){return e.updateStatus(n,o)},change:function(t){return e.updateStatus(n,o)}},scopedSlots:e._u(["1"==n.certType?{key:"addonAfter",fn:function(){return[a("i-d-card-reading",{attrs:{color:"#1890ff"},on:{readOk:function(t){return e.readIdCardCallBack(n,o,!0,t)},readErr:function(t){return e.readIdCardCallBack(n,o,!1,t)}}})]},proxy:!0}:null],null,!0),model:{value:n.certNo,callback:function(t){e.$set(n,"certNo",t)},expression:"row.certNo"}})]}}])}),a("vxe-table-column",{attrs:{field:"baseType",title:"业主类型",width:"160px","edit-render":{type:e.disabled?"default":"visible",enabled:!1}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{"read-only":"",align:"left",dictCode:"owner_category"},model:{value:n.baseType,callback:function(t){e.$set(n,"baseType",t)},expression:"row.baseType"}})]}},{key:"edit",fn:function(t){var n=t.row,o=(t.rowIndex,t.column);return[a("j-d-dict-select-tag",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入业主类型",dictCode:"owner_category"},on:{change:function(t){return e.updateStatus(n,o)}},model:{value:n.baseType,callback:function(t){e.$set(n,"baseType",t)},expression:"row.baseType"}})]}}])}),a("vxe-table-column",{attrs:{field:"phone",title:"联系电话",width:"200px","edit-render":{type:e.disabled?"default":"visible",enabled:!1}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row,o=(t.rowIndex,t.column);return[a("a-input",{attrs:{placeholder:"请输入联系电话"},on:{change:function(t){return e.updateStatus(n,o)},blur:function(t){return e.updateStatus(n,o)}},model:{value:n.phone,callback:function(t){e.$set(n,"phone",t)},expression:"row.phone"}})]}}])}),e.disabled?e._e():a("vxe-table-column",{attrs:{title:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.rowIndex;return[a("a-space",[o===e.tableData.length-1?a("a-icon",{staticStyle:{color:"#65c88d"},attrs:{type:"plus"},on:{click:function(t){return e.addRow(n)}}}):e._e(),e.tableData.length>1?a("a-icon",{attrs:{type:"delete"},on:{click:function(t){return e.delRow(o)}}}):e._e()],1)]}}],null,!1,3536250300)})],1)],1)],1)],1)},o=[],r=a("eccd"),i=a("d492"),s=a("0fea"),l=a("1aed"),c=a("4ec3"),u={name:"OwnerBatchComp",props:["list","disabled"],components:{IDCardReading:i["default"],JDDictSelectTag:r["default"]},data:function(){var e=function(e){var t=e.cellValue;return new Promise((function(e,a){Object(s["j"])("/drools/droolsData/exeDrools",{type:"verifyPhoneNumber",name:"verify",data:{phone:t}}).then((function(t){if(!t.success)return a(new Error(t.result));e()}))}))};return{activeKey:["1"],validatorRules:{psnName:[{required:!0,message:"请输入业主姓名!",trigger:"change"}],phone:[{required:!0,message:"请输入联系电话!"},{validator:e,type:"Promise"}],certType:[{required:!0,message:"请选择证件类型!"}],baseType:[{required:!0,message:"请选择业主类型!"}],certNo:[{required:!0,message:"请输入证件号码!"},{validator:this.validateIdCard}]},current:0,timer:null,tableData:this.list,validateMobile:e}},created:function(){var e=this;this.list.map((function(e){""===e.certType&&(e.certType="1"),void 0===e.baseType&&(e.baseType="1")})),Object(c["l"])("deposit_check_switch").then((function(t){t&&"1"===t.result?(e.psnNoPhoneIsRequired=!1,e.validatorRules["certType"]=[],e.validatorRules["certNo"]=[],e.validatorRules["phone"]=[]):(e.psnNoPhoneIsRequired=!0,e.validatorRules["certType"]=[{required:!0,message:"请选择证件类型!"}],e.validatorRules["certNo"]=[{required:!0,message:"请输入证件号码!"},{validator:e.validateIdCard}],e.validatorRules["phone"]=[{required:!0,message:"请输入联系电话!"},{validator:e.validateMobile,type:"Promise"}])}))},methods:{readIdCardCallBack:function(e,t,a,n){a?(this.$set(e,"certNo",n.idNum),this.$set(e,"psnName",n.name)):(this.$set(e,"certNo",""),this.$message.warning(n)),this.updateStatus(e,t)},validateIdCard:function(e){var t=e.cellValue,a=e.row;return""===t||void 0===t?Promise.reject(new Error("请输入证件号码")):t&&1==a.certType&&!Object(l["a"])(t)?Promise.reject(new Error("请输入正确格式的身份证号")):void 0},getIndex:function(e){this.current=e},addRow:function(e){var t=this,a=this.$refs.xTable;a.validate(e).then((function(){var e={psnName:"",phone:"",certType:"1",certNo:"",baseType:"1"};t.tableData.push(e)})).catch((function(e){setTimeout((function(){t.$refs.xTable.clearValidate()}),2e3)}))},checkData:function(){return this.$refs.xTable.fullValidate()},delRow:function(e){this.tableData.splice(e,1)},selectType:function(e){this.getIndex(e)},updateStatus:function(e,t){this.$refs.xTable.updateStatus({row:e,column:t})},validError:function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){}),2e3)}}},d=u,p=(a("b4ef"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"46c80792",null);t["default"]=f.exports},ca60:function(e,t,a){"use strict";a("38cb")},cd3d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("j-form-container",{attrs:{disabled:e.disabled}},[a("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.disabled?[]:e.rules},slot:"edit"},[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 房屋信息 ")])])]},proxy:!0}])},[a("house-info-comp",{ref:"hic",attrs:{disabled:e.disabled,isShowHeader:!1,"is-can-edit-cont":e.disabled}})],1)],1),a("owner-batch-comp",{ref:"ownerBatchComp",attrs:{disabled:e.disabled,list:e.ownerlist}})],1)],1)],1)},o=[],r=a("eccd"),i=a("4aae"),s=a("c9f1"),l=a("3269"),c=a("2b01"),u={name:"OwnerBaseInfoComp",props:["model","validatorRules","disabled"],components:{JDictBankListSelect:l["default"],JDDictSelectTag:r["default"],AmountInput:i["default"],OwnerBatchComp:s["default"],HouseInfoComp:c["default"]},computed:{rules:function(){var e=JSON.parse(JSON.stringify(this.validatorRules));return"01"===this.model.depMode&&(e.totalPrice=[{validator:function(e,t,a){var n;0===t||t||(n="请输入房屋售价",a(n)),Number(t)>0?a():(n="房屋售价应大于0",a(n))},trigger:"change"}]),e},floorNo:function(){return this.model.floorNo},houseCode:function(){return this.model.code}},data:function(){return{labelCol:{span:0},wrapperCol:{span:24},bankInfoOptions:[],activeKey:["1","2"],ownerlist:[]}},watch:{floorNo:function(e,t){e!==t&&this.changeByFloorNo(e,t)},houseCode:function(e,t){e!==t&&this.changeByCode(e,t)}},created:function(){this.init()},methods:{changeByFloorNo:function(e,t){var a=t?t+"层":"层",n=e?e+"层":"层";this.model.address=this.model.address.replace(a,n),!e&&t?this.model.code=this.model.code.replace(t," "):e&&!t?this.model.code=this.model.code.replace(" ",e):e&&t&&(this.model.code=this.model.code.replace(t,e))},changeByCode:function(e,t){var a=t?t+"室":"室",n=e?e+"室":"室";this.model.address=this.model.address.replace(a,n)},selectMode:function(){var e=this;this.$refs.form.clearValidate("totalPrice"),this.$nextTick((function(){e.$refs.form.validateField(["totalPrice"])}))},selectType:function(){this.$refs.form.validateField(["certNo"])},getParentContainer:function(){return document.body},init:function(){var e=this,t=JSON.parse(JSON.stringify(this.model));if(this.ownerlist=t.psnInfoList,0===this.ownerlist.length){var a={psnName:"",phone:"",certType:"",certNo:""};this.ownerlist.push(a)}this.$nextTick((function(){e.$refs.hic.initData(e.model.id)}))},getHouseInfo:function(){return this.$refs.hic.getHouseInfo()}}},d=u,p=(a("f7c0"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"9330a710",null);t["default"]=f.exports},cdd7:function(e,t,a){"use strict";a("59ff")},ce4e:function(e,t,a){"use strict";a("fbc5")},d556:function(e,t,a){},d64d:function(e,t,a){},d89e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vxe-modal",{attrs:{zIndex:1e3,"dblclick-zoom":"",fullscreen:!0,height:"96vh","lock-scroll":"","show-footer":"",resize:"","show-zoom":!0,loading:e.modalLoading,title:"业务拆分",width:"1300"},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:"primary",loading:e.modalLoading},on:{click:e.submit}},[e._v("确定")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{ref:"modalBody",staticClass:"modalBody"},[a("div",{staticClass:"top-header"},[e._v("\n        拆分方式：\n        "),a("a-radio-group",{on:{change:e.breakupChangeFun},model:{value:e.breakUpType,callback:function(t){e.breakUpType=t},expression:"breakUpType"}},[a("a-radio-button",{attrs:{value:"0"}},[e._v("金额")]),a("a-radio-button",{attrs:{value:"1"}},[e._v("面积")]),a("a-radio-button",{attrs:{value:"2"}},[e._v("只拆房屋")])],1),e._v("\n\n        原房屋面积："+e._s(e.oldHouseInfo.struArea||"0")+"m²   当前拆分房屋面积："+e._s(e.breakUpHosueArea||0)+"m²\n      ")],1),a("div",{staticClass:"top"},[a("div",{staticClass:"top-left"},[a("vxe-grid",{ref:"tradeGridRef",attrs:{columns:e.tradeColumns,data:e.tradeData,"print-config":{modes:["current","selected","all"]},"auto-resize":"",border:"",height:"auto",resizable:"","show-overflow":""},scopedSlots:e._u([{key:"toLoanSign",fn:function(e,t){var n=e.row;return["1"==n.loanFlag?a("a-badge",{attrs:{color:"orange",text:"收入"}}):a("a-badge",{attrs:{color:"#8bcc00",text:"支出"}})]}},{key:"action",fn:function(t){var n=t.row;return["0001"===n.busiTypeDetail||"0002"===n.busiTypeDetail||"0003"===n.busiTypeDetail?[e.busiData.find((function(e){return e.busiNo===n.busiNo}))?a("a-icon",{staticStyle:{color:"red"},attrs:{type:"delete"},on:{click:function(t){return e.unbindTrade(n)}}}):a("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"plus"},on:{click:function(t){return e.bindTrade(n)}}})]:e._e()]}}])})],1),e.tradeInfo?a("div",{staticClass:"top-right"},[a("div",{staticClass:"formBox"},[a("a-form-model",{ref:"formModel",attrs:{model:e.model,rules:e.rules,labelCol:{span:0},wrapperCol:{span:24}}},e._l(e.model.houseInfoList,(function(t,n){return a("div",{key:n,staticClass:"houseItem"},[a("div",{staticStyle:{"background-color":"#1890ff","text-align":"center",color:"#fff",padding:"4px 0","border-radius":"12px 12px 0 0"}},[e._v("\n                  房屋"+e._s(n+1)+"\n                ")]),a("div",{staticClass:"houseItem_content"},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:4}},[e._v("选择已有房屋")]),a("a-col",{attrs:{span:4}},[a("a-switch",{attrs:{checkedChildren:"是",unCheckedChildren:"否"},on:{change:function(a){return e.selectedHasChooseFun(t,a)}},model:{value:t.selectedHasHouse,callback:function(a){e.$set(t,"selectedHasHouse",a)},expression:"houseInfo.selectedHasHouse"}})],1),a("a-col",{attrs:{span:4}},[e._v(" 小区")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".regionCode",rules:e.rules.regionCode}},[a("j-dict-region-list-select",{ref:"regionSelect",refInFor:!0,attrs:{"get-popup-container":e.getContainer},on:{change:function(a){return e.regionChange(t,a)}},model:{value:t.regionCode,callback:function(a){e.$set(t,"regionCode",a)},expression:"houseInfo.regionCode"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v(" 自然幢")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".bldId",rules:e.rules.bldId}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:t.regionCode?"请选择自然幢":"请先选择小区"},on:{change:function(a,n){return e.houseChangeFun(t,a,n,"bld")}},model:{value:t.bldId,callback:function(a){e.$set(t,"bldId",a)},expression:"houseInfo.bldId"}},e._l(e.bldList,(function(t){return a("a-select-option",{key:t.id,attrs:{"data-obj":t}},[e._v("\n                            "+e._s(t.name)+"\n                          ")])})),1)],1)],1),a("a-col",{attrs:{span:4}},[e._v(" 单元")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".cellId",rules:e.rules.cellId}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:t.bldId?"请选择单元":"请先选择自然幢"},on:{change:function(a,n){return e.houseChangeFun(t,a,n,"cell")}},model:{value:t.cellId,callback:function(a){e.$set(t,"cellId",a)},expression:"houseInfo.cellId"}},e._l(e.cellList,(function(t){return a("a-select-option",{key:t.id,attrs:{"data-obj":t}},[e._v("\n                            "+e._s(t.name)+"\n                          ")])})),1)],1)],1),"0"===e.breakUpType?[a("a-col",{attrs:{span:4}},[e._v("拆分金额")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".amount",rules:e.rules.amount}},[a("amount-input",{attrs:{max:e.tradeInfo.amount,min:0,placeholder:"请输入拆分金额"},on:{change:function(t){return e.amountChangeFun(n)}},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"houseInfo.amount"}})],1)],1)]:e._e(),a("a-col",{attrs:{span:4}},[e._v("交易日期")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".busiDate",rules:e.rules.busiDate}},[a("a-date-picker",{attrs:{valueFormat:"YYYY-MM-DD",placeholder:"请选择交易日期"},model:{value:t.busiDate,callback:function(a){e.$set(t,"busiDate",a)},expression:"houseInfo.busiDate"}})],1)],1),t.selectedHasHouse?["0"!==e.breakUpType?[a("a-col",{attrs:{span:4}}),a("a-col",{attrs:{span:4}})]:e._e(),a("a-col",{attrs:{span:4}},[e._v("房屋地址")]),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".houseId",rules:e.rules.houseId}},[a("a-select",{attrs:{"get-popup-container":e.getContainer,placeholder:t.cellId?"请选择房屋":"请先选择单元"},on:{change:function(a,n){return e.houseChangeFun(t,a,n,"house")}},model:{value:t.houseId,callback:function(a){e.$set(t,"houseId",a)},expression:"houseInfo.houseId"}},e._l(e.houseList,(function(t){return a("a-select-option",{key:t.id,attrs:{"data-obj":t}},[e._v("\n                              "+e._s(t.address)+"\n                            ")])})),1)],1)],1)]:[a("a-col",{attrs:{span:4}},[e._v("房屋楼层")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".floorNo",rules:e.rules.floorNo}},[a("a-input-number",{staticClass:"width100",attrs:{placeholder:"请输入楼层"},model:{value:t.floorNo,callback:function(a){e.$set(t,"floorNo",a)},expression:"houseInfo.floorNo"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("房间号")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".houseNum",rules:e.rules.houseNum}},[a("a-input-number",{attrs:{precision:0,placeholder:"请输入房间号"},model:{value:t.houseNum,callback:function(a){e.$set(t,"houseNum",a)},expression:"houseInfo.houseNum"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("交存模式")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".depMode",rules:e.rules.depMode}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,dictCode:"dep_mode",placeholder:"请选择交存模式"},model:{value:t.depMode,callback:function(a){e.$set(t,"depMode",a)},expression:"houseInfo.depMode"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("房屋性质")]),a("a-col",{attrs:{span:4,"data-prop":"houseAttr"}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".houseAttr",rules:e.rules.houseAttr}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择房屋性质","get-popup-container":e.getContainer,dictCode:"house_attr"},model:{value:t.houseAttr,callback:function(a){e.$set(t,"houseAttr",a)},expression:"houseInfo.houseAttr"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("房屋用途")]),a("a-col",{attrs:{span:4,"data-prop":"houseUse"}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".houseUse",rules:e.rules.houseUse}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择房屋用途","get-popup-container":e.getContainer,dictCode:"house_use"},model:{value:t.houseUse,callback:function(a){e.$set(t,"houseUse",a)},expression:"houseInfo.houseUse"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("房屋面积")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".struArea",rules:e.rules.struArea}},[a("amount-input",{attrs:{max:"1"===e.breakUpType?e.oldHouseInfo.struArea:"",formatDue:"05",min:0,addonAfter:"m²",placeholder:"请输入房屋面积"},on:{change:function(t){return e.amountChangeFun(n)}},model:{value:t.struArea,callback:function(a){e.$set(t,"struArea",a)},expression:"houseInfo.struArea"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("交存标准")]),a("a-col",{attrs:{span:4}},[a("a-form-model-item",{staticClass:"width100",attrs:{prop:"houseInfoList."+n+".depStandard",rules:e.rules.depStandard}},[a("a-input-number",{staticClass:"width100",attrs:{placeholder:"请输入交存标准"},model:{value:t.depStandard,callback:function(a){e.$set(t,"depStandard",a)},expression:"houseInfo.depStandard"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("应交金额")]),a("a-col",{attrs:{span:4}},[e._v("\n                        "+e._s(t.struArea&&t.depStandard?e.floatMul(t.struArea,t.depStandard):"")+"\n                      ")])],a("a-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:0}}),a("a-col",{attrs:{span:(t.selectedHasHouse,8)}},[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"flex-end","column-gap":"8px"}},[a("a",{on:{click:function(a){return e.copyHouseInfo(t)}}},[a("a-icon",{attrs:{type:"copy"}}),e._v("\n                          新增房屋\n                        ")],1),a("a",{staticStyle:{color:"red"},on:{click:function(t){return e.delHouseInfo(n)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v("\n                          删除\n                        ")],1),a("a",{on:{click:function(a){return e.addPsn(t)}}},[a("a-icon",{attrs:{type:"usergroup-add"}}),e._v("\n                          添加业主\n                        ")],1)])])],2)],1)])})),0)],1),a("div",{staticStyle:{"text-align":"right"}},[a("a-space",[a("a-button",{on:{click:e.bindCancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.bindConfirm}},[e._v("确认拆分")])],1)],1)]):e._e()]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"busiTableHeader"},[a("span",{staticClass:"block",staticStyle:{"background-color":"#e0fff0"}}),e._v("新增房屋")]),a("div",{staticClass:"busiTabeBox"},[a("vxe-grid",{attrs:{columns:e.busiColumns,data:e.busiData,"auto-resize":"",border:"",height:"auto"},scopedSlots:e._u([{key:"toLoanSign",fn:function(e,t){var n=e.row;return["1"==n.loanFlag?a("a-badge",{attrs:{color:"orange",text:"收入"}}):a("a-badge",{attrs:{color:"#8bcc00",text:"支出"}})]}},{key:"content",fn:function(t){var n=t.row;return[a("vxe-grid",{attrs:{rowStyle:e.rowStyle,columns:e.busiHouseColumns,data:n.regionSplitVOList}})]}}])})],1)])])]),a("vxe-modal",{attrs:{zIndex:1010,"show-footer":"",title:"添加业主",width:"980"},on:{close:e.addPsnModalCloseFun},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:e.addPsnConfirm}},[e._v("确定")])]},proxy:!0}]),model:{value:e.addPsnVisible,callback:function(t){e.addPsnVisible=t},expression:"addPsnVisible"}},[a("owner-info-table",{ref:"ownerInfoTable"})],1)],1)},o=[],r=a("0fea"),i=a("eccd"),s=a("92d2"),l=a("4aae"),c=a("3ed7"),u=a("fdce"),d=a("5a0c"),p=a.n(d),f=a("ca00");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};c(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,s){var l=d(e[o],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==h(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=p;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=d(t,a,n);if("normal"===c.type){if(o=n.done?v:f,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=d(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=c(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(u(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),c(k,l,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function b(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){b(r,n,o,i,s,"next",e)}function s(e){b(r,n,o,i,s,"throw",e)}i(void 0)}))}}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return(t=C(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e){var t=_(e,"string");return"symbol"==h(t)?t:t+""}function _(e,t){if("object"!=h(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function x(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=S(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function I(e){return D(e)||T(e)||S(e)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){if(e){if("string"==typeof e)return L(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(e,t):void 0}}function T(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(e){if(Array.isArray(e))return L(e)}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var N={components:{JDictRegionListSelect:u["default"],AmountInput:l["default"],JDDictSelectTag:i["default"],OwnerInfoTable:s["default"]},data:function(){return{breakUpType:"0",busiType:"业务拆分",visible:!1,addPsnVisible:!1,oldHouseInfo:{},tradeColumns:[{title:"交易日期",field:"trdDate",align:"center",width:100,formatter:function(e){var t=e.cellValue;return t?p()(t).format("YYYY-MM-DD"):""}},{title:"业务编号",field:"busiNo",align:"center",minWidth:130},{title:"业务类别",field:"busiTypeDetailText",align:"center",width:140},{title:"收支标识",field:"loanFlag",align:"center",slots:{default:"toLoanSign"},width:80},{title:"发生额(元)",field:"amount",align:"right",width:100,formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{title:"可拆分金额(元)",field:"usableAmount",align:"right",width:120,formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{title:"操作",align:"center",width:60,slots:{default:"action"},fixed:"right"}],tradeData:[],tradeInfo:null,model:{houseInfoList:[{regionCode:"",regionId:"",regionName:"",bldId:void 0,cellId:void 0,houseId:void 0,selectedHasHouse:!0,depMode:void 0,busiDate:"",floorNo:"",houseNum:"",struArea:"",psnInfoList:[],amount:0,houseAttr:void 0,houseUse:void 0}]},modalLoading:!1,rules:{regionCode:[{required:!0,message:"请选择"}],regionId:[{required:!0,message:"请选择"}],regionName:[{required:!0,message:"请选择"}],bldId:[{required:!0,message:"请选择"}],cellId:[{required:!0,message:"请选择"}],houseId:[{required:!0,message:"请选择"}],depMode:[{required:!0,message:"请选择"}],busiDate:[{required:!0,message:"请选择"}],floorNo:[{required:!0,message:"请输入"}],houseNum:[{required:!0,message:"请输入"}],struArea:[{required:!0,message:"请输入"}],psnInfoList:[],amount:[{required:!0,message:"请输入"}],houseAttr:[{required:!0,message:"请选择"}],houseUse:[{required:!0,message:"请选择"}]},addPsnHouseInfo:{},bldList:[],cellList:[],houseList:[],addModalPsnList:[],busiColumns:[{type:"expand",width:60,slots:{content:"content"}},{title:"业务编号",field:"busiNo",align:"center",minWidth:200},{title:"业务类别",field:"busiTypeDetailText",align:"center",width:80},{title:"收支标识",field:"loanFlag",align:"center",slots:{default:"toLoanSign"},width:80},{title:"发生额(元)",field:"amount",align:"right",width:110,formatter:function(e){var t=e.cellValue;return Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}],busiHouseColumns:[{type:"seq",width:60,title:"序号",align:"center"},{title:"房屋地址",field:"address",align:"left"},{title:"拆分金额",field:"amount",width:120,align:"right"},{title:"拆分面积",field:"struArea",width:120,align:"right"}],busiData:[],url:{getHouseInfoDetail:"/common/fastHanding/getHouseInfoDetail",queryHouseTreeList:"/base/rtRegion/queryHouseTreeList"}}},computed:{breakUpHosueArea:function(){var e=[];return this.busiData.forEach((function(t){e.push.apply(e,I(t.regionSplitVOList))})),e.push.apply(e,I(this.model.houseInfoList)),e.reduce((function(e,t){return Object(c["c"])(e,t.struArea)}),0)}},created:function(){},methods:{depStandardFormat:c["b"],floatMul:c["e"],getContainer:function(){return this.$refs.modalBody},open:function(e,t){var a=this;this.busiData=[],this.busiType=t,this.visible=!0,Object(r["e"])(this.url.getHouseInfoDetail,{id:e}).then((function(e){e.success?(a.tradeData=e.result.trdlog.records,a.oldHouseInfo=e.result.house):a.$message.warn(e.message)}))},breakupChangeFun:function(e){var t=e.target.value;this.model.houseInfoList.forEach((function(e){"0"===t?e.struArea=void 0:e.amount=void 0}))},bindTrade:function(e){this.tradeInfo=JSON.parse(JSON.stringify(e)),this.$set(this.model,"houseInfoList",[{regionCode:"",regionId:"",regionName:"",bldId:void 0,cellId:void 0,houseId:void 0,selectedHasHouse:!0,busiDate:e.trdDate,depMode:void 0,floorNo:"",houseNum:"",struArea:"0"===this.breakUpType?void 0:this.oldHouseInfo.struArea,psnInfoList:[],amount:"0"===this.breakUpType?e.amount:void 0,houseAttr:void 0,houseUse:void 0}]),this.bldList=[],this.cellList=[],this.houseList=[]},unbindTrade:function(e){var t=this,a=t.busiData.findIndex((function(t){return t.busiNo===e.busiNo}));a>-1&&t.$confirm({title:"是否确认解绑？",onOk:function(){t.busiData.splice(a,1)}})},bindConfirm:function(){var e=this;this.$refs.formModel.validate((function(t){if(t){var a,n=x(e.model.houseInfoList);try{for(n.s();!(a=n.n()).done;){var o=a.value;if(!o.selectedHasHouse){var r=o.regionName,i=o.bldName,s=o.cellName,l=(o.floorNo,o.houseNum);o.address=r+i+s+l}}}catch(c){n.e(c)}finally{n.f()}e.busiData.push(g(g({},Object(f["f"])(JSON.parse(JSON.stringify(e.tradeInfo)))),{},{regionSplitVOList:e.model.houseInfoList})),e.tradeInfo=null}}))},bindCancel:function(){var e=this;this.$confirm({title:"是否确认取消？",zIndex:1010,onOk:function(){e.tradeInfo=null}})},amountChangeFun:function(e){var t=this,a=this.model.houseInfoList.reduce((function(e,a){return Object(c["c"])(e,"0"===t.breakUpType?a.amount:a.struArea)}),0);"0"===this.breakUpType&&a>this.tradeInfo.usableAmount?(this.$message.warning("拆分总金额不可大于业务发生额，已将房屋".concat(e+1,"拆分金额重置！")),this.$nextTick((function(){t.$set(t.model.houseInfoList[e],"amount",0)}))):"1"===this.breakUpType&&a>this.oldHouseInfo.struArea&&(this.$message.warning("拆分总面积不可大于原房屋面积，已将房屋".concat(e+1,"拆分金额重置！")),this.$nextTick((function(){t.$set(t.model.houseInfoList[e],"struArea",0)})))},copyHouseInfo:function(e){var t=JSON.parse(JSON.stringify(e));this.model.houseInfoList.push(g(g({},t),{},{amount:0}))},delHouseInfo:function(e){var t=this;this.$confirm({zIndex:1320,title:"是否确认删除",onOk:function(){t.model.houseInfoList.splice(e,1)}})},addPsn:function(e){var t=this;this.addPsnHouseInfo=e,this.addPsnHouseInfo.psnInfoList&&this.addPsnHouseInfo.psnInfoList.length>0?(this.addModalPsnList=JSON.parse(JSON.stringify(this.addPsnHouseInfo.psnInfoList)),this.$nextTick((function(){t.$refs.ownerInfoTable.initData(!1,t.addModalPsnList)}))):this.$nextTick((function(){t.$refs.ownerInfoTable.initData(!0)})),this.addPsnVisible=!0},addPsnConfirm:function(){var e=v(m().mark((function e(){var t;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.ownerInfoTable.checkData();case 2:t=e.sent,t&&(this.addPsnHouseInfo.psnInfoList=this.$refs.ownerInfoTable.modelForm.formList,this.addPsnModalCloseFun());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addPsnModalCloseFun:function(){this.addModalPsnList=[],this.addPsnVisible=!1},rowStyle:function(e){var t=e.row;e.rowIndex;if(!t.houseId)return{backgroundColor:"#e0fff0"}},regionChange:function(e,t){var a=this;Object(r["e"])(this.url.queryHouseTreeList,{code:t}).then((function(t){var n=t[0];e.regionName=n.name,e.regionId=n.id,a.bldList=n.children}))},houseChangeFun:function(e,t,a,n){var o=a.data.attrs["data-obj"]||{};"bld"===n?(this.cellList=o.children||[],e.bldName=o.name,e.cellId=void 0,e.houseId=void 0):"cell"===n?(e.cellName=o.name,this.houseList=o.children||[],e.houseId=void 0):"house"===n&&(e.address=o.address)},selectedHasChooseFun:function(e,t){},submit:function(){var e=this;if(this.busiData&&0!==this.busiData.length){var t={splitHouseId:this.oldHouseInfo.id,struArea:this.oldHouseInfo.struArea,splitMode:this.breakUpType,regionSplitRegionVO:this.busiData};this.modalLoading=!0,Object(r["j"])("/base/rtRegion/regionMoneyMigration",t).then((function(t){t.success?(e.$message.success(t.message||"拆分成功！"),e.visible=!1):e.$message.warning(t.message),e.modalLoading=!1})).catch((function(){e.modalLoading=!1}))}else this.$message.warning("无拆分业务！")}}},O=N,$=(a("7aacc"),a("c9dc"),a("2877")),j=Object($["a"])(O,n,o,!1,null,"5670d006",null);t["default"]=j.exports},dc94:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-modal",{ref:"modal",attrs:{"z-index":e.zIndex,loading:e.loading,showHeader:!1,"destroy-on-close":"",width:"1200px",height:"80vh"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"custom-header"},[a("span",{staticClass:"custom-header-title"},[e._v(e._s(this.utilityInfo.utilityName?this.utilityInfo.utilityName:"")+"("+e._s(this.utilityInfo.instPlaceName?this.utilityInfo.instPlaceName:"")+")")]),a("a-icon",{staticClass:"custom-header-close",attrs:{type:"close"},on:{click:function(t){return e.open(!1)}}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"custom-body",class:{showMask:e.isExpand},style:{"--zIndex":e.zIndex},attrs:{"element-loading-text":"正在加载中..."},on:{click:function(t){e.isExpand&&e.expandClassify()}}},["1"===e.activeKey?a("div",{staticClass:"custom-body-classifyBox",style:{height:e.classifyBoxHeight,zIndex:e.isExpand?e.zIndex+2:1},on:{click:function(e){e.stopPropagation()}}},[a("div",{ref:"classify",staticClass:"custom-body-classify"},[a("span",{staticClass:"custom-body-classifyItem",class:{selected:e.isSelectedAll},on:{click:function(t){return e.selectedPartType(void 0)}}},[e._v("全部（"+e._s(e.allRecords.length)+"）")]),e._l(e.partTypeList,(function(t){return a("span",{key:t.id,staticClass:"custom-body-classifyItem",class:{selected:e.selectedKeys.includes(t.id)},on:{click:function(a){return e.selectedPartType(t)}}},[e._v("\n            "+e._s(t.name)+"（"+e._s(t.num)+"）\n          ")])})),a("a",{staticClass:"custom-body-classifyPackUp",on:{click:e.expandClassify}},[e._v("收起 "),a("a-icon",{attrs:{type:"up"}})],1)],2),a("a-icon",{staticClass:"custom-body-classifyExpand",attrs:{type:"menu"},on:{click:e.expandClassify}})],1):e._e(),a("a-tabs",{staticClass:"custom-body-contentTabs",style:{paddingTop:"1"===e.activeKey?"56px":"0"},on:{click:function(e){e.stopPropagation()},change:e.tabChange},scopedSlots:e._u([{key:"tabBarExtraContent",fn:function(){return["2"===e.activeKey?a("a-button",{attrs:{icon:"plus-circle",type:"primary"},on:{click:function(t){return e.addRecord("")}}},[e._v("新增维保")]):e._e()]},proxy:!0}]),model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:"维修记录"}},[a("service-records",{attrs:{records:e.records}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"维保记录"}},[a("service-records",{attrs:{records:e.records,type:"maintenance",splitDateFiled:"maintainTime"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{staticClass:"contBoxHeaderInfo"},[a("span",{staticClass:"headerUserName"},[e._v("维保人："+e._s(n.maintainer))]),a("a-space",[a("a-button",{on:{click:function(t){return e.deleteRecord(n)}}},[a("a-icon",{attrs:{type:"delete"}}),e._v("删除")],1),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRecord(n)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v("编辑")],1)],1)],1),a("a-row",{attrs:{type:"flex",gutter:[10,10]}},[a("a-col",{staticClass:"desc",attrs:{span:24}},[e._v("\n                  维保人联系电话："+e._s(n.phone)+"\n                ")]),a("a-col",{staticClass:"desc",attrs:{span:24}},[e._v("\n                  维保内容："+e._s(n.maintainRecord)+"\n                ")]),a("a-col",{staticClass:"desc",attrs:{span:24}},[e._v("\n                  维保时间："+e._s(n.maintainTime)+"\n                ")]),a("a-col",{attrs:{span:24}},[a("img-list",{attrs:{size:75,"img-list":n.fileList}})],1)],1)]}}])})],1)],1)],1)]),a("maintain-info-modal",{ref:"modalForm",attrs:{"z-index":e.zIndex+1,regUtilityId:e.utilityId,utilityName:e.utilityName},on:{ok:e.modalFormOk}})],1)},o=[],r=a("2026"),i=a("0fea"),s=a("03f6"),l=a("4a12");function c(e){return f(e)||p(e)||d(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function p(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var m={name:"UtilityServiceModal",components:{ImgList:l["default"],MaintainInfoModal:s["default"],ServiceRecords:r["default"]},props:{zIndex:{type:Number,default:1e3}},data:function(){return{partTypeList:[],records:[],allRecords:[],utilityInfo:{},activeKey:"1",selectedParts:[],isSelectedAll:!1,classifyBoxHeight:"56px",isExpand:!1,visible:!1,loading:!1,utilityId:"",utilityName:"",url:{getServiceList:"use/serviceUtility/getServiceListByUtiAndPartId",getMaintainList:"/base/maintainInfo/list",deleteMaintain:"/base/maintainInfo/delete"}}},computed:{selectedKeys:{get:function(){return this.selectedParts.map((function(e){return e.id}))},set:function(){}}},methods:{open:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;e?(this.utilityInfo=t,this.utilityId=t.id,this.utilityName=t.utilityName,this.initData(),this.$refs.modal.open()):this.$refs.modal.close()},initData:function(){var e=this;this.loading=!0;var t,a,n=this;"1"===this.activeKey?(t=this.url.getServiceList,a={regionUtilityId:this.utilityId}):(t=this.url.getMaintainList,a={regUtilityId:this.utilityId,busiType:"70",busiTypeDetail:"7008",busiNo:this.utilityId},n.records=[]),Object(i["e"])(t,a).then((function(t){if(t&&t.result)if("1"===e.activeKey){n.partTypeList=[],n.allRecords=t.result.serList;var a=t.result.serMap;for(var o in a)n.partTypeList.push({id:"partType".concat(e.partTypeList.length),name:o,num:a[o].length,detailArr:a[o]});e.selectedPartType()}else n.records=t.result.records.map((function(e){return e.fileList=e.fileList||[],e}))})).finally((function(){e.loading=!1}))},addRecord:function(e){e?(this.$refs.modalForm.edit(e),this.$refs.modalForm.title="编辑"):(this.$refs.modalForm.add(),this.$refs.modalForm.title="新增"),this.$refs.modalForm.disableSubmit=!1},deleteRecord:function(e){var t=this;this.$confirm({title:"确定删除维保内容为["+e.maintainRecord+"]的记录吗?",onOk:function(){t.loading=!0,Object(i["a"])(t.url.deleteMaintain,{id:e.id}).then((function(e){e.success?(t.$message.success(e.message),t.initData()):t.$message.warning(e.message)})).finally((function(){t.loading=!1}))},onCancel:function(){}})},tabChange:function(e){this.records=[],this.initData()},modalFormOk:function(){this.initData()},selectedPartType:function(e){var t=this;if(e){this.isSelectedAll=!1;var a=this.selectedParts.findIndex((function(t){return t.id===e.id}));-1!==a?this.selectedParts.splice(a,1):this.selectedParts.push(e),this.records=[],this.selectedParts.forEach((function(e){var a;(a=t.records).push.apply(a,c(e.detailArr))}))}else this.isSelectedAll=!this.isSelectedAll,this.selectedParts=this.isSelectedAll?[]:this.selectedParts,this.records=this.allRecords;this.$forceUpdate()},expandClassify:function(){var e=this;this.isExpand=!this.isExpand,this.$nextTick((function(){e.isExpand?e.classifyBoxHeight=e.$refs.classify.clientHeight+"px":e.classifyBoxHeight="56px"}))}}},b=m,v=(a("2661"),a("2877")),y=Object(v["a"])(b,n,o,!1,null,"a50ecd76",null);t["default"]=y.exports},dd3b:function(e,t,a){"use strict";a("501e")},e5e6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 基本信息 ")])])]},proxy:!0}])},[a("j-form-container",{ref:"formRow",attrs:{disabled:e.disabled}},[a("a-form-model",{ref:"form",staticClass:"compactForm",attrs:{slot:"edit",model:e.model,rules:e.disabled?{}:e.validatorRules},slot:"edit"},[a("a-row",{staticClass:"houseInfo baseInfo",attrs:{type:"flex"}},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("小区名称")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name",label:"小区名称"}},[a("a-input",{attrs:{placeholder:"请输入小区名称",disabled:e.disabled},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("所属区县")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"zoneCode",label:"所属区县"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"get-popup-container":e.getContainer,disabled:e.disabled||e.disabledZoneBank||e.checkChange,"show-search":!0,filterTreeNode:e.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.zoneList,placeholder:"请选择区县"},model:{value:e.model.zoneCode,callback:function(t){e.$set(e.model,"zoneCode",t)},expression:"model.zoneCode"}})],1)],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("账户属性")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"attr",label:"账户属性"}},[a("j-d-dict-select-tag",{attrs:{placeholder:"请选择账户属性",dictCode:"account_properties"},model:{value:e.model.attr,callback:function(t){e.$set(e.model,"attr",t)},expression:"model.attr"}})],1)],1),e.showBank?e._e():a("a-col",{attrs:{span:4}},[e._v("主管单位")]),e.showBank?e._e():a("a-col",{attrs:{span:8}},[a("span",[e._v(e._s(e.competentUnit.name))])]),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("小区地址")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"address",label:"小区地址"}},[a("a-tooltip",[e.model.address?a("template",{slot:"title"},[a("span",[e._v(e._s(e.model.address))])]):e._e(),a("a-input",{attrs:{placeholder:"请输入小区地址",disabled:e.disabled},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],2)],1)],1),e.showBank?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("承办银行")]):e._e(),e.showBank?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"bankCode",label:"承办银行"}},[a("j-dict-bank-list-select",{key:e.model.attr,attrs:{"get-popup-container":e.getContainer,"show-icon":"",placeholder:"请选择承办银行","is-detail":e.disabled||e.disabledZoneBank,attr:e.model.attr},model:{value:e.model.bankCode,callback:function(t){e.$set(e.model,"bankCode",t)},expression:"model.bankCode"}})],1)],1):e._e(),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("是否分区")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否分区"}},[a("vxe-switch",{attrs:{onLabel:"分区",offLabel:"不分区",onValue:1,offValue:0,disabled:e.disabled},model:{value:e.model.isDistrict,callback:function(t){e.$set(e.model,"isDistrict",t)},expression:"model.isDistrict"}})],1)],1),1===e.model.isDistrict?[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("分区名称")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{ref:"districtListFormItem",staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"districtList",autoLink:!1}},[e.disabled?a("div",[e._v("\n                    "+e._s(e.model.districtList&&e.model.districtList.map((function(e){return e.name})).join("；"))+"\n                  ")]):a("div",{staticClass:"districtList"},[e.model.districtList?e._l(e.model.districtList,(function(t,n){return a("div",{key:"district"+n,staticClass:"districtItem"},[a("a-input",{ref:"input",refInFor:!0,attrs:{type:"text",placeholder:"请输入分区名称"},on:{blur:function(){e.$refs.districtListFormItem.onFieldBlur()},change:function(){e.$refs.districtListFormItem.onFieldChange()}},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("a-tooltip",{attrs:{mouseEnterDelay:1,title:"点击删除分区信息"}},[a("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:function(t){return e.removeDistrict(n)}}})],1),n===e.model.districtList.length-1?a("a-tooltip",{attrs:{mouseEnterDelay:1,title:"点击添加分区信息"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addDistrict}})],1):e._e()],1)})):e._e(),e.model.districtList&&0!==e.model.districtList.length?e._e():a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addDistrict}})],2)])],1)]:e._e(),a("a-col",{attrs:{span:4}},[e._v("开发日期")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"buildDate",label:"开发日期"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择开发日期",disabled:e.disabled,maxDate:e.currentDate},model:{value:e.model.buildDate,callback:function(t){e.$set(e.model,"buildDate",t)},expression:"model.buildDate"}})],1)],1),"2"==e.model.attr?a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticClass:"requiredText"},[e._v("*")]),e._v("公房单位")]):e._e(),"2"==e.model.attr?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"publicCodes",label:"公房单位"}},[a("j-select-corp",{attrs:{placeholder:"请选择公房单位",baseType:"10",multi:!0,readOnly:e.disabled||e.dEdit,tableId:"code"},on:{afterChoose:e.afterChoose1},model:{value:e.model.publicCodes,callback:function(t){e.$set(e.model,"publicCodes",t)},expression:"model.publicCodes"}})],1)],1):e._e(),a("a-col",{attrs:{span:4}},[e._v("开发单位")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"developCodes",label:"开发单位"}},[a("j-select-corp",{attrs:{placeholder:"请选择开发单位",width:"100%",baseType:"01",multi:!0,readOnly:e.disabled||e.dEdit,tableId:"code"},on:{afterChoose:e.afterChoose},model:{value:e.model.developCodes,callback:function(t){e.$set(e.model,"developCodes",t)},expression:"model.developCodes"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("物业服务企业")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"environCode",label:"物业服务企业"}},[a("input-search-modal",{attrs:{width:"100%",placeholder:"请选择物业服务企业",action:"/base/rCorpInfo/getCorpInfoByBaseType","read-only":e.disabled||e.eEdit,options:{value:"code",label:"name",search:"name"},"page-fields":{current:"pageNo",size:"pageSize"},columns:e.columns,otherParams:{field:"id,name,address,linkMan",order:"desc",column:"createTime",baseType:"02"},"is-custom-modal":!1},scopedSlots:e._u([{key:"button",fn:function(){return[a("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[e._v("选择单位")])]},proxy:!0}]),model:{value:e.model.environCode,callback:function(t){e.$set(e.model,"environCode",t)},expression:"model.environCode"}})],1)],1),e.showStreet?a("a-col",{attrs:{span:4}},[e._v("街道办事处")]):e._e(),e.showStreet?a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"communityCode",label:"街道办事处"}},[a("input-search-modal",{attrs:{width:"100%",placeholder:"请选择街道办事处",action:"/base/rCorpInfo/getCorpInfoByBaseType","read-only":e.disabled||e.cEdit,options:{value:"code",label:"name",search:"name"},"page-fields":{current:"pageNo",size:"pageSize"},columns:e.columns,otherParams:{field:"id,name,address,linkMan",order:"desc",column:"createTime",baseType:"11"},"is-custom-modal":!1},scopedSlots:e._u([{key:"button",fn:function(){return[a("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[e._v("选择单位")])]},proxy:!0}],null,!1,3219456001),model:{value:e.model.communityCode,callback:function(t){e.$set(e.model,"communityCode",t)},expression:"model.communityCode"}})],1)],1):e._e(),a("a-col",{attrs:{span:4}},[e._v("社区居委会")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"streetCode",label:"社区居委会"}},[a("input-search-modal",{attrs:{width:"100%",placeholder:"请选择社区居委会",action:"/base/rCorpInfo/getCorpInfoByBaseType","read-only":e.disabled||e.sEdit,options:{value:"code",label:"name",search:"name"},"page-fields":{current:"pageNo",size:"pageSize"},columns:e.columns,otherParams:{field:"id,name,address,linkMan",order:"desc",column:"createTime",baseType:"12"},"is-custom-modal":!1},scopedSlots:e._u([{key:"button",fn:function(){return[a("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[e._v("选择单位")])]},proxy:!0}]),model:{value:e.model.streetCode,callback:function(t){e.$set(e.model,"streetCode",t)},expression:"model.streetCode"}})],1)],1),a("a-col",{attrs:{span:4}},[e._v("业主委员会")]),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{staticClass:"width100",attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"ownersCode",label:"业主委员会"}},[a("input-search-modal",{attrs:{width:"100%",placeholder:"请选择业主委员会",action:"/base/rCorpInfo/getCorpInfoByBaseType","read-only":e.disabled||e.oEdit,options:{value:"code",label:"name",search:"name"},"page-fields":{current:"pageNo",size:"pageSize"},columns:e.columns,otherParams:{field:"id,name,address,linkMan",order:"desc",column:"createTime",baseType:"04"},"is-custom-modal":!1},scopedSlots:e._u([{key:"button",fn:function(){return[a("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[e._v("选择单位")])]},proxy:!0}]),model:{value:e.model.ownersCode,callback:function(t){e.$set(e.model,"ownersCode",t)},expression:"model.ownersCode"}})],1)],1),"2"==e.model.attr?a("a-col",{attrs:{span:4}}):e._e(),"2"==e.model.attr?a("a-col",{attrs:{span:8}}):e._e(),a("a-col",{attrs:{span:4}},[e._v("备注说明")]),a("a-col",{attrs:{span:20}},[a("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"remark",label:"备注说明"}},[a("a-textarea",{attrs:{placeholder:"请输入备注说明",autoSize:{minRows:3,maxRows:3},rows:3,disabled:e.disabled,maxLength:300},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],2)],1)],1)],1)],1)],1)},o=[],r=a("0fea"),i=a("4aae"),s=a("aa2d"),l=a("2b0e"),c=a("9fb0"),u=a("3269"),d=a("eccd"),p=a("d8a5");function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=h(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var b={name:"RegionBaseInfoComp",components:{JDictBankListSelect:u["default"],InputSearchModal:s["default"],AmountInput:i["default"],JDDictSelectTag:d["default"]},props:["model","validatorRules","labelCol","wrapperCol","disabled","disabledZoneBank","checkChange"],data:function(){return{showAdvances:!1,url:{queryZone:"/basics/sysZone/queryTreeList"},zoneList:[],bankInfoOptions:[],activeKey:["1"],showBank:!1,columns:[{title:"单位名称",align:"left",field:"name"},{title:"地址",align:"left",field:"address"},{title:"联系人",align:"center",field:"linkMan"}],competentUnit:{},dEdit:!1,eEdit:!1,cEdit:!1,sEdit:!1,oEdit:!1,districtList:[],districtEditFlag:!1,newDistrictName:"",showStreet:!0}},inject:{getContainer:{default:function(){return function(){return document.body}}}},computed:{zoneCode:function(){return this.model.zoneCode}},watch:{model:function(e,t){this.$emit("update",e)},zoneCode:function(e,t){e!==t&&this.handleUnit(e,t)}},created:function(){this.initData(),this.getCurrentDate(),this.initShowAdvances()},methods:{addDistrict:function(){this.model.districtList?this.model.districtList.push({}):this.$set(this.model,"districtList",[{}])},removeDistrict:function(e){var t=this;this.model.districtList[e].id?Object(r["e"])("/regionDistrict/regionDistrict/checkDistrictBld",{districtId:this.model.districtList[e].id}).then((function(a){a.success?t.model.districtList.splice(e,1):t.$message.error(a.message)})):this.model.districtList.splice(e,1)},initShowAdvances:function(){var e=this;Object(p["e"])("is_advances_deposit").then((function(t){e.showAdvances="1"==t}))},afterChoose:function(e){this.model["developName"]=e&&e.length>0?e.map((function(e){return e.name})).join(","):""},afterChoose1:function(e){this.model["publicName"]=e&&e.length>0?e.map((function(e){return e.name})).join(","):""},handleUnit:function(e){var t=this;e?Object(r["e"])("/tenant/sysTenantInfo/getDeptByZoneCode",{zoneCode:e}).then((function(e){t.competentUnit=e.result||{},t.model.competUnitCode=t.competentUnit.code,t.showBank||null===t.model.name||""===t.model.name||void 0===t.model.name||t.$refs.form.validateField("name")})):this.competentUnit={}},handleList:function(e,t){var a,n=this,o=f(t);try{for(o.s();!(a=o.n()).done;){var r=a.value;r.children&&r.children.length>0?n.handleList(e,r.children):e.push(r)}}catch(i){o.e(i)}finally{o.f()}},initData:function(){var e=this;Object(p["e"])("is_wuye_depart").then((function(t){t&&"1"==t&&(e.showStreet=!1)}));var t=this;Object(r["e"])(this.url.queryZone,{type:"tenant"}).then((function(a){if(a.success){var n=[];a.result.length>1?t.zoneList=a.result:(t.handleList(n,a.result),t.zoneList=n),e.model.id||1!==e.zoneList.length||null!=a.result[0].children&&0!==a.result[0].children.length||(e.model.zoneCode=e.zoneList[0].key),e.handleUnit(e.model.zoneCode,null)}})),Object(r["e"])("/sys/sysDepart/checkUserIsCorp").then((function(e){if(e.success){var a=l["default"].ls.get(c["J"]);Object(r["e"])("/base/rCorpInfo/getCorpInfoByUser",{userId:a.id}).then((function(e){if(e.success){var a=e.result.baseType,n=e.result.code;"01"===a?(t.model.developCodes=n,t.dEdit=!0):"02"===a?(t.model.environCode=n,t.eEdit=!0):"11"===a?(t.model.communityCode=n,t.cEdit=!0):"12"===a?(t.model.streetCode=n,t.sEdit=!0):"04"===a&&(t.model.ownersCode=n,t.oEdit=!0),t.$forceUpdate()}}))}else t.showBank=!0}))},filter:function(e,t){return t.data.props.title.includes(e)},getCurrentDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=a>9?a:"0"+a,o=e.getDate()+1;this.currentDate=t+"-"+n+"-"+o}}},v=b,y=(a("9b1f"),a("2877")),g=Object(y["a"])(v,n,o,!1,null,"2de9c9d6",null);t["default"]=g.exports},ea9f:function(e,t,a){"use strict";a("8b07")},f05e:function(e,t,a){},f1fb:function(e,t,a){"use strict";a("b99e")},f7c0:function(e,t,a){"use strict";a("5633")},f932:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"title marginTop10"},[a("span",{staticClass:"collapseTitle"},[e._v(" 基本信息 ")])])]},proxy:!0}])},[a("j-form-container",{ref:"form",attrs:{border:!1,rules:e.validatorRules,model:e.model,formRef:"formRow",disabled:e.disabled}},[a("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("单位类型")]),a("a-col",{attrs:{span:8,"data-prop":"baseType"}},[a("j-d-dict-select-tag",{attrs:{"get-popup-container":e.getContainer,placeholder:"请选择单位类型",dictCode:"corp_type",disabled:e.changeDisabled},on:{select:function(){return e.$refs.form.clearValidate()}},model:{value:e.model.baseType,callback:function(t){e.$set(e.model,"baseType",t)},expression:"model.baseType"}})],1),"12"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("所属办事处")]):e._e(),"12"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"pid"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择办事处",disabled:e.disabled},model:{value:e.model.pid,callback:function(t){e.$set(e.model,"pid",t)},expression:"model.pid"}},e._l(e.officeList,(function(t){return a("a-select-option",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1):e._e(),"11"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("所属单位")]):e._e(),"11"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"orgPid"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,filterTreeNode:e.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.tenantList,placeholder:"请选择单位"},model:{value:e.model.orgPid,callback:function(t){e.$set(e.model,"orgPid",t)},expression:"model.orgPid"}})],1):e._e(),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("单位名称")]),a("a-col",{attrs:{span:8,"data-prop":"name"}},[a("a-input",{attrs:{placeholder:"请输入单位名称",disabled:e.disabled},on:{change:e.changeName},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("单位地址")]),a("a-col",{attrs:{span:8,"data-prop":"address"}},[a("a-input",{attrs:{placeholder:"请输入单位地址",disabled:e.disabled},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1),a("a-col",{attrs:{span:4}},[e.disabled?e._e():a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("统一社会信用代码")]),a("a-col",{attrs:{span:8,"data-prop":"license"}},[a("a-input",{attrs:{placeholder:"请输入统一社会信用代码",maxLength:30,disabled:e.disabled},model:{value:e.model.license,callback:function(t){e.$set(e.model,"license",t)},expression:"model.license"}})],1),a("a-col",{attrs:{span:4}},[e._v("成立日期")]),a("a-col",{attrs:{span:8,"data-prop":"foundDate"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择成立日期",disabled:e.disabled,getCalendarContainer:e.getCalendarContainer,maxDate:e.currentDate},model:{value:e.model.foundDate,callback:function(t){e.$set(e.model,"foundDate",t)},expression:"model.foundDate"}})],1),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("法人代表")]):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"chargeName"}},[a("a-input",{attrs:{placeholder:"请输入法人代表",maxLength:30,disabled:e.disabled},model:{value:e.model.chargeName,callback:function(t){e.$set(e.model,"chargeName",t)},expression:"model.chargeName"}})],1):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("营业执照有效期")]):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"validDate1"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择营业执照有效期","get-calendar-container":e.getCalendarContainer,disabled:e.disabled},model:{value:e.model.validDate1,callback:function(t){e.$set(e.model,"validDate1",t)},expression:"model.validDate1"}})],1):e._e(),"03"==e.model.baseType?a("a-col",{attrs:{span:20,"data-prop":"validDate1"}},[a("j-date",{staticStyle:{width:"39%"},attrs:{placeholder:"请选择营业执照有效期",disabled:e.disabled},model:{value:e.model.validDate1,callback:function(t){e.$set(e.model,"validDate1",t)},expression:"model.validDate1"}})],1):e._e(),"03"==e.model.baseType?a("a-col",{staticClass:"height-auto",attrs:{span:4}},[e._v("维修范围\n          ")]):e._e(),"03"==e.model.baseType?a("a-col",{staticClass:"height-auto",attrs:{span:20,"data-prop":"fstbuScope"}},[a("div",{staticClass:"width100"},[a("scope-maintenance",{attrs:{getContainer:e.getContainer,fstbuScope:e.model.fstbuScope,disabled:e.disabled},on:{"update:fstbuScope":function(t){return e.$set(e.model,"fstbuScope",t)},"update:fstbu-scope":function(t){return e.$set(e.model,"fstbuScope",t)},"upload-file":e.uploadFileChange,"del-file":e.fileDelFun},model:{value:e.model.fstbuScopeData,callback:function(t){e.$set(e.model,"fstbuScopeData",t)},expression:"model.fstbuScopeData"}})],1)]):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("第几届")]):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"whichSession"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:0,placeholder:e.disabled?"":"请输入第几届",disabled:e.disabled},model:{value:e.model.whichSession,callback:function(t){e.$set(e.model,"whichSession",t)},expression:"model.whichSession"}})],1):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("到届日期")]):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"arrivalDate"}},[a("j-date",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择到届日期",disabled:e.disabled},model:{value:e.model.arrivalDate,callback:function(t){e.$set(e.model,"arrivalDate",t)},expression:"model.arrivalDate"}})],1):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("业委会/社区主任")]):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"chargeName"}},[a("a-input",{attrs:{placeholder:"请输入业委会/社区主任",maxLength:30,disabled:e.disabled},model:{value:e.model.chargeName,callback:function(t){e.$set(e.model,"chargeName",t)},expression:"model.chargeName"}})],1):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("主任联系方式")]):e._e(),"04"==e.model.baseType||"11"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"chargePhone"}},[a("a-input",{attrs:{placeholder:"请输入主任联系方式",disabled:e.disabled},model:{value:e.model.chargePhone,callback:function(t){e.$set(e.model,"chargePhone",t)},expression:"model.chargePhone"}})],1):e._e(),a("a-col",{attrs:{span:4}},[e._v("联系人")]),a("a-col",{attrs:{span:8,"data-prop":"linkMan"}},[a("a-input",{attrs:{placeholder:"请输入联系人",maxLength:30,disabled:e.disabled},model:{value:e.model.linkMan,callback:function(t){e.$set(e.model,"linkMan",t)},expression:"model.linkMan"}})],1),a("a-col",{attrs:{span:4}},[e._v("联系电话")]),a("a-col",{attrs:{span:8,"data-prop":"phone"}},[a("a-input",{attrs:{placeholder:"请输入联系电话",disabled:e.disabled},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("企业网址")]):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"website"}},[a("a-input",{attrs:{placeholder:"请输入企业网址",maxLength:30,disabled:e.disabled},model:{value:e.model.website,callback:function(t){e.$set(e.model,"website",t)},expression:"model.website"}})],1):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("邮箱")]):e._e(),"01"==e.model.baseType||"02"==e.model.baseType||"03"==e.model.baseType||"05"==e.model.baseType||"06"==e.model.baseType?a("a-col",{attrs:{span:8,"data-prop":"email"}},[a("a-input",{attrs:{placeholder:"请输入邮箱",maxLength:30,disabled:e.disabled},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1):e._e(),"10"==e.model.baseType?a("a-col",{attrs:{span:4}},[e._v("是否生成小区")]):e._e(),"10"==e.model.baseType?a("a-col",{attrs:{span:8}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否",disabled:e.disabled},on:{change:e.handlepubRegionFlag},model:{value:e.model.pubRegionFlag,callback:function(t){e.$set(e.model,"pubRegionFlag",t)},expression:"model.pubRegionFlag"}})],1):e._e()],1)],1)],1)],1)],1)},o=[],r=a("0fea"),i=a("d8a5"),s=a("eccd"),l=a("b7a8"),c=a("8ef0"),u=a("3130"),d={name:"CorpBaseInfoComp",components:{ScopeMaintenance:u["default"],MyUploadFile:c["default"],PreviewPicture:l["default"],JDDictSelectTag:s["default"]},props:["model","fstbuScopeValue","validatorRules","labelCol","wrapperCol","disabled","changeDisabled"],data:function(){return{url:{getFileCategory:"/business/eFileCategory/queryByCode",queryZone:"/basics/sysZone/queryTreeList",getUtilityList:"/business/utility/getUtilityList",fileUploadImg:window._CONFIG["domianURL"]+"/control/file/uploadImg?parenPath=&orderNo=&uploadType=5&busiType=70&busiTypeDetail=7003&erecordId="},zoneList:[],activeKey:["1"],repairRangeOptions:[],currentDate:"",visible:!1,previewVisible:!1,currentFstbuScope:{},uploadFileType:"",fileCategoryArr:[],uploadFileTypeId:"",officeList:[],tenantList:[]}},inject:{getContainer:{default:function(){return function(){return document.body}}}},watch:{model:function(e,t){this.$emit("update",e)}},computed:{uploadFileUrl:function(){return this.url.fileUploadImg+this.uploadFileTypeId}},created:function(){this.initData(),this.getCurrentDate()},methods:{handlepubRegionFlag:function(){this.model.pubRegionFlag?this.$set(this.model,"pubRegionFlag",1):this.$set(this.model,"pubRegionFlag",0)},changeName:function(e){this.$emit("changeName",e.target.value)},initData:function(){var e=this;Object(r["e"])("/tenant/sysTenantInfo/tenantList").then((function(t){t.success&&(e.tenantList=t.result)})),Object(r["e"])("/base/rCorpInfo/getMultiCorp",{baseType:"11",state:"0"}).then((function(t){e.officeList=t})),Object(r["e"])(this.url.queryZone).then((function(t){t.success&&(e.zoneList=t.result)})),Object(r["e"])(this.url.getFileCategory,{busiType:"70",busiTypeDetail:"7003"}).then((function(t){t&&t.success&&(e.fileCategoryArr=t.result)})),Object(i["g"])("repair_range").then((function(t){var a=t.result.map((function(e){var t={};return t.label=e.text,t.value=e.value,t}));e.repairRangeOptions=a})),this.fstbuScopeValues||null==this.model.fstbuScope||(this.fstbuScopeValues=this.model.fstbuScope.split(","))},filter:function(e,t){return t.data.props.title.includes(e)},getScopeTextByValue:function(e){var t=this.repairRangeOptions.find((function(t){return t.value===e}));return t?t.label:""},openUploadFileModal:function(e,t){var a=this;this.uploadFileType=t,this.currentFstbuScope=Object.assign({},this.currentFstbuScope,e);var n=this.fileCategoryArr.find((function(e){return e.name===("aptitudeFileList"===t?"资质证书":"其他")}));this.uploadFileTypeId=n?n.id:"",this.visible=!0,this.$nextTick((function(){a.$refs.uploadFileComp.init(e[t])}))},uploadFileChange:function(e){var t=e.type,a=e.fileList;this.$emit("upload-file",{type:t,fileList:a})},uploadFileModalClose:function(){this.visible=!1,this.currentFstbuScope={}},fileDelFun:function(e){var t=e.type,a=e.fileId;this.$emit("del-file",{type:t,fileId:a})},getCalendarContainer:function(e){return e.parentNode.parentNode.parentNode},getCurrentDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=a>9?a:"0"+a,o=e.getDate()+1;this.currentDate=t+"-"+n+"-"+o}}},p=d,f=(a("eb1e"),a("70cd"),a("2877")),h=Object(f["a"])(p,n,o,!1,null,"4289921d",null);t["default"]=h.exports},fbc5:function(e,t,a){},fe08:function(e,t,a){"use strict";a("7835")},feb8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",{staticClass:"collapseTitle"},[e._v("\n          "+e._s(e.headerTitle)+"\n        ")])]},proxy:!0}])},[a("a-form-model",{ref:"form",attrs:{model:e.batchModal,rules:e.validatorRules}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{labelCol:{span:24},wrapperCol:{span:24}}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("a-select",{staticStyle:{"margin-right":"8px",width:"200px"},attrs:{disabled:e.disabled,placeholder:e.disabled?"":"请选择退款类型"},on:{change:e.typeChange},model:{value:e.batchModal.refundType,callback:function(t){e.$set(e.batchModal,"refundType",t)},expression:"batchModal.refundType"}},[a("a-select-option",{attrs:{typeObj:{},value:""}},[e._v("请选择退款类型")]),e._l(e.refundTypeArr,(function(t,n){return a("a-select-option",{key:n,attrs:{typeObj:t,value:t.code}},[e._v("\n                    "+e._s(t.title)+"\n                  ")])}))],2),e.AuditEditBankFlag&&!e.RefundInformationComp_hideEditBank?[a("span",{staticStyle:{"flex-shrink":"0"}},[e._v("退款承办行：")]),a("j-dict-bank-list-select",{staticStyle:{"margin-left":"8px"},attrs:{"show-icon":"",isDetail:"do"!==e.operate,placeholder:"请选择退款承办行"},on:{change:e.changeCode},model:{value:e.batchModal.bankCode,callback:function(t){e.$set(e.batchModal,"bankCode",t)},expression:"batchModal.bankCode"}})]:e._e()],2)])],1)],1)],1),a("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!1,serial:!1,bordered:"","table-height":null,"show-pagination":!1,checkbox:!1,"if-init-query":!1,"header-align":"center",stripe:!0,disabled:e.disabled,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,editConfig:{trigger:"click",activeMethod:function(){return!1}},expand:!1,editRules:e.rules,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("div",{staticClass:"vxetable-operator"})]},proxy:!0},{key:"amountEdit",fn:function(t){t.text;var n=t.row;return[n.amount?a("amount-input",{attrs:{"read-only":!0,minusFlag:!1,isZero:!1},model:{value:n.amount,callback:function(t){e.$set(n,"amount",t)},expression:"row.amount"}}):[e._v(" 自动计算 ")]]}},"1012"!=e.batchModal.refundType?{key:"rate",fn:function(t){t.text;var a=t.row;return[a.rate?e._e():[e._v(" 自动计算 ")],a.rate?[e._v(e._s(a.rate)+"%")]:e._e()]}}:null,"1012"!=e.batchModal.refundType?{key:"accrualAmountEdit",fn:function(t){t.text;var n=t.row;return[a("amount-input",{attrs:{"read-only":!0,placeholder:""},model:{value:n.accrualAmount,callback:function(t){e.$set(n,"accrualAmount",t)},expression:"row.accrualAmount"}})]}}:null,{key:"action",fn:function(t){t.text;var n=t.row;return[a("a",{on:{click:function(t){return e.showHouseDetail(n)}}},[a("a-icon",{attrs:{type:"eye"}}),e._v(" 查看")],1)]}}],null,!0)})],1)],1),a("refund-application-comp",{ref:"refund",attrs:{zIndex:e.zIndex+1},on:{ok:e.modalFormOk}})],1)},o=[],r=a("0fea"),i=a("0a5e"),s=a("4aae"),l=a("eccd"),c=a("d8a5"),u=a("791b"),d=a("3ed7"),p=a("3269");a("c1df");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,a){return e[t]=a}}function u(e,t,a,n){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new $(n||[]);return o(i,"_invoke",{value:D(e,a,s)}),i}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",b="executing",v="completed",y={};function g(){}function w(){}function C(){}var _={};c(_,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(j([])));I&&I!==a&&n.call(I,i)&&(_=I);var k=C.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(o,r,i,s){var l=d(e[o],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==f(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){a(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function D(t,a,n){var o=p;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===v){if("throw"===r)throw i;return{value:e,done:!0}}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=d(t,a,n);if("normal"===c.type){if(o=n.done?v:m,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function L(t,a){var n=a.method,o=t.iterator[n];if(o===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,L(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var r=d(o,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,y;var i=r.arg;return i?i.done?(a[t.resultName]=i.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,y):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function a(){for(;++o<t.length;)if(n.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=e,a.done=!0,a};return r.next=r}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:w,configurable:!0}),w.displayName=c(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},S(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,a,n,o,r){void 0===r&&(r=Promise);var i=new T(u(e,a,n,o),r);return t.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(k),c(k,l,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function o(n,o){return s.type="throw",s.arg=t,a.next=n,o&&(a.method="next",a.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:j(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function m(e,t,a,n,o,r,i){try{var s=e[r](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var r=e.apply(t,a);function i(e){m(r,n,o,i,s,"next",e)}function s(e){m(r,n,o,i,s,"throw",e)}i(void 0)}))}}var v={name:"RefundBatchComp",components:{AmountInput:s["default"],JDDictSelectTag:l["default"],RefundApplicationComp:u["default"],JDictBankListSelect:p["default"]},mixins:[i["a"]],props:{disabled:{type:Boolean,default:!1,required:!1},busiType:{type:String,default:""},zIndex:{type:Number,default:1e3},operate:{type:String,default:"do"}},inject:{RefundInformationComp_hideEditBank:{default:!1}},data:function(){var e=this,t=function(e){var t=e.row,a=e.cellValue;return new Promise((function(e,n){if(t&&t.refundAmount&&Object(d["c"])(t.refundAmount,t.accrualAmount)<Number(a))return n(new Error("实退金额应小于应退金额！"));e()}))};return{houseIds:"",headerTitle:"退款信息",batchModal:{refundType:void 0,depMode:void 0},activeKey:["1"],refundTypeArr:[],validatorRules:{refundType:[{required:!0,message:"请选择退款类型!"}]},isHaveRate:!1,columns:[{title:"房屋位置",align:"left",field:"address",minWidth:200,headerAlign:"center",direction:"rtl",type:"input"},{title:"建筑面积 (㎡)",align:"right",field:"struArea",width:130,type:"input",formatter:function(e){var t=e.cellValue;return Object(d["g"])(t,3)}},{title:"业主姓名",align:"left",minWidth:100,field:"psnName"},{title:"账户余额 (元)",align:"right",field:"balance",formatter:"amount",width:110,type:"Number"},{title:"冻结金额 (元)",align:"right",field:"balanceFrozen",formatter:"amount",width:110,type:"Number"},{title:"应退金额 (元)",align:"right",field:"refundAmount",formatter:"amount",width:110,type:"Number"},{title:"应交金额 (元)",align:"right",field:"dueAmount",formatter:"amount",width:110,type:"Number"},{title:"实交金额 (元)",align:"right",field:"depAmount",formatter:"amount",width:110,type:"Number"},{title:"实退金额 (元)",align:"right",field:"amount",formatter:"amount",width:140,type:"Number",editRender:{type:"visible"}},{title:"退款利率",align:"right",field:"rate",width:130,type:"Number",formatter:function(e){var t=e.cellValue;return t?Number(t)+"%":"自动计算"}},{title:"利息 (元)",align:"right",field:"accrualAmount",width:130,type:"Number",editRender:{type:"visible"}},{title:"操作",field:"action",align:"center",width:100,slot:!0,fixed:"right"}],loadData:function(t){return Object(r["j"])(e.url.list,Object.assign(t,e.queryParam)).then((function(t){return e.batchModal.refundType=t.result[0].busiTypeDetail,e.batchModal.depMode=t.result[0].drawMode,t.result.forEach((function(e){e.accrualAmount&&"."===e.accrualAmount.substring(0,1)&&(e.accrualAmount="0"+e.accrualAmount),Number(e.refundAmount)<0&&(e.refundAmount=0)})),"house"==e.homeTag&&(e.batchModal.refundType="",e.batchModal.depMode="",t.result.forEach((function(e){e.amount=0,e.rate=0,e.refundAmount=0}))),t.result}))},url:{list:"/base/rtRegion/getHouseByIds",url_data:"/sys/category/loadTreeData",caculateRate:"/deposit/firstDeposit/caculateRate",saveBankCode:"/deposit/firstDeposit/saveBankCode",getRefundHouseInfoList:"/base/rHouseInfo/getRefundHouseInfoList",getReqBankCode:"/deposit/firstDeposit/getReqBankCode"},rules:{amount:[{validator:t}]},homeTag:"",AuditEditBankFlag:!1}},watch:{"batchModal.refundType":{handler:function(e){var t=this;this.columns[9].hidden="1012"===e&&this.isHaveRate,this.columns[10].hidden="1012"===e&&this.isHaveRate,this.$refs.table.columns=[],this.$nextTick((function(){t.$refs.table.updateTableSize()}))}}},created:function(){var e=this;this.initReundTypeDict(),this.initIfDeferred(),Object(c["e"])("audit_edit_bank").then((function(t){t&&"1"==t&&(e.AuditEditBankFlag=!0)}))},methods:{initIfDeferred:function(){var e=this;Object(c["f"])("is_deferred_interest","state").then((function(t){t&&t.result.text?e.isHaveRate="1"===t.result.text:e.isHaveRate=!1}))},initRate:function(){var e=this;Object(c["e"])("refund_extension_rate").then((function(t){if(t){var a=e.$refs.table.getTableData();a?a.map((function(e){e.rate=Number(t).toFixed(2)})):a.map((function(e){e.rate=0}))}}))},changeCode:function(e){var t=this;Object(r["j"])(this.url.saveBankCode,{reqNo:this.queryParam.reqNo,bankCode:e}).then((function(e){e.success?t.$message.success("退款承办行维护成功"):t.$message.error(e.message||"退款承办行维护失败！")}))},initHouseList:function(e,t,a){var n=this;this.AuditEditBankFlag&&Object(r["e"])(this.url.getReqBankCode,{reqNo:t}).then((function(e){e.success&&n.$set(n.batchModal,"bankCode",e.result)})),this.homeTag=a,a?(this.houseIds=e.toString(),this.queryParam={houseIds:this.houseIds,refundFlag:"1",reqNo:t}):e instanceof Array?(this.houseIds=e.toString(),this.queryParam={houseIds:this.houseIds}):(this.houseIds=e.replace("[","").replace("]","").replace(/\s*/g,""),this.queryParam={houseIds:this.houseIds,refundFlag:"1",reqNo:t}),this.$refs.table.loadData()},showHouseDetail:function(e){var t=this;this.$refs.refund.visible=!0,this.$refs.refund.title="房屋详情",this.$nextTick((function(){t.$refs.refund.disableSubmit=!0,t.$refs.refund.initData(e.id)}))},initReundTypeDict:function(){var e=this;Object(r["e"])(this.url.url_data,{pcode:this.busiType}).then((function(t){t.success&&(e.refundTypeArr=t.result.filter((function(e){return"refundType"===(e.remark&&JSON.parse(e.remark).useType)})),e.refundTypeArr.sort((function(e,t){return e.code-t.code})))}))},typeChange:function(){var e=b(h().mark((function e(t,a){var n;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.table.getTableData(),e.next=3,this.initRate();case 3:if(!n){e.next=7;break}return n.map((function(e){e.busiTypeDetail=t})),e.next=7,this.caculateRate(n);case 7:this.$emit("refundTypeMethod",{value:t,obj:a.data.attrs.typeObj});case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),caculateRate:function(e){var t=this;e.map((function(e){e.drawMode="0","1012"===e.busiTypeDetail?(e.accrualAmount=0,e.depAmount-e.dueAmount===0?(e.refundAmount=0,e.amount=0):(e.refundAmount=(e.depAmount?e.depAmount:0)-(e.dueAmount?e.dueAmount:0),Number(e.refundAmount)<0&&(e.refundAmount=0),e.amount=(e.depAmount?e.depAmount:0)-(e.dueAmount?e.dueAmount:0)),t.$forceUpdate()):(e.refundAmount=e.balance?e.balance:0,e.amount=e.balance?e.balance:0)})),Object(r["e"])(this.url.caculateRate,{regionIds:this.houseIds,rate:e[0].rate}).then((function(a){if(a.success){var n=function(t){e.forEach((function(e){t===e.id&&("1012"!=e.busiTypeDetail&&(e.accrualAmount=a.result[t]),e.amount=Object(d["c"])(e.amount,e.accrualAmount?e.accrualAmount:0))}))};for(var o in a.result)n(o);t.$forceUpdate()}}));for(var a=0;a<e.length;a++)if("1012"===e[a].busiTypeDetail&&e[a].depAmount-e[a].dueAmount<=0)return this.$message.warning("应退金额为0，您无需办理退款"),this.$set(this.batchModal,"refundType",void 0),!0},getTableList:function(){var e=this,t=this.$refs.table.getTableData();return t.map((function(t){t.depDrawList={},t.depDrawList.amount=t.amount,t.depDrawList.busiTypeDetail=t.busiTypeDetail,t.depDrawList.busiType=e.busiType,t.depDrawList.drawMode=t.drawMode,t.depDrawList.dueAmount=t.refundAmount,t.depDrawList.rate=t.rate,t.depDrawList.accrualAmount=t.accrualAmount})),t},checkData:function(){var e=b(h().mark((function e(){var t;return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=!0,this.batchModal.refundType){e.next=4;break}return this.$message.warn("请选择退款类型！"),e.abrupt("return",!1);case 4:if(!this.AuditEditBankFlag||this.RefundInformationComp_hideEditBank||this.batchModal.bankCode){e.next=7;break}return this.$message.warning("请选择退款承办行！"),e.abrupt("return",!1);case 7:if(t){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,this.$refs.table.validate(!1,(function(e){t=!e}));case 11:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},y=v,g=(a("268d"),a("2877")),w=Object(g["a"])(y,n,o,!1,null,"0c1fcd0a",null);t["default"]=w.exports}}]);