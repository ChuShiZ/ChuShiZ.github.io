(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["app~d0497573"],{"03c1":function(e,t,n){},"03c7":function(e,t,n){"use strict";n("bd13")},"0891":function(e,t,n){},1129:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"height-100"},[n("div",{staticClass:"topContent"},[n("a-row",[n("a-col",{attrs:{span:2}},[n("a-button",{attrs:{title:"返回",icon:"left"},on:{click:e.back}},[e._v("返回")])],1),n("a-col",{attrs:{span:1}},[e._v("维修资金")]),n("a-col",{attrs:{span:3}},[n("j-multi-select-tag",{attrs:{disabled:"",dictCode:"account_properties","is-business":!0,placeholder:"请选择维修资金"},model:{value:e.incomeInfo.allotRange,callback:function(t){e.$set(e.incomeInfo,"allotRange",t)},expression:"incomeInfo.allotRange"}})],1),n("a-col",{attrs:{span:1}},[e._v("账户属性")]),n("a-col",{attrs:{span:10}},[n("j-multi-select-tag",{attrs:{disabled:"",dictCode:"account_type","is-business":!0,placeholder:"请选择账户属性"},model:{value:e.incomeInfo.accType,callback:function(t){e.$set(e.incomeInfo,"accType",t)},expression:"incomeInfo.accType"}})],1)],1),n("a-row",{staticClass:"topContentBody",staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},["1"===e.incomeInfo.rangeAttribute?n("a-col",{staticClass:"height-100",attrs:{span:3}},[n("div",{staticClass:"height-100"},[n("a-tree",{staticClass:"shudata",staticStyle:{"overflow-y":"scroll",width:"100%"},style:{height:e.windowHeight-250+"px"},attrs:{selectedKeys:e.selectedBankKeys},on:{select:e.onSelectNode}},e._l(e.bankData,(function(t){return n("a-tree-node",{key:t.id,attrs:{data:t}},[n("span",{attrs:{slot:"title"},slot:"title"},[t.filePath?n("svg-icon",{attrs:{size:20,url:t.filePath}}):e._e(),e._v(" "+e._s(t.title))],1)])})),1)],1)]):e._e(),"0"===e.incomeInfo.rangeAttribute?n("a-col",{staticClass:"height-100",attrs:{span:3}},[n("div",{staticClass:"row_2"},[n("a-space",[n("a-input",{attrs:{placeholder:"输入名称查询"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("a-button",{attrs:{type:"primary",icon:"search",title:"查询"},on:{click:e.onSearch}}),n("a-button",{attrs:{type:"primary",icon:"reload",title:"重置"},on:{click:e.refresh}})],1)],1),n("div",{staticClass:"row_3"},[n("a-tree",{attrs:{showLine:"",selectedKeys:e.selectedKeys,checkStrictly:!0,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,autoExpandParent:e.autoExpandParent,expandedKeys:e.iExpandedKeys,loading:e.loading},on:{select:e.onSelect,expand:e.onExpand}})],1)]):e._e(),n("a-col",{staticClass:"height-100",attrs:{span:21}},[n("region-acc-list",{ref:"regionAccList",attrs:{"acc-type":e.incomeInfo.accType,"allot-range":e.incomeInfo.allotRange,state:e.incomeInfo.state},on:{distribute:e.distribute}})],1)],1)],1),n("div",{staticClass:"bottomContent"},[n("region-acc-assigned-list",{ref:"regionAccAssignedList",attrs:{"income-id":e.incomeInfo.id,state:e.incomeInfo.state}})],1)])},i=[],o=n("0fea"),s=n("f337"),r=n("4bc3"),l=n("3983"),c={name:"IncomeList",components:{SvgIcon:s["default"],RegionAccList:r["default"],RegionAccAssignedList:l["default"]},props:{incomeInfo:{type:Object}},data:function(){return{description:"增值收益设置分摊范围页面",bankData:[],selectedBankKeys:"",selectedBankRow:{},windowHeight:document.documentElement.clientHeight,bankQuery:{username:"",column:"createTime",order:"desc",field:"id,username,realname",size:20,current:1},url:{bankList:"/business/dBankCode/compList",queryRegionTreeList:"/base/rtRegion/queryRegionTreeList",rangeInitByIncomeId:"/income/incomeRangeList/rangeInitByIncomeId"},treeData:[],iExpandedKeys:[],loading:!1,autoExpandParent:!0,selectedKeys:[],selectedInfo:{},queryParams:{}}},created:function(){this.initData()},methods:{initData:function(e){var t=this;if("1"===this.incomeInfo.rangeAttribute)Object(o["e"])(this.url.bankList,this.bankQuery).then((function(e){if(e.success){var n=e.result.records;n.map((function(e){t.bankData.push({key:e.id,value:e.id,title:e.name,code:e.code,filePath:e.filePath,children:null})}))}}));else{this.loading=!0;var n=this;n.treeData=[],this.queryParams.state="0",Object(o["e"])(this.url.queryRegionTreeList,this.queryParams).then((function(a){if(a){for(var i=0;i<a.length;i++){var o=a[i];n.treeData.push(o),e&&n.setThisExpandedKeys(o,e)}t.loading=!1}}))}this.initRange()},initRange:function(){var e=this;Object(o["e"])(this.url.rangeInitByIncomeId,{incomeId:this.incomeInfo.id}).then((function(t){t.success&&e.$refs.regionAccAssignedList.initData(t.result.records)}))},setThisExpandedKeys:function(e,t){if(e.children&&e.children.length>0&&(this.iExpandedKeys.push(e.key),"search"==t))for(var n=0;n<e.children.length;n++)this.setThisExpandedKeys(e.children[n])},onSelectNode:function(e,t){this.selectedBankKeys=e,this.selectedBankRow=0===e.length?{}:t.node.$attrs.data,this.$refs.regionAccList.selectBank(this.selectedBankRow.code)},back:function(){this.$emit("back")},onExpand:function(e){this.iExpandedKeys=e,this.autoExpandParent=!1},onSearch:function(){this.queryParams.name=this.name,this.initData("search")},refresh:function(){this.name="",this.queryParams.name="",this.initData()},onSelect:function(e,t){this.selectedKeys=e,this.selectedInfo=0===e.length?{}:t.node.dataRef,this.$refs.regionAccList.selectRegion(this.selectedInfo.id)},distribute:function(e){this.$refs.regionAccAssignedList.initData(e)}}},d=c,u=(n("f4f5"),n("2877")),f=Object(u["a"])(d,a,i,!1,null,"1bca895c",null);t["default"]=f.exports},1254:function(e,t,n){"use strict";n("8e63")},1314:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"height-100",class:{custormCard:e.showRange},attrs:{bordered:!1,"body-style":{height:"100%"}}},[e.showRange?e._e():n("div",{staticClass:"cardTableBody"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!e.hasEnablePageConfigByKey("banInitQuery"),"table-height":"auto"},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("a-space",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),n("div",{staticClass:"alertInfo"},[n("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"info-circle",theme:"filled"}}),n("span",[e._v("剩余待分配累计收益："+e._s(e.totalPendingProfit)+"元 (待分配累计收益-已经增加的收益分配金额)")])],1)],1)]},proxy:!0},{key:"busiNo",fn:function(t){var a=t.text,i=t.row;return[n("a",{on:{click:function(t){return e.handleDetail(i)}}},[e._v(e._s(a))])]}},{key:"state",fn:function(t){t.text;var a=t.row;return["0"===a.state?n("a-badge",{attrs:{status:"success",text:"完成"}}):e._e(),"1"===a.state?n("a-badge",{attrs:{status:"error",text:"失败"}}):e._e(),"5"===a.state?n("a-badge",{attrs:{status:"processing",text:"待确认"}}):e._e(),"6"===a.state?n("a-badge",{attrs:{status:"warning",text:"确认校验"}}):e._e(),"7"===a.state?n("a-badge",{attrs:{status:"processing",text:"待分配"}}):e._e(),"8"===a.state?n("a-badge",{attrs:{status:"warning",text:"分配校验"}}):e._e(),"9"===a.state?n("a-badge",{attrs:{status:"warning",text:"新建档"}}):e._e()]}},{key:"action",fn:function(t){t.text;var a=t.row;return["9"===a.state?n("a",{on:{click:function(t){return e.handleEdit(a)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v("\n            编辑")],1):e._e(),"9"===a.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),n("a",{on:{click:function(t){return e.setBenefitRange(a)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v("\n            收益范围")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.addIncomeList(a)}}},[n("a-icon",{attrs:{type:"file-text"}}),e._v("\n            明细")],1),"9"===a.state?n("a-divider",{attrs:{type:"vertical"}}):e._e(),"9"===a.state?n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[n("a-icon",{attrs:{type:"delete"}}),e._v("\n              删除")],1)]):e._e()]}}],null,!1,3392878886)})],1)],1),e.showRange?[n("earnings-allot",{attrs:{"income-info":e.currentIncome},on:{back:function(t){e.showRange=!1}}})]:e._e(),n("income-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),n("income-detail-list-modal",{ref:"incomeDetailListModal"}),n("income-data-source-modal",{ref:"incomeDatasource",on:{ok:e.modalFormOk}}),n("check-result-modal",{ref:"checkResultModal"})],2)},i=[],o=(n("6eb7"),n("3ed7")),s=n("2ca0"),r=n("ee33"),l=n("0a5e"),c=n("0fea"),d=n("c1df"),u=n.n(d),f=n("6fa9"),h=n("d8a5"),m=n("1129"),p=n("2aa7"),g=n("9aca"),y=n("8575"),v={name:"IncomeList",mixins:[l["a"]],components:{EarningsAllot:y["default"],IncomeModal:s["default"],MESSuperQuery:f["default"],BenefitRangeList:m["default"],IncomeDataSourceModal:p["default"],CheckResultModal:g["default"],IncomeDetailListModal:r["default"]},data:function(){var e=this;return{description:"增值收益表管理页面",columns:[{title:"业务编号",align:"center",headerAlign:"center",field:"busiNo",width:200,type:"input",slot:!0},{title:"结息日期",align:"center",headerAlign:"center",field:"settleEndDate",type:"input",formatter:function(e){var t=e.cellValue;return u()(t).format("YYYY-MM-DD")},width:120},{title:"分配类别",align:"center",headerAlign:"center",field:"settleType_dictText",type:"input",width:100},{title:"维修资金",align:"center",headerAlign:"center",field:"allotRange_dictText",type:"input",width:150},{title:"分摊范围",align:"center",headerAlign:"center",field:"rangeAttribute_dictText",type:"input",width:100},{title:"账户属性",align:"left",headerAlign:"center",field:"accType_dictText",type:"input"},{title:"状态",align:"left",headerAlign:"center",field:"state",type:"input",width:100,slot:!0},{title:"操作",field:"action",align:"center",slot:!0,fixed:"right",width:320}],totalPendingProfit:"",url:{list:"/income/income/list",delete:"/income/income/delete",preAllocation:"/income/income/preAllocation",confirmAssign:"/income/income/confirmAssign",queryTotalPendingProfit:"/income/income/queryTotalPendingProfit"},loadData:function(t){return Object(c["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},fileName:"IncomeInfoList",showType:"queryList",queryObj:[{label:"业务编号",value:"busiNo",type:"input",queryType:"like"},{label:"分配类别",value:"settleType",type:"select",options:[]},{label:"维修资金",value:"allotRange",type:"select",options:[]},{label:"状态",value:"state",type:"select",options:[]}],showRange:!1,currentIncome:{}}},created:function(){var e=this;this.initQuery(),Object(c["e"])(this.url.queryTotalPendingProfit,{}).then((function(t){t.success&&t.result&&(e.totalPendingProfit=Object(o["g"])(t.result))}))},methods:{handleDetail:function(e){this.$refs.modalForm.title="详情",this.$refs.modalForm.disableSubmit=!0,this.$refs.modalForm.disabled=!0,this.$refs.modalForm.edit(e)},initQuery:function(){this.queryObj.map((function(e){"settleType"===e.value?(e.options.push({label:"全部",value:""}),Object(h["g"])("settle_type").then((function(t){t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)}))}))):"allotRange"===e.value?(e.options.push({label:"全部",value:""}),Object(h["g"])("account_properties").then((function(t){t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)}))}))):"state"===e.value&&(e.options.push({label:"全部",value:""}),Object(h["g"])("income_state").then((function(t){t.result.forEach((function(t){var n={label:t.text,value:t.value};e.options.push(n)}))})))}))},setBenefitRange:function(e){this.currentIncome=e,this.showRange=!0},addIncomeList:function(e){e.distAmount||e.totalAccr?(this.$refs.incomeDetailListModal.edit(e),this.$refs.incomeDetailListModal.title="编辑明细",this.$refs.incomeDetailListModal.disableSubmit=!1):this.$message.warning("该业务未分配金额，不能添加明细！")},checkInfo:function(e,t){this.$refs.incomeDatasource.init(e,t)},checkResult:function(e){this.$refs.checkResultModal.init(e.id)},preAllocation:function(e){var t=this;Object(c["e"])(this.url.preAllocation,{id:e.id}).then((function(e){e.success?t.$message.success(e.message):t.$message.warning(e.message)}))},confirmAssign:function(e){var t=this;Object(c["e"])(this.url.confirmAssign,{id:e.id}).then((function(e){e.success?t.$message.success(e.message):t.$message.warning(e.message)}))}}},b=v,w=(n("098a"),n("d365"),n("2877")),k=Object(w["a"])(b,a,i,!1,null,"9fb1e212",null);t["default"]=k.exports},"14a1":function(e,t,n){"use strict";n("db8d")},"159f":function(e,t,n){},"160a":function(e,t,n){"use strict";n("9138")},"16bc":function(e,t,n){},"179d":function(e,t,n){},"1cbd":function(e,t,n){"use strict";n("95e3")},2620:function(e,t,n){},"2aa7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vxe-modal",{attrs:{title:e.title,width:1500,loading:e.confirmLoading,"show-zoom":"","show-footer":"","before-hide-method":"",height:"85vh"},on:{close:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("template",{slot:"footer"},[n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",loading:e.paramModalLoading,icon:"check-circle"},on:{click:function(t){return e.handleOk()}}},[e._v("保存\n      ")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",loading:e.paramModalLoading,icon:"check-circle"},on:{click:function(t){return e.toCheck()}}},[e._v("校验\n      ")])],1),n("div",{staticClass:"modalBody"},[n("j-form-container",{attrs:{disabled:e.disabled}},[n("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.validatorRules},slot:"edit"},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("校验配置")]),n("a-col",{attrs:{span:20}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"allotRange"}},[n("a-select",{attrs:{placeholder:"请选择流程模板"},on:{change:e.modelChange},model:{value:e.modelId,callback:function(t){e.modelId=t},expression:"modelId"}},e._l(e.modelList,(function(t){return n("a-select-option",{key:t.id,attrs:{typeObj:t}},[n("span",{staticStyle:{display:"inline-block",width:"100%"}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])])})),1)],1)],1)],1)],1)],1),n("div",{ref:"flowContainer",staticClass:"super-flow-base-demo"},[n("super-flow",{ref:"superFlow",staticClass:"super-flow",attrs:{"relation-mark":"id","start-mark":"startId","end-mark":"endId","node-list":e.nodeList,"link-list":e.linkList,origin:[0,0],"node-menu":e.nodeMenuList,"link-menu":[],"enter-intercept":function(){return!1},"output-intercept":function(){return!1}},scopedSlots:e._u([{key:"node",fn:function(t){var a=t.meta;t.node;return[n("div",{class:"flow-node flow-node-"+a.prop},[n("header",[e._v("\n                "+e._s(a.name)+"\n              ")]),n("section",[e._v("\n                "+e._s(a.desc)+"\n              ")])])]}}])})],1)],1)],2),n("vxe-modal",{ref:"paramModal",attrs:{"show-footer":"","destroy-on-close":"",loading:e.paramModalLoading,title:"参数维护",width:600},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a-button",{key:"back",attrs:{icon:"close"},on:{click:function(t){return e.$refs.paramModal.close()}}},[e._v("关闭")])]},proxy:!0}])},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:6}},[e._v("sql预览")]),n("a-col",{attrs:{span:18}},[n("a-textarea",{staticClass:"width100",attrs:{readOnly:""},model:{value:e.editNode.sqlcmd,callback:function(t){e.$set(e.editNode,"sqlcmd",t)},expression:"editNode.sqlcmd"}})],1),e._l(e.editNode.paramList,(function(t,a){return[n("a-col",{key:"label"+a,attrs:{span:6}},[e._v(e._s(t.ikey))]),n("a-col",{key:"value"+a,attrs:{span:18}},[n("a-input",{staticClass:"width100",attrs:{placeholder:"请输入"+t.ikey},model:{value:t.ivalue,callback:function(n){e.$set(t,"ivalue",n)},expression:"item.ivalue"}})],1)]}))],2)],1)],1)},i=[],o=n("0fea"),s=n("eccd"),r=n("c62b");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var u={name:"IncomeDataSourceModal",components:{SuperFlow:r["default"],JDDictSelectTag:s["default"]},data:function(){var e=this;return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,paramModalLoading:!1,validatorRules:{},url:{queryList:"/liteflow/liteflowModel/queryList",queryById:"/liteflow/liteflowModel/queryById",getDataSourceById:"/joinsoft/joinDataSource/queryById",analyse:"/joinsoft/joinDataSource/getParamsAnalysis",add:"/income/incomeFlow/add",checkByIncome:"/income/income/checkByIncome",queryModelByIncomeIdAndType:"/income/incomeFlow/queryModelByIncomeIdAndType"},disabled:!1,modelList:[],showParamList:[],modelId:"",nodeMenuList:[[{label:"添加参数",selected:function(t,n){e.initParamsModal(t)},hidden:function(e){return!e.meta.id}}]],flowNodeModel:{},nodeList:[],linkList:[],editNode:{}}},methods:{modelChange:function(e,t){var n=this;this.confirmLoading=!0,Object(o["e"])(this.url.queryById,{id:e}).then((function(e){if(e.success){n.flowNodeModel=e.result,n.nodeList=e.result.nodeList?JSON.parse(e.result.nodeList):[],n.linkList=e.result.linkList?JSON.parse(e.result.linkList):[],n.confirmLoading=!1;var t=[];n.showParamList=[];var a,i=l(n.nodeList);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.meta.id&&t.push(n.doAnalyseData(o.meta))}}catch(s){i.e(s)}finally{i.f()}Promise.all(t).then((function(e){e.forEach((function(e){e.paramList.length>0&&n.showParamList.push(e)}))})).finally((function(){n.confirmLoading=!1}))}else n.$message.warning(e.message),n.confirmLoading=!1}))},doAnalyseData:function(e){var t=this;return new Promise((function(n,a){Object(o["e"])(t.url.getDataSourceById,{id:e.id}).then((function(i){if(i.success){var s={};e=i.result,s.sql=i.result.sqlcmd,Object(o["j"])(t.url.analyse,s).then((function(t){if(t.success){var a,i=[],o=l(t.result);try{for(o.s();!(a=o.n()).done;){var s=a.value,r={};r.ikey=s.ikey,r.ivalue=s.ivalue,i.push(r)}}catch(c){o.e(c)}finally{o.f()}e.paramList=i,n(e)}}))}else a(new Error(i.message))}))}))},initParamsModal:function(e){var t=this.showParamList.find((function(t){return t.id===e.meta.id}));t?(this.editNode=t,this.$refs.paramModal.open()):this.$message.warning("当前节点无可配置参数")},init:function(e,t){var n=this;this.model=Object.assign({},e),this.model.type=t,Object(o["e"])(this.url.queryList).then((function(e){e.success&&(n.modelList=e.result,Object(o["e"])(n.url.queryModelByIncomeIdAndType,{incomeId:n.model.id,type:t}).then((function(e){e.result&&(n.modelId=e.result.id,n.modelChange(e.result.id))})))})),this.visible=!0},onChange:function(e){var t=this,n=this,a=e.split(",");Object(o["e"])(this.url.queryById,{id:this.$route_query.modelId}).then((function(e){t.flowData=e.result,t.nodeList=e.result.nodeList?JSON.parse(e.result.nodeList):[],t.linkList=e.result.linkList?JSON.parse(e.result.linkList):[]}));for(var i=0;i<a.length;i++)-1===n.isExist(n.showParamList,a[i])&&Object(o["e"])(n.url.queryById,{id:a[i]}).then((function(e){n.doAnalyseData(e.result)}));n.showParamList=n.showParamList.filter((function(t){return-1!==e.indexOf(t.id)}))},isExist:function(e,t){var n=e.findIndex((function(e){return e.id===t}));return n},close:function(){this.$emit("close"),this.modelId="",this.nodeList=[],this.linkList=[],this.modelList=[],this.showParamList=[],this.visible=!1},handleOk:function(){var e=this;e.confirmLoading=!0;var t={type:e.model.type,incomeId:e.model.id,modelId:e.modelId};Object(o["j"])(this.url.add,t).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))},toCheck:function(){var e,t=this,n="",a=l(t.showParamList);try{for(a.s();!(e=a.n()).done;){var i,s=e.value,r=l(s.paramList);try{for(r.s();!(i=r.n()).done;){var c=i.value;c.ivalue||(n+=c.ikey+",")}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}if(n){var d="请填写参数"+n;return t.$message.warning(d)}t.confirmLoading=!0,t.model.modelId=t.modelId,t.model.dataSourceList=t.showParamList,Object(o["j"])(this.url.checkByIncome,this.model).then((function(e){e.success?t.$message.success(e.message):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))},handleCancel:function(){this.close()}}},f=u,h=(n("5a4b"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"19af5df8",null);t["default"]=m.exports},"2aee":function(e,t,n){"use strict";n("badc")},"2b27":function(e,t,n){},"2ca0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("j-modal",{attrs:{title:e.title,width:1300,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("j-form-container",{attrs:{disabled:e.disabled}},[n("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.validatorRules},slot:"edit"},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("操作类型")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"operateType"}},[n("a-select",{attrs:{disabled:e.disabled,placeholder:"请选择操作类型"},on:{select:e.operateTypeSelected},model:{value:e.model.operateType,callback:function(t){e.$set(e.model,"operateType",t)},expression:"model.operateType"}},[n("a-select-option",{attrs:{value:"1",label:"活期"}},[e._v("活期")]),n("a-select-option",{attrs:{value:"2",label:"定期"}},[e._v("定期")])],1)],1)],1),e.otherIncomeInputFlag?n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"}),e._v("请选择具体款项")]):e._e(),e.otherIncomeInputFlag?n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"otherIdList"}},[n("a-select",{staticStyle:{width:"70%"},attrs:{disabled:e.amountFlag,placeholder:"请选择具体款项",mode:"multiple",open:!1,maxTagCount:2,options:e.selectOptions},model:{value:e.model.otherIdList,callback:function(t){e.$set(e.model,"otherIdList",t)},expression:"model.otherIdList"}}),n("a-button",{staticStyle:{width:"30%","padding-left":"12px"},attrs:{type:"search"},on:{click:e.onButtonClick}},[e._v("选择款项")])],1)],1):e._e(),n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("起止日期")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"settleDate"}},[n("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},on:{change:e.onDateChange},model:{value:e.model.settleDate,callback:function(t){e.$set(e.model,"settleDate",t)},expression:"model.settleDate"}})],1)],1),["01","02","03"].includes(e.model.settleType)?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("分配方式")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"settleWay"}},[n("a-select",{attrs:{disabled:!0,placeholder:"请选择分配方式"},model:{value:e.model.settleWay,callback:function(t){e.$set(e.model,"settleWay",t)},expression:"model.settleWay"}},[n("a-select-option",{attrs:{value:"01"}},[e._v("分配额")])],1)],1)],1)]:e._e(),n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("维修资金")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"allotRange"}},[n("j-multi-select-tag",{attrs:{maxTagCount:2,dictCode:"account_properties","is-business":!0,disabled:"8"==e.model.state,placeholder:"请选择维修资金"},model:{value:e.model.allotRange,callback:function(t){e.$set(e.model,"allotRange",t)},expression:"model.allotRange"}})],1)],1),n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("分摊范围")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"rangeAttribute"}},[n("j-d-dict-select-tag",{attrs:{placeholder:"请选择分摊范围",dictCode:"range_attribute",disabled:"8"==e.model.state},model:{value:e.model.rangeAttribute,callback:function(t){e.$set(e.model,"rangeAttribute",t)},expression:"model.rangeAttribute"}})],1)],1),n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("账户属性")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"accType"}},[n("j-multi-select-tag",{attrs:{maxTagCount:2,dictCode:"account_type","is-business":!0,disabled:"8"==e.model.state,placeholder:"请选择账户属性"},model:{value:e.model.accType,callback:function(t){e.$set(e.model,"accType",t)},expression:"model.accType"}})],1)],1),["04","05","06"].includes(e.model.settleType)?[n("a-col",{attrs:{span:4}},["01"!==e.model.settleType&&"02"!==e.model.settleType&&"03"!==e.model.settleType&&"04"!==e.model.settleType&&"05"!==e.model.settleType&&"06"!==e.model.settleType||e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("\n                  分配额\n                ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"distAmount"}},[n("amount-input",{attrs:{placeholder:"请输入分配额","format-due":"01","read-only":e.disabled,disabled:e.amountFlag},model:{value:e.model.distAmount,callback:function(t){e.$set(e.model,"distAmount",t)},expression:"model.distAmount"}}),e.disabled?n("span",[e._v("元")]):e._e()],1)],1)]:[e.showFormItemBySettleWay("01")?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("\n                    分配额\n                  ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"distAmount"}},[n("amount-input",{attrs:{placeholder:"请输入分配额","format-due":"01","read-only":e.disabled,disabled:e.amountFlag},model:{value:e.model.distAmount,callback:function(t){e.$set(e.model,"distAmount",t)},expression:"model.distAmount"}}),e.disabled?n("span",[e._v("元")]):e._e()],1)],1)]:e._e(),e.showFormItemBySettleWay("02")?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("\n                    活期利率\n                  ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"rate"}},[n("div",{staticClass:"width100 inputNumberAndUnit"},[n("a-input-number",{staticClass:"inputNumber",attrs:{precision:2,placeholder:"请输入活期利率",disabled:e.disabled},model:{value:e.model.rate,callback:function(t){e.$set(e.model,"rate",t)},expression:"model.rate"}}),n("div",{staticClass:"unit"},[n("span",[e._v("%")])])],1)])],1)]:e._e(),e.showFormItemBySettleWay("03")?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("\n                    定期利率\n                  ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"termRate"}},[n("div",{staticClass:"width100 inputNumberAndUnit"},[n("a-input-number",{staticClass:"inputNumber",attrs:{precision:2,placeholder:"请输入定期利率",disabled:e.disabled},model:{value:e.model.termRate,callback:function(t){e.$set(e.model,"termRate",t)},expression:"model.termRate"}}),n("div",{staticClass:"unit"},[n("span",[e._v("%")])])],1)])],1)]:e._e(),"02"===e.model.settleType||"03"===e.model.settleType?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("\n                    定期基准日期\n                  ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"baseDate"}},[n("a-select",{model:{value:e.model.baseDate,callback:function(t){e.$set(e.model,"baseDate",t)},expression:"model.baseDate"}},e._l(e.model.settleDate,(function(t){return n("a-select-option",{key:t},[e._v(e._s(t))])})),1)],1)],1)]:e._e(),("02"===e.model.settleType||"01"===e.model.settleType)&&e.showFormItemBySettleWay("01")&&e.model.otherIdList&&e.model.otherIdList.length>0?[n("a-col",{attrs:{span:4}},[e.disabled?e._e():n("span",{staticClass:"requiredText"}),e._v("\n                    冲抵利息额\n                  ")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"extraDistAmount"}},[n("amount-input",{attrs:{disabled:e.disabled,placeholder:"请输入冲抵利息额","format-due":"01","read-only":e.disabled},on:{change:e.onExtraDistAmountChange},model:{value:e.model.extraDistAmount,callback:function(t){e.$set(e.model,"extraDistAmount",t)},expression:"model.extraDistAmount"}}),e.disabled?n("span",[e._v("元")]):e._e()],1)],1)]:e._e()]],2)],1)],1)],1)],1),n("a-modal",{attrs:{destroyOnClose:"",width:"1100px","z-index":e.zIndex+1,"body-style":{display:"flex",flexDirection:"column",rowGap:"10px"}},on:{cancel:e.otherIncomeModalCloseFun},scopedSlots:e._u([{key:"footer",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.selectedOtherIncomeModalFlag=!0}}},[e._v("当前选中的款项数量："),n("a",[e._v(e._s(e.selectedOtherIncomeList.length))])]),n("div",[n("a-button",{on:{click:e.otherIncomeModalCloseFun}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.otherIncomeModalOkFun}},[e._v("确定")])],1)])]},proxy:!0}]),model:{value:e.otherIncomeModalFlag,callback:function(t){e.otherIncomeModalFlag=t},expression:"otherIncomeModalFlag"}},[n("a-space",[n("j-dict-bank-list-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple",maxTagCount:1,placeholder:"请选择银行"},model:{value:e.otherIncomeQueryParams.bankCode,callback:function(t){e.$set(e.otherIncomeQueryParams,"bankCode",t)},expression:"otherIncomeQueryParams.bankCode"}}),n("a-range-picker",{attrs:{placeholder:["请选择开始日期","请选择结束日期"],valueFormat:"YYYY-MM-DD"},model:{value:e.otherIncomeQueryParams.startEndDate,callback:function(t){e.$set(e.otherIncomeQueryParams,"startEndDate",t)},expression:"otherIncomeQueryParams.startEndDate"}}),n("a-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择业务类型"},model:{value:e.otherIncomeQueryParams.inOutCategory,callback:function(t){e.$set(e.otherIncomeQueryParams,"inOutCategory",t)},expression:"otherIncomeQueryParams.inOutCategory"}},[n("a-select-option",{attrs:{value:"",label:"全部"}},[e._v(" 全部")]),n("a-select-option",{attrs:{value:"in",label:"收入"}},[e._v("收入")]),n("a-select-option",{attrs:{value:"out",label:"支出"}},[e._v("支出")])],1),n("a-button",{on:{click:function(t){return e.getOtherList(1)}}},[e._v("查询")])],1),n("vxe-grid",{ref:"xTable",attrs:{border:"","max-height":"340px","row-id":"id",data:e.otherIncomList,columns:e.otherIncomeColumns,"checkbox-config":{showHeader:!0,strict:!0,trigger:"cell",reserve:!1,checkRowKeys:e.selectedOtherIncomeList.map((function(e){return e.id}))},"pager-config":e.tablePage},on:{"checkbox-change":function(t){var n=t.row,a=t.checked;return e.otherInComeListChange([n],a,!1)},"checkbox-all":function(t){var n=t.records,a=t.checked;return e.otherInComeListChange(n,a,!0)},"page-change":e.pageChange}})],1),n("a-modal",{attrs:{footer:null,width:"1100px","z-index":e.zIndex+2},model:{value:e.selectedOtherIncomeModalFlag,callback:function(t){e.selectedOtherIncomeModalFlag=t},expression:"selectedOtherIncomeModalFlag"}},[n("vxe-grid",{ref:"xTable",attrs:{border:"","max-height":"400px","row-id":"id",data:e.selectedOtherIncomeList,columns:e.otherIncomeColumns.slice(1,e.otherIncomeColumns.length)}})],1)],1)},i=[],o=n("0fea"),s=n("eccd"),r=n("4aae"),l=n("c1df"),c=n.n(l),d=n("3269"),u=n("3ed7");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var o=t&&t.prototype instanceof b?t:b,s=Object.create(o.prototype),r=new q(a||[]);return i(s,"_invoke",{value:T(e,n,r)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",p="suspendedYield",g="executing",y="completed",v={};function b(){}function w(){}function k(){}var C={};c(C,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(D([])));_&&_!==n&&a.call(_,s)&&(C=_);var I=k.prototype=b.prototype=Object.create(C);function L(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,s,r){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==f(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,r)}),(function(e){n("throw",e,s,r)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,r)}))}r(l.arg)}var o;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,a){var i=m;return function(o,s){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var r=a.delegate;if(r){var l=A(r,a);if(l){if(l===v)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===m)throw i=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=g;var c=u(t,n,a);if("normal"===c.type){if(i=a.done?y:p,c.arg===v)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=y,a.method="throw",a.arg=c.arg)}}}function A(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var o=u(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=k,i(I,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:w,configurable:!0}),w.displayName=c(k,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},L(S.prototype),c(S.prototype,r,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,i,o){void 0===o&&(o=Promise);var s=new S(d(e,n,a,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=D,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return r.type="throw",r.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),$(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;$(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:D(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){m(o,a,i,s,r,"next",e)}function r(e){m(o,a,i,s,r,"throw",e)}s(void 0)}))}}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var b={name:"IncomeModal",components:{JDDictSelectTag:s["default"],AmountInput:r["default"],JDictBankListSelect:d["default"]},props:{zIndex:{type:Number,default:1e3}},data:function(){return{title:"操作",visible:!1,model:{otherIdList:[]},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},tablePage:{total:0,currentPage:1,pageSize:10,align:"right",layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},confirmLoading:!1,validatorRules:{operateType:[{required:!0,message:"请选择操作类型!"}],settleDate:[{required:!0,message:"请选择起止日期!"}],settleWay:[{required:!0,message:"请选择分配方式!"}],allotRange:[{required:!0,message:"请选择维修资金!"}],rangeAttribute:[{required:!0,message:"请选择分摊范围!"}],accType:[{required:!0,message:"请选择账户属性!"}],rate:[{validator:this.validateRate}],termRate:[{validator:this.validateRate}],distAmount:[{validator:this.validateAmount}],baseDate:[{required:!0,message:"请选择分配基准日期!"}]},url:{addAndEdit:"/income/income/addAndEdit",getOtherIncomList:"/bSpOther/incomeTransferBSpOtherList"},disabled:!1,disableSubmit:!1,otherIncomeInputFlag:!1,otherIncomeModalFlag:!1,otherIncomeQueryParams:{bankCode:[],startEndDate:[],inOutCategory:""},selectedOtherIncomeModalFlag:!1,otherIncomList:[],selectedOtherIncomeList:[],otherIncomeColumns:[{type:"checkbox",align:"center",width:60,fixed:"left"},{title:"业务编号",align:"center",headerAlign:"center",field:"busiNo",width:170},{title:"承办银行",align:"left",headerAlign:"left",field:"bankCode_dictText",width:160},{title:"专户账号",align:"left",headerAlign:"left",field:"spaccCode",direction:"rtl",minWidth:100},{title:"专户名称",align:"left",headerAlign:"left",field:"spaccName",direction:"rtl",minWidth:120},{title:"记账类型",align:"left",headerAlign:"left",width:140,field:"busiTypeDetail_dictText"},{title:"记账金额 (元)",align:"right",headerAlign:"right",formatter:function(e){var t=e.cellValue;return Object(u["g"])(t)},field:"amount",width:140},{title:"交存状态",align:"center",field:"state_dictText",width:140},{title:"描述",align:"left",headerAlign:"left",field:"describe",minWidth:140}],selectOptions:[],amountFlag:!1}},created:function(){},methods:{showFormItemBySettleWay:function(e){if(!this.model.settleWay)return!1;var t=this.model.settleWay.split(",");return t.includes(e)},otherInComeListChange:function(e,t,n){var a=this;e.forEach((function(e){var n=a.selectedOtherIncomeList.findIndex((function(t){return t.id===e.id}));t&&-1===n?a.selectedOtherIncomeList.push(e):!t&&n>-1&&a.selectedOtherIncomeList.splice(n,1)}))},pageChange:function(e){e.type;var t=e.currentPage,n=e.pageSize;e.$event;this.tablePage.pageSize=n,this.getOtherList(t)},getOtherList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this;this.tablePage.currentPage=t;var a=this.otherIncomeQueryParams,i=a.bankCode,s=a.startEndDate,r=a.inOutCategory;if(i&&0!==i.length&&0!==s.length){var l={inOutCategory:r,bankCode:i.join(","),startDate:s[0],endDate:s[1],settleType:this.model.settleType,pageNo:this.tablePage.currentPage,pageSize:this.tablePage.pageSize};Object(o["e"])(this.url.getOtherIncomList,l).then((function(t){e.otherIncomList=t.result.records,e.tablePage.total=t.result.total,e.$nextTick((function(){n.selectedOtherIncomeList.forEach((function(t){var n=e.$refs.xTable.getRowById(t.id);n&&e.$refs.xTable.setCheckboxRow(n,!0)}))}))})).catch((function(e){}))}else this.$message.warning("请选择银行和日期后进行查询！")},operateTypeSelected:function(e){this.$set(this.model,"settleWay","01"),this.$set(this.model,"extraDistAmount",0),this.$set(this.model,"otherAllAmount",0),this.model.otherIdList=[],this.model.distAmount=void 0,"1"===e?(this.otherIncomeInputFlag=!0,this.$set(this.model,"settleType","01")):"0"===e?(this.amountFlag=!1,this.otherIncomeInputFlag=!1,this.$set(this.model,"settleType",void 0),this.$set(this.model,"settleWay",void 0)):"2"===e&&(this.otherIncomeInputFlag=!0,this.$set(this.model,"settleType","02"))},otherIncomeModalCloseFun:function(){this.otherIncomList=[],this.otherIncomeQueryParams={bankCode:[],startEndDate:[],inOutCategory:""}},onExtraDistAmountChange:function(e){this.model.distAmount=(parseFloat(void 0==this.model.otherAllAmount?0:this.model.otherAllAmount)+parseFloat(this.model.extraDistAmount)).toFixed(2)},otherIncomeModalOkFun:function(){this.selectOptions=[],this.model.otherIdList=[];var e,t=0,n=g(this.selectedOtherIncomeList);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.model.otherIdList.push(a.id),this.selectOptions.push({value:a.id,label:a.amount}),"9098"==a.busiTypeDetail?t-=a.amount:t+=a.amount}}catch(i){n.e(i)}finally{n.f()}this.$set(this.model,"otherAllAmount",t),this.model.distAmount=(parseFloat(t)+parseFloat(this.model.extraDistAmount)).toFixed(2),this.amountFlag=0!==this.model.otherIdList.length,this.otherIncomeModalFlag=!1,this.otherIncomeModalCloseFun()},onButtonClick:function(){this.otherIncomeModalFlag=!0},selectType:function(){var e=this;this.$set(this.model,"settleWay",void 0),this.$refs.form.clearValidate(["rate","regRate","distAmount"]),this.$nextTick((function(){e.$refs.form.validateField(["rate","regRate","distAmount"])}))},checkInput:function(e){this.$refs.form.clearValidate([e])},validateRegRate:function(e,t,n){var a=this;return new Promise(function(){var e=p(h().mark((function e(i){return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"02"===a.model.settleType?t&&0!=Number(t)?"01"!==a.model.settleType&&Number(t)<0?n("其他利率必须大于0"):n():n("其他利率不能为0"):n();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},validateRate:function(e,t,n){return new Promise((function(e){t&&0!=Number(t)?Number(t)<0?n("利率必须大于0"):n():n("利率不能为0")}))},validateAmount:function(e,t,n){var a=this;return new Promise(function(){var e=p(h().mark((function e(t){return h().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"02"===a.model.settleType||"03"===a.model.settleType||"04"===a.model.settleType||"05"===a.model.settleType||"06"===a.model.settleType?!a.model.distAmount||Number(a.model.distAmount)<=0?n("分配额必须大于0"):n():"01"===a.model.settleType?(!a.model.distAmount||Number(a.model.distAmount)<=0?n("分配额必须大于0"):n(),a.checkInput("rate")):n();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},add:function(){this.edit({})},edit:function(e){if(e.operateType&&(e.operateType=String(e.operateType)),this.otherIncomeInputFlag=["01","02"].includes(e.settleType),this.model=Object.assign({},e),this.model.rate&&(this.model.rate=100*this.model.rate),this.model.regRate&&(this.model.regRate=100*this.model.regRate),this.model.settleStartDate&&this.model.settleStartDate){var t=[];t.push(c()(this.model.settleStartDate).format("YYYY-MM-DD")),t.push(c()(this.model.settleEndDate).format("YYYY-MM-DD")),this.$set(this.model,"settleDate",t)}if(e.spOtherLists&&e.spOtherLists.length>0){this.model.otherIdList=[];var n,a=g(e.spOtherLists);try{for(a.s();!(n=a.n()).done;){var i=n.value;this.model.otherIdList.push(i.ID),this.selectOptions.push({value:i.ID,label:i.amount})}}catch(o){a.e(o)}finally{a.f()}this.amountFlag=0!==this.model.otherIdList.length}this.visible=!0},close:function(){this.$emit("close"),this.disabled=!1,this.disableSubmit=!1,this.visible=!1,this.otherIncomeInputFlag=!1,this.amountFlag=!1,this.model.otherIdList=[]},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(!n)return!1;t.confirmLoading=!0,e.model.state="9",e.model.rate&&(e.model.rate=e.model.rate/100),e.model.regRate&&(e.model.regRate=e.model.regRate/100),Object(o["j"])(e.url.addAndEdit,e.model).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},onDateChange:function(e,t){this.model.settleStartDate=t[0]?t[0]+" 00:00:00":"",this.model.settleEndDate=t[1]?t[1]+"  00:00:00":"",this.$set(this.model,"baseDate",void 0)},validateRateOtherIdList:function(e,t,n){this.model.otherIdList&&this.model.otherIdList.length>0?n():n(!1,"请选择具体款项!")}}},w=b,k=(n("6770"),n("f5a1"),n("2877")),C=Object(k["a"])(w,a,i,!1,null,"533bde76",null);t["default"]=C.exports},"339a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"preAllot"},[n("allot-set-table",{staticClass:"preAllotTable",attrs:{"income-info":e.incomeInfo,"table-url":"/income/incomeRangeList/rangeInitByIncomeId",showCheckBox:!1,query:{incomeId:e.incomeInfo.id},"show-rate":!0},scopedSlots:e._u([{key:"extra",fn:function(t){var a=t.total;return[n("div",{staticClass:"tableExtra"},[n("div",[e._v("分配户数："),n("span",[e._v(e._s(a))])]),n("div",[e._v("分配总额："),n("span",[e._v(e._s(e.formatterAmount(e.incomeInfo.distAmount)))])]),n("div",[e._v("操作人："+e._s(e.incomeInfo.createBy))])])]}}])}),n("div",{staticClass:"preAllotFooter"},["7"===e.incomeInfo.state?n("a-space",[n("a-button",{attrs:{loading:e.saveLoading},on:{click:e.backStep}},[e._v("上一步")]),n("a-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.confirmPre}},[e._v("确认预分配")])],1):e._e()],1)],1)},i=[],o=n("4080"),s=n("3ed7"),r=n("0a5e"),l=n("0fea"),c={name:"PreAllot",components:{AllotSetTable:o["default"]},mixins:[r["a"]],props:{incomeInfo:{type:Object,default:function(){}}},data:function(){return{formatterAmount:s["g"],url:{getList:"/income/incomeRangeList/rangeInitByIncomeId",preAllocation:"/income/income/preAllocation"},saveLoading:!1}},methods:{confirmPre:function(){var e=this;this.saveLoading=!0,Object(l["e"])(this.url.preAllocation,{id:this.incomeInfo.id}).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok",{})):e.$message.warning(t.message)})).finally((function(){e.saveLoading=!1}))},backStep:function(){this.$emit("lastStep",{checkFlag:"1"})}}},d=c,u=(n("c40e"),n("2877")),f=Object(u["a"])(d,a,i,!1,null,"20efd966",null);t["default"]=f.exports},"368b":function(e,t,n){},"38cf":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("主管单位")]),n("a-col",{attrs:{span:20}},[n("a-form-model-item",{staticClass:"formClass",attrs:{prop:"sysOrgCode"}},[n("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,filterTreeNode:e.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,placeholder:"请选择主管单位"},model:{value:e.model.sysOrgCode,callback:function(t){e.$set(e.model,"sysOrgCode",t)},expression:"model.sysOrgCode"}})],1)],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("类型")]),n("a-col",{attrs:{span:20}},[n("a-form-model-item",{staticClass:"formClass",attrs:{prop:"type"}},[n("j-d-dict-select-tag",{attrs:{placeholder:"请选择电子票据类型",dictCode:"qr_type"},model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}})],1)],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("状态")]),n("a-col",{attrs:{span:20}},[n("a-switch",{attrs:{checkedChildren:"启用",unCheckedChildren:"禁用"},on:{change:e.onChose},model:{value:e.visibleCheck,callback:function(t){e.visibleCheck=t},expression:"visibleCheck"}})],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("描述")]),n("a-col",{attrs:{span:20}},[n("a-form-model-item",{staticClass:"formClass",attrs:{prop:"describe"}},[n("a-input",{attrs:{placeholder:"请输入描述"},model:{value:e.model.describe,callback:function(t){e.$set(e.model,"describe",t)},expression:"model.describe"}})],1)],1)],1)],1)],1)],1)},i=[],o=n("0fea"),s=n("eccd");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var d={name:"QrConfigModal",components:{JDDictSelectTag:s["default"]},props:{treeData:{type:Array,default:function(){return[]}}},data:function(){return{title:"操作",visible:!1,model:{state:"1"},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{sysOrgCode:[{required:!0,message:"请选择主管单位"}],type:[{required:!0,message:"请选择电子票据类型"}],describe:[{required:!0,message:"请输入描述"}]},url:{add:"/qrConfig/qrConfig/add",edit:"/qrConfig/qrConfig/edit"},visibleCheck:!0,state:1}},created:function(){},methods:{add:function(){this.edit({state:"1"})},edit:function(e){this.model=Object.assign({},e),this.getSysOrgTreeData(),this.state=e.state,this.visibleCheck="1"===e.state,this.model.state=this.state,this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.clearValidate()},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(!n)return!1;t.model.id?(t.$message.info("设置为启用状态会禁用其余配置"),e.save()):Object(o["e"])("qrConfig/qrConfig/list",{sysOrgCode:t.model.sysOrgCode}).then((function(n){if(n.success&&n.result.records&&n.result.records.length>0){var a,i=r(n.result.records);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.type===t.model.type)return t.$message.warning("当前租户下存在相同电子票据类型"),!1}}catch(m){i.e(m)}finally{i.f()}var s,l=r(n.result.records);try{for(l.s();!(s=l.n()).done;){var c=s.value;"1"===c.state&&e.$confirm({title:"确认",content:"当前租户下存在启用的电子票据，是否启用当前？",onOk:function(){return t.save("1"),!1},onCancel:function(){return t.save("0"),!1}})}}catch(m){l.e(m)}finally{l.f()}var d,u=!0,f=r(n.result.records);try{for(f.s();!(d=f.n()).done;){var h=d.value;"1"===h.state&&(u=!1)}}catch(m){f.e(m)}finally{f.f()}u&&e.save("1")}else e.save("1")}))}))},save:function(e){var t=this;this.confirmLoading=!0,this.model.state=e||this.state;var n="",a="";this.model.id?(n+=this.url.edit,a="put"):(n+=this.url.add,a="post"),Object(o["i"])(n,this.model,a).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))},handleCancel:function(){this.close()},getSysOrgTreeData:function(){1!==this.treeData.length||null!=this.treeData[0].children&&0!==this.treeData[0].children.length||(this.model.sysOrgCode=this.treeData[0].value)},filter:function(e,t){return t.data.props.title.includes(e)},onChose:function(e){e?(this.state=1,this.visibleCheck=!0):(this.state=0,this.visibleCheck=!1)}}},u=d,f=(n("4991"),n("2877")),h=Object(f["a"])(u,a,i,!1,null,"984756be",null);t["default"]=h.exports},"38dd":function(e,t,n){e.exports=n.p+"a009746659b87ebc079c7890b3b36547.md"},3983:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tableDiv"},[n("vxe-grid",{ref:"table",attrs:{border:"",columns:e.columns,data:e.tableList,"auto-resize":"",height:"auto",toolbar:{},"pager-config":e.tablePage,"expand-config":{trigger:"row",lazy:!1}},on:{"page-change":e.handlePageChange},scopedSlots:e._u([{key:"buttons",fn:function(){return["9"===e.state||"8"===e.state?n("a-button",{attrs:{icon:"redo",type:"primary"},on:{click:e.revoke}},[e._v("撤销")]):e._e(),"9"===e.state||"8"===e.state?n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"save"},on:{click:function(t){return e.save()}}},[e._v("保存")]):e._e()]},proxy:!0}])})],1)},i=[],o=(n("6eb7"),n("0a5e")),s=n("0fea"),r={name:"RegionAccList",mixins:[o["a"]],props:{incomeId:{type:String},state:{type:String}},data:function(){return{description:"分配范围账户页面",columns:[{width:60,fixed:"left",align:"center",type:"checkbox"},{title:"序号",align:"center",headerAlign:"center",type:"seq",width:60},{title:"账号",align:"center",headerAlign:"center",field:"accCode",type:"input",width:200},{title:"承办行",align:"center",headerAlign:"center",field:"bankName",type:"input",width:120},{title:"维修资金",align:"center",headerAlign:"center",field:"allotRange_dictText",type:"input",width:120},{title:"账户属性",align:"center",headerAlign:"center",field:"accType_dictText",type:"input",width:120},{title:"名称",align:"center",headerAlign:"center",field:"name",type:"input",width:120},{title:"编码",align:"left",headerAlign:"center",field:"code",type:"input",width:120},{title:"地址",align:"left",headerAlign:"center",field:"address",type:"input"},{title:"账户状态",align:"left",headerAlign:"center",field:"accState_dictText",type:"input",width:120}],tablePage:{total:0,currentPage:1,pageSize:10,pageSizes:[5,10,15,20,25],align:"right"},dataSource:[],url:{batchSave:"/income/incomeRangeList/batchSave"}}},computed:{tableList:{get:function(){var e=this.tablePage.currentPage-1,t=this.tablePage.pageSize;return this.dataSource.slice(e*t,this.tablePage.currentPage*t)},set:function(){}}},created:function(){},methods:{initData:function(e){var t=this.dataSource.concat(e);this.dataSource=this.distinct(t),this.tablePage.total=this.dataSource.length},distinct:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.id)&&t.set(e.id,e.id)}))},getCheckData:function(){return this.$refs.table.getCheckboxRecords()},revoke:function(){var e=this.getCheckData();if(e.length>0){var t=this.dataSource.filter((function(t){return!e.some((function(e){return t.id===e.id}))}));this.dataSource=t,this.tablePage.total=this.dataSource.length}},handlePageChange:function(e){var t=e.currentPage,n=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=n},save:function(){var e=this,t={incomeId:this.incomeId,regionAccVoList:this.dataSource};Object(s["j"])(this.url.batchSave,t).then((function(t){t.success?e.$message.success(t.message):e.$message.warning(t.message)}))}}},l=r,c=(n("1254"),n("2877")),d=Object(c["a"])(l,a,i,!1,null,"0498c26a",null);t["default"]=d.exports},"3b23":function(e,t,n){},4080:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&!e.isTableLoad,expression:"loading && !isTableLoad"}],staticClass:"allotSetTable",attrs:{"element-loading-text":"正在加载中..."}},[e.showPagination?n("div",{staticClass:"tableForm"},[n("div",{staticClass:"leftQuery"},[n("a-input-search",{staticClass:"inputSearch",attrs:{placeholder:"热搜项：地址，账号，银行名称等"},on:{search:function(t){return e.getTableData(!0)}},model:{value:e.tableParams.queryInfo,callback:function(t){e.$set(e.tableParams,"queryInfo",t)},expression:"tableParams.queryInfo"}}),n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableData(!0)}}},[e._v("查询")])],1),n("div",[e._t("extra",null,{total:e.pagination.total})],2)]):e._e(),n("div",{staticClass:"tableBox"},[n("vxe-grid",e._b({ref:"table",attrs:{border:"",height:"auto","auto-resize":"","show-overflow":"tooltip","row-id":"id","show-tooltip":"",columns:e.columns,loading:e.loading&&e.isTableLoad,data:e.tableData},scopedSlots:e._u([{key:"allotRange",fn:function(t){var a=t.row;return[n("span",{staticClass:"stateBg"},[e._v(e._s(a.allotRange_dictText))])]}},{key:"accType",fn:function(t){var a=t.row;return[n("span",{staticClass:"stateBg"},[e._v("  "+e._s(a.accType_dictText))])]}},{key:"accrAmount",fn:function(t){var a=t.row;return[a.accrAmount?n("span",[n("a-tooltip",[n("template",{slot:"title"},[e._v("活期积数:"+e._s(a.cumulation)),n("br"),e._v("定期积数:"+e._s(a.regAmount))]),n("a-icon",{attrs:{type:"pay-circle"}})],2),e._v("\n          "+e._s(a.accrAmount))],1):n("span",[e._v("未分配")])]}}])},"vxe-grid",e.$attrs,!1))],1),e.showPagination?n("a-pagination",e._b({staticClass:"tablePagination",attrs:{pageSize:e.tableParams.size},on:{"update:pageSize":function(t){return e.$set(e.tableParams,"size",t)},"update:page-size":function(t){return e.$set(e.tableParams,"size",t)},change:e.paginationChange,showSizeChange:e.paginationChange},model:{value:e.tableParams.current,callback:function(t){e.$set(e.tableParams,"current",t)},expression:"tableParams.current"}},"a-pagination",e.pagination,!1)):e._e()],1)},i=[],o=n("0fea"),s=n("3ed7"),r=n("2b0e"),l=n("9fb0"),c={name:"AllotSetTable",props:{isDetail:{type:Boolean,default:!1},query:{type:Object,default:void 0},incomeInfo:{type:Object,default:void 0},tableUrl:{type:String,default:"/income/incomeRangeList/list"},showAlert:{type:Boolean,default:!0},selectedRows:{type:Array,default:function(){return[]}},ifInit:{type:Boolean,default:!0},isTableLoad:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},checkMethod:{type:Function,default:function(){return function(){}}},showRate:{type:Boolean,default:!1}},data:function(){return{columns:[{type:"seq",width:60,title:"序号",align:"center"},{field:"accCode",title:"账号",width:200,formatter:function(e){var t=e.cellValue;return t.replace(/\s/g,"").replace(/[^\d]/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")}},{field:"bankName",title:"承办银行",width:120,align:"center"},{field:"accState_dictText",title:"状态",width:100,align:"center"},{field:"allotRange_dictText",title:"维修资金",width:160,align:"center",slots:{default:"allotRange"}},{field:"accType_dictText",title:"账号属性",align:"center",slots:{default:"accType"},width:140},{field:"code",title:"名称编码",width:100},{field:"address",title:"账户地址",minWidth:220},{field:"regRate",title:"定期利率",width:100,visible:this.showRate&&("02"===this.incomeInfo.settleType||"03"===this.incomeInfo.settleType),align:"right",formatter:function(e){var t=e.cellValue;return Object(s["e"])(t,100)+"%"}},{field:"rate",title:"活期利率",width:100,visible:this.showRate&&("01"===this.incomeInfo.settleType||"02"===this.incomeInfo.settleType||"03"===this.incomeInfo.settleType),align:"right",formatter:function(e){var t=e.cellValue;return Object(s["e"])(t,100)+"%"}},{field:"struArea",title:"建筑面积(m²)",width:this.isWidth(),visible:this.showRate&&"05"===this.incomeInfo.settleType,align:"right",formatter:function(e){var t=e.cellValue;return Object(s["g"])(t,3)}},{field:"cumulation",title:"积数(元)",width:120,visible:this.showRate&&"04"===this.incomeInfo.settleType,align:"right"},{field:"accrAmount",title:"分配利息(元)",width:this.isWidth(),slots:{default:"accrAmount"},visible:this.showRate,align:"right"}],tableData:[],pagination:{defaultPageSize:50,showSizeChanger:!0,pageSizeOptions:["10","50","100","200"],showQuickJumper:!0,total:0,showTotal:function(e){return"共 ".concat(e," 条记录")}},tableParams:{current:1,size:50,queryInfo:""},loading:!1,getAxiosTime:0,tableTotal:0}},computed:{queryParams:{get:function(){var e=JSON.parse(JSON.stringify(this.tableParams));return this.query?Object.assign(e,this.query):e},set:function(){}},selectedRow:{get:function(){var e=[];return this.selectedRows.forEach((function(t){return e.push(t)})),e},set:function(e){this.$emit("update:selectedRows",e)}},selectedKeys:function(){return this.selectedRows.map((function(e){return e.id}))},selectedLength:function(){return this.selectedRow.length}},watch:{isDetail:{handler:function(e){},immediate:!0}},mounted:function(){this.ifInit&&this.getTableData(!0)},methods:{isWidth:function(){return 18==r["default"].ls.get(l["w"])?140:120},getTableData:function(e){var t=this;t.loading=!0,e&&(t.queryParams.current=1),Object(o["e"])(t.tableUrl,t.queryParams).then((function(e){e.success&&(t.tableData=e.result.records,0===t.getAxiosTime&&(t.tableTotal=e.result.total),t.pagination.total=e.result.total,t.getAxiosTime++,t.$nextTick((function(){t.setCheckBoxBySelected()})))})).finally((function(){t.loading=!1}))},tableSelect:function(e){var t=e.rowid,n=e.row,a=e.checked;if(a)this.selectedRow.find((function(e){return e.id===t}))||this.selectedRow.push(n);else{var i=this.selectedRow.findIndex((function(e){return e.id===t}));this.selectedRow.splice(i,1)}this.$forceUpdate(),this.$emit("update:selectedRows",this.selectedRow),this.$emit("select",{rows:[n],checked:a})},tableSelectAll:function(e){var t=e.checked,n=this;n.tableData.forEach((function(e){if(t){var a=n.selectedRow.findIndex((function(t){return t.id===e.id}));-1===a&&n.selectedRow.push(e)}else{var i=n.selectedRow.findIndex((function(t){return t.id===e.id}));-1!==i&&n.selectedRow.splice(i,1)}})),this.$forceUpdate(),this.$emit("update:selectedRows",this.selectedRow),this.$emit("select",{rows:this.tableData,checked:t})},deselectAll:function(){return this.reset(),!1},paginationChange:function(){this.getTableData()},setCheckBoxBySelected:function(){var e=this,t=e.$refs.table;e.tableData.forEach((function(n){t.setCheckboxRow(t.getRowById(n.id),!!e.selectedRow.find((function(e){return e.id===n.id})))})),e.$emit("select",{rows:e.selectedRow,checked:!0})},reset:function(){var e=this.$refs.table;this.selectedRow=[],e.clearCheckboxRow(),this.$emit("select",[],[])}}},d=c,u=(n("c9ec"),n("2877")),f=Object(u["a"])(d,a,i,!1,null,"acd423b2",null);t["default"]=f.exports},4991:function(e,t,n){"use strict";n("8e81")},"4a21":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[n("div",{staticClass:"cardBody"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableBox"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"table-height":"auto",expand:!1,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[n("a",{on:{click:function(t){return e.showDetails(a.content)}}},[n("a-icon",{attrs:{type:"eye",theme:"twoTone"}}),e._v(" 详情")],1)]}}])})],1)],1),n("loginpage-content-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),n("j-modal",{attrs:{visible:e.visible,title:"政策公告","mask-closable":!1,footer:null,width:"60%",heigh:"60%"},on:{cancel:e.cancel}},[n("div",{domProps:{innerHTML:e._s(e.detailsHtml)}})])],1)},i=[],o=(n("6eb7"),n("0fea")),s=n("ac0d"),r=n("0a5e"),l=n("6fa9"),c=n("6c59"),d=n("78ac"),u={name:"PolicyAnnouncement",mixins:[r["a"],s["b"]],components:{LoginpageContentModal:c["default"],MESSuperQuery:l["default"],JModal:d["default"]},data:function(){var e=this;return{detailsHtml:"",visible:!1,fileName:"AnswerQuestionList",description:"answer_question管理页面",showType:"queryList",queryObj:[{type:"input",value:"title",label:"标题",queryType:"like"}],columns:[{title:"类别",align:"center",field:"busiType_dictText",width:120},{title:"明细类别",align:"center",field:"busiTypeDetail_dictText",width:120},{title:"标题",headerAlign:"center",align:"left",field:"title"},{title:"发布时间",headerAlign:"center",align:"center",field:"createTime"},{title:"操作",field:"action",align:"center",fixed:"right",width:147,slot:!0}],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/loginpage/pageList",delete:"/loginpage/delete",deleteBatch:"/loginpage/deleteBatch",loadTreeData:"/sys/category/loadTreeData"},dictOptions:{}}},created:function(){this.initRouteData(),this.initQuery()},methods:{showDetails:function(e){this.detailsHtml=e,this.visible=!0},cancel:function(){this.visible=!1},initRouteData:function(){this.queryParam.busiType=this.$route_query.busiType,this.queryParam.busiTypeDetail=this.$route_query.busiTypeDetail},initQuery:function(){var e=this;this.queryObj.map((function(t){"busiType"===t.value&&Object(o["e"])(e.url.loadTreeData,{pcode:"login_page_type"}).then((function(n){n.success&&(t.options=e.convert(n.result))}))}))},convert:function(e,t){for(var n=e,a=[],i=0;i<n.length;i++){var o={};o.value=t?n[i].value:n[i].code,o.label=n[i].title,a.push(o)}return a}}},f=u,h=(n("cd25"),n("1cbd"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"f4b29e36",null);t["default"]=m.exports},"4bc3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"table-height":"auto","row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,expand:!1,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入内容查询"},model:{value:e.queryParam.queryInfo,callback:function(t){e.$set(e.queryParam,"queryInfo",t)},expression:"queryParam.queryInfo"}}),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"search",type:"primary"},on:{click:e.query}},[e._v("查询\n      ")]),"9"===e.state||"8"===e.state?n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"cluster",type:"primary"},on:{click:e.distribute}},[e._v("分配\n      ")]):e._e()]},proxy:!0}])})],1)},i=[],o=(n("6eb7"),n("0a5e")),s=n("0fea"),r={name:"RegionAccList",components:{},mixins:[o["a"]],props:{allotRange:{type:String},accType:{type:String},state:{type:String}},data:function(){return{description:"分配范围账户页面",columns:[{title:"账号",align:"center",headerAlign:"center",field:"accCode",type:"input",width:200},{title:"承办行",align:"center",headerAlign:"center",field:"bankName",type:"input",width:120},{title:"维修资金",align:"center",headerAlign:"center",field:"allotRange_dictText",type:"input",width:120},{title:"账户属性",align:"center",headerAlign:"center",field:"accType_dictText",type:"input",width:120},{title:"名称",align:"center",headerAlign:"center",field:"name",type:"input",width:120},{title:"编码",align:"left",headerAlign:"center",field:"code",type:"input",width:120},{title:"地址",align:"left",headerAlign:"center",field:"address",type:"input"},{title:"账户状态",align:"left",headerAlign:"center",field:"accState_dictText",type:"input",width:120}],url:{list:"/income/incomeRangeList/list"}}},created:function(){},methods:{loadData:function(e){return this.queryParam.allotRange=this.allotRange,this.queryParam.accType=this.accType,Object(s["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){return e.result}))},selectBank:function(e){this.queryParam.bankCode=e||null,this.queryPage()},selectRegion:function(e){this.queryParam.id=e||null,this.queryPage()},query:function(){this.queryPage()},distribute:function(){this.$emit("distribute",this.selectedRows)}}},l=r,c=(n("becc"),n("2877")),d=Object(c["a"])(l,a,i,!1,null,"4a39bb8b",null);t["default"]=d.exports},"5a4b":function(e,t,n){"use strict";n("9a5b")},"63bf":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{bordered:!1}},[n("a-drawer",{attrs:{title:"详情列表",width:e.screenWidth,"destroy-on-close":!0,visible:e.visible},on:{close:e.onClose}},[n("div",{style:{padding:"10px",border:"1px solid #e9e9e9",background:"#fff"}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline",form:e.form},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[n("a-row",{attrs:{gutter:10}},[n("a-col",{attrs:{md:8,sm:12}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"请输入配置名称"},model:{value:e.queryParam.configName,callback:function(t){e.$set(e.queryParam,"configName",t)},expression:"queryParam.configName"}})],1)],1),n("a-col",{attrs:{md:8,sm:12}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.queryParam.paramName,callback:function(t){e.$set(e.queryParam,"paramName",t)},expression:"queryParam.paramName"}})],1)],1),n("a-col",{attrs:{md:7,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1),n("a-row",[n("a-col",{attrs:{md:2,sm:24}},[n("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1)],1),n("div",[n("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[e._v("删除")])])],1)}}])})],1)])]),n("qr-detail-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},i=[],o=n("ca00"),s=n("a3e9"),r=n("b65a"),l={name:"QrDetailList",mixins:[r["a"]],components:{QrDetailModal:s["default"]},data:function(){return{columns:[{title:"序号",align:"center",dataIndex:"orderNum"},{title:"配置名称",align:"center",dataIndex:"configName"},{title:"参数名称",align:"center",dataIndex:"paramName"},{title:"配置描述",align:"center",dataIndex:"describe"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],queryParam:{configName:"",paramName:"",describe:""},title:"操作",visible:!1,screenWidth:800,model:{},qrConfigId:"",status:1,labelCol:{xs:{span:5},sm:{span:5}},wrapperCol:{xs:{span:12},sm:{span:12}},form:this.$form.createForm(this),url:{list:"/qrDetail/qrDetail/list",delete:"/qrDetail/qrDetail/delete",deleteBatch:"/qrDetail/qrDetail/deleteBatch",exportXlsUrl:"qrDetail/qrDetail/exportXls",importExcelUrl:"qrDetail/qrDetail/importExcel"}}},created:function(){this.resetScreenSize()},methods:{add:function(e){this.qrConfigId=e,this.edit({})},edit:function(e){e.id&&(this.qrConfigId=e.id),this.queryParam={},this.form.resetFields(),this.model=Object.assign({},e),this.model.qrConfigId=this.qrConfigId,this.visible=!0,this.loadData()},getQueryParams:function(){this.ipagination.total=0;var e=Object.assign({},this.queryParam);return e.qrConfigId=this.qrConfigId,e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,this.superQueryParams&&(e["superQueryParams"]=encodeURI(this.superQueryParams),e["superQueryMatchType"]=this.superQueryMatchType),Object(o["f"])(e)},handleAdd:function(){this.$refs.modalForm.add(this.qrConfigId,this.model.sysOrgCode),this.$refs.modalForm.title="新增"},onClose:function(){this.visible=!1,this.form.resetFields(),this.dataSource=[]},resetScreenSize:function(){var e=document.body.clientWidth;this.screenWidth=e<800?e:800}}},c=l,d=(n("f7c3"),n("2877")),u=Object(d["a"])(c,a,i,!1,null,"1cc97a96",null);t["default"]=u.exports},6770:function(e,t,n){"use strict";n("2b27")},"6a29":function(e,t,n){"use strict";n("9ee8")},"6c2d":function(e,t,n){"use strict";n("03c1")},"6c59":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-collapse",{attrs:{bordered:!1,expandIconPosition:"right"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[n("a-collapse-panel",{key:"1",staticStyle:{"background-color":"#fff"},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"title marginTop10"},[n("span",{staticClass:"collapseTitle"},[e._v("\n            基本信息\n          ")])])]},proxy:!0}])},[n("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("类别")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"busiType",label:"类别"}},[n("j-tree-dict",{attrs:{disabled:e.disabled,isHaveChild:!1,field:"code",placeholder:"请选择类别",parentCode:"login_page_type"},on:{change:e.busiTypeChange},model:{value:e.model.busiType,callback:function(t){e.$set(e.model,"busiType",t)},expression:"model.busiType"}})],1)],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("明细类别")]),n("a-col",{attrs:{span:8}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"busiTypeDetail",label:"明细类别"}},[n("j-tree-dict",{ref:"busiTypeDict",attrs:{disabled:e.disabled,isHaveChild:!1,field:"code",placeholder:"请选择业务明细类别",parentCode:e.model.busiType},on:{change:e.busiTypeDetailChange},model:{value:e.model.busiTypeDetail,callback:function(t){e.$set(e.model,"busiTypeDetail",t)},expression:"model.busiTypeDetail"}})],1)],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("标题")]),n("a-col",{attrs:{span:20}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"title",label:"标题"}},[n("a-input",{attrs:{placeholder:"请输入标题"},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1)],1),n("a-col",{staticClass:"minHeight-395",attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("内容\n          ")]),n("a-col",{staticClass:"minHeight-395",attrs:{span:20,"data-prop":"content"}},[n("a-form-model-item",{staticStyle:{width:"100%"},attrs:{labelCol:{span:0},wrapperCol:{span:24},prop:"content",label:"标题"}},[n("join-soft-editor",{staticStyle:{width:"100%"},attrs:{"props-http":e.options.props,headers:e.options.headers,action:e.options.action,options:e.options},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1)],1)],1)],1)],1)],1),e.showFile?n("type-attachment-upload",{ref:"fileupload",attrs:{busiType:e.model.busiType,busiTypeDetail:e.model.busiTypeDetail,busiNo:e.model.id},on:{change:e.getFileList}}):e._e()],1)},i=[],o=n("4165"),s=n("0fea"),r=n("9fbd"),l=n("16ad"),c=n("2b0e"),d=n("9fb0"),u={name:"LoginpageContentModal",components:{JTreeDict:o["default"],TypeAttachmentUpload:r["default"],JoinSoftEditor:l["default"]},data:function(){return{title:"操作",width:1e3,visible:!1,confirmLoading:!1,model:{},url:{addAndEdit:"/loginpage/addAndEdit"},validatorRules:{busiType:[{required:!0,message:"请选择业务类别！"}],busiTypeDetail:[{required:!0,message:"请选择业务明细类别！"}],content:[{required:!0,message:"请输入内容！"}],title:[{required:!0,message:"请输入标题！"}]},showFile:!1,disabled:!1,fileIdList:[],activeKey:["1"],options:{headers:{"X-Access-Token":c["default"].ls.get("Access-Token"),sourceName:c["default"].ls.get(d["A"]),redisIndex:c["default"].ls.get(d["x"])},action:window._CONFIG["domianURL"]+"/control/file/uploadImgNormal?parenPath=control&uploadType=5",customConfig:{lineHeights:["1","1.15","1.6","2","2.5","3"]},props:{res:"result",url:"urlPath"}}}},methods:{getFileList:function(e){if(this.fileIdList=[],e){var t=this;e.forEach((function(e){t.fileIdList.push(e.id)}))}e&&e.length>0?this.disabled=!0:this.disabled=!1},busiTypeChange:function(e){this.$set(this.model,"busiTypeDetail",""),this.$refs.busiTypeDict.treeValue=null,this.$refs.busiTypeDict.treeData=[],this.handleFile()},busiTypeDetailChange:function(e){this.$set(this.model,"busiTypeDetail",e),this.handleFile(),this.$forceUpdate()},handleFile:function(){var e=this;this.model.busiTypeDetail?(this.showFile=!0,this.$nextTick((function(){e.$refs.fileupload.initData()}))):this.showFile=!1},add:function(){this.visible=!0},edit:function(e){this.model=Object.assign({},e),this.disabled=!0,this.handleFile(),this.visible=!0},close:function(){this.model={},this.fileIdList=[],this.disabled=!1,this.showFile=!1,this.confirmLoading=!1,this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(n){if(e.showFile&&!e.$refs.fileupload.checkData())return!1;t.confirmLoading=!0,e.model.fileIdList=e.fileIdList,Object(s["j"])(e.url.addAndEdit,e.model).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.close()}))}}))},handleCancel:function(){this.close()}}},f=u,h=(n("f38d"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"276b8fb4",null);t["default"]=m.exports},"782c":function(e,t,n){"use strict";n("dd34")},"788a":function(e,t,n){"use strict";n("f7e8")},"7e59":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:1500,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭","modal-height":"50vh"},on:{cancel:e.handleCancel,ok:e.handleOk}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("j-form-container",[n("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.validatorRules},slot:"edit"},[n("a-row",{staticClass:"houseInfo"},[e._l(e.model,(function(t,a){return[n("a-col",{key:"label"+a,attrs:{span:2}},[e._v(e._s(a))]),n("a-col",{key:"value"+a,attrs:{span:10}},[n("a-input",{model:{value:e.model[a],callback:function(t){e.$set(e.model,a,t)},expression:"model[key]"}})],1)]}))],2)],1)],1)],1)],1)},i=[],o=n("0fea"),s={name:"HandleModal",data:function(){return{title:"处理数据",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{executeSql:"/income/incomeErrorSolve/handleData"}}},created:function(){},methods:{init:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(!n)return!1;t.confirmLoading=!0,Object(o["j"])(e.url.executeSql,e.model).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}))},handleCancel:function(){this.close()}}},r=s,l=(n("782c"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"25b9b48e",null);t["default"]=c.exports},"801b":function(e,t,n){},8575:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"earningsAllots"},[n("div",{staticClass:"pageHeader cardBox"},[n("div",{staticClass:"leftAction"},[n("a-button",{on:{click:e.back}},[e._v("返回")])],1),n("div",{staticClass:"bodyHeader_title"},[e._v("\n      收益范围\n    ")]),n("div",{staticClass:"rightAction"},[n("div",[n("span",[e._v("维修资金：")]),n("j-multi-select-tag",{attrs:{disabled:"",dictCode:"account_properties","is-business":!0,placeholder:"请选择维修资金"},model:{value:e.model.allotRange,callback:function(t){e.$set(e.model,"allotRange",t)},expression:"model.allotRange"}})],1),n("div",[n("span",[e._v("账户属性：")]),n("j-multi-select-tag",{attrs:{maxTagCount:1,disabled:"",dictCode:"account_type","is-business":!0,placeholder:"请选择账户属性"},model:{value:e.model.accType,callback:function(t){e.$set(e.model,"accType",t)},expression:"model.accType"}})],1)])]),n("div",{staticClass:"cardBox pageBody"},[n("div",{staticClass:"pageStepBox"},e._l(e.stepList,(function(t,a){return n("div",{key:t.value,staticClass:"pageStepItem",class:{active:t.value===e.currentStep}},[n("span",{staticClass:"stepNo",on:{click:function(n){return e.chooseTab(t)}}},[e._v(e._s(a+1))]),n("span",{staticClass:"stepTitle",on:{click:function(n){return e.chooseTab(t)}}},[e._v(e._s(t.title))]),a<e.stepList.length-1?n("span",{staticClass:"nextFlag"},[e._v("--------\x3e")]):e._e()])})),0),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":e.loadText}},[n(e.currentComp,e._b({tag:"component",attrs:{incomeInfo:e.model},on:{ok:e.nextStep,lastStep:e.lastStep}},"component",e.nextBind,!1))],1)])])},i=[],o=n("91ff"),s=n("9dc1"),r=n("86d4"),l=n("339a"),c=n("da79"),d=n("0fea"),u={name:"EarningsAllot",props:{incomeInfo:{type:Object,default:function(){}}},components:{OfficialAllot:c["default"],PreAllot:l["default"],DataCheck:r["default"],AllotsSettingBank:o["default"],AllotSetting:s["default"]},data:function(){return{stepList:[{title:"分配设置",value:0,state:"9",comp:"1"===this.incomeInfo.rangeAttribute?"AllotsSettingBank":"AllotSetting"},{title:"一次校验",value:1,state:"8",comp:"DataCheck",extraParams:{checkFlag:"1"}},{title:"预分配",value:2,state:"7",comp:"PreAllot"},{title:"二次校验",value:3,state:"6",comp:"DataCheck",extraParams:{checkFlag:"2"}},{title:"正式分配",value:4,state:"5",comp:"OfficialAllot"}],currentStep:0,currentComp:"",nextBind:{},model:{},loading:!1,loadText:"正在加载中...",url:{getIncomeInfoById:"/income/income/queryById"}}},mounted:function(){this.model=this.incomeInfo,this.init()},methods:{init:function(){var e=this.model.state;"4"===e||"8"===e?this.currentStep=1:"7"===e?this.currentStep=2:"6"===e?this.currentStep=3:"5"===e&&(this.currentStep=4),this.nextBind=Object.assign(this.nextBind,this.stepList[this.currentStep].extraParams||{}),this.currentComp=this.stepList[this.currentStep].comp},back:function(){this.$emit("back")},nextStep:function(e){var t=this;this.loading=!0,Object(d["e"])(this.url.getIncomeInfoById,{id:this.model.id}).then((function(n){if(n.success){t.model=n.result,t.currentStep++;var a=t.stepList[t.currentStep];t.currentComp=a.comp,t.nextBind=Object.assign(t.nextBind,e||{},a.extraParams||{})}})).finally((function(){t.loading=!1}))},lastStep:function(e){this.nextBind=Object.assign(this.nextBind,e),this.currentStep--,this.currentComp=this.stepList[this.currentStep].comp},chooseTab:function(e){var t=this;Object(d["e"])(this.url.getIncomeInfoById,{id:this.model.id}).then((function(n){if(n.success){t.model=n.result;var a=t.model.state/1;e.state/1>=a&&(t.currentComp="",t.$nextTick((function(){t.currentStep=e.value,t.currentComp=e.comp,t.nextBind=Object.assign(t.nextBind,e.extraParams||{})})))}}))}}},f=u,h=(n("03c7"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"e5c84e02",null);t["default"]=m.exports},"85c3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",[n("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":!0,filterTreeNode:e.filter,dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,placeholder:"请选择主管单位"},model:{value:e.queryParam.sysOrgCode,callback:function(t){e.$set(e.queryParam,"sysOrgCode",t)},expression:"queryParam.sysOrgCode"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("a-form-item",{attrs:{label:"描述"}},[n("a-input",{attrs:{placeholder:"请输入描述"},model:{value:e.queryParam.describe,callback:function(t){e.$set(e.queryParam,"describe",t)},expression:"queryParam.describe"}})],1)],1),n("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchAgencySign}},[e._v("河北电子票获取单位标识")]),"admin"===e.currentUser?n("a-button",{attrs:{type:"primary",icon:"copy"},on:{click:e.copyBatch}},[e._v("复制")]):e._e(),e.selectedRowKeys.length>0?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{key:"1",on:{click:e.batchDel}},[n("a-icon",{attrs:{type:"delete"}}),e._v("\n          删除\n        ")],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" 批量操作\n        "),n("a-icon",{attrs:{type:"down"}})],1)],1):e._e()],1),n("div",[n("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[n("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v(" 已选择 "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),n("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.editDetailItem(a)}}},[n("a-icon",{attrs:{type:"setting"}}),e._v(" 详情配置")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])],1)}},{key:"state",fn:function(t,a){return n("span",{},["0"===t?n("a-tag",{attrs:{color:"pink"}},[e._v("禁用")]):e._e(),"1"===t?n("a-tag",{attrs:{color:"#87d068"}},[e._v("启用")]):e._e()],1)}}])})],1),n("qrConfig-modal",{ref:"modalForm",attrs:{treeData:e.treeData},on:{ok:e.modalFormOk}}),n("a-modal",{attrs:{title:"请选择主管单位",width:500,visible:e.copyVisible,maskClosable:!1,bodyStyle:{height:"270px"},cancelText:"关闭"},on:{ok:e.copyHandleOk,cancel:e.copyHandleCancel}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("span",[e._v("主管单位：")])]),n("a-col",{attrs:{span:18}},[n("j-dict-county-tree-select",{attrs:{replaceFields:{value:"code",children:"children",title:"name"}},model:{value:e.sysOrgCode,callback:function(t){e.sysOrgCode=t},expression:"sysOrgCode"}})],1)],1)],1),n("a-modal",{attrs:{title:"获取单位标识",width:500,visible:e.searchVisible,maskClosable:!1,bodyStyle:{height:"150px"},cancelText:"关闭"},on:{ok:e.searchHandleOk,cancel:e.searchHandleCancel}},[n("a-row",{staticClass:"houseInfo",attrs:{gutter:24}},[n("a-col",{attrs:{span:8}},[n("span",[e._v("单位（机构）代码：")])]),n("a-col",{attrs:{span:16}},[n("a-input",{attrs:{placeholder:"请输入单位（机构）代码"},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}})],1)],1)],1),n("qr-detail-list",{ref:"qrDetailList"})],1)},i=[],o=(n("6eb7"),n("38cf")),s=n("b65a"),r=n("0fea"),l=n("eccd"),c=n("db21"),d=n("2b0e"),u=n("9fb0"),f=n("63bf"),h={name:"QrConfigList",mixins:[s["a"]],components:{QrConfigModal:o["default"],JDDictSelectTag:l["default"],JDictCountyTreeSelect:c["default"],QrDetailList:f["default"]},data:function(){return{description:"电子票据配置项表管理页面",columns:[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,n){return parseInt(n)+1}},{title:"主管单位",align:"center",dataIndex:"sysOrgCode_dictText"},{title:"类型",align:"center",dataIndex:"type_dictText"},{title:"状态",align:"center",dataIndex:"state",scopedSlots:{customRender:"state"}},{title:"启用时间",align:"center",dataIndex:"startDate"},{title:"描述",align:"center",dataIndex:"describe"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/qrConfig/qrConfig/list",delete:"/qrConfig/qrConfig/delete",deleteBatch:"/qrConfig/qrConfig/deleteBatch",exportXlsUrl:"qrConfig/qrConfig/exportXls",importExcelUrl:"qrConfig/qrConfig/importExcel",tenantListByCode:"/tenant/sysTenantInfo/tenantListByCode",copyBatch:"/qrConfig/qrConfig/copyBatch",searchAgencySign:"/qrConfig/qrConfig/searchAgencySign"},treeData:[],copyVisible:!1,searchVisible:!1,unit:"",sysOrgCode:"",currentUser:""}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){this.getSysOrgTreeData(),this.currentUser=d["default"].ls.get(u["J"]).username},methods:{getSysOrgTreeData:function(){var e=this;Object(r["e"])(this.url.tenantListByCode).then((function(t){t.success&&(e.treeData=t.result)}))},filter:function(e,t){return t.data.props.title.includes(e)},copyBatch:function(){if(0===this.selectedRowKeys.length)return this.$message.warning("请选择要复制的规则");this.copyVisible=!0},copyHandleCancel:function(){this.sysOrgCode="",this.selectedRowKeys=[],this.selectionRows=[],this.copyVisible=!1},copyHandleOk:function(){var e=this;if(void 0!==this.sysOrgCode&&""!==this.sysOrgCode){var t={sysOrgCode:this.sysOrgCode,ids:this.selectedRowKeys.join(",")};this.loading=!0,Object(r["e"])(this.url.copyBatch,t).then((function(t){t.success?(e.$message.success(t.message),e.loadData(),e.copyHandleCancel(),e.loading=!1):(e.$message.error(t.message),e.loading=!1)}))}else this.$message.error("请选择主管单位")},editDetailItem:function(e){this.$refs.qrDetailList.edit(e)},searchAgencySign:function(){this.unit="",this.searchVisible=!0},searchHandleOk:function(){var e=this;if(void 0!==this.unit&&""!==this.unit){var t={unit:this.unit};Object(r["e"])(this.url.searchAgencySign,t).then((function(t){e.$confirm({title:"单位标识信息",content:t.message,okText:"确定",cancelText:"取消"})}))}else this.$message.error("请输入单位（机构）代码")},searchHandleCancel:function(){this.unit="",this.searchVisible=!1}}},m=h,p=(n("2cba"),n("2aee"),n("2877")),g=Object(p["a"])(m,a,i,!1,null,"49c84436",null);t["default"]=g.exports},"86d4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"firstCheck"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"firstCheck_body"},[0===e.checkStep?a("div",{staticClass:"check_config"},[a("a-space",[a("span",[e._v("校验配置：")]),a("a-select",{staticClass:"check_select",attrs:{placeholder:"请选择校验配置"},on:{change:e.getLiteFlowModelById},model:{value:e.currentCheckOption,callback:function(t){e.currentCheckOption=t},expression:"currentCheckOption"}},e._l(e.checkOptions,(function(t){return a("a-select-option",{key:t.id,attrs:{typeObj:t}},[a("span",[e._v("\n              "+e._s(t.name)+"\n            ")])])})),1),a("a-button",{on:{click:e.backStep}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:e.startCheck}},[e._v("开始校验")])],1),a("div",{staticClass:"superFlowBox"},[e.flowNodeModel.id?a("super-flow",{ref:"superFlow",staticClass:"super_flow",attrs:{"relation-mark":"id","start-mark":"startId","end-mark":"endId","node-list":e.nodeList,"link-list":e.linkList,origin:[0,0],"node-menu":e.nodeMenuList,"link-menu":[],"enter-intercept":function(){return!1},"output-intercept":function(){return!1}},scopedSlots:e._u([{key:"node",fn:function(t){var n=t.meta;t.node;return[a("div",{class:"flow-node flow-node-"+n.prop},[a("header",[e._v("\n                "+e._s(n.name)+"\n              ")]),a("section",[e._v("\n                "+e._s(n.desc)+"\n              ")])])]}}],null,!1,2346632753)}):e._e()],1)],1):1===e.checkStep?a("div",{staticClass:"check_process"},[a("a-progress",{staticClass:"progress",attrs:{"stroke-color":{"0%":"#1e95ff","100%":"#36bdff"},type:"circle",width:160,percent:e.checkPercent},scopedSlots:e._u([{key:"format",fn:function(t,n){return[[a("div",{staticClass:"percent"},[e._v(e._s(t)+"%")]),a("div",{staticClass:"percentText"},t<100?[e._v("校验中...")]:[e._v("校验完成")])]]}}])}),a("div",{staticClass:"check_statistics"})],1):a("div",{staticClass:"check_fail"},[a("img",{staticClass:"fail_icon",attrs:{src:e.failIcon}}),2===e.checkStep?a("span",{staticClass:"fail_title"},[e._v("校验不通过")]):a("span",{staticClass:"fail_title"},[e._v("校验通过")]),a("a-card",{ref:"failListBox",staticClass:"fail_listBox",attrs:{size:"small","body-style":{height:"calc(100% - 38px)",overflow:"auto",position:"relative"}},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"cardTitle"},[a("span",[e._v("校验问题")]),e.failList.filter((function(e){return"0"!==e.state})).length>0?a("a-badge",{attrs:{size:"small",count:e.failList.filter((function(e){return"0"!==e.state})).length}}):e._e()],1)]},proxy:!0},{key:"extra",fn:function(){},proxy:!0}])},[a("a-list",{staticClass:"fail_list",attrs:{"item-layout":"horizontal","data-source":e.failList},scopedSlots:e._u([{key:"renderItem",fn:function(t,i){return[a("a-list-item",{scopedSlots:e._u([{key:"actions",fn:function(){return[["0"===t.state?a("a-badge",{attrs:{status:"success",text:"正常"}}):e.disabled?e._e():a("a-dropdown",{attrs:{getPopupContainer:e.dropPopupFun},scopedSlots:e._u([{key:"overlay",fn:function(){return[a("a-menu",[a("a-menu-item",{key:"1",on:{click:function(n){return e.toRepair(t)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v(" 修正")],1)],1)]},proxy:!0}],null,!0)},[a("a-button",{staticClass:"goToFail",attrs:{type:"primary"}},[e._v("去处理\n                      "),a("a-icon",{attrs:{type:"down"}})],1)],1)]]},proxy:!0}],null,!0)},[a("a-list-item-meta",{scopedSlots:e._u([{key:"description",fn:function(){return[a("span",[e._v("创建用户："+e._s(t.createBy)+" 创建时间："+e._s(t.createTime))])]},proxy:!0},{key:"title",fn:function(){return[a("div",{staticClass:"fail_list_title"},[a("a-space",[a("span",[e._v(e._s(t.sqlText))]),"2"===t.state?a("a-badge",{attrs:{status:"error",text:"数据异常"}}):"3"===t.state?a("a-badge",{attrs:{status:"error",text:"sql错误"}}):e._e()],1)],1)]},proxy:!0},{key:"avatar",fn:function(){return["0"===t.state?a("img",{staticClass:"fail_list_icon",attrs:{src:n("f15c"),alt:"success"}}):a("img",{staticClass:"fail_list_icon",attrs:{src:n("972c5"),alt:"fail"}})]},proxy:!0}],null,!0)})],1)]}}])})],1)],1)]),2===e.checkStep?a("div",{staticClass:"firstCheck_footer"},[a("a-button",{on:{click:function(t){return e.backStep(!1)}}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary"},on:{click:e.checkAgain}},[e._v("重新校验")])],1):e._e(),a("vxe-modal",{ref:"paramModal",attrs:{"show-footer":"","destroy-on-close":"",loading:e.paramModalLoading,title:"参数维护",width:600},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{key:"back",attrs:{icon:"check",type:"primary"},on:{click:function(t){return e.$refs.paramModal.close()}}},[e._v("确定")])]},proxy:!0}])},[a("a-row",{staticClass:"houseInfo"},[a("a-col",{attrs:{span:6}},[e._v("sql预览")]),a("a-col",{attrs:{span:18}},[a("a-textarea",{staticClass:"width100",attrs:{readOnly:""},model:{value:e.editNode.sqlcmd,callback:function(t){e.$set(e.editNode,"sqlcmd",t)},expression:"editNode.sqlcmd"}})],1),e._l(e.editNode.paramList,(function(t,n){return[a("a-col",{key:"label"+n,attrs:{span:6}},[e._v(e._s(t.ikey))]),a("a-col",{key:"value"+n,attrs:{span:18}},[a("a-input",{staticClass:"width100",attrs:{placeholder:"请输入"+t.ikey},model:{value:t.ivalue,callback:function(n){e.$set(t,"ivalue",n)},expression:"item.ivalue"}})],1)]}))],2)],1),a("correction-modal",{ref:"correctionModal",on:{close:e.repairModalClose}})],1)},i=[],o=n("0fea"),s=n("0765"),r=n.n(s),l=n("c62b"),c=n("3ed7"),d=n("90da");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var m={name:"DataCheck",components:{CorrectionModal:d["default"],SuperFlow:l["default"]},props:{incomeInfo:{type:Object,default:function(){}},checkFlag:{type:String,default:"1"}},computed:{disabled:function(){return"1"===this.checkFlag&&"8"!==this.incomeInfo.state||"2"===this.checkFlag&&"6"!==this.incomeInfo.state}},data:function(){var e=this;return{checkStep:0,checkPercent:0,checkRule:"",failList:[],checkOptions:[],currentCheckOption:"",url:{getCheckOption:"/liteflow/liteflowModel/queryList",getLiteFlowModelById:"/liteflow/liteflowModel/queryById",getDataSourceById:"/joinsoft/joinDataSource/queryById",queryModelByIncomeIdAndType:"/income/incomeFlow/queryModelByIncomeIdAndType",checkByIncome:"/income/income/checkByIncome",analyse:"/joinsoft/joinDataSource/getParamsAnalysis",checkList:"/income/incomeCheckResult/list"},failIcon:r.a,confirmLoading:!1,nodeMenuList:[[{label:"添加参数",selected:function(t,n){e.initParamsModal(t)},hidden:function(e){return!e.meta.id}}]],flowNodeModel:{},nodeList:[],linkList:[],showParamList:[],editNode:{},paramModalLoading:!1,loading:!1}},mounted:function(){this.disabled?this.initDetail():this.initCheckOption()},methods:{initDetail:function(){this.checkStep="2",this.getCheckList()},initCheckOption:function(){var e=this;this.loading=!0,Object(o["e"])(this.url.getCheckOption).then((function(t){t.success&&(e.checkOptions=t.result,e.checkOptions&&0!==e.checkOptions.length&&Object(o["e"])(e.url.queryModelByIncomeIdAndType,{incomeId:e.incomeInfo.id,type:e.checkFlag}).then((function(t){t.result&&(e.currentCheckOption=t.result.id?t.result.id:e.checkOptions[0].id,e.getLiteFlowModelById(e.currentCheckOption))})).finally((function(){e.loading=!1})))}))},getLiteFlowModelById:function(e){var t=this;this.loading=!0,this.confirmLoading=!0,Object(o["e"])(this.url.getLiteFlowModelById,{id:e}).then((function(e){if(e.success){t.flowNodeModel=e.result,t.nodeList=e.result.nodeList?JSON.parse(e.result.nodeList):[],t.linkList=e.result.linkList?JSON.parse(e.result.linkList):[],t.confirmLoading=!1;var n=[];t.showParamList=[];var a,i=u(t.nodeList);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.meta.id&&n.push(t.doAnalyseData(o.meta))}}catch(s){i.e(s)}finally{i.f()}Promise.all(n).then((function(e){e.forEach((function(e){e.paramList.length>0&&t.showParamList.push(e)}))})).catch((function(e){})).finally((function(){t.confirmLoading=!1}))}else t.$message.warning(e.message),t.confirmLoading=!1})).finally((function(){t.loading=!1}))},doAnalyseData:function(e){var t=this;return new Promise((function(n,a){Object(o["e"])(t.url.getDataSourceById,{id:e.id}).then((function(i){if(i.success){var s={};e=i.result,s.sql=i.result.sqlcmd,Object(o["j"])(t.url.analyse,s).then((function(t){if(t.success){var a,i=[],o=u(t.result);try{for(o.s();!(a=o.n()).done;){var s=a.value,r={};r.ikey=s.ikey,r.ivalue=s.ivalue,i.push(r)}}catch(l){o.e(l)}finally{o.f()}e.paramList=i,n(e)}}))}else a(new Error(i.message))}))}))},initParamsModal:function(e){var t=this.showParamList.find((function(t){return t.id===e.meta.id}));t?(this.editNode=t,this.$refs.paramModal.open()):this.$message.warning("当前节点无可配置参数")},startCheck:function(){var e=this;if(!this.currentCheckOption)return this.$message.warning("请选择校验配置！");var t,n=this,a=[],i=u(n.showParamList);try{for(i.s();!(t=i.n()).done;){var s,r=t.value,l=u(r.paramList);try{for(l.s();!(s=l.n()).done;){var d=s.value;d.ivalue||a.push(d.ikey)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){i.e(p)}finally{i.f()}if(a.join(",")){var f="请填写参数"+a.join(",");return n.$message.warning(f)}n.checkStep=1,n.checkPercent=0;var h=setInterval((function(){n.checkPercent+=Object(c["k"])(1,5),n.checkPercent>=95&&window.clearInterval(h)}),200),m=JSON.parse(JSON.stringify(this.incomeInfo));m.modelId=n.currentCheckOption,m.dataSourceList=n.showParamList,m.type=n.checkFlag,Object(o["j"])(this.url.checkByIncome,m).then((function(t){t.success?e.getCheckList().then((function(a){n.$message.success(t.message),a?(n.checkPercent=100,setTimeout((function(){e.$emit("ok")}),200)):e.checkStep=2})):n.$message.warning(t.message)}))},getCheckList:function(){var e=this;return this.failList=[],new Promise((function(t,n){Object(o["e"])(e.url.checkList,{incomeId:e.incomeInfo.id,type:e.checkFlag}).then((function(n){n.success&&n.result?(e.failList=n.result.records,t(0===n.result.total||0===n.result.records.filter((function(e){return"0"!==e.state})).length)):t(!0)}))}))},toRepair:function(e){this.$refs.correctionModal.init(e)},repairModalClose:function(){},backStep:function(e){!1===e?this.checkStep=0:this.$emit("lastStep")},checkAgain:function(){this.startCheck()},reset:function(){this.checkStep=0,this.initCheckOption()},dropPopupFun:function(){return this.$refs.failListBox.$el.querySelector(".ant-card-body")}}},p=m,g=(n("aac4"),n("2877")),y=Object(g["a"])(p,a,i,!1,null,"4e63d9dd",null);t["default"]=y.exports},"8e63":function(e,t,n){},"8e81":function(e,t,n){},"90da":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("j-modal",{attrs:{title:"错误数据修正",width:1200,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",footer:null,"modal-height":"80vh"},on:{cancel:e.handleCancel}},[e.resultModel?n("a-textarea",{staticStyle:{height:"200px"},attrs:{disabled:"",type:"text"},model:{value:e.resultModel.sqlText,callback:function(t){e.$set(e.resultModel,"sqlText",t)},expression:"resultModel.sqlText"}}):e._e(),e.paramList.length>0?n("table",{staticClass:"owneTable",staticStyle:{"margin-bottom":"15px"}},[n("tr",{staticClass:"th"},[n("td",{staticClass:"tdOne"},[e._v("参数名称")]),n("td",{staticClass:"tdtwo"},[e._v("参数值")])]),e._l(e.paramList,(function(t,a){return n("tr",{key:"paramsTr"+a},[n("td",{staticClass:"tdOne"},[e._v(e._s(t.paramName))]),n("td",{staticClass:"tdtwo"},[e._v(e._s(t.paramValue))])])}))],2):e._e(),n("div",[n("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":null},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var a=t.row;return[n("a",{on:{click:function(t){return e.handleMap(a)}}},[n("a-icon",{attrs:{type:"file-done"}}),e._v(" 处理")],1)]}}])})],1)],1),n("handle-modal",{ref:"handleModal",on:{ok:e.handleOk}})],1)},i=[],o=n("0fea"),s=n("0a5e"),r=n("7e59");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var u={name:"CorrectionModal",components:{HandleModal:r["default"]},mixins:[s["a"]],data:function(){return{visible:!1,url:{list:"/income/incomeErrorList/list",queryParamByResult:"/income/incomeFlowParam/queryParamByResult"},columns:[],confirmLoading:!1,resultModel:{},paramList:[],handleRow:{}}},created:function(){},methods:{loadData:function(e){var t=this;return Object(o["e"])(this.url.list,Object.assign(e,this.queryParam)).then((function(e){if(t.columns=[],e.result.records&&e.result.records.length>0){var n,a=e.result.records[0].errorInfo.columnsArray,i=l(a);try{for(i.s();!(n=i.n()).done;){var o=n.value,s={title:o.dataIndex,headerAlign:"center",align:"left",field:o.dataIndex,type:"input"};t.columns.push(s)}}catch(c){i.e(c)}finally{i.f()}var r={title:"操作",field:"action",align:"center",fixed:"right",width:"120px",slot:!0};t.columns.push(r),t.refreshColumn()}return e.result}))},handleCancel:function(){this.columns=[],this.visible=!1,this.$emit("close")},init:function(e){var t=this;this.visible=!0,Object(o["j"])(this.url.queryParamByResult,e).then((function(e){e.success&&(t.resultModel=e.result.checkResult,t.paramList=e.result.param)}));var n={incomeResultId:e.id};this.$nextTick((function(){t.$refs.table.localParams=n,t.$refs.table.loadData()}))},handleMap:function(e){this.handleRow=e,this.$refs.handleModal.init(e)},handleOk:function(){this.handleRow.checkState=1}}},f=u,h=(n("6a29"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"3932eee5",null);t["default"]=m.exports},9138:function(e,t,n){},"91ff":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AllotsSettingBank"},[a("div",{staticClass:"settingHeader"},[a("div",{staticClass:"headerText"},[e._v("共计"),a("span",{staticClass:"bankNum conFont"},[e._v(e._s(e.bankList?e.bankList.length:0))]),e._v("家银行")]),a("div",[a("span",[e._v("全选 ")]),a("a-checkbox",{attrs:{indeterminate:e.indeterminate,disabled:"9"!==e.incomeInfo.state},on:{change:e.onCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}})],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"settingBodyBox",attrs:{"element-loading-text":e.loadText}},[a("div",{staticClass:"settingBody"},[a("a-checkbox-group",{staticClass:"bankCardList",attrs:{disabled:"9"!==e.incomeInfo.state},on:{change:e.onChange},model:{value:e.selectedBank,callback:function(t){e.selectedBank=t},expression:"selectedBank"}},e._l(e.bankList,(function(t){return a("div",{key:t.id,staticClass:"bankCard"},[a("a-checkbox",{staticClass:"bankCardCheckbox",attrs:{value:t.id,indeterminate:t.indeterminate},on:{change:function(n){return e.chooseBank(t,n)}}}),a("div",{staticClass:"bankCardHeader"},[a("div",{staticClass:"cardHeaderIconBox"},[t.filePath?a("svg-icon",{attrs:{size:46,url:t.filePath}}):a("img",{staticClass:"emptyIcon",attrs:{src:n("49c6"),alt:"银联"}})],1),a("span",{staticClass:"cardTitle"},[e._v(e._s(t.name))])]),a("div",{staticClass:"bankCardContent"},[a("div",[a("span",{staticClass:"contentLabel"},[e._v("户数")]),a("span",{staticClass:"contentValue conFont"},[e._v(e._s(t.bankAccNum))])])]),a("a-button",{staticClass:"bankCardFooterButton",attrs:{block:""},on:{click:function(n){return e.allotFun(t)}}},[e._v(e._s(["6","7","8","9","0"].includes(e.incomeInfo.state)?"详情":"分配")+"\n\t\t\t\t\t\t")])],1)})),0)],1)]),a("div",{staticClass:"settingFooter"},[a("a-space",{attrs:{size:20}},[a("div",[e._v("已选户数："),a("span",{staticClass:"selectedNum conFont"},[e._v(e._s(e.footerData.selected))])]),a("div",[e._v("未选户数："),a("span",{staticClass:"notChooseNum conFont"},[e._v(e._s(e.footerData.total-e.footerData.selected))])])]),"9"===e.incomeInfo.state?a("a-space",[a("a-button",{on:{click:e.reset}},[e._v("重置")]),a("a-button",{attrs:{type:"primary",loading:e.nextBtnLoad},on:{click:e.nextStep}},[e._v("下一步")])],1):e._e()],1),a("vxe-modal",{attrs:{"show-footer":"9"===e.incomeInfo.state,title:"分配设置",width:"80vw",height:"80vh",position:{top:"center",left:"center"},transfer:"","destroy-on-close":""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("allot-set-table",{ref:"allotSetTable",staticStyle:{height:"calc(100% - 1px)"},attrs:{"income-info":e.incomeInfo,selectedRows:e.selectedRows,query:e.tableQuery,"is-table-load":!0,showPagination:"9"===e.incomeInfo.state,"if-init":"9"===e.incomeInfo.state},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}})],1)],1)},i=[],o=n("4080"),s=n("0fea"),r=n("f337"),l={name:"AllotsSettingBank",props:{incomeInfo:{type:Object,default:function(){}}},components:{SvgIcon:r["default"],AllotSetTable:o["default"]},data:function(){return{bankList:[],currentBank:{},selectedBank:[],indeterminate:!1,checkAll:!1,visible:!1,selectedRows:[],tableQuery:{allotRange:this.incomeInfo.allotRange,accType:this.incomeInfo.accType,settleEndDate:this.incomeInfo.baseDate?this.incomeInfo.baseDate+" 00:00:00":this.incomeInfo.settleEndDate},defaultSelected:[],loading:!1,loadText:"加载中，请稍后...",nextBtnLoad:!1,url:{getBankAndAccNum:"/income/incomeRangeList/getBankAndAccNum",getSelectedByBankCode:"/income/incomeRangeList/bankRangeInitByIncomeId",batchSaveByBankCode:"/income/incomeRangeList/batchSaveByBankCode"}}},computed:{bankIdArr:function(){return this.bankList.map((function(e){return e.id}))},footerData:function(){var e=this,t=0,n=0;return this.bankList.forEach((function(a){t+=Number(a.bankAccNum),e.selectedBank.includes(a.id)&&(n+=a.bankAccNum?a.bankAccNum:0)})),{total:t,selected:n}}},mounted:function(){this.getBankList()},methods:{getBankList:function(){var e=this;this.loadText="加载中，请稍后...",this.loading=!0,Object(s["e"])(this.url.getBankAndAccNum,{baseType:this.incomeInfo.accType,attr:this.incomeInfo.allotRange,incomeId:this.incomeInfo.id}).then((function(t){t.success&&(e.bankList=t.result,"9"!==e.incomeInfo.state&&Object(s["e"])(e.url.getSelectedByBankCode,{incomeId:e.incomeInfo.id}).then((function(n){n.success&&n.result?n.result.forEach((function(t){var n=e.bankList.findIndex((function(e){return e.code===t}));-1!==n&&e.selectedBank.push(e.bankList[n].id)})):e.$message.warning(t.message)})).finally((function(){e.loading=!1}))),e.loading=!1})).catch((function(){e.loading=!1}))},nextStep:function(){var e=this;if(!["9","8"].includes(this.incomeInfo.state))return this.$emit("ok",{selected:[]});if(0!==this.selectedBank.length){var t={baseType:this.incomeInfo.accType,attr:this.incomeInfo.allotRange,incomeId:this.incomeInfo.id,bankCode:this.bankList.filter((function(t){return e.selectedBank.includes(t.id)})).map((function(e){return e.code})).join(",")};this.nextBtnLoad=!0,Object(s["e"])(this.url.batchSaveByBankCode,t).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok",{selected:[]})):e.$message.warning(t.message)})).finally((function(){e.nextBtnLoad=!1}))}else this.$message.warning("请选择银行！")},reset:function(){this.selectedBank=[],this.bankList.forEach((function(e){e.selected=[],e.indeterminate=!1}))},allotFun:function(e){var t=this;this.currentBank=e,this.tableQuery.bankCode=e.code,this.selectedRows=JSON.parse(JSON.stringify(e.selected||[])),this.visible=!0,this.$nextTick((function(){t.$refs.allotSetTable.tableData=e.selected}))},chooseBank:function(e,t){e.indeterminate=!1},onCheckAllChange:function(e){Object.assign(this,{selectedBank:e.target.checked?this.bankIdArr:[],indeterminate:!1,checkAll:e.target.checked})},onChange:function(e){this.indeterminate=!!e.length&&e.length<this.bankIdArr.length,this.checkAll=e.length===this.bankIdArr.length}}},c=l,d=(n("cd50"),n("2877")),u=Object(d["a"])(c,a,i,!1,null,"403ffb88",null);t["default"]=u.exports},"95e3":function(e,t,n){},"9a5b":function(e,t,n){},"9aca":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("j-modal",{attrs:{title:"校验记录",width:1200,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",footer:null,"modal-height":"80vh"},on:{cancel:e.handleCancel}},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},transfer:"",toolbar:!1,bordered:"",stripe:!0,checkbox:!1,expand:!1,data:e.loadData,tableColumn:e.columns,ifInitQuery:!1,"table-height":"auto"},scopedSlots:e._u([{key:"state",fn:function(e){var t=e.text;e.row;return[n("a-badge","0"===t?{attrs:{status:"success",text:"正常"}}:"2"===t?{attrs:{status:"error",text:"数据异常"}}:"3"===t?{attrs:{status:"error",text:"sql错误"}}:{attrs:{status:"default",text:"已处理"}})]}},{key:"type",fn:function(t){var a=t.text;t.row;return["1"===a?n("span",[e._v("分配前")]):"2"===a?n("span",[e._v("分配后")]):e._e()]}},{key:"action",fn:function(t){t.text;var a=t.row;return["2"===a.state?n("a",{on:{click:function(t){return e.toRepair(a)}}},[n("a-icon",{attrs:{type:"file-done"}}),e._v(" 修正")],1):e._e()]}}])})],1),n("repair-modal",{ref:"repairModal"}),n("correction-modal",{ref:"correctionModal"})],1)},i=[],o=n("0fea"),s=n("0a5e"),r=n("f2ff"),l=n("90da"),c={name:"CheckResultModal",components:{RepairModal:r["default"],CorrectionModal:l["default"]},mixins:[s["a"]],data:function(){var e=this;return{visible:!1,url:{list:"/income/incomeCheckResult/list"},columns:[{title:"SQL",headerAlign:"center",align:"left",field:"sqlText",type:"input"},{title:"数据验证",align:"center",field:"type",width:"120px",type:"input",slot:!0},{title:"状态",align:"center",field:"state",width:"120px",type:"input",slot:!0},{title:"操作",field:"action",align:"center",fixed:"right",width:"120px",slot:!0}],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},confirmLoading:!1}},created:function(){},methods:{handleCancel:function(){this.visible=!1},init:function(e){var t=this;this.visible=!0;var n={incomeId:e};this.$nextTick((function(){t.$refs.table.localParams=n,t.$refs.table.loadData()}))},toRepair:function(e){this.$refs.correctionModal.init(e)}}},d=c,u=n("2877"),f=Object(u["a"])(d,a,i,!1,null,"8482d458",null);t["default"]=f.exports},"9dc1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"allotSetting"},[n("div",{staticClass:"allotSettingBody"},[n("div",{staticClass:"allotRegion"},[n("div",{staticClass:"allotRegionSearch"},[n("a-input-search",{attrs:{placeholder:"请输入查询小区"},on:{search:function(t){return e.initTree("search")}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}}),n("a-button",{attrs:{icon:"reload"},on:{click:e.resetInputSearch}})],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"allotRegionTreeBox"},[n("a-tree",{staticClass:"allotRegionTree",attrs:{blockNode:!0,checkable:!1,selectedKeys:e.selectedTreeKeys,treeData:e.treeData,autoExpandParent:e.autoExpandParent,expandedKeys:e.iExpandedKeys},on:{select:e.onSelect,check:e.treeCheck,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var a=t.title,i=t.selectedAccount;return[n("div",{staticClass:"treeNodeTitle"},[n("span",[e._v(" "+e._s(a))]),"9"===e.incomeInfo.state?n("span",[e._v("已选 "),n("a",[e._v(e._s((i||[]).length))])]):e._e()])]}}]),model:{value:e.treeCheckedKeys,callback:function(t){e.treeCheckedKeys=t},expression:"treeCheckedKeys"}})],1)]),n("div",{staticClass:"allotAccountList"},[n("div",{staticClass:"tableBox"},[n("allot-set-table",{ref:"table",attrs:{"income-info":e.incomeInfo,"is-detail":"9"!==e.incomeInfo.state,"if-init":!0,query:e.tableParams,"selected-rows":e.selectRows},on:{select:e.tableSelect,"update:selectedRows":function(t){e.selectRows=t},"update:selected-rows":function(t){e.selectRows=t}},scopedSlots:e._u([{key:"summary",fn:function(t){var a=t.total;t.selected;return[n("a-alert",{scopedSlots:e._u([{key:"message",fn:function(){return[n("div",{staticClass:"alertBody"},[n("div",[n("span",[e._v("总户数："+e._s(a))]),n("a-divider",{attrs:{type:"vertical"}}),e.selectedTreeInfo.id?n("span",[e._v("已选择："+e._s(e.accountListByRegionId[e.selectedTreeInfo.id]?e.accountListByRegionId[e.selectedTreeInfo.id].length:0))]):n("span",[e._v("已选择："+e._s(e.selectRows.length))]),n("a-divider",{attrs:{type:"vertical"}}),e.selectedTreeInfo.id?n("span",[e._v("未选择："+e._s(a-(e.accountListByRegionId[e.selectedTreeInfo.id]?e.accountListByRegionId[e.selectedTreeInfo.id].length:0)))]):n("span",[e._v("未选择："+e._s(a-(e.selectRows||[]).length))])],1),n("div",["9"===e.incomeInfo.state?n("span",[n("a",{staticClass:"deselectAll",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deselectAll.apply(null,arguments)}}},[e._v("取消全选")])]):e._e()])])]},proxy:!0}],null,!0)})]}}])})],1)])]),n("div",{staticClass:"allotAccountFooter"},[n("div",{staticClass:"selectedNum"},[e._v("全部已选总户数 "),n("span",{staticClass:"conFont"},[e._v(e._s(e.selectRows.length))])]),n("a-space",[n("a-button",{on:{click:e.showSelectedAll}},[e._v("查看全部已选")]),"9"===e.incomeInfo.state?n("a-button",{attrs:{loading:e.nextBtnLoad,type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]):e._e()],1)],1),n("vxe-modal",{attrs:{height:"80vh",width:"80vw",title:"全部已选账户"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("allot-set-table",{ref:"allSelected",attrs:{"income-info":e.incomeInfo,height:"auto","if-init":!1,"show-check-box":!1,showPagination:!1}})],1)],1)},i=[],o=n("4080"),s=n("0fea"),r=n("c695"),l=n.n(r);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var f={name:"AllotSetting",props:{incomeInfo:{type:Object,default:function(){}}},components:{AllotSetTable:o["default"]},data:function(){return{treeLoading:!1,nextBtnLoad:!1,treeCheckedKeys:[],treeCheckedNodes:[],selectedTreeKeys:[],selectedTreeInfo:{},iExpandedKeys:[],autoExpandParent:!0,selectRows:[],visible:!1,treeData:[],queryParams:{name:""},tableParams:{id:null},treeArr:[],accountListByRegionId:{},otherAccountList:[],url:{queryRegionTreeList:"/base/rtRegion/queryRegionTreeList",batchSave:"/income/incomeRangeList/batchSave",getSelected:"/income/incomeRangeList/rangeInitByIncomeId"}}},created:function(){this.tableParams.allotRange=this.incomeInfo.allotRange,this.tableParams.accType=this.incomeInfo.accType,this.tableParams.settleEndDate=this.incomeInfo.settleEndDate,this.initTree(),"9"!==this.incomeInfo.state&&this.initSelected()},methods:{showSelectedAll:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.allSelected.tableData=e.selectRows}))},initSelected:function(){var e=this;Object(s["e"])(this.url.getSelected,{incomeId:this.incomeInfo.id,size:9999,current:1}).then((function(t){t.success&&t.result?e.selectRows=t.result.records:e.$message.warning(t.message)})).finally((function(){e.loading=!1}))},initTree:function(e){var t=this,n=this;n.treeLoading=!0,n.treeData=[],this.queryParams.state="0",Object(s["e"])(this.url.queryRegionTreeList,this.queryParams).then((function(a){if(a){var i,o=c(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,r=s;"4"!==t.incomeInfo.accType?(n.treeData.push(r),e&&n.setThisExpandedKeys(r,e)):(delete r.children,n.treeData.push(r))}}catch(d){o.e(d)}finally{o.f()}t.treeArr=l.a.toTreeArray(t.treeData),t.treeArr.forEach((function(e){t.$set(e,"selectedAccount",t.accountListByRegionId[e.id]||[])}))}n.treeLoading=!1}))},resetInputSearch:function(){this.queryParams.name="",this.initTree()},setThisExpandedKeys:function(e,t){if(e.children&&e.children.length>0&&(this.iExpandedKeys.push(e.key),"search"==t))for(var n=0;n<e.children.length;n++)this.setThisExpandedKeys(e.children[n])},onSelect:function(e,t){this.selectedTreeKeys=e,this.selectedTreeInfo=0===e.length?{}:t.node.dataRef,this.tableParams.id=this.selectedTreeInfo.id,this.$refs.table.getTableData()},treeCheck:function(e,t){t.checked,t.checkedNodes,t.node,t.event},onExpand:function(e){this.iExpandedKeys=e,this.autoExpandParent=!1},tableSelect:function(e){var t=e.rows,n=e.checked,a=this;t.forEach((function(e){if(a.setAccountByReginId(e,n),!n){var t=a.selectRows.findIndex((function(t){return t.id===e.id}));-1!==t&&a.selectRows.splice(t,1)}})),a.treeArr.forEach((function(e){a.$set(e,"selectedAccount",a.accountListByRegionId[e.id]||[]);var t=a.treeCheckedKeys.findIndex((function(t){return t===e.id}));e.parentId||e.pid||(e.selectedAccount&&e.selectedAccount.length>0&&-1===t?a.treeCheckedKeys.push(e.id):e.selectedAccount&&0!==e.selectedAccount.length||-1===t||a.treeCheckedKeys.splice(t,1))}))},setAccountByReginId:function(e,t){var n=this,a=[];if("4"===this.tableParams.accType)a=[e.id,"all"];else{if(!e.regionId||!e.bldId||!e.cellId){if(t)this.otherAccountList.push(e);else{var i=this.otherAccountList.findIndex((function(t){return t.id===e.id}));i>-1&&this.otherAccountList.splice(i)}return}a=[e.regionId,e.bldId,e.cellId,"all"]}a.forEach((function(a){var i=n.accountListByRegionId[a]||[],o=i.findIndex((function(t){return t.id===e.id}));!t||-1!==o&&void 0!==o?t||-1===o||i.splice(o,1):i.push(e),n.accountListByRegionId[a]=i}))},nextStep:function(){var e=this;if(!["9","8"].includes(this.incomeInfo.state))return this.$emit("ok",{selected:[]});var t=[];this.treeCheckedKeys.forEach((function(n){var a=e.treeArr.find((function(e){return e.id===n}));a&&(a.selectedAccount||[]).forEach((function(e){t.find((function(t){return t.id===e.id}))||t.push(e)}))})),this.otherAccountList.forEach((function(e){t.find((function(t){return t.id===e.id}))||t.push(e)}));var n=t.some((function(e){return["3","4"].includes(e.accState)}));if(n)this.$message.warning("当前选择的数据中存在待全额退款或待销户的数据，请重新选择！");else{var a={incomeId:this.incomeInfo.id,regionAccVoList:t};this.nextBtnLoad=!0,Object(s["j"])(this.url.batchSave,a).then((function(n){n.success?(e.$message.success(n.message),e.$emit("ok",{selected:t})):e.$message.warning(n.message)})).finally((function(){e.nextBtnLoad=!1}))}},deselectAll:function(){var e=this,t=[];return e.selectedTreeInfo.id?(t=e.accountListByRegionId[e.selectedTreeInfo.id],e.$set(this.accountListByRegionId,e.selectedTreeInfo.id,[])):(t=JSON.parse(JSON.stringify(e.selectRows.map((function(e){return{id:e.id,regionId:e.regionId,bldId:e.bldId,cellId:e.cellId}})))),e.accountListByRegionId={}),e.tableSelect({rows:t,checked:!1}),e.$nextTick((function(){e.$refs.table.setCheckBoxBySelected()})),!1}}},h=f,m=(n("160a"),n("2877")),p=Object(m["a"])(h,a,i,!1,null,"15f162e6",null);t["default"]=p.exports},"9ee8":function(e,t,n){},a3e9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("j-form-container",{ref:"formRow",attrs:{rules:e.validatorRules,model:e.model,disabled:!1,border:!1}},[n("a-row",{ref:"formOwnRow",staticClass:"houseInfo",attrs:{slot:"detail",type:"flex"},slot:"detail"},[n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("配置名称")]),n("a-col",{attrs:{span:20,"data-prop":"configName"}},[n("a-input",{attrs:{placeholder:"请输入配置名称"},model:{value:e.model.configName,callback:function(t){e.$set(e.model,"configName",t)},expression:"model.configName"}})],1),n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("参数名称")]),n("a-col",{attrs:{span:20,"data-prop":"paramName"}},[n("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.model.paramName,callback:function(t){e.$set(e.model,"paramName",t)},expression:"model.paramName"}})],1),n("a-col",{attrs:{span:4}},[e._v("配置描述")]),n("a-col",{attrs:{span:20}},[n("a-input",{attrs:{placeholder:"请输入配置描述"},model:{value:e.model.describe,callback:function(t){e.$set(e.model,"describe",t)},expression:"model.describe"}})],1),n("a-col",{attrs:{span:4}},[e._v("序号")]),n("a-col",{attrs:{span:20}},[n("a-input-number",{attrs:{min:1},model:{value:e.model.orderNum,callback:function(t){e.$set(e.model,"orderNum",t)},expression:"model.orderNum"}}),e._v("\n          值越小越靠前\n        ")],1)],1)],1)],1)],1)},i=[],o=n("0fea"),s={name:"DictItemModal",data:function(){return{title:"操作",visible:!1,model:{},qrConfigId:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{configName:[{required:!0,message:"请输入配置名称!"}],paramName:[{required:!0,message:"请输入参数名称!"}]},url:{add:"/qrDetail/qrDetail/add",edit:"/qrDetail/qrDetail/edit"},sysOrgCode:""}},methods:{add:function(e,t){this.qrConfigId=e,this.sysOrgCode=t,this.edit({orderNum:1})},edit:function(e){e.id&&(this.qrConfigId=e.qrConfigId),this.model=Object.assign({},e),this.model.qrConfigId=this.qrConfigId,this.visible=!0},handleOk:function(){var e=this,t=this.$refs.formRow.validaRowMsg(this.$refs.formOwnRow).valida;if(!t)return!1;e.confirmLoading=!0;var n="",a="";this.model.id?(n+=this.url.edit,a="put"):(n+=this.url.add,a="post"),this.model.sysOrgCode=this.sysOrgCode,Object(o["i"])(n,this.model,a).then((function(t){t.success?(e.$message.success(t.message),e.$emit("ok")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.$refs.formRow.clearValidate()}}},r=s,l=(n("b890"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"13be2532",null);t["default"]=c.exports},a5af:function(e,t,n){"use strict";n("c6cf9")},aac4:function(e,t,n){"use strict";n("16bc")},ada3:function(e,t,n){},b514:function(e,t,n){},b890:function(e,t,n){"use strict";n("ada3")},badc:function(e,t,n){},bcde:function(e,t,n){"use strict";n("ed0e")},bd13:function(e,t,n){},becc:function(e,t,n){"use strict";n("0891")},c12e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[n("div",{staticClass:"cardBody"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryObj,saveCode:e.fileName,type:e.showType},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableBox"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120},toolbar:!0,bordered:"",stripe:!0,checkbox:!0,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"table-height":"auto",expand:!1,data:e.loadData,tableColumn:e.columns},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.handleAdd}},[e._v("新建")]),n("a-button",{attrs:{icon:"delete",type:"primary"},on:{click:e.batchDel}},[e._v("批量删除")])],1)]},proxy:!0},{key:"action",fn:function(t){t.text;var a=t.row;return[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])]}}])})],1)],1),n("loginpage-content-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},i=[],o=(n("6eb7"),n("0fea")),s=n("ac0d"),r=n("0a5e"),l=n("6fa9"),c=n("6c59"),d={name:"LoginpageContentList",mixins:[r["a"],s["b"]],components:{LoginpageContentModal:c["default"],MESSuperQuery:l["default"]},data:function(){var e=this;return{fileName:"AnswerQuestionList",description:"answer_question管理页面",showType:"queryList",queryObj:[{type:"select",value:"busiType",label:"类别",options:[]},{type:"input",value:"title",label:"标题",queryType:"like"}],columns:[{title:"类别",align:"center",field:"busiType_dictText",width:120},{title:"明细类别",align:"center",field:"busiTypeDetail_dictText",width:120},{title:"标题",headerAlign:"center",align:"left",field:"title"},{title:"内容",headerAlign:"center",align:"left",field:"content"},{title:"操作",field:"action",align:"center",fixed:"right",width:147,slot:!0}],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam)).then((function(e){return e.result}))},url:{list:"/loginpage/pageList",delete:"/loginpage/delete",deleteBatch:"/loginpage/deleteBatch",loadTreeData:"/sys/category/loadTreeData"},dictOptions:{}}},created:function(){this.initQuery()},methods:{initQuery:function(){var e=this;this.queryObj.map((function(t){"busiType"===t.value&&Object(o["e"])(e.url.loadTreeData,{pcode:"login_page_type"}).then((function(n){n.success&&(t.options=e.convert(n.result))}))}))},convert:function(e,t){for(var n=e,a=[],i=0;i<n.length;i++){var o={};o.value=t?n[i].value:n[i].code,o.label=n[i].title,a.push(o)}return a}}},u=d,f=(n("fbf4"),n("a5af"),n("2877")),h=Object(f["a"])(u,a,i,!1,null,"d1ba1fd0",null);t["default"]=h.exports},c40e:function(e,t,n){"use strict";n("3b23")},c6cf9:function(e,t,n){},c9ec:function(e,t,n){"use strict";n("179d")},cd50:function(e,t,n){"use strict";n("368b")},d365:function(e,t,n){"use strict";n("159f")},da79:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"officialAllot"},[a("div",{staticClass:"allot_progress"},[a("img",{staticClass:"progress_icon",class:{rotate:e.progress>0&&e.progress<100&&!e.isFail},attrs:{src:n("1b2d"),alt:"沙漏"}}),a("span",{},[e._v(e._s(e.progress<100?"点击下方开始按钮，开始分配":"分配完成"))]),a("div",{staticClass:"allotProgressBarBox"},[a("p",[e._v("分配金额："),a("span",{staticClass:"allotAmount conFont"},[e._v(e._s(e.formatterAmount(e.incomeInfo.totalAccr)))])]),a("div",{staticClass:"allotProgressBar"},[a("div",{staticClass:"progressBg"}),a("div",{ref:"progress",staticClass:"currentProgress conFont",style:{background:e.isFail?"red":"#1B90FF"}},[e.isFail?[e._v("分配失败")]:[e._v("\n            "+e._s(e.progress<100?e.progress+"%":"分配成功")+"\n          ")]],2),e._m(0)])]),"5"===e.incomeInfo.state?a("a-space",[a("a-button",{on:{click:e.backStep}},[e._v("上一步")]),a("a-button",{staticClass:"startAllot",attrs:{type:"primary"},on:{click:e.startAllot}},[e._v("开始分配")])],1):e._e()],1),a("div",{staticClass:"preAllot"},[a("allot-set-table",{staticClass:"preAllotTable",attrs:{"income-info":e.incomeInfo,"table-url":"/income/incomeRangeList/rangeInitByIncomeId",showCheckBox:!1,query:{incomeId:e.incomeInfo.id},"show-rate":!0},scopedSlots:e._u([{key:"extra",fn:function(t){var n=t.total;return[a("div",{staticClass:"tableExtra"},[a("div",[e._v("分配户数："),a("span",[e._v(e._s(n))])]),a("div",[e._v("分配总额："),a("span",[e._v(e._s(e.formatterAmount(e.incomeInfo.distAmount)))])]),a("div",[e._v("操作人："+e._s(e.incomeInfo.createBy))])])]}}])})],1)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"progressEnd"},[n("div",{staticClass:"centerWhiteDot"})])}],o=n("3ed7"),s=n("0fea"),r=n("4080"),l={name:"OfficialAllot",props:{incomeInfo:{type:Object,default:function(){}}},components:{AllotSetTable:r["default"]},data:function(){return{formatterAmount:o["g"],isFail:!1,progress:0,url:{confirmAssign:"/income/income/confirmAssign",getIncomeInfoById:"/income/income/queryById"}}},mounted:function(){if("5"!==this.incomeInfo.state){var e=this.$refs.progress;e.style.width="1000px",this.progress=100}},methods:{startAllot:function(){var e=this;this.isFail=!1;var t=this.$refs.progress;this.progress=0,t.style.width="100px",t.style.transition="width 0.2s";var n=setInterval((function(){e.progress>90?window.clearInterval(n):e.progress+=Object(o["k"])(1,10),t.style.width=9*e.progress+100+"px"}),100);Object(s["e"])(this.url.confirmAssign,{id:this.incomeInfo.id}).then((function(a){a.success?(Object(s["e"])(e.url.getIncomeInfoById,{id:e.incomeInfo.id}).then((function(t){e.incomeInfo=t.result})),setTimeout((function(){e.progress=100,t.style.width="1000px"}),800)):(window.clearInterval(n),e.isFail=!0,e.$message.warning(a.message))}))},backStep:function(){this.$emit("lastStep")}}},c=l,d=(n("bcde"),n("2877")),u=Object(d["a"])(c,a,i,!1,null,"7f11fe9b",null);t["default"]=u.exports},db8d:function(e,t,n){},dd34:function(e,t,n){},dd84:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{staticClass:"mainCard",attrs:{bordered:!1}},[n("div",{staticClass:"cardBody"},[n("m-e-s-super-query",{attrs:{fieldList:e.queryConfig,saveCode:e.name,type:"queryList"},on:{ok:e.handleSuperQuery}}),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-id":"id","table-column":e.columns,tableHeight:"auto",data:e.loadData,"select-all-event":e.selectAllEvent,selectChangeEvent:e.selectChangeEvent,cellDblClick:e.cellDblClick}})],1)],1)])},i=[],o=n("0fea"),s=n("0a5e"),r=n("6fa9"),l=n("ca00"),c={name:"SpTrgLog",mixins:[s["a"]],components:{MESSuperQuery:r["default"]},props:{checkbox:{type:Boolean,default:!1},customParams:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{queryConfig:[{type:"input",value:"other.busiNo",label:"业务编号",queryType:"like"},{label:"类型",value:"settleType",type:"select",options:[{label:"全部",value:""},{label:"活期",value:"01"},{label:"定期",value:"02"}]},{label:"是否使用",value:"isUse",type:"select",options:[{label:"全部",value:""},{label:"已使用",value:"true"},{label:"未使用",value:"false"}]}],columns:[{title:"业务编号",field:"busiNo",width:150},{title:"业务描述",field:"describe"},{title:"业务明细类别",field:"busiTypeDetail",align:"center",width:200},{title:"发生额",field:"amount",formatter:"amount",align:"right",width:120},{title:"本金",field:"accountAmount",formatter:"amount",align:"right",width:120},{title:"利息",field:"accrualAmount",formatter:"amount",align:"right",width:120},{title:"使用时间",field:"useDate",width:120,align:"center",formatter:function(e){var t=e.cellValue;return t||"未使用"}}],loadData:function(t){return Object(o["e"])(e.url.list,Object.assign(t,e.queryParam,e.customParams)).then((function(e){return e.result}))},url:{list:"/income/income/listBySettleType"}}},methods:{selectChangeEvent:function(e){e.checked;var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.id}))},handleSuperQuery:function(e,t){this.queryParam.queryType=e.queryType,e.queryItems&&e.queryItems.forEach((function(e){e.val&&(e.val=e.val.toString().trim())})),this.queryParam.queryItems=e.queryItems?encodeURI(JSON.stringify(e.queryItems)):void 0,this.queryParam.queryText=e.queryText,t?this.$refs.table.clearTableData():(Object(l["f"])(this.queryParam),this.queryPage())},selectAllEvent:function(e){e.checked;var t=e.records;this.selectedRows=t,this.selectedRowKeys=t.map((function(e){return e.id}))},cellDblClick:function(e){this.$emit("dbSelected",e)}}},d=c,u=(n("61d0"),n("14a1"),n("2877")),f=Object(u["a"])(d,a,i,!1,null,"43021a5d",null);t["default"]=f.exports},ed0e:function(e,t,n){},ee33:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:1100,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭",okText:"保存"},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("div",{staticClass:"listContent"},[n("div",{staticClass:"content-table"},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline",colon:!1},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[n("a-row",{staticClass:"queryForm",attrs:{gutter:12}},[n("a-col",{staticClass:"padrigh",attrs:{md:6,sm:4}},[n("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:9},label:"关联编号"}},[n("a-input",{attrs:{placeholder:"请输入关联编号"},model:{value:e.queryParam.code,callback:function(t){e.$set(e.queryParam,"code",t)},expression:"queryParam.code"}})],1)],1),n("a-col",{staticClass:"padrigh",attrs:{md:3,sm:4}}),n("a-col",{attrs:{md:3,sm:4}},[n("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"4px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"tableDiv"},[n("v-table",{ref:"table",attrs:{"row-config":{height:120,useKey:!0},toolbar:!0,bordered:"",stripe:!0,"header-align":"center","if-init-query":!1,selectChangeEvent:e.selectChangeEvent,"select-all-event":e.selectAllEvent,"footer-method":e.footerMethod,"footer-span-method":e.footerSpanMethod,expand:!1,data:e.loadData,tableColumn:e.columns,"table-height":"400",editConfig:{trigger:"manual",mode:"row",icon:null},treeConfig:null,editRules:e.validRules,"show-pagination":!1},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("div",{staticClass:"vxetable-operator"},[n("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.insertEvent(-1)}}},[e._v("新建")])],1)]},proxy:!0},{key:"codeEdit",fn:function(t){var a=t.row;t.column;return[n("vxe-input",{staticClass:"put",attrs:{type:"text",placeholder:"请输入关联编号"},model:{value:a.code,callback:function(t){e.$set(a,"code",t)},expression:"row.code"}})]}},{key:"typeEdit",fn:function(t){var a=t.row;t.column;return[n("vxe-select",{model:{value:a.type,callback:function(t){e.$set(a,"type",t)},expression:"row.type"}},[n("vxe-option",{attrs:{value:"1",label:"银行"}}),n("vxe-option",{attrs:{value:"2",label:"小区"}}),n("vxe-option",{attrs:{value:"3",label:"自然幢"}})],1)]}},{key:"accrAmountEdit",fn:function(t){var a=t.row;t.column;return[n("vxe-input",{staticClass:"myInput",attrs:{min:"0.01",type:"number",placeholder:"请输入金额"},model:{value:a.accrAmount,callback:function(t){e.$set(a,"accrAmount",t)},expression:"row.accrAmount"}})]}},{key:"type",fn:function(t){var a=t.text;t.row;return["1"===a?n("span",[e._v(" 银行 ")]):e._e(),"2"===a?n("span",[e._v("小区 ")]):e._e(),"3"===a?n("span",[e._v("自然幢")]):e._e()]}},{key:"action",fn:function(t){t.text;var a=t.row,i=t.rowIndex;return[e.$refs.table.$refs.xTable.isActiveByRow(a)?n("div",[n("a",{on:{click:function(t){return e.cancelFn(a)}}},[n("a-icon",{attrs:{type:"delete"}}),e._v(" 取消")],1)]):n("div",[n("a",{on:{click:function(t){return e.editRowEvent(a,i)}}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑")],1),n("a-divider",{attrs:{type:"vertical"}}),n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a)}}},[n("a",[n("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)])],1)]}}])})],1)])]),n("a-modal",{attrs:{title:"提示",width:500,visible:e.warnVisible,maskClosable:!1,cancelText:"取消"},on:{ok:e.warnHandleOk,cancel:e.copyHandleCancel}},[n("span",{staticClass:"spanStyle"},[e._v("未保存关闭，本次编辑的数据将会丢失、删除将会失效，确定关闭？")])])],1)},i=[],o=n("0fea"),s=(n("6eb7"),n("ac0d")),r=n("0a5e"),l=n("6fa9"),c=n("8d27"),d=n("6734"),u=n("eccd"),f=n("c695"),h=n.n(f),m=n("3ed7");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var o=t&&t.prototype instanceof b?t:b,s=Object.create(o.prototype),r=new q(a||[]);return i(s,"_invoke",{value:T(e,n,r)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",m="executing",y="completed",v={};function b(){}function w(){}function k(){}var C={};c(C,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(D([])));_&&_!==n&&a.call(_,s)&&(C=_);var I=k.prototype=b.prototype=Object.create(C);function L(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,s,r){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==p(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,r)}),(function(e){n("throw",e,s,r)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,r)}))}r(l.arg)}var o;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,a){var i=f;return function(o,s){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var r=a.delegate;if(r){var l=A(r,a);if(l){if(l===v)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===f)throw i=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=m;var c=u(t,n,a);if("normal"===c.type){if(i=a.done?y:h,c.arg===v)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=y,a.method="throw",a.arg=c.arg)}}}function A(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var o=u(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(p(t)+" is not iterable")}return w.prototype=k,i(I,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:w,configurable:!0}),w.displayName=c(k,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},L(S.prototype),c(S.prototype,r,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,i,o){void 0===o&&(o=Promise);var s=new S(d(e,n,a,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},L(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=D,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return r.type="throw",r.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),$(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;$(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:D(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),v}},t}function y(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){y(o,a,i,s,r,"next",e)}function r(e){y(o,a,i,s,r,"throw",e)}s(void 0)}))}}var b={name:"IncomeDetailListModal",mixins:[r["a"],s["b"]],components:{RepairPartListModal:d["default"],UtilityModal:c["default"],MESSuperQuery:l["default"],JDDictSelectTag:u["default"]},provide:function(){var e=this;return{selectedInfo:function(){return e.selectedInfo}}},data:function(){var e=this;return{title:"编辑明细",visible:!1,warnVisible:!1,confirmLoading:!1,columns:[{title:"类型",align:"center",width:200,field:"type",editRender:{},slots:{edit:"typeEdit"},slot:!0},{title:"关联编号",width:200,align:"left",field:"code",editRender:{name:"$input",attrs:{type:"text"},props:{placeholder:"请输入关联编号"}},slots:{edit:"codeEdit"}},{title:"金额",align:"center",width:200,field:"accrAmount",editRender:{},slots:{edit:"accrAmountEdit"}},{title:"操作",field:"action",align:"center",fixed:"right",slot:!0}],validRules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],code:[{required:!0,message:"请输入关联编号",trigger:"change"}],accrAmount:[{required:!0,message:"请输入金额",trigger:"change"}]},addFlag:!1,loadData:function(t){return Object(o["e"])(e.url.list,Object.assign({},e.queryParam)).then((function(e){return e.result}))},url:{list:"/income/incomeList/list",delete:"/income/incomeList/delete",deleteBatch:"/income/incomeList/deleteBatch",exportXlsUrl:"/income/incomeList/exportXls",importExcelUrl:"/income/incomeList/importExcel",add:"/income/incomeList/add",edit:"/income/incomeList/edit",queryById:"/income/incomeList/queryById"},inCome:{},loading:!1,selectedInfo:{},code:"",message:"",delIncomeInfo:[]}},created:function(){},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{handleOk:function(){var e=v(g().mark((function e(){var t,n,a,i;return g().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs.table.$refs.xTable,Number(h.a.sum(t.afterFullData,"accrAmount"))===(this.inCome.distAmount?this.inCome.distAmount:this.inCome.totalAccr)){e.next=4;break}return this.$message.warning("明细总金额不正确请检查后再保存！"),e.abrupt("return");case 4:n=!0,a=0;case 6:if(!(a<t.afterFullData.length)){e.next=15;break}return e.next=9,t.validate(t.afterFullData[a]).catch((function(e){return e}));case 9:i=e.sent,i&&(n=!1,this.$message.warning("第"+(a+1)+"条数据格式不正确！")),this.submitForm(t.afterFullData[a],a).then((function(e){return e}))||(n=!1,this.$message.warning("关联编号为"+t.afterFullData[a].code+"的数据保存失败！"));case 12:a++,e.next=6;break;case 15:n&&(this.$message.success("保存成功！"),this.close());case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),edit:function(e){var t=this;this.inCome=e,this.visible=!0,this.$nextTick((function(){t.queryParam.incomeId=e.id,t.queryPage()}))},insertEvent:function(){var e=v(g().mark((function e(t){var n,a,i,o,s;return g().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.table.$refs.xTable,a={code:"",type:"",accrAmount:"",parentId:this.selectedInfo.id},e.next=4,n.insertAt(a,t);case 4:return i=e.sent,o=i.row,e.next=8,n.validate(o).catch((function(e){return e}));case 8:if(s=e.sent,!s){e.next=11;break}return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),footerMethod:function(e){var t=this,n=e.columns,a=e.data;return[n.map((function(e,n){return 0===n?"总计：":["accrAmount"].includes(e.property)?Object(m["g"])(Number(h.a.sum(a,e.property))):["action"].includes(e.property)?(t.message="收益分配总金额："+(t.inCome.distAmount?t.inCome.distAmount:t.inCome.totalAccr)+"元",Number(h.a.sum(a,"accrAmount"))>(t.inCome.distAmount?t.inCome.distAmount:t.inCome.totalAccr)&&(t.message+="，明细总金额超出收益分配总金额！"),Number(h.a.sum(a,"accrAmount"))<(t.inCome.distAmount?t.inCome.distAmount:t.inCome.totalAccr)&&(t.message+="，明细总金额小于收益分配总金额，请继续分配！"),t.message):void 0}))]},footerSpanMethod:function(e){return 0===e.columnIndex?{rowspan:1,colspan:3}:e.columnIndex<3?{rowspan:1,colspan:0}:void 0},searchQuery:function(){this.queryParam.incomeId=this.inCome.id,this.queryPage(1)},searchReset:function(){this.queryParam={},this.searchQuery()},editRowEvent:function(e,t){var n=this.$refs.table.$refs.xTable;n.setActiveRow(e)},submitForm:function(){var e=v(g().mark((function e(t,n){var a,i,s,r,l,c,d;return g().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this,i=0;case 2:if(!(i<this.delIncomeInfo.length)){e.next=15;break}if(this.delIncomeInfo[i].id){e.next=8;break}s=this.$refs.table.$refs.xTable,s.remove(this.delIncomeInfo[i]),e.next=12;break;case 8:if(this.url.delete){e.next=11;break}return this.$message.error("请设置url.delete属性!"),e.abrupt("return",!1);case 11:Object(o["a"])(this.url.delete,{id:this.delIncomeInfo[i].id}).then((function(e){return!!e.success||(a.$message.warning("第"+(n+1)+"条数据删除失败！"),!1)}));case 12:i++,e.next=2;break;case 15:return r=this.$refs.table.$refs.xTable,e.next=18,r.validate(t).catch((function(e){return e}));case 18:if(l=e.sent,!l){e.next=23;break}return e.abrupt("return",!1);case 23:if(!(t.accrAmount<=0)){e.next=26;break}return a.$message.warning("第"+(n+1)+"条金额格式填写错误！"),e.abrupt("return",!1);case 26:a.addFlag=!0,c="",d="",t.id?(c+=this.url.edit,d="put"):(c+=this.url.add,d="post"),t.sysOrgCode=this.inCome.sysOrgCode,t.zoneCode=this.inCome.zoneCode,t.incomeId=this.inCome.id,t.incomeId=this.inCome.id,Object(o["i"])(c,t,d).then((function(e){return!!e.success}));case 35:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),cancelFn:function(e){var t=this.$refs.table.$refs.xTable;e.id?t.clearActived():t.remove(e)},handleDelete:function(e){var t=this.$refs.table.$refs.xTable;t.remove(e),this.delIncomeInfo.push(e)},close:function(){this.$emit("close"),this.queryParam={},this.disabled=!1,this.visible=!1},handleCancel:function(){this.warnVisible=!0},copyHandleCancel:function(){this.warnVisible=!1},warnHandleOk:function(){this.warnVisible=!1,this.close()}}},w=b,k=(n("6c2d"),n("2877")),C=Object(k["a"])(w,a,i,!1,null,"7a52b325",null);t["default"]=C.exports},ef45:function(e,t,n){},f2ff:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("j-modal",{attrs:{title:e.title,width:1500,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭","modal-height":"50vh"},on:{cancel:e.handleCancel,ok:e.handleOk}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("j-form-container",{attrs:{disabled:e.disabled}},[n("a-form-model",{ref:"form",attrs:{slot:"edit",model:e.model,rules:e.validatorRules},slot:"edit"},[n("a-row",{staticClass:"houseInfo"},[n("a-col",{attrs:{span:4}},[n("span",{staticClass:"requiredText"},[e._v("*")]),e._v("修正sql")]),n("a-col",{attrs:{span:20}},[n("a-textarea",{attrs:{placeholder:"请输入修正sql",rows:4},model:{value:e.model.repairSqlText,callback:function(t){e.$set(e.model,"repairSqlText",t)},expression:"model.repairSqlText"}})],1)],1)],1)],1)],1)],1)},i=[],o=n("0fea"),s={name:"RepairModal",data:function(){return{title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{executeSql:"/income/incomeCheckResult/executeSql"},disabled:!1}},created:function(){},methods:{init:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.form.validate((function(n){if(!n)return!1;t.confirmLoading=!0,Object(o["j"])(e.url.executeSql,e.model).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}))},handleCancel:function(){this.close()}}},r=s,l=(n("788a"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"d92a0c9a",null);t["default"]=c.exports},f38d:function(e,t,n){"use strict";n("801b")},f4f5:function(e,t,n){"use strict";n("b514")},f5a1:function(e,t,n){"use strict";n("ef45")},f7c3:function(e,t,n){"use strict";n("2620")},f7e8:function(e,t,n){}}]);