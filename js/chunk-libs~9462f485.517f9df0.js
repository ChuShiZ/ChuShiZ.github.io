(window["webpackJsonp_joinsoft-v9"]=window["webpackJsonp_joinsoft-v9"]||[]).push([["chunk-libs~9462f485"],{"02a3":function(t,e,n){"use strict";function i(t){return Array.prototype.concat.apply([],t)}n.d(e,"a",(function(){return $})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return j})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return y})),n.d(e,"h",(function(){return i})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return C})),n.d(e,"k",(function(){return v})),n.d(e,"l",(function(){return u})),n.d(e,"m",(function(){return a})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return s})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return h})),n.d(e,"r",(function(){return l})),n.d(e,"s",(function(){return c})),n.d(e,"t",(function(){return E})),n.d(e,"u",(function(){return w})),n.d(e,"v",(function(){return B})),n.d(e,"w",(function(){return F})),n.d(e,"x",(function(){return G})),n.d(e,"y",(function(){return _})),n.d(e,"z",(function(){return S})),n.d(e,"A",(function(){return O})),n.d(e,"B",(function(){return P})),n.d(e,"C",(function(){return T})),n.d(e,"D",(function(){return M})),n.d(e,"E",(function(){return k})),n.d(e,"F",(function(){return x}));var o=Object.prototype.toString,r=Object.prototype.hasOwnProperty;function c(t){return void 0===t}function a(t){return void 0!==t}function s(t){return null==t}function u(t){return"[object Array]"===o.call(t)}function h(t){return"[object Object]"===o.call(t)}function d(t){return"[object Number]"===o.call(t)}function p(t){var e=o.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}function l(t){return"[object String]"===o.call(t)}function f(t){if(!u(t))throw new Error("must supply array")}function v(t,e){return r.call(t,e)}function g(t,e){var n;return e=z(e),m(t,(function(t,i){if(e(t,i))return n=t,!1})),n}function y(t,e){e=z(e);var n=u(t)?-1:void 0;return m(t,(function(t,i){if(e(t,i))return n=i,!1})),n}function b(t,e){var n=[];return m(t,(function(t,i){e(t,i)&&n.push(t)})),n}function m(t,e){var n,i;if(!c(t)){var o=u(t)?L:A;for(var r in t)if(v(t,r)&&(n=t[r],i=e(n,o(r)),!1===i))return n}}function x(t,e){return c(t)?[]:(f(t),e=z(e),t.filter((function(t,n){return!e(t,n)})))}function _(t,e,n){return m(t,(function(t,i){n=e(n,t,i)})),n}function j(t,e){return!!_(t,(function(t,n,i){return t&&e(n,i)}),!0)}function O(t,e){return!!g(t,e)}function w(t,e){var n=[];return m(t,(function(t,i){n.push(e(t,i))})),n}function E(t){return t&&Object.keys(t)||[]}function S(t){return E(t).length}function k(t){return w(t,(function(t){return t}))}function C(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=R(e),m(t,(function(t){var i=e(t)||"_",o=n[i];o||(o=n[i]=[]),o.push(t)})),n}function M(t){t=R(t);for(var e={},n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];m(i,(function(n){return C(n,t,e)}));var r=w(e,(function(t,e){return t[0]}));return r}var T=M;function P(t,e){e=R(e);var n=[];return m(t,(function(t,i){for(var o=e(t,i),r={d:o,v:t},c=0;c<n.length;c++){var a=n[c].d;if(o<a)return void n.splice(c,0,r)}n.push(r)})),w(n,(function(t){return t.v}))}function B(t){return function(e){return j(t,(function(t,n){return e[n]===t}))}}function R(t){return p(t)?t:function(e){return e[t]}}function z(t){return p(t)?t:function(e){return e===t}}function A(t){return t}function L(t){return Number(t)}function I(t,e){var n,i,o,r;function c(n){var c=Date.now(),u=n?0:r+e-c;if(u>0)return a(u);t.apply(o,i),s()}function a(t){n=setTimeout(c,t)}function s(){n&&clearTimeout(n),n=r=i=o=void 0}function u(){n&&c(!0),s()}function h(){r=Date.now();for(var t=arguments.length,c=new Array(t),s=0;s<t;s++)c[s]=arguments[s];i=c,o=this,n||a(e)}return h.flush=u,h.cancel=s,h}function D(t,e){return t.bind(e)}function H(){return H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H.apply(this,arguments)}function $(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return H.apply(void 0,[t].concat(n))}function G(t,e){var n={},i=Object(t);return m(e,(function(e){e in i&&(n[e]=t[e])})),n}function F(t,e){var n={},i=Object(t);return m(i,(function(t,i){-1===e.indexOf(i)&&(n[i]=t)})),n}},"0357":function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r=n("0ae7"),c=new r["a"]("tt");function a(t){var e=Object(o["f"])('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return t.insertBefore(e,t.firstChild),e}function s(t,e,n){Object(i["a"])(t.style,{left:e+"px",top:n+"px"})}function u(t,e){t.style.display=!1===e?"none":""}var h="djs-tooltip",d="."+h;function p(t,e){this._eventBus=t,this._canvas=e,this._ids=c,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=a(e.getContainer());var n=this;o["e"].bind(this._tooltipRoot,d,"mousedown",(function(t){t.stopPropagation()})),o["e"].bind(this._tooltipRoot,d,"mouseover",(function(t){n.trigger("mouseover",t)})),o["e"].bind(this._tooltipRoot,d,"mouseout",(function(t){n.trigger("mouseout",t)})),this._init()}p.$inject=["eventBus","canvas"],p.prototype.add=function(t){if(!t.position)throw new Error("must specifiy tooltip position");if(!t.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return t=Object(i["a"])({},this._tooltipDefaults,t,{id:e}),this._addTooltip(t),t.timeout&&this.setTimeout(t),e},p.prototype.trigger=function(t,e){var n=e.delegateTarget||e.target,i=this.get(Object(o["a"])(n,"data-tooltip-id"));i&&("mouseover"===t&&i.timeout&&this.clearTimeout(i),"mouseout"===t&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},p.prototype.get=function(t){return"string"!==typeof t&&(t=t.id),this._tooltips[t]},p.prototype.clearTimeout=function(t){if(t=this.get(t),t){var e=t.removeTimer;e&&(clearTimeout(e),t.removeTimer=null)}},p.prototype.setTimeout=function(t){if(t=this.get(t),t){this.clearTimeout(t);var e=this;t.removeTimer=setTimeout((function(){e.remove(t)}),t.timeout)}},p.prototype.remove=function(t){var e=this.get(t);e&&(Object(o["k"])(e.html),Object(o["k"])(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])},p.prototype.show=function(){u(this._tooltipRoot)},p.prototype.hide=function(){u(this._tooltipRoot,!1)},p.prototype._updateRoot=function(t){var e=t.scale||1,n=t.scale||1,i="matrix("+e+",0,0,"+n+","+-1*t.x*e+","+-1*t.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},p.prototype._addTooltip=function(t){var e,n=t.id,r=t.html,c=this._tooltipRoot;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Object(i["r"])(r)&&(r=Object(o["f"])(r)),e=Object(o["f"])('<div data-tooltip-id="'+n+'" class="'+h+'" style="position: absolute">'),e.appendChild(r),t.type&&Object(o["b"])(e).add("djs-tooltip-"+t.type),t.className&&Object(o["b"])(e).add(t.className),t.htmlContainer=e,c.appendChild(e),this._tooltips[n]=t,this._updateTooltip(t)},p.prototype._updateTooltip=function(t){var e=t.position,n=t.htmlContainer;s(n,e.x,e.y)},p.prototype._updateTooltipVisibilty=function(t){Object(i["i"])(this._tooltips,(function(e){var n=e.show,i=e.htmlContainer,o=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(o=!1),u(i,o))}))},p.prototype._init=function(){var t=this;function e(e){t._updateRoot(e),t._updateTooltipVisibilty(e),t.show()}this._eventBus.on("canvas.viewbox.changing",(function(e){t.hide()})),this._eventBus.on("canvas.viewbox.changed",(function(t){e(t.viewbox)}))};e["a"]={__init__:["tooltips"],tooltips:["type",p]}},"049c":function(t,e,n){"use strict";function i(t,e){return e=e||{},t.replace(/{([^}]+)}/g,(function(t,n){return e[n]||"{"+n+"}"}))}e["a"]={translate:["value",i]}},"05ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("02a3"),o=n("e759");function r(t){return Object(i["a"])({original:t.point.original||t.point},t.actual)}function c(t,e){this._elementRegistry=t,this._graphicsFactory=e}c.$inject=["elementRegistry","graphicsFactory"],c.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var i=this.getDockingPoint(t,e,!0),o=this.getDockingPoint(t,n),c=t.waypoints.slice(i.idx+1,o.idx);return c.unshift(r(i)),c.push(r(o)),c},c.prototype.getDockingPoint=function(t,e,n){var i,o,r,c=t.waypoints;return i=n?0:c.length-1,o=c[i],r=this._getIntersection(e,t,n),{point:o,actual:r||o,idx:i}},c.prototype._getIntersection=function(t,e,n){var i=this._getShapePath(t),r=this._getConnectionPath(e);return Object(o["d"])(i,r,n)},c.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},c.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},c.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)}},"061b":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a}));var i=n("6b8b");function o(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function r(t){for(var e,n="",i=0;e=t[i];i++)n+=e.x+","+e.y+" ";return n}function c(t,e){var n=Object(i["f"])("polyline");return Object(i["b"])(n,{points:r(t)}),e&&Object(i["b"])(n,e),n}function a(t,e){return Object(i["b"])(t,{points:r(e)}),t}},"0ae7":function(t,e,n){"use strict";function i(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}n.d(e,"a",(function(){return i})),i.prototype.next=function(){return this._prefix+ ++this._counter}},"0bc3":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return d}));var i=Math.abs,o=Math.round;function r(t,e,n){var o,r;for(n=void 0===n?10:n,o=0;o<e.length;o++)if(r=e[o],i(r-t)<=n)return r}function c(t){return{x:t.x,y:t.y}}function a(t){return{x:t.x+t.width,y:t.y+t.height}}function s(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:o(t.x+t.width/2),y:o(t.y+t.height/2)}}function u(t,e){var n=t.snapped;return!!n&&("string"===typeof e?n[e]:n.x&&n.y)}function h(t,e,n){if("string"!==typeof e)throw new Error("axis must be in [x, y]");if("number"!==typeof n&&!1!==n)throw new Error("value must be Number or false");var i,o=t[e],r=t.snapped=t.snapped||{};return!1===n?r[e]=!1:(r[e]=!0,i=n-o,t[e]+=i,t["d"+e]+=i),o}function d(t){return t.children||[]}},"13d3":function(t,e,n){"use strict";var i=n("29b7"),o=n("df96"),r=n("0bc3"),c=n("28c3"),a=n("e759"),s=n("02a3"),u=1250;function h(t,e){var n=this;t.on(["resize.start"],(function(t){n.initSnap(t)})),t.on(["resize.move","resize.end"],u,(function(t){var i=t.context,o=i.shape,a=o.parent,s=i.direction,u=i.snapContext;if((!t.originalEvent||!Object(c["b"])(t.originalEvent))&&!Object(r["c"])(t)){var h=u.pointsForTarget(a);h.initialized||(h=n.addSnapTargetPoints(h,o,a,s),h.initialized=!0),g(s)&&Object(r["e"])(t,"x",t.x),y(s)&&Object(r["e"])(t,"y",t.y),e.snap(t,h)}})),t.on(["resize.cleanup"],(function(){e.hide()}))}function d(t,e){var n=Object(a["e"])(t),i=Object(a["b"])(t),o={x:n.x,y:n.y};return-1!==e.indexOf("n")?o.y=i.top:-1!==e.indexOf("s")&&(o.y=i.bottom),-1!==e.indexOf("e")?o.x=i.right:-1!==e.indexOf("w")&&(o.x=i.left),o}function p(t,e){return t.host===e}function l(t){return!!t.waypoints}function f(t){return!!t.hidden}function v(t){return!!t.labelTarget}function g(t){return"n"===t||"s"===t}function y(t){return"e"===t||"w"===t}h.prototype.initSnap=function(t){var e=t.context,n=e.shape,i=e.direction,r=e.snapContext;r||(r=e.snapContext=new o["a"]);var c=d(n,i);return r.setSnapOrigin("corner",{x:c.x-t.x,y:c.y-t.y}),r},h.prototype.addSnapTargetPoints=function(t,e,n,i){var o=this.getSnapTargets(e,n);return Object(s["i"])(o,(function(e){t.add("corner",Object(r["a"])(e)),t.add("corner",Object(r["g"])(e))})),t.add("corner",d(e,i)),t},h.$inject=["eventBus","snapping"],h.prototype.getSnapTargets=function(t,e){return Object(r["b"])(e).filter((function(e){return!p(e,t)&&!l(e)&&!f(e)&&!v(e)}))};var b=n("6b8b"),m=7,x=1e3;function _(t){this._canvas=t,this._asyncHide=Object(s["c"])(Object(s["b"])(this.hide,this),x)}_.$inject=["canvas"],_.prototype.snap=function(t,e){var n=t.context,i=n.snapContext,o=i.getSnapLocations(),c={x:Object(r["c"])(t,"x"),y:Object(r["c"])(t,"y")};Object(s["i"])(o,(function(n){var o=i.getSnapOrigin(n),r={x:t.x+o.x,y:t.y+o.y};if(Object(s["i"])(["x","y"],(function(t){var i;c[t]||(i=e.snap(r,n,t,m),void 0!==i&&(c[t]={value:i,originValue:i-o[t]}))})),c.x&&c.y)return!1})),this.showSnapLine("vertical",c.x&&c.x.value),this.showSnapLine("horizontal",c.y&&c.y.value),Object(s["i"])(["x","y"],(function(e){var n=c[e];Object(s["q"])(n)&&Object(r["e"])(t,e,n.originValue)}))},_.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=Object(b["f"])("path");return Object(b["b"])(n,{d:"M0,0 L0,0"}),Object(b["c"])(n).add("djs-snap-line"),Object(b["a"])(e,n),{update:function(e){Object(s["p"])(e)?"horizontal"===t?Object(b["b"])(n,{d:"M-100000,"+e+" L+100000,"+e,display:""}):Object(b["b"])(n,{d:"M "+e+",-100000 L "+e+", +100000",display:""}):Object(b["b"])(n,{display:"none"})}}},_.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},_.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},_.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},_.prototype.hide=function(){Object(s["i"])(this._snapLines,(function(t){t.update()}))};e["a"]={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",i["a"]],resizeSnapping:["type",h],snapping:["type",_]}},"165d":function(t,e,n){"use strict";function i(){}i.prototype.get=function(){return this._data},i.prototype.set=function(t){this._data=t},i.prototype.clear=function(){var t=this._data;return delete this._data,t},i.prototype.isEmpty=function(){return!this._data};var o={clipboard:["type",i]},r=n("4aa4"),c=n("6dca"),a=n("be73"),s=n("02a3"),u=n("9408");function h(t,e,n,i,o,r,c,a){this._canvas=t,this._create=e,this._clipboard=n,this._elementFactory=i,this._eventBus=o,this._modeling=r,this._mouse=c,this._rules=a,o.on("copyPaste.copyElement",(function(t){var e=t.descriptor,n=t.element,i=t.elements;e.priority=1,e.id=n.id;var o=Object(s["f"])(i,(function(t){return t===n.parent}));o&&(e.parent=n.parent.id),d(n)&&(e.priority=2,e.host=n.host.id),p(n)&&(e.priority=3,e.source=n.source.id,e.target=n.target.id,e.waypoints=f(n)),l(n)&&(e.priority=4,e.labelTarget=n.labelTarget.id),Object(s["i"])(["x","y","width","height"],(function(t){Object(s["p"])(n[t])&&(e[t]=n[t])})),e.hidden=n.hidden,e.collapsed=n.collapsed})),o.on("copyPaste.pasteElements",(function(t){var e=t.hints;Object(s["a"])(e,{createElementsBehavior:!1})}))}function d(t){return!!t.host}function p(t){return!!t.waypoints}function l(t){return!!t.labelTarget}function f(t){return Object(s["u"])(t.waypoints,(function(t){return t=v(t),t.original&&(t.original=v(t.original)),t}))}function v(t){return Object(s["a"])({},t)}function g(t,e){var n=e.indexOf(t);return-1===n?e:e.splice(n,1)}h.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],h.prototype.copy=function(t){var e,n;return Object(s["l"])(t)||(t=t?[t]:[]),e=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}),n=!1===e?{}:this.createTree(Object(s["l"])(e)?e:t),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:n}),n},h.prototype.paste=function(t){var e=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=t&&t.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(e);if(t&&t.element&&t.point)return this._paste(i,t.element,t.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},h.prototype._paste=function(t,e,n,i){Object(s["i"])(t,(function(t){Object(s["p"])(t.x)||(t.x=0),Object(s["p"])(t.y)||(t.y=0)}));var o=Object(u["b"])(t);return Object(s["i"])(t,(function(t){p(t)&&(t.waypoints=Object(s["u"])(t.waypoints,(function(t){return{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2}}))),Object(s["a"])(t,{x:t.x-o.x-o.width/2,y:t.y-o.y-o.height/2})})),this._modeling.createElements(t,n,e,Object(s["a"])({},i))},h.prototype._createElements=function(t){var e=this,n=this._eventBus,i={},o=[];return Object(s["i"])(t,(function(t,r){r=parseInt(r,10),t=Object(s["B"])(t,"priority"),Object(s["i"])(t,(function(t){var r,c=Object(s["a"])({},Object(s["w"])(t,["priority"]));return i[t.parent]?c.parent=i[t.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c}),p(c)?(c.source=i[t.source],c.target=i[t.target],r=i[t.id]=e.createConnection(c),void o.push(r)):l(c)?(c.labelTarget=i[c.labelTarget],r=i[t.id]=e.createLabel(c),void o.push(r)):(c.host&&(c.host=i[c.host]),r=i[t.id]=e.createShape(c),void o.push(r))}))})),o},h.prototype.createConnection=function(t){var e=this._elementFactory.createConnection(Object(s["w"])(t,["id"]));return e},h.prototype.createLabel=function(t){var e=this._elementFactory.createLabel(Object(s["w"])(t,["id"]));return e},h.prototype.createShape=function(t){var e=this._elementFactory.createShape(Object(s["w"])(t,["id"]));return e},h.prototype.hasRelations=function(t,e){var n,i,o;return!(p(t)&&(i=Object(s["f"])(e,Object(s["v"])({id:t.source.id})),o=Object(s["f"])(e,Object(s["v"])({id:t.target.id})),!i||!o))&&!(l(t)&&(n=Object(s["f"])(e,Object(s["v"])({id:t.labelTarget.id})),!n))},h.prototype.createTree=function(t){var e=this._rules,n=this,i={},o=[],r=Object(u["e"])(t);function c(t,n){return e.allowed("element.copy",{element:t,elements:n})}function a(t,e){var n=Object(s["f"])(o,(function(e){return t===e.element}));n?n.depth<e&&(o=h(n,o),o.push({element:n.element,depth:e})):o.push({element:t,depth:e})}function h(t,e){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e}return Object(u["a"])(r,(function(t,e,n){if(!l(t))return Object(s["i"])(t.labels,(function(t){a(t,n)})),Object(s["i"])([t.attachers,t.incoming,t.outgoing],i),a(t,n),t.children;function i(t){t&&t.length&&Object(s["i"])(t,(function(t){Object(s["i"])(t.labels,(function(t){a(t,n)})),a(t,n)}))}})),t=Object(s["u"])(o,(function(t){return t.element})),o=Object(s["u"])(o,(function(e){return e.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:e.descriptor,element:e.element,elements:t}),e})),o=Object(s["B"])(o,(function(t){return t.descriptor.priority})),t=Object(s["u"])(o,(function(t){return t.element})),Object(s["i"])(o,(function(e){var o=e.depth;n.hasRelations(e.element,t)&&c(e.element,t)?(i[o]||(i[o]=[]),i[o].push(e.descriptor)):g(e.element,t)})),i};e["a"]={__depends__:[o,r["a"],c["a"],a["a"]],__init__:["copyPaste"],copyPaste:["type",h]}},"18e7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("02a3"),o=1e3;function r(t){this._eventBus=t}function c(t,e){return function(n){return t.call(e||null,n.context,n.command,n)}}r.$inject=["eventBus"],r.prototype.on=function(t,e,n,r,a,s){if((Object(i["n"])(e)||Object(i["p"])(e))&&(s=a,a=r,r=n,n=e,e=null),Object(i["n"])(n)&&(s=a,a=r,r=n,n=o),Object(i["q"])(a)&&(s=a,a=!1),!Object(i["n"])(r))throw new Error("handlerFn must be a function");Object(i["l"])(t)||(t=[t]);var u=this._eventBus;Object(i["i"])(t,(function(t){var i=["commandStack",t,e].filter((function(t){return t})).join(".");u.on(i,n,a?c(r,s):r,s)}))};var a=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];Object(i["i"])(a,(function(t){r.prototype[t]=function(e,n,o,r,c){(Object(i["n"])(e)||Object(i["p"])(e))&&(c=r,r=o,o=n,n=e,e=null),this.on(e,t,n,o,r,c)}}))},"193b":function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r="data-id",c=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],a=1e3;function s(t,e,n){var o=Object(i["m"])(t&&t.scale)?t.scale:{min:1,max:1.5};this._config={scale:o},this._eventBus=e,this._canvas=n,this._providers={},this._current={}}function u(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){t.style[n+"transform"]=e}))}s.$inject=["config.popupMenu","eventBus","canvas"],s.prototype.registerProvider=function(t,e,n){n||(n=e,e=a),this._eventBus.on("popupMenu.getProviders."+t,e,(function(t){t.providers.push(n)}))},s.prototype.isEmpty=function(t,e){if(!t)throw new Error("element parameter is missing");if(!e)throw new Error("providerId parameter is missing");var n=this._getProviders(e);if(!n)return!0;var o=this._getEntries(t,n),r=this._getHeaderEntries(t,n),c=Object(i["z"])(o)>0,a=r&&Object(i["z"])(r)>0;return!c&&!a},s.prototype.open=function(t,e,n){var o=this._getProviders(e);if(!t)throw new Error("Element is missing");if(!o||!o.length)throw new Error("No registered providers for: "+e);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:e,element:t,position:n},c=this._getEntries(t,o),a=this._getHeaderEntries(t,o);r.entries=Object(i["a"])({},c,a),r.container=this._createContainer(),Object(i["z"])(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-header")),Object(i["z"])(c)&&r.container.appendChild(this._createEntries(c,"djs-popup-body"));var s=this._canvas,u=s.getContainer();this._attachContainer(r.container,u,n.cursor),this._bindAutoClose()},s.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),Object(o["k"])(this._current.container),this._current.container=null)},s.prototype.isOpen=function(){return!!this._current.container},s.prototype.trigger=function(t){t.preventDefault();var e=t.delegateTarget||t.target,n=Object(o["a"])(e,r),i=this._getEntry(n);if(i.action)return i.action.call(null,t,i)},s.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+t,providers:[]});return this._eventBus.fire(e),e.providers},s.prototype._getEntries=function(t,e){var n={};return Object(i["i"])(e,(function(e){if(e.getPopupMenuEntries){var o=e.getPopupMenuEntries(t);Object(i["n"])(o)?n=o(n):Object(i["i"])(o,(function(t,e){n[e]=t}))}else Object(i["i"])(e.getEntries(t),(function(t){var e=t.id;if(!e)throw new Error("every entry must have the id property set");n[e]=Object(i["w"])(t,["id"])}))})),n},s.prototype._getHeaderEntries=function(t,e){var n={};return Object(i["i"])(e,(function(e){if(e.getPopupMenuHeaderEntries){var o=e.getPopupMenuHeaderEntries(t);Object(i["n"])(o)?n=o(n):Object(i["i"])(o,(function(t,e){n[e]=t}))}else{if(!e.getHeaderEntries)return;Object(i["i"])(e.getHeaderEntries(t),(function(t){var e=t.id;if(!e)throw new Error("every entry must have the id property set");n[e]=Object(i["w"])(t,["id"])}))}})),n},s.prototype._getEntry=function(t){var e=this._current.entries[t];if(!e)throw new Error("entry not found");return e},s.prototype._emit=function(t){this._eventBus.fire("popupMenu."+t)},s.prototype._createContainer=function(){var t=Object(o["f"])('<div class="djs-popup">'),e=this._current.position,n=this._current.className;return Object(i["a"])(t.style,{position:"absolute",left:e.x+"px",top:e.y+"px",visibility:"hidden"}),Object(o["b"])(t).add(n),t},s.prototype._attachContainer=function(t,e,n){var i=this;o["e"].bind(t,".entry","click",(function(t){i.trigger(t)})),this._updateScale(t),e.appendChild(t),n&&this._assureIsInbounds(t,n)},s.prototype._updateScale=function(t){var e,n,o=this._canvas.zoom(),r=this._config.scale,c=o;!0!==r&&(!1===r?(e=1,n=1):(e=r.min,n=r.max),Object(i["m"])(e)&&o<e&&(c=e),Object(i["m"])(n)&&o>n&&(c=n)),u(t,"scale("+c+")")},s.prototype._assureIsInbounds=function(t,e){var n,o,r=this._canvas,c=r._container.getBoundingClientRect(),a=t.offsetLeft,s=t.offsetTop,u=t.scrollWidth,h=t.scrollHeight,d={},p={x:e.x-c.left,y:e.y-c.top};a+u>c.width&&(d.x=!0),s+h>c.height&&(d.y=!0),d.x&&d.y?(n=p.x-u+"px",o=p.y-h+"px"):d.x?(n=p.x-u+"px",o=p.y+"px"):d.y&&p.y<h?(n=p.x+"px",o="10px"):d.y&&(n=p.x+"px",o=p.y-h+"px"),Object(i["a"])(t.style,{left:n,top:o},{visibility:"visible","z-index":1e3})},s.prototype._createEntries=function(t,e){var n=Object(o["f"])("<div>"),r=this;return Object(o["b"])(n).add(e),Object(i["i"])(t,(function(t,e){var i=r._createEntry(t,e);n.appendChild(i)})),n},s.prototype._createEntry=function(t,e){var n=Object(o["f"])("<div>"),i=Object(o["b"])(n);if(i.add("entry"),t.className&&t.className.split(" ").forEach((function(t){i.add(t)})),Object(o["a"])(n,r,e),t.label){var c=Object(o["f"])("<span>");c.textContent=t.label,n.appendChild(c)}return t.imageUrl&&n.appendChild(Object(o["f"])('<img src="'+t.imageUrl+'" />')),!0===t.active&&i.add("active"),!0===t.disabled&&i.add("disabled"),t.title&&(n.title=t.title),n},s.prototype._bindAutoClose=function(){this._eventBus.once(c,this.close,this)},s.prototype._unbindAutoClose=function(){this._eventBus.off(c,this.close,this)};e["a"]={__init__:["popupMenu"],popupMenu:["type",s]}},"1c6d":function(t,e,n){"use strict";var i=n("02a3"),o=n("3fb5"),r=n.n(o),c=n("aa33"),a=n("8e51"),s=n("18e7"),u=250,h=1400;function d(t,e,n){s["a"].call(this,e);var o=t.get("movePreview",!1);e.on("shape.move.start",h,(function(t){var e=t.context,n=e.shapes,i=e.validatedShapes;e.shapes=p(n),e.validatedShapes=p(i)})),o&&e.on("shape.move.start",u,(function(t){var e=t.context,n=e.shapes,r=[];Object(i["i"])(n,(function(t){Object(i["i"])(t.labels,(function(n){n.hidden||-1!==e.shapes.indexOf(n)||r.push(n),t.labelTarget&&r.push(t)}))})),Object(i["i"])(r,(function(t){o.makeDraggable(e,t,!0)}))})),this.preExecuted("elements.move",h,(function(t){var e=t.context,n=e.closure,o=n.enclosedElements,r=[];Object(i["i"])(o,(function(t){Object(i["i"])(t.labels,(function(t){o[t.id]||r.push(t)}))})),n.addAll(r)})),this.preExecute(["connection.delete","shape.delete"],(function(t){var e=t.context,i=e.connection||e.shape;Object(a["a"])(i.labels,(function(t){n.removeShape(t,{nested:!0})}))})),this.execute("shape.delete",(function(t){var e=t.context,n=e.shape,i=n.labelTarget;i&&(e.labelTargetIndex=Object(c["b"])(i.labels,n),e.labelTarget=i,n.labelTarget=null)})),this.revert("shape.delete",(function(t){var e=t.context,n=e.shape,i=e.labelTarget,o=e.labelTargetIndex;i&&(Object(c["a"])(i.labels,n,o),n.labelTarget=i)}))}function p(t){return Object(i["e"])(t,(function(e){return-1===t.indexOf(e.labelTarget)}))}r()(d,s["a"]),d.$inject=["injector","eventBus","modeling"];e["a"]={__init__:["labelSupport"],labelSupport:["type",d]}},"1fde":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("28c3"),o=500;function r(t,e){var n=this;t.on("editorActions.init",o,(function(t){var i=t.editorActions;n.registerBindings(e,i)}))}r.$inject=["eventBus","keyboard"],r.prototype.registerBindings=function(t,e){function n(n,i){e.isRegistered(n)&&t.addListener(i)}n("undo",(function(t){var n=t.keyEvent;if(Object(i["h"])(n))return e.trigger("undo"),!0})),n("redo",(function(t){var n=t.keyEvent;if(Object(i["f"])(n))return e.trigger("redo"),!0})),n("copy",(function(t){var n=t.keyEvent;if(Object(i["c"])(n))return e.trigger("copy"),!0})),n("paste",(function(t){var n=t.keyEvent;if(Object(i["e"])(n))return e.trigger("paste"),!0})),n("stepZoom",(function(t){var n=t.keyEvent;if(Object(i["d"])(["+","Add","="],n)&&Object(i["b"])(n))return e.trigger("stepZoom",{value:1}),!0})),n("stepZoom",(function(t){var n=t.keyEvent;if(Object(i["d"])(["-","Subtract"],n)&&Object(i["b"])(n))return e.trigger("stepZoom",{value:-1}),!0})),n("zoom",(function(t){var n=t.keyEvent;if(Object(i["d"])("0",n)&&Object(i["b"])(n))return e.trigger("zoom",{value:1}),!0})),n("removeSelection",(function(t){var n=t.keyEvent;if(Object(i["d"])(["Backspace","Delete","Del"],n))return e.trigger("removeSelection"),!0}))}},2385:function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r=n("9408"),c=n("0ae7"),a=new c["a"]("ov"),s=500;function u(t,e,n,o){this._eventBus=e,this._canvas=n,this._elementRegistry=o,this._ids=a,this._overlayDefaults=Object(i["a"])({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=h(n.getContainer()),this._init()}function h(t){var e=Object(o["f"])('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return t.insertBefore(e,t.firstChild),e}function d(t,e,n){Object(i["a"])(t.style,{left:e+"px",top:n+"px"})}function p(t,e){t.style.display=!1===e?"none":""}function l(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){t.style[n+"transform"]=e}))}u.$inject=["config.overlays","eventBus","canvas","elementRegistry"],u.prototype.get=function(t){if(Object(i["r"])(t)&&(t={id:t}),Object(i["r"])(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?Object(i["e"])(e.overlays,Object(i["v"])({type:t.type})):e.overlays.slice():[]}return t.type?Object(i["e"])(this._overlays,Object(i["v"])({type:t.type})):t.id?this._overlays[t.id]:null},u.prototype.add=function(t,e,n){if(Object(i["q"])(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var o=this._ids.next();return n=Object(i["a"])({},this._overlayDefaults,n,{id:o,type:e,element:t,html:n.html}),this._addOverlay(n),o},u.prototype.remove=function(t){var e=this.get(t)||[];Object(i["l"])(e)||(e=[e]);var n=this;Object(i["i"])(e,(function(t){var e=n._getOverlayContainer(t.element,!0);if(t&&(Object(o["k"])(t.html),Object(o["k"])(t.htmlContainer),delete t.htmlContainer,delete t.element,delete n._overlays[t.id]),e){var i=e.overlays.indexOf(t);-1!==i&&e.overlays.splice(i,1)}}))},u.prototype.show=function(){p(this._overlayRoot)},u.prototype.hide=function(){p(this._overlayRoot,!1)},u.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Object(o["c"])(this._overlayRoot)},u.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,i=e.x,c=e.y;if(e.waypoints){var a=Object(r["b"])(e);i=a.x,c=a.y}d(n,i,c),Object(o["a"])(t.html,"data-container-id",e.id)},u.prototype._updateOverlay=function(t){var e,n,i=t.position,o=t.htmlContainer,c=t.element,a=i.left,s=i.top;void 0!==i.right&&(e=c.waypoints?Object(r["b"])(c).width:c.width,a=-1*i.right+e);void 0!==i.bottom&&(n=c.waypoints?Object(r["b"])(c).height:c.height,s=-1*i.bottom+n);d(o,a||0,s||0)},u.prototype._createOverlayContainer=function(t){var e=Object(o["f"])('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},u.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";l(this._overlayRoot,n)},u.prototype._getOverlayContainer=function(t,e){var n=Object(i["f"])(this._overlayContainers,(function(e){return e.element===t}));return n||e?n:this._createOverlayContainer(t)},u.prototype._addOverlay=function(t){var e,n,r=t.id,c=t.element,a=t.html;a.get&&a.constructor.prototype.jquery&&(a=a.get(0)),Object(i["r"])(a)&&(a=Object(o["f"])(a)),n=this._getOverlayContainer(c),e=Object(o["f"])('<div class="djs-overlay" data-overlay-id="'+r+'" style="position: absolute">'),e.appendChild(a),t.type&&Object(o["b"])(e).add("djs-overlay-"+t.type);var s=this._canvas.findPlane(c),u=this._canvas.getActivePlane();t.plane=s,s!==u&&p(e,!1),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[r]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},u.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,o=t.plane,r=n&&n.minZoom,c=n&&n.maxZoom,a=t.htmlContainer,s=this._canvas.getActivePlane(),u=!0;(o!==s||n&&(Object(i["m"])(r)&&r>e.scale||Object(i["m"])(c)&&c<e.scale))&&(u=!1),p(a,u),this._updateOverlayScale(t,e)},u.prototype._updateOverlayScale=function(t,e){var n,o,r,c=t.scale,a=t.htmlContainer,s="";!0!==c&&(!1===c?(n=1,o=1):(n=c.min,o=c.max),Object(i["m"])(n)&&e.scale<n&&(r=(1/e.scale||1)*n),Object(i["m"])(o)&&e.scale>o&&(r=(1/e.scale||1)*o)),Object(i["m"])(r)&&(s="scale("+r+","+r+")"),l(a,s)},u.prototype._updateOverlaysVisibilty=function(t){var e=this;Object(i["i"])(this._overlays,(function(n){e._updateOverlayVisibilty(n,t)}))},u.prototype._init=function(){var t=this._eventBus,e=this;function n(t){e._updateRoot(t),e._updateOverlaysVisibilty(t),e.show()}t.on("canvas.viewbox.changing",(function(t){e.hide()})),t.on("canvas.viewbox.changed",(function(t){n(t.viewbox)})),t.on(["shape.remove","connection.remove"],(function(t){var n=t.element,r=e.get({element:n});Object(i["i"])(r,(function(t){e.remove(t.id)}));var c=e._getOverlayContainer(n);if(c){Object(o["k"])(c.html);var a=e._overlayContainers.indexOf(c);-1!==a&&e._overlayContainers.splice(a,1)}})),t.on("element.changed",s,(function(t){var n=t.element,o=e._getOverlayContainer(n,!0);o&&(Object(i["i"])(o.overlays,(function(t){e._updateOverlay(t)})),e._updateOverlayContainer(o))})),t.on("element.marker.update",(function(t){var n=e._getOverlayContainer(t.element,!0);n&&Object(o["b"])(n.html)[t.add?"add":"remove"](t.marker)})),t.on("plane.set",(function(t){Object(i["i"])(e._overlays,(function(e){p(e.htmlContainer,e.plane===t.plane)}))})),t.on("diagram.clear",this.clear,this)};e["a"]={__init__:["overlays"],overlays:["type",u]}},2439:function(t,e,n){"use strict";n.d(e,"f",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return b}));var i=n("02a3"),o=n("9408"),r=n("e759"),c=Math.max,a=Math.min,s=20;function u(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function h(t,e,n){var i=n.x,o=n.y,r={x:t.x,y:t.y,width:t.width,height:t.height};return-1!==e.indexOf("n")?(r.y=t.y+o,r.height=t.height-o):-1!==e.indexOf("s")&&(r.height=t.height+o),-1!==e.indexOf("e")?r.width=t.width+i:-1!==e.indexOf("w")&&(r.x=t.x+i,r.width=t.width-i),r}function d(t,e){return{x:t.x+(e.left||0),y:t.y+(e.top||0),width:t.width-(e.left||0)+(e.right||0),height:t.height-(e.top||0)+(e.bottom||0)}}function p(t,e,n){var o=e[t],r=n.min&&n.min[t],s=n.max&&n.max[t];return Object(i["p"])(r)&&(o=(/top|left/.test(t)?a:c)(o,r)),Object(i["p"])(s)&&(o=(/top|left/.test(t)?c:a)(o,s)),o}function l(t,e){if(!e)return t;var n=Object(r["b"])(t);return Object(r["a"])({top:p("top",n,e),right:p("right",n,e),bottom:p("bottom",n,e),left:p("left",n,e)})}function f(t,e,n,i){var o=Object(r["b"])(e),s={top:/n/.test(t)?o.bottom-n.height:o.top,left:/w/.test(t)?o.right-n.width:o.left,bottom:/s/.test(t)?o.top+n.height:o.bottom,right:/e/.test(t)?o.left+n.width:o.right},u=i?Object(r["b"])(i):s,h={top:a(s.top,u.top),left:a(s.left,u.left),bottom:c(s.bottom,u.bottom),right:c(s.right,u.right)};return Object(r["a"])(h)}function v(t,e){return"undefined"!==typeof t?t:s}function g(t,e){var n,i,o,r;return"object"===typeof e?(n=v(e.left),i=v(e.right),o=v(e.top),r=v(e.bottom)):n=i=o=r=v(e),{x:t.x-n,y:t.y-o,width:t.width+n+i,height:t.height+o+r}}function y(t){return!t.waypoints&&"label"!==t.type}function b(t,e){var n;if(n=void 0===t.length?Object(i["e"])(t.children,y):t,n.length)return g(Object(o["b"])(n),e)}},2518:function(t,e,n){"use strict";var i=n("48e6"),o=n("be73"),r=n("8e4b"),c=n("9cd4"),a=n("6dca"),s=n("02a3"),u=n("e759"),h=n("9408"),d=n("4892"),p=n("fbb1"),l=n("b071"),f=Math.abs,v=Math.round,g={x:"width",y:"height"},y="crosshair",b={n:"top",w:"left",s:"bottom",e:"right"},m=1500,x={n:"s",w:"e",s:"n",e:"w"},_=20;function j(t,e,n,i,o,r,c){this._canvas=t,this._dragging=e,this._eventBus=n,this._modeling=i,this._rules=o,this._toolManager=r,this._mouse=c;var a=this;r.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",(function(t){n.once("spaceTool.selection.ended",(function(){a.activateMakeSpace(t.originalEvent)}))})),n.on("spaceTool.move",m,(function(t){var e=t.context,n=e.initialized;n||(n=e.initialized=a.init(t,e)),n&&w(t)})),n.on("spaceTool.end",(function(t){var e=t.context,i=e.axis,o=e.direction,r=e.movingShapes,c=e.resizingShapes,s=e.start;if(e.initialized){w(t);var u={x:0,y:0};u[i]=v(t["d"+i]),a.makeSpace(r,c,u,o,s),n.once("spaceTool.ended",(function(t){a.activateSelection(t.originalEvent,!0,!0)}))}}))}function O(t){return{top:t.top-_,right:t.right+_,bottom:t.bottom+_,left:t.left-_}}function w(t){var e,n,i=t.context,o=i.spaceToolConstraints;o&&(Object(s["p"])(o.left)&&(e=Math.max(t.x,o.left),t.dx=t.dx+e-t.x,t.x=e),Object(s["p"])(o.right)&&(e=Math.min(t.x,o.right),t.dx=t.dx+e-t.x,t.x=e),Object(s["p"])(o.top)&&(n=Math.max(t.y,o.top),t.dy=t.dy+n-t.y,t.y=n),Object(s["p"])(o.bottom)&&(n=Math.min(t.y,o.bottom),t.dy=t.dy+n-t.y,t.y=n))}function E(t,e,n,i,o){var r=t.movingShapes,c=t.resizingShapes;if(c.length){var a,d,p={};return Object(s["i"])(c,(function(t){var l,f,v,y=Object(u["b"])(t),m=Object(s["e"])(t.children,(function(t){return!k(t)&&!C(t)&&!S(r,t)&&!S(c,t)})),_=Object(s["e"])(t.children,(function(t){return!k(t)&&!C(t)&&S(r,t)}));m.length&&(f=O(Object(u["b"])(Object(h["b"])(m))),l=i-y[b[n]]+f[b[n]],"n"===n?p.bottom=d=Object(s["p"])(d)?Math.min(d,l):l:"w"===n?p.right=d=Object(s["p"])(d)?Math.min(d,l):l:"s"===n?p.top=a=Object(s["p"])(a)?Math.max(a,l):l:"e"===n&&(p.left=a=Object(s["p"])(a)?Math.max(a,l):l)),_.length&&(v=O(Object(u["b"])(Object(h["b"])(_))),l=i-v[b[x[n]]]+y[b[x[n]]],"n"===n?p.bottom=d=Object(s["p"])(d)?Math.min(d,l):l:"w"===n?p.right=d=Object(s["p"])(d)?Math.min(d,l):l:"s"===n?p.top=a=Object(s["p"])(a)?Math.max(a,l):l:"e"===n&&(p.left=a=Object(s["p"])(a)?Math.max(a,l):l));var j=o&&o[t.id];j&&("n"===n?(l=i+t[g[e]]-j[g[e]],p.bottom=d=Object(s["p"])(d)?Math.min(d,l):l):"w"===n?(l=i+t[g[e]]-j[g[e]],p.right=d=Object(s["p"])(d)?Math.min(d,l):l):"s"===n?(l=i-t[g[e]]+j[g[e]],p.top=a=Object(s["p"])(a)?Math.max(a,l):l):"e"===n&&(l=i-t[g[e]]+j[g[e]],p.left=a=Object(s["p"])(a)?Math.max(a,l):l))})),p}}function S(t,e){return-1!==t.indexOf(e)}function k(t){return!!t.waypoints}function C(t){return!!t.labelTarget}j.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],j.prototype.activateSelection=function(t,e,n){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:y,data:{context:{reactivate:n}},trapClick:!1})},j.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:y,data:{context:{}}})},j.prototype.makeSpace=function(t,e,n,i,o){return this._modeling.createSpace(t,e,n,i,o)},j.prototype.init=function(t,e){var n=f(t.dx)>f(t.dy)?"x":"y",i=t["d"+n],o=t[n]-i;if(f(i)<5)return!1;i<0&&(i*=-1),Object(p["a"])(t)&&(i*=-1);var r=Object(d["a"])(n,i),c=this._canvas.getRootElement(),a=Object(h["h"])(c,!0),u=this.calculateAdjustments(a,n,i,o),v=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:r,shapes:u.resizingShapes,start:o}),g=E(u,n,r,o,v);return Object(s["a"])(e,u,{axis:n,direction:r,spaceToolConstraints:g,start:o}),Object(l["a"])("resize-"+("x"===n?"ew":"ns")),!0},j.prototype.calculateAdjustments=function(t,e,n,i){var o=this._rules,r=[],c=[];return Object(s["i"])(t,(function(t){if(t.parent&&!k(t)){var a=t[e],s=a+t[g[e]];return n>0&&a>i||n<0&&s<i?r.push(t):a<i&&s>i&&o.allowed("shape.resize",{shape:t})?c.push(t):void 0}})),{movingShapes:r,resizingShapes:c}},j.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},j.prototype.isActive=function(){var t=this._dragging.context();return t&&/^spaceTool/.test(t.prefix)};var M=n("6b8b"),T=n("b586"),P="djs-dragging",B="djs-resizing",R=250,z=Math.max;function A(t,e,n,i,o){function r(t,e){Object(s["i"])(t,(function(t){o.addDragger(t,e),n.addMarker(t,P)}))}t.on("spaceTool.selection.start",(function(t){var e=n.getLayer("space"),o=t.context,r={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},c=Object(M["f"])("g");Object(M["b"])(c,i.cls("djs-crosshair-group",["no-events"])),Object(M["a"])(e,c);var a=Object(M["f"])("path");Object(M["b"])(a,"d",r.x),Object(M["c"])(a).add("djs-crosshair"),Object(M["a"])(c,a);var s=Object(M["f"])("path");Object(M["b"])(s,"d",r.y),Object(M["c"])(s).add("djs-crosshair"),Object(M["a"])(c,s),o.crosshairGroup=c})),t.on("spaceTool.selection.move",(function(t){var e=t.context.crosshairGroup;Object(T["c"])(e,t.x,t.y)})),t.on("spaceTool.selection.cleanup",(function(t){var e=t.context,n=e.crosshairGroup;n&&Object(M["j"])(n)})),t.on("spaceTool.move",R,(function(t){var c=t.context,a=c.line,u=c.axis,h=c.movingShapes,d=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var p=n.getLayer("space");a=Object(M["f"])("path"),Object(M["b"])(a,"d","M0,0 L0,0"),Object(M["c"])(a).add("djs-crosshair"),Object(M["a"])(p,a),c.line=a;var l=Object(M["f"])("g");Object(M["b"])(l,i.cls("djs-drag-group",["no-events"])),Object(M["a"])(n.getActiveLayer(),l),r(h,l);var f=c.movingConnections=e.filter((function(t){var e=!1;Object(s["i"])(h,(function(n){Object(s["i"])(n.outgoing,(function(n){t===n&&(e=!0)}))}));var n=!1;Object(s["i"])(h,(function(e){Object(s["i"])(e.incoming,(function(e){t===e&&(n=!0)}))}));var i=!1;Object(s["i"])(d,(function(e){Object(s["i"])(e.outgoing,(function(e){t===e&&(i=!0)}))}));var o=!1;return Object(s["i"])(d,(function(e){Object(s["i"])(e.incoming,(function(e){t===e&&(o=!0)}))})),L(t)&&(e||i)&&(n||o)}));r(f,l),c.dragGroup=l}if(!c.frameGroup){var v=Object(M["f"])("g");Object(M["b"])(v,i.cls("djs-frame-group",["no-events"])),Object(M["a"])(n.getActiveLayer(),v);var g=[];Object(s["i"])(d,(function(t){var e=o.addFrame(t,v),i=e.getBBox();g.push({element:e,initialBounds:i}),n.addMarker(t,B)})),c.frameGroup=v,c.frames=g}var y={x:"M"+t.x+", -10000 L"+t.x+", 10000",y:"M -10000, "+t.y+" L 10000, "+t.y};Object(M["b"])(a,{d:y[u]});var b={x:"y",y:"x"},m={x:t.dx,y:t.dy};m[b[c.axis]]=0,Object(T["c"])(c.dragGroup,m.x,m.y),Object(s["i"])(c.frames,(function(t){var e,n,i=t.element,o=t.initialBounds;"e"===c.direction?Object(M["b"])(i,{width:z(o.width+m.x,5)}):(e=z(o.width-m.x,5),Object(M["b"])(i,{width:e,x:o.x+o.width-e})),"s"===c.direction?Object(M["b"])(i,{height:z(o.height+m.y,5)}):(n=z(o.height-m.y,5),Object(M["b"])(i,{height:n,y:o.y+o.height-n}))}))}})),t.on("spaceTool.cleanup",(function(t){var e=t.context,i=e.movingShapes,o=e.movingConnections,r=e.resizingShapes,c=e.line,a=e.dragGroup,u=e.frameGroup;Object(s["i"])(i,(function(t){n.removeMarker(t,P)})),Object(s["i"])(o,(function(t){n.removeMarker(t,P)})),a&&(Object(M["j"])(c),Object(M["j"])(a)),Object(s["i"])(r,(function(t){n.removeMarker(t,B)})),u&&Object(M["j"])(u)}))}function L(t){return t.waypoints}A.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];e["a"]={__init__:["spaceToolPreview"],__depends__:[i["a"],o["a"],r["a"],c["a"],a["a"]],spaceTool:["type",j],spaceToolPreview:["type",A]}},"28c1":function(t,e,n){"use strict";function i(t){return Math.log(t)/Math.log(10)}n.d(e,"a",(function(){return i}))},"28c3":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"g",(function(){return v})),n.d(e,"c",(function(){return g})),n.d(e,"e",(function(){return y})),n.d(e,"h",(function(){return b})),n.d(e,"f",(function(){return m}));var i=n("02a3"),o=67,r=86,c=89,a=90,s=["c","C",o],u=["v","V",r],h=["y","Y",c],d=["z","Z",a];function p(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.altKey}function l(t){return!t.altKey&&(t.ctrlKey||t.metaKey)}function f(t,e){return t=Object(i["l"])(t)?t:[t],-1!==t.indexOf(e.key)||-1!==t.indexOf(e.keyCode)}function v(t){return t.shiftKey}function g(t){return l(t)&&f(s,t)}function y(t){return l(t)&&f(u,t)}function b(t){return l(t)&&!v(t)&&f(d,t)}function m(t){return l(t)&&(f(h,t)||f(d,t)&&v(t))}},"29b7":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("df96"),o=n("0bc3"),r=n("28c3"),c=n("02a3"),a=1250;function s(t,e,n){var i=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],(function(t){i.initSnap(t)})),e.on(["create.move","create.end","shape.move.move","shape.move.end"],a,(function(t){var e=t.context,c=e.shape,a=e.snapContext,s=e.target;if((!t.originalEvent||!Object(r["b"])(t.originalEvent))&&!Object(o["c"])(t)&&s){var u=a.pointsForTarget(s);u.initialized||(u=i.addSnapTargetPoints(u,c,s),u.initialized=!0),n.snap(t,u)}})),e.on(["create.cleanup","shape.move.cleanup"],(function(){n.hide()}))}function u(t){return!!t.waypoints}function h(t){return!!t.hidden}function d(t){return!!t.labelTarget}s.$inject=["elementRegistry","eventBus","snapping"],s.prototype.initSnap=function(t){var e,n=this._elementRegistry,r=t.context,c=r.shape,a=r.snapContext;a||(a=r.snapContext=new i["a"]),e=n.get(c.id)?Object(o["d"])(c,t):{x:t.x+Object(o["d"])(c).x,y:t.y+Object(o["d"])(c).y};var s={x:e.x-c.width/2,y:e.y-c.height/2},u={x:e.x+c.width/2,y:e.y+c.height/2};return a.setSnapOrigin("mid",{x:e.x-t.x,y:e.y-t.y}),d(c)||(a.setSnapOrigin("top-left",{x:s.x-t.x,y:s.y-t.y}),a.setSnapOrigin("bottom-right",{x:u.x-t.x,y:u.y-t.y})),a},s.prototype.addSnapTargetPoints=function(t,e,n){var i=this.getSnapTargets(e,n);return Object(c["i"])(i,(function(n){if(d(n))d(e)&&t.add("mid",Object(o["d"])(n));else if(u(n)){if(n.waypoints.length<3)return;var i=n.waypoints.slice(1,-1);Object(c["i"])(i,(function(e){t.add("mid",e)}))}else t.add("mid",Object(o["d"])(n))})),Object(c["p"])(e.x)&&Object(c["p"])(e.y)?(this._elementRegistry.get(e.id)&&t.add("mid",Object(o["d"])(e)),t):t},s.prototype.getSnapTargets=function(t,e){return Object(o["b"])(e).filter((function(t){return!h(t)}))}},"2d8d":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return d}));var i=n("02a3");function o(t,e){return t&&e?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):-1}function r(t,e,n,i){if("undefined"===typeof i&&(i=5),!t||!e||!n)return!1;var r=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),c=o(t,e);return Math.abs(r/c)<=i}var c=2;function a(t,e){var n;return n=Object(i["l"])(t)?t:[t,e],s(n)?"h":!!u(n)&&"v"}function s(t,e){var n;n=Object(i["l"])(t)?t:[t,e];var o=n.slice().shift();return Object(i["d"])(n,(function(t){return Math.abs(o.y-t.y)<=c}))}function u(t,e){var n;n=Object(i["l"])(t)?t:[t,e];var o=n.slice().shift();return Object(i["d"])(n,(function(t){return Math.abs(o.x-t.x)<=c}))}function h(t,e,n){return n=n||0,t.x>e.x-n&&t.y>e.y-n&&t.x<e.x+e.width+n&&t.y<e.y+e.height+n}function d(t,e){return{x:Math.round(t.x+(e.x-t.x)/2),y:Math.round(t.y+(e.y-t.y)/2)}}},"2ed1":function(t,e,n){"use strict";var i=n("2385"),o=n("4452"),r=n("e506"),c=n("9408"),a=n("7328");function s(t,e,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=t,this._eventBus=e,this._overlays=n,this._selection=i,this._container=Object(r["f"])(s.BOX_HTML),this._searchInput=Object(r["i"])(s.INPUT_SELECTOR,this._container),this._resultsContainer=Object(r["i"])(s.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy"],this.close,this)}function u(t){var e=6,n=t.width+2*e,i=t.height+2*e,o=["width: "+n+"px","height: "+i+"px"].join("; ");return{position:{bottom:i-e,right:n-e},show:!0,html:'<div style="'+o+'" class="'+s.OVERLAY_CLASS+'"></div>'}}function h(t,e,n){var i=d(e),o=Object(r["f"])(n);o.innerHTML=i,t.appendChild(o)}function d(t){var e="";return t.forEach((function(t){t.matched?e+='<strong class="'+s.RESULT_HIGHLIGHT_CLASS+'">'+Object(a["b"])(t.matched)+"</strong>":e+=Object(a["b"])(t.normal)})),""!==e?e:null}s.$inject=["canvas","eventBus","overlays","selection"],s.prototype._bindEvents=function(){var t=this;function e(e,n,i,o){t._eventMaps.push({el:e,type:i,listener:r["e"].bind(e,n,i,o)})}e(document,"html","click",(function(e){t.close()})),e(this._container,s.INPUT_SELECTOR,"click",(function(t){t.stopPropagation(),t.delegateTarget.focus()})),e(this._container,s.RESULT_SELECTOR,"mouseover",(function(e){e.stopPropagation(),t._scrollToNode(e.delegateTarget),t._preselect(e.delegateTarget)})),e(this._container,s.RESULT_SELECTOR,"click",(function(e){e.stopPropagation(),t._select(e.delegateTarget)})),e(this._container,s.INPUT_SELECTOR,"keydown",(function(t){38===t.keyCode&&t.preventDefault(),40===t.keyCode&&t.preventDefault()})),e(this._container,s.INPUT_SELECTOR,"keyup",(function(e){if(27===e.keyCode)return t.close();if(13===e.keyCode){var n=t._getCurrentResult();return n?t._select(n):t.close()}return 38===e.keyCode?t._scrollToDirection(!0):40===e.keyCode?t._scrollToDirection():void(37!==e.keyCode&&39!==e.keyCode&&t._search(e.delegateTarget.value))}))},s.prototype._unbindEvents=function(){this._eventMaps.forEach((function(t){r["e"].unbind(t.el,t.type,t.listener)}))},s.prototype._search=function(t){var e=this;if(this._clearResults(),t&&""!==t){var n=this._searchProvider.find(t);if(n.length){n.forEach((function(t){var n=t.element.id,i=e._createResultNode(t,n);e._results[n]={element:t.element,node:i}}));var i=Object(r["i"])(s.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},s.prototype._scrollToDirection=function(t){var e=this._getCurrentResult();if(e){var n=t?e.previousElementSibling:e.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},s.prototype._scrollToNode=function(t){if(t&&t!==this._getCurrentResult()){var e=t.offsetTop,n=this._resultsContainer.scrollTop,i=e-this._resultsContainer.clientHeight+t.clientHeight;e<n?this._resultsContainer.scrollTop=e:n<i&&(this._resultsContainer.scrollTop=i)}},s.prototype._clearResults=function(){Object(r["c"])(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},s.prototype._getCurrentResult=function(){return Object(r["i"])(s.RESULT_SELECTED_SELECTOR,this._resultsContainer)},s.prototype._createResultNode=function(t,e){var n=Object(r["f"])(s.RESULT_HTML);return t.primaryTokens.length>0&&h(n,t.primaryTokens,s.RESULT_PRIMARY_HTML),h(n,t.secondaryTokens,s.RESULT_SECONDARY_HTML),Object(r["a"])(n,s.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(n),n},s.prototype.registerProvider=function(t){this._searchProvider=t},s.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Object(r["b"])(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},s.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Object(r["b"])(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},s.prototype.toggle=function(){this.isOpen()?this.close():this.open()},s.prototype.isOpen=function(){return this._open},s.prototype._preselect=function(t){var e=this._getCurrentResult();if(t!==e){e&&Object(r["b"])(e).remove(s.RESULT_SELECTED_CLASS);var n=Object(r["a"])(t,s.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Object(r["b"])(t).add(s.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},s.prototype._select=function(t){var e=Object(r["a"])(t,s.RESULT_ID_ATTRIBUTE),n=this._results[e].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},s.prototype._resetOverlay=function(t){if(this._overlayId&&this._overlays.remove(this._overlayId),t){var e=Object(c["b"])(t),n=u(e);this._overlayId=this._overlays.add(t,n)}},s.CONTAINER_SELECTOR=".djs-search-container",s.INPUT_SELECTOR=".djs-search-input input",s.RESULTS_CONTAINER_SELECTOR=".djs-search-results",s.RESULT_SELECTOR=".djs-search-result",s.RESULT_SELECTED_CLASS="djs-search-result-selected",s.RESULT_SELECTED_SELECTOR="."+s.RESULT_SELECTED_CLASS,s.RESULT_ID_ATTRIBUTE="data-result-id",s.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",s.OVERLAY_CLASS="djs-search-overlay",s.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',s.RESULT_HTML='<div class="djs-search-result"></div>',s.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',s.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';e["a"]={__depends__:[i["a"],o["a"]],searchPad:["type",s]}},"32c2":function(t,e,n){"use strict";var i=n("4452"),o=n("be73"),r=n("48e6"),c=n("e759"),a=n("02a3");function s(t,e,n,i){function o(t,e){return i.allowed("connection.create",{source:t,target:e})}function r(t,e){return o(e,t)}t.on("connect.hover",(function(t){var e,n=t.context,i=n.start,c=t.hover;if(n.hover=c,e=n.canExecute=o(i,c),!Object(a["o"])(e)){if(!1!==e)return n.source=i,void(n.target=c);e=n.canExecute=r(i,c),Object(a["o"])(e)||!1!==e&&(n.source=c,n.target=i)}})),t.on(["connect.out","connect.cleanup"],(function(t){var e=t.context;e.hover=null,e.source=null,e.target=null,e.canExecute=!1})),t.on("connect.end",(function(t){var e=t.context,i=e.canExecute,o=e.connectionStart,r={x:t.x,y:t.y},c=e.source,s=e.target;if(!i)return!1;var h=null,d={connectionStart:u(e)?r:o,connectionEnd:u(e)?o:r};Object(a["q"])(i)&&(h=i),n.connect(c,s,h,d)})),this.start=function(t,n,i,o){Object(a["q"])(i)||(o=i,i=Object(c["e"])(n)),e.init(t,"connect",{autoActivate:o,data:{shape:n,context:{start:n,connectionStart:i}}})}}function u(t){var e=t.hover,n=t.source,i=t.target;return e&&n&&e===n&&n!==i}s.$inject=["eventBus","dragging","modeling","rules"];var h=1100,d=900,p="connect-ok",l="connect-not-ok";function f(t,e,n){var i=t.get("connectionPreview",!1);i&&e.on("connect.move",(function(t){var e=t.context,n=e.canExecute,o=e.hover,r=e.source,c=e.start,a=e.startPosition,s=e.target,h=e.connectionStart||a,d=e.connectionEnd||{x:t.x,y:t.y},p=h,l=d;u(e)&&(p=d,l=h),i.drawPreview(e,n,{source:r||c,target:s||o,connectionStart:p,connectionEnd:l})})),e.on("connect.hover",d,(function(t){var e=t.context,i=t.hover,o=e.canExecute;null!==o&&n.addMarker(i,o?p:l)})),e.on(["connect.out","connect.cleanup"],h,(function(t){var e=t.hover;e&&(n.removeMarker(e,p),n.removeMarker(e,l))})),i&&e.on("connect.cleanup",(function(t){i.cleanUp(t.context)}))}f.$inject=["injector","eventBus","canvas"];e["a"]={__depends__:[i["a"],o["a"],r["a"]],__init__:["connectPreview"],connect:["type",s],connectPreview:["type",f]}},3476:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("02a3"),o=n("6b8b"),r=0,c={width:150,height:50};function a(t){var e=t.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}function s(t){return Object(i["q"])(t)?Object(i["a"])({top:0,left:0,right:0,bottom:0},t):{top:t,left:t,right:t,bottom:t}}function u(t,e){var n;e.textContent=t;try{var i,o=""===t;return e.textContent=o?"dummy":t,n=e.getBBox(),i={width:n.width+2*n.x,height:n.height},o&&(i.width=0),i}catch(r){return{width:0,height:0}}}function h(t,e,n){for(var i,o=t.shift(),r=o;;){if(i=u(r,n),i.width=r?i.width:0," "===r||""===r||i.width<Math.round(e)||r.length<2)return d(t,r,o,i);r=f(r,i.width,e)}}function d(t,e,n,i){if(e.length<n.length){var o=n.slice(e.length).trim();t.unshift(o)}return{width:i.width,height:i.height,text:e}}var p="";function l(t,e){var n,i=t.split(/(\s|-|\u00AD)/g),o=[],r=0;if(i.length>1)while(n=i.shift()){if(!(n.length+r<e)){"-"!==n&&n!==p||o.pop();break}o.push(n),r+=n.length}var c=o[o.length-1];return c&&c===p&&(o[o.length-1]="-"),o.join("")}function f(t,e,n){var i=Math.max(t.length*(n/e),1),o=l(t,i);return o||(o=t.slice(0,Math.max(Math.round(i-1),1))),o}function v(){var t=document.getElementById("helper-svg");return t||(t=Object(o["f"])("svg"),Object(o["b"])(t,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(t)),t}function g(t){this._config=Object(i["a"])({},{size:c,padding:r,style:{},align:"center-top"},t||{})}function y(t){if("fontSize"in t&&"lineHeight"in t)return t.lineHeight*parseInt(t.fontSize,10)}g.prototype.createText=function(t,e){return this.layoutText(t,e).element},g.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},g.prototype.layoutText=function(t,e){var n=Object(i["a"])({},this._config.size,e.box),r=Object(i["a"])({},this._config.style,e.style),c=a(e.align||this._config.align),u=s(void 0!==e.padding?e.padding:this._config.padding),d=e.fitBox||!1,p=y(r),l=t.split(/\u00AD?\r?\n/),f=[],g=n.width-u.left-u.right,b=Object(o["f"])("text");Object(o["b"])(b,{x:0,y:0}),Object(o["b"])(b,r);var m=v();Object(o["a"])(m,b);while(l.length)f.push(h(l,g,b));"middle"===c.vertical&&(u.top=u.bottom=0);var x=Object(i["y"])(f,(function(t,e,n){return t+(p||e.height)}),0)+u.top+u.bottom,_=Object(i["y"])(f,(function(t,e,n){return e.width>t?e.width:t}),0),j=u.top;"middle"===c.vertical&&(j+=(n.height-x)/2),j-=(p||f[0].height)/4;var O=Object(o["f"])("text");Object(o["b"])(O,r),Object(i["i"])(f,(function(t){var e;switch(j+=p||t.height,c.horizontal){case"left":e=u.left;break;case"right":e=(d?_:g)-u.right-t.width;break;default:e=Math.max(((d?_:g)-t.width)/2+u.left,0)}var n=Object(o["f"])("tspan");Object(o["b"])(n,{x:e,y:j}),n.textContent=t.text,Object(o["a"])(O,n)})),Object(o["j"])(b);var w={width:_,height:x};return{dimensions:w,element:O}}},3759:function(t,e,n){"use strict";var i=n("02a3"),o=n("c7bf");function r(t,e){this._modeling=t,this._canvas=e}function c(t){this._modeling=t}function a(t,e){return Object(i["A"])(t.outgoing,(function(t){return t.target===e}))}function s(t,e){this._canvas=t,this._layouter=e}r.$inject=["modeling","canvas"],r.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,o=t.alignment;Object(i["i"])(n,(function(t){var n={x:0,y:0};o.left?n.x=o.left-t.x:o.right?n.x=o.right-t.width-t.x:o.center?n.x=o.center-Math.round(t.width/2)-t.x:o.top?n.y=o.top-t.y:o.bottom?n.y=o.bottom-t.height-t.y:o.middle&&(n.y=o.middle-Math.round(t.height/2)-t.y),e.moveElements([t],n,t.parent)}))},r.prototype.postExecute=function(t){},c.$inject=["modeling"],c.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,i=t.shape,o=t.hints||{};i=t.shape=this._modeling.createShape(i,t.position,n,{attach:o.attach}),t.shape=i},c.prototype.postExecute=function(t){var e=t.hints||{};a(t.source,t.shape)||(e.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))},s.$inject=["canvas","layouter"],s.prototype.execute=function(t){var e=t.connection,n=t.source,i=t.target,o=t.parent,r=t.parentIndex,c=t.hints;if(!n||!i)throw new Error("source and target required");if(!o)throw new Error("parent required");return e.source=n,e.target=i,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,c)),this._canvas.addConnection(e,o,r),e},s.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var u=n("9408"),h=Math.round;function d(t){this._modeling=t}function p(t){return!!t.waypoints}d.$inject=["modeling"],d.prototype.preExecute=function(t){var e=t.elements,n=t.parent,o=t.parentIndex,r=t.position,c=t.hints,a=this._modeling;Object(i["i"])(e,(function(t){Object(i["p"])(t.x)||(t.x=0),Object(i["p"])(t.y)||(t.y=0)}));var s=Object(u["b"])(e);Object(i["i"])(e,(function(t){p(t)&&(t.waypoints=Object(i["u"])(t.waypoints,(function(t){return{x:h(t.x-s.x-s.width/2+r.x),y:h(t.y-s.y-s.height/2+r.y)}}))),Object(i["a"])(t,{x:h(t.x-s.x-s.width/2+r.x),y:h(t.y-s.y-s.height/2+r.y)})}));var d=Object(u["e"])(e),l={};Object(i["i"])(e,(function(t){if(p(t))l[t.id]=Object(i["p"])(o)?a.createConnection(l[t.source.id],l[t.target.id],o,t,t.parent||n,c):a.createConnection(l[t.source.id],l[t.target.id],t,t.parent||n,c);else{var e=Object(i["a"])({},c);-1===d.indexOf(t)&&(e.autoResize=!1),l[t.id]=Object(i["p"])(o)?a.createShape(t,Object(i["x"])(t,["x","y","width","height"]),t.parent||n,o,e):a.createShape(t,Object(i["x"])(t,["x","y","width","height"]),t.parent||n,e)}})),t.elements=Object(i["E"])(l)};var l=n("3fb5"),f=n.n(l),v=Math.round;function g(t){this._canvas=t}function y(t){g.call(this,t)}g.$inject=["canvas"],g.prototype.execute=function(t){var e=t.shape,n=t.position,o=t.parent,r=t.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?Object(i["a"])(e,n):Object(i["a"])(e,{x:n.x-v(e.width/2),y:n.y-v(e.height/2)}),this._canvas.addShape(e,o,r),e},g.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e},f()(y,g),y.$inject=["canvas"];var b=g.prototype.execute;y.prototype.execute=function(t){var e=t.shape;return x(e),e.labelTarget=t.labelTarget,b.call(this,t)};var m=g.prototype.revert;function x(t){["width","height"].forEach((function(e){"undefined"===typeof t[e]&&(t[e]=0)}))}y.prototype.revert=function(t){return t.shape.labelTarget=null,m.call(this,t)};var _=n("aa33");function j(t,e){this._canvas=t,this._modeling=e}function O(t,e){this._modeling=t,this._elementRegistry=e}j.$inject=["canvas","modeling"],j.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=Object(_["b"])(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},j.prototype.revert=function(t){var e=t.connection,n=t.parent,i=t.parentIndex;return e.source=t.source,e.target=t.target,Object(_["a"])(n.children,e,i),this._canvas.addConnection(e,n),e},O.$inject=["modeling","elementRegistry"],O.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry,o=t.elements;Object(i["i"])(o,(function(t){n.get(t.id)&&(t.waypoints?e.removeConnection(t):e.removeShape(t))}))};var w=n("8e51");function E(t,e){this._canvas=t,this._modeling=e}function S(t){return t.waypoints}function k(t){this._modeling=t}E.$inject=["canvas","modeling"],E.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;Object(w["a"])(n.incoming,(function(t){e.removeConnection(t,{nested:!0})})),Object(w["a"])(n.outgoing,(function(t){e.removeConnection(t,{nested:!0})})),Object(w["a"])(n.children,(function(t){S(t)?e.removeConnection(t,{nested:!0}):e.removeShape(t,{nested:!0})}))},E.prototype.execute=function(t){var e=this._canvas,n=t.shape,i=n.parent;return t.oldParent=i,t.oldParentIndex=Object(_["b"])(i.children,n),e.removeShape(n),n},E.prototype.revert=function(t){var e=this._canvas,n=t.shape,i=t.oldParent,o=t.oldParentIndex;return Object(_["a"])(i.children,n,o),e.addShape(n,i),n},k.$inject=["modeling"];var C={x:"y",y:"x"};function M(t,e){this._layouter=t,this._canvas=e}function T(){}k.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,o=t.axis,r=t.dimension;function c(t,e){t.range.min=Math.min(e[o],t.range.min),t.range.max=Math.max(e[o]+e[r],t.range.max)}function a(t){return t[o]+t[r]/2}function s(t){return t.length-1}function u(t){return t.max-t.min}function h(t,n){var i={y:0};i[o]=t-a(n),i[o]&&(i[C[o]]=0,e.moveElements([n],i,n.parent))}var d,p,l=n[0],f=s(n),v=n[f],g=0;Object(i["i"])(n,(function(t,e){var d,p,l;t.elements.length<2?e&&e!==n.length-1&&(c(t,t.elements[0]),g+=u(t.range)):(d=Object(i["B"])(t.elements,o),p=d[0],e===f&&(p=d[s(d)]),l=a(p),t.range=null,Object(i["i"])(d,(function(e){h(l,e),null!==t.range?c(t,e):t.range={min:e[o],max:e[o]+e[r]}})),e&&e!==n.length-1&&(g+=u(t.range)))})),p=Math.abs(v.range.min-l.range.max),d=Math.round((p-g)/(n.length-1)),d<n.length-1||Object(i["i"])(n,(function(t,c){var a,s={};t!==l&&t!==v&&(a=n[c-1],t.range.max=0,Object(i["i"])(t.elements,(function(n,i){s[C[o]]=0,s[o]=a.range.max-n[o]+d,t.range.min!==n[o]&&(s[o]+=n[o]-t.range.min),s[o]&&e.moveElements([n],s,n.parent),t.range.max=Math.max(n[o]+n[r],i?t.range.max:0)})))}))},k.prototype.postExecute=function(t){},M.$inject=["layouter","canvas"],M.prototype.execute=function(t){var e=t.connection,n=e.waypoints;return Object(i["a"])(t,{oldWaypoints:n}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e},M.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e},T.prototype.execute=function(t){var e=t.connection,n=t.delta,o=t.newParent||e.parent,r=t.newParentIndex,c=e.parent;return t.oldParent=c,t.oldParentIndex=Object(_["c"])(c.children,e),Object(_["a"])(o.children,e,r),e.parent=o,Object(i["i"])(e.waypoints,(function(t){t.x+=n.x,t.y+=n.y,t.original&&(t.original.x+=n.x,t.original.y+=n.y)})),e},T.prototype.revert=function(t){var e=t.connection,n=e.parent,o=t.oldParent,r=t.oldParentIndex,c=t.delta;return Object(_["c"])(n.children,e),Object(_["a"])(o.children,e,r),e.parent=o,Object(i["i"])(e.waypoints,(function(t){t.x-=c.x,t.y-=c.y,t.original&&(t.original.x-=c.x,t.original.y-=c.y)})),e};var P=n("d5dd");function B(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function R(t){this._modeling=t}function z(t){this._helper=new R(t)}function A(t){this._modeling=t,this._helper=new R(t)}function L(t){this._modeling=t}function I(t){return t.original||t}function D(t,e){this._modeling=t,this._rules=e}function H(t){this._modeling=t}B.prototype.add=function(t,e){return this.addAll([t],e)},B.prototype.addAll=function(t,e){var n=Object(u["c"])(t,!!e,this);return Object(i["a"])(this,n),this},R.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]},R.prototype.moveClosure=function(t,e,n,o,r){var c=this._modeling,a=t.allShapes,s=t.allConnections,u=t.enclosedConnections,h=t.topLevel,d=!1;r&&r.parent===n&&(d=!0),Object(i["i"])(a,(function(t){c.moveShape(t,e,h[t.id]&&!d&&n,{recurse:!1,layout:!1})})),Object(i["i"])(s,(function(t){var i=!!a[t.source.id],o=!!a[t.target.id];u[t.id]&&i&&o?c.moveConnection(t,e,h[t.id]&&!d&&n):c.layoutConnection(t,{connectionStart:i&&Object(P["a"])(t,t.source,e),connectionEnd:o&&Object(P["b"])(t,t.target,e)})}))},R.prototype.getClosure=function(t){return(new B).addAll(t,!0)},z.$inject=["modeling"],z.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)},z.prototype.postExecute=function(t){var e,n=t.hints;n&&n.primaryShape&&(e=n.primaryShape,n.oldParent=e.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,e)},A.$inject=["modeling"],A.prototype.execute=function(t){var e=t.shape,n=t.delta,o=t.newParent||e.parent,r=t.newParentIndex,c=e.parent;return t.oldBounds=Object(i["x"])(e,["x","y","width","height"]),t.oldParent=c,t.oldParentIndex=Object(_["c"])(c.children,e),Object(_["a"])(o.children,e,r),Object(i["a"])(e,{parent:o,x:e.x+n.x,y:e.y+n.y}),e},A.prototype.postExecute=function(t){var e=t.shape,n=t.delta,o=t.hints,r=this._modeling;!1!==o.layout&&(Object(i["i"])(e.incoming,(function(t){r.layoutConnection(t,{connectionEnd:Object(P["b"])(t,e,n)})})),Object(i["i"])(e.outgoing,(function(t){r.layoutConnection(t,{connectionStart:Object(P["a"])(t,e,n)})}))),!1!==o.recurse&&this.moveChildren(t)},A.prototype.revert=function(t){var e=t.shape,n=t.oldParent,o=t.oldParentIndex,r=t.delta;return Object(_["a"])(n.children,e,o),Object(i["a"])(e,{parent:n,x:e.x-r.x,y:e.y-r.y}),e},A.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)},A.prototype.getNewParent=function(t){return t.newParent||t.shape.parent},L.$inject=["modeling"],L.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,o=t.connection,r=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return Object(i["l"])(r)&&(t.oldWaypoints=o.waypoints,o.waypoints=r),e&&(t.oldSource=o.source,o.source=e),n&&(t.oldTarget=o.target,o.target=n),o},L.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,o=t.newTarget,r=t.dockingOrPoints,c=t.hints||{},a={};c.connectionStart&&(a.connectionStart=c.connectionStart),c.connectionEnd&&(a.connectionEnd=c.connectionEnd),!1!==c.layoutConnection&&(!n||o&&"source"!==c.docking||(a.connectionStart=a.connectionStart||I(Object(i["l"])(r)?r[0]:r)),!o||n&&"target"!==c.docking||(a.connectionEnd=a.connectionEnd||I(Object(i["l"])(r)?r[r.length-1]:r)),c.newWaypoints&&(a.waypoints=c.newWaypoints),this._modeling.layoutConnection(e,a))},L.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,i=t.oldWaypoints,o=t.connection;return e&&(o.source=e),n&&(o.target=n),i&&(o.waypoints=i),o},D.$inject=["modeling","rules"],D.prototype.preExecute=function(t){var e,n=this,o=this._modeling,r=this._rules,c=t.oldShape,a=t.newData,s=t.hints||{};function u(t,e,n){return r.allowed("connection.reconnect",{connection:n,source:t,target:e})}var h,d={x:a.x,y:a.y},p={x:c.x,y:c.y,width:c.width,height:c.height};e=t.newShape=t.newShape||n.createShape(a,d,c.parent,s),c.host&&o.updateAttachment(e,c.host),!1!==s.moveChildren&&(h=c.children.slice(),o.moveElements(h,{x:0,y:0},e,s));var l=c.incoming.slice(),f=c.outgoing.slice();Object(i["i"])(l,(function(t){var i=t.source,o=u(i,e,t);o&&n.reconnectEnd(t,e,Object(P["d"])(t,e,p),s)})),Object(i["i"])(f,(function(t){var i=t.target,o=u(e,i,t);o&&n.reconnectStart(t,e,Object(P["c"])(t,e,p),s)}))},D.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)},D.prototype.execute=function(t){},D.prototype.revert=function(t){},D.prototype.createShape=function(t,e,n,i){return this._modeling.createShape(t,e,n,i)},D.prototype.reconnectStart=function(t,e,n,i){this._modeling.reconnectStart(t,e,n,i)},D.prototype.reconnectEnd=function(t,e,n,i){this._modeling.reconnectEnd(t,e,n,i)},H.$inject=["modeling"],H.prototype.execute=function(t){var e=t.shape,n=t.newBounds,o=t.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},Object(i["a"])(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},H.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,o=t.oldBounds,r=t.hints||{};!1!==r.layout&&(Object(i["i"])(n.incoming,(function(t){e.layoutConnection(t,{connectionEnd:Object(P["d"])(t,n,o)})})),Object(i["i"])(n.outgoing,(function(t){e.layoutConnection(t,{connectionStart:Object(P["c"])(t,n,o)})})))},H.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return Object(i["a"])(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e};var $=n("4892");function G(t){this._modeling=t}function F(t){return Object(i["a"])({},t)}function N(t){return Object(i["u"])(t.waypoints,(function(t){return t=F(t),t.original&&(t.original=F(t.original)),t}))}function V(t){switch(t){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function W(t,e,n){var i=V(n);return/e|s/.test(n)?t[i]>e:/n|w/.test(n)?t[i]<e:void 0}function U(t,e){return-1!==t.indexOf(e)}function q(t){return{x:t.x,y:t.y,height:t.height,width:t.width}}function Y(t){this._modeling=t}function K(t){var e={};return Object(i["i"])(t,(function(t){e[t.id]=t.hidden,t.children&&(e=Object(i["a"])({},e,K(t.children)))})),e}function Z(t,e){var n=[];return Object(i["i"])(t,(function(t){t.hidden=e,n=n.concat(t),t.children&&(n=n.concat(Z(t.children,t.collapsed||e)))})),n}function X(t,e){var n=[];return Object(i["i"])(t,(function(t){t.hidden=e[t.id],n=n.concat(t),t.children&&(n=n.concat(X(t.children,e)))})),n}function J(t){this._modeling=t}function Q(t,e){return Object(_["c"])(t&&t.attachers,e)}function tt(t,e,n){if(t){var i=t.attachers;i||(t.attachers=i=[]),Object(_["a"])(i,e,n)}}function et(){}function nt(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var i=this;t.on("diagram.init",(function(){i.registerHandlers(n)}))}G.$inject=["modeling"],G.prototype.preExecute=function(t){var e=t.delta,n=t.direction,o=t.movingShapes,r=t.resizingShapes,c=t.start,a={};this.moveShapes(o,e),Object(i["i"])(r,(function(t){a[t.id]=q(t)})),this.resizeShapes(r,e,n),this.updateConnectionWaypoints(Object($["b"])(o,r),e,n,c,o,r,a)},G.prototype.execute=function(){},G.prototype.revert=function(){},G.prototype.moveShapes=function(t,e){var n=this;Object(i["i"])(t,(function(t){n._modeling.moveShape(t,e,null,{autoResize:!1,layout:!1,recurse:!1})}))},G.prototype.resizeShapes=function(t,e,n){var o=this;Object(i["i"])(t,(function(t){var i=Object($["c"])(t,n,e);o._modeling.resizeShape(t,i,null,{attachSupport:!1,autoResize:!1,layout:!1})}))},G.prototype.updateConnectionWaypoints=function(t,e,n,o,r,c,a){var s=this,u=r.concat(c);Object(i["i"])(t,(function(t){var h=t.source,d=t.target,p=N(t),l=V(n),f={labelBehavior:!1};U(u,h)&&U(u,d)?(p=Object(i["u"])(p,(function(t){return W(t,o,n)&&(t[l]=t[l]+e[l]),t.original&&W(t.original,o,n)&&(t.original[l]=t.original[l]+e[l]),t})),s._modeling.updateWaypoints(t,p,{labelBehavior:!1})):(U(u,h)||U(u,d))&&(U(r,h)?f.connectionStart=Object(P["a"])(t,h,e):U(r,d)?f.connectionEnd=Object(P["b"])(t,d,e):U(c,h)?f.connectionStart=Object(P["c"])(t,h,a[h.id]):U(c,d)&&(f.connectionEnd=Object(P["d"])(t,d,a[d.id])),s._modeling.layoutConnection(t,f))}))},Y.$inject=["modeling"],Y.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=K(n),e.collapsed=!e.collapsed;var i=Z(n,e.collapsed);return[e].concat(i)},Y.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,i=e.children,o=X(i,n);return e.collapsed=!e.collapsed,[e].concat(o)},J.$inject=["modeling"],J.prototype.execute=function(t){var e=t.shape,n=t.newHost,i=e.host;return t.oldHost=i,t.attacherIdx=Q(i,e),tt(n,e),e.host=n,e},J.prototype.revert=function(t){var e=t.shape,n=t.newHost,i=t.oldHost,o=t.attacherIdx;return e.host=i,Q(n,e),tt(i,e,o),e},et.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e},et.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e},n.d(e,"a",(function(){return nt})),nt.$inject=["eventBus","elementFactory","commandStack"],nt.prototype.getHandlers=function(){return{"shape.append":c,"shape.create":g,"shape.delete":E,"shape.move":A,"shape.resize":H,"shape.replace":D,"shape.toggleCollapse":Y,spaceTool:G,"label.create":y,"connection.create":s,"connection.delete":j,"connection.move":T,"connection.layout":M,"connection.updateWaypoints":et,"connection.reconnect":L,"elements.create":d,"elements.move":z,"elements.delete":O,"elements.distribute":k,"elements.align":r,"element.updateAttachment":J}},nt.prototype.registerHandlers=function(t){Object(i["i"])(this.getHandlers(),(function(e,n){t.registerHandler(n,e)}))},nt.prototype.moveShape=function(t,e,n,i,o){"object"===typeof i&&(o=i,i=null);var r={shape:t,delta:e,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("shape.move",r)},nt.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)},nt.prototype.moveElements=function(t,e,n,i){i=i||{};var o,r=i.attach,c=n;!0===r?(o=n,c=n.parent):!1===r&&(o=null);var a={shapes:t,delta:e,newParent:c,newHost:o,hints:i};this._commandStack.execute("elements.move",a)},nt.prototype.moveConnection=function(t,e,n,i,o){"object"===typeof i&&(o=i,i=void 0);var r={connection:t,delta:e,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("connection.move",r)},nt.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)},nt.prototype.createConnection=function(t,e,n,i,o,r){"object"===typeof n&&(r=o,o=i,i=n,n=void 0),i=this._create("connection",i);var c={source:t,target:e,parent:o,parentIndex:n,connection:i,hints:r};return this._commandStack.execute("connection.create",c),c.connection},nt.prototype.createShape=function(t,e,n,i,o){"number"!==typeof i&&(o=i,i=void 0),o=o||{};var r,c,a=o.attach;t=this._create("shape",t),a?(r=n.parent,c=n):r=n;var s={position:e,shape:t,parent:r,parentIndex:i,host:c,hints:o};return this._commandStack.execute("shape.create",s),s.shape},nt.prototype.createElements=function(t,e,n,o,r){Object(i["l"])(t)||(t=[t]),"number"!==typeof o&&(r=o,o=void 0),r=r||{};var c={position:e,elements:t,parent:n,parentIndex:o,hints:r};return this._commandStack.execute("elements.create",c),c.elements},nt.prototype.createLabel=function(t,e,n,i){n=this._create("label",n);var o={labelTarget:t,position:e,parent:i||t.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape},nt.prototype.appendShape=function(t,e,n,i,o){o=o||{},e=this._create("shape",e);var r={source:t,position:n,target:i,shape:e,connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",r),r.shape},nt.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)},nt.prototype.distributeElements=function(t,e,n){var i={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",i)},nt.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)},nt.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)},nt.prototype.replaceShape=function(t,e,n){var i={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},nt.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)},nt.prototype.resizeShape=function(t,e,n,i){var o={shape:t,newBounds:e,minBounds:n,hints:i};this._commandStack.execute("shape.resize",o)},nt.prototype.createSpace=function(t,e,n,i,o){var r={delta:n,direction:i,movingShapes:t,resizingShapes:e,start:o};this._commandStack.execute("spaceTool",r)},nt.prototype.updateWaypoints=function(t,e,n){var i={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},nt.prototype.reconnect=function(t,e,n,i,o){var r={connection:t,newSource:e,newTarget:n,dockingOrPoints:i,hints:o||{}};this._commandStack.execute("connection.reconnect",r)},nt.prototype.reconnectStart=function(t,e,n,o){o||(o={}),this.reconnect(t,e,t.target,n,Object(i["a"])(o,{docking:"source"}))},nt.prototype.reconnectEnd=function(t,e,n,o){o||(o={}),this.reconnect(t,t.source,e,n,Object(i["a"])(o,{docking:"target"}))},nt.prototype.connect=function(t,e,n,i){return this.createConnection(t,e,n||{},t.parent,i)},nt.prototype._create=function(t,e){return e instanceof o["a"]?e:this._elementFactory.create(t,e)},nt.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)}},"3b55":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("e759");function o(){}o.prototype.layoutConnection=function(t,e){return e=e||{},[e.connectionStart||Object(i["e"])(e.source||t.source),e.connectionEnd||Object(i["e"])(e.target||t.target)]}},"3bf4":function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r=".djs-palette-toggle",c=".entry",a=r+", "+c,s="djs-palette-",u="shown",h="open",d="two-column",p=1e3;function l(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",(function(t){var e=t.tool;n.updateToolHighlight(e)})),t.on("i18n.changed",(function(){n._update()})),t.on("diagram.init",(function(){n._diagramInitialized=!0,n._rebuild()}))}function f(t,e){var n=Object(o["b"])(t),r=Object(i["l"])(e)?e:e.split(/\s+/g);r.forEach((function(t){n.add(t)}))}function v(t,e){var n=e.getPaletteEntries();return Object(i["n"])(n)?n(t):(Object(i["i"])(n,(function(e,n){t[n]=e})),t)}l.$inject=["eventBus","canvas"],l.prototype.registerProvider=function(t,e){e||(e=t,t=p),this._eventBus.on("palette.getProviders",t,(function(t){t.providers.push(e)})),this._rebuild()},l.prototype.getEntries=function(){var t=this._getProviders();return t.reduce(v,{})},l.prototype._rebuild=function(){if(this._diagramInitialized){var t=this._getProviders();t.length&&(this._container||this._init(),this._update())}},l.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),i=this._container=Object(o["f"])(l.HTML_MARKUP);n.appendChild(i),Object(o["b"])(n).add(s+u),o["e"].bind(i,a,"click",(function(e){var n=e.delegateTarget;if(Object(o["h"])(n,r))return t.toggle();t.trigger("click",e)})),o["g"].bind(i,"mousedown",(function(t){t.stopPropagation()})),o["e"].bind(i,c,"dragstart",(function(e){t.trigger("dragstart",e)})),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:i})},l.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},l.prototype._toggleState=function(t){t=t||{};var e,n=this._getParentContainer(),i=this._container,r=this._eventBus,c=Object(o["b"])(i),a=Object(o["b"])(n);e="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),c.toggle(d,e),a.toggle(s+d,e),"open"in t&&(c.toggle(h,t.open),a.toggle(s+h,t.open)),r.fire("palette.changed",{twoColumn:e,open:this.isOpen()})},l.prototype._update=function(){var t=Object(o["i"])(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Object(o["c"])(t),Object(i["i"])(e,(function(e,n){var i=e.group||"default",r=Object(o["i"])("[data-group="+i+"]",t);r||(r=Object(o["f"])('<div class="group" data-group="'+i+'"></div>'),t.appendChild(r));var c=e.html||(e.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),a=Object(o["f"])(c);r.appendChild(a),e.separator||(Object(o["a"])(a,"data-action",n),e.title&&Object(o["a"])(a,"title",e.title),e.className&&f(a,e.className),e.imageUrl&&a.appendChild(Object(o["f"])('<img src="'+e.imageUrl+'">')))})),this.open()},l.prototype.trigger=function(t,e,n){var r,c,a,s=this._entries,u=e.delegateTarget||e.target;if(!u)return e.preventDefault();r=s[Object(o["a"])(u,"data-action")],r&&(c=r.action,a=e.originalEvent||e,Object(i["n"])(c)?"click"===t&&c(a,n):c[t]&&c[t](a,n),e.preventDefault())},l.prototype._layoutChanged=function(){this._toggleState({})},l.prototype._needsCollapse=function(t,e){var n=50,i=46*Object.keys(e).length;return t<i+n},l.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},l.prototype.open=function(){this._toggleState({open:!0})},l.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},l.prototype.isActiveTool=function(t){return t&&this._activeTool===t},l.prototype.updateToolHighlight=function(t){var e,n;this._toolsContainer||(e=Object(o["i"])(".djs-palette-entries",this._container),this._toolsContainer=Object(o["i"])("[data-group=tools]",e)),n=this._toolsContainer,Object(i["i"])(n.children,(function(e){var n=e.getAttribute("data-action");if(n){var i=Object(o["b"])(e);n=n.replace("-tool",""),i.contains("entry")&&n===t?i.add("highlighted-entry"):i.remove("highlighted-entry")}}))},l.prototype.isOpen=function(){return Object(o["b"])(this._container).has(h)},l.prototype._getParentContainer=function(){return this._canvas.getContainer()},l.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';e["a"]={__init__:["palette"],palette:["type",l]}},"3d2a":function(t,e,n){"use strict";var i=/,?([a-z]),?/gi,o=parseFloat,r=Math,c=r.PI,a=r.min,s=r.max,u=r.pow,h=r.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,p=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,l=Array.isArray||function(t){return t instanceof Array};function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)f(t,n)&&(e[n]=v(t[n]));return e}function g(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function y(t){function e(){var n=Array.prototype.slice.call(arguments,0),i=n.join(""),o=e.cache=e.cache||{},r=e.count=e.count||[];return f(o,i)?(g(r,i),o[i]):(r.length>=1e3&&delete o[r.shift()],r.push(i),o[i]=t.apply(0,n),o[i])}return e}function b(t){if(!t)return null;var e=m(t);if(e.arr)return v(e.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return l(t)&&l(t[0])&&(i=v(t)),i.length||String(t).replace(d,(function(t,e,o){var r=[],c=e.toLowerCase();o.replace(p,(function(t,e){e&&r.push(+e)})),"m"==c&&r.length>2&&(i.push([e].concat(r.splice(0,2))),c="l",e="m"==e?"l":"L");while(r.length>=n[c])if(i.push([e].concat(r.splice(0,n[c]))),!n[c])break})),i.toString=m.toString,e.arr=v(i),i}function m(t){var e=m.ps=m.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var n in e)f(e,n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])})),e[t]}function x(t,e,n,i){return 1===arguments.length&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,height:i,x2:t+n,y2:e+i}}function _(){return this.join(",").replace(i,"$1")}function j(t){var e=v(t);return e.toString=_,e}function O(t,e,n,i,o,r,c,a,s){var h=1-s,d=u(h,3),p=u(h,2),l=s*s,f=l*s,v=d*t+3*p*s*n+3*h*s*s*o+f*c,g=d*e+3*p*s*i+3*h*s*s*r+f*a;return{x:T(v),y:T(g)}}function w(t){var e=D.apply(null,t);return x(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0)}function E(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function S(t,e){return t=x(t),e=x(e),E(e,t.x,t.y)||E(e,t.x2,t.y)||E(e,t.x,t.y2)||E(e,t.x2,t.y2)||E(t,e.x,e.y)||E(t,e.x2,e.y)||E(t,e.x,e.y2)||E(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function k(t,e,n,i,o){var r=-3*e+9*n-9*i+3*o,c=t*r+6*e-12*n+6*i;return t*c-3*e+3*n}function C(t,e,n,i,o,c,a,s,u){null==u&&(u=1),u=u>1?1:u<0?0:u;for(var h=u/2,d=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,v=0;v<d;v++){var g=h*p[v]+h,y=k(g,t,n,o,a),b=k(g,e,i,c,s),m=y*y+b*b;f+=l[v]*r.sqrt(m)}return h*f}function M(t,e,n,i,o,r,c,u){if(!(s(t,n)<a(o,c)||a(t,n)>s(o,c)||s(e,i)<a(r,u)||a(e,i)>s(r,u))){var h=(t*i-e*n)*(o-c)-(t-n)*(o*u-r*c),d=(t*i-e*n)*(r-u)-(e-i)*(o*u-r*c),p=(t-n)*(r-u)-(e-i)*(o-c);if(p){var l=T(h/p),f=T(d/p),v=+l.toFixed(2),g=+f.toFixed(2);if(!(v<+a(t,n).toFixed(2)||v>+s(t,n).toFixed(2)||v<+a(o,c).toFixed(2)||v>+s(o,c).toFixed(2)||g<+a(e,i).toFixed(2)||g>+s(e,i).toFixed(2)||g<+a(r,u).toFixed(2)||g>+s(r,u).toFixed(2)))return{x:l,y:f}}}}function T(t){return Math.round(1e11*t)/1e11}function P(t,e,n){var i=w(t),o=w(e);if(!S(i,o))return n?0:[];for(var r=C.apply(0,t),c=C.apply(0,e),a=z(t)?1:~~(r/5)||1,s=z(e)?1:~~(c/5)||1,u=[],d=[],p={},l=n?0:[],f=0;f<a+1;f++){var v=O.apply(0,t.concat(f/a));u.push({x:v.x,y:v.y,t:f/a})}for(f=0;f<s+1;f++)v=O.apply(0,e.concat(f/s)),d.push({x:v.x,y:v.y,t:f/s});for(f=0;f<a;f++)for(var g=0;g<s;g++){var y,b=u[f],m=u[f+1],x=d[g],_=d[g+1],j=h(m.x-b.x)<.01?"y":"x",E=h(_.x-x.x)<.01?"y":"x",k=M(b.x,b.y,m.x,m.y,x.x,x.y,_.x,_.y);if(k){if(y=k.x.toFixed(9)+"#"+k.y.toFixed(9),p[y])continue;p[y]=!0;var T=b.t+h((k[j]-b[j])/(m[j]-b[j]))*(m.t-b.t),P=x.t+h((k[E]-x[E])/(_[E]-x[E]))*(_.t-x.t);T>=0&&T<=1&&P>=0&&P<=1&&(n?l++:l.push({x:k.x,y:k.y,t1:T,t2:P}))}}return l}function B(t,e,n){t=H(t),e=H(e);for(var i,o,r,c,a,s,u,h,d,p,l=n?0:[],f=0,v=t.length;f<v;f++){var g=t[f];if("M"==g[0])i=a=g[1],o=s=g[2];else{"C"==g[0]?(d=[i,o].concat(g.slice(1)),i=d[6],o=d[7]):(d=[i,o,i,o,a,s,a,s],i=a,o=s);for(var y=0,b=e.length;y<b;y++){var m=e[y];if("M"==m[0])r=u=m[1],c=h=m[2];else{"C"==m[0]?(p=[r,c].concat(m.slice(1)),r=p[6],c=p[7]):(p=[r,c,r,c,u,h,u,h],r=u,c=h);var x=P(d,p,n);if(n)l+=x;else{for(var _=0,j=x.length;_<j;_++)x[_].segment1=f,x[_].segment2=y,x[_].bez1=d,x[_].bez2=p;l=l.concat(x)}}}}}return l}function R(t){var e=m(t);if(e.abs)return j(e.abs);if(l(t)&&l(t&&t[0])||(t=b(t)),!t||!t.length)return[["M",0,0]];var n,i=[],o=0,r=0,c=0,a=0,s=0;"M"==t[0][0]&&(o=+t[0][1],r=+t[0][2],c=o,a=r,s++,i[0]=["M",o,r]);for(var u,h,d=s,p=t.length;d<p;d++){if(i.push(u=[]),h=t[d],n=h[0],n!=n.toUpperCase())switch(u[0]=n.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+o,u[7]=+h[7]+r;break;case"V":u[1]=+h[1]+r;break;case"H":u[1]=+h[1]+o;break;case"M":c=+h[1]+o,a=+h[2]+r;default:for(var f=1,v=h.length;f<v;f++)u[f]=+h[f]+(f%2?o:r)}else for(var g=0,y=h.length;g<y;g++)u[g]=h[g];switch(n=n.toUpperCase(),u[0]){case"Z":o=+c,r=+a;break;case"H":o=u[1];break;case"V":r=u[1];break;case"M":c=u[u.length-2],a=u[u.length-1];default:o=u[u.length-2],r=u[u.length-1]}}return i.toString=_,e.abs=j(i),i}function z(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]}function A(t,e,n,i){return[t,e,n,i,n,i]}function L(t,e,n,i,o,r){var c=1/3,a=2/3;return[c*t+a*n,c*e+a*i,c*o+a*n,c*r+a*i,o,r]}function I(t,e,n,i,o,a,s,u,d,p){var l,f=120*c/180,v=c/180*(+o||0),g=[],b=y((function(t,e,n){var i=t*r.cos(n)-e*r.sin(n),o=t*r.sin(n)+e*r.cos(n);return{x:i,y:o}}));if(p)k=p[0],C=p[1],E=p[2],S=p[3];else{l=b(t,e,-v),t=l.x,e=l.y,l=b(u,d,-v),u=l.x,d=l.y;var m=(t-u)/2,x=(e-d)/2,_=m*m/(n*n)+x*x/(i*i);_>1&&(_=r.sqrt(_),n*=_,i*=_);var j=n*n,O=i*i,w=(a==s?-1:1)*r.sqrt(h((j*O-j*x*x-O*m*m)/(j*x*x+O*m*m))),E=w*n*x/i+(t+u)/2,S=w*-i*m/n+(e+d)/2,k=r.asin(((e-S)/i).toFixed(9)),C=r.asin(((d-S)/i).toFixed(9));k=t<E?c-k:k,C=u<E?c-C:C,k<0&&(k=2*c+k),C<0&&(C=2*c+C),s&&k>C&&(k-=2*c),!s&&C>k&&(C-=2*c)}var M=C-k;if(h(M)>f){var T=C,P=u,B=d;C=k+f*(s&&C>k?1:-1),u=E+n*r.cos(C),d=S+i*r.sin(C),g=I(u,d,n,i,o,0,s,P,B,[C,T,E,S])}M=C-k;var R=r.cos(k),z=r.sin(k),A=r.cos(C),L=r.sin(C),D=r.tan(M/4),H=4/3*n*D,$=4/3*i*D,G=[t,e],F=[t+H*z,e-$*R],N=[u+H*L,d-$*A],V=[u,d];if(F[0]=2*G[0]-F[0],F[1]=2*G[1]-F[1],p)return[F,N,V].concat(g);g=[F,N,V].concat(g).join().split(",");for(var W=[],U=0,q=g.length;U<q;U++)W[U]=U%2?b(g[U-1],g[U],v).y:b(g[U],g[U+1],v).x;return W}function D(t,e,n,i,o,c,u,d){for(var p,l,f,v,g,y,b,m,x=[],_=[[],[]],j=0;j<2;++j)if(0==j?(l=6*t-12*n+6*o,p=-3*t+9*n-9*o+3*u,f=3*n-3*t):(l=6*e-12*i+6*c,p=-3*e+9*i-9*c+3*d,f=3*i-3*e),h(p)<1e-12){if(h(l)<1e-12)continue;v=-f/l,0<v&&v<1&&x.push(v)}else b=l*l-4*f*p,m=r.sqrt(b),b<0||(g=(-l+m)/(2*p),0<g&&g<1&&x.push(g),y=(-l-m)/(2*p),0<y&&y<1&&x.push(y));var O,w=x.length,E=w;while(w--)v=x[w],O=1-v,_[0][w]=O*O*O*t+3*O*O*v*n+3*O*v*v*o+v*v*v*u,_[1][w]=O*O*O*e+3*O*O*v*i+3*O*v*v*c+v*v*v*d;return _[0][E]=t,_[1][E]=e,_[0][E+1]=u,_[1][E+1]=d,_[0].length=_[1].length=E+2,{x0:a.apply(0,_[0]),y0:a.apply(0,_[1]),x1:s.apply(0,_[0]),y1:s.apply(0,_[1])}}function H(t){var e=m(t);if(e.curve)return j(e.curve);for(var n=R(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(t,e,n){var i,o;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(I.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,o=2*e.y-e.by):(i=e.x,o=e.y),t=["C",i,o].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(L(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(L(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(A(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(A(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(A(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(A(e.x,e.y,e.X,e.Y));break}return t},c=function(t,e){if(t[e].length>7){t[e].shift();var i=t[e];while(i.length)a[e]="A",t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),d=n.length}},a=[],s="",u="",h=0,d=n.length;h<d;h++){n[h]&&(s=n[h][0]),"C"!=s&&(a[h]=s,h&&(u=a[h-1])),n[h]=r(n[h],i,u),"A"!=a[h]&&"C"==s&&(a[h]="C"),c(n,h);var p=n[h],l=p.length;i.x=p[l-2],i.y=p[l-1],i.bx=o(p[l-4])||i.x,i.by=o(p[l-3])||i.y}return e.curve=j(n),n}t.exports=B},"3da1":function(t,e,n){"use strict";var i=n("6ffd"),o=n("02a3"),r=n("e506"),c=Math.min,a=Math.max;function s(t){t.preventDefault()}function u(t){t.stopPropagation()}function h(t){return t.nodeType===Node.TEXT_NODE}function d(t){return[].slice.call(t)}function p(t){this.container=t.container,this.parent=Object(r["f"])('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Object(r["i"])("[contenteditable]",this.parent),this.keyHandler=t.keyHandler||function(){},this.resizeHandler=t.resizeHandler||function(){},this.autoResize=Object(o["b"])(this.autoResize,this),this.handlePaste=Object(o["b"])(this.handlePaste,this)}function l(t){return t.replace(/\r\n|\r|\n/g,"\n")}function f(t,e){this._eventBus=t,this._providers=[],this._textbox=new p({container:e.getContainer(),keyHandler:Object(o["b"])(this._handleKey,this),resizeHandler:Object(o["b"])(this._handleResize,this)})}p.prototype.create=function(t,e,n,i){var c=this,a=this.parent,s=this.content,h=this.container;i=this.options=i||{},e=this.style=e||{};var d=Object(o["x"])(e,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);Object(o["a"])(a.style,{width:t.width+"px",height:t.height+"px",maxWidth:t.maxWidth+"px",maxHeight:t.maxHeight+"px",minWidth:t.minWidth+"px",minHeight:t.minHeight+"px",left:t.x+"px",top:t.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},d);var p=Object(o["x"])(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return Object(o["a"])(s.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},p),i.centerVertically&&Object(o["a"])(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},p),s.innerText=n,r["g"].bind(s,"keydown",this.keyHandler),r["g"].bind(s,"mousedown",u),r["g"].bind(s,"paste",c.handlePaste),i.autoResize&&r["g"].bind(s,"input",this.autoResize),i.resizable&&this.resizable(e),h.appendChild(a),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),a},p.prototype.handlePaste=function(t){var e,n=this.options,i=this.style;if(t.preventDefault(),e=t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(e),n.autoResize){var o=this.autoResize(i);o&&this.resizeHandler(o)}},p.prototype.insertText=function(t){t=l(t);var e=document.execCommand("insertText",!1,t);e||this._insertTextIE(t)},p.prototype._insertTextIE=function(t){var e,n,i=this.getSelection(),o=i.startContainer,c=i.endContainer,a=i.startOffset,s=i.endOffset,u=i.commonAncestorContainer,p=d(u.childNodes);if(h(u)){var l=o.textContent;o.textContent=l.substring(0,a)+t+l.substring(s),e=o,n=a+t.length}else if(o===this.content&&c===this.content){var f=document.createTextNode(t);this.content.insertBefore(f,p[a]),e=f,n=f.textContent.length}else{var v=p.indexOf(o),g=p.indexOf(c);p.forEach((function(e,n){n===v?e.textContent=o.textContent.substring(0,a)+t+c.textContent.substring(s):n>v&&n<=g&&Object(r["k"])(e)})),e=o,n=a+t.length}e&&void 0!==n&&setTimeout((function(){self.setSelection(e,n)}))},p.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var i=t.getBoundingClientRect(),o=e.scrollHeight;t.style.height=o+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}},p.prototype.resizable=function(){var t=this,e=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,h=parseInt(this.style.minHeight)||0,d=parseInt(this.style.maxWidth)||1/0,p=parseInt(this.style.maxHeight)||1/0;if(!n){var l,f,v,g;n=this.resizeHandle=Object(r["f"])('<div class="djs-direct-editing-resize-handle"></div>');var y=function(t){s(t),u(t),l=t.clientX,f=t.clientY;var n=e.getBoundingClientRect();v=n.width,g=n.height,r["g"].bind(document,"mousemove",b),r["g"].bind(document,"mouseup",m)},b=function(n){s(n),u(n);var o=c(a(v+n.clientX-l,i),d),r=c(a(g+n.clientY-f,h),p);e.style.width=o+"px",e.style.height=r+"px",t.resizeHandler({width:v,height:g,dx:n.clientX-l,dy:n.clientY-f})},m=function(t){s(t),u(t),r["g"].unbind(document,"mousemove",b,!1),r["g"].unbind(document,"mouseup",m,!1)};r["g"].bind(n,"mousedown",y)}Object(o["a"])(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(n)},p.prototype.destroy=function(){var t=this.parent,e=this.content,n=this.resizeHandle;e.innerText="",t.removeAttribute("style"),e.removeAttribute("style"),r["g"].unbind(e,"keydown",this.keyHandler),r["g"].unbind(e,"mousedown",u),r["g"].unbind(e,"input",this.autoResize),r["g"].unbind(e,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Object(r["k"])(n)),Object(r["k"])(t)},p.prototype.getValue=function(){return this.content.innerText.trim()},p.prototype.getSelection=function(){var t=window.getSelection(),e=t.getRangeAt(0);return e},p.prototype.setSelection=function(t,e){var n=document.createRange();null===t?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},f.$inject=["eventBus","canvas"],f.prototype.registerProvider=function(t){this._providers.push(t)},f.prototype.isActive=function(t){return!(!this._active||t&&this._active.element!==t)},f.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},f.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})},f.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},f.prototype.complete=function(){var t=this._active;if(t){var e,n=t.context.bounds,i=this.$textbox.getBoundingClientRect(),o=this.getValue(),r=t.context.text;o===r&&i.height===n.height&&i.width===n.width||(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,o,t.context.text,{x:i.left-e.left,y:i.top-e.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},f.prototype.getValue=function(){return this._textbox.getValue()},f.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;return 27===e?(t.preventDefault(),this.cancel()):13!==e||t.shiftKey?void 0:(t.preventDefault(),this.complete())},f.prototype._handleResize=function(t){this._fire("resize",t)},f.prototype.activate=function(t){var e;this.isActive()&&this.cancel();var n=Object(o["f"])(this._providers,(function(n){return(e=n.activate(t))?n:null}));return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:t,context:e,provider:n},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};e["a"]={__depends__:[i["a"]],__init__:["directEditing"],directEditing:["type",f]}},"40e4":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=1e3;function o(t,e){var n=this;e=e||i,t.on(["render.shape","render.connection"],e,(function(t,e){var i=t.type,o=e.element,r=e.gfx,c=e.attrs;if(n.canRender(o))return"render.shape"===i?n.drawShape(r,o,c):n.drawConnection(r,o,c)})),t.on(["render.getShapePath","render.getConnectionPath"],e,(function(t,e){if(n.canRender(e))return"render.getShapePath"===t.type?n.getShapePath(e):n.getConnectionPath(e)}))}o.prototype.canRender=function(){},o.prototype.drawShape=function(){},o.prototype.drawConnection=function(){},o.prototype.getShapePath=function(){},o.prototype.getConnectionPath=function(){}},"43a5":function(t,e,n){"use strict";var i=n("ad34"),o=n("4452"),r=n("02a3"),c={moveSpeed:1,moveSpeedAccelerated:10},a=1500,s="left",u="up",h="right",d="down",p={ArrowLeft:s,Left:s,ArrowUp:u,Up:u,ArrowRight:h,Right:h,ArrowDown:d,Down:d},l={left:function(t){return{x:-t,y:0}},up:function(t){return{x:0,y:-t}},right:function(t){return{x:t,y:0}},down:function(t){return{x:0,y:t}}};function f(t,e,n,i,o){var s=this;this._config=Object(r["a"])({},c,t||{}),e.addListener(a,(function(t){var n=t.keyEvent,i=p[n.key];if(i&&!e.isCmd(n)){var o=e.isShift(n);return s.moveSelection(i,o),!0}})),this.moveSelection=function(t,e){var r=o.get();if(r.length){var c=this._config[e?"moveSpeedAccelerated":"moveSpeed"],a=l[t](c),s=i.allowed("elements.move",{shapes:r});s&&n.moveElements(r,a)}}}f.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];e["a"]={__depends__:[i["a"],o["a"]],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",f]}},4452:function(t,e,n){"use strict";var i=n("6ffd"),o=n("76e2"),r=n("02a3");function c(t,e){this._eventBus=t,this._canvas=e,this._selectedElements=[];var n=this;t.on(["shape.remove","connection.remove"],(function(t){var e=t.element;n.deselect(e)})),t.on(["diagram.clear","plane.set"],(function(t){n.select(null)}))}c.$inject=["eventBus","canvas"],c.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(-1!==n){var i=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},c.prototype.get=function(){return this._selectedElements},c.prototype.isSelected=function(t){return-1!==this._selectedElements.indexOf(t)},c.prototype.select=function(t,e){var n=this._selectedElements,i=n.slice();Object(r["l"])(t)||(t=t?[t]:[]);var o=this._canvas;t=t.filter((function(t){var e=o.findPlane(t);return e===o.getActivePlane()})),e?Object(r["i"])(t,(function(t){-1===n.indexOf(t)&&n.push(t)})):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var a="hover",s="selected";function u(t,e,n,i){function o(t,n){e.addMarker(t,n)}function c(t,n){e.removeMarker(t,n)}this._multiSelectionBox=null,t.on("element.hover",(function(t){o(t.element,a)})),t.on("element.out",(function(t){c(t.element,a)})),t.on("selection.changed",(function(t){function e(t){c(t,s)}function n(t){o(t,s)}var i=t.oldSelection,a=t.newSelection;Object(r["i"])(i,(function(t){-1===a.indexOf(t)&&e(t)})),Object(r["i"])(a,(function(t){-1===i.indexOf(t)&&n(t)}))}))}u.$inject=["eventBus","canvas","selection","styles"];var h=n("fbb1");function d(t,e,n,i){t.on("create.end",500,(function(t){var n=t.context,i=n.canExecute,o=n.elements,c=n.hints||{},a=c.autoSelect;if(i){if(!1===a)return;Object(r["l"])(a)?e.select(a):e.select(o.filter(p))}})),t.on("connect.end",500,(function(t){var n=t.context,i=n.canExecute,o=n.hover;i&&o&&e.select(o)})),t.on("shape.move.end",500,(function(t){var n=t.previousSelection||[],o=i.get(t.context.shape.id),c=Object(r["f"])(n,(function(t){return o.id===t.id}));c||e.select(o)})),t.on("element.click",(function(t){if(Object(h["d"])(t)){var i=t.element;i===n.getRootElement()&&(i=null);var o=e.isSelected(i),r=e.get().length>1,c=Object(h["a"])(t)||Object(h["b"])(t);if(o&&r)return c?e.deselect(i):e.select(i);o?e.deselect(i):e.select(i,c)}}))}function p(t){return!t.hidden}d.$inject=["eventBus","selection","canvas","elementRegistry"];e["a"]={__init__:["selectionVisuals","selectionBehavior"],__depends__:[i["a"],o["a"]],selection:["type",c],selectionVisuals:["type",u],selectionBehavior:["type",d]}},"44a2":function(t,e,n){"use strict";var i=n("02a3"),o={horizontal:["x","width"],vertical:["y","height"]},r=5;function c(t){this._modeling=t,this._filters=[],this.registerFilter((function(t,e,n){var o,r=0,c=0;return Object(i["i"])(t,(function(t){t.waypoints||t.labelTarget||(r+=t[n],c+=1)})),o=Math.round(r/c),Object(i["e"])(t,(function(t){return t[n]<o+50}))}))}c.$inject=["modeling"],c.prototype.registerFilter=function(t){if("function"!==typeof t)throw new Error("the filter has to be a function");this._filters.push(t)},c.prototype.trigger=function(t,e){var n,i,o=this._modeling;if(!(t.length<3)&&(this._setOrientation(e),i=this._filterElements(t),n=this._createGroups(i),!(n.length<=2)))return o.distributeElements(n,this._axis,this._dimension),n},c.prototype._filterElements=function(t){var e=this._filters,n=this._axis,o=this._dimension,r=[].concat(t);return e.length?(Object(i["i"])(e,(function(t){r=t(r,n,o)})),r):t},c.prototype._createGroups=function(t){var e=[],n=this,o=this._axis,r=this._dimension;if(!o)throw new Error('must have a defined "axis" and "dimension"');var c=Object(i["B"])(t,o);return Object(i["i"])(c,(function(t,i){var c,a=n._findRange(t,o,r),s=e[e.length-1];s&&n._hasIntersection(s.range,a)?e[e.length-1].elements.push(t):(c={range:a,elements:[t]},e.push(c))})),e},c.prototype._setOrientation=function(t){var e=o[t];this._axis=e[0],this._dimension=e[1]},c.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)},c.prototype._findRange=function(t){var e=t[this._axis],n=t[this._dimension];return{min:e+r,max:e+n-r}};e["a"]={__init__:["distributeElements"],distributeElements:["type",c]}},4716:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("2d8d"),o=n("3d2a"),r=n.n(o),c=Math.round,a=Math.max;function s(t,e){var n=t.x,i=t.y;return[["M",n,i],["m",0,-e],["a",e,e,0,1,1,0,2*e],["a",e,e,0,1,1,0,-2*e],["z"]]}function u(t){var e=[];return t.forEach((function(t,n){e.push([0===n?"M":"L",t.x,t.y])})),e}var h=10;function d(t,e){var n,o;for(n=0;o=t[n];n++)if(Object(i["b"])(o,e)<=h)return{point:t[n],bendpoint:!0,index:n};return null}function p(t,e){var n,i=r()(s(e,h),u(t)),o=i[0],d=i[i.length-1];return o?o!==d?o.segment2!==d.segment2?(n=a(o.segment2,d.segment2)-1,{point:t[n],bendpoint:!0,index:n}):{point:{x:c(o.x+d.x)/2,y:c(o.y+d.y)/2},index:o.segment2}:{point:{x:c(o.x),y:c(o.y)},index:o.segment2}:null}function l(t,e){return d(t,e)||p(t,e)}},4892:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a}));var i=n("02a3");function o(t,e){if("x"===t){if(e>0)return"e";if(e<0)return"w"}if("y"===t){if(e>0)return"s";if(e<0)return"n"}return null}function r(t,e){var n=[];return Object(i["i"])(t.concat(e),(function(o){var r=o.incoming,a=o.outgoing;Object(i["i"])(r.concat(a),(function(i){var o=i.source,r=i.target;(c(t,o)||c(t,r)||c(e,o)||c(e,r))&&(c(n,i)||n.push(i))}))})),n}function c(t,e){return-1!==t.indexOf(e)}function a(t,e,n){var i=t.x,o=t.y,r=t.width,c=t.height,a=n.x,s=n.y;switch(e){case"n":return{x:i,y:o+s,width:r,height:c-s};case"s":return{x:i,y:o,width:r,height:c+s};case"w":return{x:i+a,y:o,width:r-a,height:c};case"e":return{x:i,y:o,width:r+a,height:c};default:throw new Error("unknown direction: "+e)}}},"48e6":function(t,e,n){"use strict";var i=n("e506"),o=n("9d50"),r=1500;function c(t,e,n){var i=this,c=n.get("dragging",!1);function s(e){if(!e.hover){var n=e.originalEvent,o=i._findTargetGfx(n),r=o&&t.get(o);o&&r&&(e.stopPropagation(),c.hover({element:r,gfx:o}),c.move(n))}}c&&e.on("drag.start",(function(t){e.once("drag.move",r,(function(t){s(t)}))})),function(){var t,n;e.on("element.hover",(function(e){t=e.gfx,n=e.element})),e.on("element.hover",r,(function(i){n&&e.fire("element.out",{element:n,gfx:t})})),e.on("element.out",(function(){t=null,n=null}))}(),this._findTargetGfx=function(t){var e,n;if(t instanceof MouseEvent)return e=Object(o["c"])(t),n=document.elementFromPoint(e.x,e.y),a(n)}}function a(t){return Object(i["d"])(t,"svg, .djs-element",!0)}c.$inject=["elementRegistry","eventBus","injector"];var s={__init__:["hoverFix"],hoverFix:["type",c]},u=n("4452"),h=n("02a3"),d=n("b071"),p=n("bdc3"),l=n("5c87"),f=Math.round,v="djs-drag-active";function g(t){t.preventDefault()}function y(t){return"undefined"!==typeof TouchEvent&&t instanceof TouchEvent}function b(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function m(t,e,n,r){var c,a={threshold:5,trapClick:!0};function s(t){var n=e.viewbox(),i=e._container.getBoundingClientRect();return{x:n.x+(t.x-i.left)/n.scale,y:n.y+(t.y-i.top)/n.scale}}function u(e,n){n=n||c;var i=t.createEvent(Object(h["a"])({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==t.fire("drag."+e,i)&&t.fire(n.prefix+"."+e,i)}function m(t){var e=t.filter((function(t){return r.get(t.id)}));e.length&&n.select(e)}function x(t,i){var r=c.payload,a=c.displacement,p=c.globalStart,g=Object(o["c"])(t),y=Object(l["b"])(g,p),m=c.localStart,x=s(g),_=Object(l["b"])(x,m);if(!c.active&&(i||b(y)>c.threshold)){if(Object(h["a"])(r,{x:f(m.x+a.x),y:f(m.y+a.y),dx:0,dy:0},{originalEvent:t}),!1===u("start"))return k();c.active=!0,c.keepSelection||(r.previousSelection=n.get(),n.select(null)),c.cursor&&Object(d["a"])(c.cursor),e.addMarker(e.getRootElement(),v)}Object(o["b"])(t),c.active&&(Object(h["a"])(r,{x:f(x.x+a.x),y:f(x.y+a.y),dx:f(_.x),dy:f(_.y)},{originalEvent:t}),u("move"))}function _(t){var e,n=!0;c.active&&(t&&(c.payload.originalEvent=t,Object(o["b"])(t)),n=u("end")),!1===n&&u("rejected"),e=C(!0!==n),u("ended",e)}function j(t){27===t.which&&(g(t),k())}function O(e){var n;c.active&&(n=Object(p["a"])(t),setTimeout(n,400),g(e)),_(e)}function w(t){x(t)}function E(t){var e=c.payload;e.hoverGfx=t.gfx,e.hover=t.element,u("hover")}function S(t){u("out");var e=c.payload;e.hoverGfx=null,e.hover=null}function k(t){var e;if(c){var n=c.active;n&&u("cancel"),e=C(t),n&&u("canceled",e)}}function C(o){var r,a;u("cleanup"),Object(d["b"])(),a=c.trapClick?O:_,i["g"].unbind(document,"mousemove",x),i["g"].unbind(document,"dragstart",g),i["g"].unbind(document,"selectstart",g),i["g"].unbind(document,"mousedown",a,!0),i["g"].unbind(document,"mouseup",a,!0),i["g"].unbind(document,"keyup",j),i["g"].unbind(document,"touchstart",w,!0),i["g"].unbind(document,"touchcancel",k,!0),i["g"].unbind(document,"touchmove",x,!0),i["g"].unbind(document,"touchend",_,!0),t.off("element.hover",E),t.off("element.out",S),e.removeMarker(e.getRootElement(),v);var s=c.payload.previousSelection;return!1!==o&&s&&!n.get().length&&m(s),r=c,c=null,r}function M(e,n,r,d){c&&k(!1),"string"===typeof n&&(d=r,r=n,n=null),d=Object(h["a"])({},a,d||{});var p,f,v,b,m,C=d.data||{};b=d.trapClick?O:_,e?(p=Object(o["a"])(e)||e,f=Object(o["c"])(e),Object(o["b"])(e),"dragstart"===p.type&&g(p)):(p=null,f={x:0,y:0}),v=s(f),n||(n=v),m=y(p),c=Object(h["a"])({prefix:r,data:C,payload:{},globalStart:f,displacement:Object(l["b"])(n,v),localStart:v,isTouch:m},d),d.manual||(m?(i["g"].bind(document,"touchstart",w,!0),i["g"].bind(document,"touchcancel",k,!0),i["g"].bind(document,"touchmove",x,!0),i["g"].bind(document,"touchend",_,!0)):(i["g"].bind(document,"mousemove",x),i["g"].bind(document,"dragstart",g),i["g"].bind(document,"selectstart",g),i["g"].bind(document,"mousedown",b,!0),i["g"].bind(document,"mouseup",b,!0)),i["g"].bind(document,"keyup",j),t.on("element.hover",E),t.on("element.out",S)),u("init"),d.autoActivate&&x(e,!0)}t.on("diagram.destroy",k),this.init=M,this.move=x,this.hover=E,this.out=S,this.end=_,this.cancel=k,this.context=function(){return c},this.setOptions=function(t){Object(h["a"])(a,t)}}m.$inject=["eventBus","canvas","selection","elementRegistry"];e["a"]={__depends__:[s,u["a"]],dragging:["type",m]}},"49fa":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("c7bf"),o=n("02a3");function r(){this._uid=12}r.prototype.createRoot=function(t){return this.create("root",t)},r.prototype.createLabel=function(t){return this.create("label",t)},r.prototype.createShape=function(t){return this.create("shape",t)},r.prototype.createConnection=function(t){return this.create("connection",t)},r.prototype.create=function(t,e){return e=Object(o["a"])({},e||{}),e.id||(e.id=t+"_"+this._uid++),Object(i["c"])(t,e)}},"4aa4":function(t,e,n){"use strict";var i=n("48e6"),o=n("9cd4"),r=n("be73"),c=n("4452"),a=n("02a3"),s=n("9408"),u="drop-ok",h="drop-not-ok",d="attach-ok",p="new-parent",l="create",f=2e3;function v(t,e,n,i,o){function r(t,e,n,i,r){if(!e)return!1;t=Object(a["e"])(t,(function(e){var n=e.labelTarget;return!e.parent&&!(m(e)&&-1!==t.indexOf(n))}));var c=Object(a["f"])(t,(function(t){return!y(t)})),s=!1,u=!1,h=!1;b(t)&&(s=o.allowed("shape.attach",{position:n,shape:c,target:e})),s||(h=b(t)?o.allowed("shape.create",{position:n,shape:c,source:i,target:e}):o.allowed("elements.create",{elements:t,position:n,target:e}));var d=r.connectionTarget;return h||s?(c&&i&&(u=o.allowed("connection.create",{source:d===i?c:i,target:d===i?i:c,hints:{targetParent:e,targetAttach:s}})),{attach:s,connect:u}):(null===h||null===s)&&null}function c(e,n){[d,u,h,p].forEach((function(i){i===n?t.addMarker(e,i):t.removeMarker(e,i)}))}function v(){var t=e.context();t&&t.prefix===l&&e.cancel()}n.on(["create.move","create.hover"],(function(t){var e=t.context,n=e.elements,i=t.hover,o=e.source,a=e.hints||{};if(!i)return e.canExecute=!1,void(e.target=null);g(t);var s={x:t.x,y:t.y},u=e.canExecute=i&&r(n,i,s,o,a);i&&null!==u&&(e.target=i,u&&u.attach?c(i,d):c(i,u?p:h))})),n.on(["create.end","create.out","create.cleanup"],(function(t){var e=t.hover;e&&c(e,null)})),n.on("create.end",(function(t){var e=t.context,n=e.source,o=e.shape,r=e.elements,c=e.target,s=e.canExecute,u=s&&s.attach,h=s&&s.connect,d=e.hints||{};if(!1===s||!c)return!1;g(t);var p={x:t.x,y:t.y};h?o=i.appendShape(n,o,p,c,{attach:u,connection:!0===h?{}:h,connectionTarget:d.connectionTarget}):(r=i.createElements(r,p,c,Object(a["a"])({},d,{attach:u})),o=Object(a["f"])(r,(function(t){return!y(t)}))),Object(a["a"])(e,{elements:r,shape:o}),Object(a["a"])(t,{elements:r,shape:o})})),n.on("create.init",(function(){n.on("elements.changed",v),n.once(["create.cancel","create.end"],f,(function(){n.off("elements.changed",v)}))})),this.start=function(t,n,i){Object(a["l"])(n)||(n=[n]);var o=Object(a["f"])(n,(function(t){return!y(t)}));if(o){i=Object(a["a"])({elements:n,hints:{},shape:o},i||{}),Object(a["i"])(n,(function(t){Object(a["p"])(t.x)||(t.x=0),Object(a["p"])(t.y)||(t.y=0)}));var r=Object(s["b"])(n);Object(a["i"])(n,(function(t){y(t)&&(t.waypoints=Object(a["u"])(t.waypoints,(function(t){return{x:t.x-r.x-r.width/2,y:t.y-r.y-r.height/2}}))),Object(a["a"])(t,{x:t.x-r.x-r.width/2,y:t.y-r.y-r.height/2})})),e.init(t,l,{cursor:"grabbing",autoActivate:!0,data:{shape:o,elements:n,context:i}})}}}function g(t){var e=t.context,n=e.createConstraints;n&&(n.left&&(t.x=Math.max(t.x,n.left)),n.right&&(t.x=Math.min(t.x,n.right)),n.top&&(t.y=Math.max(t.y,n.top)),n.bottom&&(t.y=Math.min(t.y,n.bottom)))}function y(t){return!!t.waypoints}function b(t){return t&&1===t.length&&!y(t[0])}function m(t){return!!t.labelTarget}v.$inject=["canvas","dragging","eventBus","modeling","rules"];var x=n("b586"),_=n("7972"),j=n("6b8b"),O=750;function w(t,e,n,i,o){function r(t){var e=Object(j["f"])("g");Object(j["b"])(e,o.cls("djs-drag-group",["no-events"]));var r=Object(j["f"])("g");return t.forEach((function(t){var o;t.hidden||(t.waypoints?(o=n._createContainer("connection",r),n.drawConnection(Object(_["b"])(o),t)):(o=n._createContainer("shape",r),n.drawShape(Object(_["b"])(o),t),Object(x["c"])(o,t.x,t.y)),i.addDragger(t,e,o))})),e}e.on("create.move",O,(function(e){var n,i=e.hover,o=e.context,c=o.elements,a=o.dragGroup;a||(a=o.dragGroup=r(c)),i?(a.parentNode||(n=t.getActiveLayer(),Object(j["a"])(n,a)),Object(x["c"])(a,e.x,e.y)):Object(j["j"])(a)})),e.on("create.cleanup",(function(t){var e=t.context,n=e.dragGroup;n&&Object(j["j"])(n)}))}w.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];e["a"]={__depends__:[i["a"],o["a"],r["a"],c["a"]],__init__:["create","createPreview"],create:["type",v],createPreview:["type",w]}},"4f8e":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("3fb5"),o=n.n(i),r=n("9408"),c=n("e759"),a=n("02a3"),s=n("18e7");function u(t,e,n,i){s["a"].call(this,t),this._elementRegistry=e,this._modeling=n,this._rules=i;var o=this;this.postExecuted(["shape.create"],(function(t){var e=t.context,n=e.hints||{},i=e.shape,r=e.parent||e.newParent;!1!==n.autoResize&&o._expand([i],r)})),this.postExecuted(["elements.move"],(function(t){var e=t.context,n=Object(a["h"])(Object(a["E"])(e.closure.topLevel)),i=e.hints,r=!i||i.autoResize;if(!1!==r){var c=Object(a["j"])(n,(function(t){return t.parent.id}));Object(a["i"])(c,(function(t,e){Object(a["l"])(r)&&(t=t.filter((function(t){return Object(a["f"])(r,Object(a["v"])({id:t.id}))}))),o._expand(t,e)}))}})),this.postExecuted(["shape.toggleCollapse"],(function(t){var e=t.context,n=e.hints,i=e.shape;n&&!1===n.autoResize||i.collapsed||o._expand(i.children||[],i)})),this.postExecuted(["shape.resize"],(function(t){var e=t.context,n=e.hints,i=e.shape,r=i.parent;n&&!1===n.autoResize||r&&o._expand([i],r)}))}function h(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function d(t,e){var n="";return t=Object(c["b"])(t),e=Object(c["b"])(e),t.top>e.top&&(n=n.concat("n")),t.right<e.right&&(n=n.concat("w")),t.bottom<e.bottom&&(n=n.concat("s")),t.left>e.left&&(n=n.concat("e")),n}u.$inject=["eventBus","elementRegistry","modeling","rules"],o()(u,s["a"]),u.prototype._getOptimalBounds=function(t,e){var n=this.getOffset(e),i=this.getPadding(e),o=Object(c["b"])(Object(r["b"])(t)),s=Object(c["b"])(e),u={};return o.top-s.top<i.top&&(u.top=o.top-n.top),o.left-s.left<i.left&&(u.left=o.left-n.left),s.right-o.right<i.right&&(u.right=o.right+n.right),s.bottom-o.bottom<i.bottom&&(u.bottom=o.bottom+n.bottom),Object(c["a"])(Object(a["a"])({},s,u))},u.prototype._expand=function(t,e){"string"===typeof e&&(e=this._elementRegistry.get(e));var n=this._rules.allowed("element.autoResize",{elements:t,target:e});if(n){var i=this._getOptimalBounds(t,e);if(h(i,e)){var o=d(Object(a["x"])(e,["x","y","width","height"]),i);this.resize(e,i,{autoResize:o});var r=e.parent;r&&this._expand([e],r)}}},u.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}},u.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}},u.prototype.resize=function(t,e,n){this._modeling.resizeShape(t,e,null,n)}},"54b8":function(t,e,n){"use strict";var i=n("b071"),o=n("bdc3"),r=n("5c87"),c=n("e506"),a=n("9d50"),s=15;function u(t,e){var n;function u(c){var u=n.start,d=n.button,p=Object(a["c"])(c),l=Object(r["b"])(p,u);if(!n.dragging&&h(l)>s&&(n.dragging=!0,0===d&&Object(o["a"])(t),Object(i["a"])("grab")),n.dragging){var f=n.last||n.start;l=Object(r["b"])(p,f),e.scroll({dx:l.x,dy:l.y}),n.last=p}c.preventDefault()}function d(t){c["g"].unbind(document,"mousemove",u),c["g"].unbind(document,"mouseup",d),n=null,Object(i["b"])()}function p(t){if(!Object(c["d"])(t.target,".djs-draggable")){var e=t.button;if(!(e>=2||t.ctrlKey||t.shiftKey||t.altKey))return n={button:e,start:Object(a["c"])(t)},c["g"].bind(document,"mousemove",u),c["g"].bind(document,"mouseup",d),!0}}t.on("element.mousedown",500,(function(t){return p(t.originalEvent)})),this.isActive=function(){return!!n}}function h(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}u.$inject=["eventBus","canvas"];e["a"]={__init__:["moveCanvas"],moveCanvas:["type",u]}},"5bc7":function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return d}));var i=n("e759"),o=n("02a3"),r=10,c=50,a=250;function s(t,e,n,i){var o;while(o=h(t,n,e))n=i(e,n,o);return n}function u(t){return function(e,n,i){var o={x:n.x,y:n.y};return["x","y"].forEach((function(r){var c=t[r];if(c){var a="x"===r?"width":"height",s=c.margin,u=c.minDistance;o[r]=s<0?Math.min(i[r]+s-e[a]/2,n[r]-u+s):Math.max(i[r]+i[a]+s+e[a]/2,n[r]+u+s)}})),o}}function h(t,e,n){var c={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},a=p(t,n);return Object(o["f"])(a,(function(t){if(t===n)return!1;var e=Object(i["f"])(t,c,r);return"intersect"===e}))}function d(t,e){function n(e){return e.source===t?1:-1}e||(e={});var r=e.defaultDistance||c,s=e.direction||"e",u=e.filter,h=e.getWeight||n,d=e.maxDistance||a,p=e.reference||"start";function l(t,e){return"n"===s?"start"===p?Object(i["b"])(t).top-Object(i["b"])(e).bottom:"center"===p?Object(i["b"])(t).top-Object(i["e"])(e).y:Object(i["b"])(t).top-Object(i["b"])(e).top:"w"===s?"start"===p?Object(i["b"])(t).left-Object(i["b"])(e).right:"center"===p?Object(i["b"])(t).left-Object(i["e"])(e).x:Object(i["b"])(t).left-Object(i["b"])(e).left:"s"===s?"start"===p?Object(i["b"])(e).top-Object(i["b"])(t).bottom:"center"===p?Object(i["e"])(e).y-Object(i["b"])(t).bottom:Object(i["b"])(e).bottom-Object(i["b"])(t).bottom:"start"===p?Object(i["b"])(e).left-Object(i["b"])(t).right:"center"===p?Object(i["e"])(e).x-Object(i["b"])(t).right:Object(i["b"])(e).right-Object(i["b"])(t).right}u||(u=g);var f=t.incoming.filter(u).map((function(e){var n=h(e),i=n<0?l(e.source,t):l(t,e.source);return{id:e.source.id,distance:i,weight:n}})),v=t.outgoing.filter(u).map((function(e){var n=h(e),i=n>0?l(t,e.target):l(e.target,t);return{id:e.target.id,distance:i,weight:n}})),y=f.concat(v).reduce((function(t,e){return t[e.id+"__weight_"+e.weight]=e,t}),{}),b=Object(o["y"])(y,(function(t,e){var n=e.distance,i=e.weight;return n<0||n>d||(t[String(n)]||(t[String(n)]=0),t[String(n)]+=1*i,(!t.distance||t[t.distance]<t[String(n)])&&(t.distance=n)),t}),{});return b.distance||r}function p(t){var e=l(t);return t.host&&(e=e.concat(l(t.host))),t.attachers&&(e=e.concat(t.attachers.reduce((function(t,e){return t.concat(l(e))}),[]))),e}function l(t){return v(t).concat(f(t))}function f(t){return t.incoming.map((function(t){return t.source}))}function v(t){return t.outgoing.map((function(t){return t.target}))}function g(){return!0}},"5c87":function(t,e,n){"use strict";function i(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}))},6141:function(t,e,n){"use strict";var i=n("e759"),o=n("5bc7"),r=100;function c(t,e,n){t.on("autoPlace",r,(function(t){var e=t.shape,n=t.source;return a(n,e)})),t.on("autoPlace.end",(function(t){n.scrollToElement(t.shape)})),this.append=function(n,i,o){t.fire("autoPlace.start",{source:n,shape:i});var r=t.fire("autoPlace",{source:n,shape:i}),c=e.appendShape(n,i,r,n.parent,o);return t.fire("autoPlace.end",{source:n,shape:c}),c}}function a(t,e,n){n||(n={});var r=n.defaultDistance||o["a"],c=Object(i["e"])(t),a=Object(i["b"])(t);return{x:a.right+r+e.width/2,y:c.y}}function s(t,e){t.on("autoPlace.end",500,(function(t){e.select(t.shape)}))}c.$inject=["eventBus","modeling","canvas"],s.$inject=["eventBus","selection"];e["a"]={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",c],autoPlaceSelectionBehavior:["type",s]}},"6dca":function(t,e,n){"use strict";function i(t){var e=this;function n(t){e._lastMoveEvent=t}this._lastMoveEvent=null,t.on("canvas.init",(function(t){var i=e._svg=t.svg;i.addEventListener("mousemove",n)})),t.on("canvas.destroy",(function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",n)}))}function o(t,e){var n=document.createEvent("MouseEvent"),i=t,o=e,r=t,c=e;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,o,r,c,!1,!1,!1,!1,0,null),n}i.$inject=["eventBus"],i.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||o(0,0)};e["a"]={__init__:["mouse"],mouse:["type",i]}},"6ffd":function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r=n("fbb1"),c=n("6b8b"),a=n("061b");function s(t){return!0}function u(t){return Object(r["d"])(t)||Object(r["c"])(t)}var h=500;function d(t,e,n){var d=this;function p(n,i,o){var r,c,a;v(n,i)||(o?c=e.getGraphics(o):(r=i.delegateTarget||i.target,r&&(c=r,o=e.get(c))),c&&o&&(a=t.fire(n,{element:o,gfx:c,originalEvent:i}),!1===a&&(i.stopPropagation(),i.preventDefault())))}var l={};function f(t){return l[t]}function v(t,e){var n=y[t]||r["d"];return!n(e)}var g={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},y={"element.contextmenu":s,"element.mousedown":u,"element.mouseup":u,"element.click":u,"element.dblclick":u};function b(t,e,n){var i=g[t];if(!i)throw new Error("unmapped DOM event name <"+t+">");return p(i,e,n)}var m="svg, .djs-element";function x(t,e,n,i){var r=l[n]=function(t){p(n,t)};i&&(y[n]=i),r.$delegate=o["e"].bind(t,m,e,r)}function _(t,e,n){var i=f(n);i&&o["e"].unbind(t,e,i.$delegate)}function j(t){Object(i["i"])(g,(function(e,n){x(t,n,e)}))}function O(t){Object(i["i"])(g,(function(e,n){_(t,n,e)}))}t.on("canvas.destroy",(function(t){O(t.svg)})),t.on("canvas.init",(function(t){j(t.svg)})),t.on(["shape.added","connection.added"],(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.createHit",{element:n,gfx:i})})),t.on(["shape.changed","connection.changed"],h,(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.updateHit",{element:n,gfx:i})})),t.on("interactionEvents.createHit",h,(function(t){var e=t.element,n=t.gfx;d.createDefaultHit(e,n)})),t.on("interactionEvents.updateHit",(function(t){var e=t.element,n=t.gfx;d.updateDefaultHit(e,n)}));var w=C("djs-hit djs-hit-stroke"),E=C("djs-hit djs-hit-click-stroke"),S=C("djs-hit djs-hit-all"),k={all:S,"click-stroke":E,stroke:w};function C(t,e){return e=Object(i["a"])({stroke:"white",strokeWidth:15},e||{}),n.cls(t,["no-fill","no-border"],e)}function M(t,e){var n=k[e];if(!n)throw new Error("invalid hit type <"+e+">");return Object(c["b"])(t,n),t}function T(t,e){Object(c["a"])(t,e)}this.removeHits=function(t){var e=Object(o["j"])(".djs-hit",t);Object(i["i"])(e,c["j"])},this.createDefaultHit=function(t,e){var n,i=t.waypoints,o=t.isFrame;return i?this.createWaypointsHit(e,i):(n=o?"stroke":"all",this.createBoxHit(e,n,{width:t.width,height:t.height}))},this.createWaypointsHit=function(t,e){var n=Object(a["b"])(e);return M(n,"stroke"),T(t,n),n},this.createBoxHit=function(t,e,n){n=Object(i["a"])({x:0,y:0},n);var o=Object(c["f"])("rect");return M(o,e),Object(c["b"])(o,n),T(t,o),o},this.updateDefaultHit=function(t,e){var n=Object(o["i"])(".djs-hit",e);if(n)return t.waypoints?Object(a["c"])(n,t.waypoints):Object(c["b"])(n,{width:t.width,height:t.height}),n},this.fire=p,this.triggerMouseEvent=b,this.mouseHandler=f,this.registerEvent=x,this.unregisterEvent=_}d.$inject=["eventBus","elementRegistry","styles"];e["a"]={__init__:["interactionEvents"],interactionEvents:["type",d]}},7328:function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var i=n("e7a5b"),o=n.n(i);n.d(e,"a",(function(){return o.a}));var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function c(t){return t=""+t,t&&t.replace(/[&<>"']/g,(function(t){return r[t]}))}},"76e2":function(t,e,n){"use strict";var i=n("9408"),o=n("6b8b"),r=n("e506"),c=n("02a3"),a=500;function s(t,e,n){this.offset=6;var i=e.cls("djs-outline",["no-fill"]),s=this;function u(t,e){var n=Object(o["f"])("rect");return Object(o["b"])(n,Object(c["a"])({x:10,y:10,width:100,height:100},i)),Object(o["a"])(t,n),n}t.on(["shape.added","shape.changed"],a,(function(t){var e=t.element,n=t.gfx,i=Object(r["i"])(".djs-outline",n);i||(i=u(n,e)),s.updateShapeOutline(i,e)})),t.on(["connection.added","connection.changed"],(function(t){var e=t.element,n=t.gfx,i=Object(r["i"])(".djs-outline",n);i||(i=u(n,e)),s.updateConnectionOutline(i,e)}))}s.prototype.updateShapeOutline=function(t,e){Object(o["b"])(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},s.prototype.updateConnectionOutline=function(t,e){var n=Object(i["b"])(e);Object(o["b"])(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},s.$inject=["eventBus","styles","elementRegistry"];e["a"]={__init__:["outline"],outline:["type",s]}},"776f":function(t,e,n){"use strict";var i=n("be73"),o=n("48e6"),r=n("9cd4"),c=n("02a3"),a=n("2439"),s=n("e759"),u=10;function h(t,e,n,i){this._dragging=i,this._rules=e;var o=this;function r(t,e){var n,i=t.shape,r=t.direction,c=t.resizeConstraints;t.delta=e,n=Object(a["d"])(i,r,e),t.newBounds=Object(a["b"])(n,c),t.canExecute=o.canResize(t)}function c(t){var e=t.resizeConstraints,n=t.minBounds;void 0===e&&(void 0===n&&(n=o.computeMinResizeBox(t)),t.resizeConstraints={min:Object(s["b"])(n)})}function u(t){var e=t.shape,i=t.canExecute,o=t.newBounds;if(i){if(o=Object(s["g"])(o),!d(e,o))return;n.resizeShape(e,o)}}t.on("resize.start",(function(t){c(t.context)})),t.on("resize.move",(function(t){var e={x:t.dx,y:t.dy};r(t.context,e)})),t.on("resize.end",(function(t){u(t.context)}))}function d(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function p(t,e){var n=Object(s["e"])(t),i=Object(s["b"])(t),o={x:n.x,y:n.y};return-1!==e.indexOf("n")?o.y=i.top:-1!==e.indexOf("s")&&(o.y=i.bottom),-1!==e.indexOf("e")?o.x=i.right:-1!==e.indexOf("w")&&(o.x=i.left),o}function l(t){var e="resize-";return"n"===t||"s"===t?e+"ns":"e"===t||"w"===t?e+"ew":"nw"===t||"se"===t?e+"nwse":e+"nesw"}h.prototype.canResize=function(t){var e=this._rules,n=Object(c["x"])(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)},h.prototype.activate=function(t,e,n){var i,o,r=this._dragging;if("string"===typeof n&&(n={direction:n}),i=Object(c["a"])({shape:e},n),o=i.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(t,p(e,o),"resize",{autoActivate:!0,cursor:l(o),data:{shape:e,context:i}})},h.prototype.computeMinResizeBox=function(t){var e,n,i=t.shape,o=t.direction;return e=t.minDimensions||{width:u,height:u},n=Object(a["a"])(i,t.childrenBoxPadding),Object(a["c"])(o,i,e,n)},h.$inject=["eventBus","rules","modeling","dragging"];var f=n("6b8b"),v="djs-resizing",g="resize-not-ok",y=500;function b(t,e,n){function i(t){var i=t.shape,o=t.newBounds,r=t.frame;r||(r=t.frame=n.addFrame(i,e.getActiveLayer()),e.addMarker(i,v)),o.width>5&&Object(f["b"])(r,{x:o.x,width:o.width}),o.height>5&&Object(f["b"])(r,{y:o.y,height:o.height}),t.canExecute?Object(f["c"])(r).remove(g):Object(f["c"])(r).add(g)}function o(t){var n=t.shape,i=t.frame;i&&Object(f["j"])(t.frame),e.removeMarker(n,v)}t.on("resize.move",y,(function(t){i(t.context)})),t.on("resize.cleanup",(function(t){o(t.context)}))}b.$inject=["eventBus","canvas","previewSupport"];var m=n("e506"),x=n("fbb1"),_=n("b586"),j=-6,O=4,w=20,E="djs-resizer",S=["n","w","s","e","nw","ne","se","sw"];function k(t,e,n,i){this._resize=i,this._canvas=e;var o=this;t.on("selection.changed",(function(t){var e=t.newSelection;o.removeResizers(),1===e.length&&Object(c["i"])(e,Object(c["b"])(o.addResizer,o))})),t.on("shape.changed",(function(t){var e=t.element;n.isSelected(e)&&(o.removeResizers(),o.addResizer(e))}))}function C(t){var e={x:0,y:0};return-1!==t.indexOf("e")?e.x=-j:-1!==t.indexOf("w")&&(e.x=j),-1!==t.indexOf("s")?e.y=-j:-1!==t.indexOf("n")&&(e.y=j),e}k.prototype.makeDraggable=function(t,e,n){var i=this._resize;function o(e){Object(x["d"])(e)&&i.activate(e,t,n)}m["g"].bind(e,"mousedown",o),m["g"].bind(e,"touchstart",o)},k.prototype._createResizer=function(t,e,n,i){var o=this._getResizersParent(),r=C(i),c=Object(f["f"])("g");Object(f["c"])(c).add(E),Object(f["c"])(c).add(E+"-"+t.id),Object(f["c"])(c).add(E+"-"+i),Object(f["a"])(o,c);var a=Object(f["f"])("rect");Object(f["b"])(a,{x:-O/2+r.x,y:-O/2+r.y,width:O,height:O}),Object(f["c"])(a).add(E+"-visual"),Object(f["a"])(c,a);var s=Object(f["f"])("rect");return Object(f["b"])(s,{x:-w/2+r.x,y:-w/2+r.y,width:w,height:w}),Object(f["c"])(s).add(E+"-hit"),Object(f["a"])(c,s),Object(_["b"])(c,e,n),c},k.prototype.createResizer=function(t,e){var n=p(t,e),i=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,i,e)},k.prototype.addResizer=function(t){var e=this,n=this._resize;n.canResize({shape:t})&&Object(c["i"])(S,(function(n){e.createResizer(t,n)}))},k.prototype.removeResizers=function(){var t=this._getResizersParent();Object(f["d"])(t)},k.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},k.$inject=["eventBus","canvas","selection","resize"];e["a"]={__depends__:[i["a"],o["a"],r["a"]],__init__:["resize","resizePreview","resizeHandles"],resize:["type",h],resizePreview:["type",b],resizeHandles:["type",k]}},7972:function(t,e,n){"use strict";function i(t){return t.childNodes[0]}function o(t){return t.parentNode.childNodes[1]}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}))},"7ddc":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var i=n("e759"),o=n("5c87");function r(t,e,n){var r=Object(o["a"])(e),c=Object(o["a"])(n),a=Object(o["b"])(t,r),s={x:a.x*(n.width/e.width),y:a.y*(n.height/e.height)};return Object(i["h"])({x:c.x+s.x,y:c.y+s.y})}function c(t,e,n){var r=Object(o["a"])(t),c=Object(o["a"])(e),s=Object(o["a"])(n),u=Object(o["b"])(t,r),h=Object(o["b"])(r,c),d=a(r,e,n);if(d)return d;var p={x:h.x*(n.width/e.width),y:h.y*(n.height/e.height)},l={x:s.x+p.x,y:s.y+p.y};return Object(i["h"])({x:l.x+u.x-t.x,y:l.y+u.y-t.y})}function a(t,e,n){var o=Object(i["b"])(e),r=Object(i["b"])(n);if(s(o,r))return null;var c,a,u,h=Object(i["f"])(e,t);if("top"===h)c={x:0,y:r.bottom-o.bottom};else if("bottom"===h)c={x:0,y:r.top-o.top};else if("right"===h)c={x:r.left-o.left,y:0};else{if("left"!==h)return null;c={x:r.right-o.right,y:0}}return a={x:t.x+c.x,y:t.y+c.y},u=Object(i["f"])(n,a),u!==h?null:c}function s(t,e){return u(t,e)||h(t,e)}function u(t,e){return t.right!==e.right&&t.left!==e.left}function h(t,e){return t.top!==e.top&&t.bottom!==e.bottom}},8077:function(t,e,n){"use strict";var i=n("6b8b"),o=n("02a3"),r=n("e759"),c="djs-connection-preview";function a(t,e,n,i){this._canvas=e,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}function s(t){var e={};return function(n){var i=JSON.stringify(n),o=e[i];return o||(o=e[i]=t.apply(null,arguments)),o}}function u(t){return Object(o["q"])(t)?t:{}}a.$inject=["injector","canvas","graphicsFactory","elementFactory"],a.prototype.drawPreview=function(t,e,n){n=n||{};var o,c=t.connectionPreviewGfx,a=t.getConnection,u=n.source,h=n.target,d=n.waypoints,p=n.connectionStart,l=n.connectionEnd,f=n.noLayout,v=n.noCropping,g=n.noNoop,y=this;c||(c=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),Object(i["d"])(c),a||(a=t.getConnection=s((function(t,e,n){return y.getConnection(t,e,n)}))),e&&(o=a(e,u,h)),o?(o.waypoints=d||[],this._layouter&&!f&&(o.waypoints=this._layouter.layoutConnection(o,{source:u,target:h,connectionStart:p,connectionEnd:l,waypoints:n.waypoints||o.waypoints})),o.waypoints&&o.waypoints.length||(o.waypoints=[u?Object(r["e"])(u):p,h?Object(r["e"])(h):l]),this._connectionDocking&&(u||h)&&!v&&(o.waypoints=this._connectionDocking.getCroppedWaypoints(o,u,h)),this._graphicsFactory.drawConnection(c,o)):!g&&this.drawNoopPreview(c,n)},a.prototype.drawNoopPreview=function(t,e){var n=e.source,o=e.target,c=e.connectionStart||Object(r["e"])(n),a=e.connectionEnd||Object(r["e"])(o),s=this.cropWaypoints(c,a,n,o),u=this.createNoopConnection(s[0],s[1]);Object(i["a"])(t,u)},a.prototype.cropWaypoints=function(t,e,n,i){var o=this._graphicsFactory,c=n&&o.getShapePath(n),a=i&&o.getShapePath(i),s=o.getConnectionPath({waypoints:[t,e]});return t=n&&Object(r["d"])(c,s,!0)||t,e=i&&Object(r["d"])(a,s,!1)||e,[t,e]},a.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&Object(i["j"])(t.connectionPreviewGfx)},a.prototype.getConnection=function(t){var e=u(t);return this._elementFactory.createConnection(e)},a.prototype.createConnectionPreviewGfx=function(){var t=Object(i["f"])("g");return Object(i["b"])(t,{pointerEvents:"none"}),Object(i["c"])(t).add(c),Object(i["a"])(this._canvas.getActiveLayer(),t),t},a.prototype.createNoopConnection=function(t,e){var n=Object(i["f"])("polyline");return Object(i["b"])(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),Object(i["b"])(n,{points:[t.x,t.y,e.x,e.y]}),n};e["a"]={__init__:["connectionPreview"],connectionPreview:["type",a]}},"836f":function(t,e,n){"use strict";var i=n("0bc3"),o=n("28c3"),r=n("02a3"),c=10;function a(t,e,n){return n||(n="round"),Math[n](t/e)*e}var s=1200,u=800;function h(t,e,n){var c=!n||!1!==n.active;this._eventBus=e;var a=this;e.on("diagram.init",u,(function(){a.setActive(c)})),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],s,(function(e){var n=e.originalEvent;if(!(!a.active||n&&Object(o["b"])(n))){var c=e.context,s=c.gridSnappingContext;s||(s=c.gridSnappingContext={}),["x","y"].forEach((function(n){var o={},c=p(e,n,t);c&&(o.offset=c);var s=d(e,n);s&&Object(r["a"])(o,s),Object(i["c"])(e,n)||a.snapEvent(e,n,o)}))}}))}function d(t,e){var n=t.context,i=n.createConstraints,o=n.resizeConstraints||{},r=n.gridSnappingContext,c=r.snapConstraints;if(c&&c[e])return c[e];c||(c=r.snapConstraints={}),c[e]||(c[e]={});var a=n.direction;i&&(l(e)?(c.x.min=i.left,c.x.max=i.right):(c.y.min=i.top,c.y.max=i.bottom));var s=o.min,u=o.max;return s&&(l(e)?v(a)?c.x.max=s.left:c.x.min=s.right:f(a)?c.y.max=s.top:c.y.min=s.bottom),u&&(l(e)?v(a)?c.x.min=u.left:c.x.max=u.right:f(a)?c.y.min=u.top:c.y.max=u.bottom),c[e]}function p(t,e,n){var i=t.context,o=t.shape,c=i.gridSnappingContext,a=c.snapLocation,s=c.snapOffset;return s&&Object(r["p"])(s[e])?s[e]:(s||(s=c.snapOffset={}),Object(r["p"])(s[e])||(s[e]=0),o?(n.get(o.id)||(l(e)?s[e]+=o[e]+o.width/2:s[e]+=o[e]+o.height/2),a?("x"===e?/left/.test(a)?s[e]-=o.width/2:/right/.test(a)&&(s[e]+=o.width/2):/top/.test(a)?s[e]-=o.height/2:/bottom/.test(a)&&(s[e]+=o.height/2),s[e]):s[e]):s[e])}function l(t){return"x"===t}function f(t){return-1!==t.indexOf("n")}function v(t){return-1!==t.indexOf("w")}h.prototype.snapEvent=function(t,e,n){var o=this.snapValue(t[e],n);Object(i["e"])(t,e,o)},h.prototype.getGridSpacing=function(){return c},h.prototype.snapValue=function(t,e){var n,i,o=0;return e&&e.offset&&(o=e.offset),t+=o,t=a(t,c),e&&e.min&&(n=e.min,Object(r["p"])(n)&&(n=a(n+o,c,"ceil"),t=Math.max(t,n))),e&&e.max&&(i=e.max,Object(r["p"])(i)&&(i=a(i+o,c,"floor"),t=Math.min(t,i))),t-=o,t},h.prototype.isActive=function(){return this.active},h.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})},h.prototype.toggleActive=function(){this.setActive(!this.active)},h.$inject=["elementRegistry","eventBus","config.gridSnapping"];var g=n("3fb5"),y=n.n(g),b=n("18e7");function m(t,e){b["a"].call(this,t),this._gridSnapping=e;var n=this;this.preExecute("shape.resize",(function(t){var e=t.context,i=e.hints||{},o=i.autoResize;if(o){var c=e.shape,a=e.newBounds;Object(r["r"])(o)?e.newBounds=n.snapComplex(a,o):e.newBounds=n.snapSimple(c,a)}}))}m.$inject=["eventBus","gridSnapping","modeling"],y()(m,b["a"]),m.prototype.snapSimple=function(t,e){var n=this._gridSnapping;return e.width=n.snapValue(e.width,{min:e.width}),e.height=n.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e},m.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t},m.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,i=/w/.test(e),o=/e/.test(e),c={};return c.width=n.snapValue(t.width,{min:t.width}),o&&(i?(c.x=n.snapValue(t.x,{max:t.x}),c.width+=n.snapValue(t.x-c.x,{min:t.x-c.x})):t.x=t.x+t.width-c.width),Object(r["a"])(t,c),t},m.prototype.snapVertically=function(t,e){var n=this._gridSnapping,i=/n/.test(e),o=/s/.test(e),c={};return c.height=n.snapValue(t.height,{min:t.height}),i&&(o?(c.y=n.snapValue(t.y,{max:t.y}),c.height+=n.snapValue(t.y-c.y,{min:t.y-c.y})):t.y=t.y+t.height-c.height),Object(r["a"])(t,c),t};var x=2e3;function _(t,e){t.on(["spaceTool.move","spaceTool.end"],x,(function(t){var n=t.context;if(n.initialized){var i,o=n.axis;"x"===o?(i=e.snapValue(t.dx),t.x=t.x+i-t.dx,t.dx=i):(i=e.snapValue(t.dy),t.y=t.y+i-t.dy,t.dy=i)}}))}_.$inject=["eventBus","gridSnapping"];var j={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",m],gridSnappingSpaceToolBehavior:["type",_]};e["a"]={__depends__:[j],__init__:["gridSnapping"],gridSnapping:["type",h]}},"86f9":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("3fb5"),o=n.n(i),r=n("18e7");function c(t){r["a"].call(this,t),this.init()}c.$inject=["eventBus"],o()(c,r["a"]),c.prototype.addRule=function(t,e,n){var i=this;"string"===typeof t&&(t=[t]),t.forEach((function(t){i.canExecute(t,e,(function(t,e,i){return n(t)}),!0)}))},c.prototype.init=function(){}},"893e":function(t,e,n){"use strict";var i=n("48e6"),o=n("02a3"),r=n("9d50");function c(t,e,n){this._canvas=n,this._opts=Object(o["a"])({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},t);var i=this;e.on("drag.move",(function(t){var e=i._toBorderPoint(t);i.startScroll(e)})),e.on(["drag.cleanup"],(function(){i.stopScroll()}))}function a(t,e,n){return e<t&&t<n}c.$inject=["config.autoScroll","eventBus","canvas"],c.prototype.startScroll=function(t){var e=this._canvas,n=this._opts,i=this,o=e.getContainer().getBoundingClientRect(),r=[t.x,t.y,o.width-t.x,o.height-t.y];this.stopScroll();for(var c=0,s=0,u=0;u<4;u++)a(r[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(0===u?c=n.scrollStep:1==u?s=n.scrollStep:2==u?c=-n.scrollStep:3==u&&(s=-n.scrollStep));0===c&&0===s||(e.scroll({dx:c,dy:s}),this._scrolling=setTimeout((function(){i.startScroll(t)}),n.scrollRepeatTimeout))},c.prototype.stopScroll=function(){clearTimeout(this._scrolling)},c.prototype.setOptions=function(t){this._opts=Object(o["a"])({},this._opts,t)},c.prototype._toBorderPoint=function(t){var e=this._canvas._container.getBoundingClientRect(),n=Object(r["c"])(t.originalEvent);return{x:n.x-e.left,y:n.y-e.top}};e["a"]={__depends__:[i["a"]],__init__:["autoScroll"],autoScroll:["type",c]}},"8e4b":function(t,e,n){"use strict";var i=n("48e6"),o=n("02a3"),r=n("e506"),c=250;function a(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}function s(t){var e=t.originalEvent&&t.originalEvent.target;return e&&Object(r["d"])(e,'.group[data-group="tools"]')}a.$inject=["eventBus","dragging"],a.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error('A tool has to be registered with it\'s "events"');n.push(t),this.bindEvents(t,e)},a.prototype.isActive=function(t){return t&&this._active===t},a.prototype.length=function(t){return this._tools.length},a.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},a.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,r=[];n.on(e.tool+".init",(function(e){var n=e.context;if(!n.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)}),this),Object(o["i"])(e,(function(t){r.push(t+".ended"),r.push(t+".canceled")})),n.on(r,c,(function(t){this._active&&(s(t)||this.setActive(null))}),this)};e["a"]={__depends__:[i["a"]],__init__:["toolManager"],toolManager:["type",a]}},"8e51":function(t,e,n){"use strict";function i(t,e){if("function"!==typeof e)throw new Error("removeFn iterator must be a function");if(t){var n;while(n=t[0])e(n);return t}}n.d(e,"a",(function(){return i}))},9408:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return f}));var i=n("02a3");function o(t){return Object(i["e"])(t,(function(e){return!Object(i["f"])(t,(function(t){return t!==e&&r(e,t)}))}))}function r(t,e){if(e){if(t===e)return e;if(t.parent)return r(t.parent,e)}}function c(t,e,n){var i=!n||-1===t.indexOf(e);return i&&t.push(e),i}function a(t,e,n){n=n||0,Object(i["l"])(t)||(t=[t]),Object(i["i"])(t,(function(t,o){var r=e(t,o,n);Object(i["l"])(r)&&r.length&&a(r,e,n+1)}))}function s(t,e,n){var i=[],o=[];return a(t,(function(t,r,a){c(i,t,e);var s=t.children;if((-1===n||a<n)&&s&&c(o,s,e))return s})),i}function u(t,e){return s(t,!e,-1)}function h(t,e,n){Object(i["s"])(e)&&(e=!0),Object(i["q"])(e)&&(n=e,e=!0),n=n||{};var o=v(n.allShapes),r=v(n.allConnections),c=v(n.enclosedElements),s=v(n.enclosedConnections),u=v(n.topLevel,e&&Object(i["j"])(t,(function(t){return t.id})));function h(t){u[t.source.id]&&u[t.target.id]&&(u[t.id]=[t]),o[t.source.id]&&o[t.target.id]&&(s[t.id]=c[t.id]=t),r[t.id]=t}function d(t){if(c[t.id]=t,!t.waypoints)return o[t.id]=t,Object(i["i"])(t.incoming,h),Object(i["i"])(t.outgoing,h),t.children;s[t.id]=r[t.id]=t}return a(t,d),{allShapes:o,allConnections:r,topLevel:u,enclosedConnections:s,enclosedElements:c}}function d(t,e){var n,o,r,c;return e=!!e,Object(i["l"])(t)||(t=[t]),Object(i["i"])(t,(function(t){var i=t;t.waypoints&&!e&&(i=d(t.waypoints,!0));var a=i.x,s=i.y,u=i.height||0,h=i.width||0;(a<n||void 0===n)&&(n=a),(s<o||void 0===o)&&(o=s),(a+h>r||void 0===r)&&(r=a+h),(s+u>c||void 0===c)&&(c=s+u)})),{x:n,y:o,height:c-o,width:r-n}}function p(t,e){var n={};return Object(i["i"])(t,(function(t){var o=t;o.waypoints&&(o=d(o)),!Object(i["p"])(e.y)&&o.x>e.x&&(n[t.id]=t),!Object(i["p"])(e.x)&&o.y>e.y&&(n[t.id]=t),o.x>e.x&&o.y>e.y&&(Object(i["p"])(e.width)&&Object(i["p"])(e.height)&&o.width+o.x<e.width+e.x&&o.height+o.y<e.height+e.y?n[t.id]=t:Object(i["p"])(e.width)&&Object(i["p"])(e.height)||(n[t.id]=t))})),n}function l(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}function f(t){return!(!t||!t.isFrame)}function v(t,e){return Object(i["a"])({},t||{},e||{})}},9550:function(t,e,n){"use strict";var i=n("02a3"),o=Math.round;function r(t){this._modeling=t}r.$inject=["modeling"],r.prototype.replaceElement=function(t,e,n){if(t.waypoints)return null;var r=this._modeling,c=e.width||t.width,a=e.height||t.height,s=e.x||t.x,u=e.y||t.y,h=o(s+c/2),d=o(u+a/2);return r.replaceShape(t,Object(i["a"])({},e,{x:h,y:d,width:c,height:a}),n)};e["a"]={__init__:["replace"],replace:["type",r]}},"9c2f":function(t,e,n){"use strict";var i=n("9408");function o(t,e,n,o){t.on("element.changed",(function(o){var r=o.element;(r.parent||r===e.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&t.fire(Object(i["f"])(r)+".changed",o)})),t.on("elements.changed",(function(e){var n=e.elements;n.forEach((function(e){t.fire("element.changed",{element:e})})),o.updateContainments(n)})),t.on("shape.changed",(function(t){o.update("shape",t.element,t.gfx)})),t.on("connection.changed",(function(t){o.update("connection",t.element,t.gfx)}))}o.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];e["a"]={__init__:["changeSupport"],changeSupport:["type",o]}},"9cd4":function(t,e,n){"use strict";var i=n("02a3"),o=n("6b8b"),r=n("e506"),c=n("7972"),a=["marker-start","marker-mid","marker-end"],s=["circle","ellipse","line","path","polygon","polyline","rect"];function u(t,e,n,r){this._elementRegistry=t,this._canvas=n,this._styles=r,this._clonedMarkers={};var c=this;e.on("drag.cleanup",(function(){Object(i["i"])(c._clonedMarkers,(function(t){Object(o["j"])(t)})),c._clonedMarkers={}}))}function h(t,e,n){var i=d(Object(o["b"])(t,e));return Object(r["i"])("marker#"+i,n||document)}function d(t){return t.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function p(t){return"url(#"+t+")"}function l(t){return-1!==s.indexOf(t.nodeName)}u.$inject=["elementRegistry","eventBus","canvas","styles"],u.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},u.prototype.addDragger=function(t,e,n){n=n||this.getGfx(t);var i=Object(o["e"])(n),r=n.getBoundingClientRect();return this._cloneMarkers(Object(c["b"])(i)),Object(o["b"])(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Object(o["a"])(e,i),i},u.prototype.addFrame=function(t,e){var n=Object(o["f"])("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return Object(o["a"])(e,n),n},u.prototype._cloneMarkers=function(t){var e=this;if(t.childNodes)for(var n=0;n<t.childNodes.length;n++)e._cloneMarkers(t.childNodes[n]);l(t)&&a.forEach((function(n){if(Object(o["b"])(t,n)){var i=h(t,n,e._canvas.getContainer());e._cloneMarker(t,i,n)}}))},u.prototype._cloneMarker=function(t,e,n){var i=e.id,c=this._clonedMarkers[i];if(!c){c=Object(o["e"])(e);var a=i+"-clone";c.id=a,Object(o["c"])(c).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=c;var s=Object(r["i"])("defs",this._canvas._svg);s||(s=Object(o["f"])("defs"),Object(o["a"])(this._canvas._svg,s)),Object(o["a"])(s,c)}var u=p(this._clonedMarkers[i].id);Object(o["b"])(t,n,u)};e["a"]={__init__:["previewSupport"],previewSupport:["type",u]}},"9cef":function(t,e,n){"use strict";var i=n("ad34"),o=n("02a3"),r={moveSpeed:50,moveSpeedAccelerated:200};function c(t,e,n){var i=this;function c(t){var n=t.keyEvent,o=i._config;if(e.isCmd(n)&&e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],n)){var r,c=e.isShift(n)?o.moveSpeedAccelerated:o.moveSpeed;switch(n.key){case"ArrowLeft":case"Left":r="left";break;case"ArrowUp":case"Up":r="up";break;case"ArrowRight":case"Right":r="right";break;case"ArrowDown":case"Down":r="down";break}return i.moveCanvas({speed:c,direction:r}),!0}}this._config=Object(o["a"])({},r,t||{}),e.addListener(c),this.moveCanvas=function(t){var e=0,i=0,o=t.speed,r=o/Math.min(Math.sqrt(n.viewbox().scale),1);switch(t.direction){case"left":e=r;break;case"up":i=r;break;case"right":e=-r;break;case"down":i=-r;break}n.scroll({dx:e,dy:i})}}c.$inject=["config.keyboardMove","keyboard","canvas"];e["a"]={__depends__:[i["a"]],__init__:["keyboardMove"],keyboardMove:["type",c]}},"9d50":function(t,e,n){"use strict";function i(t){t&&"function"===typeof t.stopPropagation&&t.stopPropagation()}function o(t){return t.originalEvent||t.srcEvent}function r(t,e){i(t,e),i(o(t),e)}function c(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c}))},a113:function(t,e,n){"use strict";var i=n("6ffd"),o=n("4452"),r=n("76e2"),c=n("be73"),a=n("48e6"),s=n("9cd4"),u=n("02a3"),h=n("9d50"),d=n("fbb1"),p=500,l=1250,f=1500,v=Math.round;function g(t){return{x:t.x+v(t.width/2),y:t.y+v(t.height/2)}}function y(t,e,n,i,o){function r(t,e,n,i){return o.allowed("elements.move",{shapes:t,delta:e,position:n,target:i})}function c(t,n,i,o){if(Object(u["q"])(i)&&(o=i,i=!1),!n.waypoints&&n.parent){var r=g(n);return e.init(t,r,"shape.move",{cursor:"grabbing",autoActivate:i,data:{shape:n,context:o||{}}}),!0}}t.on("shape.move.start",f,(function(t){var e=t.context,n=t.shape,o=i.get().slice();-1===o.indexOf(n)&&(o=[n]),o=b(o),Object(u["a"])(e,{shapes:o,validatedShapes:o,shape:n})})),t.on("shape.move.start",l,(function(t){var e,n=t.context,i=n.validatedShapes;if(e=n.canExecute=r(i),!e)return!1})),t.on("shape.move.move",p,(function(t){var e,n=t.context,i=n.validatedShapes,o=t.hover,c={x:t.dx,y:t.dy},a={x:t.x,y:t.y};e=r(i,c,a,o),n.delta=c,n.canExecute=e,n.target=null!==e?o:null})),t.on("shape.move.end",(function(t){var e=t.context,i=e.delta,o=e.canExecute,r="attach"===o,c=e.shapes;if(!1===o)return!1;i.x=v(i.x),i.y=v(i.y),0===i.x&&0===i.y||n.moveElements(c,i,e.target,{primaryShape:e.shape,attach:r})})),t.on("element.mousedown",(function(t){if(Object(d["d"])(t)){var e=Object(h["a"])(t);if(!e)throw new Error("must supply DOM mousedown event");return c(e,t.element)}})),this.start=c}function b(t){var e=Object(u["j"])(t,"id");return Object(u["e"])(t,(function(t){while(t=t.parent)if(e[t.id])return!1;return!0}))}y.$inject=["eventBus","dragging","modeling","selection","rules"];var m=n("9408"),x=n("6b8b"),_=n("b586"),j=499,O="djs-dragging",w="drop-ok",E="drop-not-ok",S="new-parent",k="attach-ok";function C(t,e,n,i){function o(t){var e=r(t),n=M(e);return n}function r(t){var e=Object(m["h"])(t,!0),n=Object(u["u"])(e,(function(t){return(t.incoming||[]).concat(t.outgoing||[])}));return Object(u["h"])(e.concat(n))}function c(t,n){[k,w,E,S].forEach((function(i){i===n?e.addMarker(t,i):e.removeMarker(t,i)}))}function a(t,n,o){i.addDragger(n,t.dragGroup),o&&e.addMarker(n,O),t.allDraggedElements?t.allDraggedElements.push(n):t.allDraggedElements=[n]}t.on("shape.move.start",j,(function(t){var c=t.context,a=c.shapes,s=c.allDraggedElements,h=o(a);if(!c.dragGroup){var d=Object(x["f"])("g");Object(x["b"])(d,n.cls("djs-drag-group",["no-events"]));var p=e.getActiveLayer();Object(x["a"])(p,d),c.dragGroup=d}h.forEach((function(t){i.addDragger(t,c.dragGroup)})),s=s?Object(u["h"])([s,r(a)]):r(a),Object(u["i"])(s,(function(t){e.addMarker(t,O)})),c.allDraggedElements=s,c.differentParents=T(a)})),t.on("shape.move.move",j,(function(t){var e=t.context,n=e.dragGroup,i=e.target,o=e.shape.parent,r=e.canExecute;i&&("attach"===r?c(i,k):e.canExecute&&i&&i.id!==o.id?c(i,S):c(i,e.canExecute?w:E)),Object(_["c"])(n,t.dx,t.dy)})),t.on(["shape.move.out","shape.move.cleanup"],(function(t){var e=t.context,n=e.target;n&&c(n,null)})),t.on("shape.move.cleanup",(function(t){var n=t.context,i=n.allDraggedElements,o=n.dragGroup;Object(u["i"])(i,(function(t){e.removeMarker(t,O)})),o&&Object(x["j"])(o)})),this.makeDraggable=a}function M(t){var e=Object(u["e"])(t,(function(e){return!P(e)||Object(u["f"])(t,Object(u["v"])({id:e.source.id}))&&Object(u["f"])(t,Object(u["v"])({id:e.target.id}))}));return e}function T(t){return 1!==Object(u["z"])(Object(u["j"])(t,(function(t){return t.parent&&t.parent.id})))}function P(t){return t.waypoints}C.$inject=["eventBus","canvas","styles","previewSupport"];e["a"]={__depends__:[i["a"],o["a"],r["a"],c["a"],a["a"],s["a"]],__init__:["move","movePreview"],move:["type",y],movePreview:["type",C]}},aa33:function(t,e,n){"use strict";function i(t,e){if(!t||!e)return-1;var n=t.indexOf(e);return-1!==n&&t.splice(n,1),n}function o(t,e,n){if(t&&e){"number"!==typeof n&&(n=-1);var i=t.indexOf(e);if(-1!==i){if(i===n)return;if(-1===n)return;t.splice(i,1)}-1!==n?t.splice(n,0,e):t.push(e)}}function r(t,e){return t&&e?t.indexOf(e):-1}n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}))},ad34:function(t,e,n){"use strict";var i=n("02a3"),o=n("e506"),r=n("28c3"),c="keyboard.keydown",a="keyboard.keyup",s="input-handle-modified-keys",u=1e3;function h(t,e){var n=this;this._config=t||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",(function(){n._fire("destroy"),n.unbind()})),e.on("diagram.init",(function(){n._fire("init")})),e.on("attach",(function(){t&&t.bindTo&&n.bind(t.bindTo)})),e.on("detach",(function(){n.unbind()}))}function d(t){return t&&(Object(o["h"])(t,"input, textarea")||"true"===t.contentEditable)}h.$inject=["config.keyboard","eventBus"],h.prototype._keydownHandler=function(t){this._keyHandler(t,c)},h.prototype._keyupHandler=function(t){this._keyHandler(t,a)},h.prototype._keyHandler=function(t,e){var n;if(!this._isEventIgnored(t)){var i={keyEvent:t};n=this._eventBus.fire(e||c,i),n&&t.preventDefault()}},h.prototype._isEventIgnored=function(t){return d(t.target)&&this._isModifiedKeyIgnored(t)},h.prototype._isModifiedKeyIgnored=function(t){if(!Object(r["b"])(t))return!0;var e=this._getAllowedModifiers(t.target);return!e.includes(t.key)},h.prototype._getAllowedModifiers=function(t){var e=Object(o["d"])(t,"["+s+"]",!0);return!e||this._node&&!this._node.contains(e)?[]:e.getAttribute(s).split(",")},h.prototype.bind=function(t){this.unbind(),this._node=t,o["g"].bind(t,"keydown",this._keydownHandler,!0),o["g"].bind(t,"keyup",this._keyupHandler,!0),this._fire("bind")},h.prototype.getBinding=function(){return this._node},h.prototype.unbind=function(){var t=this._node;t&&(this._fire("unbind"),o["g"].unbind(t,"keydown",this._keydownHandler,!0),o["g"].unbind(t,"keyup",this._keyupHandler,!0)),this._node=null},h.prototype._fire=function(t){this._eventBus.fire("keyboard."+t,{node:this._node})},h.prototype.addListener=function(t,e,n){Object(i["n"])(t)&&(n=e,e=t,t=u),this._eventBus.on(n||c,t,e)},h.prototype.removeListener=function(t,e){this._eventBus.off(e||c,t)},h.prototype.hasModifier=r["a"],h.prototype.isCmd=r["b"],h.prototype.isShift=r["g"],h.prototype.isKey=r["d"];var p=n("1fde");e["a"]={__init__:["keyboard","keyboardBindings"],keyboard:["type",h],keyboardBindings:["type",p["a"]]}},b071:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var i=n("e506"),o=/^djs-cursor-.*$/;function r(t){var e=Object(i["b"])(document.body);e.removeMatching(o),t&&e.add("djs-cursor-"+t)}function c(){r(null)}},b586:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c}));var i=n("6b8b");function o(t,e,n,o,r){var c=Object(i["h"])();c.setTranslate(e,n);var a=Object(i["h"])();a.setRotate(o||0,0,0);var s=Object(i["h"])();s.setScale(r||1,r||1),Object(i["k"])(t,[c,a,s])}function r(t,e,n){var o=Object(i["h"])();o.setTranslate(e,n),Object(i["k"])(t,o)}function c(t,e){var n=Object(i["h"])();n.setRotate(e,0,0),Object(i["k"])(t,n)}},bc55:function(t,e,n){"use strict";var i=n("e506"),o=n("28c1");function r(t,e){var n=Object(o["a"])(t.min),i=Object(o["a"])(t.max),r=Math.abs(n)+Math.abs(i);return r/e}function c(t,e){return Math.max(t.min,Math.min(t.max,e))}var a=n("02a3"),s=Math.sign||function(t){return t>=0?1:-1},u={min:.2,max:4},h=10,d=.1,p=.75;function l(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Object(a["b"])(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||p;var i=this;e.on("canvas.init",(function(e){i._init(!1!==t.enabled)}))}l.$inject=["config.zoomScroll","eventBus","canvas"],l.prototype.scroll=function(t){this._canvas.scroll(t)},l.prototype.reset=function(){this._canvas.zoom("fit-viewport")},l.prototype.zoom=function(t,e){var n=r(u,2*h);this._totalDelta+=t,Math.abs(this._totalDelta)>d&&(this._zoom(t,e,n),this._totalDelta=0)},l.prototype._handleWheel=function(t){if(!Object(i["d"])(t.target,".djs-scrollable",!0)){var e=this._container;t.preventDefault();var n,o=t.ctrlKey,r=t.shiftKey,c=-1*this._scale;if(c*=o?0===t.deltaMode?.02:.32:0===t.deltaMode?1:16,o){var a=e.getBoundingClientRect(),u={x:t.clientX-a.left,y:t.clientY-a.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*s(t.deltaY)*c,this.zoom(n,u)}else n=r?{dx:c*t.deltaY,dy:0}:{dx:c*t.deltaX,dy:c*t.deltaY},this.scroll(n)}},l.prototype.stepZoom=function(t,e){var n=r(u,h);this._zoom(t,e,n)},l.prototype._zoom=function(t,e,n){var i=this._canvas,r=t>0?1:-1,a=Object(o["a"])(i.zoom()),s=Math.round(a/n)*n;s+=n*r;var h=Math.pow(10,s);i.zoom(c(u,h),e)},l.prototype.toggle=function(t){var e=this._container,n=this._handleWheel,o=this._enabled;return"undefined"===typeof t&&(t=!o),o!==t&&i["g"][t?"bind":"unbind"](e,"wheel",n,!1),this._enabled=t,t},l.prototype._init=function(t){this.toggle(t)};e["a"]={__init__:["zoomScroll"],zoomScroll:["type",l]}},bdc3:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=5e3;function o(t,e){function n(){return!1}return e=e||"element.click",t.once(e,i,n),function(){t.off(e,n)}}},bde3:function(t,e,n){"use strict";var i=n("be73"),o=n("02a3"),r=n("8e51"),c=n("7ddc"),a=n("3fb5"),s=n.n(a),u=n("18e7"),h=251,d=1401,p="attach-ok";function l(t,e,n,i,a){u["a"].call(this,e);var s=t.get("movePreview",!1);e.on("shape.move.start",d,(function(t){var e=t.context,n=e.shapes,i=e.validatedShapes;e.shapes=v(n),e.validatedShapes=g(i)})),s&&e.on("shape.move.start",h,(function(t){var e=t.context,n=e.shapes,i=f(n);Object(o["i"])(i,(function(t){s.makeDraggable(e,t,!0),Object(o["i"])(t.labels,(function(t){s.makeDraggable(e,t,!0)}))}))})),s&&e.on("shape.move.start",(function(t){var i=t.context,o=i.shapes;if(1===o.length){var r=o[0],c=r.host;c&&(n.addMarker(c,p),e.once(["shape.move.out","shape.move.cleanup"],(function(){n.removeMarker(c,p)})))}})),this.preExecuted("elements.move",d,(function(t){var e=t.context,n=e.closure,i=e.shapes,r=f(i);Object(o["i"])(r,(function(t){n.add(t,n.topLevel[t.host.id])}))})),this.postExecuted("elements.move",(function(t){var e,n=t.context,i=n.shapes,r=n.newHost;r&&1!==i.length||(e=r?i:Object(o["e"])(i,(function(t){var e=t.host;return y(t)&&!b(i,e)})),Object(o["i"])(e,(function(t){a.updateAttachment(t,r)})))})),this.postExecuted("elements.move",(function(t){var e=t.context.shapes;Object(o["i"])(e,(function(t){Object(o["i"])(t.attachers,(function(t){Object(o["i"])(t.outgoing.slice(),(function(t){var e=i.allowed("connection.reconnect",{connection:t,source:t.source,target:t.target});e||a.removeConnection(t)})),Object(o["i"])(t.incoming.slice(),(function(t){var e=i.allowed("connection.reconnect",{connection:t,source:t.source,target:t.target});e||a.removeConnection(t)}))}))}))})),this.postExecute("shape.create",(function(t){var e=t.context,n=e.shape,i=e.host;i&&a.updateAttachment(n,i)})),this.postExecute("shape.replace",(function(t){var e=t.context,n=e.oldShape,s=e.newShape;Object(r["a"])(n.attachers,(function(t){var e=i.allowed("elements.move",{target:s,shapes:[t]});"attach"===e?a.updateAttachment(t,s):a.removeShape(t)})),s.attachers.length&&Object(o["i"])(s.attachers,(function(t){var e=Object(c["b"])(t,n,s);a.moveShape(t,e,t.parent)}))})),this.postExecute("shape.resize",(function(t){var e=t.context,n=e.shape,i=e.oldBounds,r=e.newBounds,s=n.attachers,u=e.hints||{};!1!==u.attachSupport&&Object(o["i"])(s,(function(t){var e=Object(c["b"])(t,i,r);a.moveShape(t,e,t.parent),Object(o["i"])(t.labels,(function(t){a.moveShape(t,e,t.parent)}))}))})),this.preExecute("shape.delete",(function(t){var e=t.context.shape;Object(r["a"])(e.attachers,(function(t){a.removeShape(t)})),e.host&&a.updateAttachment(e,null)}))}function f(t){return Object(o["h"])(Object(o["u"])(t,(function(t){return t.attachers||[]})))}function v(t){var e=f(t);return Object(o["C"])("id",t,e)}function g(t){var e=Object(o["j"])(t,"id");return Object(o["e"])(t,(function(t){while(t){if(t.host&&e[t.host.id])return!1;t=t.parent}return!0}))}function y(t){return!!t.host}function b(t,e){return-1!==t.indexOf(e)}s()(l,u["a"]),l.$inject=["injector","eventBus","canvas","rules","modeling"];e["a"]={__depends__:[i["a"]],__init__:["attachSupport"],attachSupport:["type",l]}},be73:function(t,e,n){"use strict";function i(t){this._commandStack=t.get("commandStack",!1)}i.$inject=["injector"],i.prototype.allowed=function(t,e){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(t,e)),void 0===n||n};e["a"]={__init__:["rules"],rules:["type",i]}},bf95:function(t,e,n){"use strict";var i=n("6ffd"),o=n("02a3"),r=n("e506"),c=n("c8b5"),a=n.n(c),s=n("9d50"),u=.2,h=4,d=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function p(){}function l(t,e){return e.get(t,!1)}function f(t){t.preventDefault(),"function"===typeof t.stopPropagation?t.stopPropagation():t.srcEvent&&"function"===typeof t.srcEvent.stopPropagation&&t.srcEvent.stopPropagation(),"function"===typeof t.stopImmediatePropagation&&t.stopImmediatePropagation()}function v(t){function e(e){Object(o["i"])(d,(function(e){r["g"].bind(t,e,f,!0)}))}function n(e){setTimeout((function(){Object(o["i"])(d,(function(e){r["g"].unbind(t,e,f,!0)}))}),500)}r["g"].bind(t,"touchstart",e,!0),r["g"].bind(t,"touchend",n,!0),r["g"].bind(t,"touchcancel",n,!0);var i=new a.a.Manager(t,{inputClass:a.a.TouchInput,recognizers:[],domEvents:!0}),c=new a.a.Tap,s=new a.a.Pan({threshold:10}),u=new a.a.Press,h=new a.a.Pinch,l=new a.a.Tap({event:"doubletap",taps:2});return h.requireFailure(s),h.requireFailure(u),i.add([s,u,h,l,c]),i.reset=function(t){var e=this.recognizers,n=this.session;n.stopped||(p("recognizer","stop"),i.stop(t),setTimeout((function(){var t,i;for(p("recognizer","reset"),t=0;i=e[t];t++)i.reset(),i.state=8;n.curRecognizer=null}),0))},i.on("hammer.input",(function(t){t.srcEvent.defaultPrevented&&i.reset(!0)})),i}function g(t,e,n,i,o){var c,a=l("dragging",t),d=l("move",t),g=l("contextPad",t),y=l("palette",t);function b(t,e){return function(n){p("element",t,n);var r=m(n.target),c=r&&i.get(r);return e&&(n.srcEvent.button=e),o.fire(t,n,c)}}function m(t){var e=Object(r["d"])(t,"svg, .djs-element",!0);return e}function x(t){function n(t){p("canvas","grab start");var n=0,i=0;function o(t){var o=t.deltaX-n,r=t.deltaY-i;e.scroll({dx:o,dy:r}),n=t.deltaX,i=t.deltaY}function r(t){c.off("panmove",o),c.off("panend",r),c.off("pancancel",r),p("canvas","grab end")}c.on("panmove",o),c.on("panend",r),c.on("pancancel",r)}function o(t){var o=m(t.target),r=o&&i.get(o);if(d&&e.getRootElement()!==r)return p("element","move start",r,t,!0),d.start(t,r,!0);n(t)}function r(t){p("canvas","zoom start");var n=e.zoom(),i=t.center;function o(t){var o=1-(1-t.scale)/1.5,r=Math.max(u,Math.min(h,o*n));e.zoom(r,i),f(t)}function r(t){c.off("pinchmove",o),c.off("pinchend",r),c.off("pinchcancel",r),c.reset(!0),p("canvas","zoom end")}c.on("pinchmove",o),c.on("pinchend",r),c.on("pinchcancel",r)}c=v(t),c.on("tap",b("element.click")),c.on("doubletap",b("element.dblclick",1)),c.on("panstart",o),c.on("press",o),c.on("pinchstart",r)}a&&n.on("drag.move",(function(t){var e=t.originalEvent;if(e&&!(e instanceof MouseEvent)){var n=Object(s["c"])(e),o=document.elementFromPoint(n.x,n.y),r=m(o),c=r&&i.get(r);c!==t.hover&&(t.hover&&a.out(t),c&&(a.hover({element:c,gfx:r}),t.hover=c,t.hoverGfx=r))}})),g&&n.on("contextPad.create",(function(t){var e=t.pad.html,n=v(e);n.on("panstart",(function(t){p("context-pad","panstart",t),g.trigger("dragstart",t,!0)})),n.on("press",(function(t){p("context-pad","press",t),g.trigger("dragstart",t,!0)})),n.on("tap",(function(t){p("context-pad","tap",t),g.trigger("click",t)}))})),y&&n.on("palette.create",(function(t){var e=t.container,n=v(e);n.on("panstart",(function(t){p("palette","panstart",t),y.trigger("dragstart",t,!0)})),n.on("press",(function(t){p("palette","press",t),y.trigger("dragstart",t,!0)})),n.on("tap",(function(t){p("palette","tap",t),y.trigger("click",t)}))})),n.on("canvas.init",(function(t){x(t.svg)}))}g.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var y=n("6b8b");function b(t,e){var n=this;e.on("canvas.init",(function(t){n.addBBoxMarker(t.svg)}))}b.$inject=["canvas","eventBus"],b.prototype.addBBoxMarker=function(t){var e={fill:"none",class:"outer-bound-marker"},n=Object(y["f"])("rect");Object(y["b"])(n,{x:-1e4,y:1e4,width:10,height:10}),Object(y["b"])(n,e),Object(y["a"])(t,n);var i=Object(y["f"])("rect");Object(y["b"])(i,{x:1e4,y:1e4,width:10,height:10}),Object(y["b"])(i,e),Object(y["a"])(t,i)};var m={__depends__:[i["a"]],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",g],touchFix:["type",b]};e["a"]={__depends__:[m]}},c10e:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return z}));var i=n("02a3"),o=n("e759"),r=n("2d8d"),c=20,a=5,s=Math.round,u=20,h={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function d(t,e){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[e].test(t)}function p(t,e){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[t].test(e)}function l(t,e,n){var i,r,u=Object(o["f"])(e,t,a),h=n.split(":")[0],l=s((e.x-t.x)/2+t.x),f=s((e.y-t.y)/2+t.y),v=p(h,u),g=/h|r|l/.test(h),y=!1,b=!1;return v?(i=g?{x:l,y:t.y}:{x:t.x,y:f},r=g?"h:h":"v:v"):(y=d(u,h),r=g?"h:v":"v:h",y?g?(b=f===t.y,i={x:t.x+c*(/l/.test(h)?-1:1),y:b?f+c:f}):(b=l===t.x,i={x:b?l+c:l,y:t.y+c*(/t/.test(h)?-1:1)}):i={x:l,y:f}),{waypoints:m(t,i,r).concat(i),directions:r,turnNextDirections:b}}function f(t,e,n){return l(t,e,n)}function v(t,e,n){var i=l(e,t,y(n));return{waypoints:i.waypoints.slice().reverse(),directions:y(i.directions),turnNextDirections:i.turnNextDirections}}function g(t,e){var n=t.directions.split(":")[1],i=e.directions.split(":")[0];t.turnNextDirections&&(n="h"==n?"v":"h"),e.turnNextDirections&&(i="h"==i?"v":"h");var o=n+":"+i,r=m(t.waypoints[t.waypoints.length-1],e.waypoints[0],o);return{waypoints:r,directions:o}}function y(t){return t.split(":").reverse().join(":")}function b(t,e,n){var i=s((e.x-t.x)/2+t.x),o=s((e.y-t.y)/2+t.y);if("h:v"===n)return[{x:e.x,y:t.y}];if("v:h"===n)return[{x:t.x,y:e.y}];if("h:h"===n)return[{x:i,y:t.y},{x:i,y:e.y}];if("v:v"===n)return[{x:t.x,y:o},{x:e.x,y:o}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function m(t,e,n){if(n=n||"h:h",!T(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(P(n)){var i=f(t,e,n),o=v(t,e,n),r=g(i,o);return[].concat(i.waypoints,r.waypoints,o.waypoints)}return b(t,e,n)}function x(t,e,n){var i=m(t,e,n);return i.unshift(t),i.push(e),z(i)}function _(t,e,n,r,c){var a=c&&c.preferredLayouts||[],s=Object(i["F"])(a,"straight")[0]||"h:h",u=h[s]||0,d=Object(o["f"])(t,e,u),p=M(d,s);n=n||Object(o["e"])(t),r=r||Object(o["e"])(e);var l=p.split(":"),f=R(n,t,l[0],B(d)),v=R(r,e,l[1],d);return x(f,v,p)}function j(t,e,n,r,c,a){Object(i["l"])(n)&&(c=n,a=r,n=Object(o["e"])(t),r=Object(o["e"])(e)),a=Object(i["a"])({preferredLayouts:[]},a),c=c||[];var s,u=a.preferredLayouts,h=-1!==u.indexOf("straight");return s=h&&E(t,e,n,r,a),s||(s=a.connectionEnd&&k(e,t,r,c),s||(s=a.connectionStart&&S(t,e,n,c),s||(!a.connectionStart&&!a.connectionEnd&&c&&c.length?c:_(t,e,n,r,a))))}function O(t,e,n){return t>=e&&t<=n}function w(t,e,n){var i={x:"width",y:"height"};return O(e[t],n[t],n[t]+n[i[t]])}function E(t,e,n,i,r){var c,a,s={};return a=Object(o["f"])(t,e),/^(top|bottom|left|right)$/.test(a)?(/top|bottom/.test(a)&&(c="x"),/left|right/.test(a)&&(c="y"),"target"===r.preserveDocking?w(c,i,t)?(s[c]=i[c],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:w(c,n,e)?(s[c]=n[c],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null):null}function S(t,e,n,i){return C(t,e,n,i)}function k(t,e,n,i){var o=i.slice().reverse();return o=C(t,e,n,o),o?o.reverse():null}function C(t,e,n,o){function c(t){return t.length<3||!(t.length>4)&&!!Object(i["f"])(t,(function(e,n){var i=t[n-1];return i&&Object(r["b"])(e,i)<3}))}function a(t,e,n){var i=Object(r["d"])(e,t);switch(i){case"v":return{x:n.x,y:t.y};case"h":return{x:t.x,y:n.y}}return{x:t.x,y:t.y}}function s(t,e,n){var i;for(i=t.length-2;0!==i;i--)if(Object(r["c"])(t[i],e,u)||Object(r["c"])(t[i],n,u))return t.slice(i);return t}if(c(o))return null;var h,d=o[0],p=o.slice();return p[0]=n,p[1]=a(p[1],d,n),h=s(p,t,e),h!==p&&(p=C(t,e,n,h)),p&&Object(r["d"])(p)?null:p}function M(t,e){if(P(e))return e;switch(t){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return e}}function T(t){return t&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(t)}function P(t){return t&&/t|r|b|l/.test(t)}function B(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[t]}function R(t,e,n,i){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:t,x:t.x,y:e.y};if("r"===n)return{original:t,x:e.x+e.width,y:t.y};if("b"===n)return{original:t,x:t.x,y:e.y+e.height};if("l"===n)return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function z(t){return t.reduce((function(e,n,i){var o=e[e.length-1],c=t[i+1];return Object(r["e"])(o,c,n,0)||e.push(n),e}),[])}},c73f:function(t,e,n){"use strict";var i=n("48e6"),o=n("be73"),r=n("02a3"),c=n("e506"),a=n("9d50"),s=n("2d8d"),u=n("6b8b"),h=n("b586"),d=n("4716"),p="djs-bendpoint",l="djs-segment-dragger";function f(t,e){var n,i=Object(a["c"])(e),o=t._container.getBoundingClientRect();n={x:o.left,y:o.top};var r=t.viewbox();return{x:r.x+(i.x-n.x)/r.scale,y:r.y+(i.y-n.y)/r.scale}}function v(t,e,n){var i=f(t,n),o=Object(d["a"])(e,i);return o}function g(t,e){var n=Object(u["f"])("g");Object(u["c"])(n).add(p),Object(u["a"])(t,n);var i=Object(u["f"])("circle");Object(u["b"])(i,{cx:0,cy:0,r:4}),Object(u["c"])(i).add("djs-visual"),Object(u["a"])(n,i);var o=Object(u["f"])("circle");return Object(u["b"])(o,{cx:0,cy:0,r:10}),Object(u["c"])(o).add("djs-hit"),Object(u["a"])(n,o),e&&Object(u["c"])(n).add(e),n}function y(t,e,n,i){var o=Object(u["f"])("g");Object(u["a"])(t,o);var r=14,c=3,a=11,s=x(e,n,i),d=c+a,p=Object(u["f"])("rect");Object(u["b"])(p,{x:-r/2,y:-c/2,width:r,height:c}),Object(u["c"])(p).add("djs-visual"),Object(u["a"])(o,p);var l=Object(u["f"])("rect");return Object(u["b"])(l,{x:-s/2,y:-d/2,width:s,height:d}),Object(u["c"])(l).add("djs-hit"),Object(u["a"])(o,l),Object(h["a"])(o,"v"===i?90:0,0,0),o}function b(t,e,n){var i=Object(u["f"])("g"),o=Object(s["a"])(e,n),r=Object(s["d"])(e,n);return Object(u["a"])(t,i),y(i,e,n,r),Object(u["c"])(i).add(l),Object(u["c"])(i).add("h"===r?"horizontal":"vertical"),Object(h["c"])(i,o.x,o.y),i}function m(t){return Math.abs(Math.round(2*t/3))}function x(t,e,n){var i=e.x-t.x,o=e.y-t.y;return m("h"===n?i:o)}var _=n("7328"),j=n("fbb1");function O(t,e,n,i,o){function a(t,e,n){var i,o,r,c,a,u,h=t.index,d=t.point;return!(h<=0||t.bendpoint)&&(i=e[h-1],o=e[h],r=Object(s["a"])(i,o),c=Object(s["d"])(i,o),a=Math.abs(d.x-r.x),u=Math.abs(d.y-r.y),c&&a<=n&&u<=n)}function d(t,e){var n,i,o,r,c=t.waypoints;return e.index<=0||e.bendpoint?null:(n={start:c[e.index-1],end:c[e.index]},i=Object(s["d"])(n.start,n.end),i?(o="h"===i?n.end.x-n.start.x:n.end.y-n.start.y,r=m(o)/2,r):null)}function f(t,n){var r,c=n.waypoints,s=v(e,c,t);if(s)return r=d(n,s),a(s,c,r)?o.start(t,n,s.index):i.start(t,n,s.index,!s.bendpoint),!0}function y(t,e,i){c["g"].bind(t,e,(function(t){n.triggerMouseEvent(e,t,i),t.stopPropagation()}))}function x(t,n){var i=e.getLayer("overlays"),o=Object(c["i"])('.djs-bendpoints[data-element-id="'+Object(_["a"])(t.id)+'"]',i);return!o&&n&&(o=Object(u["f"])("g"),Object(u["b"])(o,{"data-element-id":t.id}),Object(u["c"])(o).add("djs-bendpoints"),Object(u["a"])(i,o),y(o,"mousedown",t),y(o,"click",t),y(o,"dblclick",t)),o}function O(t,e){return Object(c["i"])('.djs-segment-dragger[data-segment-idx="'+t+'"]',e)}function E(t,e){e.waypoints.forEach((function(e,n){var i=g(t);Object(u["a"])(t,i),Object(h["c"])(i,e.x,e.y)})),g(t,"floating")}function S(t,e){for(var n,i,o,r=e.waypoints,c=1;c<r.length;c++)n=r[c-1],i=r[c],Object(s["d"])(n,i)&&(o=b(t,n,i),Object(u["b"])(o,{"data-segment-idx":c}),y(o,"mousemove",e))}function k(t){Object(r["i"])(Object(c["j"])("."+p,t),(function(t){Object(u["j"])(t)}))}function C(t){Object(r["i"])(Object(c["j"])("."+l,t),(function(t){Object(u["j"])(t)}))}function M(t){var e=x(t);return e||(e=x(t,!0),E(e,t),S(e,t)),e}function T(t){var e=x(t);e&&(C(e),k(e),S(e,t),E(e,t))}function P(t,e){var n=Object(c["i"])(".floating",t),i=e.point;n&&Object(h["c"])(n,i.x,i.y)}function B(t,e,n){var i,o,r=O(e.index,t),c=n[e.index-1],a=n[e.index],u=e.point,d=Object(s["a"])(c,a),p=Object(s["d"])(c,a);r&&(i=w(r),o={x:u.x-d.x,y:u.y-d.y},"v"===p&&(o={x:o.y,y:o.x}),Object(h["c"])(i,o.x,o.y))}t.on("connection.changed",(function(t){T(t.element)})),t.on("connection.remove",(function(t){var e=x(t.element);e&&Object(u["j"])(e)})),t.on("element.marker.update",(function(t){var e,n=t.element;n.waypoints&&(e=M(n),t.add?Object(u["c"])(e).add(t.marker):Object(u["c"])(e).remove(t.marker))})),t.on("element.mousemove",(function(t){var n,i,o=t.element,r=o.waypoints;if(r){if(n=x(o,!0),i=v(e,r,t.originalEvent),!i)return;P(n,i),i.bendpoint||B(n,i,r)}})),t.on("element.mousedown",(function(t){if(Object(j["d"])(t)){var e=t.originalEvent,n=t.element;if(n.waypoints)return f(e,n)}})),t.on("selection.changed",(function(t){var e=t.newSelection,n=e[0];n&&n.waypoints&&M(n)})),t.on("element.hover",(function(t){var e=t.element;e.waypoints&&(M(e),n.registerEvent(t.gfx,"mousemove","element.mousemove"))})),t.on("element.out",(function(t){n.unregisterEvent(t.gfx,"mousemove","element.mousemove")})),t.on("element.updateId",(function(t){var e=t.element,n=t.newId;if(e.waypoints){var i=x(e);i&&Object(u["b"])(i,{"data-element-id":n})}})),this.addHandles=M,this.updateHandles=T,this.getBendpointsContainer=x,this.getSegmentDragger=O}function w(t){return Object(c["i"])(".djs-visual",t)}O.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var E=n("e759"),S=Math.round,k="reconnectStart",C="reconnectEnd",M="updateWaypoints";function T(t,e,n,i,o,r){this._injector=t,this.start=function(t,e,r,c){var a,s=n.getGraphics(e),u=e.source,h=e.target,d=e.waypoints;a=c||0!==r?c||r!==d.length-1?M:C:k;var p=a===M?"connection.updateWaypoints":"connection.reconnect",l=o.allowed(p,{connection:e,source:u,target:h});!1===l&&(l=o.allowed(p,{connection:e,source:h,target:u})),!1!==l&&i.init(t,"bendpoint.move",{data:{connection:e,connectionGfx:s,context:{allowed:l,bendpointIndex:r,connection:e,source:u,target:h,insert:c,type:a}}})},e.on("bendpoint.move.hover",(function(t){var e,n=t.context,i=n.connection,r=i.source,c=i.target,a=t.hover,s=n.type;if(n.hover=a,a){var u=s===M?"connection.updateWaypoints":"connection.reconnect";if(e=n.allowed=o.allowed(u,{connection:i,source:s===k?a:r,target:s===C?a:c}),e)return n.source=s===k?a:r,void(n.target=s===C?a:c);!1===e&&(e=n.allowed=o.allowed(u,{connection:i,source:s===C?a:c,target:s===k?a:r})),e&&(n.source=s===C?a:c,n.target=s===k?a:r)}})),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],(function(t){var e=t.context,n=e.type;e.hover=null,e.source=null,e.target=null,n!==M&&(e.allowed=!1)})),e.on("bendpoint.move.end",(function(t){var e=t.context,n=e.allowed,i=e.bendpointIndex,o=e.connection,c=e.insert,a=o.waypoints.slice(),s=e.source,u=e.target,h=e.type,d=e.hints||{},p={x:S(t.x),y:S(t.y)};if(!n)return!1;h===M?(c?a.splice(i,0,p):a[i]=p,d.bendpointMove={insert:c,bendpointIndex:i},a=this.cropWaypoints(o,a),r.updateWaypoints(o,Object(E["c"])(a),d)):(h===k?(d.docking="source",P(e)&&(d.docking="target",d.newWaypoints=a.reverse())):h===C&&(d.docking="target",P(e)&&(d.docking="source",d.newWaypoints=a.reverse())),r.reconnect(o,s,u,p,d))}),this)}function P(t){var e=t.hover,n=t.source,i=t.target,o=t.type;return o===k?e&&i&&e===i&&n!==i:o===C?e&&n&&e===n&&n!==i:void 0}T.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],T.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var i=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=i,e};var B="reconnectStart",R="reconnectEnd",z="updateWaypoints",A="connect-ok",L="connect-not-ok",I="connect-hover",D="djs-updating",H="djs-element-hidden",$=1100;function G(t,e,n,i){this._injector=e;var o=e.get("connectionPreview",!1);n.on("bendpoint.move.start",(function(t){var e=t.context,n=e.bendpointIndex,o=e.connection,r=e.insert,c=o.waypoints,a=c.slice();e.waypoints=c,r&&a.splice(n,0,{x:t.x,y:t.y}),o.waypoints=a;var s=e.draggerGfx=g(i.getLayer("overlays"));Object(u["c"])(s).add("djs-dragging"),i.addMarker(o,H),i.addMarker(o,D)})),n.on("bendpoint.move.hover",(function(t){var e=t.context,n=e.allowed,o=e.hover,r=e.type;if(o){if(i.addMarker(o,I),r===z)return;n?(i.removeMarker(o,L),i.addMarker(o,A)):!1===n&&(i.removeMarker(o,A),i.addMarker(o,L))}})),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],$,(function(t){var e=t.context,n=e.hover,o=e.target;n&&(i.removeMarker(n,I),i.removeMarker(n,o?A:L))})),n.on("bendpoint.move.move",(function(e){var n=e.context,i=n.allowed,r=n.bendpointIndex,c=n.draggerGfx,a=n.hover,s=n.type,u=n.connection,d=u.source,p=u.target,l=u.waypoints.slice(),f={x:e.x,y:e.y},v=n.hints||{},g={};o&&(v.connectionStart&&(g.connectionStart=v.connectionStart),v.connectionEnd&&(g.connectionEnd=v.connectionEnd),s===B?P(n)?(g.connectionEnd=g.connectionEnd||f,g.source=p,g.target=a||d,l=l.reverse()):(g.connectionStart=g.connectionStart||f,g.source=a||d,g.target=p):s===R?P(n)?(g.connectionStart=g.connectionStart||f,g.source=a||p,g.target=d,l=l.reverse()):(g.connectionEnd=g.connectionEnd||f,g.source=d,g.target=a||p):(g.noCropping=!0,g.noLayout=!0,l[r]=f),s===z&&(l=t.cropWaypoints(u,l)),g.waypoints=l,o.drawPreview(n,i,g)),Object(h["c"])(c,e.x,e.y)}),this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],$,(function(t){var e=t.context,n=e.connection,r=e.draggerGfx,c=e.hover,a=e.target,s=e.waypoints;n.waypoints=s,Object(u["j"])(r),i.removeMarker(n,D),i.removeMarker(n,H),c&&(i.removeMarker(c,A),i.removeMarker(c,a?A:L)),o&&o.cleanUp(e)}))}G.$inject=["bendpointMove","injector","eventBus","canvas"];var F="connect-hover",N="djs-updating";function V(t,e,n){return W(t,e,t[e]+n)}function W(t,e,n){return{x:"x"===e?n:t.x,y:"y"===e?n:t.y}}function U(t,e,n,i){var o=Math.max(e[i],n[i]),r=Math.min(e[i],n[i]),c=20,a=Math.min(Math.max(r+c,t[i]),o-c);return W(e,i,a)}function q(t){return"x"===t?"y":"x"}function Y(t,e,n){var i,o;return t.original?t.original:(i=Object(E["e"])(e),o=q(n),W(t,o,i[o]))}function K(t,e,n,i,o,r){var c=t.get("connectionDocking",!1);function a(t,e){if(!c)return e;var n,i=t.waypoints;return t.waypoints=e,n=c.getCroppedWaypoints(t),t.waypoints=i,n}function d(t){o.update("connection",t.connection,t.connectionGfx)}function p(t,e,n){var i=t.newWaypoints,o=t.segmentStartIndex+e,r=i[o],c=t.segmentEndIndex+e,a=i[c],s=q(t.axis),u=U(n,r,a,s);Object(h["c"])(t.draggerGfx,u.x,u.y)}function l(t,e){var n=0,i=t.filter((function(i,o){return!Object(s["e"])(t[o-1],t[o+1],i)||(n=o<=e?n-1:n,!1)}));return{waypoints:i,segmentOffset:n}}this.start=function(t,e,o){var r,c,a,u,h=n.getGraphics(e),d=o-1,p=o,l=e.waypoints,f=l[d],g=l[p],y=v(n,l,t);c=Object(s["d"])(f,g),c&&(a="v"===c?"x":"y",0===d&&(f=Y(f,e.source,a)),p===l.length-1&&(g=Y(g,e.target,a)),u=y?y.point:{x:(f.x+g.x)/2,y:(f.y+g.y)/2},r={connection:e,segmentStartIndex:d,segmentEndIndex:p,segmentStart:f,segmentEnd:g,axis:a,dragPosition:u},i.init(t,u,"connectionSegment.move",{cursor:"x"===a?"resize-ew":"resize-ns",data:{connection:e,connectionGfx:h,context:r}}))},e.on("connectionSegment.move.start",(function(t){var e=t.context,i=t.connection,o=n.getLayer("overlays");e.originalWaypoints=i.waypoints.slice(),e.draggerGfx=b(o,e.segmentStart,e.segmentEnd),Object(u["c"])(e.draggerGfx).add("djs-dragging"),n.addMarker(i,N)})),e.on("connectionSegment.move.move",(function(t){var e,n,i=t.context,o=i.connection,r=i.segmentStartIndex,c=i.segmentEndIndex,s=i.segmentStart,u=i.segmentEnd,h=i.axis,l=i.originalWaypoints.slice(),f=V(s,h,t["d"+h]),v=V(u,h,t["d"+h]),g=l.length,y=0;l[r]=f,l[c]=v,r<2&&(e=Object(E["f"])(o.source,f),1===r?"intersect"===e&&(l.shift(),l[0]=f,y--):"intersect"!==e&&(l.unshift(s),y++)),c>g-3&&(n=Object(E["f"])(o.target,v),c===g-2?"intersect"===n&&(l.pop(),l[l.length-1]=v):"intersect"!==n&&l.push(u)),i.newWaypoints=o.waypoints=a(o,l),p(i,y,t),i.newSegmentStartIndex=r+y,d(t)})),e.on("connectionSegment.move.hover",(function(t){t.context.hover=t.hover,n.addMarker(t.hover,F)})),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],(function(t){var e=t.context.hover;e&&n.removeMarker(e,F)})),e.on("connectionSegment.move.cleanup",(function(t){var e=t.context,i=e.connection;e.draggerGfx&&Object(u["j"])(e.draggerGfx),n.removeMarker(i,N)})),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],(function(t){var e=t.context,n=e.connection;n.waypoints=e.originalWaypoints,d(t)})),e.on("connectionSegment.move.end",(function(t){var e=t.context,n=e.connection,i=e.newWaypoints,o=e.newSegmentStartIndex;i=i.map((function(t){return{original:t.original,x:Math.round(t.x),y:Math.round(t.y)}}));var c=l(i,o),s=c.waypoints,u=a(n,s),h=c.segmentOffset,d={segmentMove:{segmentStartIndex:e.segmentStartIndex,newSegmentStartIndex:o+h}};r.updateWaypoints(n,u,d)}))}K.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Z=n("0bc3"),X=Math.abs,J=Math.round,Q=10;function tt(t){function e(t,e){if(Object(r["l"])(t)){var n=t.length;while(n--)if(X(t[n]-e)<=Q)return t[n]}else{t=+t;var i=e%t;if(i<Q)return e-i;if(i>t-Q)return e-i+t}return e}function n(t){if(t.width)return{x:J(t.width/2+t.x),y:J(t.height/2+t.y)}}function i(t){var e=t.snapPoints,i=t.connection,o=i.waypoints,c=t.segmentStart,a=t.segmentStartIndex,s=t.segmentEnd,u=t.segmentEndIndex,h=t.axis;if(e)return e;var d=[o[a-1],c,s,o[u+1]];return a<2&&d.unshift(n(i.source)),u>o.length-3&&d.unshift(n(i.target)),t.snapPoints=e={horizontal:[],vertical:[]},Object(r["i"])(d,(function(t){t&&(t=t.original||t,"y"===h&&e.horizontal.push(t.y),"x"===h&&e.vertical.push(t.x))})),e}function o(t){var e=t.snapPoints,n=t.connection.waypoints,i=t.bendpointIndex;if(e)return e;var o=[n[i-1],n[i+1]];return t.snapPoints=e={horizontal:[],vertical:[]},Object(r["i"])(o,(function(t){t&&(t=t.original||t,e.horizontal.push(t.y),e.vertical.push(t.x))})),e}t.on("connectionSegment.move.move",1500,(function(t){var n,o,c=t.context,a=i(c),s=t.x,u=t.y;if(a){n=e(a.vertical,s),o=e(a.horizontal,u);var h=s-n,d=u-o;Object(r["a"])(t,{dx:t.dx-h,dy:t.dy-d,x:n,y:o}),(h||-1!==a.vertical.indexOf(s))&&Object(Z["e"])(t,"x",n),(d||-1!==a.horizontal.indexOf(u))&&Object(Z["e"])(t,"y",o)}})),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,(function(t){var i,c,a=t.context,s=o(a),u=a.hover,h=u&&n(u),d=t.x,p=t.y;if(s){i=e(h?s.vertical.concat([h.x]):s.vertical,d),c=e(h?s.horizontal.concat([h.y]):s.horizontal,p);var l=d-i,f=p-c;Object(r["a"])(t,{dx:t.dx-l,dy:t.dy-f,x:t.x-l,y:t.y-f}),(l||-1!==s.vertical.indexOf(d))&&Object(Z["e"])(t,"x",i),(f||-1!==s.horizontal.indexOf(p))&&Object(Z["e"])(t,"y",c)}}))}tt.$inject=["eventBus"];e["a"]={__depends__:[i["a"],o["a"]],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",O],bendpointMove:["type",T],bendpointMovePreview:["type",G],connectionSegmentMove:["type",K],bendpointSnapping:["type",tt]}},c7bf:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return m}));var i=n("02a3"),o=n("3fb5"),r=n.n(o),c=n("8fcf"),a=n.n(c),s=new a.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),u=new a.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),h=new a.a({name:"attachers",collection:!0},{name:"host"}),d=new a.a({name:"outgoing",collection:!0},{name:"source"}),p=new a.a({name:"incoming",collection:!0},{name:"target"});function l(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),s.bind(this,"parent"),u.bind(this,"labels"),d.bind(this,"outgoing"),p.bind(this,"incoming")}function f(){l.call(this),s.bind(this,"children"),h.bind(this,"host"),h.bind(this,"attachers")}function v(){f.call(this)}function g(){f.call(this),u.bind(this,"labelTarget")}function y(){l.call(this),d.bind(this,"source"),p.bind(this,"target")}r()(f,l),r()(v,f),r()(g,f),r()(y,l);var b={connection:y,shape:f,label:g,root:v};function m(t,e){var n=b[t];if(!n)throw new Error("unknown type: <"+t+">");return Object(i["a"])(new n,e)}},c874:function(t,e,n){"use strict";var i=n("ea2b");e["a"]={__init__:["editorActions"],editorActions:["type",i["a"]]}},c9af:function(t,e,n){"use strict";var i=n("02a3");function o(t){return t&&t[t.length-1]}function r(t){return t.y}function c(t){return t.x}var a={left:c,center:c,right:function(t){return t.x+t.width},top:r,middle:r,bottom:function(t){return t.y+t.height}};function s(t){this._modeling=t}s.$inject=["modeling"],s.prototype._getOrientationDetails=function(t){var e=["top","bottom","middle"],n="x",i="width";return-1!==e.indexOf(t)&&(n="y",i="height"),{axis:n,dimension:i}},s.prototype._isType=function(t,e){return-1!==e.indexOf(t)},s.prototype._alignmentPosition=function(t,e){var n,r,c,a=this._getOrientationDetails(t),s=a.axis,u=a.dimension,h={},d={},p=!1;function l(t,e){return Math.round((t[s]+e[s]+e[u])/2)}if(this._isType(t,["left","top"]))h[t]=e[0][s];else if(this._isType(t,["right","bottom"]))c=o(e),h[t]=c[s]+c[u];else if(this._isType(t,["center","middle"])){if(Object(i["i"])(e,(function(t){var e=t[s]+Math.round(t[u]/2);d[e]?d[e].elements.push(t):d[e]={elements:[t],center:e}})),n=Object(i["B"])(d,(function(t){return t.elements.length>1&&(p=!0),t.elements.length})),p)return h[t]=o(n).center,h;r=e[0],e=Object(i["B"])(e,(function(t){return t[s]+t[u]})),c=o(e),h[t]=l(r,c)}return h},s.prototype.trigger=function(t,e){var n=this._modeling,o=Object(i["e"])(t,(function(t){return!(t.waypoints||t.host||t.labelTarget)}));if(!(o.length<2)){var r=a[e],c=Object(i["B"])(o,r),s=this._alignmentPosition(e,c);n.alignElements(c,s)}};e["a"]={__init__:["alignElements"],alignElements:["type",s]}},d33b:function(t,e,n){"use strict";var i=n("02a3");function o(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}o.$inject=["eventBus","injector"],o.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction(n)},o.prototype.canExecute=function(t,e){var n={command:t,context:e},i=this._getHandler(t),o=this._fire(t,"canExecute",n);if(void 0===o){if(!i)return!1;i.canExecute&&(o=i.canExecute(e))}return o},o.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,!1!==t&&this._fire("changed",{trigger:"clear"})},o.prototype.undo=function(){var t,e=this._getUndoAction();if(e){this._currentExecution.trigger="undo",this._pushAction(e);while(e){if(this._internalUndo(e),t=this._getUndoAction(),!t||t.id!==e.id)break;e=t}this._popAction()}},o.prototype.redo=function(){var t,e=this._getRedoAction();if(e){this._currentExecution.trigger="redo",this._pushAction(e);while(e){if(this._internalExecute(e,!0),t=this._getRedoAction(),!t||t.id!==e.id)break;e=t}this._popAction()}},o.prototype.register=function(t,e){this._setHandler(t,e)},o.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(e);this.register(t,n)},o.prototype.canUndo=function(){return!!this._getUndoAction()},o.prototype.canRedo=function(){return!!this._getRedoAction()},o.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},o.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},o.prototype._internalUndo=function(t){var e=this,n=t.command,i=t.context,o=this._getHandler(n);this._atomicDo((function(){e._fire(n,"revert",t),o.revert&&e._markDirty(o.revert(i)),e._revertedAction(t),e._fire(n,"reverted",t)}))},o.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);var i,o,r,c=e?[t+"."+e,e]:[t];for(n=this._eventBus.createEvent(n),i=0;o=c[i];i++)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r},o.prototype._createId=function(){return this._uid++},o.prototype._atomicDo=function(t){var e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},o.prototype._internalExecute=function(t,e){var n=this,i=t.command,o=t.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(t),e||(this._fire(i,"preExecute",t),r.preExecute&&r.preExecute(o),this._fire(i,"preExecuted",t)),this._atomicDo((function(){n._fire(i,"execute",t),r.execute&&n._markDirty(r.execute(o)),n._executedAction(t,e),n._fire(i,"executed",t)})),e||(this._fire(i,"postExecute",t),r.postExecute&&r.postExecute(o),this._fire(i,"postExecuted",t)),this._popAction(t)},o.prototype._pushAction=function(t){var e=this._currentExecution,n=e.actions,i=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=i&&i.id||this._createId()),n.push(t)},o.prototype._popAction=function(){var t=this._currentExecution,e=t.trigger,n=t.actions,o=t.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:Object(i["D"])("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:e}),t.trigger=null)},o.prototype._markDirty=function(t){var e=this._currentExecution;t&&(t=Object(i["l"])(t)?t:[t],e.dirty=e.dirty.concat(t))},o.prototype._executedAction=function(t,e){var n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)},o.prototype._revertedAction=function(t){this._stackIdx--},o.prototype._getHandler=function(t){return this._handlerMap[t]},o.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};e["a"]={commandStack:["type",o]}},d5dd:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var i=n("7ddc"),o=n("e759"),r=n("02a3");function c(t,e,n){var o=d(t),r=p(o,e),c=o[0];return r.length?r[r.length-1]:Object(i["a"])(c.original||c,n,e)}function a(t,e,n){var o=d(t),r=p(o,e),c=o[o.length-1];return r.length?r[0]:Object(i["a"])(c.original||c,n,e)}function s(t,e,n){var o=d(t),r=h(e,n),c=o[0];return Object(i["a"])(c.original||c,r,e)}function u(t,e,n){var o=d(t),r=h(e,n),c=o[o.length-1];return Object(i["a"])(c.original||c,r,e)}function h(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function d(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function p(t,e){var n=Object(r["u"])(t,f);return Object(r["e"])(n,(function(t){return l(t,e)}))}function l(t,e){return"intersect"===Object(o["f"])(e,t,1)}function f(t){return t.original||t}},d635:function(t,e,n){"use strict";var i=n("6ffd"),o=n("2385"),r=n("02a3"),c=n("e506"),a=".entry",s=1e3;function u(t,e,n){this._eventBus=e,this._overlays=n;var i=Object(r["m"])(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}function h(t,e){var n=Object(c["b"])(t),i=Object(r["l"])(e)?e:e.split(/\s+/g);i.forEach((function(t){n.add(t)}))}u.$inject=["config.contextPad","eventBus","overlays"],u.prototype._init=function(){var t=this._eventBus,e=this;t.on("selection.changed",(function(t){var n=t.newSelection;1===n.length?e.open(n[0]):e.close()})),t.on("elements.delete",(function(t){var n=t.elements;Object(r["i"])(n,(function(t){e.isOpen(t)&&e.close()}))})),t.on("element.changed",(function(t){var n=t.element,i=e._current;i&&i.element===n&&e.open(n,!0)}))},u.prototype.registerProvider=function(t,e){e||(e=t,t=s),this._eventBus.on("contextPad.getProviders",t,(function(t){t.providers.push(e)}))},u.prototype.getEntries=function(t){var e=this._getProviders(),n={};return Object(r["i"])(e,(function(e){var i=e.getContextPadEntries(t);Object(r["n"])(i)?n=i(n):Object(r["i"])(i,(function(t,e){n[e]=t}))})),n},u.prototype.trigger=function(t,e,n){var i,o,a,s=this._current.element,u=this._current.entries,h=e.delegateTarget||e.target;if(!h)return e.preventDefault();if(i=u[Object(c["a"])(h,"data-action")],o=i.action,a=e.originalEvent||e,Object(r["n"])(o)){if("click"===t)return o(a,s,n)}else if(o[t])return o[t](a,s,n);e.preventDefault()},u.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},u.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},u.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this.getPad(t),i=n.html;Object(r["i"])(e,(function(t,e){var n,o=t.group||"default",r=Object(c["f"])(t.html||'<div class="entry" draggable="true"></div>');Object(c["a"])(r,"data-action",e),n=Object(c["i"])("[data-group="+o+"]",i),n||(n=Object(c["f"])('<div class="group" data-group="'+o+'"></div>'),i.appendChild(n)),n.appendChild(r),t.className&&h(r,t.className),t.title&&Object(c["a"])(r,"title",t.title),t.imageUrl&&r.appendChild(Object(c["f"])('<img src="'+t.imageUrl+'">'))})),Object(c["b"])(i).add("open"),this._current={element:t,pad:n,entries:e},this._eventBus.fire("contextPad.open",{current:this._current})},u.prototype.getPad=function(t){if(this.isOpen())return this._current.pad;var e=this,n=this._overlays,i=Object(c["f"])('<div class="djs-context-pad"></div>'),o=Object(r["a"])({html:i},this._overlaysConfig);c["e"].bind(i,a,"click",(function(t){e.trigger("click",t)})),c["e"].bind(i,a,"dragstart",(function(t){e.trigger("dragstart",t)})),c["g"].bind(i,"mousedown",(function(t){t.stopPropagation()})),this._overlayId=n.add(t,"context-pad",o);var s=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:t,pad:s}),s},u.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},u.prototype.isOpen=function(t){return!!this._current&&(!t||this._current.element===t)};e["a"]={__depends__:[i["a"],o["a"]],contextPad:["type",u]}},df96:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("02a3"),o=n("0bc3");function r(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function c(t){this._snapValues={}}r.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},r.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,-1===this._snapLocations.indexOf(t)&&this._snapLocations.push(t)},r.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)},r.prototype.getSnapLocations=function(){return this._snapLocations},r.prototype.setSnapLocations=function(t){this._snapLocations=t},r.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new c,n.initDefaults(this._defaultSnaps)),n},c.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),-1===n.x.indexOf(e.x)&&n.x.push(e.x),-1===n.y.indexOf(e.y)&&n.y.push(e.y)},c.prototype.snap=function(t,e,n,i){var r=this._snapValues[e];return r&&Object(o["f"])(t[n],r[n],i)},c.prototype.initDefaults=function(t){var e=this;Object(i["i"])(t||{},(function(t,n){Object(i["i"])(t,(function(t){e.add(n,t)}))}))}},e4e7:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("3fb5"),o=n.n(i),r=n("18e7");function c(t){r["a"].call(this,t);var e=this;this.preExecute(["shape.create","connection.create"],(function(t){var n=t.context,i=n.shape||n.connection,o=n.parent,r=e.getOrdering(i,o);r&&(void 0!==r.parent&&(n.parent=r.parent),n.parentIndex=r.index)})),this.preExecute(["shape.move","connection.move"],(function(t){var n=t.context,i=n.shape||n.connection,o=n.newParent||i.parent,r=e.getOrdering(i,o);r&&(void 0!==r.parent&&(n.newParent=r.parent),n.newParentIndex=r.index)}))}c.prototype.getOrdering=function(t,e){return null},o()(c,r["a"])},e54c:function(t,e,n){"use strict";var i=n("8e4b"),o=n("6dca"),r=n("02a3"),c=n("9408"),a=n("fbb1"),s=n("6b8b"),u="crosshair";function h(t,e,n,i,o,r,c){this._selection=o,this._dragging=n,this._mouse=c;var u=this,h={create:function(t){var n,i=e.getActiveLayer();n=t.frame=Object(s["f"])("rect"),Object(s["b"])(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Object(s["a"])(i,n)},update:function(t){var e=t.frame,n=t.bbox;Object(s["b"])(e,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(t){t.frame&&Object(s["j"])(t.frame)}};r.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",(function(e){var n=e.originalEvent.target;(e.hover||n instanceof SVGElement)&&t.once("lasso.selection.ended",(function(){u.activateLasso(e.originalEvent,!0)}))})),t.on("lasso.end",(function(t){var e=d(t),n=i.filter((function(t){return t}));u.select(n,e)})),t.on("lasso.start",(function(t){var e=t.context;e.bbox=d(t),h.create(e)})),t.on("lasso.move",(function(t){var e=t.context;e.bbox=d(t),h.update(e)})),t.on("lasso.cleanup",(function(t){var e=t.context;h.remove(e)})),t.on("element.mousedown",1500,(function(t){if(Object(a["b"])(t))return u.activateLasso(t.originalEvent),!0}))}function d(t){var e,n={x:t.x-t.dx,y:t.y-t.dy},i={x:t.x,y:t.y};return e=n.x<=i.x&&n.y<i.y||n.x<i.x&&n.y<=i.y?{x:n.x,y:n.y,width:i.x-n.x,height:i.y-n.y}:n.x>=i.x&&n.y<i.y||n.x>i.x&&n.y<=i.y?{x:i.x,y:n.y,width:n.x-i.x,height:i.y-n.y}:n.x<=i.x&&n.y>i.y||n.x<i.x&&n.y>=i.y?{x:n.x,y:i.y,width:i.x-n.x,height:n.y-i.y}:n.x>=i.x&&n.y>i.y||n.x>i.x&&n.y>=i.y?{x:i.x,y:i.y,width:n.x-i.x,height:n.y-i.y}:{x:i.x,y:i.y,width:0,height:0},e}h.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],h.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:u,data:{context:{}}})},h.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:u,data:{context:{}}})},h.prototype.select=function(t,e){var n=Object(c["d"])(t,e);this._selection.select(Object(r["E"])(n))},h.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},h.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};e["a"]={__depends__:[i["a"],o["a"]],__init__:["lassoTool"],lassoTool:["type",h]}},e759:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return v}));var i=n("02a3"),o=n("2d8d"),r=n("3d2a"),c=n.n(r);function a(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function s(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function u(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function h(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function d(t){return s({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function p(t,e,n){n=n||0,Object(i["q"])(n)||(n={x:n,y:n});var o=u(t),r=u(e),c=o.bottom+n.y<=r.top,a=o.left-n.x>=r.right,s=o.top-n.y>=r.bottom,h=o.right+n.x<=r.left,d=c?"top":s?"bottom":null,p=h?"left":a?"right":null;return p&&d?d+"-"+p:p||d||"intersect"}function l(t,e,n){var r=f(t,e);return 1===r.length||2===r.length&&Object(o["b"])(r[0],r[1])<1?s(r[0]):r.length>1?(r=Object(i["B"])(r,(function(t){var e=Math.floor(100*t.t2)||1;return e=100-e,e=(e<10?"0":"")+e,t.segment2+"#"+e})),s(r[n?0:r.length-1])):null}function f(t,e){return c()(t,e)}function v(t){t=t.slice();var e,n,i,r=0;while(t[r])e=t[r],n=t[r-1],i=t[r+1],0===Object(o["b"])(e,i)||Object(o["e"])(n,i,e)?t.splice(r,1):r++;return t}},ea2b:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("02a3"),o="is not a registered action",r="is already registered";function c(t,e){this._actions={};var n=this;t.on("diagram.init",(function(){n._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:n})}))}function a(t,e){return new Error(t+" "+e)}c.$inject=["eventBus","injector"],c.prototype._registerDefaultActions=function(t){var e=t.get("commandStack",!1),n=t.get("modeling",!1),o=t.get("selection",!1),r=t.get("zoomScroll",!1),c=t.get("copyPaste",!1),a=t.get("canvas",!1),s=t.get("rules",!1),u=t.get("keyboardMove",!1),h=t.get("keyboardMoveSelection",!1);e&&(this.register("undo",(function(){e.undo()})),this.register("redo",(function(){e.redo()}))),c&&o&&this.register("copy",(function(){var t=o.get();c.copy(t)})),c&&this.register("paste",(function(){c.paste()})),r&&this.register("stepZoom",(function(t){r.stepZoom(t.value)})),a&&this.register("zoom",(function(t){a.zoom(t.value)})),n&&o&&s&&this.register("removeSelection",(function(){var t=o.get();if(t.length){var e,r=s.allowed("elements.delete",{elements:t});!1!==r&&(e=Object(i["l"])(r)?r:t,e.length&&n.removeElements(e.slice()))}})),u&&this.register("moveCanvas",(function(t){u.moveCanvas(t)})),h&&this.register("moveSelection",(function(t){h.moveSelection(t.direction,t.accelerated)}))},c.prototype.trigger=function(t,e){if(!this._actions[t])throw a(t,o);return this._actions[t](e)},c.prototype.register=function(t,e){var n=this;if("string"===typeof t)return this._registerAction(t,e);Object(i["i"])(t,(function(t,e){n._registerAction(e,t)}))},c.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw a(t,r);this._actions[t]=e},c.prototype.unregister=function(t){if(!this.isRegistered(t))throw a(t,o);this._actions[t]=void 0},c.prototype.getActions=function(){return Object.keys(this._actions)},c.prototype.isRegistered=function(t){return!!this._actions[t]}},f0f5:function(t,e,n){"use strict";var i=n("32c2"),o=n("be73"),r=n("48e6"),c=n("8e4b"),a=n("6dca"),s="connect-ok",u="connect-not-ok";function h(t,e,n,i,o,r,c){var a=this;this._dragging=e,this._rules=r,this._mouse=c,o.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",(function(t){var e=t.context,n=t.hover,o=e.canStartConnect=a.canStartConnect(n);null!==o&&(e.startTarget=n,i.addMarker(n,o?s:u))})),t.on(["global-connect.out","global-connect.cleanup"],(function(t){var e=t.context.startTarget,n=t.context.canStartConnect;e&&i.removeMarker(e,n?s:u)})),t.on(["global-connect.ended"],(function(e){var i=e.context,o=i.startTarget,r={x:e.x,y:e.y},c=a.canStartConnect(o);if(c)return t.once("element.out",(function(){t.once(["connect.ended","connect.canceled"],(function(){t.fire("global-connect.drag.ended")})),n.start(null,o,r)})),!1}))}h.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],h.prototype.start=function(t,e){this._dragging.init(t,"global-connect",{autoActivate:e,trapClick:!1,data:{context:{}}})},h.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)},h.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},h.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};e["a"]={__depends__:[i["a"],o["a"],r["a"],c["a"],a["a"]],globalConnect:["type",h]}},f3af:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("86f9"),o=n("3fb5"),r=n.n(o);function c(t){i["a"].call(this,t);var e=this;this.addRule("element.autoResize",(function(t){return e.canResize(t.elements,t.target)}))}c.$inject=["eventBus"],r()(c,i["a"]),c.prototype.canResize=function(t,e){return!1}},f43f:function(t,e,n){"use strict";var i=/^class /;function o(t){return i.test(t.toString())}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(){var t=Array.prototype.slice.call(arguments);1===t.length&&r(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var s=/constructor\s*[^(]*\(\s*([^)]*)\)/m,u=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,h=/\/\*([^*]*)\*\//m;function d(t){if("function"!==typeof t)throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(o(t)?s:u);return e&&e[1]&&e[1].split(",").map((function(t){return e=t.match(h),e?e[1].trim():t.trim()}))||[]}function p(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}function l(t,e){e=e||{get:function(t,e){if(n.push(t),!1===e)return null;throw u('No provider for "'+t+'"!')}};var n=[],i=this._providers=Object.create(e._providers||null),o=this._instances=Object.create(null),s=o.injector=this,u=function(t){var e=n.join(" -> ");return n.length=0,new Error(e?t+" (Resolving: "+e+")":t)},h=function(t,r){if(!i[t]&&-1!==t.indexOf(".")){var a=t.split("."),s=h(a.shift());while(a.length)s=s[a.shift()];return s}if(c(o,t))return o[t];if(c(i,t)){if(-1!==n.indexOf(t))throw n.push(t),u("Cannot resolve circular dependency!");return n.push(t),o[t]=i[t][0](i[t][1]),n.pop(),o[t]}return e.get(t,r)},f=function(t,e){if("undefined"===typeof e&&(e={}),"function"!==typeof t){if(!r(t))throw new Error('Cannot invoke "'+t+'". Expected a function!');t=a(t.slice())}var n=t.$inject||d(t),i=n.map((function(t){return c(e,t)?e[t]:h(t)}));return{fn:t,dependencies:i}},v=function(t){var e=f(t),n=e.fn,i=e.dependencies,o=Function.prototype.bind.apply(n,[null].concat(i));return new o},g=function(t,e,n){var i=f(t,n),o=i.fn,r=i.dependencies;return o.apply(e,r)},y=function(t){return a((function(e){return t.get(e)}))},b=function(t,e){if(e&&e.length){var n,o,r,c,a=Object.create(null),u=Object.create(null),h=[],d=[],p=[];for(var f in i)n=i[f],-1!==e.indexOf(f)&&("private"===n[2]?(o=h.indexOf(n[3]),-1===o?(r=n[3].createChild([],e),c=y(r),h.push(n[3]),d.push(r),p.push(c),a[f]=[c,f,"private",r]):a[f]=[p[o],f,"private",d[o]]):a[f]=[n[2],n[1]],u[f]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||e.forEach((function(t){-1!==n[1].$scope.indexOf(t)&&(a[f]=[n[2],n[1]],u[t]=!0)}));e.forEach((function(t){if(!u[t])throw new Error('No provider for "'+t+'". Cannot use provider from the parent!')})),t.unshift(a)}return new l(t,s)},m={factory:g,type:v,value:function(t){return t}};t.forEach((function(t){function e(t,e){return"value"!==t&&r(e)&&(e=a(e.slice())),e}if(t instanceof p)t.forEach((function(t){var n=t[0],o=t[1],r=t[2];i[n]=[m[o],e(o,r),o]}));else if("object"===typeof t)if(t.__exports__){var n=Object.keys(t).reduce((function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e}),Object.create(null)),o=new l((t.__modules__||[]).concat([n]),s),c=a((function(t){return o.get(t)}));t.__exports__.forEach((function(t){i[t]=[c,t,"private",o]}))}else Object.keys(t).forEach((function(n){if("private"!==t[n][2]){var o=t[n][0],r=t[n][1];i[n]=[m[o],e(o,r),o]}else i[n]=t[n]}))})),this.get=h,this.invoke=g,this.instantiate=v,this.createChild=b}var f=n("3fb5"),v=n.n(f),g=n("40e4"),y=n("061b"),b=n("6b8b"),m=n("02a3"),x=n("9408"),_=1;function j(t,e){g["a"].call(this,t,_),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}function O(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){var i=this.style(e,n);return Object(m["a"])(i,{class:t})},this.style=function(e,n){Object(m["l"])(e)||n||(n=e,e=[]);var i=Object(m["y"])(e,(function(e,n){return Object(m["a"])(e,t[n]||{})}),{});return n?Object(m["a"])(i,n):i},this.computeStyle=function(t,n,i){return Object(m["l"])(n)||(i=n,n=[]),e.style(n||[],Object(m["a"])({},i,t||{}))}}v()(j,g["a"]),j.prototype.canRender=function(){return!0},j.prototype.drawShape=function(t,e,n){var i=Object(b["f"])("rect");return Object(b["b"])(i,{x:0,y:0,width:e.width||0,height:e.height||0}),Object(x["g"])(e)?Object(b["b"])(i,Object(m["a"])({},this.FRAME_STYLE,n||{})):Object(b["b"])(i,Object(m["a"])({},this.SHAPE_STYLE,n||{})),Object(b["a"])(t,i),i},j.prototype.drawConnection=function(t,e,n){var i=Object(y["b"])(e.waypoints,Object(m["a"])({},this.CONNECTION_STYLE,n||{}));return Object(b["a"])(t,i),i},j.prototype.getShapePath=function(t){var e=t.x,n=t.y,i=t.width,o=t.height,r=[["M",e,n],["l",i,0],["l",0,o],["l",-i,0],["z"]];return Object(y["a"])(r)},j.prototype.getConnectionPath=function(t){var e,n,i=t.waypoints,o=[];for(e=0;n=i[e];e++)n=n.original||n,o.push([0===e?"M":"L",n.x,n.y]);return Object(y["a"])(o)},j.$inject=["eventBus","styles"];var w={__init__:["defaultRenderer"],defaultRenderer:["type",j],styles:["type",O]},E=n("aa33"),S=n("e759");function k(t,e){return Math.round(t*e)/e}function C(t){return Object(m["p"])(t)?t+"px":t}function M(t){while(t.parent)t=t.parent;return t}function T(t){t=Object(m["a"])({},{width:"100%",height:"100%"},t);var e=t.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),Object(m["a"])(n.style,{position:"relative",overflow:"hidden",width:C(t.width),height:C(t.height)}),e.appendChild(n),n}function P(t,e,n){var i=Object(b["f"])("g");Object(b["c"])(i).add(e);var o=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(i,t.childNodes[o]||null),i}var B="base",R="djs-element-hidden",z=0,A=1,L={shape:["x","y","width","height"],connection:["waypoints"]};function I(t,e,n,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=n,this._init(t||{})}function D(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}I.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],I.prototype._init=function(t){var e=this._eventBus,n=this._container=T(t),i=this._svg=Object(b["f"])("svg");Object(b["b"])(i,{width:"100%",height:"100%"}),Object(b["a"])(n,i);var o=this._viewport=P(i,"viewport");this._layers={},this._planes={},!1!==t.deferUpdate&&(this._viewboxChanged=Object(m["c"])(Object(m["b"])(this._viewboxChanged,this),300)),e.on("diagram.init",(function(){e.fire("canvas.init",{svg:i,viewport:o})}),this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],(function(){delete this._cachedViewbox}),this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},I.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},I.prototype._clear=function(){var t=this,e=this._elementRegistry.getAll();e.forEach((function(e){var n=Object(x["f"])(e);"root"===n?t.setRootElementForPlane(null,t.findPlane(e),!0):t._removeElement(e,n)})),this._activePlane=null,this._planes={},delete this._cachedViewbox},I.prototype.getDefaultLayer=function(){return this.getLayer(B,z)},I.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),"undefined"!==typeof e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},I.prototype._createLayer=function(t,e){"undefined"===typeof e&&(e=A);var n=Object(m["y"])(this._layers,(function(t,n){return e>=n.index&&t++,t}),0);return{group:P(this._viewport,"layer-"+t,n),index:e}},I.prototype.getPlane=function(t){if(!t)throw new Error("must specify a name");return this._planes[t]},I.prototype.createPlane=function(t,e){if(!t)throw new Error("must specify a name");if(this._planes[t])throw new Error("plane "+t+" already exists");e||(e={id:"__implicitroot"+t,children:[],isImplicit:!0});var n=this.getLayer(t,z);Object(b["c"])(n).add(R);var i=this._planes[t]={layer:n,name:t,rootElement:null};return this.setRootElementForPlane(e,i),i},I.prototype.setActivePlane=function(t){if(!t)throw new Error("must specify a plane");return"string"===typeof t&&(t=this.getPlane(t)),this._activePlane&&Object(b["c"])(this._activePlane.layer).add(R),this._activePlane=t,Object(b["c"])(t.layer).remove(R),t.rootElement&&this._elementRegistry.updateGraphics(t.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:t}),t},I.prototype.getActiveLayer=function(){return this.getActivePlane().layer},I.prototype.getActivePlane=function(){var t=this._activePlane;return t||(t=this.createPlane(B),this.setActivePlane(B)),t},I.prototype.findPlane=function(t){"string"===typeof t&&(t=this._elementRegistry.get(t));var e=M(t);return Object(m["f"])(this._planes,(function(t){return t.rootElement===e}))},I.prototype.getContainer=function(){return this._container},I.prototype._updateMarker=function(t,e,n){var i;t.id||(t=this._elementRegistry.get(t)),i=this._elementRegistry._elements[t.id],i&&(Object(m["i"])([i.gfx,i.secondaryGfx],(function(t){t&&(n?Object(b["c"])(t).add(e):Object(b["c"])(t).remove(e))})),this._eventBus.fire("element.marker.update",{element:t,gfx:i.gfx,marker:e,add:!!n}))},I.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},I.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},I.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));var n=this.getGraphics(t);return Object(b["c"])(n).has(e)},I.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},I.prototype.getRootElement=function(){var t=this.getActivePlane();return t.rootElement},I.prototype.setRootElement=function(t,e){var n=this._activePlane;if(n)return this.setRootElementForPlane(t,n,e);var i=this.createPlane(B,t);return this.setActivePlane(i),i.rootElement},I.prototype.setRootElementForPlane=function(t,e,n){"string"===typeof e&&(e=this.getPlane(e)),t&&this._ensureValid("root",t);var i=e.rootElement,o=this._elementRegistry,r=this._eventBus;if(i){if(!n)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:i}),r.fire("root.removed",{element:i}),o.remove(i)}if(t){var c=e.layer;r.fire("root.add",{element:t}),o.add(t,c),r.fire("root.added",{element:t,gfx:c}),e===this._activePlane&&this._elementRegistry.updateGraphics(t,this._svg,!0)}return e.rootElement=t,t},I.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=L[t],i=Object(m["d"])(n,(function(t){return"undefined"!==typeof e[t]}));if(!i)throw new Error("must supply { "+n.join(", ")+" } with "+t)},I.prototype._setParent=function(t,e,n){Object(E["a"])(e.children,t,n),t.parent=e},I.prototype._addElement=function(t,e,n,i){n=n||this.getRootElement();var o=this._eventBus,r=this._graphicsFactory;this._ensureValid(t,e),o.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,i);var c=r.create(t,e,i);return this._elementRegistry.add(e,c),r.update(t,e,c),o.fire(t+".added",{element:e,gfx:c}),e},I.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},I.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},I.prototype._removeElement=function(t,e){var n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(t=n.get(t.id||t),t)return o.fire(e+".remove",{element:t}),i.remove(t),Object(E["c"])(t.parent&&t.parent.children,t),t.parent=null,o.fire(e+".removed",{element:t}),n.remove(t),t},I.prototype.removeShape=function(t){return this._removeElement(t,"shape")},I.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},I.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},I.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},I.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},I.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,o,r,c,a=this._viewport,s=this.getSize();return t?(this._changeViewbox((function(){o=Math.min(s.width/t.width,s.height/t.height);var e=this._svg.createSVGMatrix().scale(o).translate(-t.x,-t.y);Object(b["k"])(a,e)})),t):(e=this._activePlane&&this._activePlane.layer.getBBox()||{},i=Object(b["k"])(a),n=i?i.matrix:Object(b["g"])(),o=k(n.a,1e3),r=k(-n.e||0,1e3),c=k(-n.f||0,1e3),t=this._cachedViewbox={x:r?r/o:0,y:c?c/o:0,width:s.width/o,height:s.height/o,scale:o,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:s},t)},I.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox((function(){t=Object(m["a"])({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),D(e,n)})),{x:n.e,y:n.f}},I.prototype.scrollToElement=function(t,e){var n=100;"string"===typeof t&&(t=this._elementRegistry.get(t));var i=this.findPlane(t);i!==this._activePlane&&this.setActivePlane(i),e||(e={}),"number"===typeof e&&(n=e),e={top:e.top||n,right:e.right||n,bottom:e.bottom||n,left:e.left||n};var o,r,c=Object(x["b"])(t),a=Object(S["b"])(c),s=this.viewbox(),u=this.zoom();s.y+=e.top/u,s.x+=e.left/u,s.width-=(e.right+e.left)/u,s.height-=(e.bottom+e.top)/u;var h=Object(S["b"])(s),d=c.width<s.width&&c.height<s.height;if(d){var p=Math.max(0,a.right-h.right),l=Math.min(0,a.left-h.left),f=Math.max(0,a.bottom-h.bottom),v=Math.min(0,a.top-h.top);o=p||l,r=f||v}else o=c.x-s.x,r=c.y-s.y;this.scroll({dx:-o*u,dy:-r*u})},I.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox((function(){"object"!==typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),i=this._setZoom(t,e)})),k(i.a,1e3)):this.viewbox(t).scale;var n,i},I.prototype._fitViewport=function(t){var e,n,i=this.viewbox(),o=i.outer,r=i.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=o.width&&r.y+r.height<=o.height&&!t?n={x:0,y:0,width:Math.max(r.width+r.x,o.width),height:Math.max(r.height+r.y,o.height)}:(e=Math.min(1,o.width/r.width,o.height/r.height),n={x:r.x+(t?r.width/2-o.width/e/2:0),y:r.y+(t?r.height/2-o.height/e/2:0),width:o.width/e,height:o.height/e}),this.viewbox(n),this.viewbox(!1).scale},I.prototype._setZoom=function(t,e){var n,i,o,r,c,a=this._svg,s=this._viewport,u=a.createSVGMatrix(),h=a.createSVGPoint();o=s.getCTM();var d=o.a;return e?(n=Object(m["a"])(h,e),i=n.matrixTransform(o.inverse()),r=u.translate(i.x,i.y).scale(1/d*t).translate(-i.x,-i.y),c=o.multiply(r)):c=u.scale(t),D(this._viewport,c),c},I.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},I.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();if(t.waypoints){var i=this.getGraphics(t);e=i.getBBox()}else e=t;var o=e.x*n.scale-n.x*n.scale,r=e.y*n.scale-n.y*n.scale,c=e.width*n.scale,a=e.height*n.scale;return{x:o,y:r,width:c,height:a}},I.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var H="data-element-id";function $(t){this._elements={},this._eventBus=t}$.$inject=["eventBus"],$.prototype.add=function(t,e,n){var i=t.id;this._validateId(i),Object(b["b"])(e,H,i),n&&Object(b["b"])(n,H,i),this._elements[i]={element:t,gfx:e,secondaryGfx:n}},$.prototype.remove=function(t){var e=this._elements,n=t.id||t,i=n&&e[n];i&&(Object(b["b"])(i.gfx,H,""),i.secondaryGfx&&Object(b["b"])(i.secondaryGfx,H,""),delete e[n])},$.prototype.updateId=function(t,e){this._validateId(e),"string"===typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),i=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,i)},$.prototype.updateGraphics=function(t,e,n){var i=t.id||t,o=this._elements[i];return n?o.secondaryGfx=e:o.gfx=e,Object(b["b"])(e,H,i),e},$.prototype.get=function(t){var e;e="string"===typeof t?t:t&&Object(b["b"])(t,H);var n=this._elements[e];return n&&n.element},$.prototype.filter=function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(n)})),e},$.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],r=e[o],c=r.element,a=r.gfx;if(t(c,a))return c}},$.prototype.getAll=function(){return this.filter((function(t){return t}))},$.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach((function(n){var i=e[n],o=i.element,r=i.gfx;return t(o,r)}))},$.prototype.getGraphics=function(t,e){var n=t.id||t,i=this._elements[n];return i&&(e?i.secondaryGfx:i.gfx)},$.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var G=n("49fa"),F="__fn",N=1e3,V=Array.prototype.slice;function W(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function U(){}function q(t,e){return t.apply(null,e)}W.prototype.on=function(t,e,n,i){if(t=Object(m["l"])(t)?t:[t],Object(m["n"])(e)&&(i=n,n=e,e=N),!Object(m["p"])(e))throw new Error("priority must be a number");var o=n;i&&(o=Object(m["b"])(n,i),o[F]=n[F]||n);var r=this;t.forEach((function(t){r._addListener(t,{priority:e,callback:o,next:null})}))},W.prototype.once=function(t,e,n,i){var o=this;if(Object(m["n"])(e)&&(i=n,n=e,e=N),!Object(m["p"])(e))throw new Error("priority must be a number");function r(){r.__isTomb=!0;var e=n.apply(i,arguments);return o.off(t,r),e}r[F]=n,this.on(t,e,r)},W.prototype.off=function(t,e){t=Object(m["l"])(t)?t:[t];var n=this;t.forEach((function(t){n._removeListener(t,e)}))},W.prototype.createEvent=function(t){var e=new U;return e.init(t),e},W.prototype.fire=function(t,e){var n,i,o,r;if(r=V.call(arguments),"object"===typeof t&&(e=t,t=e.type),!t)throw new Error("no event type specified");if(i=this._listeners[t],i){n=e instanceof U?e:this.createEvent(e),r[0]=n;var c=n.type;t!==c&&(n.type=t);try{o=this._invokeListeners(n,r,i)}finally{t!==c&&(n.type=c)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},W.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},W.prototype._destroy=function(){this._listeners={}},W.prototype._invokeListeners=function(t,e,n){var i;while(n){if(t.cancelBubble)break;i=this._invokeListener(t,e,n),n=n.next}return i},W.prototype._invokeListener=function(t,e,n){var i;if(n.callback.__isTomb)return i;try{i=q(n.callback,e),void 0!==i&&(t.returnValue=i,t.stopPropagation()),!1===i&&t.preventDefault()}catch(o){if(!this.handleError(o))throw o}return i},W.prototype._addListener=function(t,e){var n,i=this._getListeners(t);if(i){while(i){if(i.priority<e.priority)return e.next=i,void(n?n.next=e:this._setListeners(t,e));n=i,i=i.next}n.next=e}else this._setListeners(t,e)},W.prototype._getListeners=function(t){return this._listeners[t]},W.prototype._setListeners=function(t,e){this._listeners[t]=e},W.prototype._removeListener=function(t,e){var n,i,o,r=this._getListeners(t);if(e)while(r)n=r.next,o=r.callback,o!==e&&o[F]!==e||(i?i.next=n:this._setListeners(t,n)),i=r,r=n;else this._setListeners(t,null)},U.prototype.stopPropagation=function(){this.cancelBubble=!0},U.prototype.preventDefault=function(){this.defaultPrevented=!0},U.prototype.init=function(t){Object(m["a"])(this,t||{})};var Y=n("7972"),K=n("b586"),Z=n("e506");function X(t,e){this._eventBus=t,this._elementRegistry=e}function J(t,e,n){var i=n||e.firstChild;t!==i&&e.insertBefore(t,i)}X.$inject=["eventBus","elementRegistry"],X.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=Object(Y["a"])(n),e||(e=Object(b["f"])("g"),Object(b["c"])(e).add("djs-children"),Object(b["a"])(n.parentNode,e))):e=n,e},X.prototype._clear=function(t){var e=Object(Y["b"])(t);return Object(Z["c"])(e),e},X.prototype._createContainer=function(t,e,n,i){var o=Object(b["f"])("g");Object(b["c"])(o).add("djs-group"),"undefined"!==typeof n?J(o,e,e.childNodes[n]):Object(b["a"])(e,o);var r=Object(b["f"])("g");Object(b["c"])(r).add("djs-element"),Object(b["c"])(r).add("djs-"+t),i&&Object(b["c"])(r).add("djs-frame"),Object(b["a"])(o,r);var c=Object(b["f"])("g");return Object(b["c"])(c).add("djs-visual"),Object(b["a"])(r,c),r},X.prototype.create=function(t,e,n){var i=this._getChildrenContainer(e.parent);return this._createContainer(t,i,n,Object(x["g"])(e))},X.prototype.updateContainments=function(t){var e,n=this,i=this._elementRegistry;e=Object(m["y"])(t,(function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t}),{}),Object(m["i"])(e,(function(t){var e=t.children;if(e){var o=n._getChildrenContainer(t);Object(m["i"])(e.slice().reverse(),(function(t){var e=i.getGraphics(t);J(e.parentNode,o)}))}}))},X.prototype.drawShape=function(t,e){var n=this._eventBus;return n.fire("render.shape",{gfx:t,element:e})},X.prototype.getShapePath=function(t){var e=this._eventBus;return e.fire("render.getShapePath",t)},X.prototype.drawConnection=function(t,e){var n=this._eventBus;return n.fire("render.connection",{gfx:t,element:e})},X.prototype.getConnectionPath=function(t){var e=this._eventBus;return e.fire("render.getConnectionPath",t)},X.prototype.update=function(t,e,n){if(e.parent){var i=this._clear(n);if("shape"===t)this.drawShape(i,e),Object(K["c"])(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(i,e)}e.hidden?Object(b["b"])(n,"display","none"):Object(b["b"])(n,"display","block")}},X.prototype.remove=function(t){var e=this._elementRegistry.getGraphics(t);Object(b["j"])(e.parentNode)};var Q={__depends__:[w],__init__:["canvas"],canvas:["type",I],elementRegistry:["type",$],elementFactory:["type",G["a"]],eventBus:["type",W],graphicsFactory:["type",X]};function tt(t){var e=[],n=[];function i(t){return e.indexOf(t)>=0}function o(t){e.push(t)}function r(t){i(t)||((t.__depends__||[]).forEach(r),i(t)||(o(t),(t.__init__||[]).forEach((function(t){n.push(t)}))))}t.forEach(r);var c=new l(e);return n.forEach((function(t){try{c["string"===typeof t?"get":"invoke"](t)}catch(e){throw e}})),c}function et(t){t=t||{};var e={config:["value",t]},n=[e,Q].concat(t.modules||[]);return tt(n)}function nt(t,e){this.injector=e=e||et(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}n.d(e,"a",(function(){return nt})),nt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},nt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},fbb1:function(t,e,n){"use strict";var i=n("9d50");function o(){return/mac/i.test(navigator.platform)}function r(t,e){return(Object(i["a"])(t)||t).button===e}function c(t){return r(t,0)}function a(t){return r(t,1)}function s(t){var e=Object(i["a"])(t)||t;return!!c(t)&&(o()?e.metaKey:e.ctrlKey)}function u(t){var e=Object(i["a"])(t)||t;return c(t)&&e.shiftKey}n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}))},fc933:function(t,e,n){"use strict";var i=n("8e4b"),o=n("6dca"),r=n("fbb1"),c=n("28c3"),a=1500,s="grab";function u(t,e,n,i,o,c){this._dragging=n,this._mouse=c;var s=this,u=i.get("keyboard",!1);o.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",a,(function(t){if(Object(r["a"])(t))return s.activateMove(t.originalEvent,!0),!1})),u&&u.addListener(a,(function(t){if(h(t.keyEvent)&&!s.isActive()){var e=s._mouse.getLastMoveEvent();s.activateMove(e,!!e)}}),"keyboard.keydown"),u&&u.addListener(a,(function(t){h(t.keyEvent)&&s.isActive()&&s.toggle()}),"keyboard.keyup"),t.on("hand.end",(function(e){var n=e.originalEvent.target;if(!e.hover&&!(n instanceof SVGElement))return!1;t.once("hand.ended",(function(){s.activateMove(e.originalEvent,{reactivate:!0})}))})),t.on("hand.move.move",(function(t){var n=e.viewbox().scale;e.scroll({dx:t.dx*n,dy:t.dy*n})})),t.on("hand.move.end",(function(e){var n=e.context,i=n.reactivate;return!Object(r["a"])(e)&&i&&t.once("hand.move.ended",(function(t){s.activateHand(t.originalEvent,!0,!0)})),!1}))}function h(t){return Object(c["d"])(" ",t)}u.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],u.prototype.activateMove=function(t,e,n){"object"===typeof e&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:s,data:{context:n||{}}})},u.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:s,data:{context:{reactivate:n}}})},u.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateHand(t,!!t)},u.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^(hand|hand\.move)$/.test(t.prefix)};e["a"]={__depends__:[i["a"],o["a"]],__init__:["handTool"],handTool:["type",u]}}}]);